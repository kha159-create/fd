(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function qE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ym={exports:{}},eu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lv;function LC(){if(Lv)return eu;Lv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,l){var c=null;if(l!==void 0&&(c=""+l),o.key!==void 0&&(c=""+o.key),"key"in o){l={};for(var d in o)d!=="key"&&(l[d]=o[d])}else l=o;return o=l.ref,{$$typeof:n,type:s,key:c,ref:o!==void 0?o:null,props:l}}return eu.Fragment=e,eu.jsx=t,eu.jsxs=t,eu}var Ov;function OC(){return Ov||(Ov=1,ym.exports=LC()),ym.exports}var _=OC(),_m={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qv;function qC(){if(qv)return Ve;qv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function I(O){return O===null||typeof O!="object"?null:(O=S&&O[S]||O["@@iterator"],typeof O=="function"?O:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,F={};function ee(O,ie,he){this.props=O,this.context=ie,this.refs=F,this.updater=he||V}ee.prototype.isReactComponent={},ee.prototype.setState=function(O,ie){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,ie,"setState")},ee.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function te(){}te.prototype=ee.prototype;function K(O,ie,he){this.props=O,this.context=ie,this.refs=F,this.updater=he||V}var Y=K.prototype=new te;Y.constructor=K,B(Y,ee.prototype),Y.isPureReactComponent=!0;var ae=Array.isArray;function Z(){}var R={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function N(O,ie,he){var _e=he.ref;return{$$typeof:n,type:O,key:ie,ref:_e!==void 0?_e:null,props:he}}function L(O,ie){return N(O.type,ie,O.props)}function k(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function P(O){var ie={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(he){return ie[he]})}var D=/\/+/g;function Ue(O,ie){return typeof O=="object"&&O!==null&&O.key!=null?P(""+O.key):ie.toString(36)}function Be(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(Z,Z):(O.status="pending",O.then(function(ie){O.status==="pending"&&(O.status="fulfilled",O.value=ie)},function(ie){O.status==="pending"&&(O.status="rejected",O.reason=ie)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function Q(O,ie,he,_e,re){var ce=typeof O;(ce==="undefined"||ce==="boolean")&&(O=null);var ve=!1;if(O===null)ve=!0;else switch(ce){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(O.$$typeof){case n:case e:ve=!0;break;case T:return ve=O._init,Q(ve(O._payload),ie,he,_e,re)}}if(ve)return re=re(O),ve=_e===""?"."+Ue(O,0):_e,ae(re)?(he="",ve!=null&&(he=ve.replace(D,"$&/")+"/"),Q(re,ie,he,"",function(An){return An})):re!=null&&(k(re)&&(re=L(re,he+(re.key==null||O&&O.key===re.key?"":(""+re.key).replace(D,"$&/")+"/")+ve)),ie.push(re)),1;ve=0;var Xe=_e===""?".":_e+":";if(ae(O))for(var tt=0;tt<O.length;tt++)_e=O[tt],ce=Xe+Ue(_e,tt),ve+=Q(_e,ie,he,ce,re);else if(tt=I(O),typeof tt=="function")for(O=tt.call(O),tt=0;!(_e=O.next()).done;)_e=_e.value,ce=Xe+Ue(_e,tt++),ve+=Q(_e,ie,he,ce,re);else if(ce==="object"){if(typeof O.then=="function")return Q(Be(O),ie,he,_e,re);throw ie=String(O),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return ve}function fe(O,ie,he){if(O==null)return O;var _e=[],re=0;return Q(O,_e,"","",function(ce){return ie.call(he,ce,re++)}),_e}function Ce(O){if(O._status===-1){var ie=O._result;ie=ie(),ie.then(function(he){(O._status===0||O._status===-1)&&(O._status=1,O._result=he)},function(he){(O._status===0||O._status===-1)&&(O._status=2,O._result=he)}),O._status===-1&&(O._status=0,O._result=ie)}if(O._status===1)return O._result.default;throw O._result}var Fe=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},Qe={map:fe,forEach:function(O,ie,he){fe(O,function(){ie.apply(this,arguments)},he)},count:function(O){var ie=0;return fe(O,function(){ie++}),ie},toArray:function(O){return fe(O,function(ie){return ie})||[]},only:function(O){if(!k(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Ve.Activity=E,Ve.Children=Qe,Ve.Component=ee,Ve.Fragment=t,Ve.Profiler=o,Ve.PureComponent=K,Ve.StrictMode=s,Ve.Suspense=p,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(O){return R.H.useMemoCache(O)}},Ve.cache=function(O){return function(){return O.apply(null,arguments)}},Ve.cacheSignal=function(){return null},Ve.cloneElement=function(O,ie,he){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var _e=B({},O.props),re=O.key;if(ie!=null)for(ce in ie.key!==void 0&&(re=""+ie.key),ie)!M.call(ie,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&ie.ref===void 0||(_e[ce]=ie[ce]);var ce=arguments.length-2;if(ce===1)_e.children=he;else if(1<ce){for(var ve=Array(ce),Xe=0;Xe<ce;Xe++)ve[Xe]=arguments[Xe+2];_e.children=ve}return N(O.type,re,_e)},Ve.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:l,_context:O},O},Ve.createElement=function(O,ie,he){var _e,re={},ce=null;if(ie!=null)for(_e in ie.key!==void 0&&(ce=""+ie.key),ie)M.call(ie,_e)&&_e!=="key"&&_e!=="__self"&&_e!=="__source"&&(re[_e]=ie[_e]);var ve=arguments.length-2;if(ve===1)re.children=he;else if(1<ve){for(var Xe=Array(ve),tt=0;tt<ve;tt++)Xe[tt]=arguments[tt+2];re.children=Xe}if(O&&O.defaultProps)for(_e in ve=O.defaultProps,ve)re[_e]===void 0&&(re[_e]=ve[_e]);return N(O,ce,re)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(O){return{$$typeof:d,render:O}},Ve.isValidElement=k,Ve.lazy=function(O){return{$$typeof:T,_payload:{_status:-1,_result:O},_init:Ce}},Ve.memo=function(O,ie){return{$$typeof:h,type:O,compare:ie===void 0?null:ie}},Ve.startTransition=function(O){var ie=R.T,he={};R.T=he;try{var _e=O(),re=R.S;re!==null&&re(he,_e),typeof _e=="object"&&_e!==null&&typeof _e.then=="function"&&_e.then(Z,Fe)}catch(ce){Fe(ce)}finally{ie!==null&&he.types!==null&&(ie.types=he.types),R.T=ie}},Ve.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ve.use=function(O){return R.H.use(O)},Ve.useActionState=function(O,ie,he){return R.H.useActionState(O,ie,he)},Ve.useCallback=function(O,ie){return R.H.useCallback(O,ie)},Ve.useContext=function(O){return R.H.useContext(O)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(O,ie){return R.H.useDeferredValue(O,ie)},Ve.useEffect=function(O,ie){return R.H.useEffect(O,ie)},Ve.useEffectEvent=function(O){return R.H.useEffectEvent(O)},Ve.useId=function(){return R.H.useId()},Ve.useImperativeHandle=function(O,ie,he){return R.H.useImperativeHandle(O,ie,he)},Ve.useInsertionEffect=function(O,ie){return R.H.useInsertionEffect(O,ie)},Ve.useLayoutEffect=function(O,ie){return R.H.useLayoutEffect(O,ie)},Ve.useMemo=function(O,ie){return R.H.useMemo(O,ie)},Ve.useOptimistic=function(O,ie){return R.H.useOptimistic(O,ie)},Ve.useReducer=function(O,ie,he){return R.H.useReducer(O,ie,he)},Ve.useRef=function(O){return R.H.useRef(O)},Ve.useState=function(O){return R.H.useState(O)},Ve.useSyncExternalStore=function(O,ie,he){return R.H.useSyncExternalStore(O,ie,he)},Ve.useTransition=function(){return R.H.useTransition()},Ve.version="19.2.0",Ve}var Bv;function Sp(){return Bv||(Bv=1,_m.exports=qC()),_m.exports}var me=Sp();const BC=qE(me);var vm={exports:{}},tu={},Tm={exports:{}},Em={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fv;function FC(){return Fv||(Fv=1,(function(n){function e(Q,fe){var Ce=Q.length;Q.push(fe);e:for(;0<Ce;){var Fe=Ce-1>>>1,Qe=Q[Fe];if(0<o(Qe,fe))Q[Fe]=fe,Q[Ce]=Qe,Ce=Fe;else break e}}function t(Q){return Q.length===0?null:Q[0]}function s(Q){if(Q.length===0)return null;var fe=Q[0],Ce=Q.pop();if(Ce!==fe){Q[0]=Ce;e:for(var Fe=0,Qe=Q.length,O=Qe>>>1;Fe<O;){var ie=2*(Fe+1)-1,he=Q[ie],_e=ie+1,re=Q[_e];if(0>o(he,Ce))_e<Qe&&0>o(re,he)?(Q[Fe]=re,Q[_e]=Ce,Fe=_e):(Q[Fe]=he,Q[ie]=Ce,Fe=ie);else if(_e<Qe&&0>o(re,Ce))Q[Fe]=re,Q[_e]=Ce,Fe=_e;else break e}}return fe}function o(Q,fe){var Ce=Q.sortIndex-fe.sortIndex;return Ce!==0?Ce:Q.id-fe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],h=[],T=1,E=null,S=3,I=!1,V=!1,B=!1,F=!1,ee=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function Y(Q){for(var fe=t(h);fe!==null;){if(fe.callback===null)s(h);else if(fe.startTime<=Q)s(h),fe.sortIndex=fe.expirationTime,e(p,fe);else break;fe=t(h)}}function ae(Q){if(B=!1,Y(Q),!V)if(t(p)!==null)V=!0,Z||(Z=!0,P());else{var fe=t(h);fe!==null&&Be(ae,fe.startTime-Q)}}var Z=!1,R=-1,M=5,N=-1;function L(){return F?!0:!(n.unstable_now()-N<M)}function k(){if(F=!1,Z){var Q=n.unstable_now();N=Q;var fe=!0;try{e:{V=!1,B&&(B=!1,te(R),R=-1),I=!0;var Ce=S;try{t:{for(Y(Q),E=t(p);E!==null&&!(E.expirationTime>Q&&L());){var Fe=E.callback;if(typeof Fe=="function"){E.callback=null,S=E.priorityLevel;var Qe=Fe(E.expirationTime<=Q);if(Q=n.unstable_now(),typeof Qe=="function"){E.callback=Qe,Y(Q),fe=!0;break t}E===t(p)&&s(p),Y(Q)}else s(p);E=t(p)}if(E!==null)fe=!0;else{var O=t(h);O!==null&&Be(ae,O.startTime-Q),fe=!1}}break e}finally{E=null,S=Ce,I=!1}fe=void 0}}finally{fe?P():Z=!1}}}var P;if(typeof K=="function")P=function(){K(k)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Ue=D.port2;D.port1.onmessage=k,P=function(){Ue.postMessage(null)}}else P=function(){ee(k,0)};function Be(Q,fe){R=ee(function(){Q(n.unstable_now())},fe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(Q){switch(S){case 1:case 2:case 3:var fe=3;break;default:fe=S}var Ce=S;S=fe;try{return Q()}finally{S=Ce}},n.unstable_requestPaint=function(){F=!0},n.unstable_runWithPriority=function(Q,fe){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var Ce=S;S=Q;try{return fe()}finally{S=Ce}},n.unstable_scheduleCallback=function(Q,fe,Ce){var Fe=n.unstable_now();switch(typeof Ce=="object"&&Ce!==null?(Ce=Ce.delay,Ce=typeof Ce=="number"&&0<Ce?Fe+Ce:Fe):Ce=Fe,Q){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=Ce+Qe,Q={id:T++,callback:fe,priorityLevel:Q,startTime:Ce,expirationTime:Qe,sortIndex:-1},Ce>Fe?(Q.sortIndex=Ce,e(h,Q),t(p)===null&&Q===t(h)&&(B?(te(R),R=-1):B=!0,Be(ae,Ce-Fe))):(Q.sortIndex=Qe,e(p,Q),V||I||(V=!0,Z||(Z=!0,P()))),Q},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(Q){var fe=S;return function(){var Ce=S;S=fe;try{return Q.apply(this,arguments)}finally{S=Ce}}}})(Em)),Em}var zv;function zC(){return zv||(zv=1,Tm.exports=FC()),Tm.exports}var Am={exports:{}},dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hv;function HC(){if(Hv)return dn;Hv=1;var n=Sp();function e(p){var h="https://react.dev/errors/"+p;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)h+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+p+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(p,h,T){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:p,containerInfo:h,implementation:T}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,h){if(p==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,dn.createPortal=function(p,h){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return l(p,h,null,T)},dn.flushSync=function(p){var h=c.T,T=s.p;try{if(c.T=null,s.p=2,p)return p()}finally{c.T=h,s.p=T,s.d.f()}},dn.preconnect=function(p,h){typeof p=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(p,h))},dn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},dn.preinit=function(p,h){if(typeof p=="string"&&h&&typeof h.as=="string"){var T=h.as,E=d(T,h.crossOrigin),S=typeof h.integrity=="string"?h.integrity:void 0,I=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;T==="style"?s.d.S(p,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:I}):T==="script"&&s.d.X(p,{crossOrigin:E,integrity:S,fetchPriority:I,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},dn.preinitModule=function(p,h){if(typeof p=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var T=d(h.as,h.crossOrigin);s.d.M(p,{crossOrigin:T,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(p)},dn.preload=function(p,h){if(typeof p=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var T=h.as,E=d(T,h.crossOrigin);s.d.L(p,T,{crossOrigin:E,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},dn.preloadModule=function(p,h){if(typeof p=="string")if(h){var T=d(h.as,h.crossOrigin);s.d.m(p,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:T,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(p)},dn.requestFormReset=function(p){s.d.r(p)},dn.unstable_batchedUpdates=function(p,h){return p(h)},dn.useFormState=function(p,h,T){return c.H.useFormState(p,h,T)},dn.useFormStatus=function(){return c.H.useHostTransitionStatus()},dn.version="19.2.0",dn}var Gv;function GC(){if(Gv)return Am.exports;Gv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Am.exports=HC(),Am.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jv;function jC(){if(jv)return tu;jv=1;var n=zC(),e=Sp(),t=GC();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,a=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(a=r.return),i=r.return;while(i)}return r.tag===3?a:null}function c(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function p(i){if(l(i)!==i)throw Error(s(188))}function h(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var a=i,u=r;;){var y=a.return;if(y===null)break;var v=y.alternate;if(v===null){if(u=y.return,u!==null){a=u;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===a)return p(y),i;if(v===u)return p(y),r;v=v.sibling}throw Error(s(188))}if(a.return!==u.return)a=y,u=v;else{for(var b=!1,C=y.child;C;){if(C===a){b=!0,a=y,u=v;break}if(C===u){b=!0,u=y,a=v;break}C=C.sibling}if(!b){for(C=v.child;C;){if(C===a){b=!0,a=v,u=y;break}if(C===u){b=!0,u=v,a=y;break}C=C.sibling}if(!b)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:r}function T(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=T(i),r!==null)return r;i=i.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),K=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function P(i){return i===null||typeof i!="object"?null:(i=k&&i[k]||i["@@iterator"],typeof i=="function"?i:null)}var D=Symbol.for("react.client.reference");function Ue(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===D?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case B:return"Fragment";case ee:return"Profiler";case F:return"StrictMode";case ae:return"Suspense";case Z:return"SuspenseList";case N:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case V:return"Portal";case K:return i.displayName||"Context";case te:return(i._context.displayName||"Context")+".Consumer";case Y:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case R:return r=i.displayName||null,r!==null?r:Ue(i.type)||"Memo";case M:r=i._payload,i=i._init;try{return Ue(i(r))}catch{}}return null}var Be=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ce={pending:!1,data:null,method:null,action:null},Fe=[],Qe=-1;function O(i){return{current:i}}function ie(i){0>Qe||(i.current=Fe[Qe],Fe[Qe]=null,Qe--)}function he(i,r){Qe++,Fe[Qe]=i.current,i.current=r}var _e=O(null),re=O(null),ce=O(null),ve=O(null);function Xe(i,r){switch(he(ce,r),he(re,i),he(_e,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?ov(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=ov(r),i=av(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ie(_e),he(_e,i)}function tt(){ie(_e),ie(re),ie(ce)}function An(i){i.memoizedState!==null&&he(ve,i);var r=_e.current,a=av(r,i.type);r!==a&&(he(re,i),he(_e,a))}function bt(i){re.current===i&&(ie(_e),ie(re)),ve.current===i&&(ie(ve),Ql._currentValue=Ce)}var bi,qs;function Hn(i){if(bi===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);bi=r&&r[1]||"",qs=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bi+i+qs}var kr=!1;function Zi(i,r){if(!i||kr)return"";kr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(W){var J=W}Reflect.construct(i,[],oe)}else{try{oe.call()}catch(W){J=W}i.call(oe.prototype)}}else{try{throw Error()}catch(W){J=W}(oe=i())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(W){if(W&&J&&typeof W.stack=="string")return[W.stack,J.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=u.DetermineComponentFrameRoot(),b=v[0],C=v[1];if(b&&C){var U=b.split(`
`),j=C.split(`
`);for(y=u=0;u<U.length&&!U[u].includes("DetermineComponentFrameRoot");)u++;for(;y<j.length&&!j[y].includes("DetermineComponentFrameRoot");)y++;if(u===U.length||y===j.length)for(u=U.length-1,y=j.length-1;1<=u&&0<=y&&U[u]!==j[y];)y--;for(;1<=u&&0<=y;u--,y--)if(U[u]!==j[y]){if(u!==1||y!==1)do if(u--,y--,0>y||U[u]!==j[y]){var ne=`
`+U[u].replace(" at new "," at ");return i.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",i.displayName)),ne}while(1<=u&&0<=y);break}}}finally{kr=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?Hn(a):""}function Bs(i,r){switch(i.tag){case 26:case 27:case 5:return Hn(i.type);case 16:return Hn("Lazy");case 13:return i.child!==r&&r!==null?Hn("Suspense Fallback"):Hn("Suspense");case 19:return Hn("SuspenseList");case 0:case 15:return Zi(i.type,!1);case 11:return Zi(i.type.render,!1);case 1:return Zi(i.type,!0);case 31:return Hn("Activity");default:return""}}function Ur(i){try{var r="",a=null;do r+=Bs(i,a),a=i,i=i.return;while(i);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var xt=Object.prototype.hasOwnProperty,It=n.unstable_scheduleCallback,ri=n.unstable_cancelCallback,Mo=n.unstable_shouldYield,Lr=n.unstable_requestPaint,$=n.unstable_now,de=n.unstable_getCurrentPriorityLevel,pe=n.unstable_ImmediatePriority,Ee=n.unstable_UserBlockingPriority,De=n.unstable_NormalPriority,gt=n.unstable_LowPriority,Or=n.unstable_IdlePriority,qr=n.log,Do=n.unstable_setDisableYieldValue,Dn=null,Jt=null;function Sn(i){if(typeof qr=="function"&&Do(i),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(Dn,i)}catch{}}var ge=Math.clz32?Math.clz32:_n,wt=Math.log,yn=Math.LN2;function _n(i){return i>>>=0,i===0?32:31-(wt(i)/yn|0)|0}var cn=256,Ze=262144,Ut=4194304;function xi(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Ci(i,r,a){var u=i.pendingLanes;if(u===0)return 0;var y=0,v=i.suspendedLanes,b=i.pingedLanes;i=i.warmLanes;var C=u&134217727;return C!==0?(u=C&~v,u!==0?y=xi(u):(b&=C,b!==0?y=xi(b):a||(a=C&~i,a!==0&&(y=xi(a))))):(C=u&~v,C!==0?y=xi(C):b!==0?y=xi(b):a||(a=u&~i,a!==0&&(y=xi(a)))),y===0?0:r!==0&&r!==y&&(r&v)===0&&(v=y&-y,a=r&-r,v>=a||v===32&&(a&4194048)!==0)?r:y}function oi(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function Ef(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Uu(){var i=Ut;return Ut<<=1,(Ut&62914560)===0&&(Ut=4194304),i}function Ii(i){for(var r=[],a=0;31>a;a++)r.push(i);return r}function Br(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Af(i,r,a,u,y,v){var b=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var C=i.entanglements,U=i.expirationTimes,j=i.hiddenUpdates;for(a=b&~a;0<a;){var ne=31-ge(a),oe=1<<ne;C[ne]=0,U[ne]=-1;var J=j[ne];if(J!==null)for(j[ne]=null,ne=0;ne<J.length;ne++){var W=J[ne];W!==null&&(W.lane&=-536870913)}a&=~oe}u!==0&&Fr(i,u,0),v!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=v&~(b&~r))}function Fr(i,r,a){i.pendingLanes|=r,i.suspendedLanes&=~r;var u=31-ge(r);i.entangledLanes|=r,i.entanglements[u]=i.entanglements[u]|1073741824|a&261930}function tl(i,r){var a=i.entangledLanes|=r;for(i=i.entanglements;a;){var u=31-ge(a),y=1<<u;y&r|i[u]&r&&(i[u]|=r),a&=~y}}function nl(i,r){var a=r&-r;return a=(a&42)!==0?1:zr(a),(a&(i.suspendedLanes|r))!==0?0:a}function zr(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function es(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Lu(){var i=fe.p;return i!==0?i:(i=window.event,i===void 0?32:Nv(i.type))}function ai(i,r){var a=fe.p;try{return fe.p=i,r()}finally{fe.p=a}}var li=Math.random().toString(36).slice(2),Lt="__reactFiber$"+li,Xt="__reactProps$"+li,wi="__reactContainer$"+li,Po="__reactEvents$"+li,Sf="__reactListeners$"+li,Ou="__reactHandles$"+li,qu="__reactResources$"+li,Ri="__reactMarker$"+li;function Vo(i){delete i[Lt],delete i[Xt],delete i[Po],delete i[Sf],delete i[Ou]}function Ni(i){var r=i[Lt];if(r)return r;for(var a=i.parentNode;a;){if(r=a[wi]||a[Lt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(i=mv(i);i!==null;){if(a=i[Lt])return a;i=mv(i)}return r}i=a,a=i.parentNode}return null}function Gn(i){if(i=i[Lt]||i[wi]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function Pn(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function Mi(i){var r=i[qu];return r||(r=i[qu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ot(i){i[Ri]=!0}var il=new Set,sl={};function Di(i,r){Pi(i,r),Pi(i+"Capture",r)}function Pi(i,r){for(sl[i]=r,i=0;i<r.length;i++)il.add(r[i])}var rl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ol={},al={};function Bu(i){return xt.call(al,i)?!0:xt.call(ol,i)?!1:rl.test(i)?al[i]=!0:(ol[i]=!0,!1)}function ko(i,r,a){if(Bu(r))if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+a)}}function Vn(i,r,a){if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+a)}}function qt(i,r,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(r,a,""+u)}}function Wt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Fs(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ll(i,r,a){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var y=u.get,v=u.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return y.call(this)},set:function(b){a=""+b,v.call(this,b)}}),Object.defineProperty(i,r,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(b){a=""+b},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function lt(i){if(!i._valueTracker){var r=Fs(i)?"checked":"value";i._valueTracker=ll(i,r,""+i[r])}}function Hr(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var a=r.getValue(),u="";return i&&(u=Fs(i)?i.checked?"true":"false":i.value),i=u,i!==a?(r.setValue(i),!0):!1}function Vi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Gr=/[\n"\\]/g;function bn(i){return i.replace(Gr,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Uo(i,r,a,u,y,v,b,C){i.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.type=b:i.removeAttribute("type"),r!=null?b==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+Wt(r)):i.value!==""+Wt(r)&&(i.value=""+Wt(r)):b!=="submit"&&b!=="reset"||i.removeAttribute("value"),r!=null?ul(i,b,Wt(r)):a!=null?ul(i,b,Wt(a)):u!=null&&i.removeAttribute("value"),y==null&&v!=null&&(i.defaultChecked=!!v),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.name=""+Wt(C):i.removeAttribute("name")}function Fu(i,r,a,u,y,v,b,C){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),r!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||r!=null)){lt(i);return}a=a!=null?""+Wt(a):"",r=r!=null?""+Wt(r):a,C||r===i.value||(i.value=r),i.defaultValue=r}u=u??y,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=C?i.checked:!!u,i.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.name=b),lt(i)}function ul(i,r,a){r==="number"&&Vi(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function zs(i,r,a,u){if(i=i.options,r){r={};for(var y=0;y<a.length;y++)r["$"+a[y]]=!0;for(a=0;a<i.length;a++)y=r.hasOwnProperty("$"+i[a].value),i[a].selected!==y&&(i[a].selected=y),y&&u&&(i[a].defaultSelected=!0)}else{for(a=""+Wt(a),r=null,y=0;y<i.length;y++){if(i[y].value===a){i[y].selected=!0,u&&(i[y].defaultSelected=!0);return}r!==null||i[y].disabled||(r=i[y])}r!==null&&(r.selected=!0)}}function zu(i,r,a){if(r!=null&&(r=""+Wt(r),r!==i.value&&(i.value=r),a==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=a!=null?""+Wt(a):""}function Hs(i,r,a,u){if(r==null){if(u!=null){if(a!=null)throw Error(s(92));if(Be(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),r=a}a=Wt(r),i.defaultValue=a,u=i.textContent,u===a&&u!==""&&u!==null&&(i.value=u),lt(i)}function xn(i,r){if(r){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=r;return}}i.textContent=r}var Hu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cl(i,r,a){var u=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":u?i.setProperty(r,a):typeof a!="number"||a===0||Hu.has(r)?r==="float"?i.cssFloat=a:i[r]=(""+a).trim():i[r]=a+"px"}function dl(i,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var y in r)u=r[y],r.hasOwnProperty(y)&&a[y]!==u&&cl(i,y,u)}else for(var v in r)r.hasOwnProperty(v)&&cl(i,v,r[v])}function Lo(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Gs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Oo(i){return Gs.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ui(){}var fl=null;function jn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var js=null,ki=null;function jr(i){var r=Gn(i);if(r&&(i=r.stateNode)){var a=i[Xt]||null;e:switch(i=r.stateNode,r.type){case"input":if(Uo(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+bn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var u=a[r];if(u!==i&&u.form===i.form){var y=u[Xt]||null;if(!y)throw Error(s(90));Uo(u,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<a.length;r++)u=a[r],u.form===i.form&&Hr(u)}break e;case"textarea":zu(i,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&zs(i,!!a.multiple,r,!1)}}}var qo=!1;function Ys(i,r,a){if(qo)return i(r,a);qo=!0;try{var u=i(r);return u}finally{if(qo=!1,(js!==null||ki!==null)&&(Lc(),js&&(r=js,i=ki,ki=js=null,jr(r),i)))for(r=0;r<i.length;r++)jr(i[r])}}function ci(i,r){var a=i.stateNode;if(a===null)return null;var u=a[Xt]||null;if(u===null)return null;a=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yr=!1;if(Yn)try{var dt={};Object.defineProperty(dt,"passive",{get:function(){Yr=!0}}),window.addEventListener("test",dt,dt),window.removeEventListener("test",dt,dt)}catch{Yr=!1}var Ui=null,hl=null,Jr=null;function ml(){if(Jr)return Jr;var i,r=hl,a=r.length,u,y="value"in Ui?Ui.value:Ui.textContent,v=y.length;for(i=0;i<a&&r[i]===y[i];i++);var b=a-i;for(u=1;u<=b&&r[a-u]===y[v-u];u++);return Jr=y.slice(i,1<u?1-u:void 0)}function Kr(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function ts(){return!0}function di(){return!1}function sn(i){function r(a,u,y,v,b){this._reactName=a,this._targetInst=y,this.type=u,this.nativeEvent=v,this.target=b,this.currentTarget=null;for(var C in i)i.hasOwnProperty(C)&&(a=i[C],this[C]=a?a(v):v[C]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?ts:di,this.isPropagationStopped=di,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ts)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ts)},persist:function(){},isPersistent:ts}),r}var ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Li=sn(ns),Js=E({},ns,{view:0,detail:0}),pl=sn(Js),Ks,Bo,Oi,Fo=E({},Js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$s,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Oi&&(Oi&&i.type==="mousemove"?(Ks=i.screenX-Oi.screenX,Bo=i.screenY-Oi.screenY):Bo=Ks=0,Oi=i),Ks)},movementY:function(i){return"movementY"in i?i.movementY:Bo}}),gl=sn(Fo),$r=E({},Fo,{dataTransfer:0}),ju=sn($r),Yu=E({},Js,{relatedTarget:0}),Qr=sn(Yu),yl=E({},ns,{animationName:0,elapsedTime:0,pseudoElement:0}),Ju=sn(yl),zo=E({},ns,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Ku=sn(zo),$u=E({},ns,{data:0}),qi=sn($u),Qu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zu(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=Wu[i])?!!r[i]:!1}function $s(){return Zu}var vn=E({},Js,{key:function(i){if(i.key){var r=Qu[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Kr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Xu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$s,charCode:function(i){return i.type==="keypress"?Kr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Kr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ec=sn(vn),tc=E({},Fo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),is=sn(tc),m=E({},Js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$s}),A=sn(m),x=E({},ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=sn(x),H=E({},Fo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),X=sn(H),ye=E({},ns,{newState:0,oldState:0}),Le=sn(ye),Mt=[9,13,27,32],rt=Yn&&"CompositionEvent"in window,At=null;Yn&&"documentMode"in document&&(At=document.documentMode);var Jn=Yn&&"TextEvent"in window&&!At,Bi=Yn&&(!rt||At&&8<At&&11>=At),fi=" ",hi=!1;function Xr(i,r){switch(i){case"keyup":return Mt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ho(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Go=!1;function ax(i,r){switch(i){case"compositionend":return Ho(r);case"keypress":return r.which!==32?null:(hi=!0,fi);case"textInput":return i=r.data,i===fi&&hi?null:i;default:return null}}function lx(i,r){if(Go)return i==="compositionend"||!rt&&Xr(i,r)?(i=ml(),Jr=hl=Ui=null,Go=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Bi&&r.locale!=="ko"?null:r.data;default:return null}}var ux={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yg(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!ux[i.type]:r==="textarea"}function _g(i,r,a,u){js?ki?ki.push(u):ki=[u]:js=u,r=Gc(r,"onChange"),0<r.length&&(a=new Li("onChange","change",null,a,u),i.push({event:a,listeners:r}))}var _l=null,vl=null;function cx(i){ev(i,0)}function nc(i){var r=Pn(i);if(Hr(r))return i}function vg(i,r){if(i==="change")return r}var Tg=!1;if(Yn){var bf;if(Yn){var xf="oninput"in document;if(!xf){var Eg=document.createElement("div");Eg.setAttribute("oninput","return;"),xf=typeof Eg.oninput=="function"}bf=xf}else bf=!1;Tg=bf&&(!document.documentMode||9<document.documentMode)}function Ag(){_l&&(_l.detachEvent("onpropertychange",Sg),vl=_l=null)}function Sg(i){if(i.propertyName==="value"&&nc(vl)){var r=[];_g(r,vl,i,jn(i)),Ys(cx,r)}}function dx(i,r,a){i==="focusin"?(Ag(),_l=r,vl=a,_l.attachEvent("onpropertychange",Sg)):i==="focusout"&&Ag()}function fx(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return nc(vl)}function hx(i,r){if(i==="click")return nc(r)}function mx(i,r){if(i==="input"||i==="change")return nc(r)}function px(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var kn=typeof Object.is=="function"?Object.is:px;function Tl(i,r){if(kn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var a=Object.keys(i),u=Object.keys(r);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var y=a[u];if(!xt.call(r,y)||!kn(i[y],r[y]))return!1}return!0}function bg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function xg(i,r){var a=bg(i);i=0;for(var u;a;){if(a.nodeType===3){if(u=i+a.textContent.length,i<=r&&u>=r)return{node:a,offset:r-i};i=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=bg(a)}}function Cg(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?Cg(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function Ig(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Vi(i.document);r instanceof i.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)i=r.contentWindow;else break;r=Vi(i.document)}return r}function Cf(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var gx=Yn&&"documentMode"in document&&11>=document.documentMode,jo=null,If=null,El=null,wf=!1;function wg(i,r,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;wf||jo==null||jo!==Vi(u)||(u=jo,"selectionStart"in u&&Cf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),El&&Tl(El,u)||(El=u,u=Gc(If,"onSelect"),0<u.length&&(r=new Li("onSelect","select",null,r,a),i.push({event:r,listeners:u}),r.target=jo)))}function Wr(i,r){var a={};return a[i.toLowerCase()]=r.toLowerCase(),a["Webkit"+i]="webkit"+r,a["Moz"+i]="moz"+r,a}var Yo={animationend:Wr("Animation","AnimationEnd"),animationiteration:Wr("Animation","AnimationIteration"),animationstart:Wr("Animation","AnimationStart"),transitionrun:Wr("Transition","TransitionRun"),transitionstart:Wr("Transition","TransitionStart"),transitioncancel:Wr("Transition","TransitionCancel"),transitionend:Wr("Transition","TransitionEnd")},Rf={},Rg={};Yn&&(Rg=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function Zr(i){if(Rf[i])return Rf[i];if(!Yo[i])return i;var r=Yo[i],a;for(a in r)if(r.hasOwnProperty(a)&&a in Rg)return Rf[i]=r[a];return i}var Ng=Zr("animationend"),Mg=Zr("animationiteration"),Dg=Zr("animationstart"),yx=Zr("transitionrun"),_x=Zr("transitionstart"),vx=Zr("transitioncancel"),Pg=Zr("transitionend"),Vg=new Map,Nf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Nf.push("scrollEnd");function mi(i,r){Vg.set(i,r),Di(r,[i])}var ic=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Kn=[],Jo=0,Mf=0;function sc(){for(var i=Jo,r=Mf=Jo=0;r<i;){var a=Kn[r];Kn[r++]=null;var u=Kn[r];Kn[r++]=null;var y=Kn[r];Kn[r++]=null;var v=Kn[r];if(Kn[r++]=null,u!==null&&y!==null){var b=u.pending;b===null?y.next=y:(y.next=b.next,b.next=y),u.pending=y}v!==0&&kg(a,y,v)}}function rc(i,r,a,u){Kn[Jo++]=i,Kn[Jo++]=r,Kn[Jo++]=a,Kn[Jo++]=u,Mf|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Df(i,r,a,u){return rc(i,r,a,u),oc(i)}function eo(i,r){return rc(i,null,null,r),oc(i)}function kg(i,r,a){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a);for(var y=!1,v=i.return;v!==null;)v.childLanes|=a,u=v.alternate,u!==null&&(u.childLanes|=a),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(y=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,y&&r!==null&&(y=31-ge(a),i=v.hiddenUpdates,u=i[y],u===null?i[y]=[r]:u.push(r),r.lane=a|536870912),v):null}function oc(i){if(50<Hl)throw Hl=0,Fh=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Ko={};function Tx(i,r,a,u){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(i,r,a,u){return new Tx(i,r,a,u)}function Pf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ss(i,r){var a=i.alternate;return a===null?(a=Un(i.tag,r,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=r,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,r=i.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Ug(i,r){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,r=a.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function ac(i,r,a,u,y,v){var b=0;if(u=i,typeof i=="function")Pf(i)&&(b=1);else if(typeof i=="string")b=xC(i,a,_e.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case N:return i=Un(31,a,r,y),i.elementType=N,i.lanes=v,i;case B:return to(a.children,y,v,r);case F:b=8,y|=24;break;case ee:return i=Un(12,a,r,y|2),i.elementType=ee,i.lanes=v,i;case ae:return i=Un(13,a,r,y),i.elementType=ae,i.lanes=v,i;case Z:return i=Un(19,a,r,y),i.elementType=Z,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case K:b=10;break e;case te:b=9;break e;case Y:b=11;break e;case R:b=14;break e;case M:b=16,u=null;break e}b=29,a=Error(s(130,i===null?"null":typeof i,"")),u=null}return r=Un(b,a,r,y),r.elementType=i,r.type=u,r.lanes=v,r}function to(i,r,a,u){return i=Un(7,i,u,r),i.lanes=a,i}function Vf(i,r,a){return i=Un(6,i,null,r),i.lanes=a,i}function Lg(i){var r=Un(18,null,null,0);return r.stateNode=i,r}function kf(i,r,a){return r=Un(4,i.children!==null?i.children:[],i.key,r),r.lanes=a,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var Og=new WeakMap;function $n(i,r){if(typeof i=="object"&&i!==null){var a=Og.get(i);return a!==void 0?a:(r={value:i,source:r,stack:Ur(r)},Og.set(i,r),r)}return{value:i,source:r,stack:Ur(r)}}var $o=[],Qo=0,lc=null,Al=0,Qn=[],Xn=0,Qs=null,Fi=1,zi="";function rs(i,r){$o[Qo++]=Al,$o[Qo++]=lc,lc=i,Al=r}function qg(i,r,a){Qn[Xn++]=Fi,Qn[Xn++]=zi,Qn[Xn++]=Qs,Qs=i;var u=Fi;i=zi;var y=32-ge(u)-1;u&=~(1<<y),a+=1;var v=32-ge(r)+y;if(30<v){var b=y-y%5;v=(u&(1<<b)-1).toString(32),u>>=b,y-=b,Fi=1<<32-ge(r)+y|a<<y|u,zi=v+i}else Fi=1<<v|a<<y|u,zi=i}function Uf(i){i.return!==null&&(rs(i,1),qg(i,1,0))}function Lf(i){for(;i===lc;)lc=$o[--Qo],$o[Qo]=null,Al=$o[--Qo],$o[Qo]=null;for(;i===Qs;)Qs=Qn[--Xn],Qn[Xn]=null,zi=Qn[--Xn],Qn[Xn]=null,Fi=Qn[--Xn],Qn[Xn]=null}function Bg(i,r){Qn[Xn++]=Fi,Qn[Xn++]=zi,Qn[Xn++]=Qs,Fi=r.id,zi=r.overflow,Qs=i}var rn=null,_t=null,$e=!1,Xs=null,Wn=!1,Of=Error(s(519));function Ws(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Sl($n(r,i)),Of}function Fg(i){var r=i.stateNode,a=i.type,u=i.memoizedProps;switch(r[Lt]=i,r[Xt]=u,a){case"dialog":He("cancel",r),He("close",r);break;case"iframe":case"object":case"embed":He("load",r);break;case"video":case"audio":for(a=0;a<jl.length;a++)He(jl[a],r);break;case"source":He("error",r);break;case"img":case"image":case"link":He("error",r),He("load",r);break;case"details":He("toggle",r);break;case"input":He("invalid",r),Fu(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":He("invalid",r);break;case"textarea":He("invalid",r),Hs(r,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||u.suppressHydrationWarning===!0||sv(r.textContent,a)?(u.popover!=null&&(He("beforetoggle",r),He("toggle",r)),u.onScroll!=null&&He("scroll",r),u.onScrollEnd!=null&&He("scrollend",r),u.onClick!=null&&(r.onclick=ui),r=!0):r=!1,r||Ws(i,!0)}function zg(i){for(rn=i.return;rn;)switch(rn.tag){case 5:case 31:case 13:Wn=!1;return;case 27:case 3:Wn=!0;return;default:rn=rn.return}}function Xo(i){if(i!==rn)return!1;if(!$e)return zg(i),$e=!0,!1;var r=i.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||nm(i.type,i.memoizedProps)),a=!a),a&&_t&&Ws(i),zg(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));_t=hv(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));_t=hv(i)}else r===27?(r=_t,fr(i.type)?(i=am,am=null,_t=i):_t=r):_t=rn?ei(i.stateNode.nextSibling):null;return!0}function no(){_t=rn=null,$e=!1}function qf(){var i=Xs;return i!==null&&(Rn===null?Rn=i:Rn.push.apply(Rn,i),Xs=null),i}function Sl(i){Xs===null?Xs=[i]:Xs.push(i)}var Bf=O(null),io=null,os=null;function Zs(i,r,a){he(Bf,r._currentValue),r._currentValue=a}function as(i){i._currentValue=Bf.current,ie(Bf)}function Ff(i,r,a){for(;i!==null;){var u=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),i===a)break;i=i.return}}function zf(i,r,a,u){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var v=y.dependencies;if(v!==null){var b=y.child;v=v.firstContext;e:for(;v!==null;){var C=v;v=y;for(var U=0;U<r.length;U++)if(C.context===r[U]){v.lanes|=a,C=v.alternate,C!==null&&(C.lanes|=a),Ff(v.return,a,i),u||(b=null);break e}v=C.next}}else if(y.tag===18){if(b=y.return,b===null)throw Error(s(341));b.lanes|=a,v=b.alternate,v!==null&&(v.lanes|=a),Ff(b,a,i),b=null}else b=y.child;if(b!==null)b.return=y;else for(b=y;b!==null;){if(b===i){b=null;break}if(y=b.sibling,y!==null){y.return=b.return,b=y;break}b=b.return}y=b}}function Wo(i,r,a,u){i=null;for(var y=r,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var b=y.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var C=y.type;kn(y.pendingProps.value,b.value)||(i!==null?i.push(C):i=[C])}}else if(y===ve.current){if(b=y.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(Ql):i=[Ql])}y=y.return}i!==null&&zf(r,i,a,u),r.flags|=262144}function uc(i){for(i=i.firstContext;i!==null;){if(!kn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function so(i){io=i,os=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function on(i){return Hg(io,i)}function cc(i,r){return io===null&&so(i),Hg(i,r)}function Hg(i,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},os===null){if(i===null)throw Error(s(308));os=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else os=os.next=r;return a}var Ex=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(a,u){i.push(u)}};this.abort=function(){r.aborted=!0,i.forEach(function(a){return a()})}},Ax=n.unstable_scheduleCallback,Sx=n.unstable_NormalPriority,Bt={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hf(){return{controller:new Ex,data:new Map,refCount:0}}function bl(i){i.refCount--,i.refCount===0&&Ax(Sx,function(){i.controller.abort()})}var xl=null,Gf=0,Zo=0,ea=null;function bx(i,r){if(xl===null){var a=xl=[];Gf=0,Zo=Jh(),ea={status:"pending",value:void 0,then:function(u){a.push(u)}}}return Gf++,r.then(Gg,Gg),r}function Gg(){if(--Gf===0&&xl!==null){ea!==null&&(ea.status="fulfilled");var i=xl;xl=null,Zo=0,ea=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function xx(i,r){var a=[],u={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return i.then(function(){u.status="fulfilled",u.value=r;for(var y=0;y<a.length;y++)(0,a[y])(r)},function(y){for(u.status="rejected",u.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),u}var jg=Q.S;Q.S=function(i,r){w_=$(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&bx(i,r),jg!==null&&jg(i,r)};var ro=O(null);function jf(){var i=ro.current;return i!==null?i:pt.pooledCache}function dc(i,r){r===null?he(ro,ro.current):he(ro,r.pool)}function Yg(){var i=jf();return i===null?null:{parent:Bt._currentValue,pool:i}}var ta=Error(s(460)),Yf=Error(s(474)),fc=Error(s(542)),hc={then:function(){}};function Jg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Kg(i,r,a){switch(a=i[a],a===void 0?i.push(r):a!==r&&(r.then(ui,ui),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Qg(i),i;default:if(typeof r.status=="string")r.then(ui,ui);else{if(i=pt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(u){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=u}},function(u){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Qg(i),i}throw ao=r,ta}}function oo(i){try{var r=i._init;return r(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ao=a,ta):a}}var ao=null;function $g(){if(ao===null)throw Error(s(459));var i=ao;return ao=null,i}function Qg(i){if(i===ta||i===fc)throw Error(s(483))}var na=null,Cl=0;function mc(i){var r=Cl;return Cl+=1,na===null&&(na=[]),Kg(na,i,r)}function Il(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function pc(i,r){throw r.$$typeof===S?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Xg(i){function r(z,q){if(i){var G=z.deletions;G===null?(z.deletions=[q],z.flags|=16):G.push(q)}}function a(z,q){if(!i)return null;for(;q!==null;)r(z,q),q=q.sibling;return null}function u(z){for(var q=new Map;z!==null;)z.key!==null?q.set(z.key,z):q.set(z.index,z),z=z.sibling;return q}function y(z,q){return z=ss(z,q),z.index=0,z.sibling=null,z}function v(z,q,G){return z.index=G,i?(G=z.alternate,G!==null?(G=G.index,G<q?(z.flags|=67108866,q):G):(z.flags|=67108866,q)):(z.flags|=1048576,q)}function b(z){return i&&z.alternate===null&&(z.flags|=67108866),z}function C(z,q,G,se){return q===null||q.tag!==6?(q=Vf(G,z.mode,se),q.return=z,q):(q=y(q,G),q.return=z,q)}function U(z,q,G,se){var Ie=G.type;return Ie===B?ne(z,q,G.props.children,se,G.key):q!==null&&(q.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===M&&oo(Ie)===q.type)?(q=y(q,G.props),Il(q,G),q.return=z,q):(q=ac(G.type,G.key,G.props,null,z.mode,se),Il(q,G),q.return=z,q)}function j(z,q,G,se){return q===null||q.tag!==4||q.stateNode.containerInfo!==G.containerInfo||q.stateNode.implementation!==G.implementation?(q=kf(G,z.mode,se),q.return=z,q):(q=y(q,G.children||[]),q.return=z,q)}function ne(z,q,G,se,Ie){return q===null||q.tag!==7?(q=to(G,z.mode,se,Ie),q.return=z,q):(q=y(q,G),q.return=z,q)}function oe(z,q,G){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Vf(""+q,z.mode,G),q.return=z,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case I:return G=ac(q.type,q.key,q.props,null,z.mode,G),Il(G,q),G.return=z,G;case V:return q=kf(q,z.mode,G),q.return=z,q;case M:return q=oo(q),oe(z,q,G)}if(Be(q)||P(q))return q=to(q,z.mode,G,null),q.return=z,q;if(typeof q.then=="function")return oe(z,mc(q),G);if(q.$$typeof===K)return oe(z,cc(z,q),G);pc(z,q)}return null}function J(z,q,G,se){var Ie=q!==null?q.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Ie!==null?null:C(z,q,""+G,se);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case I:return G.key===Ie?U(z,q,G,se):null;case V:return G.key===Ie?j(z,q,G,se):null;case M:return G=oo(G),J(z,q,G,se)}if(Be(G)||P(G))return Ie!==null?null:ne(z,q,G,se,null);if(typeof G.then=="function")return J(z,q,mc(G),se);if(G.$$typeof===K)return J(z,q,cc(z,G),se);pc(z,G)}return null}function W(z,q,G,se,Ie){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return z=z.get(G)||null,C(q,z,""+se,Ie);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case I:return z=z.get(se.key===null?G:se.key)||null,U(q,z,se,Ie);case V:return z=z.get(se.key===null?G:se.key)||null,j(q,z,se,Ie);case M:return se=oo(se),W(z,q,G,se,Ie)}if(Be(se)||P(se))return z=z.get(G)||null,ne(q,z,se,Ie,null);if(typeof se.then=="function")return W(z,q,G,mc(se),Ie);if(se.$$typeof===K)return W(z,q,G,cc(q,se),Ie);pc(q,se)}return null}function Ae(z,q,G,se){for(var Ie=null,nt=null,xe=q,qe=q=0,je=null;xe!==null&&qe<G.length;qe++){xe.index>qe?(je=xe,xe=null):je=xe.sibling;var it=J(z,xe,G[qe],se);if(it===null){xe===null&&(xe=je);break}i&&xe&&it.alternate===null&&r(z,xe),q=v(it,q,qe),nt===null?Ie=it:nt.sibling=it,nt=it,xe=je}if(qe===G.length)return a(z,xe),$e&&rs(z,qe),Ie;if(xe===null){for(;qe<G.length;qe++)xe=oe(z,G[qe],se),xe!==null&&(q=v(xe,q,qe),nt===null?Ie=xe:nt.sibling=xe,nt=xe);return $e&&rs(z,qe),Ie}for(xe=u(xe);qe<G.length;qe++)je=W(xe,z,qe,G[qe],se),je!==null&&(i&&je.alternate!==null&&xe.delete(je.key===null?qe:je.key),q=v(je,q,qe),nt===null?Ie=je:nt.sibling=je,nt=je);return i&&xe.forEach(function(yr){return r(z,yr)}),$e&&rs(z,qe),Ie}function Re(z,q,G,se){if(G==null)throw Error(s(151));for(var Ie=null,nt=null,xe=q,qe=q=0,je=null,it=G.next();xe!==null&&!it.done;qe++,it=G.next()){xe.index>qe?(je=xe,xe=null):je=xe.sibling;var yr=J(z,xe,it.value,se);if(yr===null){xe===null&&(xe=je);break}i&&xe&&yr.alternate===null&&r(z,xe),q=v(yr,q,qe),nt===null?Ie=yr:nt.sibling=yr,nt=yr,xe=je}if(it.done)return a(z,xe),$e&&rs(z,qe),Ie;if(xe===null){for(;!it.done;qe++,it=G.next())it=oe(z,it.value,se),it!==null&&(q=v(it,q,qe),nt===null?Ie=it:nt.sibling=it,nt=it);return $e&&rs(z,qe),Ie}for(xe=u(xe);!it.done;qe++,it=G.next())it=W(xe,z,qe,it.value,se),it!==null&&(i&&it.alternate!==null&&xe.delete(it.key===null?qe:it.key),q=v(it,q,qe),nt===null?Ie=it:nt.sibling=it,nt=it);return i&&xe.forEach(function(UC){return r(z,UC)}),$e&&rs(z,qe),Ie}function mt(z,q,G,se){if(typeof G=="object"&&G!==null&&G.type===B&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case I:e:{for(var Ie=G.key;q!==null;){if(q.key===Ie){if(Ie=G.type,Ie===B){if(q.tag===7){a(z,q.sibling),se=y(q,G.props.children),se.return=z,z=se;break e}}else if(q.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===M&&oo(Ie)===q.type){a(z,q.sibling),se=y(q,G.props),Il(se,G),se.return=z,z=se;break e}a(z,q);break}else r(z,q);q=q.sibling}G.type===B?(se=to(G.props.children,z.mode,se,G.key),se.return=z,z=se):(se=ac(G.type,G.key,G.props,null,z.mode,se),Il(se,G),se.return=z,z=se)}return b(z);case V:e:{for(Ie=G.key;q!==null;){if(q.key===Ie)if(q.tag===4&&q.stateNode.containerInfo===G.containerInfo&&q.stateNode.implementation===G.implementation){a(z,q.sibling),se=y(q,G.children||[]),se.return=z,z=se;break e}else{a(z,q);break}else r(z,q);q=q.sibling}se=kf(G,z.mode,se),se.return=z,z=se}return b(z);case M:return G=oo(G),mt(z,q,G,se)}if(Be(G))return Ae(z,q,G,se);if(P(G)){if(Ie=P(G),typeof Ie!="function")throw Error(s(150));return G=Ie.call(G),Re(z,q,G,se)}if(typeof G.then=="function")return mt(z,q,mc(G),se);if(G.$$typeof===K)return mt(z,q,cc(z,G),se);pc(z,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,q!==null&&q.tag===6?(a(z,q.sibling),se=y(q,G),se.return=z,z=se):(a(z,q),se=Vf(G,z.mode,se),se.return=z,z=se),b(z)):a(z,q)}return function(z,q,G,se){try{Cl=0;var Ie=mt(z,q,G,se);return na=null,Ie}catch(xe){if(xe===ta||xe===fc)throw xe;var nt=Un(29,xe,null,z.mode);return nt.lanes=se,nt.return=z,nt}finally{}}}var lo=Xg(!0),Wg=Xg(!1),er=!1;function Jf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Kf(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function tr(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function nr(i,r,a){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(ot&2)!==0){var y=u.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),u.pending=r,r=oc(i),kg(i,null,a),r}return rc(i,u,r,a),oc(i)}function wl(i,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var u=r.lanes;u&=i.pendingLanes,a|=u,r.lanes=a,tl(i,a)}}function $f(i,r){var a=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var y=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?y=v=b:v=v.next=b,a=a.next}while(a!==null);v===null?y=v=r:v=v.next=r}else y=v=r;a={baseState:u.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:u.shared,callbacks:u.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=r:i.next=r,a.lastBaseUpdate=r}var Qf=!1;function Rl(){if(Qf){var i=ea;if(i!==null)throw i}}function Nl(i,r,a,u){Qf=!1;var y=i.updateQueue;er=!1;var v=y.firstBaseUpdate,b=y.lastBaseUpdate,C=y.shared.pending;if(C!==null){y.shared.pending=null;var U=C,j=U.next;U.next=null,b===null?v=j:b.next=j,b=U;var ne=i.alternate;ne!==null&&(ne=ne.updateQueue,C=ne.lastBaseUpdate,C!==b&&(C===null?ne.firstBaseUpdate=j:C.next=j,ne.lastBaseUpdate=U))}if(v!==null){var oe=y.baseState;b=0,ne=j=U=null,C=v;do{var J=C.lane&-536870913,W=J!==C.lane;if(W?(Ge&J)===J:(u&J)===J){J!==0&&J===Zo&&(Qf=!0),ne!==null&&(ne=ne.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Ae=i,Re=C;J=r;var mt=a;switch(Re.tag){case 1:if(Ae=Re.payload,typeof Ae=="function"){oe=Ae.call(mt,oe,J);break e}oe=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Re.payload,J=typeof Ae=="function"?Ae.call(mt,oe,J):Ae,J==null)break e;oe=E({},oe,J);break e;case 2:er=!0}}J=C.callback,J!==null&&(i.flags|=64,W&&(i.flags|=8192),W=y.callbacks,W===null?y.callbacks=[J]:W.push(J))}else W={lane:J,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ne===null?(j=ne=W,U=oe):ne=ne.next=W,b|=J;if(C=C.next,C===null){if(C=y.shared.pending,C===null)break;W=C,C=W.next,W.next=null,y.lastBaseUpdate=W,y.shared.pending=null}}while(!0);ne===null&&(U=oe),y.baseState=U,y.firstBaseUpdate=j,y.lastBaseUpdate=ne,v===null&&(y.shared.lanes=0),ar|=b,i.lanes=b,i.memoizedState=oe}}function Zg(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function ey(i,r){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)Zg(a[i],r)}var ia=O(null),gc=O(0);function ty(i,r){i=gs,he(gc,i),he(ia,r),gs=i|r.baseLanes}function Xf(){he(gc,gs),he(ia,ia.current)}function Wf(){gs=gc.current,ie(ia),ie(gc)}var Ln=O(null),Zn=null;function ir(i){var r=i.alternate;he(Dt,Dt.current&1),he(Ln,i),Zn===null&&(r===null||ia.current!==null||r.memoizedState!==null)&&(Zn=i)}function Zf(i){he(Dt,Dt.current),he(Ln,i),Zn===null&&(Zn=i)}function ny(i){i.tag===22?(he(Dt,Dt.current),he(Ln,i),Zn===null&&(Zn=i)):sr()}function sr(){he(Dt,Dt.current),he(Ln,Ln.current)}function On(i){ie(Ln),Zn===i&&(Zn=null),ie(Dt)}var Dt=O(0);function yc(i){for(var r=i;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||rm(a)||om(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ls=0,Oe=null,ft=null,Ft=null,_c=!1,sa=!1,uo=!1,vc=0,Ml=0,ra=null,Cx=0;function Rt(){throw Error(s(321))}function eh(i,r){if(r===null)return!1;for(var a=0;a<r.length&&a<i.length;a++)if(!kn(i[a],r[a]))return!1;return!0}function th(i,r,a,u,y,v){return ls=v,Oe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Q.H=i===null||i.memoizedState===null?qy:gh,uo=!1,v=a(u,y),uo=!1,sa&&(v=sy(r,a,u,y)),iy(i),v}function iy(i){Q.H=Vl;var r=ft!==null&&ft.next!==null;if(ls=0,Ft=ft=Oe=null,_c=!1,Ml=0,ra=null,r)throw Error(s(300));i===null||zt||(i=i.dependencies,i!==null&&uc(i)&&(zt=!0))}function sy(i,r,a,u){Oe=i;var y=0;do{if(sa&&(ra=null),Ml=0,sa=!1,25<=y)throw Error(s(301));if(y+=1,Ft=ft=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}Q.H=By,v=r(a,u)}while(sa);return v}function Ix(){var i=Q.H,r=i.useState()[0];return r=typeof r.then=="function"?Dl(r):r,i=i.useState()[0],(ft!==null?ft.memoizedState:null)!==i&&(Oe.flags|=1024),r}function nh(){var i=vc!==0;return vc=0,i}function ih(i,r,a){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~a}function sh(i){if(_c){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}_c=!1}ls=0,Ft=ft=Oe=null,sa=!1,Ml=vc=0,ra=null}function Tn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?Oe.memoizedState=Ft=i:Ft=Ft.next=i,Ft}function Pt(){if(ft===null){var i=Oe.alternate;i=i!==null?i.memoizedState:null}else i=ft.next;var r=Ft===null?Oe.memoizedState:Ft.next;if(r!==null)Ft=r,ft=i;else{if(i===null)throw Oe.alternate===null?Error(s(467)):Error(s(310));ft=i,i={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},Ft===null?Oe.memoizedState=Ft=i:Ft=Ft.next=i}return Ft}function Tc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dl(i){var r=Ml;return Ml+=1,ra===null&&(ra=[]),i=Kg(ra,i,r),r=Oe,(Ft===null?r.memoizedState:Ft.next)===null&&(r=r.alternate,Q.H=r===null||r.memoizedState===null?qy:gh),i}function Ec(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Dl(i);if(i.$$typeof===K)return on(i)}throw Error(s(438,String(i)))}function rh(i){var r=null,a=Oe.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var u=Oe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Tc(),Oe.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(i),u=0;u<i;u++)a[u]=L;return r.index++,a}function us(i,r){return typeof r=="function"?r(i):r}function Ac(i){var r=Pt();return oh(r,ft,i)}function oh(i,r,a){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var y=i.baseQueue,v=u.pending;if(v!==null){if(y!==null){var b=y.next;y.next=v.next,v.next=b}r.baseQueue=y=v,u.pending=null}if(v=i.baseState,y===null)i.memoizedState=v;else{r=y.next;var C=b=null,U=null,j=r,ne=!1;do{var oe=j.lane&-536870913;if(oe!==j.lane?(Ge&oe)===oe:(ls&oe)===oe){var J=j.revertLane;if(J===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),oe===Zo&&(ne=!0);else if((ls&J)===J){j=j.next,J===Zo&&(ne=!0);continue}else oe={lane:0,revertLane:j.revertLane,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},U===null?(C=U=oe,b=v):U=U.next=oe,Oe.lanes|=J,ar|=J;oe=j.action,uo&&a(v,oe),v=j.hasEagerState?j.eagerState:a(v,oe)}else J={lane:oe,revertLane:j.revertLane,gesture:j.gesture,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},U===null?(C=U=J,b=v):U=U.next=J,Oe.lanes|=oe,ar|=oe;j=j.next}while(j!==null&&j!==r);if(U===null?b=v:U.next=C,!kn(v,i.memoizedState)&&(zt=!0,ne&&(a=ea,a!==null)))throw a;i.memoizedState=v,i.baseState=b,i.baseQueue=U,u.lastRenderedState=v}return y===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function ah(i){var r=Pt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var u=a.dispatch,y=a.pending,v=r.memoizedState;if(y!==null){a.pending=null;var b=y=y.next;do v=i(v,b.action),b=b.next;while(b!==y);kn(v,r.memoizedState)||(zt=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),a.lastRenderedState=v}return[v,u]}function ry(i,r,a){var u=Oe,y=Pt(),v=$e;if(v){if(a===void 0)throw Error(s(407));a=a()}else a=r();var b=!kn((ft||y).memoizedState,a);if(b&&(y.memoizedState=a,zt=!0),y=y.queue,ch(ly.bind(null,u,y,i),[i]),y.getSnapshot!==r||b||Ft!==null&&Ft.memoizedState.tag&1){if(u.flags|=2048,oa(9,{destroy:void 0},ay.bind(null,u,y,a,r),null),pt===null)throw Error(s(349));v||(ls&127)!==0||oy(u,r,a)}return a}function oy(i,r,a){i.flags|=16384,i={getSnapshot:r,value:a},r=Oe.updateQueue,r===null?(r=Tc(),Oe.updateQueue=r,r.stores=[i]):(a=r.stores,a===null?r.stores=[i]:a.push(i))}function ay(i,r,a,u){r.value=a,r.getSnapshot=u,uy(r)&&cy(i)}function ly(i,r,a){return a(function(){uy(r)&&cy(i)})}function uy(i){var r=i.getSnapshot;i=i.value;try{var a=r();return!kn(i,a)}catch{return!0}}function cy(i){var r=eo(i,2);r!==null&&Nn(r,i,2)}function lh(i){var r=Tn();if(typeof i=="function"){var a=i;if(i=a(),uo){Sn(!0);try{a()}finally{Sn(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:i},r}function dy(i,r,a,u){return i.baseState=a,oh(i,ft,typeof u=="function"?u:us)}function wx(i,r,a,u,y){if(xc(i))throw Error(s(485));if(i=r.action,i!==null){var v={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){v.listeners.push(b)}};Q.T!==null?a(!0):v.isTransition=!1,u(v),a=r.pending,a===null?(v.next=r.pending=v,fy(r,v)):(v.next=a.next,r.pending=a.next=v)}}function fy(i,r){var a=r.action,u=r.payload,y=i.state;if(r.isTransition){var v=Q.T,b={};Q.T=b;try{var C=a(y,u),U=Q.S;U!==null&&U(b,C),hy(i,r,C)}catch(j){uh(i,r,j)}finally{v!==null&&b.types!==null&&(v.types=b.types),Q.T=v}}else try{v=a(y,u),hy(i,r,v)}catch(j){uh(i,r,j)}}function hy(i,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){my(i,r,u)},function(u){return uh(i,r,u)}):my(i,r,a)}function my(i,r,a){r.status="fulfilled",r.value=a,py(r),i.state=a,r=i.pending,r!==null&&(a=r.next,a===r?i.pending=null:(a=a.next,r.next=a,fy(i,a)))}function uh(i,r,a){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=a,py(r),r=r.next;while(r!==u)}i.action=null}function py(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function gy(i,r){return r}function yy(i,r){if($e){var a=pt.formState;if(a!==null){e:{var u=Oe;if($e){if(_t){t:{for(var y=_t,v=Wn;y.nodeType!==8;){if(!v){y=null;break t}if(y=ei(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){_t=ei(y.nextSibling),u=y.data==="F!";break e}}Ws(u)}u=!1}u&&(r=a[0])}}return a=Tn(),a.memoizedState=a.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gy,lastRenderedState:r},a.queue=u,a=Uy.bind(null,Oe,u),u.dispatch=a,u=lh(!1),v=ph.bind(null,Oe,!1,u.queue),u=Tn(),y={state:r,dispatch:null,action:i,pending:null},u.queue=y,a=wx.bind(null,Oe,y,v,a),y.dispatch=a,u.memoizedState=i,[r,a,!1]}function _y(i){var r=Pt();return vy(r,ft,i)}function vy(i,r,a){if(r=oh(i,r,gy)[0],i=Ac(us)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=Dl(r)}catch(b){throw b===ta?fc:b}else u=r;r=Pt();var y=r.queue,v=y.dispatch;return a!==r.memoizedState&&(Oe.flags|=2048,oa(9,{destroy:void 0},Rx.bind(null,y,a),null)),[u,v,i]}function Rx(i,r){i.action=r}function Ty(i){var r=Pt(),a=ft;if(a!==null)return vy(r,a,i);Pt(),r=r.memoizedState,a=Pt();var u=a.queue.dispatch;return a.memoizedState=i,[r,u,!1]}function oa(i,r,a,u){return i={tag:i,create:a,deps:u,inst:r,next:null},r=Oe.updateQueue,r===null&&(r=Tc(),Oe.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=i.next=i:(u=a.next,a.next=i,i.next=u,r.lastEffect=i),i}function Ey(){return Pt().memoizedState}function Sc(i,r,a,u){var y=Tn();Oe.flags|=i,y.memoizedState=oa(1|r,{destroy:void 0},a,u===void 0?null:u)}function bc(i,r,a,u){var y=Pt();u=u===void 0?null:u;var v=y.memoizedState.inst;ft!==null&&u!==null&&eh(u,ft.memoizedState.deps)?y.memoizedState=oa(r,v,a,u):(Oe.flags|=i,y.memoizedState=oa(1|r,v,a,u))}function Ay(i,r){Sc(8390656,8,i,r)}function ch(i,r){bc(2048,8,i,r)}function Nx(i){Oe.flags|=4;var r=Oe.updateQueue;if(r===null)r=Tc(),Oe.updateQueue=r,r.events=[i];else{var a=r.events;a===null?r.events=[i]:a.push(i)}}function Sy(i){var r=Pt().memoizedState;return Nx({ref:r,nextImpl:i}),function(){if((ot&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function by(i,r){return bc(4,2,i,r)}function xy(i,r){return bc(4,4,i,r)}function Cy(i,r){if(typeof r=="function"){i=i();var a=r(i);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function Iy(i,r,a){a=a!=null?a.concat([i]):null,bc(4,4,Cy.bind(null,r,i),a)}function dh(){}function wy(i,r){var a=Pt();r=r===void 0?null:r;var u=a.memoizedState;return r!==null&&eh(r,u[1])?u[0]:(a.memoizedState=[i,r],i)}function Ry(i,r){var a=Pt();r=r===void 0?null:r;var u=a.memoizedState;if(r!==null&&eh(r,u[1]))return u[0];if(u=i(),uo){Sn(!0);try{i()}finally{Sn(!1)}}return a.memoizedState=[u,r],u}function fh(i,r,a){return a===void 0||(ls&1073741824)!==0&&(Ge&261930)===0?i.memoizedState=r:(i.memoizedState=a,i=N_(),Oe.lanes|=i,ar|=i,a)}function Ny(i,r,a,u){return kn(a,r)?a:ia.current!==null?(i=fh(i,a,u),kn(i,r)||(zt=!0),i):(ls&42)===0||(ls&1073741824)!==0&&(Ge&261930)===0?(zt=!0,i.memoizedState=a):(i=N_(),Oe.lanes|=i,ar|=i,r)}function My(i,r,a,u,y){var v=fe.p;fe.p=v!==0&&8>v?v:8;var b=Q.T,C={};Q.T=C,ph(i,!1,r,a);try{var U=y(),j=Q.S;if(j!==null&&j(C,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ne=xx(U,u);Pl(i,r,ne,Fn(i))}else Pl(i,r,u,Fn(i))}catch(oe){Pl(i,r,{then:function(){},status:"rejected",reason:oe},Fn())}finally{fe.p=v,b!==null&&C.types!==null&&(b.types=C.types),Q.T=b}}function Mx(){}function hh(i,r,a,u){if(i.tag!==5)throw Error(s(476));var y=Dy(i).queue;My(i,y,r,Ce,a===null?Mx:function(){return Py(i),a(u)})}function Dy(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:Ce,baseState:Ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:Ce},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:a},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function Py(i){var r=Dy(i);r.next===null&&(r=i.alternate.memoizedState),Pl(i,r.next.queue,{},Fn())}function mh(){return on(Ql)}function Vy(){return Pt().memoizedState}function ky(){return Pt().memoizedState}function Dx(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var a=Fn();i=tr(a);var u=nr(r,i,a);u!==null&&(Nn(u,r,a),wl(u,r,a)),r={cache:Hf()},i.payload=r;return}r=r.return}}function Px(i,r,a){var u=Fn();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},xc(i)?Ly(r,a):(a=Df(i,r,a,u),a!==null&&(Nn(a,i,u),Oy(a,r,u)))}function Uy(i,r,a){var u=Fn();Pl(i,r,a,u)}function Pl(i,r,a,u){var y={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(xc(i))Ly(r,y);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var b=r.lastRenderedState,C=v(b,a);if(y.hasEagerState=!0,y.eagerState=C,kn(C,b))return rc(i,r,y,0),pt===null&&sc(),!1}catch{}finally{}if(a=Df(i,r,y,u),a!==null)return Nn(a,i,u),Oy(a,r,u),!0}return!1}function ph(i,r,a,u){if(u={lane:2,revertLane:Jh(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},xc(i)){if(r)throw Error(s(479))}else r=Df(i,a,u,2),r!==null&&Nn(r,i,2)}function xc(i){var r=i.alternate;return i===Oe||r!==null&&r===Oe}function Ly(i,r){sa=_c=!0;var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}function Oy(i,r,a){if((a&4194048)!==0){var u=r.lanes;u&=i.pendingLanes,a|=u,r.lanes=a,tl(i,a)}}var Vl={readContext:on,use:Ec,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt};Vl.useEffectEvent=Rt;var qy={readContext:on,use:Ec,useCallback:function(i,r){return Tn().memoizedState=[i,r===void 0?null:r],i},useContext:on,useEffect:Ay,useImperativeHandle:function(i,r,a){a=a!=null?a.concat([i]):null,Sc(4194308,4,Cy.bind(null,r,i),a)},useLayoutEffect:function(i,r){return Sc(4194308,4,i,r)},useInsertionEffect:function(i,r){Sc(4,2,i,r)},useMemo:function(i,r){var a=Tn();r=r===void 0?null:r;var u=i();if(uo){Sn(!0);try{i()}finally{Sn(!1)}}return a.memoizedState=[u,r],u},useReducer:function(i,r,a){var u=Tn();if(a!==void 0){var y=a(r);if(uo){Sn(!0);try{a(r)}finally{Sn(!1)}}}else y=r;return u.memoizedState=u.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},u.queue=i,i=i.dispatch=Px.bind(null,Oe,i),[u.memoizedState,i]},useRef:function(i){var r=Tn();return i={current:i},r.memoizedState=i},useState:function(i){i=lh(i);var r=i.queue,a=Uy.bind(null,Oe,r);return r.dispatch=a,[i.memoizedState,a]},useDebugValue:dh,useDeferredValue:function(i,r){var a=Tn();return fh(a,i,r)},useTransition:function(){var i=lh(!1);return i=My.bind(null,Oe,i.queue,!0,!1),Tn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,a){var u=Oe,y=Tn();if($e){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),pt===null)throw Error(s(349));(Ge&127)!==0||oy(u,r,a)}y.memoizedState=a;var v={value:a,getSnapshot:r};return y.queue=v,Ay(ly.bind(null,u,v,i),[i]),u.flags|=2048,oa(9,{destroy:void 0},ay.bind(null,u,v,a,r),null),a},useId:function(){var i=Tn(),r=pt.identifierPrefix;if($e){var a=zi,u=Fi;a=(u&~(1<<32-ge(u)-1)).toString(32)+a,r="_"+r+"R_"+a,a=vc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=Cx++,r="_"+r+"r_"+a.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:mh,useFormState:yy,useActionState:yy,useOptimistic:function(i){var r=Tn();r.memoizedState=r.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=ph.bind(null,Oe,!0,a),a.dispatch=r,[i,r]},useMemoCache:rh,useCacheRefresh:function(){return Tn().memoizedState=Dx.bind(null,Oe)},useEffectEvent:function(i){var r=Tn(),a={impl:i};return r.memoizedState=a,function(){if((ot&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},gh={readContext:on,use:Ec,useCallback:wy,useContext:on,useEffect:ch,useImperativeHandle:Iy,useInsertionEffect:by,useLayoutEffect:xy,useMemo:Ry,useReducer:Ac,useRef:Ey,useState:function(){return Ac(us)},useDebugValue:dh,useDeferredValue:function(i,r){var a=Pt();return Ny(a,ft.memoizedState,i,r)},useTransition:function(){var i=Ac(us)[0],r=Pt().memoizedState;return[typeof i=="boolean"?i:Dl(i),r]},useSyncExternalStore:ry,useId:Vy,useHostTransitionStatus:mh,useFormState:_y,useActionState:_y,useOptimistic:function(i,r){var a=Pt();return dy(a,ft,i,r)},useMemoCache:rh,useCacheRefresh:ky};gh.useEffectEvent=Sy;var By={readContext:on,use:Ec,useCallback:wy,useContext:on,useEffect:ch,useImperativeHandle:Iy,useInsertionEffect:by,useLayoutEffect:xy,useMemo:Ry,useReducer:ah,useRef:Ey,useState:function(){return ah(us)},useDebugValue:dh,useDeferredValue:function(i,r){var a=Pt();return ft===null?fh(a,i,r):Ny(a,ft.memoizedState,i,r)},useTransition:function(){var i=ah(us)[0],r=Pt().memoizedState;return[typeof i=="boolean"?i:Dl(i),r]},useSyncExternalStore:ry,useId:Vy,useHostTransitionStatus:mh,useFormState:Ty,useActionState:Ty,useOptimistic:function(i,r){var a=Pt();return ft!==null?dy(a,ft,i,r):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:rh,useCacheRefresh:ky};By.useEffectEvent=Sy;function yh(i,r,a,u){r=i.memoizedState,a=a(u,r),a=a==null?r:E({},r,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var _h={enqueueSetState:function(i,r,a){i=i._reactInternals;var u=Fn(),y=tr(u);y.payload=r,a!=null&&(y.callback=a),r=nr(i,y,u),r!==null&&(Nn(r,i,u),wl(r,i,u))},enqueueReplaceState:function(i,r,a){i=i._reactInternals;var u=Fn(),y=tr(u);y.tag=1,y.payload=r,a!=null&&(y.callback=a),r=nr(i,y,u),r!==null&&(Nn(r,i,u),wl(r,i,u))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var a=Fn(),u=tr(a);u.tag=2,r!=null&&(u.callback=r),r=nr(i,u,a),r!==null&&(Nn(r,i,a),wl(r,i,a))}};function Fy(i,r,a,u,y,v,b){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,v,b):r.prototype&&r.prototype.isPureReactComponent?!Tl(a,u)||!Tl(y,v):!0}function zy(i,r,a,u){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,u),r.state!==i&&_h.enqueueReplaceState(r,r.state,null)}function co(i,r){var a=r;if("ref"in r){a={};for(var u in r)u!=="ref"&&(a[u]=r[u])}if(i=i.defaultProps){a===r&&(a=E({},a));for(var y in i)a[y]===void 0&&(a[y]=i[y])}return a}function Hy(i){ic(i)}function Gy(i){console.error(i)}function jy(i){ic(i)}function Cc(i,r){try{var a=i.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function Yy(i,r,a){try{var u=i.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function vh(i,r,a){return a=tr(a),a.tag=3,a.payload={element:null},a.callback=function(){Cc(i,r)},a}function Jy(i){return i=tr(i),i.tag=3,i}function Ky(i,r,a,u){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var v=u.value;i.payload=function(){return y(v)},i.callback=function(){Yy(r,a,u)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(i.callback=function(){Yy(r,a,u),typeof y!="function"&&(lr===null?lr=new Set([this]):lr.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function Vx(i,r,a,u,y){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=a.alternate,r!==null&&Wo(r,a,y,!0),a=Ln.current,a!==null){switch(a.tag){case 31:case 13:return Zn===null?Oc():a.alternate===null&&Nt===0&&(Nt=3),a.flags&=-257,a.flags|=65536,a.lanes=y,u===hc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([u]):r.add(u),Gh(i,u,y)),!1;case 22:return a.flags|=65536,u===hc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([u]):a.add(u)),Gh(i,u,y)),!1}throw Error(s(435,a.tag))}return Gh(i,u,y),Oc(),!1}if($e)return r=Ln.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,u!==Of&&(i=Error(s(422),{cause:u}),Sl($n(i,a)))):(u!==Of&&(r=Error(s(423),{cause:u}),Sl($n(r,a))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,u=$n(u,a),y=vh(i.stateNode,u,y),$f(i,y),Nt!==4&&(Nt=2)),!1;var v=Error(s(520),{cause:u});if(v=$n(v,a),zl===null?zl=[v]:zl.push(v),Nt!==4&&(Nt=2),r===null)return!0;u=$n(u,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,i=y&-y,a.lanes|=i,i=vh(a.stateNode,u,i),$f(a,i),!1;case 1:if(r=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(lr===null||!lr.has(v))))return a.flags|=65536,y&=-y,a.lanes|=y,y=Jy(y),Ky(y,i,a,u),$f(a,y),!1}a=a.return}while(a!==null);return!1}var Th=Error(s(461)),zt=!1;function an(i,r,a,u){r.child=i===null?Wg(r,null,a,u):lo(r,i.child,a,u)}function $y(i,r,a,u,y){a=a.render;var v=r.ref;if("ref"in u){var b={};for(var C in u)C!=="ref"&&(b[C]=u[C])}else b=u;return so(r),u=th(i,r,a,b,v,y),C=nh(),i!==null&&!zt?(ih(i,r,y),cs(i,r,y)):($e&&C&&Uf(r),r.flags|=1,an(i,r,u,y),r.child)}function Qy(i,r,a,u,y){if(i===null){var v=a.type;return typeof v=="function"&&!Pf(v)&&v.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=v,Xy(i,r,v,u,y)):(i=ac(a.type,null,u,r,r.mode,y),i.ref=r.ref,i.return=r,r.child=i)}if(v=i.child,!wh(i,y)){var b=v.memoizedProps;if(a=a.compare,a=a!==null?a:Tl,a(b,u)&&i.ref===r.ref)return cs(i,r,y)}return r.flags|=1,i=ss(v,u),i.ref=r.ref,i.return=r,r.child=i}function Xy(i,r,a,u,y){if(i!==null){var v=i.memoizedProps;if(Tl(v,u)&&i.ref===r.ref)if(zt=!1,r.pendingProps=u=v,wh(i,y))(i.flags&131072)!==0&&(zt=!0);else return r.lanes=i.lanes,cs(i,r,y)}return Eh(i,r,a,u,y)}function Wy(i,r,a,u){var y=u.children,v=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(v=v!==null?v.baseLanes|a:a,i!==null){for(u=r.child=i.child,y=0;u!==null;)y=y|u.lanes|u.childLanes,u=u.sibling;u=y&~v}else u=0,r.child=null;return Zy(i,r,v,a,u)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&dc(r,v!==null?v.cachePool:null),v!==null?ty(r,v):Xf(),ny(r);else return u=r.lanes=536870912,Zy(i,r,v!==null?v.baseLanes|a:a,a,u)}else v!==null?(dc(r,v.cachePool),ty(r,v),sr(),r.memoizedState=null):(i!==null&&dc(r,null),Xf(),sr());return an(i,r,y,a),r.child}function kl(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Zy(i,r,a,u,y){var v=jf();return v=v===null?null:{parent:Bt._currentValue,pool:v},r.memoizedState={baseLanes:a,cachePool:v},i!==null&&dc(r,null),Xf(),ny(r),i!==null&&Wo(i,r,u,!0),r.childLanes=y,null}function Ic(i,r){return r=Rc({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function e_(i,r,a){return lo(r,i.child,null,a),i=Ic(r,r.pendingProps),i.flags|=2,On(r),r.memoizedState=null,i}function kx(i,r,a){var u=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,i===null){if($e){if(u.mode==="hidden")return i=Ic(r,u),r.lanes=536870912,kl(null,i);if(Zf(r),(i=_t)?(i=fv(i,Wn),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Qs!==null?{id:Fi,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},a=Lg(i),a.return=r,r.child=a,rn=r,_t=null)):i=null,i===null)throw Ws(r);return r.lanes=536870912,null}return Ic(r,u)}var v=i.memoizedState;if(v!==null){var b=v.dehydrated;if(Zf(r),y)if(r.flags&256)r.flags&=-257,r=e_(i,r,a);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(zt||Wo(i,r,a,!1),y=(a&i.childLanes)!==0,zt||y){if(u=pt,u!==null&&(b=nl(u,a),b!==0&&b!==v.retryLane))throw v.retryLane=b,eo(i,b),Nn(u,i,b),Th;Oc(),r=e_(i,r,a)}else i=v.treeContext,_t=ei(b.nextSibling),rn=r,$e=!0,Xs=null,Wn=!1,i!==null&&Bg(r,i),r=Ic(r,u),r.flags|=4096;return r}return i=ss(i.child,{mode:u.mode,children:u.children}),i.ref=r.ref,r.child=i,i.return=r,i}function wc(i,r){var a=r.ref;if(a===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(r.flags|=4194816)}}function Eh(i,r,a,u,y){return so(r),a=th(i,r,a,u,void 0,y),u=nh(),i!==null&&!zt?(ih(i,r,y),cs(i,r,y)):($e&&u&&Uf(r),r.flags|=1,an(i,r,a,y),r.child)}function t_(i,r,a,u,y,v){return so(r),r.updateQueue=null,a=sy(r,u,a,y),iy(i),u=nh(),i!==null&&!zt?(ih(i,r,v),cs(i,r,v)):($e&&u&&Uf(r),r.flags|=1,an(i,r,a,v),r.child)}function n_(i,r,a,u,y){if(so(r),r.stateNode===null){var v=Ko,b=a.contextType;typeof b=="object"&&b!==null&&(v=on(b)),v=new a(u,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=_h,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=u,v.state=r.memoizedState,v.refs={},Jf(r),b=a.contextType,v.context=typeof b=="object"&&b!==null?on(b):Ko,v.state=r.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(yh(r,a,b,u),v.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(b=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),b!==v.state&&_h.enqueueReplaceState(v,v.state,null),Nl(r,u,v,y),Rl(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(i===null){v=r.stateNode;var C=r.memoizedProps,U=co(a,C);v.props=U;var j=v.context,ne=a.contextType;b=Ko,typeof ne=="object"&&ne!==null&&(b=on(ne));var oe=a.getDerivedStateFromProps;ne=typeof oe=="function"||typeof v.getSnapshotBeforeUpdate=="function",C=r.pendingProps!==C,ne||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(C||j!==b)&&zy(r,v,u,b),er=!1;var J=r.memoizedState;v.state=J,Nl(r,u,v,y),Rl(),j=r.memoizedState,C||J!==j||er?(typeof oe=="function"&&(yh(r,a,oe,u),j=r.memoizedState),(U=er||Fy(r,a,U,u,J,j,b))?(ne||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=j),v.props=u,v.state=j,v.context=b,u=U):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{v=r.stateNode,Kf(i,r),b=r.memoizedProps,ne=co(a,b),v.props=ne,oe=r.pendingProps,J=v.context,j=a.contextType,U=Ko,typeof j=="object"&&j!==null&&(U=on(j)),C=a.getDerivedStateFromProps,(j=typeof C=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(b!==oe||J!==U)&&zy(r,v,u,U),er=!1,J=r.memoizedState,v.state=J,Nl(r,u,v,y),Rl();var W=r.memoizedState;b!==oe||J!==W||er||i!==null&&i.dependencies!==null&&uc(i.dependencies)?(typeof C=="function"&&(yh(r,a,C,u),W=r.memoizedState),(ne=er||Fy(r,a,ne,u,J,W,U)||i!==null&&i.dependencies!==null&&uc(i.dependencies))?(j||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,W,U),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,W,U)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||b===i.memoizedProps&&J===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&J===i.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=W),v.props=u,v.state=W,v.context=U,u=ne):(typeof v.componentDidUpdate!="function"||b===i.memoizedProps&&J===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&J===i.memoizedState||(r.flags|=1024),u=!1)}return v=u,wc(i,r),u=(r.flags&128)!==0,v||u?(v=r.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,i!==null&&u?(r.child=lo(r,i.child,null,y),r.child=lo(r,null,a,y)):an(i,r,a,y),r.memoizedState=v.state,i=r.child):i=cs(i,r,y),i}function i_(i,r,a,u){return no(),r.flags|=256,an(i,r,a,u),r.child}var Ah={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sh(i){return{baseLanes:i,cachePool:Yg()}}function bh(i,r,a){return i=i!==null?i.childLanes&~a:0,r&&(i|=Bn),i}function s_(i,r,a){var u=r.pendingProps,y=!1,v=(r.flags&128)!==0,b;if((b=v)||(b=i!==null&&i.memoizedState===null?!1:(Dt.current&2)!==0),b&&(y=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,i===null){if($e){if(y?ir(r):sr(),(i=_t)?(i=fv(i,Wn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Qs!==null?{id:Fi,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},a=Lg(i),a.return=r,r.child=a,rn=r,_t=null)):i=null,i===null)throw Ws(r);return om(i)?r.lanes=32:r.lanes=536870912,null}var C=u.children;return u=u.fallback,y?(sr(),y=r.mode,C=Rc({mode:"hidden",children:C},y),u=to(u,y,a,null),C.return=r,u.return=r,C.sibling=u,r.child=C,u=r.child,u.memoizedState=Sh(a),u.childLanes=bh(i,b,a),r.memoizedState=Ah,kl(null,u)):(ir(r),xh(r,C))}var U=i.memoizedState;if(U!==null&&(C=U.dehydrated,C!==null)){if(v)r.flags&256?(ir(r),r.flags&=-257,r=Ch(i,r,a)):r.memoizedState!==null?(sr(),r.child=i.child,r.flags|=128,r=null):(sr(),C=u.fallback,y=r.mode,u=Rc({mode:"visible",children:u.children},y),C=to(C,y,a,null),C.flags|=2,u.return=r,C.return=r,u.sibling=C,r.child=u,lo(r,i.child,null,a),u=r.child,u.memoizedState=Sh(a),u.childLanes=bh(i,b,a),r.memoizedState=Ah,r=kl(null,u));else if(ir(r),om(C)){if(b=C.nextSibling&&C.nextSibling.dataset,b)var j=b.dgst;b=j,u=Error(s(419)),u.stack="",u.digest=b,Sl({value:u,source:null,stack:null}),r=Ch(i,r,a)}else if(zt||Wo(i,r,a,!1),b=(a&i.childLanes)!==0,zt||b){if(b=pt,b!==null&&(u=nl(b,a),u!==0&&u!==U.retryLane))throw U.retryLane=u,eo(i,u),Nn(b,i,u),Th;rm(C)||Oc(),r=Ch(i,r,a)}else rm(C)?(r.flags|=192,r.child=i.child,r=null):(i=U.treeContext,_t=ei(C.nextSibling),rn=r,$e=!0,Xs=null,Wn=!1,i!==null&&Bg(r,i),r=xh(r,u.children),r.flags|=4096);return r}return y?(sr(),C=u.fallback,y=r.mode,U=i.child,j=U.sibling,u=ss(U,{mode:"hidden",children:u.children}),u.subtreeFlags=U.subtreeFlags&65011712,j!==null?C=ss(j,C):(C=to(C,y,a,null),C.flags|=2),C.return=r,u.return=r,u.sibling=C,r.child=u,kl(null,u),u=r.child,C=i.child.memoizedState,C===null?C=Sh(a):(y=C.cachePool,y!==null?(U=Bt._currentValue,y=y.parent!==U?{parent:U,pool:U}:y):y=Yg(),C={baseLanes:C.baseLanes|a,cachePool:y}),u.memoizedState=C,u.childLanes=bh(i,b,a),r.memoizedState=Ah,kl(i.child,u)):(ir(r),a=i.child,i=a.sibling,a=ss(a,{mode:"visible",children:u.children}),a.return=r,a.sibling=null,i!==null&&(b=r.deletions,b===null?(r.deletions=[i],r.flags|=16):b.push(i)),r.child=a,r.memoizedState=null,a)}function xh(i,r){return r=Rc({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function Rc(i,r){return i=Un(22,i,null,r),i.lanes=0,i}function Ch(i,r,a){return lo(r,i.child,null,a),i=xh(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function r_(i,r,a){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r),Ff(i.return,r,a)}function Ih(i,r,a,u,y,v){var b=i.memoizedState;b===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:y,treeForkCount:v}:(b.isBackwards=r,b.rendering=null,b.renderingStartTime=0,b.last=u,b.tail=a,b.tailMode=y,b.treeForkCount=v)}function o_(i,r,a){var u=r.pendingProps,y=u.revealOrder,v=u.tail;u=u.children;var b=Dt.current,C=(b&2)!==0;if(C?(b=b&1|2,r.flags|=128):b&=1,he(Dt,b),an(i,r,u,a),u=$e?Al:0,!C&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&r_(i,a,r);else if(i.tag===19)r_(i,a,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(a=r.child,y=null;a!==null;)i=a.alternate,i!==null&&yc(i)===null&&(y=a),a=a.sibling;a=y,a===null?(y=r.child,r.child=null):(y=a.sibling,a.sibling=null),Ih(r,!1,y,a,v,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=r.child,r.child=null;y!==null;){if(i=y.alternate,i!==null&&yc(i)===null){r.child=y;break}i=y.sibling,y.sibling=a,a=y,y=i}Ih(r,!0,a,null,v,u);break;case"together":Ih(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function cs(i,r,a){if(i!==null&&(r.dependencies=i.dependencies),ar|=r.lanes,(a&r.childLanes)===0)if(i!==null){if(Wo(i,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,a=ss(i,i.pendingProps),r.child=a,a.return=r;i.sibling!==null;)i=i.sibling,a=a.sibling=ss(i,i.pendingProps),a.return=r;a.sibling=null}return r.child}function wh(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&uc(i)))}function Ux(i,r,a){switch(r.tag){case 3:Xe(r,r.stateNode.containerInfo),Zs(r,Bt,i.memoizedState.cache),no();break;case 27:case 5:An(r);break;case 4:Xe(r,r.stateNode.containerInfo);break;case 10:Zs(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Zf(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(ir(r),r.flags|=128,null):(a&r.child.childLanes)!==0?s_(i,r,a):(ir(r),i=cs(i,r,a),i!==null?i.sibling:null);ir(r);break;case 19:var y=(i.flags&128)!==0;if(u=(a&r.childLanes)!==0,u||(Wo(i,r,a,!1),u=(a&r.childLanes)!==0),y){if(u)return o_(i,r,a);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),he(Dt,Dt.current),u)break;return null;case 22:return r.lanes=0,Wy(i,r,a,r.pendingProps);case 24:Zs(r,Bt,i.memoizedState.cache)}return cs(i,r,a)}function a_(i,r,a){if(i!==null)if(i.memoizedProps!==r.pendingProps)zt=!0;else{if(!wh(i,a)&&(r.flags&128)===0)return zt=!1,Ux(i,r,a);zt=(i.flags&131072)!==0}else zt=!1,$e&&(r.flags&1048576)!==0&&qg(r,Al,r.index);switch(r.lanes=0,r.tag){case 16:e:{var u=r.pendingProps;if(i=oo(r.elementType),r.type=i,typeof i=="function")Pf(i)?(u=co(i,u),r.tag=1,r=n_(null,r,i,u,a)):(r.tag=0,r=Eh(null,r,i,u,a));else{if(i!=null){var y=i.$$typeof;if(y===Y){r.tag=11,r=$y(null,r,i,u,a);break e}else if(y===R){r.tag=14,r=Qy(null,r,i,u,a);break e}}throw r=Ue(i)||i,Error(s(306,r,""))}}return r;case 0:return Eh(i,r,r.type,r.pendingProps,a);case 1:return u=r.type,y=co(u,r.pendingProps),n_(i,r,u,y,a);case 3:e:{if(Xe(r,r.stateNode.containerInfo),i===null)throw Error(s(387));u=r.pendingProps;var v=r.memoizedState;y=v.element,Kf(i,r),Nl(r,u,null,a);var b=r.memoizedState;if(u=b.cache,Zs(r,Bt,u),u!==v.cache&&zf(r,[Bt],a,!0),Rl(),u=b.element,v.isDehydrated)if(v={element:u,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=i_(i,r,u,a);break e}else if(u!==y){y=$n(Error(s(424)),r),Sl(y),r=i_(i,r,u,a);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(_t=ei(i.firstChild),rn=r,$e=!0,Xs=null,Wn=!0,a=Wg(r,null,u,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(no(),u===y){r=cs(i,r,a);break e}an(i,r,u,a)}r=r.child}return r;case 26:return wc(i,r),i===null?(a=_v(r.type,null,r.pendingProps,null))?r.memoizedState=a:$e||(a=r.type,i=r.pendingProps,u=jc(ce.current).createElement(a),u[Lt]=r,u[Xt]=i,ln(u,a,i),Ot(u),r.stateNode=u):r.memoizedState=_v(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return An(r),i===null&&$e&&(u=r.stateNode=pv(r.type,r.pendingProps,ce.current),rn=r,Wn=!0,y=_t,fr(r.type)?(am=y,_t=ei(u.firstChild)):_t=y),an(i,r,r.pendingProps.children,a),wc(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&$e&&((y=u=_t)&&(u=fC(u,r.type,r.pendingProps,Wn),u!==null?(r.stateNode=u,rn=r,_t=ei(u.firstChild),Wn=!1,y=!0):y=!1),y||Ws(r)),An(r),y=r.type,v=r.pendingProps,b=i!==null?i.memoizedProps:null,u=v.children,nm(y,v)?u=null:b!==null&&nm(y,b)&&(r.flags|=32),r.memoizedState!==null&&(y=th(i,r,Ix,null,null,a),Ql._currentValue=y),wc(i,r),an(i,r,u,a),r.child;case 6:return i===null&&$e&&((i=a=_t)&&(a=hC(a,r.pendingProps,Wn),a!==null?(r.stateNode=a,rn=r,_t=null,i=!0):i=!1),i||Ws(r)),null;case 13:return s_(i,r,a);case 4:return Xe(r,r.stateNode.containerInfo),u=r.pendingProps,i===null?r.child=lo(r,null,u,a):an(i,r,u,a),r.child;case 11:return $y(i,r,r.type,r.pendingProps,a);case 7:return an(i,r,r.pendingProps,a),r.child;case 8:return an(i,r,r.pendingProps.children,a),r.child;case 12:return an(i,r,r.pendingProps.children,a),r.child;case 10:return u=r.pendingProps,Zs(r,r.type,u.value),an(i,r,u.children,a),r.child;case 9:return y=r.type._context,u=r.pendingProps.children,so(r),y=on(y),u=u(y),r.flags|=1,an(i,r,u,a),r.child;case 14:return Qy(i,r,r.type,r.pendingProps,a);case 15:return Xy(i,r,r.type,r.pendingProps,a);case 19:return o_(i,r,a);case 31:return kx(i,r,a);case 22:return Wy(i,r,a,r.pendingProps);case 24:return so(r),u=on(Bt),i===null?(y=jf(),y===null&&(y=pt,v=Hf(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=a),y=v),r.memoizedState={parent:u,cache:y},Jf(r),Zs(r,Bt,y)):((i.lanes&a)!==0&&(Kf(i,r),Nl(r,null,null,a),Rl()),y=i.memoizedState,v=r.memoizedState,y.parent!==u?(y={parent:u,cache:u},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Zs(r,Bt,u)):(u=v.cache,Zs(r,Bt,u),u!==y.cache&&zf(r,[Bt],a,!0))),an(i,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function ds(i){i.flags|=4}function Rh(i,r,a,u,y){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(V_())i.flags|=8192;else throw ao=hc,Yf}else i.flags&=-16777217}function l_(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Sv(r))if(V_())i.flags|=8192;else throw ao=hc,Yf}function Nc(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Uu():536870912,i.lanes|=r,ca|=r)}function Ul(i,r){if(!$e)switch(i.tailMode){case"hidden":r=i.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function vt(i){var r=i.alternate!==null&&i.alternate.child===i.child,a=0,u=0;if(r)for(var y=i.child;y!==null;)a|=y.lanes|y.childLanes,u|=y.subtreeFlags&65011712,u|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)a|=y.lanes|y.childLanes,u|=y.subtreeFlags,u|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=u,i.childLanes=a,r}function Lx(i,r,a){var u=r.pendingProps;switch(Lf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(r),null;case 1:return vt(r),null;case 3:return a=r.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),as(Bt),tt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Xo(r)?ds(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,qf())),vt(r),null;case 26:var y=r.type,v=r.memoizedState;return i===null?(ds(r),v!==null?(vt(r),l_(r,v)):(vt(r),Rh(r,y,null,u,a))):v?v!==i.memoizedState?(ds(r),vt(r),l_(r,v)):(vt(r),r.flags&=-16777217):(i=i.memoizedProps,i!==u&&ds(r),vt(r),Rh(r,y,i,u,a)),null;case 27:if(bt(r),a=ce.current,y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&ds(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return vt(r),null}i=_e.current,Xo(r)?Fg(r):(i=pv(y,u,a),r.stateNode=i,ds(r))}return vt(r),null;case 5:if(bt(r),y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&ds(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return vt(r),null}if(v=_e.current,Xo(r))Fg(r);else{var b=jc(ce.current);switch(v){case 1:v=b.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=b.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=b.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=b.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=b.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof u.is=="string"?b.createElement("select",{is:u.is}):b.createElement("select"),u.multiple?v.multiple=!0:u.size&&(v.size=u.size);break;default:v=typeof u.is=="string"?b.createElement(y,{is:u.is}):b.createElement(y)}}v[Lt]=r,v[Xt]=u;e:for(b=r.child;b!==null;){if(b.tag===5||b.tag===6)v.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===r)break e;for(;b.sibling===null;){if(b.return===null||b.return===r)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}r.stateNode=v;e:switch(ln(v,y,u),y){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ds(r)}}return vt(r),Rh(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,a),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==u&&ds(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(s(166));if(i=ce.current,Xo(r)){if(i=r.stateNode,a=r.memoizedProps,u=null,y=rn,y!==null)switch(y.tag){case 27:case 5:u=y.memoizedProps}i[Lt]=r,i=!!(i.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||sv(i.nodeValue,a)),i||Ws(r,!0)}else i=jc(i).createTextNode(u),i[Lt]=r,r.stateNode=i}return vt(r),null;case 31:if(a=r.memoizedState,i===null||i.memoizedState!==null){if(u=Xo(r),a!==null){if(i===null){if(!u)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[Lt]=r}else no(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;vt(r),i=!1}else a=qf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return r.flags&256?(On(r),r):(On(r),null);if((r.flags&128)!==0)throw Error(s(558))}return vt(r),null;case 13:if(u=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=Xo(r),u!==null&&u.dehydrated!==null){if(i===null){if(!y)throw Error(s(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[Lt]=r}else no(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;vt(r),y=!1}else y=qf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(On(r),r):(On(r),null)}return On(r),(r.flags&128)!==0?(r.lanes=a,r):(a=u!==null,i=i!==null&&i.memoizedState!==null,a&&(u=r.child,y=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(y=u.alternate.memoizedState.cachePool.pool),v=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),v!==y&&(u.flags|=2048)),a!==i&&a&&(r.child.flags|=8192),Nc(r,r.updateQueue),vt(r),null);case 4:return tt(),i===null&&Xh(r.stateNode.containerInfo),vt(r),null;case 10:return as(r.type),vt(r),null;case 19:if(ie(Dt),u=r.memoizedState,u===null)return vt(r),null;if(y=(r.flags&128)!==0,v=u.rendering,v===null)if(y)Ul(u,!1);else{if(Nt!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(v=yc(i),v!==null){for(r.flags|=128,Ul(u,!1),i=v.updateQueue,r.updateQueue=i,Nc(r,i),r.subtreeFlags=0,i=a,a=r.child;a!==null;)Ug(a,i),a=a.sibling;return he(Dt,Dt.current&1|2),$e&&rs(r,u.treeForkCount),r.child}i=i.sibling}u.tail!==null&&$()>kc&&(r.flags|=128,y=!0,Ul(u,!1),r.lanes=4194304)}else{if(!y)if(i=yc(v),i!==null){if(r.flags|=128,y=!0,i=i.updateQueue,r.updateQueue=i,Nc(r,i),Ul(u,!0),u.tail===null&&u.tailMode==="hidden"&&!v.alternate&&!$e)return vt(r),null}else 2*$()-u.renderingStartTime>kc&&a!==536870912&&(r.flags|=128,y=!0,Ul(u,!1),r.lanes=4194304);u.isBackwards?(v.sibling=r.child,r.child=v):(i=u.last,i!==null?i.sibling=v:r.child=v,u.last=v)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=$(),i.sibling=null,a=Dt.current,he(Dt,y?a&1|2:a&1),$e&&rs(r,u.treeForkCount),i):(vt(r),null);case 22:case 23:return On(r),Wf(),u=r.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(a&536870912)!==0&&(r.flags&128)===0&&(vt(r),r.subtreeFlags&6&&(r.flags|=8192)):vt(r),a=r.updateQueue,a!==null&&Nc(r,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==a&&(r.flags|=2048),i!==null&&ie(ro),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),as(Bt),vt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function Ox(i,r){switch(Lf(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return as(Bt),tt(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return bt(r),null;case 31:if(r.memoizedState!==null){if(On(r),r.alternate===null)throw Error(s(340));no()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(On(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));no()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return ie(Dt),null;case 4:return tt(),null;case 10:return as(r.type),null;case 22:case 23:return On(r),Wf(),i!==null&&ie(ro),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return as(Bt),null;case 25:return null;default:return null}}function u_(i,r){switch(Lf(r),r.tag){case 3:as(Bt),tt();break;case 26:case 27:case 5:bt(r);break;case 4:tt();break;case 31:r.memoizedState!==null&&On(r);break;case 13:On(r);break;case 19:ie(Dt);break;case 10:as(r.type);break;case 22:case 23:On(r),Wf(),i!==null&&ie(ro);break;case 24:as(Bt)}}function Ll(i,r){try{var a=r.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var y=u.next;a=y;do{if((a.tag&i)===i){u=void 0;var v=a.create,b=a.inst;u=v(),b.destroy=u}a=a.next}while(a!==y)}}catch(C){ct(r,r.return,C)}}function rr(i,r,a){try{var u=r.updateQueue,y=u!==null?u.lastEffect:null;if(y!==null){var v=y.next;u=v;do{if((u.tag&i)===i){var b=u.inst,C=b.destroy;if(C!==void 0){b.destroy=void 0,y=r;var U=a,j=C;try{j()}catch(ne){ct(y,U,ne)}}}u=u.next}while(u!==v)}}catch(ne){ct(r,r.return,ne)}}function c_(i){var r=i.updateQueue;if(r!==null){var a=i.stateNode;try{ey(r,a)}catch(u){ct(i,i.return,u)}}}function d_(i,r,a){a.props=co(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(u){ct(i,r,u)}}function Ol(i,r){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof a=="function"?i.refCleanup=a(u):a.current=u}}catch(y){ct(i,r,y)}}function Hi(i,r){var a=i.ref,u=i.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(y){ct(i,r,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){ct(i,r,y)}else a.current=null}function f_(i){var r=i.type,a=i.memoizedProps,u=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(y){ct(i,i.return,y)}}function Nh(i,r,a){try{var u=i.stateNode;oC(u,i.type,a,r),u[Xt]=r}catch(y){ct(i,i.return,y)}}function h_(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&fr(i.type)||i.tag===4}function Mh(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||h_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&fr(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Dh(i,r,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(i),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=ui));else if(u!==4&&(u===27&&fr(i.type)&&(a=i.stateNode,r=null),i=i.child,i!==null))for(Dh(i,r,a),i=i.sibling;i!==null;)Dh(i,r,a),i=i.sibling}function Mc(i,r,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?a.insertBefore(i,r):a.appendChild(i);else if(u!==4&&(u===27&&fr(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(Mc(i,r,a),i=i.sibling;i!==null;)Mc(i,r,a),i=i.sibling}function m_(i){var r=i.stateNode,a=i.memoizedProps;try{for(var u=i.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);ln(r,u,a),r[Lt]=i,r[Xt]=a}catch(v){ct(i,i.return,v)}}var fs=!1,Ht=!1,Ph=!1,p_=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function qx(i,r){if(i=i.containerInfo,em=Wc,i=Ig(i),Cf(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var y=u.anchorOffset,v=u.focusNode;u=u.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var b=0,C=-1,U=-1,j=0,ne=0,oe=i,J=null;t:for(;;){for(var W;oe!==a||y!==0&&oe.nodeType!==3||(C=b+y),oe!==v||u!==0&&oe.nodeType!==3||(U=b+u),oe.nodeType===3&&(b+=oe.nodeValue.length),(W=oe.firstChild)!==null;)J=oe,oe=W;for(;;){if(oe===i)break t;if(J===a&&++j===y&&(C=b),J===v&&++ne===u&&(U=b),(W=oe.nextSibling)!==null)break;oe=J,J=oe.parentNode}oe=W}a=C===-1||U===-1?null:{start:C,end:U}}else a=null}a=a||{start:0,end:0}}else a=null;for(tm={focusedElem:i,selectionRange:a},Wc=!1,Zt=r;Zt!==null;)if(r=Zt,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Zt=i;else for(;Zt!==null;){switch(r=Zt,v=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)y=i[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,a=r,y=v.memoizedProps,v=v.memoizedState,u=a.stateNode;try{var Ae=co(a.type,y);i=u.getSnapshotBeforeUpdate(Ae,v),u.__reactInternalSnapshotBeforeUpdate=i}catch(Re){ct(a,a.return,Re)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,a=i.nodeType,a===9)sm(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":sm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Zt=i;break}Zt=r.return}}function g_(i,r,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:ms(i,a),u&4&&Ll(5,a);break;case 1:if(ms(i,a),u&4)if(i=a.stateNode,r===null)try{i.componentDidMount()}catch(b){ct(a,a.return,b)}else{var y=co(a.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(y,r,i.__reactInternalSnapshotBeforeUpdate)}catch(b){ct(a,a.return,b)}}u&64&&c_(a),u&512&&Ol(a,a.return);break;case 3:if(ms(i,a),u&64&&(i=a.updateQueue,i!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{ey(i,r)}catch(b){ct(a,a.return,b)}}break;case 27:r===null&&u&4&&m_(a);case 26:case 5:ms(i,a),r===null&&u&4&&f_(a),u&512&&Ol(a,a.return);break;case 12:ms(i,a);break;case 31:ms(i,a),u&4&&v_(i,a);break;case 13:ms(i,a),u&4&&T_(i,a),u&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=Kx.bind(null,a),mC(i,a))));break;case 22:if(u=a.memoizedState!==null||fs,!u){r=r!==null&&r.memoizedState!==null||Ht,y=fs;var v=Ht;fs=u,(Ht=r)&&!v?ps(i,a,(a.subtreeFlags&8772)!==0):ms(i,a),fs=y,Ht=v}break;case 30:break;default:ms(i,a)}}function y_(i){var r=i.alternate;r!==null&&(i.alternate=null,y_(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&Vo(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var St=null,Cn=!1;function hs(i,r,a){for(a=a.child;a!==null;)__(i,r,a),a=a.sibling}function __(i,r,a){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(Dn,a)}catch{}switch(a.tag){case 26:Ht||Hi(a,r),hs(i,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ht||Hi(a,r);var u=St,y=Cn;fr(a.type)&&(St=a.stateNode,Cn=!1),hs(i,r,a),Jl(a.stateNode),St=u,Cn=y;break;case 5:Ht||Hi(a,r);case 6:if(u=St,y=Cn,St=null,hs(i,r,a),St=u,Cn=y,St!==null)if(Cn)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(a.stateNode)}catch(v){ct(a,r,v)}else try{St.removeChild(a.stateNode)}catch(v){ct(a,r,v)}break;case 18:St!==null&&(Cn?(i=St,cv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),_a(i)):cv(St,a.stateNode));break;case 4:u=St,y=Cn,St=a.stateNode.containerInfo,Cn=!0,hs(i,r,a),St=u,Cn=y;break;case 0:case 11:case 14:case 15:rr(2,a,r),Ht||rr(4,a,r),hs(i,r,a);break;case 1:Ht||(Hi(a,r),u=a.stateNode,typeof u.componentWillUnmount=="function"&&d_(a,r,u)),hs(i,r,a);break;case 21:hs(i,r,a);break;case 22:Ht=(u=Ht)||a.memoizedState!==null,hs(i,r,a),Ht=u;break;default:hs(i,r,a)}}function v_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{_a(i)}catch(a){ct(r,r.return,a)}}}function T_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{_a(i)}catch(a){ct(r,r.return,a)}}function Bx(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new p_),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new p_),r;default:throw Error(s(435,i.tag))}}function Dc(i,r){var a=Bx(i);r.forEach(function(u){if(!a.has(u)){a.add(u);var y=$x.bind(null,i,u);u.then(y,y)}})}function In(i,r){var a=r.deletions;if(a!==null)for(var u=0;u<a.length;u++){var y=a[u],v=i,b=r,C=b;e:for(;C!==null;){switch(C.tag){case 27:if(fr(C.type)){St=C.stateNode,Cn=!1;break e}break;case 5:St=C.stateNode,Cn=!1;break e;case 3:case 4:St=C.stateNode.containerInfo,Cn=!0;break e}C=C.return}if(St===null)throw Error(s(160));__(v,b,y),St=null,Cn=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)E_(r,i),r=r.sibling}var pi=null;function E_(i,r){var a=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:In(r,i),wn(i),u&4&&(rr(3,i,i.return),Ll(3,i),rr(5,i,i.return));break;case 1:In(r,i),wn(i),u&512&&(Ht||a===null||Hi(a,a.return)),u&64&&fs&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var y=pi;if(In(r,i),wn(i),u&512&&(Ht||a===null||Hi(a,a.return)),u&4){var v=a!==null?a.memoizedState:null;if(u=i.memoizedState,a===null)if(u===null)if(i.stateNode===null){e:{u=i.type,a=i.memoizedProps,y=y.ownerDocument||y;t:switch(u){case"title":v=y.getElementsByTagName("title")[0],(!v||v[Ri]||v[Lt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(u),y.head.insertBefore(v,y.querySelector("head > title"))),ln(v,u,a),v[Lt]=i,Ot(v),u=v;break e;case"link":var b=Ev("link","href",y).get(u+(a.href||""));if(b){for(var C=0;C<b.length;C++)if(v=b[C],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(C,1);break t}}v=y.createElement(u),ln(v,u,a),y.head.appendChild(v);break;case"meta":if(b=Ev("meta","content",y).get(u+(a.content||""))){for(C=0;C<b.length;C++)if(v=b[C],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(C,1);break t}}v=y.createElement(u),ln(v,u,a),y.head.appendChild(v);break;default:throw Error(s(468,u))}v[Lt]=i,Ot(v),u=v}i.stateNode=u}else Av(y,i.type,i.stateNode);else i.stateNode=Tv(y,u,i.memoizedProps);else v!==u?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,u===null?Av(y,i.type,i.stateNode):Tv(y,u,i.memoizedProps)):u===null&&i.stateNode!==null&&Nh(i,i.memoizedProps,a.memoizedProps)}break;case 27:In(r,i),wn(i),u&512&&(Ht||a===null||Hi(a,a.return)),a!==null&&u&4&&Nh(i,i.memoizedProps,a.memoizedProps);break;case 5:if(In(r,i),wn(i),u&512&&(Ht||a===null||Hi(a,a.return)),i.flags&32){y=i.stateNode;try{xn(y,"")}catch(Ae){ct(i,i.return,Ae)}}u&4&&i.stateNode!=null&&(y=i.memoizedProps,Nh(i,y,a!==null?a.memoizedProps:y)),u&1024&&(Ph=!0);break;case 6:if(In(r,i),wn(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,a=i.stateNode;try{a.nodeValue=u}catch(Ae){ct(i,i.return,Ae)}}break;case 3:if(Kc=null,y=pi,pi=Yc(r.containerInfo),In(r,i),pi=y,wn(i),u&4&&a!==null&&a.memoizedState.isDehydrated)try{_a(r.containerInfo)}catch(Ae){ct(i,i.return,Ae)}Ph&&(Ph=!1,A_(i));break;case 4:u=pi,pi=Yc(i.stateNode.containerInfo),In(r,i),wn(i),pi=u;break;case 12:In(r,i),wn(i);break;case 31:In(r,i),wn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Dc(i,u)));break;case 13:In(r,i),wn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Vc=$()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Dc(i,u)));break;case 22:y=i.memoizedState!==null;var U=a!==null&&a.memoizedState!==null,j=fs,ne=Ht;if(fs=j||y,Ht=ne||U,In(r,i),Ht=ne,fs=j,wn(i),u&8192)e:for(r=i.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(a===null||U||fs||Ht||fo(i)),a=null,r=i;;){if(r.tag===5||r.tag===26){if(a===null){U=a=r;try{if(v=U.stateNode,y)b=v.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{C=U.stateNode;var oe=U.memoizedProps.style,J=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;C.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(Ae){ct(U,U.return,Ae)}}}else if(r.tag===6){if(a===null){U=r;try{U.stateNode.nodeValue=y?"":U.memoizedProps}catch(Ae){ct(U,U.return,Ae)}}}else if(r.tag===18){if(a===null){U=r;try{var W=U.stateNode;y?dv(W,!0):dv(U.stateNode,!1)}catch(Ae){ct(U,U.return,Ae)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=i.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Dc(i,a))));break;case 19:In(r,i),wn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Dc(i,u)));break;case 30:break;case 21:break;default:In(r,i),wn(i)}}function wn(i){var r=i.flags;if(r&2){try{for(var a,u=i.return;u!==null;){if(h_(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var y=a.stateNode,v=Mh(i);Mc(i,v,y);break;case 5:var b=a.stateNode;a.flags&32&&(xn(b,""),a.flags&=-33);var C=Mh(i);Mc(i,C,b);break;case 3:case 4:var U=a.stateNode.containerInfo,j=Mh(i);Dh(i,j,U);break;default:throw Error(s(161))}}catch(ne){ct(i,i.return,ne)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function A_(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;A_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function ms(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)g_(i,r.alternate,r),r=r.sibling}function fo(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:rr(4,r,r.return),fo(r);break;case 1:Hi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&d_(r,r.return,a),fo(r);break;case 27:Jl(r.stateNode);case 26:case 5:Hi(r,r.return),fo(r);break;case 22:r.memoizedState===null&&fo(r);break;case 30:fo(r);break;default:fo(r)}i=i.sibling}}function ps(i,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,y=i,v=r,b=v.flags;switch(v.tag){case 0:case 11:case 15:ps(y,v,a),Ll(4,v);break;case 1:if(ps(y,v,a),u=v,y=u.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(j){ct(u,u.return,j)}if(u=v,y=u.updateQueue,y!==null){var C=u.stateNode;try{var U=y.shared.hiddenCallbacks;if(U!==null)for(y.shared.hiddenCallbacks=null,y=0;y<U.length;y++)Zg(U[y],C)}catch(j){ct(u,u.return,j)}}a&&b&64&&c_(v),Ol(v,v.return);break;case 27:m_(v);case 26:case 5:ps(y,v,a),a&&u===null&&b&4&&f_(v),Ol(v,v.return);break;case 12:ps(y,v,a);break;case 31:ps(y,v,a),a&&b&4&&v_(y,v);break;case 13:ps(y,v,a),a&&b&4&&T_(y,v);break;case 22:v.memoizedState===null&&ps(y,v,a),Ol(v,v.return);break;case 30:break;default:ps(y,v,a)}r=r.sibling}}function Vh(i,r){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&bl(a))}function kh(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&bl(i))}function gi(i,r,a,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)S_(i,r,a,u),r=r.sibling}function S_(i,r,a,u){var y=r.flags;switch(r.tag){case 0:case 11:case 15:gi(i,r,a,u),y&2048&&Ll(9,r);break;case 1:gi(i,r,a,u);break;case 3:gi(i,r,a,u),y&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&bl(i)));break;case 12:if(y&2048){gi(i,r,a,u),i=r.stateNode;try{var v=r.memoizedProps,b=v.id,C=v.onPostCommit;typeof C=="function"&&C(b,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(U){ct(r,r.return,U)}}else gi(i,r,a,u);break;case 31:gi(i,r,a,u);break;case 13:gi(i,r,a,u);break;case 23:break;case 22:v=r.stateNode,b=r.alternate,r.memoizedState!==null?v._visibility&2?gi(i,r,a,u):ql(i,r):v._visibility&2?gi(i,r,a,u):(v._visibility|=2,aa(i,r,a,u,(r.subtreeFlags&10256)!==0||!1)),y&2048&&Vh(b,r);break;case 24:gi(i,r,a,u),y&2048&&kh(r.alternate,r);break;default:gi(i,r,a,u)}}function aa(i,r,a,u,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var v=i,b=r,C=a,U=u,j=b.flags;switch(b.tag){case 0:case 11:case 15:aa(v,b,C,U,y),Ll(8,b);break;case 23:break;case 22:var ne=b.stateNode;b.memoizedState!==null?ne._visibility&2?aa(v,b,C,U,y):ql(v,b):(ne._visibility|=2,aa(v,b,C,U,y)),y&&j&2048&&Vh(b.alternate,b);break;case 24:aa(v,b,C,U,y),y&&j&2048&&kh(b.alternate,b);break;default:aa(v,b,C,U,y)}r=r.sibling}}function ql(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=i,u=r,y=u.flags;switch(u.tag){case 22:ql(a,u),y&2048&&Vh(u.alternate,u);break;case 24:ql(a,u),y&2048&&kh(u.alternate,u);break;default:ql(a,u)}r=r.sibling}}var Bl=8192;function la(i,r,a){if(i.subtreeFlags&Bl)for(i=i.child;i!==null;)b_(i,r,a),i=i.sibling}function b_(i,r,a){switch(i.tag){case 26:la(i,r,a),i.flags&Bl&&i.memoizedState!==null&&CC(a,pi,i.memoizedState,i.memoizedProps);break;case 5:la(i,r,a);break;case 3:case 4:var u=pi;pi=Yc(i.stateNode.containerInfo),la(i,r,a),pi=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=Bl,Bl=16777216,la(i,r,a),Bl=u):la(i,r,a));break;default:la(i,r,a)}}function x_(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Fl(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];Zt=u,I_(u,i)}x_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)C_(i),i=i.sibling}function C_(i){switch(i.tag){case 0:case 11:case 15:Fl(i),i.flags&2048&&rr(9,i,i.return);break;case 3:Fl(i);break;case 12:Fl(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Pc(i)):Fl(i);break;default:Fl(i)}}function Pc(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];Zt=u,I_(u,i)}x_(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:rr(8,r,r.return),Pc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Pc(r));break;default:Pc(r)}i=i.sibling}}function I_(i,r){for(;Zt!==null;){var a=Zt;switch(a.tag){case 0:case 11:case 15:rr(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:bl(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Zt=u;else e:for(a=i;Zt!==null;){u=Zt;var y=u.sibling,v=u.return;if(y_(u),u===a){Zt=null;break e}if(y!==null){y.return=v,Zt=y;break e}Zt=v}}}var Fx={getCacheForType:function(i){var r=on(Bt),a=r.data.get(i);return a===void 0&&(a=i(),r.data.set(i,a)),a},cacheSignal:function(){return on(Bt).controller.signal}},zx=typeof WeakMap=="function"?WeakMap:Map,ot=0,pt=null,ze=null,Ge=0,ut=0,qn=null,or=!1,ua=!1,Uh=!1,gs=0,Nt=0,ar=0,ho=0,Lh=0,Bn=0,ca=0,zl=null,Rn=null,Oh=!1,Vc=0,w_=0,kc=1/0,Uc=null,lr=null,Kt=0,ur=null,da=null,ys=0,qh=0,Bh=null,R_=null,Hl=0,Fh=null;function Fn(){return(ot&2)!==0&&Ge!==0?Ge&-Ge:Q.T!==null?Jh():Lu()}function N_(){if(Bn===0)if((Ge&536870912)===0||$e){var i=Ze;Ze<<=1,(Ze&3932160)===0&&(Ze=262144),Bn=i}else Bn=536870912;return i=Ln.current,i!==null&&(i.flags|=32),Bn}function Nn(i,r,a){(i===pt&&(ut===2||ut===9)||i.cancelPendingCommit!==null)&&(fa(i,0),cr(i,Ge,Bn,!1)),Br(i,a),((ot&2)===0||i!==pt)&&(i===pt&&((ot&2)===0&&(ho|=a),Nt===4&&cr(i,Ge,Bn,!1)),Gi(i))}function M_(i,r,a){if((ot&6)!==0)throw Error(s(327));var u=!a&&(r&127)===0&&(r&i.expiredLanes)===0||oi(i,r),y=u?jx(i,r):Hh(i,r,!0),v=u;do{if(y===0){ua&&!u&&cr(i,r,0,!1);break}else{if(a=i.current.alternate,v&&!Hx(a)){y=Hh(i,r,!1),v=!1;continue}if(y===2){if(v=r,i.errorRecoveryDisabledLanes&v)var b=0;else b=i.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var C=i;y=zl;var U=C.current.memoizedState.isDehydrated;if(U&&(fa(C,b).flags|=256),b=Hh(C,b,!1),b!==2){if(Uh&&!U){C.errorRecoveryDisabledLanes|=v,ho|=v,y=4;break e}v=Rn,Rn=y,v!==null&&(Rn===null?Rn=v:Rn.push.apply(Rn,v))}y=b}if(v=!1,y!==2)continue}}if(y===1){fa(i,0),cr(i,r,0,!0);break}e:{switch(u=i,v=y,v){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:cr(u,r,Bn,!or);break e;case 2:Rn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(y=Vc+300-$(),10<y)){if(cr(u,r,Bn,!or),Ci(u,0,!0)!==0)break e;ys=r,u.timeoutHandle=lv(D_.bind(null,u,a,Rn,Uc,Oh,r,Bn,ho,ca,or,v,"Throttled",-0,0),y);break e}D_(u,a,Rn,Uc,Oh,r,Bn,ho,ca,or,v,null,-0,0)}}break}while(!0);Gi(i)}function D_(i,r,a,u,y,v,b,C,U,j,ne,oe,J,W){if(i.timeoutHandle=-1,oe=r.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ui},b_(r,v,oe);var Ae=(v&62914560)===v?Vc-$():(v&4194048)===v?w_-$():0;if(Ae=IC(oe,Ae),Ae!==null){ys=v,i.cancelPendingCommit=Ae(B_.bind(null,i,r,v,a,u,y,b,C,U,ne,oe,null,J,W)),cr(i,v,b,!j);return}}B_(i,r,v,a,u,y,b,C,U)}function Hx(i){for(var r=i;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var y=a[u],v=y.getSnapshot;y=y.value;try{if(!kn(v(),y))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function cr(i,r,a,u){r&=~Lh,r&=~ho,i.suspendedLanes|=r,i.pingedLanes&=~r,u&&(i.warmLanes|=r),u=i.expirationTimes;for(var y=r;0<y;){var v=31-ge(y),b=1<<v;u[v]=-1,y&=~b}a!==0&&Fr(i,a,r)}function Lc(){return(ot&6)===0?(Gl(0),!1):!0}function zh(){if(ze!==null){if(ut===0)var i=ze.return;else i=ze,os=io=null,sh(i),na=null,Cl=0,i=ze;for(;i!==null;)u_(i.alternate,i),i=i.return;ze=null}}function fa(i,r){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,uC(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),ys=0,zh(),pt=i,ze=a=ss(i.current,null),Ge=r,ut=0,qn=null,or=!1,ua=oi(i,r),Uh=!1,ca=Bn=Lh=ho=ar=Nt=0,Rn=zl=null,Oh=!1,(r&8)!==0&&(r|=r&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=r;0<u;){var y=31-ge(u),v=1<<y;r|=i[y],u&=~v}return gs=r,sc(),a}function P_(i,r){Oe=null,Q.H=Vl,r===ta||r===fc?(r=$g(),ut=3):r===Yf?(r=$g(),ut=4):ut=r===Th?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,qn=r,ze===null&&(Nt=1,Cc(i,$n(r,i.current)))}function V_(){var i=Ln.current;return i===null?!0:(Ge&4194048)===Ge?Zn===null:(Ge&62914560)===Ge||(Ge&536870912)!==0?i===Zn:!1}function k_(){var i=Q.H;return Q.H=Vl,i===null?Vl:i}function U_(){var i=Q.A;return Q.A=Fx,i}function Oc(){Nt=4,or||(Ge&4194048)!==Ge&&Ln.current!==null||(ua=!0),(ar&134217727)===0&&(ho&134217727)===0||pt===null||cr(pt,Ge,Bn,!1)}function Hh(i,r,a){var u=ot;ot|=2;var y=k_(),v=U_();(pt!==i||Ge!==r)&&(Uc=null,fa(i,r)),r=!1;var b=Nt;e:do try{if(ut!==0&&ze!==null){var C=ze,U=qn;switch(ut){case 8:zh(),b=6;break e;case 3:case 2:case 9:case 6:Ln.current===null&&(r=!0);var j=ut;if(ut=0,qn=null,ha(i,C,U,j),a&&ua){b=0;break e}break;default:j=ut,ut=0,qn=null,ha(i,C,U,j)}}Gx(),b=Nt;break}catch(ne){P_(i,ne)}while(!0);return r&&i.shellSuspendCounter++,os=io=null,ot=u,Q.H=y,Q.A=v,ze===null&&(pt=null,Ge=0,sc()),b}function Gx(){for(;ze!==null;)L_(ze)}function jx(i,r){var a=ot;ot|=2;var u=k_(),y=U_();pt!==i||Ge!==r?(Uc=null,kc=$()+500,fa(i,r)):ua=oi(i,r);e:do try{if(ut!==0&&ze!==null){r=ze;var v=qn;t:switch(ut){case 1:ut=0,qn=null,ha(i,r,v,1);break;case 2:case 9:if(Jg(v)){ut=0,qn=null,O_(r);break}r=function(){ut!==2&&ut!==9||pt!==i||(ut=7),Gi(i)},v.then(r,r);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:Jg(v)?(ut=0,qn=null,O_(r)):(ut=0,qn=null,ha(i,r,v,7));break;case 5:var b=null;switch(ze.tag){case 26:b=ze.memoizedState;case 5:case 27:var C=ze;if(b?Sv(b):C.stateNode.complete){ut=0,qn=null;var U=C.sibling;if(U!==null)ze=U;else{var j=C.return;j!==null?(ze=j,qc(j)):ze=null}break t}}ut=0,qn=null,ha(i,r,v,5);break;case 6:ut=0,qn=null,ha(i,r,v,6);break;case 8:zh(),Nt=6;break e;default:throw Error(s(462))}}Yx();break}catch(ne){P_(i,ne)}while(!0);return os=io=null,Q.H=u,Q.A=y,ot=a,ze!==null?0:(pt=null,Ge=0,sc(),Nt)}function Yx(){for(;ze!==null&&!Mo();)L_(ze)}function L_(i){var r=a_(i.alternate,i,gs);i.memoizedProps=i.pendingProps,r===null?qc(i):ze=r}function O_(i){var r=i,a=r.alternate;switch(r.tag){case 15:case 0:r=t_(a,r,r.pendingProps,r.type,void 0,Ge);break;case 11:r=t_(a,r,r.pendingProps,r.type.render,r.ref,Ge);break;case 5:sh(r);default:u_(a,r),r=ze=Ug(r,gs),r=a_(a,r,gs)}i.memoizedProps=i.pendingProps,r===null?qc(i):ze=r}function ha(i,r,a,u){os=io=null,sh(r),na=null,Cl=0;var y=r.return;try{if(Vx(i,y,r,a,Ge)){Nt=1,Cc(i,$n(a,i.current)),ze=null;return}}catch(v){if(y!==null)throw ze=y,v;Nt=1,Cc(i,$n(a,i.current)),ze=null;return}r.flags&32768?($e||u===1?i=!0:ua||(Ge&536870912)!==0?i=!1:(or=i=!0,(u===2||u===9||u===3||u===6)&&(u=Ln.current,u!==null&&u.tag===13&&(u.flags|=16384))),q_(r,i)):qc(r)}function qc(i){var r=i;do{if((r.flags&32768)!==0){q_(r,or);return}i=r.return;var a=Lx(r.alternate,r,gs);if(a!==null){ze=a;return}if(r=r.sibling,r!==null){ze=r;return}ze=r=i}while(r!==null);Nt===0&&(Nt=5)}function q_(i,r){do{var a=Ox(i.alternate,i);if(a!==null){a.flags&=32767,ze=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(i=i.sibling,i!==null)){ze=i;return}ze=i=a}while(i!==null);Nt=6,ze=null}function B_(i,r,a,u,y,v,b,C,U){i.cancelPendingCommit=null;do Bc();while(Kt!==0);if((ot&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(v=r.lanes|r.childLanes,v|=Mf,Af(i,a,v,b,C,U),i===pt&&(ze=pt=null,Ge=0),da=r,ur=i,ys=a,qh=v,Bh=y,R_=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,Qx(De,function(){return j_(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=Q.T,Q.T=null,y=fe.p,fe.p=2,b=ot,ot|=4;try{qx(i,r,a)}finally{ot=b,fe.p=y,Q.T=u}}Kt=1,F_(),z_(),H_()}}function F_(){if(Kt===1){Kt=0;var i=ur,r=da,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var u=fe.p;fe.p=2;var y=ot;ot|=4;try{E_(r,i);var v=tm,b=Ig(i.containerInfo),C=v.focusedElem,U=v.selectionRange;if(b!==C&&C&&C.ownerDocument&&Cg(C.ownerDocument.documentElement,C)){if(U!==null&&Cf(C)){var j=U.start,ne=U.end;if(ne===void 0&&(ne=j),"selectionStart"in C)C.selectionStart=j,C.selectionEnd=Math.min(ne,C.value.length);else{var oe=C.ownerDocument||document,J=oe&&oe.defaultView||window;if(J.getSelection){var W=J.getSelection(),Ae=C.textContent.length,Re=Math.min(U.start,Ae),mt=U.end===void 0?Re:Math.min(U.end,Ae);!W.extend&&Re>mt&&(b=mt,mt=Re,Re=b);var z=xg(C,Re),q=xg(C,mt);if(z&&q&&(W.rangeCount!==1||W.anchorNode!==z.node||W.anchorOffset!==z.offset||W.focusNode!==q.node||W.focusOffset!==q.offset)){var G=oe.createRange();G.setStart(z.node,z.offset),W.removeAllRanges(),Re>mt?(W.addRange(G),W.extend(q.node,q.offset)):(G.setEnd(q.node,q.offset),W.addRange(G))}}}}for(oe=[],W=C;W=W.parentNode;)W.nodeType===1&&oe.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<oe.length;C++){var se=oe[C];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Wc=!!em,tm=em=null}finally{ot=y,fe.p=u,Q.T=a}}i.current=r,Kt=2}}function z_(){if(Kt===2){Kt=0;var i=ur,r=da,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var u=fe.p;fe.p=2;var y=ot;ot|=4;try{g_(i,r.alternate,r)}finally{ot=y,fe.p=u,Q.T=a}}Kt=3}}function H_(){if(Kt===4||Kt===3){Kt=0,Lr();var i=ur,r=da,a=ys,u=R_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Kt=5:(Kt=0,da=ur=null,G_(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(lr=null),es(a),r=r.stateNode,Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(Dn,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=Q.T,y=fe.p,fe.p=2,Q.T=null;try{for(var v=i.onRecoverableError,b=0;b<u.length;b++){var C=u[b];v(C.value,{componentStack:C.stack})}}finally{Q.T=r,fe.p=y}}(ys&3)!==0&&Bc(),Gi(i),y=i.pendingLanes,(a&261930)!==0&&(y&42)!==0?i===Fh?Hl++:(Hl=0,Fh=i):Hl=0,Gl(0)}}function G_(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,bl(r)))}function Bc(){return F_(),z_(),H_(),j_()}function j_(){if(Kt!==5)return!1;var i=ur,r=qh;qh=0;var a=es(ys),u=Q.T,y=fe.p;try{fe.p=32>a?32:a,Q.T=null,a=Bh,Bh=null;var v=ur,b=ys;if(Kt=0,da=ur=null,ys=0,(ot&6)!==0)throw Error(s(331));var C=ot;if(ot|=4,C_(v.current),S_(v,v.current,b,a),ot=C,Gl(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(Dn,v)}catch{}return!0}finally{fe.p=y,Q.T=u,G_(i,r)}}function Y_(i,r,a){r=$n(a,r),r=vh(i.stateNode,r,2),i=nr(i,r,2),i!==null&&(Br(i,2),Gi(i))}function ct(i,r,a){if(i.tag===3)Y_(i,i,a);else for(;r!==null;){if(r.tag===3){Y_(r,i,a);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(lr===null||!lr.has(u))){i=$n(a,i),a=Jy(2),u=nr(r,a,2),u!==null&&(Ky(a,u,r,i),Br(u,2),Gi(u));break}}r=r.return}}function Gh(i,r,a){var u=i.pingCache;if(u===null){u=i.pingCache=new zx;var y=new Set;u.set(r,y)}else y=u.get(r),y===void 0&&(y=new Set,u.set(r,y));y.has(a)||(Uh=!0,y.add(a),i=Jx.bind(null,i,r,a),r.then(i,i))}function Jx(i,r,a){var u=i.pingCache;u!==null&&u.delete(r),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,pt===i&&(Ge&a)===a&&(Nt===4||Nt===3&&(Ge&62914560)===Ge&&300>$()-Vc?(ot&2)===0&&fa(i,0):Lh|=a,ca===Ge&&(ca=0)),Gi(i)}function J_(i,r){r===0&&(r=Uu()),i=eo(i,r),i!==null&&(Br(i,r),Gi(i))}function Kx(i){var r=i.memoizedState,a=0;r!==null&&(a=r.retryLane),J_(i,a)}function $x(i,r){var a=0;switch(i.tag){case 31:case 13:var u=i.stateNode,y=i.memoizedState;y!==null&&(a=y.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(r),J_(i,a)}function Qx(i,r){return It(i,r)}var Fc=null,ma=null,jh=!1,zc=!1,Yh=!1,dr=0;function Gi(i){i!==ma&&i.next===null&&(ma===null?Fc=ma=i:ma=ma.next=i),zc=!0,jh||(jh=!0,Wx())}function Gl(i,r){if(!Yh&&zc){Yh=!0;do for(var a=!1,u=Fc;u!==null;){if(i!==0){var y=u.pendingLanes;if(y===0)var v=0;else{var b=u.suspendedLanes,C=u.pingedLanes;v=(1<<31-ge(42|i)+1)-1,v&=y&~(b&~C),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,X_(u,v))}else v=Ge,v=Ci(u,u===pt?v:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(v&3)===0||oi(u,v)||(a=!0,X_(u,v));u=u.next}while(a);Yh=!1}}function Xx(){K_()}function K_(){zc=jh=!1;var i=0;dr!==0&&lC()&&(i=dr);for(var r=$(),a=null,u=Fc;u!==null;){var y=u.next,v=$_(u,r);v===0?(u.next=null,a===null?Fc=y:a.next=y,y===null&&(ma=a)):(a=u,(i!==0||(v&3)!==0)&&(zc=!0)),u=y}Kt!==0&&Kt!==5||Gl(i),dr!==0&&(dr=0)}function $_(i,r){for(var a=i.suspendedLanes,u=i.pingedLanes,y=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var b=31-ge(v),C=1<<b,U=y[b];U===-1?((C&a)===0||(C&u)!==0)&&(y[b]=Ef(C,r)):U<=r&&(i.expiredLanes|=C),v&=~C}if(r=pt,a=Ge,a=Ci(i,i===r?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,a===0||i===r&&(ut===2||ut===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&ri(u),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||oi(i,a)){if(r=a&-a,r===i.callbackPriority)return r;switch(u!==null&&ri(u),es(a)){case 2:case 8:a=Ee;break;case 32:a=De;break;case 268435456:a=Or;break;default:a=De}return u=Q_.bind(null,i),a=It(a,u),i.callbackPriority=r,i.callbackNode=a,r}return u!==null&&u!==null&&ri(u),i.callbackPriority=2,i.callbackNode=null,2}function Q_(i,r){if(Kt!==0&&Kt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(Bc()&&i.callbackNode!==a)return null;var u=Ge;return u=Ci(i,i===pt?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(M_(i,u,r),$_(i,$()),i.callbackNode!=null&&i.callbackNode===a?Q_.bind(null,i):null)}function X_(i,r){if(Bc())return null;M_(i,r,!0)}function Wx(){cC(function(){(ot&6)!==0?It(pe,Xx):K_()})}function Jh(){if(dr===0){var i=Zo;i===0&&(i=cn,cn<<=1,(cn&261888)===0&&(cn=256)),dr=i}return dr}function W_(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Oo(""+i)}function Z_(i,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,i.id&&a.setAttribute("form",i.id),r.parentNode.insertBefore(a,r),i=new FormData(i),a.parentNode.removeChild(a),i}function Zx(i,r,a,u,y){if(r==="submit"&&a&&a.stateNode===y){var v=W_((y[Xt]||null).action),b=u.submitter;b&&(r=(r=b[Xt]||null)?W_(r.formAction):b.getAttribute("formAction"),r!==null&&(v=r,b=null));var C=new Li("action","action",null,u,y);i.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(dr!==0){var U=b?Z_(y,b):new FormData(y);hh(a,{pending:!0,data:U,method:y.method,action:v},null,U)}}else typeof v=="function"&&(C.preventDefault(),U=b?Z_(y,b):new FormData(y),hh(a,{pending:!0,data:U,method:y.method,action:v},v,U))},currentTarget:y}]})}}for(var Kh=0;Kh<Nf.length;Kh++){var $h=Nf[Kh],eC=$h.toLowerCase(),tC=$h[0].toUpperCase()+$h.slice(1);mi(eC,"on"+tC)}mi(Ng,"onAnimationEnd"),mi(Mg,"onAnimationIteration"),mi(Dg,"onAnimationStart"),mi("dblclick","onDoubleClick"),mi("focusin","onFocus"),mi("focusout","onBlur"),mi(yx,"onTransitionRun"),mi(_x,"onTransitionStart"),mi(vx,"onTransitionCancel"),mi(Pg,"onTransitionEnd"),Pi("onMouseEnter",["mouseout","mouseover"]),Pi("onMouseLeave",["mouseout","mouseover"]),Pi("onPointerEnter",["pointerout","pointerover"]),Pi("onPointerLeave",["pointerout","pointerover"]),Di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Di("onBeforeInput",["compositionend","keypress","textInput","paste"]),Di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jl));function ev(i,r){r=(r&4)!==0;for(var a=0;a<i.length;a++){var u=i[a],y=u.event;u=u.listeners;e:{var v=void 0;if(r)for(var b=u.length-1;0<=b;b--){var C=u[b],U=C.instance,j=C.currentTarget;if(C=C.listener,U!==v&&y.isPropagationStopped())break e;v=C,y.currentTarget=j;try{v(y)}catch(ne){ic(ne)}y.currentTarget=null,v=U}else for(b=0;b<u.length;b++){if(C=u[b],U=C.instance,j=C.currentTarget,C=C.listener,U!==v&&y.isPropagationStopped())break e;v=C,y.currentTarget=j;try{v(y)}catch(ne){ic(ne)}y.currentTarget=null,v=U}}}}function He(i,r){var a=r[Po];a===void 0&&(a=r[Po]=new Set);var u=i+"__bubble";a.has(u)||(tv(r,i,2,!1),a.add(u))}function Qh(i,r,a){var u=0;r&&(u|=4),tv(a,i,u,r)}var Hc="_reactListening"+Math.random().toString(36).slice(2);function Xh(i){if(!i[Hc]){i[Hc]=!0,il.forEach(function(a){a!=="selectionchange"&&(nC.has(a)||Qh(a,!1,i),Qh(a,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Hc]||(r[Hc]=!0,Qh("selectionchange",!1,r))}}function tv(i,r,a,u){switch(Nv(r)){case 2:var y=NC;break;case 8:y=MC;break;default:y=fm}a=y.bind(null,r,a,i),y=void 0,!Yr||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),u?y!==void 0?i.addEventListener(r,a,{capture:!0,passive:y}):i.addEventListener(r,a,!0):y!==void 0?i.addEventListener(r,a,{passive:y}):i.addEventListener(r,a,!1)}function Wh(i,r,a,u,y){var v=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var C=u.stateNode.containerInfo;if(C===y)break;if(b===4)for(b=u.return;b!==null;){var U=b.tag;if((U===3||U===4)&&b.stateNode.containerInfo===y)return;b=b.return}for(;C!==null;){if(b=Ni(C),b===null)return;if(U=b.tag,U===5||U===6||U===26||U===27){u=v=b;continue e}C=C.parentNode}}u=u.return}Ys(function(){var j=v,ne=jn(a),oe=[];e:{var J=Vg.get(i);if(J!==void 0){var W=Li,Ae=i;switch(i){case"keypress":if(Kr(a)===0)break e;case"keydown":case"keyup":W=ec;break;case"focusin":Ae="focus",W=Qr;break;case"focusout":Ae="blur",W=Qr;break;case"beforeblur":case"afterblur":W=Qr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=gl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=ju;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=A;break;case Ng:case Mg:case Dg:W=Ju;break;case Pg:W=w;break;case"scroll":case"scrollend":W=pl;break;case"wheel":W=X;break;case"copy":case"cut":case"paste":W=Ku;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=is;break;case"toggle":case"beforetoggle":W=Le}var Re=(r&4)!==0,mt=!Re&&(i==="scroll"||i==="scrollend"),z=Re?J!==null?J+"Capture":null:J;Re=[];for(var q=j,G;q!==null;){var se=q;if(G=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||G===null||z===null||(se=ci(q,z),se!=null&&Re.push(Yl(q,se,G))),mt)break;q=q.return}0<Re.length&&(J=new W(J,Ae,null,a,ne),oe.push({event:J,listeners:Re}))}}if((r&7)===0){e:{if(J=i==="mouseover"||i==="pointerover",W=i==="mouseout"||i==="pointerout",J&&a!==fl&&(Ae=a.relatedTarget||a.fromElement)&&(Ni(Ae)||Ae[wi]))break e;if((W||J)&&(J=ne.window===ne?ne:(J=ne.ownerDocument)?J.defaultView||J.parentWindow:window,W?(Ae=a.relatedTarget||a.toElement,W=j,Ae=Ae?Ni(Ae):null,Ae!==null&&(mt=l(Ae),Re=Ae.tag,Ae!==mt||Re!==5&&Re!==27&&Re!==6)&&(Ae=null)):(W=null,Ae=j),W!==Ae)){if(Re=gl,se="onMouseLeave",z="onMouseEnter",q="mouse",(i==="pointerout"||i==="pointerover")&&(Re=is,se="onPointerLeave",z="onPointerEnter",q="pointer"),mt=W==null?J:Pn(W),G=Ae==null?J:Pn(Ae),J=new Re(se,q+"leave",W,a,ne),J.target=mt,J.relatedTarget=G,se=null,Ni(ne)===j&&(Re=new Re(z,q+"enter",Ae,a,ne),Re.target=G,Re.relatedTarget=mt,se=Re),mt=se,W&&Ae)t:{for(Re=iC,z=W,q=Ae,G=0,se=z;se;se=Re(se))G++;se=0;for(var Ie=q;Ie;Ie=Re(Ie))se++;for(;0<G-se;)z=Re(z),G--;for(;0<se-G;)q=Re(q),se--;for(;G--;){if(z===q||q!==null&&z===q.alternate){Re=z;break t}z=Re(z),q=Re(q)}Re=null}else Re=null;W!==null&&nv(oe,J,W,Re,!1),Ae!==null&&mt!==null&&nv(oe,mt,Ae,Re,!0)}}e:{if(J=j?Pn(j):window,W=J.nodeName&&J.nodeName.toLowerCase(),W==="select"||W==="input"&&J.type==="file")var nt=vg;else if(yg(J))if(Tg)nt=mx;else{nt=fx;var xe=dx}else W=J.nodeName,!W||W.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?j&&Lo(j.elementType)&&(nt=vg):nt=hx;if(nt&&(nt=nt(i,j))){_g(oe,nt,a,ne);break e}xe&&xe(i,J,j),i==="focusout"&&j&&J.type==="number"&&j.memoizedProps.value!=null&&ul(J,"number",J.value)}switch(xe=j?Pn(j):window,i){case"focusin":(yg(xe)||xe.contentEditable==="true")&&(jo=xe,If=j,El=null);break;case"focusout":El=If=jo=null;break;case"mousedown":wf=!0;break;case"contextmenu":case"mouseup":case"dragend":wf=!1,wg(oe,a,ne);break;case"selectionchange":if(gx)break;case"keydown":case"keyup":wg(oe,a,ne)}var qe;if(rt)e:{switch(i){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else Go?Xr(i,a)&&(je="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(je="onCompositionStart");je&&(Bi&&a.locale!=="ko"&&(Go||je!=="onCompositionStart"?je==="onCompositionEnd"&&Go&&(qe=ml()):(Ui=ne,hl="value"in Ui?Ui.value:Ui.textContent,Go=!0)),xe=Gc(j,je),0<xe.length&&(je=new qi(je,i,null,a,ne),oe.push({event:je,listeners:xe}),qe?je.data=qe:(qe=Ho(a),qe!==null&&(je.data=qe)))),(qe=Jn?ax(i,a):lx(i,a))&&(je=Gc(j,"onBeforeInput"),0<je.length&&(xe=new qi("onBeforeInput","beforeinput",null,a,ne),oe.push({event:xe,listeners:je}),xe.data=qe)),Zx(oe,i,j,a,ne)}ev(oe,r)})}function Yl(i,r,a){return{instance:i,listener:r,currentTarget:a}}function Gc(i,r){for(var a=r+"Capture",u=[];i!==null;){var y=i,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=ci(i,a),y!=null&&u.unshift(Yl(i,y,v)),y=ci(i,r),y!=null&&u.push(Yl(i,y,v))),i.tag===3)return u;i=i.return}return[]}function iC(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function nv(i,r,a,u,y){for(var v=r._reactName,b=[];a!==null&&a!==u;){var C=a,U=C.alternate,j=C.stateNode;if(C=C.tag,U!==null&&U===u)break;C!==5&&C!==26&&C!==27||j===null||(U=j,y?(j=ci(a,v),j!=null&&b.unshift(Yl(a,j,U))):y||(j=ci(a,v),j!=null&&b.push(Yl(a,j,U)))),a=a.return}b.length!==0&&i.push({event:r,listeners:b})}var sC=/\r\n?/g,rC=/\u0000|\uFFFD/g;function iv(i){return(typeof i=="string"?i:""+i).replace(sC,`
`).replace(rC,"")}function sv(i,r){return r=iv(r),iv(i)===r}function ht(i,r,a,u,y,v){switch(a){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||xn(i,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&xn(i,""+u);break;case"className":Vn(i,"class",u);break;case"tabIndex":Vn(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Vn(i,a,u);break;case"style":dl(i,u,v);break;case"data":if(r!=="object"){Vn(i,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||a!=="href")){i.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=Oo(""+u),i.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(r!=="input"&&ht(i,r,"name",y.name,y,null),ht(i,r,"formEncType",y.formEncType,y,null),ht(i,r,"formMethod",y.formMethod,y,null),ht(i,r,"formTarget",y.formTarget,y,null)):(ht(i,r,"encType",y.encType,y,null),ht(i,r,"method",y.method,y,null),ht(i,r,"target",y.target,y,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=Oo(""+u),i.setAttribute(a,u);break;case"onClick":u!=null&&(i.onclick=ui);break;case"onScroll":u!=null&&He("scroll",i);break;case"onScrollEnd":u!=null&&He("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}a=Oo(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""+u):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":u===!0?i.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,u):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(a,u):i.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(a):i.setAttribute(a,u);break;case"popover":He("beforetoggle",i),He("toggle",i),ko(i,"popover",u);break;case"xlinkActuate":qt(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":qt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":qt(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":qt(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":qt(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":qt(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":qt(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":qt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":qt(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ko(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Gu.get(a)||a,ko(i,a,u))}}function Zh(i,r,a,u,y,v){switch(a){case"style":dl(i,u,v);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof u=="string"?xn(i,u):(typeof u=="number"||typeof u=="bigint")&&xn(i,""+u);break;case"onScroll":u!=null&&He("scroll",i);break;case"onScrollEnd":u!=null&&He("scrollend",i);break;case"onClick":u!=null&&(i.onclick=ui);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),r=a.slice(2,y?a.length-7:void 0),v=i[Xt]||null,v=v!=null?v[a]:null,typeof v=="function"&&i.removeEventListener(r,v,y),typeof u=="function")){typeof v!="function"&&v!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(r,u,y);break e}a in i?i[a]=u:u===!0?i.setAttribute(a,""):ko(i,a,u)}}}function ln(i,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",i),He("load",i);var u=!1,y=!1,v;for(v in a)if(a.hasOwnProperty(v)){var b=a[v];if(b!=null)switch(v){case"src":u=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ht(i,r,v,b,a,null)}}y&&ht(i,r,"srcSet",a.srcSet,a,null),u&&ht(i,r,"src",a.src,a,null);return;case"input":He("invalid",i);var C=v=b=y=null,U=null,j=null;for(u in a)if(a.hasOwnProperty(u)){var ne=a[u];if(ne!=null)switch(u){case"name":y=ne;break;case"type":b=ne;break;case"checked":U=ne;break;case"defaultChecked":j=ne;break;case"value":v=ne;break;case"defaultValue":C=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,r));break;default:ht(i,r,u,ne,a,null)}}Fu(i,v,C,U,j,b,y,!1);return;case"select":He("invalid",i),u=b=v=null;for(y in a)if(a.hasOwnProperty(y)&&(C=a[y],C!=null))switch(y){case"value":v=C;break;case"defaultValue":b=C;break;case"multiple":u=C;default:ht(i,r,y,C,a,null)}r=v,a=b,i.multiple=!!u,r!=null?zs(i,!!u,r,!1):a!=null&&zs(i,!!u,a,!0);return;case"textarea":He("invalid",i),v=y=u=null;for(b in a)if(a.hasOwnProperty(b)&&(C=a[b],C!=null))switch(b){case"value":u=C;break;case"defaultValue":y=C;break;case"children":v=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:ht(i,r,b,C,a,null)}Hs(i,u,y,v);return;case"option":for(U in a)if(a.hasOwnProperty(U)&&(u=a[U],u!=null))switch(U){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ht(i,r,U,u,a,null)}return;case"dialog":He("beforetoggle",i),He("toggle",i),He("cancel",i),He("close",i);break;case"iframe":case"object":He("load",i);break;case"video":case"audio":for(u=0;u<jl.length;u++)He(jl[u],i);break;case"image":He("error",i),He("load",i);break;case"details":He("toggle",i);break;case"embed":case"source":case"link":He("error",i),He("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(u=a[j],u!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ht(i,r,j,u,a,null)}return;default:if(Lo(r)){for(ne in a)a.hasOwnProperty(ne)&&(u=a[ne],u!==void 0&&Zh(i,r,ne,u,a,void 0));return}}for(C in a)a.hasOwnProperty(C)&&(u=a[C],u!=null&&ht(i,r,C,u,a,null))}function oC(i,r,a,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,b=null,C=null,U=null,j=null,ne=null;for(W in a){var oe=a[W];if(a.hasOwnProperty(W)&&oe!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":U=oe;default:u.hasOwnProperty(W)||ht(i,r,W,null,u,oe)}}for(var J in u){var W=u[J];if(oe=a[J],u.hasOwnProperty(J)&&(W!=null||oe!=null))switch(J){case"type":v=W;break;case"name":y=W;break;case"checked":j=W;break;case"defaultChecked":ne=W;break;case"value":b=W;break;case"defaultValue":C=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,r));break;default:W!==oe&&ht(i,r,J,W,u,oe)}}Uo(i,b,C,U,j,ne,v,y);return;case"select":W=b=C=J=null;for(v in a)if(U=a[v],a.hasOwnProperty(v)&&U!=null)switch(v){case"value":break;case"multiple":W=U;default:u.hasOwnProperty(v)||ht(i,r,v,null,u,U)}for(y in u)if(v=u[y],U=a[y],u.hasOwnProperty(y)&&(v!=null||U!=null))switch(y){case"value":J=v;break;case"defaultValue":C=v;break;case"multiple":b=v;default:v!==U&&ht(i,r,y,v,u,U)}r=C,a=b,u=W,J!=null?zs(i,!!a,J,!1):!!u!=!!a&&(r!=null?zs(i,!!a,r,!0):zs(i,!!a,a?[]:"",!1));return;case"textarea":W=J=null;for(C in a)if(y=a[C],a.hasOwnProperty(C)&&y!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:ht(i,r,C,null,u,y)}for(b in u)if(y=u[b],v=a[b],u.hasOwnProperty(b)&&(y!=null||v!=null))switch(b){case"value":J=y;break;case"defaultValue":W=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:y!==v&&ht(i,r,b,y,u,v)}zu(i,J,W);return;case"option":for(var Ae in a)if(J=a[Ae],a.hasOwnProperty(Ae)&&J!=null&&!u.hasOwnProperty(Ae))switch(Ae){case"selected":i.selected=!1;break;default:ht(i,r,Ae,null,u,J)}for(U in u)if(J=u[U],W=a[U],u.hasOwnProperty(U)&&J!==W&&(J!=null||W!=null))switch(U){case"selected":i.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:ht(i,r,U,J,u,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in a)J=a[Re],a.hasOwnProperty(Re)&&J!=null&&!u.hasOwnProperty(Re)&&ht(i,r,Re,null,u,J);for(j in u)if(J=u[j],W=a[j],u.hasOwnProperty(j)&&J!==W&&(J!=null||W!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,r));break;default:ht(i,r,j,J,u,W)}return;default:if(Lo(r)){for(var mt in a)J=a[mt],a.hasOwnProperty(mt)&&J!==void 0&&!u.hasOwnProperty(mt)&&Zh(i,r,mt,void 0,u,J);for(ne in u)J=u[ne],W=a[ne],!u.hasOwnProperty(ne)||J===W||J===void 0&&W===void 0||Zh(i,r,ne,J,u,W);return}}for(var z in a)J=a[z],a.hasOwnProperty(z)&&J!=null&&!u.hasOwnProperty(z)&&ht(i,r,z,null,u,J);for(oe in u)J=u[oe],W=a[oe],!u.hasOwnProperty(oe)||J===W||J==null&&W==null||ht(i,r,oe,J,u,W)}function rv(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function aC(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var y=a[u],v=y.transferSize,b=y.initiatorType,C=y.duration;if(v&&C&&rv(b)){for(b=0,C=y.responseEnd,u+=1;u<a.length;u++){var U=a[u],j=U.startTime;if(j>C)break;var ne=U.transferSize,oe=U.initiatorType;ne&&rv(oe)&&(U=U.responseEnd,b+=ne*(U<C?1:(C-j)/(U-j)))}if(--u,r+=8*(v+b)/(y.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var em=null,tm=null;function jc(i){return i.nodeType===9?i:i.ownerDocument}function ov(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function av(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function nm(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var im=null;function lC(){var i=window.event;return i&&i.type==="popstate"?i===im?!1:(im=i,!0):(im=null,!1)}var lv=typeof setTimeout=="function"?setTimeout:void 0,uC=typeof clearTimeout=="function"?clearTimeout:void 0,uv=typeof Promise=="function"?Promise:void 0,cC=typeof queueMicrotask=="function"?queueMicrotask:typeof uv<"u"?function(i){return uv.resolve(null).then(i).catch(dC)}:lv;function dC(i){setTimeout(function(){throw i})}function fr(i){return i==="head"}function cv(i,r){var a=r,u=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(u===0){i.removeChild(y),_a(r);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")Jl(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,Jl(a);for(var v=a.firstChild;v;){var b=v.nextSibling,C=v.nodeName;v[Ri]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=b}}else a==="body"&&Jl(i.ownerDocument.body);a=y}while(a);_a(r)}function dv(i,r){var a=i;i=0;do{var u=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=u}while(a)}function sm(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":sm(a),Vo(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function fC(i,r,a,u){for(;i.nodeType===1;){var y=a;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Ri])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=ei(i.nextSibling),i===null)break}return null}function hC(i,r,a){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=ei(i.nextSibling),i===null))return null;return i}function fv(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=ei(i.nextSibling),i===null))return null;return i}function rm(i){return i.data==="$?"||i.data==="$~"}function om(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function mC(i,r){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||a.readyState!=="loading")r();else{var u=function(){r(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function ei(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var am=null;function hv(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(r===0)return ei(i.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}i=i.nextSibling}return null}function mv(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return i;r--}else a!=="/$"&&a!=="/&"||r++}i=i.previousSibling}return null}function pv(i,r,a){switch(r=jc(a),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Jl(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);Vo(i)}var ti=new Map,gv=new Set;function Yc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var _s=fe.d;fe.d={f:pC,r:gC,D:yC,C:_C,L:vC,m:TC,X:AC,S:EC,M:SC};function pC(){var i=_s.f(),r=Lc();return i||r}function gC(i){var r=Gn(i);r!==null&&r.tag===5&&r.type==="form"?Py(r):_s.r(i)}var pa=typeof document>"u"?null:document;function yv(i,r,a){var u=pa;if(u&&typeof r=="string"&&r){var y=bn(r);y='link[rel="'+i+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),gv.has(y)||(gv.add(y),i={rel:i,crossOrigin:a,href:r},u.querySelector(y)===null&&(r=u.createElement("link"),ln(r,"link",i),Ot(r),u.head.appendChild(r)))}}function yC(i){_s.D(i),yv("dns-prefetch",i,null)}function _C(i,r){_s.C(i,r),yv("preconnect",i,r)}function vC(i,r,a){_s.L(i,r,a);var u=pa;if(u&&i&&r){var y='link[rel="preload"][as="'+bn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+bn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+bn(a.imageSizes)+'"]')):y+='[href="'+bn(i)+'"]';var v=y;switch(r){case"style":v=ga(i);break;case"script":v=ya(i)}ti.has(v)||(i=E({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:i,as:r},a),ti.set(v,i),u.querySelector(y)!==null||r==="style"&&u.querySelector(Kl(v))||r==="script"&&u.querySelector($l(v))||(r=u.createElement("link"),ln(r,"link",i),Ot(r),u.head.appendChild(r)))}}function TC(i,r){_s.m(i,r);var a=pa;if(a&&i){var u=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+bn(u)+'"][href="'+bn(i)+'"]',v=y;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=ya(i)}if(!ti.has(v)&&(i=E({rel:"modulepreload",href:i},r),ti.set(v,i),a.querySelector(y)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector($l(v)))return}u=a.createElement("link"),ln(u,"link",i),Ot(u),a.head.appendChild(u)}}}function EC(i,r,a){_s.S(i,r,a);var u=pa;if(u&&i){var y=Mi(u).hoistableStyles,v=ga(i);r=r||"default";var b=y.get(v);if(!b){var C={loading:0,preload:null};if(b=u.querySelector(Kl(v)))C.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":r},a),(a=ti.get(v))&&lm(i,a);var U=b=u.createElement("link");Ot(U),ln(U,"link",i),U._p=new Promise(function(j,ne){U.onload=j,U.onerror=ne}),U.addEventListener("load",function(){C.loading|=1}),U.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Jc(b,r,u)}b={type:"stylesheet",instance:b,count:1,state:C},y.set(v,b)}}}function AC(i,r){_s.X(i,r);var a=pa;if(a&&i){var u=Mi(a).hoistableScripts,y=ya(i),v=u.get(y);v||(v=a.querySelector($l(y)),v||(i=E({src:i,async:!0},r),(r=ti.get(y))&&um(i,r),v=a.createElement("script"),Ot(v),ln(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(y,v))}}function SC(i,r){_s.M(i,r);var a=pa;if(a&&i){var u=Mi(a).hoistableScripts,y=ya(i),v=u.get(y);v||(v=a.querySelector($l(y)),v||(i=E({src:i,async:!0,type:"module"},r),(r=ti.get(y))&&um(i,r),v=a.createElement("script"),Ot(v),ln(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(y,v))}}function _v(i,r,a,u){var y=(y=ce.current)?Yc(y):null;if(!y)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=ga(a.href),a=Mi(y).hoistableStyles,u=a.get(r),u||(u={type:"style",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=ga(a.href);var v=Mi(y).hoistableStyles,b=v.get(i);if(b||(y=y.ownerDocument||y,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,b),(v=y.querySelector(Kl(i)))&&!v._p&&(b.instance=v,b.state.loading=5),ti.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ti.set(i,a),v||bC(y,i,a,b.state))),r&&u===null)throw Error(s(528,""));return b}if(r&&u!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ya(a),a=Mi(y).hoistableScripts,u=a.get(r),u||(u={type:"script",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function ga(i){return'href="'+bn(i)+'"'}function Kl(i){return'link[rel="stylesheet"]['+i+"]"}function vv(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function bC(i,r,a,u){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=i.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),ln(r,"link",a),Ot(r),i.head.appendChild(r))}function ya(i){return'[src="'+bn(i)+'"]'}function $l(i){return"script[async]"+i}function Tv(i,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var u=i.querySelector('style[data-href~="'+bn(a.href)+'"]');if(u)return r.instance=u,Ot(u),u;var y=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Ot(u),ln(u,"style",y),Jc(u,a.precedence,i),r.instance=u;case"stylesheet":y=ga(a.href);var v=i.querySelector(Kl(y));if(v)return r.state.loading|=4,r.instance=v,Ot(v),v;u=vv(a),(y=ti.get(y))&&lm(u,y),v=(i.ownerDocument||i).createElement("link"),Ot(v);var b=v;return b._p=new Promise(function(C,U){b.onload=C,b.onerror=U}),ln(v,"link",u),r.state.loading|=4,Jc(v,a.precedence,i),r.instance=v;case"script":return v=ya(a.src),(y=i.querySelector($l(v)))?(r.instance=y,Ot(y),y):(u=a,(y=ti.get(v))&&(u=E({},a),um(u,y)),i=i.ownerDocument||i,y=i.createElement("script"),Ot(y),ln(y,"link",u),i.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,Jc(u,a.precedence,i));return r.instance}function Jc(i,r,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=u.length?u[u.length-1]:null,v=y,b=0;b<u.length;b++){var C=u[b];if(C.dataset.precedence===r)v=C;else if(v!==y)break}v?v.parentNode.insertBefore(i,v.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(i,r.firstChild))}function lm(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function um(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Kc=null;function Ev(i,r,a){if(Kc===null){var u=new Map,y=Kc=new Map;y.set(a,u)}else y=Kc,u=y.get(a),u||(u=new Map,y.set(a,u));if(u.has(i))return u;for(u.set(i,null),a=a.getElementsByTagName(i),y=0;y<a.length;y++){var v=a[y];if(!(v[Ri]||v[Lt]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var b=v.getAttribute(r)||"";b=i+b;var C=u.get(b);C?C.push(v):u.set(b,[v])}}return u}function Av(i,r,a){i=i.ownerDocument||i,i.head.insertBefore(a,r==="title"?i.querySelector("head > title"):null)}function xC(i,r,a){if(a===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Sv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function CC(i,r,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=ga(u.href),v=r.querySelector(Kl(y));if(v){r=v._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=$c.bind(i),r.then(i,i)),a.state.loading|=4,a.instance=v,Ot(v);return}v=r.ownerDocument||r,u=vv(u),(y=ti.get(y))&&lm(u,y),v=v.createElement("link"),Ot(v);var b=v;b._p=new Promise(function(C,U){b.onload=C,b.onerror=U}),ln(v,"link",u),a.instance=v}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=$c.bind(i),r.addEventListener("load",a),r.addEventListener("error",a))}}var cm=0;function IC(i,r){return i.stylesheets&&i.count===0&&Xc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var u=setTimeout(function(){if(i.stylesheets&&Xc(i,i.stylesheets),i.unsuspend){var v=i.unsuspend;i.unsuspend=null,v()}},6e4+r);0<i.imgBytes&&cm===0&&(cm=62500*aC());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Xc(i,i.stylesheets),i.unsuspend)){var v=i.unsuspend;i.unsuspend=null,v()}},(i.imgBytes>cm?50:800)+r);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(y)}}:null}function $c(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Qc=null;function Xc(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Qc=new Map,r.forEach(wC,i),Qc=null,$c.call(i))}function wC(i,r){if(!(r.state.loading&4)){var a=Qc.get(i);if(a)var u=a.get(null);else{a=new Map,Qc.set(i,a);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var b=y[v];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),u=b)}u&&a.set(null,u)}y=r.instance,b=y.getAttribute("data-precedence"),v=a.get(b)||u,v===u&&a.set(null,y),a.set(b,y),this.count++,u=$c.bind(this),y.addEventListener("load",u),y.addEventListener("error",u),v?v.parentNode.insertBefore(y,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),r.state.loading|=4}}var Ql={$$typeof:K,Provider:null,Consumer:null,_currentValue:Ce,_currentValue2:Ce,_threadCount:0};function RC(i,r,a,u,y,v,b,C,U){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ii(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ii(0),this.hiddenUpdates=Ii(null),this.identifierPrefix=u,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function bv(i,r,a,u,y,v,b,C,U,j,ne,oe){return i=new RC(i,r,a,b,U,j,ne,oe,C),r=1,v===!0&&(r|=24),v=Un(3,null,null,r),i.current=v,v.stateNode=i,r=Hf(),r.refCount++,i.pooledCache=r,r.refCount++,v.memoizedState={element:u,isDehydrated:a,cache:r},Jf(v),i}function xv(i){return i?(i=Ko,i):Ko}function Cv(i,r,a,u,y,v){y=xv(y),u.context===null?u.context=y:u.pendingContext=y,u=tr(r),u.payload={element:a},v=v===void 0?null:v,v!==null&&(u.callback=v),a=nr(i,u,r),a!==null&&(Nn(a,i,r),wl(a,i,r))}function Iv(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<r?a:r}}function dm(i,r){Iv(i,r),(i=i.alternate)&&Iv(i,r)}function wv(i){if(i.tag===13||i.tag===31){var r=eo(i,67108864);r!==null&&Nn(r,i,67108864),dm(i,67108864)}}function Rv(i){if(i.tag===13||i.tag===31){var r=Fn();r=zr(r);var a=eo(i,r);a!==null&&Nn(a,i,r),dm(i,r)}}var Wc=!0;function NC(i,r,a,u){var y=Q.T;Q.T=null;var v=fe.p;try{fe.p=2,fm(i,r,a,u)}finally{fe.p=v,Q.T=y}}function MC(i,r,a,u){var y=Q.T;Q.T=null;var v=fe.p;try{fe.p=8,fm(i,r,a,u)}finally{fe.p=v,Q.T=y}}function fm(i,r,a,u){if(Wc){var y=hm(u);if(y===null)Wh(i,r,u,Zc,a),Mv(i,u);else if(PC(y,i,r,a,u))u.stopPropagation();else if(Mv(i,u),r&4&&-1<DC.indexOf(i)){for(;y!==null;){var v=Gn(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var b=xi(v.pendingLanes);if(b!==0){var C=v;for(C.pendingLanes|=2,C.entangledLanes|=2;b;){var U=1<<31-ge(b);C.entanglements[1]|=U,b&=~U}Gi(v),(ot&6)===0&&(kc=$()+500,Gl(0))}}break;case 31:case 13:C=eo(v,2),C!==null&&Nn(C,v,2),Lc(),dm(v,2)}if(v=hm(u),v===null&&Wh(i,r,u,Zc,a),v===y)break;y=v}y!==null&&u.stopPropagation()}else Wh(i,r,u,null,a)}}function hm(i){return i=jn(i),mm(i)}var Zc=null;function mm(i){if(Zc=null,i=Ni(i),i!==null){var r=l(i);if(r===null)i=null;else{var a=r.tag;if(a===13){if(i=c(r),i!==null)return i;i=null}else if(a===31){if(i=d(r),i!==null)return i;i=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Zc=i,null}function Nv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(de()){case pe:return 2;case Ee:return 8;case De:case gt:return 32;case Or:return 268435456;default:return 32}default:return 32}}var pm=!1,hr=null,mr=null,pr=null,Xl=new Map,Wl=new Map,gr=[],DC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Mv(i,r){switch(i){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":Xl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wl.delete(r.pointerId)}}function Zl(i,r,a,u,y,v){return i===null||i.nativeEvent!==v?(i={blockedOn:r,domEventName:a,eventSystemFlags:u,nativeEvent:v,targetContainers:[y]},r!==null&&(r=Gn(r),r!==null&&wv(r)),i):(i.eventSystemFlags|=u,r=i.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),i)}function PC(i,r,a,u,y){switch(r){case"focusin":return hr=Zl(hr,i,r,a,u,y),!0;case"dragenter":return mr=Zl(mr,i,r,a,u,y),!0;case"mouseover":return pr=Zl(pr,i,r,a,u,y),!0;case"pointerover":var v=y.pointerId;return Xl.set(v,Zl(Xl.get(v)||null,i,r,a,u,y)),!0;case"gotpointercapture":return v=y.pointerId,Wl.set(v,Zl(Wl.get(v)||null,i,r,a,u,y)),!0}return!1}function Dv(i){var r=Ni(i.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=c(a),r!==null){i.blockedOn=r,ai(i.priority,function(){Rv(a)});return}}else if(r===31){if(r=d(a),r!==null){i.blockedOn=r,ai(i.priority,function(){Rv(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ed(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var a=hm(i.nativeEvent);if(a===null){a=i.nativeEvent;var u=new a.constructor(a.type,a);fl=u,a.target.dispatchEvent(u),fl=null}else return r=Gn(a),r!==null&&wv(r),i.blockedOn=a,!1;r.shift()}return!0}function Pv(i,r,a){ed(i)&&a.delete(r)}function VC(){pm=!1,hr!==null&&ed(hr)&&(hr=null),mr!==null&&ed(mr)&&(mr=null),pr!==null&&ed(pr)&&(pr=null),Xl.forEach(Pv),Wl.forEach(Pv)}function td(i,r){i.blockedOn===r&&(i.blockedOn=null,pm||(pm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,VC)))}var nd=null;function Vv(i){nd!==i&&(nd=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){nd===i&&(nd=null);for(var r=0;r<i.length;r+=3){var a=i[r],u=i[r+1],y=i[r+2];if(typeof u!="function"){if(mm(u||a)===null)continue;break}var v=Gn(a);v!==null&&(i.splice(r,3),r-=3,hh(v,{pending:!0,data:y,method:a.method,action:u},u,y))}}))}function _a(i){function r(U){return td(U,i)}hr!==null&&td(hr,i),mr!==null&&td(mr,i),pr!==null&&td(pr,i),Xl.forEach(r),Wl.forEach(r);for(var a=0;a<gr.length;a++){var u=gr[a];u.blockedOn===i&&(u.blockedOn=null)}for(;0<gr.length&&(a=gr[0],a.blockedOn===null);)Dv(a),a.blockedOn===null&&gr.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var y=a[u],v=a[u+1],b=y[Xt]||null;if(typeof v=="function")b||Vv(a);else if(b){var C=null;if(v&&v.hasAttribute("formAction")){if(y=v,b=v[Xt]||null)C=b.formAction;else if(mm(y)!==null)continue}else C=b.action;typeof C=="function"?a[u+1]=C:(a.splice(u,3),u-=3),Vv(a)}}}function kv(){function i(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(b){return y=b})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function gm(i){this._internalRoot=i}id.prototype.render=gm.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,u=Fn();Cv(a,u,i,r,null,null)},id.prototype.unmount=gm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;Cv(i.current,2,null,i,null,null),Lc(),r[wi]=null}};function id(i){this._internalRoot=i}id.prototype.unstable_scheduleHydration=function(i){if(i){var r=Lu();i={blockedOn:null,target:i,priority:r};for(var a=0;a<gr.length&&r!==0&&r<gr[a].priority;a++);gr.splice(a,0,i),a===0&&Dv(i)}};var Uv=e.version;if(Uv!=="19.2.0")throw Error(s(527,Uv,"19.2.0"));fe.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=h(r),i=i!==null?T(i):null,i=i===null?null:i.stateNode,i};var kC={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sd.isDisabled&&sd.supportsFiber)try{Dn=sd.inject(kC),Jt=sd}catch{}}return tu.createRoot=function(i,r){if(!o(i))throw Error(s(299));var a=!1,u="",y=Hy,v=Gy,b=jy;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError)),r=bv(i,1,!1,null,null,a,u,null,y,v,b,kv),i[wi]=r.current,Xh(i),new gm(r)},tu.hydrateRoot=function(i,r,a){if(!o(i))throw Error(s(299));var u=!1,y="",v=Hy,b=Gy,C=jy,U=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError),a.formState!==void 0&&(U=a.formState)),r=bv(i,1,!0,r,a??null,u,y,U,v,b,C,kv),r.context=xv(null),a=r.current,u=Fn(),u=zr(u),y=tr(u),y.callback=null,nr(a,y,u),a=u,r.current.lanes=a,Br(r,a),Gi(r),i[wi]=r.current,Xh(i),new id(r)},tu.version="19.2.0",tu}var Yv;function YC(){if(Yv)return vm.exports;Yv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),vm.exports=jC(),vm.exports}var JC=YC();const KC=qE(JC),rd=()=>({transactions:[],categories:[{id:"cat-1",name:"",icon:""},{id:"cat-2",name:"",icon:""},{id:"cat-3",name:"",icon:""},{id:"cat-4",name:"",icon:""},{id:"cat-9",name:" ",icon:""},{id:"cat-5",name:"",icon:""},{id:"cat-6",name:"",icon:""},{id:"cat-8",name:"",icon:""},{id:"cat-7",name:"",icon:""}],installments:[],investments:{currentValue:0},cards:{"snb-card":{id:"snb-card",name:"SNB ",limit:26e3,dueDay:15,statementDay:25,smsSamples:["SNB","",""]},"enbd-card":{id:"enbd-card",name:"ENBD ",limit:1e4,dueDay:18,statementDay:28,smsSamples:["ENBD","","Visa card"]}},bankAccounts:{"bank-default":{id:"bank-default",name:" ",balance:0,currency:"SAR",smsSamples:["","mada","Alrajhi","","Inma","",""]}}});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let $C,QC;function XC(){return{geminiUrl:$C,vertexUrl:QC}}function WC(n,e,t,s){var o,l;if(!(n!=null&&n.baseUrl)){const c=XC();return e?(o=c.vertexUrl)!==null&&o!==void 0?o:t:(l=c.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bo{}function Se(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function g(n,e,t){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const d=c.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[d])){const p=n[d];if(Array.isArray(t))for(let h=0;h<p.length;h++){const T=p[h];g(T,e.slice(l+1),t[h])}else for(const h of p)g(h,e.slice(l+1),t)}return}else if(c.endsWith("[0]")){const d=c.slice(0,-3);d in n||(n[d]=[{}]);const p=n[d];g(p[0],e.slice(l+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const s=e[e.length-1],o=n[s];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const o=e[s];if(o.endsWith("[]")){const l=o.slice(0,-2);if(l in n){const c=n[l];return Array.isArray(c)?c.map(d=>f(d,e.slice(s+1),t)):t}else return t}else n=n[o]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bp(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZC(n){const e={},t=f(n,["operationName"]);t!=null&&g(e,["operationName"],t);const s=f(n,["resourceName"]);return s!=null&&g(e,["_url","resourceName"],s),e}function eI(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&g(e,["response"],nI(c)),e}function tI(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["response"]);return c!=null&&g(e,["response"],iI(c)),e}function nI(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>sI(c))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function iI(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>rI(c))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function sI(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],lI(t)),e}function rI(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],uI(t)),e}function oI(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function aI(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function lI(n){const e={},t=f(n,["video","uri"]);t!=null&&g(e,["uri"],t);const s=f(n,["video","encodedVideo"]);s!=null&&g(e,["videoBytes"],bp(s));const o=f(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function uI(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],bp(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Jv;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Jv||(Jv={}));var Kv;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Kv||(Kv={}));var vr;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(vr||(vr={}));var $v;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})($v||($v={}));var Qv;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Qv||(Qv={}));var Xv;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Xv||(Xv={}));var Wv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Wv||(Wv={}));var Zv;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Zv||(Zv={}));var e0;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(e0||(e0={}));var t0;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(t0||(t0={}));var n0;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(n0||(n0={}));var i0;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(i0||(i0={}));var s0;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(s0||(s0={}));var r0;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY"})(r0||(r0={}));var o0;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(o0||(o0={}));var bd;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(bd||(bd={}));var a0;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(a0||(a0={}));var zm;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(zm||(zm={}));var l0;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(l0||(l0={}));var u0;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(u0||(u0={}));var c0;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V"})(c0||(c0={}));var d0;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(d0||(d0={}));var f0;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(f0||(f0={}));var h0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(h0||(h0={}));var m0;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(m0||(m0={}));var p0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(p0||(p0={}));var g0;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(g0||(g0={}));var y0;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(y0||(y0={}));var _0;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(_0||(_0={}));var v0;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(v0||(v0={}));var T0;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(T0||(T0={}));var E0;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(E0||(E0={}));var A0;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(A0||(A0={}));var S0;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(S0||(S0={}));var b0;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(b0||(b0={}));var x0;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(x0||(x0={}));var C0;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(C0||(C0={}));var I0;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(I0||(I0={}));var w0;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(w0||(w0={}));var R0;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(R0||(R0={}));var N0;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(N0||(N0={}));var M0;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(M0||(M0={}));var D0;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(D0||(D0={}));var P0;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(P0||(P0={}));var V0;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(V0||(V0={}));var k0;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(k0||(k0={}));var U0;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(U0||(U0={}));var L0;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(L0||(L0={}));var Sa;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Sa||(Sa={}));class Hm{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class nu{get text(){var e,t,s,o,l,c,d,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",T=!1;const E=[];for(const S of(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[I,V]of Object.entries(S))I!=="text"&&I!=="thought"&&(V!==null||V!==void 0)&&E.push(I);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;T=!0,h+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),T?h:void 0}get data(){var e,t,s,o,l,c,d,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const T=[];for(const E of(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[S,I]of Object.entries(E))S!=="inlineData"&&(I!==null||I!==void 0)&&T.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(h+=atob(E.inlineData.data))}return T.length>0&&console.warn(`there are non-data parts ${T} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,s,o,l,c,d,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(T=>T.functionCall).map(T=>T.functionCall).filter(T=>T!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,s,o,l,c,d,p,h;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const T=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((T==null?void 0:T.length)!==0)return(h=T==null?void 0:T[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,s,o,l,c,d,p,h;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const T=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((T==null?void 0:T.length)!==0)return(h=T==null?void 0:T[0])===null||h===void 0?void 0:h.output}}class O0{}class q0{}class cI{}class dI{}class fI{}class hI{}class B0{}class F0{}class z0{}class mI{}class xd{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const s=new xd;let o;const l=e;return t?o=tI(l):o=eI(l),Object.assign(s,o),s}}class H0{}class G0{}class j0{}class pI{}class gI{}class yI{}class Y0{}class _I{get text(){var e,t,s;let o="",l=!1;const c=[];for(const d of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[p,h]of Object.entries(d))p!=="text"&&p!=="thought"&&h!==null&&c.push(p);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,o+=d.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var e,t,s;let o="";const l=[];for(const c of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[d,p]of Object.entries(c))d!=="inlineData"&&p!==null&&l.push(d);c.inlineData&&typeof c.inlineData.data=="string"&&(o+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class vI{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function st(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function BE(n,e){const t=st(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function FE(n){return Array.isArray(n)?n.map(e=>Cd(e)):[Cd(n)]}function Cd(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function zE(n){const e=Cd(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function HE(n){const e=Cd(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function J0(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function GE(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>J0(e)):[J0(n)]}function Gm(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function K0(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function $0(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function pn(n){if(n==null)throw new Error("ContentUnion is required");return Gm(n)?n:{role:"user",parts:GE(n)}}function xp(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=pn(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=pn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>pn(t)):[pn(e)]}function si(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(K0(n)||$0(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[pn(n)]}const e=[],t=[],s=Gm(n[0]);for(const o of n){const l=Gm(o);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(o);else{if(K0(o)||$0(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return s||e.push({role:"user",parts:GE(t)}),e}function TI(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(vr).includes(t[0].toUpperCase())?t[0].toUpperCase():vr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(vr).includes(s.toUpperCase())?s.toUpperCase():vr.TYPE_UNSPECIFIED})}}function Ca(n){const e={},t=["items"],s=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&TI(n.type,e);for(const[c,d]of Object.entries(n))if(d!=null)if(c=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(vr).includes(d.toUpperCase())?d.toUpperCase():vr.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=Ca(d);else if(s.includes(c)){const p=[];for(const h of d){if(h.type=="null"){e.nullable=!0;continue}p.push(Ca(h))}e[c]=p}else if(o.includes(c)){const p={};for(const[h,T]of Object.entries(d))p[h]=Ca(T);e[c]=p}else{if(c==="additionalProperties")continue;e[c]=d}return e}function Cp(n){return Ca(n)}function Ip(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function wp(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Ha(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ca(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ca(e.response));return n}function Ga(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function EI(n,e,t,s=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function Us(n,e){if(typeof e!="string")throw new Error("name must be a string");return EI(n,e,"cachedContents")}function jE(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Pr(n){return bp(n)}function AI(n){return n!=null&&typeof n=="object"&&"name"in n}function SI(n){return n!=null&&typeof n=="object"&&"video"in n}function bI(n){return n!=null&&typeof n=="object"&&"uri"in n}function YE(n){var e;let t;if(AI(n)&&(t=n.name),!(bI(n)&&(t=n.uri,t===void 0))&&!(SI(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function JE(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function KE(n){for(const e of["models","tunedModels","publisherModels"])if(xI(n,e))return n[e];return[]}function xI(n,e){return n!==null&&typeof n=="object"&&e in n}function CI(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function II(n,e={}){const t=[],s=new Set;for(const o of n){const l=o.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const c=CI(o,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function $E(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function wI(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function QE(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let l=!1;for(const c of o){if(typeof c!="object"||c===null)continue;const p=c.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function ja(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function XE(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RI(n){const e={},t=f(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const s=f(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>rw(c))),g(e,["inlinedResponses"],l)}const o=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["inlinedEmbedContentResponses"],l)}return e}function NI(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const s=f(n,["gcsDestination","outputUriPrefix"]);s!=null&&g(e,["gcsUri"],s);const o=f(n,["bigqueryDestination","outputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function MI(n){const e={},t=f(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const s=f(n,["gcsUri"]);s!=null&&g(e,["gcsDestination","outputUriPrefix"],s);const o=f(n,["bigqueryUri"]);if(o!=null&&g(e,["bigqueryDestination","outputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function iu(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata","displayName"]);s!=null&&g(e,["displayName"],s);const o=f(n,["metadata","state"]);o!=null&&g(e,["state"],XE(o));const l=f(n,["metadata","createTime"]);l!=null&&g(e,["createTime"],l);const c=f(n,["metadata","endTime"]);c!=null&&g(e,["endTime"],c);const d=f(n,["metadata","updateTime"]);d!=null&&g(e,["updateTime"],d);const p=f(n,["metadata","model"]);p!=null&&g(e,["model"],p);const h=f(n,["metadata","output"]);return h!=null&&g(e,["dest"],RI(QE(h))),e}function jm(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const o=f(n,["state"]);o!=null&&g(e,["state"],XE(o));const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["createTime"]);c!=null&&g(e,["createTime"],c);const d=f(n,["startTime"]);d!=null&&g(e,["startTime"],d);const p=f(n,["endTime"]);p!=null&&g(e,["endTime"],p);const h=f(n,["updateTime"]);h!=null&&g(e,["updateTime"],h);const T=f(n,["model"]);T!=null&&g(e,["model"],T);const E=f(n,["inputConfig"]);E!=null&&g(e,["src"],DI(E));const S=f(n,["outputConfig"]);return S!=null&&g(e,["dest"],NI(QE(S))),e}function DI(n){const e={},t=f(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const s=f(n,["gcsSource","uris"]);s!=null&&g(e,["gcsUri"],s);const o=f(n,["bigquerySource","inputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function PI(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&g(t,["fileName"],s);const o=f(e,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>sw(n,c))),g(t,["requests","requests"],l)}return t}function VI(n){const e={},t=f(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const s=f(n,["gcsUri"]);s!=null&&g(e,["gcsSource","uris"],s);const o=f(n,["bigqueryUri"]);if(o!=null&&g(e,["bigquerySource","inputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function kI(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&g(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function UI(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],ja(n,s)),t}function LI(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],ja(n,s)),t}function OI(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],qI(s));const o=f(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const l=f(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const c=f(n,["urlContextMetadata"]);c!=null&&g(e,["urlContextMetadata"],c);const d=f(n,["avgLogprobs"]);d!=null&&g(e,["avgLogprobs"],d);const p=f(n,["groundingMetadata"]);p!=null&&g(e,["groundingMetadata"],p);const h=f(n,["index"]);h!=null&&g(e,["index"],h);const T=f(n,["logprobsResult"]);T!=null&&g(e,["logprobsResult"],T);const E=f(n,["safetyRatings"]);if(E!=null){let S=E;Array.isArray(S)&&(S=S.map(I=>I)),g(e,["safetyRatings"],S)}return e}function qI(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["citations"],s)}return e}function WE(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>fw(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function BI(n,e){const t={},s=f(n,["displayName"]);if(e!==void 0&&s!=null&&g(e,["batch","displayName"],s),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function FI(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const o=f(n,["dest"]);return e!==void 0&&o!=null&&g(e,["outputConfig"],MI(wI(o))),t}function Q0(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],st(n,s));const o=f(e,["src"]);o!=null&&g(t,["batch","inputConfig"],PI(n,$E(n,o)));const l=f(e,["config"]);return l!=null&&BI(l,t),t}function zI(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],st(n,s));const o=f(e,["src"]);o!=null&&g(t,["inputConfig"],VI($E(n,o)));const l=f(e,["config"]);return l!=null&&FI(l,t),t}function HI(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["batch","displayName"],s),t}function Sm(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],st(n,s));const o=f(e,["src"]);o!=null&&g(t,["batch","inputConfig"],QI(n,o));const l=f(e,["config"]);return l!=null&&HI(l,t),t}function GI(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],ja(n,s)),t}function jI(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],ja(n,s)),t}function YI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);return l!=null&&g(e,["error"],l),e}function JI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);return l!=null&&g(e,["error"],l),e}function KI(n,e){const t={},s=f(e,["contents"]);if(s!=null){let l=xp(n,s);Array.isArray(l)&&(l=l.map(c=>c)),g(t,["requests[]","request","content"],l)}const o=f(e,["config"]);return o!=null&&g(t,["_self"],$I(o,t)),t}function $I(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function QI(n,e){const t={},s=f(e,["fileName"]);s!=null&&g(t,["file_name"],s);const o=f(e,["inlinedRequests"]);return o!=null&&g(t,["requests"],KI(n,o)),t}function XI(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function WI(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],WE(pn(o)));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&g(s,["topP"],c);const d=f(e,["topK"]);d!=null&&g(s,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&g(s,["maxOutputTokens"],h);const T=f(e,["stopSequences"]);T!=null&&g(s,["stopSequences"],T);const E=f(e,["responseLogprobs"]);E!=null&&g(s,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&g(s,["logprobs"],S);const I=f(e,["presencePenalty"]);I!=null&&g(s,["presencePenalty"],I);const V=f(e,["frequencyPenalty"]);V!=null&&g(s,["frequencyPenalty"],V);const B=f(e,["seed"]);B!=null&&g(s,["seed"],B);const F=f(e,["responseMimeType"]);F!=null&&g(s,["responseMimeType"],F);const ee=f(e,["responseSchema"]);ee!=null&&g(s,["responseSchema"],Cp(ee));const te=f(e,["responseJsonSchema"]);if(te!=null&&g(s,["responseJsonSchema"],te),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const K=f(e,["safetySettings"]);if(t!==void 0&&K!=null){let P=K;Array.isArray(P)&&(P=P.map(D=>hw(D))),g(t,["safetySettings"],P)}const Y=f(e,["tools"]);if(t!==void 0&&Y!=null){let P=Ga(Y);Array.isArray(P)&&(P=P.map(D=>mw(Ha(D)))),g(t,["tools"],P)}const ae=f(e,["toolConfig"]);if(t!==void 0&&ae!=null&&g(t,["toolConfig"],ae),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Z=f(e,["cachedContent"]);t!==void 0&&Z!=null&&g(t,["cachedContent"],Us(n,Z));const R=f(e,["responseModalities"]);R!=null&&g(s,["responseModalities"],R);const M=f(e,["mediaResolution"]);M!=null&&g(s,["mediaResolution"],M);const N=f(e,["speechConfig"]);if(N!=null&&g(s,["speechConfig"],Ip(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=f(e,["thinkingConfig"]);L!=null&&g(s,["thinkingConfig"],L);const k=f(e,["imageConfig"]);return k!=null&&g(s,["imageConfig"],k),s}function ZI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(h=>OI(h))),g(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const l=f(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&g(e,["responseId"],c);const d=f(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function ew(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],ja(n,s)),t}function tw(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],ja(n,s)),t}function nw(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function iw(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&g(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function sw(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["request","model"],st(n,s));const o=f(e,["contents"]);if(o!=null){let d=si(o);Array.isArray(d)&&(d=d.map(p=>WE(p))),g(t,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&g(t,["metadata"],l);const c=f(e,["config"]);return c!=null&&g(t,["request","generationConfig"],WI(n,c,f(t,["request"],{}))),t}function rw(n){const e={},t=f(n,["response"]);t!=null&&g(e,["response"],ZI(t));const s=f(n,["error"]);return s!=null&&g(e,["error"],s),e}function ow(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);if(e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function aw(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const l=f(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),t}function lw(n){const e={},t=f(n,["config"]);return t!=null&&ow(t,e),e}function uw(n){const e={},t=f(n,["config"]);return t!=null&&aw(t,e),e}function cw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>iu(c))),g(e,["batchJobs"],l)}return e}function dw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>jm(c))),g(e,["batchJobs"],l)}return e}function fw(n){const e={},t=f(n,["videoMetadata"]);t!=null&&g(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&g(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&g(e,["inlineData"],kI(o));const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],XI(l));const c=f(n,["thoughtSignature"]);c!=null&&g(e,["thoughtSignature"],c);const d=f(n,["functionCall"]);d!=null&&g(e,["functionCall"],d);const p=f(n,["codeExecutionResult"]);p!=null&&g(e,["codeExecutionResult"],p);const h=f(n,["executableCode"]);h!=null&&g(e,["executableCode"],h);const T=f(n,["functionResponse"]);T!=null&&g(e,["functionResponse"],T);const E=f(n,["text"]);return E!=null&&g(e,["text"],E),e}function hw(n){const e={};if(f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=f(n,["category"]);t!=null&&g(e,["category"],t);const s=f(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function mw(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(T=>T)),g(e,["functionDeclarations"],h)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&g(e,["googleSearch"],iw(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&g(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],nw(l));const c=f(n,["urlContext"]);c!=null&&g(e,["urlContext"],c);const d=f(n,["computerUse"]);d!=null&&g(e,["computerUse"],d);const p=f(n,["codeExecution"]);return p!=null&&g(e,["codeExecution"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var yo;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(yo||(yo={}));class Su{constructor(e,t,s,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,o)}init(e,t,s){var o,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(o=c.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pw extends bo{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{var s,o;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(t.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(t);const d=this.createInlinedEmbedContentRequest(t),p=d.path,h=d.body,T=Sm(this.apiClient,t)._query||{};return this.apiClient.request({path:p,queryParams:T,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(S=>S.json()).then(S=>iu(S))},this.list=async(t={})=>new Su(yo.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=Q0(this.apiClient,e),s=t._url,o=Se("{model}:batchGenerateContent",s),d=t.batch.inputConfig.requests,p=d.requests,h=[];for(const T of p){const E=Object.assign({},T);if(E.systemInstruction){const S=E.systemInstruction;delete E.systemInstruction;const I=E.request;I.systemInstruction=S,E.request=I}h.push(E)}return d.requests=h,delete t.config,delete t._url,delete t._query,{path:o,body:t}}createInlinedEmbedContentRequest(e){const t=Sm(this.apiClient,e),s=t._url,o=Se("{model}:asyncBatchEmbedContent",s),d=t.batch.inputConfig.requests,p=d.requests,h=[];delete d.config;for(const T of p){const E=Object.assign({},T),S=E.request;for(const I in E)I!=="request"&&(S[I]=E[I],delete E[I]);h.push(E)}return d.requests=h,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},o=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${o}`),s.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${o}`;else if(c)s.dest=`${c}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=zI(this.apiClient,e);return d=Se("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>jm(T))}else{const h=Q0(this.apiClient,e);return d=Se("{model}:batchGenerateContent",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>iu(T))}}async createEmbeddingsInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Sm(this.apiClient,e);return l=Se("{model}:asyncBatchEmbedContent",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>iu(p))}}async get(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=tw(this.apiClient,e);return d=Se("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>jm(T))}else{const h=ew(this.apiClient,e);return d=Se("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>iu(T))}}async cancel(e){var t,s,o,l;let c="",d={};if(this.apiClient.isVertexAI()){const p=LI(this.apiClient,e);c=Se("batchPredictionJobs/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=UI(this.apiClient,e);c=Se("batches/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=uw(e);return d=Se("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=dw(T),S=new Y0;return Object.assign(S,E),S})}else{const h=lw(e);return d=Se("batches",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=cw(T),S=new Y0;return Object.assign(S,E),S})}}async delete(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=jI(this.apiClient,e);return d=Se("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>JI(T))}else{const h=GI(this.apiClient,e);return d=Se("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>YI(T))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gw(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&g(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function X0(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>Lw(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function yw(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const l=f(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let T=si(c);Array.isArray(T)&&(T=T.map(E=>X0(E))),g(e,["contents"],T)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],X0(pn(d)));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let T=p;Array.isArray(T)&&(T=T.map(E=>Ow(E))),g(e,["tools"],T)}const h=f(n,["toolConfig"]);if(e!==void 0&&h!=null&&g(e,["toolConfig"],h),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function _w(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const l=f(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let E=si(c);Array.isArray(E)&&(E=E.map(S=>S)),g(e,["contents"],E)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],pn(d));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let E=p;Array.isArray(E)&&(E=E.map(S=>qw(S))),g(e,["tools"],E)}const h=f(n,["toolConfig"]);e!==void 0&&h!=null&&g(e,["toolConfig"],h);const T=f(n,["kmsKeyName"]);return e!==void 0&&T!=null&&g(e,["encryption_spec","kmsKeyName"],T),t}function vw(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],BE(n,s));const o=f(e,["config"]);return o!=null&&yw(o,t),t}function Tw(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],BE(n,s));const o=f(e,["config"]);return o!=null&&_w(o,t),t}function Ew(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Us(n,s)),t}function Aw(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Us(n,s)),t}function Sw(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function bw(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function xw(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Cw(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&g(e,["response"],c);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function Iw(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Us(n,s)),t}function ww(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Us(n,s)),t}function Rw(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function Nw(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&g(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Mw(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function Dw(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function Pw(n){const e={},t=f(n,["config"]);return t!=null&&Mw(t,e),e}function Vw(n){const e={},t=f(n,["config"]);return t!=null&&Dw(t,e),e}function kw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["cachedContents"],l)}return e}function Uw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["cachedContents"],l)}return e}function Lw(n){const e={},t=f(n,["videoMetadata"]);t!=null&&g(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&g(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&g(e,["inlineData"],gw(o));const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],xw(l));const c=f(n,["thoughtSignature"]);c!=null&&g(e,["thoughtSignature"],c);const d=f(n,["functionCall"]);d!=null&&g(e,["functionCall"],d);const p=f(n,["codeExecutionResult"]);p!=null&&g(e,["codeExecutionResult"],p);const h=f(n,["executableCode"]);h!=null&&g(e,["executableCode"],h);const T=f(n,["functionResponse"]);T!=null&&g(e,["functionResponse"],T);const E=f(n,["text"]);return E!=null&&g(e,["text"],E),e}function Ow(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(T=>T)),g(e,["functionDeclarations"],h)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&g(e,["googleSearch"],Nw(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&g(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],Rw(l));const c=f(n,["urlContext"]);c!=null&&g(e,["urlContext"],c);const d=f(n,["computerUse"]);d!=null&&g(e,["computerUse"],d);const p=f(n,["codeExecution"]);return p!=null&&g(e,["codeExecution"],p),e}function qw(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>Cw(S))),g(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const o=f(n,["googleSearch"]);o!=null&&g(e,["googleSearch"],o);const l=f(n,["googleSearchRetrieval"]);l!=null&&g(e,["googleSearchRetrieval"],l);const c=f(n,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const p=f(n,["urlContext"]);p!=null&&g(e,["urlContext"],p);const h=f(n,["computerUse"]);h!=null&&g(e,["computerUse"],h);const T=f(n,["codeExecution"]);return T!=null&&g(e,["codeExecution"],T),e}function Bw(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function Fw(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function zw(n,e){const t={},s=f(e,["name"]);s!=null&&g(t,["_url","name"],Us(n,s));const o=f(e,["config"]);return o!=null&&Bw(o,t),t}function Hw(n,e){const t={},s=f(e,["name"]);s!=null&&g(t,["_url","name"],Us(n,s));const o=f(e,["config"]);return o!=null&&Fw(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gw extends bo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Su(yo.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=Tw(this.apiClient,e);return d=Se("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>T)}else{const h=vw(this.apiClient,e);return d=Se("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>T)}}async get(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=ww(this.apiClient,e);return d=Se("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>T)}else{const h=Iw(this.apiClient,e);return d=Se("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>T)}}async delete(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=Aw(this.apiClient,e);return d=Se("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=bw(T),S=new G0;return Object.assign(S,E),S})}else{const h=Ew(this.apiClient,e);return d=Se("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=Sw(T),S=new G0;return Object.assign(S,E),S})}}async update(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=Hw(this.apiClient,e);return d=Se("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>T)}else{const h=zw(this.apiClient,e);return d=Se("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>T)}}async listInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=Vw(e);return d=Se("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=Uw(T),S=new j0;return Object.assign(S,E),S})}else{const h=Pw(e);return d=Se("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=kw(T),S=new j0;return Object.assign(S,E),S})}}}function W0(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Tt(n){return this instanceof Tt?(this.v=n,this):new Tt(n)}function Ia(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(I){return function(V){return Promise.resolve(V).then(I,E)}}function d(I,V){s[I]&&(o[I]=function(B){return new Promise(function(F,ee){l.push([I,B,F,ee])>1||p(I,B)})},V&&(o[I]=V(o[I])))}function p(I,V){try{h(s[I](V))}catch(B){S(l[0][3],B)}}function h(I){I.value instanceof Tt?Promise.resolve(I.value.v).then(T,E):S(l[0][2],I)}function T(I){p("next",I)}function E(I){p("throw",I)}function S(I,V){I(V),l.shift(),l.length&&p(l[0][0],l[0][1])}}function uu(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof W0=="function"?W0(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(c){return new Promise(function(d,p){c=n[l](c),o(d,p,c.done,c.value)})}}function o(l,c,d,p){Promise.resolve(p).then(function(h){l({value:h,done:d})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jw(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:ZE(t)}function ZE(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Yw(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Z0(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const o=[];let l=!0;for(;s<t&&n[s].role==="model";)o.push(n[s]),l&&!ZE(n[s])&&(l=!1),s++;l?e.push(...o):e.pop()}return e}class Jw{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Kw(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Kw{constructor(e,t,s,o={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),Yw(l)}async sendMessage(e){var t;await this.sendPromise;const s=pn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,c,d;const p=await o,h=(c=(l=p.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,T=p.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];T!=null&&(S=(d=T.slice(E))!==null&&d!==void 0?d:[]);const I=h?[h]:[];this.recordHistory(s,I,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const s=pn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?Z0(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,o;return Ia(this,arguments,function*(){var c,d,p,h;const T=[];try{for(var E=!0,S=uu(e),I;I=yield Tt(S.next()),c=I.done,!c;E=!0){h=I.value,E=!1;const V=h;if(jw(V)){const B=(o=(s=V.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content;B!==void 0&&T.push(B)}yield yield Tt(V)}}catch(V){d={error:V}}finally{try{!E&&!c&&(p=S.return)&&(yield Tt(p.call(S)))}finally{if(d)throw d.error}}this.recordHistory(t,T)})}recordHistory(e,t,s){let o=[];t.length>0&&t.every(l=>l.role!==void 0)?o=t:o.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...Z0(s)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kd extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Kd.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $w(n){const e={},t=f(n,["file"]);return t!=null&&g(e,["file"],t),e}function Qw(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function Xw(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],YE(t)),e}function Ww(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function Zw(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],YE(t)),e}function eR(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function tR(n){const e={},t=f(n,["config"]);return t!=null&&eR(t,e),e}function nR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iR extends bo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Su(yo.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=tR(e);return l=Se("files",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(h=>{const T=h;return T.sdkHttpResponse={headers:p.headers},T})),o.then(p=>{const h=nR(p),T=new pI;return Object.assign(T,h),T})}}async createInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=$w(e);return l=Se("upload/v1beta/files",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const h=Qw(p),T=new gI;return Object.assign(T,h),T})}}async get(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Zw(e);return l=Se("files/{file}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Xw(e);return l=Se("files/{file}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(h=>{const T=h;return T.sdkHttpResponse={headers:p.headers},T})),o.then(p=>{const h=Ww(p),T=new yI;return Object.assign(T,h),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function md(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&g(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function sR(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>vR(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function rR(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function oR(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&g(e,["response"],c);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function aR(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=f(n,["audioTimestamp"]);s!=null&&g(e,["audioTimestamp"],s);const o=f(n,["candidateCount"]);o!=null&&g(e,["candidateCount"],o);const l=f(n,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const c=f(n,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const d=f(n,["logprobs"]);d!=null&&g(e,["logprobs"],d);const p=f(n,["maxOutputTokens"]);p!=null&&g(e,["maxOutputTokens"],p);const h=f(n,["mediaResolution"]);h!=null&&g(e,["mediaResolution"],h);const T=f(n,["presencePenalty"]);T!=null&&g(e,["presencePenalty"],T);const E=f(n,["responseJsonSchema"]);E!=null&&g(e,["responseJsonSchema"],E);const S=f(n,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const I=f(n,["responseMimeType"]);I!=null&&g(e,["responseMimeType"],I);const V=f(n,["responseModalities"]);V!=null&&g(e,["responseModalities"],V);const B=f(n,["responseSchema"]);B!=null&&g(e,["responseSchema"],B);const F=f(n,["routingConfig"]);F!=null&&g(e,["routingConfig"],F);const ee=f(n,["seed"]);ee!=null&&g(e,["seed"],ee);const te=f(n,["speechConfig"]);te!=null&&g(e,["speechConfig"],eA(te));const K=f(n,["stopSequences"]);K!=null&&g(e,["stopSequences"],K);const Y=f(n,["temperature"]);Y!=null&&g(e,["temperature"],Y);const ae=f(n,["thinkingConfig"]);ae!=null&&g(e,["thinkingConfig"],ae);const Z=f(n,["topK"]);Z!=null&&g(e,["topK"],Z);const R=f(n,["topP"]);return R!=null&&g(e,["topP"],R),e}function lR(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function uR(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&g(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function cR(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const T=f(n,["seed"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","seed"],T);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],wp(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const I=f(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],I);const V=f(n,["systemInstruction"]);e!==void 0&&V!=null&&g(e,["setup","systemInstruction"],sR(pn(V)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let Z=Ga(B);Array.isArray(Z)&&(Z=Z.map(R=>ER(Ha(R)))),g(e,["setup","tools"],Z)}const F=f(n,["sessionResumption"]);e!==void 0&&F!=null&&g(e,["setup","sessionResumption"],TR(F));const ee=f(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&g(e,["setup","inputAudioTranscription"],ee);const te=f(n,["outputAudioTranscription"]);e!==void 0&&te!=null&&g(e,["setup","outputAudioTranscription"],te);const K=f(n,["realtimeInputConfig"]);e!==void 0&&K!=null&&g(e,["setup","realtimeInputConfig"],K);const Y=f(n,["contextWindowCompression"]);e!==void 0&&Y!=null&&g(e,["setup","contextWindowCompression"],Y);const ae=f(n,["proactivity"]);return e!==void 0&&ae!=null&&g(e,["setup","proactivity"],ae),t}function dR(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],aR(s));const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const T=f(n,["seed"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","seed"],T);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],eA(wp(E)));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const I=f(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],I);const V=f(n,["systemInstruction"]);e!==void 0&&V!=null&&g(e,["setup","systemInstruction"],pn(V));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let Z=Ga(B);Array.isArray(Z)&&(Z=Z.map(R=>AR(Ha(R)))),g(e,["setup","tools"],Z)}const F=f(n,["sessionResumption"]);e!==void 0&&F!=null&&g(e,["setup","sessionResumption"],F);const ee=f(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&g(e,["setup","inputAudioTranscription"],ee);const te=f(n,["outputAudioTranscription"]);e!==void 0&&te!=null&&g(e,["setup","outputAudioTranscription"],te);const K=f(n,["realtimeInputConfig"]);e!==void 0&&K!=null&&g(e,["setup","realtimeInputConfig"],K);const Y=f(n,["contextWindowCompression"]);e!==void 0&&Y!=null&&g(e,["setup","contextWindowCompression"],Y);const ae=f(n,["proactivity"]);return e!==void 0&&ae!=null&&g(e,["setup","proactivity"],ae),t}function fR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],st(n,s));const o=f(e,["config"]);return o!=null&&g(t,["config"],cR(o,t)),t}function hR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],st(n,s));const o=f(e,["config"]);return o!=null&&g(t,["config"],dR(o,t)),t}function mR(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function pR(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["weightedPrompts"],s)}return e}function gR(n){const e={},t=f(n,["media"]);if(t!=null){let h=FE(t);Array.isArray(h)&&(h=h.map(T=>md(T))),g(e,["mediaChunks"],h)}const s=f(n,["audio"]);s!=null&&g(e,["audio"],md(HE(s)));const o=f(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const l=f(n,["video"]);l!=null&&g(e,["video"],md(zE(l)));const c=f(n,["text"]);c!=null&&g(e,["text"],c);const d=f(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function yR(n){const e={},t=f(n,["media"]);if(t!=null){let h=FE(t);Array.isArray(h)&&(h=h.map(T=>T)),g(e,["mediaChunks"],h)}const s=f(n,["audio"]);s!=null&&g(e,["audio"],HE(s));const o=f(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const l=f(n,["video"]);l!=null&&g(e,["video"],zE(l));const c=f(n,["text"]);c!=null&&g(e,["text"],c);const d=f(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function _R(n){const e={},t=f(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const s=f(n,["serverContent"]);s!=null&&g(e,["serverContent"],s);const o=f(n,["toolCall"]);o!=null&&g(e,["toolCall"],o);const l=f(n,["toolCallCancellation"]);l!=null&&g(e,["toolCallCancellation"],l);const c=f(n,["usageMetadata"]);c!=null&&g(e,["usageMetadata"],SR(c));const d=f(n,["goAway"]);d!=null&&g(e,["goAway"],d);const p=f(n,["sessionResumptionUpdate"]);return p!=null&&g(e,["sessionResumptionUpdate"],p),e}function vR(n){const e={},t=f(n,["videoMetadata"]);t!=null&&g(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&g(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&g(e,["inlineData"],md(o));const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],rR(l));const c=f(n,["thoughtSignature"]);c!=null&&g(e,["thoughtSignature"],c);const d=f(n,["functionCall"]);d!=null&&g(e,["functionCall"],d);const p=f(n,["codeExecutionResult"]);p!=null&&g(e,["codeExecutionResult"],p);const h=f(n,["executableCode"]);h!=null&&g(e,["executableCode"],h);const T=f(n,["functionResponse"]);T!=null&&g(e,["functionResponse"],T);const E=f(n,["text"]);return E!=null&&g(e,["text"],E),e}function TR(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function eA(n){const e={},t=f(n,["voiceConfig"]);if(t!=null&&g(e,["voiceConfig"],t),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=f(n,["languageCode"]);return s!=null&&g(e,["languageCode"],s),e}function ER(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(T=>T)),g(e,["functionDeclarations"],h)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&g(e,["googleSearch"],uR(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&g(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],lR(l));const c=f(n,["urlContext"]);c!=null&&g(e,["urlContext"],c);const d=f(n,["computerUse"]);d!=null&&g(e,["computerUse"],d);const p=f(n,["codeExecution"]);return p!=null&&g(e,["codeExecution"],p),e}function AR(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>oR(S))),g(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const o=f(n,["googleSearch"]);o!=null&&g(e,["googleSearch"],o);const l=f(n,["googleSearchRetrieval"]);l!=null&&g(e,["googleSearchRetrieval"],l);const c=f(n,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const p=f(n,["urlContext"]);p!=null&&g(e,["urlContext"],p);const h=f(n,["computerUse"]);h!=null&&g(e,["computerUse"],h);const T=f(n,["codeExecution"]);return T!=null&&g(e,["codeExecution"],T),e}function SR(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const s=f(n,["cachedContentTokenCount"]);s!=null&&g(e,["cachedContentTokenCount"],s);const o=f(n,["candidatesTokenCount"]);o!=null&&g(e,["responseTokenCount"],o);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&g(e,["toolUsePromptTokenCount"],l);const c=f(n,["thoughtsTokenCount"]);c!=null&&g(e,["thoughtsTokenCount"],c);const d=f(n,["totalTokenCount"]);d!=null&&g(e,["totalTokenCount"],d);const p=f(n,["promptTokensDetails"]);if(p!=null){let I=p;Array.isArray(I)&&(I=I.map(V=>V)),g(e,["promptTokensDetails"],I)}const h=f(n,["cacheTokensDetails"]);if(h!=null){let I=h;Array.isArray(I)&&(I=I.map(V=>V)),g(e,["cacheTokensDetails"],I)}const T=f(n,["candidatesTokensDetails"]);if(T!=null){let I=T;Array.isArray(I)&&(I=I.map(V=>V)),g(e,["responseTokensDetails"],I)}const E=f(n,["toolUsePromptTokensDetails"]);if(E!=null){let I=E;Array.isArray(I)&&(I=I.map(V=>V)),g(e,["toolUsePromptTokensDetails"],I)}const S=f(n,["trafficType"]);return S!=null&&g(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bR(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&g(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function xR(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],CR(s));const o=f(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const l=f(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const c=f(n,["urlContextMetadata"]);c!=null&&g(e,["urlContextMetadata"],c);const d=f(n,["avgLogprobs"]);d!=null&&g(e,["avgLogprobs"],d);const p=f(n,["groundingMetadata"]);p!=null&&g(e,["groundingMetadata"],p);const h=f(n,["index"]);h!=null&&g(e,["index"],h);const T=f(n,["logprobsResult"]);T!=null&&g(e,["logprobsResult"],T);const E=f(n,["safetyRatings"]);if(E!=null){let S=E;Array.isArray(S)&&(S=S.map(I=>I)),g(e,["safetyRatings"],S)}return e}function CR(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["citations"],s)}return e}function IR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],st(n,s));const o=f(e,["contents"]);if(o!=null){let l=si(o);Array.isArray(l)&&(l=l.map(c=>c)),g(t,["contents"],l)}return t}function wR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["tokensInfo"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),g(e,["tokensInfo"],o)}return e}function RR(n){const e={},t=f(n,["values"]);t!=null&&g(e,["values"],t);const s=f(n,["statistics"]);return s!=null&&g(e,["statistics"],NR(s)),e}function NR(n){const e={},t=f(n,["truncated"]);t!=null&&g(e,["truncated"],t);const s=f(n,["token_count"]);return s!=null&&g(e,["tokenCount"],s),e}function $d(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>kN(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function MR(n){const e={},t=f(n,["controlType"]);t!=null&&g(e,["controlType"],t);const s=f(n,["enableControlImageComputation"]);return s!=null&&g(e,["computeControl"],s),e}function DR(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function PR(n,e){const t={},s=f(n,["systemInstruction"]);e!==void 0&&s!=null&&g(e,["systemInstruction"],pn(s));const o=f(n,["tools"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>rA(d))),g(e,["tools"],c)}const l=f(n,["generationConfig"]);return e!==void 0&&l!=null&&g(e,["generationConfig"],AN(l)),t}function VR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],st(n,s));const o=f(e,["contents"]);if(o!=null){let c=si(o);Array.isArray(c)&&(c=c.map(d=>$d(d))),g(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&DR(l),t}function kR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],st(n,s));const o=f(e,["contents"]);if(o!=null){let c=si(o);Array.isArray(c)&&(c=c.map(d=>d)),g(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&PR(l,t),t}function UR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);s!=null&&g(e,["totalTokens"],s);const o=f(n,["cachedContentTokenCount"]);return o!=null&&g(e,["cachedContentTokenCount"],o),e}function LR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);return s!=null&&g(e,["totalTokens"],s),e}function OR(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],st(n,s)),t}function qR(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],st(n,s)),t}function BR(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function FR(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function zR(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&g(e,["parameters","aspectRatio"],c);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const h=f(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&g(e,["parameters","safetySetting"],h);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&g(e,["parameters","personGeneration"],T);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const I=f(n,["language"]);e!==void 0&&I!=null&&g(e,["parameters","language"],I);const V=f(n,["outputMimeType"]);e!==void 0&&V!=null&&g(e,["parameters","outputOptions","mimeType"],V);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&g(e,["parameters","outputOptions","compressionQuality"],B);const F=f(n,["addWatermark"]);e!==void 0&&F!=null&&g(e,["parameters","addWatermark"],F);const ee=f(n,["labels"]);e!==void 0&&ee!=null&&g(e,["labels"],ee);const te=f(n,["editMode"]);e!==void 0&&te!=null&&g(e,["parameters","editMode"],te);const K=f(n,["baseSteps"]);return e!==void 0&&K!=null&&g(e,["parameters","editConfig","baseSteps"],K),t}function HR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],st(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>FN(p))),g(t,["instances[0]","referenceImages"],d)}const c=f(e,["config"]);return c!=null&&zR(c,t),t}function GR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Qd(l))),g(e,["generatedImages"],o)}return e}function jR(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function YR(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["instances[]","task_type"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["instances[]","title"],o);const l=f(n,["outputDimensionality"]);e!==void 0&&l!=null&&g(e,["parameters","outputDimensionality"],l);const c=f(n,["mimeType"]);e!==void 0&&c!=null&&g(e,["instances[]","mimeType"],c);const d=f(n,["autoTruncate"]);return e!==void 0&&d!=null&&g(e,["parameters","autoTruncate"],d),t}function JR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],st(n,s));const o=f(e,["contents"]);if(o!=null){let d=xp(n,o);Array.isArray(d)&&(d=d.map(p=>p)),g(t,["requests[]","content"],d)}const l=f(e,["config"]);l!=null&&jR(l,t);const c=f(e,["model"]);return c!==void 0&&g(t,["requests[]","model"],st(n,c)),t}function KR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],st(n,s));const o=f(e,["contents"]);if(o!=null){let c=xp(n,o);Array.isArray(c)&&(c=c.map(d=>d)),g(t,["instances[]","content"],c)}const l=f(e,["config"]);return l!=null&&YR(l,t),t}function $R(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["embeddings"],l)}const o=f(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function QR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>RR(c))),g(e,["embeddings"],l)}const o=f(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function XR(n){const e={},t=f(n,["endpoint"]);t!=null&&g(e,["name"],t);const s=f(n,["deployedModelId"]);return s!=null&&g(e,["deployedModelId"],s),e}function WR(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function ZR(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&g(e,["response"],c);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function eN(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],$d(pn(o)));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&g(s,["topP"],c);const d=f(e,["topK"]);d!=null&&g(s,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&g(s,["maxOutputTokens"],h);const T=f(e,["stopSequences"]);T!=null&&g(s,["stopSequences"],T);const E=f(e,["responseLogprobs"]);E!=null&&g(s,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&g(s,["logprobs"],S);const I=f(e,["presencePenalty"]);I!=null&&g(s,["presencePenalty"],I);const V=f(e,["frequencyPenalty"]);V!=null&&g(s,["frequencyPenalty"],V);const B=f(e,["seed"]);B!=null&&g(s,["seed"],B);const F=f(e,["responseMimeType"]);F!=null&&g(s,["responseMimeType"],F);const ee=f(e,["responseSchema"]);ee!=null&&g(s,["responseSchema"],Cp(ee));const te=f(e,["responseJsonSchema"]);if(te!=null&&g(s,["responseJsonSchema"],te),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const K=f(e,["safetySettings"]);if(t!==void 0&&K!=null){let P=K;Array.isArray(P)&&(P=P.map(D=>zN(D))),g(t,["safetySettings"],P)}const Y=f(e,["tools"]);if(t!==void 0&&Y!=null){let P=Ga(Y);Array.isArray(P)&&(P=P.map(D=>KN(Ha(D)))),g(t,["tools"],P)}const ae=f(e,["toolConfig"]);if(t!==void 0&&ae!=null&&g(t,["toolConfig"],ae),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Z=f(e,["cachedContent"]);t!==void 0&&Z!=null&&g(t,["cachedContent"],Us(n,Z));const R=f(e,["responseModalities"]);R!=null&&g(s,["responseModalities"],R);const M=f(e,["mediaResolution"]);M!=null&&g(s,["mediaResolution"],M);const N=f(e,["speechConfig"]);if(N!=null&&g(s,["speechConfig"],Ip(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=f(e,["thinkingConfig"]);L!=null&&g(s,["thinkingConfig"],L);const k=f(e,["imageConfig"]);return k!=null&&g(s,["imageConfig"],k),s}function tN(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],pn(o));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&g(s,["topP"],c);const d=f(e,["topK"]);d!=null&&g(s,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&g(s,["maxOutputTokens"],h);const T=f(e,["stopSequences"]);T!=null&&g(s,["stopSequences"],T);const E=f(e,["responseLogprobs"]);E!=null&&g(s,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&g(s,["logprobs"],S);const I=f(e,["presencePenalty"]);I!=null&&g(s,["presencePenalty"],I);const V=f(e,["frequencyPenalty"]);V!=null&&g(s,["frequencyPenalty"],V);const B=f(e,["seed"]);B!=null&&g(s,["seed"],B);const F=f(e,["responseMimeType"]);F!=null&&g(s,["responseMimeType"],F);const ee=f(e,["responseSchema"]);ee!=null&&g(s,["responseSchema"],Cp(ee));const te=f(e,["responseJsonSchema"]);te!=null&&g(s,["responseJsonSchema"],te);const K=f(e,["routingConfig"]);K!=null&&g(s,["routingConfig"],K);const Y=f(e,["modelSelectionConfig"]);Y!=null&&g(s,["modelConfig"],Y);const ae=f(e,["safetySettings"]);if(t!==void 0&&ae!=null){let Q=ae;Array.isArray(Q)&&(Q=Q.map(fe=>fe)),g(t,["safetySettings"],Q)}const Z=f(e,["tools"]);if(t!==void 0&&Z!=null){let Q=Ga(Z);Array.isArray(Q)&&(Q=Q.map(fe=>rA(Ha(fe)))),g(t,["tools"],Q)}const R=f(e,["toolConfig"]);t!==void 0&&R!=null&&g(t,["toolConfig"],R);const M=f(e,["labels"]);t!==void 0&&M!=null&&g(t,["labels"],M);const N=f(e,["cachedContent"]);t!==void 0&&N!=null&&g(t,["cachedContent"],Us(n,N));const L=f(e,["responseModalities"]);L!=null&&g(s,["responseModalities"],L);const k=f(e,["mediaResolution"]);k!=null&&g(s,["mediaResolution"],k);const P=f(e,["speechConfig"]);P!=null&&g(s,["speechConfig"],sA(Ip(P)));const D=f(e,["audioTimestamp"]);D!=null&&g(s,["audioTimestamp"],D);const Ue=f(e,["thinkingConfig"]);Ue!=null&&g(s,["thinkingConfig"],Ue);const Be=f(e,["imageConfig"]);return Be!=null&&g(s,["imageConfig"],Be),s}function eT(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],st(n,s));const o=f(e,["contents"]);if(o!=null){let c=si(o);Array.isArray(c)&&(c=c.map(d=>$d(d))),g(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&g(t,["generationConfig"],eN(n,l,t)),t}function tT(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],st(n,s));const o=f(e,["contents"]);if(o!=null){let c=si(o);Array.isArray(c)&&(c=c.map(d=>d)),g(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&g(t,["generationConfig"],tN(n,l,t)),t}function nT(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(h=>xR(h))),g(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const l=f(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&g(e,["responseId"],c);const d=f(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function iT(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(T=>T)),g(e,["candidates"],h)}const o=f(n,["createTime"]);o!=null&&g(e,["createTime"],o);const l=f(n,["modelVersion"]);l!=null&&g(e,["modelVersion"],l);const c=f(n,["promptFeedback"]);c!=null&&g(e,["promptFeedback"],c);const d=f(n,["responseId"]);d!=null&&g(e,["responseId"],d);const p=f(n,["usageMetadata"]);return p!=null&&g(e,["usageMetadata"],p),e}function nN(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const o=f(n,["aspectRatio"]);e!==void 0&&o!=null&&g(e,["parameters","aspectRatio"],o);const l=f(n,["guidanceScale"]);if(e!==void 0&&l!=null&&g(e,["parameters","guidanceScale"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&g(e,["parameters","safetySetting"],c);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d);const p=f(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&g(e,["parameters","includeSafetyAttributes"],p);const h=f(n,["includeRaiReason"]);e!==void 0&&h!=null&&g(e,["parameters","includeRaiReason"],h);const T=f(n,["language"]);e!==void 0&&T!=null&&g(e,["parameters","language"],T);const E=f(n,["outputMimeType"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","mimeType"],E);const S=f(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&g(e,["parameters","outputOptions","compressionQuality"],S),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=f(n,["imageSize"]);if(e!==void 0&&I!=null&&g(e,["parameters","sampleImageSize"],I),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function iN(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&g(e,["parameters","aspectRatio"],c);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const h=f(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&g(e,["parameters","safetySetting"],h);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&g(e,["parameters","personGeneration"],T);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const I=f(n,["language"]);e!==void 0&&I!=null&&g(e,["parameters","language"],I);const V=f(n,["outputMimeType"]);e!==void 0&&V!=null&&g(e,["parameters","outputOptions","mimeType"],V);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&g(e,["parameters","outputOptions","compressionQuality"],B);const F=f(n,["addWatermark"]);e!==void 0&&F!=null&&g(e,["parameters","addWatermark"],F);const ee=f(n,["labels"]);e!==void 0&&ee!=null&&g(e,["labels"],ee);const te=f(n,["imageSize"]);e!==void 0&&te!=null&&g(e,["parameters","sampleImageSize"],te);const K=f(n,["enhancePrompt"]);return e!==void 0&&K!=null&&g(e,["parameters","enhancePrompt"],K),t}function sN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],st(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["config"]);return l!=null&&nN(l,t),t}function rN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],st(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["config"]);return l!=null&&iN(l,t),t}function oN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>_N(c))),g(e,["generatedImages"],l)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],nA(o)),e}function aN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Qd(c))),g(e,["generatedImages"],l)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],iA(o)),e}function lN(n,e){const t={},s=f(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=f(n,["durationSeconds"]);if(e!==void 0&&o!=null&&g(e,["parameters","durationSeconds"],o),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const c=f(n,["resolution"]);e!==void 0&&c!=null&&g(e,["parameters","resolution"],c);const d=f(n,["personGeneration"]);if(e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=f(n,["negativePrompt"]);e!==void 0&&p!=null&&g(e,["parameters","negativePrompt"],p);const h=f(n,["enhancePrompt"]);if(e!==void 0&&h!=null&&g(e,["parameters","enhancePrompt"],h),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const T=f(n,["lastFrame"]);e!==void 0&&T!=null&&g(e,["instances[0]","lastFrame"],Xd(T));const E=f(n,["referenceImages"]);if(e!==void 0&&E!=null){let S=E;Array.isArray(S)&&(S=S.map(I=>a1(I))),g(e,["instances[0]","referenceImages"],S)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function uN(n,e){const t={},s=f(n,["numberOfVideos"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&g(e,["parameters","storageUri"],o);const l=f(n,["fps"]);e!==void 0&&l!=null&&g(e,["parameters","fps"],l);const c=f(n,["durationSeconds"]);e!==void 0&&c!=null&&g(e,["parameters","durationSeconds"],c);const d=f(n,["seed"]);e!==void 0&&d!=null&&g(e,["parameters","seed"],d);const p=f(n,["aspectRatio"]);e!==void 0&&p!=null&&g(e,["parameters","aspectRatio"],p);const h=f(n,["resolution"]);e!==void 0&&h!=null&&g(e,["parameters","resolution"],h);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&g(e,["parameters","personGeneration"],T);const E=f(n,["pubsubTopic"]);e!==void 0&&E!=null&&g(e,["parameters","pubsubTopic"],E);const S=f(n,["negativePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","negativePrompt"],S);const I=f(n,["enhancePrompt"]);e!==void 0&&I!=null&&g(e,["parameters","enhancePrompt"],I);const V=f(n,["generateAudio"]);e!==void 0&&V!=null&&g(e,["parameters","generateAudio"],V);const B=f(n,["lastFrame"]);e!==void 0&&B!=null&&g(e,["instances[0]","lastFrame"],Si(B));const F=f(n,["referenceImages"]);if(e!==void 0&&F!=null){let K=F;Array.isArray(K)&&(K=K.map(Y=>l1(Y))),g(e,["instances[0]","referenceImages"],K)}const ee=f(n,["mask"]);e!==void 0&&ee!=null&&g(e,["instances[0]","mask"],o1(ee));const te=f(n,["compressionQuality"]);return e!==void 0&&te!=null&&g(e,["parameters","compressionQuality"],te),t}function cN(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&g(e,["response"],mN(c)),e}function dN(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["response"]);return c!=null&&g(e,["response"],pN(c)),e}function fN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],st(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["image"]);l!=null&&g(t,["instances[0]","image"],Xd(l));const c=f(e,["video"]);c!=null&&g(t,["instances[0]","video"],oA(c));const d=f(e,["source"]);d!=null&&gN(d,t);const p=f(e,["config"]);return p!=null&&lN(p,t),t}function hN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],st(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["image"]);l!=null&&g(t,["instances[0]","image"],Si(l));const c=f(e,["video"]);c!=null&&g(t,["instances[0]","video"],aA(c));const d=f(e,["source"]);d!=null&&yN(d,t);const p=f(e,["config"]);return p!=null&&uN(p,t),t}function mN(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>TN(c))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function pN(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>EN(c))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function gN(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],Xd(o));const l=f(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],oA(l)),t}function yN(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],Si(o));const l=f(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],aA(l)),t}function _N(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],IN(t));const s=f(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const o=f(n,["_self"]);return o!=null&&g(e,["safetyAttributes"],nA(o)),e}function Qd(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],tA(t));const s=f(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const o=f(n,["_self"]);o!=null&&g(e,["safetyAttributes"],iA(o));const l=f(n,["prompt"]);return l!=null&&g(e,["enhancedPrompt"],l),e}function vN(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["mask"],tA(t));const s=f(n,["labels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),g(e,["labels"],o)}return e}function TN(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],s1(t)),e}function EN(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],r1(t)),e}function AN(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=f(n,["audioTimestamp"]);s!=null&&g(e,["audioTimestamp"],s);const o=f(n,["candidateCount"]);o!=null&&g(e,["candidateCount"],o);const l=f(n,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const c=f(n,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const d=f(n,["logprobs"]);d!=null&&g(e,["logprobs"],d);const p=f(n,["maxOutputTokens"]);p!=null&&g(e,["maxOutputTokens"],p);const h=f(n,["mediaResolution"]);h!=null&&g(e,["mediaResolution"],h);const T=f(n,["presencePenalty"]);T!=null&&g(e,["presencePenalty"],T);const E=f(n,["responseJsonSchema"]);E!=null&&g(e,["responseJsonSchema"],E);const S=f(n,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const I=f(n,["responseMimeType"]);I!=null&&g(e,["responseMimeType"],I);const V=f(n,["responseModalities"]);V!=null&&g(e,["responseModalities"],V);const B=f(n,["responseSchema"]);B!=null&&g(e,["responseSchema"],B);const F=f(n,["routingConfig"]);F!=null&&g(e,["routingConfig"],F);const ee=f(n,["seed"]);ee!=null&&g(e,["seed"],ee);const te=f(n,["speechConfig"]);te!=null&&g(e,["speechConfig"],sA(te));const K=f(n,["stopSequences"]);K!=null&&g(e,["stopSequences"],K);const Y=f(n,["temperature"]);Y!=null&&g(e,["temperature"],Y);const ae=f(n,["thinkingConfig"]);ae!=null&&g(e,["thinkingConfig"],ae);const Z=f(n,["topK"]);Z!=null&&g(e,["topK"],Z);const R=f(n,["topP"]);return R!=null&&g(e,["topP"],R),e}function SN(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],st(n,s)),t}function bN(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],st(n,s)),t}function xN(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function CN(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&g(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function IN(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],Pr(t));const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function tA(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["imageBytes"],Pr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function Xd(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],Pr(t));const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Si(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["imageBytes"]);s!=null&&g(e,["bytesBase64Encoded"],Pr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function wN(n,e,t){const s={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&g(t,["_query","filter"],c);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],JE(n,d)),s}function RN(n,e,t){const s={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&g(t,["_query","filter"],c);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],JE(n,d)),s}function NN(n,e){const t={},s=f(e,["config"]);return s!=null&&wN(n,s,t),t}function MN(n,e){const t={},s=f(e,["config"]);return s!=null&&RN(n,s,t),t}function DN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["_self"]);if(o!=null){let l=KE(o);Array.isArray(l)&&(l=l.map(c=>Ym(c))),g(e,["models"],l)}return e}function PN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["_self"]);if(o!=null){let l=KE(o);Array.isArray(l)&&(l=l.map(c=>Jm(c))),g(e,["models"],l)}return e}function VN(n){const e={},t=f(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const s=f(n,["segmentationClasses"]);s!=null&&g(e,["maskClasses"],s);const o=f(n,["maskDilation"]);return o!=null&&g(e,["dilation"],o),e}function Ym(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const o=f(n,["description"]);o!=null&&g(e,["description"],o);const l=f(n,["version"]);l!=null&&g(e,["version"],l);const c=f(n,["_self"]);c!=null&&g(e,["tunedModelInfo"],$N(c));const d=f(n,["inputTokenLimit"]);d!=null&&g(e,["inputTokenLimit"],d);const p=f(n,["outputTokenLimit"]);p!=null&&g(e,["outputTokenLimit"],p);const h=f(n,["supportedGenerationMethods"]);return h!=null&&g(e,["supportedActions"],h),e}function Jm(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const o=f(n,["description"]);o!=null&&g(e,["description"],o);const l=f(n,["versionId"]);l!=null&&g(e,["version"],l);const c=f(n,["deployedModels"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(S=>XR(S))),g(e,["endpoints"],E)}const d=f(n,["labels"]);d!=null&&g(e,["labels"],d);const p=f(n,["_self"]);p!=null&&g(e,["tunedModelInfo"],QN(p));const h=f(n,["defaultCheckpointId"]);h!=null&&g(e,["defaultCheckpointId"],h);const T=f(n,["checkpoints"]);if(T!=null){let E=T;Array.isArray(E)&&(E=E.map(S=>S)),g(e,["checkpoints"],E)}return e}function kN(n){const e={},t=f(n,["videoMetadata"]);t!=null&&g(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&g(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&g(e,["inlineData"],bR(o));const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],WR(l));const c=f(n,["thoughtSignature"]);c!=null&&g(e,["thoughtSignature"],c);const d=f(n,["functionCall"]);d!=null&&g(e,["functionCall"],d);const p=f(n,["codeExecutionResult"]);p!=null&&g(e,["codeExecutionResult"],p);const h=f(n,["executableCode"]);h!=null&&g(e,["executableCode"],h);const T=f(n,["functionResponse"]);T!=null&&g(e,["functionResponse"],T);const E=f(n,["text"]);return E!=null&&g(e,["text"],E),e}function UN(n){const e={},t=f(n,["productImage"]);return t!=null&&g(e,["image"],Si(t)),e}function LN(n,e){const t={},s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const o=f(n,["baseSteps"]);e!==void 0&&o!=null&&g(e,["parameters","editConfig","baseSteps"],o);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&g(e,["parameters","storageUri"],l);const c=f(n,["seed"]);e!==void 0&&c!=null&&g(e,["parameters","seed"],c);const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&g(e,["parameters","safetySetting"],d);const p=f(n,["personGeneration"]);e!==void 0&&p!=null&&g(e,["parameters","personGeneration"],p);const h=f(n,["addWatermark"]);e!==void 0&&h!=null&&g(e,["parameters","addWatermark"],h);const T=f(n,["outputMimeType"]);e!==void 0&&T!=null&&g(e,["parameters","outputOptions","mimeType"],T);const E=f(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","compressionQuality"],E);const S=f(n,["enhancePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","enhancePrompt"],S);const I=f(n,["labels"]);return e!==void 0&&I!=null&&g(e,["labels"],I),t}function ON(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],st(n,s));const o=f(e,["source"]);o!=null&&BN(o,t);const l=f(e,["config"]);return l!=null&&LN(l,t),t}function qN(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>Qd(o))),g(e,["generatedImages"],s)}return e}function BN(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=f(n,["personImage"]);e!==void 0&&o!=null&&g(e,["instances[0]","personImage","image"],Si(o));const l=f(n,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>UN(d))),g(e,["instances[0]","productImages"],c)}return t}function FN(n){const e={},t=f(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],Si(t));const s=f(n,["referenceId"]);s!=null&&g(e,["referenceId"],s);const o=f(n,["referenceType"]);o!=null&&g(e,["referenceType"],o);const l=f(n,["maskImageConfig"]);l!=null&&g(e,["maskImageConfig"],VN(l));const c=f(n,["controlImageConfig"]);c!=null&&g(e,["controlImageConfig"],MR(c));const d=f(n,["styleImageConfig"]);d!=null&&g(e,["styleImageConfig"],d);const p=f(n,["subjectImageConfig"]);return p!=null&&g(e,["subjectImageConfig"],p),e}function nA(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const o=f(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function iA(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const o=f(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function zN(n){const e={};if(f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=f(n,["category"]);t!=null&&g(e,["category"],t);const s=f(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function HN(n){const e={},t=f(n,["image"]);return t!=null&&g(e,["image"],Si(t)),e}function GN(n,e){const t={},s=f(n,["mode"]);e!==void 0&&s!=null&&g(e,["parameters","mode"],s);const o=f(n,["maxPredictions"]);e!==void 0&&o!=null&&g(e,["parameters","maxPredictions"],o);const l=f(n,["confidenceThreshold"]);e!==void 0&&l!=null&&g(e,["parameters","confidenceThreshold"],l);const c=f(n,["maskDilation"]);e!==void 0&&c!=null&&g(e,["parameters","maskDilation"],c);const d=f(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&g(e,["parameters","binaryColorThreshold"],d);const p=f(n,["labels"]);return e!==void 0&&p!=null&&g(e,["labels"],p),t}function jN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],st(n,s));const o=f(e,["source"]);o!=null&&JN(o,t);const l=f(e,["config"]);return l!=null&&GN(l,t),t}function YN(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>vN(o))),g(e,["generatedMasks"],s)}return e}function JN(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],Si(o));const l=f(n,["scribbleImage"]);return e!==void 0&&l!=null&&g(e,["instances[0]","scribble"],HN(l)),t}function sA(n){const e={},t=f(n,["voiceConfig"]);if(t!=null&&g(e,["voiceConfig"],t),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=f(n,["languageCode"]);return s!=null&&g(e,["languageCode"],s),e}function KN(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(T=>T)),g(e,["functionDeclarations"],h)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&g(e,["googleSearch"],CN(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&g(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],xN(l));const c=f(n,["urlContext"]);c!=null&&g(e,["urlContext"],c);const d=f(n,["computerUse"]);d!=null&&g(e,["computerUse"],d);const p=f(n,["codeExecution"]);return p!=null&&g(e,["codeExecution"],p),e}function rA(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>ZR(S))),g(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const o=f(n,["googleSearch"]);o!=null&&g(e,["googleSearch"],o);const l=f(n,["googleSearchRetrieval"]);l!=null&&g(e,["googleSearchRetrieval"],l);const c=f(n,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const p=f(n,["urlContext"]);p!=null&&g(e,["urlContext"],p);const h=f(n,["computerUse"]);h!=null&&g(e,["computerUse"],h);const T=f(n,["codeExecution"]);return T!=null&&g(e,["codeExecution"],T),e}function $N(n){const e={},t=f(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&g(e,["createTime"],s);const o=f(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function QN(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&g(e,["createTime"],s);const o=f(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function XN(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const o=f(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function WN(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const o=f(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function ZN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","name"],st(n,s));const o=f(e,["config"]);return o!=null&&XN(o,t),t}function e1(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],st(n,s));const o=f(e,["config"]);return o!=null&&WN(o,t),t}function t1(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const o=f(n,["includeRaiReason"]);e!==void 0&&o!=null&&g(e,["parameters","includeRaiReason"],o);const l=f(n,["outputMimeType"]);e!==void 0&&l!=null&&g(e,["parameters","outputOptions","mimeType"],l);const c=f(n,["outputCompressionQuality"]);e!==void 0&&c!=null&&g(e,["parameters","outputOptions","compressionQuality"],c);const d=f(n,["enhanceInputImage"]);e!==void 0&&d!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],d);const p=f(n,["imagePreservationFactor"]);e!==void 0&&p!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],p);const h=f(n,["labels"]);e!==void 0&&h!=null&&g(e,["labels"],h);const T=f(n,["numberOfImages"]);e!==void 0&&T!=null&&g(e,["parameters","sampleCount"],T);const E=f(n,["mode"]);return e!==void 0&&E!=null&&g(e,["parameters","mode"],E),t}function n1(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],st(n,s));const o=f(e,["image"]);o!=null&&g(t,["instances[0]","image"],Si(o));const l=f(e,["upscaleFactor"]);l!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],l);const c=f(e,["config"]);return c!=null&&t1(c,t),t}function i1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Qd(l))),g(e,["generatedImages"],o)}return e}function s1(n){const e={},t=f(n,["video","uri"]);t!=null&&g(e,["uri"],t);const s=f(n,["video","encodedVideo"]);s!=null&&g(e,["videoBytes"],Pr(s));const o=f(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function r1(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],Pr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function o1(n){const e={},t=f(n,["image"]);t!=null&&g(e,["_self"],Si(t));const s=f(n,["maskMode"]);return s!=null&&g(e,["maskMode"],s),e}function a1(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],Xd(t));const s=f(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function l1(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],Si(t));const s=f(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function oA(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["video","uri"],t);const s=f(n,["videoBytes"]);s!=null&&g(e,["video","encodedVideo"],Pr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["encoding"],o),e}function aA(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["videoBytes"]);s!=null&&g(e,["bytesBase64Encoded"],Pr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const u1="Content-Type",c1="X-Server-Timeout",d1="User-Agent",Km="x-goog-api-client",f1="1.24.0",h1=`google-genai-sdk/${f1}`,m1="v1beta1",p1="v1beta",sT=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class g1{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:m1,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:p1,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const o=[this.getRequestUrlInternal(t)];return s&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[c,d]of Object.entries(e.queryParams))o.searchParams.append(c,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(t))typeof l=="object"?s[o]=Object.assign(Object.assign({},s[o]),l):l!==void 0&&(s[o]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s){if(t&&t.timeout||s){const o=new AbortController,l=o.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const c=setTimeout(()=>o.abort(),t.timeout);c&&typeof c.unref=="function"&&c.unref()}s&&s.addEventListener("abort",()=>{o.abort()}),e.signal=l}return t&&t.extraBody!==null&&y1(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await rT(o),new Hm(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await rT(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return Ia(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let c="";for(;;){const{done:d,value:p}=yield Tt(o.read());if(d){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=l.decode(p,{stream:!0});try{const E=JSON.parse(h);if("error"in E){const S=JSON.parse(JSON.stringify(E.error)),I=S.status,V=S.code,B=`got status: ${I}. ${JSON.stringify(E)}`;if(V>=400&&V<600)throw new Kd({message:B,status:V})}}catch(E){if(E.name==="ApiError")throw E}c+=h;let T=c.match(sT);for(;T;){const E=T[1];try{const S=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Tt(new Hm(S)),c=c.slice(T[0].length),T=c.match(sT)}catch(S){throw new Error(`exception parsing stream chunk ${E}. ${S}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=h1+" "+this.clientOptions.userAgentExtra;return e[d1]=t,e[Km]=t,e[u1]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[s,o]of Object.entries(e.headers))t.append(s,o);e.timeout&&e.timeout>0&&t.append(c1,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var s;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);o.sizeBytes=String(c.size);const d=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:c.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const p=await this.fetchUploadUrl(o,t);return l.upload(e,p,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var s;let o={};t!=null&&t.httpOptions?o=t.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},c=await this.request({path:Se("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:o});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(s=c==null?void 0:c.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function rT(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(s);throw t>=400&&t<600?new Kd({message:o,status:t}):new Error(o)}}function y1(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,c){const d=Object.assign({},l);for(const p in c)if(Object.prototype.hasOwnProperty.call(c,p)){const h=c[p],T=d[p];h&&typeof h=="object"&&!Array.isArray(h)&&T&&typeof T=="object"&&!Array.isArray(T)?d[p]=s(T,h):(T&&h&&typeof T!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof T}, New type: ${typeof h}. Overwriting.`),d[p]=h)}return d}const o=s(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _1="mcp_used/unknown";let v1=!1;function lA(n){for(const e of n)if(T1(e)||typeof e=="object"&&"inputSchema"in e)return!0;return v1}function uA(n){var e;const t=(e=n[Km])!==null&&e!==void 0?e:"";n[Km]=(t+` ${_1}`).trimStart()}function T1(n){return n!==null&&typeof n=="object"&&n instanceof Rp}function E1(n,e=100){return Ia(this,arguments,function*(){let s,o=0;for(;o<e;){const l=yield Tt(n.listTools({cursor:s}));for(const c of l.tools)yield yield Tt(c),o++;if(!l.nextCursor)break;s=l.nextCursor}})}class Rp{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Rp(e,t)}async initialize(){var e,t,s,o;if(this.mcpTools.length>0)return;const l={},c=[];for(const T of this.mcpClients)try{for(var d=!0,p=(t=void 0,uu(E1(T))),h;h=await p.next(),e=h.done,!e;d=!0){o=h.value,d=!1;const E=o;c.push(E);const S=E.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=T}}catch(E){t={error:E}}finally{try{!d&&!e&&(s=p.return)&&await s.call(p)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),II(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await o.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function A1(n,e,t){const s=new vI;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(s,o),e(s)}class S1{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=C1(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),p=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let h=()=>{};const T=new Promise(K=>{h=K}),E=e.callbacks,S=function(){h({})},I=this.apiClient,V={onopen:S,onmessage:K=>{A1(I,E.onmessage,K)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(K){},onclose:(s=E==null?void 0:E.onclose)!==null&&s!==void 0?s:function(K){}},B=this.webSocketFactory.create(p,x1(c),V);B.connect(),await T;const te={setup:{model:st(this.apiClient,e.model)}};return B.send(JSON.stringify(te)),new b1(B,this.apiClient)}}class b1{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=pR(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=mR(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Sa.PLAY)}pause(){this.sendPlaybackControl(Sa.PAUSE)}stop(){this.sendPlaybackControl(Sa.STOP)}resetContext(){this.sendPlaybackControl(Sa.RESET_CONTEXT)}close(){this.conn.close()}}function x1(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function C1(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const I1="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function w1(n,e,t){const s=new _I;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const l=JSON.parse(o);if(n.isVertexAI()){const c=_R(l);Object.assign(s,c)}else Object.assign(s,l);e(s)}class R1{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new S1(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,o,l,c,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let T;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&lA(e.config.tools)&&uA(E);const S=P1(E);if(this.apiClient.isVertexAI())T=`${p}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S);else{const N=this.apiClient.getApiKey();let L="BidiGenerateContent",k="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),L="BidiGenerateContentConstrained",k="access_token"),T=`${p}/ws/google.ai.generativelanguage.${h}.GenerativeService.${L}?${k}=${N}`}let I=()=>{};const V=new Promise(N=>{I=N}),B=e.callbacks,F=function(){var N;(N=B==null?void 0:B.onopen)===null||N===void 0||N.call(B),I({})},ee=this.apiClient,te={onopen:F,onmessage:N=>{w1(ee,B.onmessage,N)},onerror:(t=B==null?void 0:B.onerror)!==null&&t!==void 0?t:function(N){},onclose:(s=B==null?void 0:B.onclose)!==null&&s!==void 0?s:function(N){}},K=this.webSocketFactory.create(T,D1(S),te);K.connect(),await V;let Y=st(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&Y.startsWith("publishers/")){const N=this.apiClient.getProject(),L=this.apiClient.getLocation();Y=`projects/${N}/locations/${L}/`+Y}let ae={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[bd.AUDIO]}:e.config.responseModalities=[bd.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Z=(d=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[],R=[];for(const N of Z)if(this.isCallableTool(N)){const L=N;R.push(await L.tool())}else R.push(N);R.length>0&&(e.config.tools=R);const M={model:Y,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ae=hR(this.apiClient,M):ae=fR(this.apiClient,M),delete ae.config,K.send(JSON.stringify(ae)),new M1(K,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const N1={turnComplete:!0};class M1{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=si(t.turns),e.isVertexAI()||(s=s.map(o=>$d(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(I1)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},N1),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:yR(e)}:t={realtimeInput:gR(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function D1(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function P1(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oT=10;function aT(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const c of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(wa(c)){o=!0;break}if(!o)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function wa(n){return"callTool"in n&&typeof n.callTool=="function"}function V1(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>wa(o)))!==null&&s!==void 0?s:!1}function k1(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>!wa(o)))!==null&&s!==void 0?s:!1}function lT(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class U1 extends bo{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,o,l,c,d;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!V1(t)||aT(t.config))return await this.generateContentInternal(p);if(k1(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let h,T;const E=si(p.contents),S=(l=(o=(s=p.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:oT;let I=0;for(;I<S&&(h=await this.generateContentInternal(p),!(!h.functionCalls||h.functionCalls.length===0));){const V=h.candidates[0].content,B=[];for(const F of(d=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[])if(wa(F)){const te=await F.callTool(h.functionCalls);B.push(...te)}I++,T={role:"user",parts:B},p.contents=si(p.contents),p.contents.push(V),p.contents.push(T),lT(p.config)&&(E.push(V),E.push(T))}return lT(p.config)&&(h.automaticFunctionCallingHistory=E),h},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),aT(t.config)){const s=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(s)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var o;let l;const c=[];if(s!=null&&s.generatedImages)for(const p of s.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((o=p==null?void 0:p.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=p==null?void 0:p.safetyAttributes:c.push(p);let d;return l?d={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:d={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},d}),this.list=async t=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Su(yo.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(c),c)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,o;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const c=await Promise.all(l.map(async p=>wa(p)?await p.tool():p)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(d.config.tools=c,e.config&&e.config.tools&&lA(e.config.tools)){const p=(o=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&o!==void 0?o:{};let h=Object.assign({},p);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),uA(h),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return d}async initAfcToolsMap(e){var t,s,o;const l=new Map;for(const c of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(wa(c)){const d=c,p=await d.tool();for(const h of(o=p.functionDeclarations)!==null&&o!==void 0?o:[]){if(!h.name)throw new Error("Function declaration name is required.");if(l.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);l.set(h.name,d)}}return l}async processAfcStream(e){var t,s,o;const l=(o=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:oT;let c=!1,d=0;const p=await this.initAfcToolsMap(e);return(function(h,T,E){var S,I;return Ia(this,arguments,function*(){for(var V,B,F,ee;d<l;){c&&(d++,c=!1);const ae=yield Tt(h.processParamsMaybeAddMcpUsage(E)),Z=yield Tt(h.generateContentStreamInternal(ae)),R=[],M=[];try{for(var te=!0,K=(B=void 0,uu(Z)),Y;Y=yield Tt(K.next()),V=Y.done,!V;te=!0){ee=Y.value,te=!1;const N=ee;if(yield yield Tt(N),N.candidates&&(!((S=N.candidates[0])===null||S===void 0)&&S.content)){M.push(N.candidates[0].content);for(const L of(I=N.candidates[0].content.parts)!==null&&I!==void 0?I:[])if(d<l&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(T.has(L.functionCall.name)){const k=yield Tt(T.get(L.functionCall.name).callTool([L.functionCall]));R.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${T.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(N){B={error:N}}finally{try{!te&&!V&&(F=K.return)&&(yield Tt(F.call(K)))}finally{if(B)throw B.error}}if(R.length>0){c=!0;const N=new nu;N.candidates=[{content:{role:"user",parts:R}}],yield yield Tt(N);const L=[];L.push(...M),L.push({role:"user",parts:R});const k=si(E.contents).concat(L);E.contents=k}else break}})})(this,p,e)}async generateContentInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=tT(this.apiClient,e);return d=Se("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=iT(T),S=new nu;return Object.assign(S,E),S})}else{const h=eT(this.apiClient,e);return d=Se("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=nT(T),S=new nu;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=tT(this.apiClient,e);return d=Se("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(E){return Ia(this,arguments,function*(){var S,I,V,B;try{for(var F=!0,ee=uu(E),te;te=yield Tt(ee.next()),S=te.done,!S;F=!0){B=te.value,F=!1;const K=B,Y=iT(yield Tt(K.json()));Y.sdkHttpResponse={headers:K.headers};const ae=new nu;Object.assign(ae,Y),yield yield Tt(ae)}}catch(K){I={error:K}}finally{try{!F&&!S&&(V=ee.return)&&(yield Tt(V.call(ee)))}finally{if(I)throw I.error}}})})}else{const h=eT(this.apiClient,e);return d=Se("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(E){return Ia(this,arguments,function*(){var S,I,V,B;try{for(var F=!0,ee=uu(E),te;te=yield Tt(ee.next()),S=te.done,!S;F=!0){B=te.value,F=!1;const K=B,Y=nT(yield Tt(K.json()));Y.sdkHttpResponse={headers:K.headers};const ae=new nu;Object.assign(ae,Y),yield yield Tt(ae)}}catch(K){I={error:K}}finally{try{!F&&!S&&(V=ee.return)&&(yield Tt(V.call(ee)))}finally{if(I)throw I.error}}})})}}async embedContent(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=KR(this.apiClient,e);return d=Se("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=QR(T),S=new O0;return Object.assign(S,E),S})}else{const h=JR(this.apiClient,e);return d=Se("{model}:batchEmbedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=$R(T),S=new O0;return Object.assign(S,E),S})}}async generateImagesInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=rN(this.apiClient,e);return d=Se("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=aN(T),S=new q0;return Object.assign(S,E),S})}else{const h=sN(this.apiClient,e);return d=Se("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=oN(T),S=new q0;return Object.assign(S,E),S})}}async editImageInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=HR(this.apiClient,e);return l=Se("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(h=>{const T=h;return T.sdkHttpResponse={headers:p.headers},T})),o.then(p=>{const h=GR(p),T=new cI;return Object.assign(T,h),T})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=n1(this.apiClient,e);return l=Se("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(h=>{const T=h;return T.sdkHttpResponse={headers:p.headers},T})),o.then(p=>{const h=i1(p),T=new dI;return Object.assign(T,h),T})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=ON(this.apiClient,e);return l=Se("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const h=qN(p),T=new fI;return Object.assign(T,h),T})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=jN(this.apiClient,e);return l=Se("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const h=YN(p),T=new hI;return Object.assign(T,h),T})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=bN(this.apiClient,e);return d=Se("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>Jm(T))}else{const h=SN(this.apiClient,e);return d=Se("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>Ym(T))}}async listInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=MN(this.apiClient,e);return d=Se("{models_url}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=PN(T),S=new B0;return Object.assign(S,E),S})}else{const h=NN(this.apiClient,e);return d=Se("{models_url}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=DN(T),S=new B0;return Object.assign(S,E),S})}}async update(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=e1(this.apiClient,e);return d=Se("{model}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>Jm(T))}else{const h=ZN(this.apiClient,e);return d=Se("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>Ym(T))}}async delete(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=qR(this.apiClient,e);return d=Se("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=FR(T),S=new F0;return Object.assign(S,E),S})}else{const h=OR(this.apiClient,e);return d=Se("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=BR(T),S=new F0;return Object.assign(S,E),S})}}async countTokens(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=kR(this.apiClient,e);return d=Se("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=LR(T),S=new z0;return Object.assign(S,E),S})}else{const h=VR(this.apiClient,e);return d=Se("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=UR(T),S=new z0;return Object.assign(S,E),S})}}async computeTokens(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=IR(this.apiClient,e);return l=Se("{model}:computeTokens",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(h=>{const T=h;return T.sdkHttpResponse={headers:p.headers},T})),o.then(p=>{const h=wR(p),T=new mI;return Object.assign(T,h),T})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=hN(this.apiClient,e);return d=Se("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>{const E=dN(T),S=new xd;return Object.assign(S,E),S})}else{const h=fN(this.apiClient,e);return d=Se("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>{const E=cN(T),S=new xd;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class L1 extends bo{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=aI(e);return d=Se("{operationName}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c}else{const h=oI(e);return d=Se("{operationName}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c}}async fetchPredictVideosOperationInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=ZC(e);return l=Se("{resourceName}:fetchPredictOperation",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function O1(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&g(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function q1(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>J1(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function B1(n,e,t){const s={},o=f(e,["expireTime"]);t!==void 0&&o!=null&&g(t,["expireTime"],o);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&g(t,["newSessionExpireTime"],l);const c=f(e,["uses"]);t!==void 0&&c!=null&&g(t,["uses"],c);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&g(t,["bidiGenerateContentSetup"],Y1(n,d));const p=f(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&g(t,["fieldMask"],p),s}function F1(n,e){const t={},s=f(e,["config"]);return s!=null&&g(t,["config"],B1(n,s,t)),t}function z1(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function H1(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function G1(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&g(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function j1(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const T=f(n,["seed"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","seed"],T);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],wp(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const I=f(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],I);const V=f(n,["systemInstruction"]);e!==void 0&&V!=null&&g(e,["setup","systemInstruction"],q1(pn(V)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let Z=Ga(B);Array.isArray(Z)&&(Z=Z.map(R=>$1(Ha(R)))),g(e,["setup","tools"],Z)}const F=f(n,["sessionResumption"]);e!==void 0&&F!=null&&g(e,["setup","sessionResumption"],K1(F));const ee=f(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&g(e,["setup","inputAudioTranscription"],ee);const te=f(n,["outputAudioTranscription"]);e!==void 0&&te!=null&&g(e,["setup","outputAudioTranscription"],te);const K=f(n,["realtimeInputConfig"]);e!==void 0&&K!=null&&g(e,["setup","realtimeInputConfig"],K);const Y=f(n,["contextWindowCompression"]);e!==void 0&&Y!=null&&g(e,["setup","contextWindowCompression"],Y);const ae=f(n,["proactivity"]);return e!==void 0&&ae!=null&&g(e,["setup","proactivity"],ae),t}function Y1(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],st(n,s));const o=f(e,["config"]);return o!=null&&g(t,["config"],j1(o,t)),t}function J1(n){const e={},t=f(n,["videoMetadata"]);t!=null&&g(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&g(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&g(e,["inlineData"],O1(o));const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],z1(l));const c=f(n,["thoughtSignature"]);c!=null&&g(e,["thoughtSignature"],c);const d=f(n,["functionCall"]);d!=null&&g(e,["functionCall"],d);const p=f(n,["codeExecutionResult"]);p!=null&&g(e,["codeExecutionResult"],p);const h=f(n,["executableCode"]);h!=null&&g(e,["executableCode"],h);const T=f(n,["functionResponse"]);T!=null&&g(e,["functionResponse"],T);const E=f(n,["text"]);return E!=null&&g(e,["text"],E),e}function K1(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function $1(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(T=>T)),g(e,["functionDeclarations"],h)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&g(e,["googleSearch"],G1(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&g(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],H1(l));const c=f(n,["urlContext"]);c!=null&&g(e,["urlContext"],c);const d=f(n,["computerUse"]);d!=null&&g(e,["computerUse"],d);const p=f(n,["codeExecution"]);return p!=null&&g(e,["codeExecution"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q1(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const o=Object.keys(s).map(l=>`${t}.${l}`);e.push(...o)}else e.push(t)}return e.join(",")}function X1(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const l=Q1(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(h=>c.includes(h)?`generationConfig.${h}`:h));const p=[];l&&p.push(l),d.length>0&&p.push(...d),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class W1 extends bo{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=F1(this.apiClient,e);l=Se("auth_tokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const p=X1(d,e.config);return o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Z1(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function eM(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function tM(n,e){const t={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=f(n,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&g(e,["displayName"],s),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=f(n,["epochCount"]);e!==void 0&&o!=null&&g(e,["tuningTask","hyperparameters","epochCount"],o);const l=f(n,["learningRateMultiplier"]);if(l!=null&&g(t,["tuningTask","hyperparameters","learningRateMultiplier"],l),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=f(n,["batchSize"]);e!==void 0&&c!=null&&g(e,["tuningTask","hyperparameters","batchSize"],c);const d=f(n,["learningRate"]);if(e!==void 0&&d!=null&&g(e,["tuningTask","hyperparameters","learningRate"],d),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return t}function nM(n,e){const t={},s=f(n,["validationDataset"]);e!==void 0&&s!=null&&g(e,["supervisedTuningSpec"],yM(s,t));const o=f(n,["tunedModelDisplayName"]);e!==void 0&&o!=null&&g(e,["tunedModelDisplayName"],o);const l=f(n,["description"]);e!==void 0&&l!=null&&g(e,["description"],l);const c=f(n,["epochCount"]);e!==void 0&&c!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],c);const d=f(n,["learningRateMultiplier"]);e!==void 0&&d!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],d);const p=f(n,["exportLastCheckpointOnly"]);e!==void 0&&p!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],p);const h=f(n,["adapterSize"]);if(e!==void 0&&h!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],h),f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=f(n,["labels"]);return e!==void 0&&T!=null&&g(e,["labels"],T),t}function iM(n){const e={},t=f(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["preTunedModel"]);s!=null&&g(e,["preTunedModel"],s);const o=f(n,["trainingDataset"]);o!=null&&g(e,["tuningTask","trainingData"],mM(o));const l=f(n,["config"]);return l!=null&&tM(l,e),e}function sM(n){const e={},t=f(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["preTunedModel"]);s!=null&&g(e,["preTunedModel"],s);const o=f(n,["trainingDataset"]);o!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],pM(o,e));const l=f(n,["config"]);return l!=null&&nM(l,e),e}function rM(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function oM(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function aM(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const l=f(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),t}function lM(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const l=f(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),t}function uM(n){const e={},t=f(n,["config"]);return t!=null&&aM(t,e),e}function cM(n){const e={},t=f(n,["config"]);return t!=null&&lM(t,e),e}function dM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["tunedModels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>cA(c))),g(e,["tuningJobs"],l)}return e}function fM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["tuningJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>$m(c))),g(e,["tuningJobs"],l)}return e}function hM(n){const e={},t=f(n,["name"]);t!=null&&g(e,["model"],t);const s=f(n,["name"]);return s!=null&&g(e,["endpoint"],s),e}function mM(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const t=f(n,["examples"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["examples","examples"],s)}return e}function pM(n,e){const t={},s=f(n,["gcsUri"]);e!==void 0&&s!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],s);const o=f(n,["vertexDatasetResource"]);if(e!==void 0&&o!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],o),f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function cA(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["state"]);o!=null&&g(e,["state"],jE(o));const l=f(n,["createTime"]);l!=null&&g(e,["createTime"],l);const c=f(n,["tuningTask","startTime"]);c!=null&&g(e,["startTime"],c);const d=f(n,["tuningTask","completeTime"]);d!=null&&g(e,["endTime"],d);const p=f(n,["updateTime"]);p!=null&&g(e,["updateTime"],p);const h=f(n,["description"]);h!=null&&g(e,["description"],h);const T=f(n,["baseModel"]);T!=null&&g(e,["baseModel"],T);const E=f(n,["_self"]);E!=null&&g(e,["tunedModel"],hM(E));const S=f(n,["customBaseModel"]);S!=null&&g(e,["customBaseModel"],S);const I=f(n,["experiment"]);I!=null&&g(e,["experiment"],I);const V=f(n,["labels"]);V!=null&&g(e,["labels"],V);const B=f(n,["outputUri"]);B!=null&&g(e,["outputUri"],B);const F=f(n,["pipelineJob"]);F!=null&&g(e,["pipelineJob"],F);const ee=f(n,["serviceAccount"]);ee!=null&&g(e,["serviceAccount"],ee);const te=f(n,["tunedModelDisplayName"]);te!=null&&g(e,["tunedModelDisplayName"],te);const K=f(n,["veoTuningSpec"]);return K!=null&&g(e,["veoTuningSpec"],K),e}function $m(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["state"]);o!=null&&g(e,["state"],jE(o));const l=f(n,["createTime"]);l!=null&&g(e,["createTime"],l);const c=f(n,["startTime"]);c!=null&&g(e,["startTime"],c);const d=f(n,["endTime"]);d!=null&&g(e,["endTime"],d);const p=f(n,["updateTime"]);p!=null&&g(e,["updateTime"],p);const h=f(n,["error"]);h!=null&&g(e,["error"],h);const T=f(n,["description"]);T!=null&&g(e,["description"],T);const E=f(n,["baseModel"]);E!=null&&g(e,["baseModel"],E);const S=f(n,["tunedModel"]);S!=null&&g(e,["tunedModel"],S);const I=f(n,["preTunedModel"]);I!=null&&g(e,["preTunedModel"],I);const V=f(n,["supervisedTuningSpec"]);V!=null&&g(e,["supervisedTuningSpec"],V);const B=f(n,["tuningDataStats"]);B!=null&&g(e,["tuningDataStats"],B);const F=f(n,["encryptionSpec"]);F!=null&&g(e,["encryptionSpec"],F);const ee=f(n,["partnerModelTuningSpec"]);ee!=null&&g(e,["partnerModelTuningSpec"],ee);const te=f(n,["customBaseModel"]);te!=null&&g(e,["customBaseModel"],te);const K=f(n,["experiment"]);K!=null&&g(e,["experiment"],K);const Y=f(n,["labels"]);Y!=null&&g(e,["labels"],Y);const ae=f(n,["outputUri"]);ae!=null&&g(e,["outputUri"],ae);const Z=f(n,["pipelineJob"]);Z!=null&&g(e,["pipelineJob"],Z);const R=f(n,["serviceAccount"]);R!=null&&g(e,["serviceAccount"],R);const M=f(n,["tunedModelDisplayName"]);M!=null&&g(e,["tunedModelDisplayName"],M);const N=f(n,["veoTuningSpec"]);return N!=null&&g(e,["veoTuningSpec"],N),e}function gM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["metadata"]);o!=null&&g(e,["metadata"],o);const l=f(n,["done"]);l!=null&&g(e,["done"],l);const c=f(n,["error"]);return c!=null&&g(e,["error"],c),e}function yM(n,e){const t={},s=f(n,["gcsUri"]);s!=null&&g(t,["validationDatasetUri"],s);const o=f(n,["vertexDatasetResource"]);return e!==void 0&&o!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _M extends bo{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Su(yo.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:o});return l.baseModel=void 0,await this.tuneInternal(l)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),l=await this.tuneMldevInternal(o);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:zm.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=oM(e);return d=Se("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>$m(T))}else{const h=rM(e);return d=Se("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>cA(T))}}async listInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=cM(e);return d=Se("tuningJobs",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=fM(T),S=new H0;return Object.assign(S,E),S})}else{const h=uM(e);return d=Se("tunedModels",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=dM(T),S=new H0;return Object.assign(S,E),S})}}async cancel(e){var t,s,o,l;let c="",d={};if(this.apiClient.isVertexAI()){const p=eM(e);c=Se("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=Z1(e);c=Se("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=sM(e);return l=Se("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(h=>{const T=h;return T.sdkHttpResponse={headers:p.headers},T})),o.then(p=>$m(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=iM(e);return l=Se("tunedModels",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(h=>{const T=h;return T.sdkHttpResponse={headers:p.headers},T})),o.then(p=>gM(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vM{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const TM=1024*1024*8,EM=3,AM=1e3,SM=2,bm="x-goog-upload-status";async function bM(n,e,t){var s,o,l;let c=0,d=0,p=new Hm(new Response),h="upload";for(c=n.size;d<c;){const E=Math.min(TM,c-d),S=n.slice(d,d+E);d+E>=c&&(h+=", finalize");let I=0,V=AM;for(;I<EM&&(p=await t.request({path:"",body:S,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(d),"Content-Length":String(E)}}}),!(!((s=p==null?void 0:p.headers)===null||s===void 0)&&s[bm]));)I++,await CM(V),V=V*SM;if(d+=E,((o=p==null?void 0:p.headers)===null||o===void 0?void 0:o[bm])!=="active")break;if(c<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const T=await(p==null?void 0:p.json());if(((l=p==null?void 0:p.headers)===null||l===void 0?void 0:l[bm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return T.file}async function xM(n){return{size:n.size,type:n.type}}function CM(n){return new Promise(e=>setTimeout(e,n))}class IM{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await bM(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await xM(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wM{create(e,t,s){return new RM(e,t,s)}}class RM{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uT="x-goog-api-key";class NM{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(uT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(uT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MM="gl-node/";class DM{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=WC(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const o=new NM(this.apiKey);this.apiClient=new g1({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:MM+"web",uploader:new IM,downloader:new vM}),this.models=new U1(this.apiClient),this.live=new R1(this.apiClient,o,new wM),this.batches=new pw(this.apiClient),this.chats=new Jw(this.models,this.apiClient),this.caches=new Gw(this.apiClient),this.files=new iR(this.apiClient),this.operations=new L1(this.apiClient),this.authTokens=new W1(this.apiClient),this.tunings=new _M(this.apiClient)}}const dA={BASE_URL:"/fd/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_ENVIRONMENT:"production",VITE_FIREBASE_API_KEY:"AIzaSyBA1uXbBt5qHfOh9nTFXuI2IVN-uhWYD_g",VITE_FIREBASE_APP_ID:"1:221809737779:web:a0e2f3d1b9b6c1e1f2d3e4",VITE_FIREBASE_AUTH_DOMAIN:"expenses-140c4.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"221809737779",VITE_FIREBASE_PROJECT_ID:"expenses-140c4",VITE_FIREBASE_STORAGE_BUCKET:"expenses-140c4.appspot.com",VITE_GEMINI_API_KEY:"AIzaSyCU4hOMnyFAWpi1zuy1tRuWW9AV358_njE"},kt={firebase:{apiKey:"AIzaSyBA1uXbBt5qHfOh9nTFXuI2IVN-uhWYD_g",authDomain:"expenses-140c4.firebaseapp.com",projectId:"expenses-140c4",storageBucket:"expenses-140c4.appspot.com",messagingSenderId:"221809737779",appId:"1:221809737779:web:a0e2f3d1b9b6c1e1f2d3e4"},gemini:{apiKey:"AIzaSyCU4hOMnyFAWpi1zuy1tRuWW9AV358_njE",model:"gemini-2.5-flash"},app:{name:"  ",version:"1.0.0",environment:"production"}};console.log("   :",{environment:kt.app.environment,firebaseApiKey:kt.firebase.apiKey?" ":" ",firebaseAuthDomain:kt.firebase.authDomain||" ",firebaseProjectId:kt.firebase.projectId||" ",firebaseStorageBucket:kt.firebase.storageBucket||" ",firebaseMessagingSenderId:kt.firebase.messagingSenderId||" ",firebaseAppId:kt.firebase.appId||" ",geminiApiKey:" ",allEnvVars:Object.keys(dA).filter(n=>n.startsWith("VITE_"))});console.log("   VITE_  :",Object.keys(dA).filter(n=>n.startsWith("VITE_")));const Ra=()=>{const n=[];return kt.firebase.apiKey||n.push(" Firebase API "),kt.firebase.authDomain||n.push("Firebase Auth Domain "),kt.firebase.projectId||n.push("  Firebase "),kt.firebase.storageBucket||n.push("Firebase Storage Bucket "),kt.firebase.messagingSenderId||n.push("Firebase Messaging Sender ID "),kt.firebase.appId||n.push("Firebase App ID "),{isValid:n.length===0,errors:n,hasFirebase:!!kt.firebase.apiKey,hasGemini:!0}};if(typeof window<"u"){const n=Ra();n.isValid?console.log("    "):console.warn(" :    :",n.errors)}let Id;const PM="gemini-2.5-flash",fA=()=>{if(Id)return;const n=Ra();if(!n.isValid){console.warn(" :  Gemini API  :",n.errors);return}try{Id=new DM({apiKey:kt.gemini.apiKey}),console.log("    Gemini ")}catch(e){console.error("     Gemini:",e)}},Ya={FINANCIAL_ANALYST:`You are an expert financial analyst assistant, " ". You have full access to the user's financial data for a specific period. Your purpose is to provide detailed, insightful analysis and answer complex questions in Arabic based ONLY on the data provided for that period.
- Today's date is ${new Date().toLocaleDateString("en-CA")}.
- Analyze the user's provided financial state (transactions, card details, bank balance, investments, installments) for the specified period to answer their query.
- Be thorough. Connect different parts of their financial data to give holistic answers.
- DO NOT just state data, INTERPRET it. Provide insights, identify trends, and offer observations.
- Be friendly, professional, and act as a true financial advisor.`,INVESTMENT_COACH:`You are an educational investment coach named " ". Your primary role is to educate the user about investment concepts and strategies, particularly within the context of the Saudi stock market (Tadawul).
- You MUST NOT give direct financial advice. Do not recommend buying or selling specific stocks (e.g., "Buy Aramco").
- When asked for a recommendation, you MUST politely decline and instead explain HOW the user can research and make their own informed decisions.
- Your tone should be encouraging, educational, and responsible.
- Keep your answers clear, concise, and in Arabic.`,PASTE_ANALYZER:`You are an intelligent data extraction tool for Arabic and English financial transaction SMS messages from Saudi Arabia. Your task is to analyze the provided text and respond ONLY with a valid JSON object containing the keys: "merchant", "amount", "date", "paymentMethod", and "categoryId".
- **CRITICAL RULE**: Extract data ONLY from the user's text. Do not invent or infer information. If a piece of information is not present in the text, its corresponding JSON value should be null.
- **ERROR HANDLING**: If the provided text does not seem to be a financial transaction SMS at all, you MUST respond with a JSON object containing a single key "error" with the value "      .".

- **Amount Extraction**:
  - The 'amount' is the primary transaction value.
  - Look for a number after keywords like "" or "Amount:".
  - You MUST ignore any numbers associated with "Remaining limit", " ", or card numbers.

- **Date Extraction**:
  - The 'date' MUST be in "YYYY-MM-DD" format.
  - If the text provides a full timestamp like "2025-09-06 15:11:57", extract only the date part "2025-09-06".
  - If the text uses "DD/MM/YY", you must convert it. Example: '01/09/25' becomes '2025-09-01'.

- **Merchant Extraction**:
  - The 'merchant' is the store or service name.
  - Look for text after keywords like "" or "Merchant:".

{{PAYMENT_METHOD_MAPPING}}

- **Category ID**:
  - Analyze the merchant name and suggest the most relevant ID from the provided list of available categories. If unsure, use the ID for the category named ''.

---
**EXAMPLES**

1.  **Input**: "-POS\\n182 SAR\\n Adel Inte\\n-*2855\\n 01/09/25 22:11"
    **Output**: { "merchant": "Adel Inte", "amount": 182, "date": "2025-09-01", "paymentMethod": "bank-default", "categoryId": "cat-5" }

2.  **Input**: "-POS\\n95.78 SAR\\n BINDAWOOD\\n **4278 (Apple Pay)\\n 03/09/25 14:45\\n  12146.95 SAR"
    **Output**: { "merchant": "BINDAWOOD", "amount": 95.78, "date": "2025-09-03", "paymentMethod": "snb-card", "categoryId": "cat-1" }

3.  **Input**: "POS Purchase (Apple Pay)\\nCard: Visa card XX8095\\nAmount: SAR 115.00\\nMerchant: AlHamra Roundabout Statio\\nIn: SAUDI ARABIA\\nRemaining limit SAR 2,502.34\\nOn: 2025-09-06 15:11:57"
    **Output**: { "merchant": "AlHamra Roundabout Statio", "amount": 115.00, "date": "2025-09-06", "paymentMethod": "enbd-card", "categoryId": "cat-3" }

4.  **Input**: "POS Purchase (Apple Pay)\\nCard: Visa card XX8095\\nAmount: SAR 10.00\\nMerchant: MKAN CO\\nIn: SAUDI ARABIA\\nRemaining limit SAR 2,782.27\\nOn: 2025-09-03 23:44:56"
    **Output**: { "merchant": "MKAN CO", "amount": 10.00, "date": "2025-09-03", "paymentMethod": "enbd-card", "categoryId": "cat-7" }
---
`,ICON_SUGGESTER:"You are an emoji expert. Your task is to suggest a single, relevant emoji for a given category name. You must respond with ONLY the emoji character and nothing else.",BUDGET_PLANNER:`You are a helpful and encouraging financial planning assistant in Arabic. Your goal is to help the user create a realistic monthly budget based on their spending history and a total budget amount they provide. Use the 50/30/20 rule (50% for Needs, 30% for Wants, 20% for Savings/Debt) as a general framework, but you MUST adapt it to the user's actual spending patterns revealed in their transaction data. Your response MUST be in Arabic and formatted using Markdown. It should contain: 1. A brief, encouraging introductory sentence. 2. A breakdown of the total budget into Needs, Wants, and Savings, with the suggested amount for each. 3. A detailed table with three columns: "", " ", and "". 4. In the table, allocate the "Needs" and "Wants" amounts across the user's actual spending categories. 5. The "Notes" column should provide a brief justification. 6. Conclude with a short, motivational tip.`,EXCHANGE_RATE:`You are an expert currency exchange rate assistant. Your task is to provide the current exchange rate between two currencies. You MUST respond with ONLY a valid JSON object containing the keys: "rate", "fromCurrency", "toCurrency", and "lastUpdated".

- The 'rate' should be a decimal number representing how many units of 'toCurrency' equal 1 unit of 'fromCurrency'.
- The 'fromCurrency' and 'toCurrency' should be the exact currency codes provided by the user.
- The 'lastUpdated' should be the current date in "YYYY-MM-DD" format.

**IMPORTANT**: If you cannot determine the exact current exchange rate, provide a reasonable estimate based on recent market trends and clearly state this in your response.

**EXAMPLE**:
Input: "USD to SAR"
Output: {"rate": 3.75, "fromCurrency": "USD", "toCurrency": "SAR", "lastUpdated": "2024-01-15"}`},Ja=async(n,e,t=!1)=>{if(!Id)throw new Error("     .      .");try{return(await Id.models.generateContent({model:PM,contents:e,config:{systemInstruction:n,...t&&{responseMimeType:"application/json"}}})).text}catch(s){console.error("Gemini API Error:",s);let o="     .    .";throw s instanceof Error&&"message"in s&&s.message.includes("403")&&(o="   (403).      API    Google Cloud Console."),new Error(o)}},hA=(n,e)=>Ja(Ya.FINANCIAL_ANALYST,`User Query: "${n}"

Financial Data: ${JSON.stringify(e)}`),mA=(n,e,t,s)=>{const o=Object.keys(t),l=Object.keys(s);let c=`- **Payment Method Mapping**:
  - The 'paymentMethod' MUST be one of these exact values: [${[...l,...o].map(p=>`'${p}'`).join(", ")}].
`;Object.values(s).forEach(p=>{const h=[p.name.split(" ")[0],...p.smsSamples||[]].filter(Boolean);h.length>0&&(c+=`  - If the text is a bank/mada transaction and contains any of these: '${h.join("', '")}', use '${p.id}'.
`)}),Object.values(t).forEach(p=>{const h=[p.name.split(" ")[0],...p.smsSamples||[]].filter(Boolean);h.length>0&&(c+=`  - If the text is a credit card transaction and contains any of these: '${h.join("', '")}', use '${p.id}'.
`)}),c+="  - If no specific bank account keywords match for a bank/mada transaction, default to the first bank account ID in the list.";const d=Ya.PASTE_ANALYZER.replace("{{PAYMENT_METHOD_MAPPING}}",c);return Ja(d,`Text to analyze: "${n}"

Available Categories: ${JSON.stringify(e)}

First bank account ID is '${l[0]}'`,!0)},pA=n=>Ja(Ya.INVESTMENT_COACH,n),Qm=n=>Ja(Ya.ICON_SUGGESTER,`Category: ${n}`),gA=(n,e,t)=>Ja(Ya.BUDGET_PLANNER,`Total monthly budget is: ${n} SAR. My spending categories are: ${JSON.stringify(e)}. My transactions from the last 60 days are: ${JSON.stringify(t)}`),yA=async(n,e)=>{const t=`Get current exchange rate from ${n} to ${e}`,s=await Ja(Ya.EXCHANGE_RATE,t,!0);try{const o=JSON.parse(s);return{rate:parseFloat(o.rate),fromCurrency:o.fromCurrency,toCurrency:o.toCurrency,lastUpdated:o.lastUpdated}}catch(o){throw console.error("Error parsing exchange rate:",o),new Error("    .    .")}},VM=Object.freeze(Object.defineProperty({__proto__:null,analyzeFinancialData:hA,analyzePastedText:mA,generateBudgetPlan:gA,generateInvestmentAdvice:pA,getExchangeRate:yA,initializeAi:fA,suggestCategoryIcon:Qm},Symbol.toStringTag,{value:"Module"})),kM="modulepreload",UM=function(n){return"/fd/"+n},cT={},vs=function(e,t,s){let o=Promise.resolve();if(t&&t.length>0){let c=function(h){return Promise.all(h.map(T=>Promise.resolve(T).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));o=c(t.map(h=>{if(h=UM(h),h in cT)return;cT[h]=!0;const T=h.endsWith(".css"),E=T?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${E}`))return;const S=document.createElement("link");if(S.rel=T?"stylesheet":kM,T||(S.as="script"),S.crossOrigin="",S.href=h,p&&S.setAttribute("nonce",p),document.head.appendChild(S),T)return new Promise((I,V)=>{S.addEventListener("load",I),S.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${h}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return o.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})},LM=()=>{};var dT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},OM=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],d=n[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},vA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,d=c?n[o+1]:0,p=o+2<n.length,h=p?n[o+2]:0,T=l>>2,E=(l&3)<<4|d>>4;let S=(d&15)<<2|h>>6,I=h&63;p||(I=64,c||(S=64)),s.push(t[T],t[E],t[S],t[I])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(_A(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):OM(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const h=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||d==null||h==null||E==null)throw new qM;const S=l<<2|d>>4;if(s.push(S),h!==64){const I=d<<4&240|h>>2;if(s.push(I),E!==64){const V=h<<6&192|E;s.push(V)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class qM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BM=function(n){const e=_A(n);return vA.encodeByteArray(e,!0)},wd=function(n){return BM(n).replace(/\./g,"")},TA=function(n){try{return vA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM=()=>FM().__FIREBASE_DEFAULTS__,HM=()=>{if(typeof process>"u"||typeof dT>"u")return;const n=dT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},GM=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&TA(n[1]);return e&&JSON.parse(e)},Wd=()=>{try{return LM()||zM()||HM()||GM()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},EA=n=>{var e,t;return(t=(e=Wd())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},jM=n=>{const e=EA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},AA=()=>{var n;return(n=Wd())==null?void 0:n.config},SA=n=>{var e;return(e=Wd())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function bA(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[wd(JSON.stringify(t)),wd(JSON.stringify(c)),""].join(".")}const cu={};function KM(){const n={prod:[],emulator:[]};for(const e of Object.keys(cu))cu[e]?n.emulator.push(e):n.prod.push(e);return n}function $M(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let fT=!1;function xA(n,e){if(typeof window>"u"||typeof document>"u"||!Ka(window.location.host)||cu[n]===e||cu[n]||fT)return;cu[n]=e;function t(S){return`__firebase__banner__${S}`}const s="__firebase__banner",l=KM().prod.length>0;function c(){const S=document.getElementById(s);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,I){S.setAttribute("width","24"),S.setAttribute("id",I),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function h(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{fT=!0,c()},S}function T(S,I){S.setAttribute("id",I),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=$M(s),I=t("text"),V=document.getElementById(I)||document.createElement("span"),B=t("learnmore"),F=document.getElementById(B)||document.createElement("a"),ee=t("preprendIcon"),te=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const K=S.element;d(K),T(F,B);const Y=h();p(te,ee),K.append(te,V,F,Y),document.body.appendChild(K)}l?(V.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function XM(){var e;const n=(e=Wd())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZM(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function eD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tD(){const n=gn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function nD(){return!XM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iD(){try{return typeof indexedDB=="object"}catch{return!1}}function sD(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD="FirebaseError";class Ls extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=rD,Object.setPrototypeOf(this,Ls.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bu.prototype.create)}}class bu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?oD(l,s):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new Ls(o,d,s)}}function oD(n,e){return n.replace(aD,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const aD=/\{\$([^}]+)}/g;function lD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function _o(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=n[o],c=e[o];if(hT(l)&&hT(c)){if(!_o(l,c))return!1}else if(l!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function hT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function su(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function ru(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function uD(n,e){const t=new cD(n,e);return t.subscribe.bind(t)}class cD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");dD(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=xm),o.error===void 0&&(o.error=xm),o.complete===void 0&&(o.complete=xm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dD(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function xm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(n){return n&&n._delegate?n._delegate:n}class vo{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new YM;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mD(e))try{this.getOrInitializeService({instanceIdentifier:mo})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=mo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mo){return this.instances.has(e)}getOptions(e=mo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&c.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:hD(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=mo){return this.component?this.component.multipleInstances?e:mo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hD(n){return n===mo?void 0:n}function mD(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new fD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ye||(Ye={}));const gD={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},yD=Ye.INFO,_D={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},vD=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=_D[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Np{constructor(e){this.name=e,this._logLevel=yD,this._logHandler=vD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}const TD=(n,e)=>e.some(t=>n instanceof t);let mT,pT;function ED(){return mT||(mT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AD(){return pT||(pT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const CA=new WeakMap,Xm=new WeakMap,IA=new WeakMap,Cm=new WeakMap,Mp=new WeakMap;function SD(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Er(n.result)),o()},c=()=>{s(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&CA.set(t,n)}).catch(()=>{}),Mp.set(e,n),e}function bD(n){if(Xm.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Xm.set(n,e)}let Wm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Xm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||IA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Er(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function xD(n){Wm=n(Wm)}function CD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Im(this),e,...t);return IA.set(s,e.sort?e.sort():[e]),Er(s)}:AD().includes(n)?function(...e){return n.apply(Im(this),e),Er(CA.get(this))}:function(...e){return Er(n.apply(Im(this),e))}}function ID(n){return typeof n=="function"?CD(n):(n instanceof IDBTransaction&&bD(n),TD(n,ED())?new Proxy(n,Wm):n)}function Er(n){if(n instanceof IDBRequest)return SD(n);if(Cm.has(n))return Cm.get(n);const e=ID(n);return e!==n&&(Cm.set(n,e),Mp.set(e,n)),e}const Im=n=>Mp.get(n);function wD(n,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),d=Er(c);return s&&c.addEventListener("upgradeneeded",p=>{s(Er(c.result),p.oldVersion,p.newVersion,Er(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",h=>o(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const RD=["get","getKey","getAll","getAllKeys","count"],ND=["put","add","delete","clear"],wm=new Map;function gT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(wm.get(e))return wm.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=ND.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||RD.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,o?"readwrite":"readonly");let h=p.store;return s&&(h=h.index(d.shift())),(await Promise.all([h[t](...d),o&&p.done]))[0]};return wm.set(e,l),l}xD(n=>({...n,get:(e,t,s)=>gT(e,t)||n.get(e,t,s),has:(e,t)=>!!gT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(DD(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function DD(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zm="@firebase/app",yT="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new Np("@firebase/app"),PD="@firebase/app-compat",VD="@firebase/analytics-compat",kD="@firebase/analytics",UD="@firebase/app-check-compat",LD="@firebase/app-check",OD="@firebase/auth",qD="@firebase/auth-compat",BD="@firebase/database",FD="@firebase/data-connect",zD="@firebase/database-compat",HD="@firebase/functions",GD="@firebase/functions-compat",jD="@firebase/installations",YD="@firebase/installations-compat",JD="@firebase/messaging",KD="@firebase/messaging-compat",$D="@firebase/performance",QD="@firebase/performance-compat",XD="@firebase/remote-config",WD="@firebase/remote-config-compat",ZD="@firebase/storage",e2="@firebase/storage-compat",t2="@firebase/firestore",n2="@firebase/ai",i2="@firebase/firestore-compat",s2="firebase",r2="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep="[DEFAULT]",o2={[Zm]:"fire-core",[PD]:"fire-core-compat",[kD]:"fire-analytics",[VD]:"fire-analytics-compat",[LD]:"fire-app-check",[UD]:"fire-app-check-compat",[OD]:"fire-auth",[qD]:"fire-auth-compat",[BD]:"fire-rtdb",[FD]:"fire-data-connect",[zD]:"fire-rtdb-compat",[HD]:"fire-fn",[GD]:"fire-fn-compat",[jD]:"fire-iid",[YD]:"fire-iid-compat",[JD]:"fire-fcm",[KD]:"fire-fcm-compat",[$D]:"fire-perf",[QD]:"fire-perf-compat",[XD]:"fire-rc",[WD]:"fire-rc-compat",[ZD]:"fire-gcs",[e2]:"fire-gcs-compat",[t2]:"fire-fst",[i2]:"fire-fst-compat",[n2]:"fire-vertex","fire-js":"fire-js",[s2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd=new Map,a2=new Map,tp=new Map;function _T(n,e){try{n.container.addComponent(e)}catch(t){Ms.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Va(n){const e=n.name;if(tp.has(e))return Ms.debug(`There were multiple attempts to register component ${e}.`),!1;tp.set(e,n);for(const t of Rd.values())_T(t,n);for(const t of a2.values())_T(t,n);return!0}function Dp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ni(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ar=new bu("app","Firebase",l2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new vo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a=r2;function wA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:ep,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Ar.create("bad-app-name",{appName:String(o)});if(t||(t=AA()),!t)throw Ar.create("no-options");const l=Rd.get(o);if(l){if(_o(t,l.options)&&_o(s,l.config))return l;throw Ar.create("duplicate-app",{appName:o})}const c=new pD(o);for(const p of tp.values())c.addComponent(p);const d=new u2(t,s,c);return Rd.set(o,d),d}function RA(n=ep){const e=Rd.get(n);if(!e&&n===ep&&AA())return wA();if(!e)throw Ar.create("no-app",{appName:n});return e}function Sr(n,e,t){let s=o2[n]??n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ms.warn(c.join(" "));return}Va(new vo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2="firebase-heartbeat-database",d2=1,yu="firebase-heartbeat-store";let Rm=null;function NA(){return Rm||(Rm=wD(c2,d2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(yu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ar.create("idb-open",{originalErrorMessage:n.message})})),Rm}async function f2(n){try{const t=(await NA()).transaction(yu),s=await t.objectStore(yu).get(MA(n));return await t.done,s}catch(e){if(e instanceof Ls)Ms.warn(e.message);else{const t=Ar.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ms.warn(t.message)}}}async function vT(n,e){try{const s=(await NA()).transaction(yu,"readwrite");await s.objectStore(yu).put(e,MA(n)),await s.done}catch(t){if(t instanceof Ls)Ms.warn(t.message);else{const s=Ar.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ms.warn(s.message)}}}function MA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2=1024,m2=30;class p2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new y2(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=TT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>m2){const c=_2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ms.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=TT(),{heartbeatsToSend:s,unsentEntries:o}=g2(this._heartbeatsCache.heartbeats),l=wd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ms.warn(t),""}}}function TT(){return new Date().toISOString().substring(0,10)}function g2(n,e=h2){const t=[];let s=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),ET(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ET(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class y2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iD()?sD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await f2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return vT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return vT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ET(n){return wd(JSON.stringify({version:2,heartbeats:n})).length}function _2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(n){Va(new vo("platform-logger",e=>new MD(e),"PRIVATE")),Va(new vo("heartbeat",e=>new p2(e),"PRIVATE")),Sr(Zm,yT,n),Sr(Zm,yT,"esm2020"),Sr("fire-js","")}v2("");var T2="firebase",E2="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sr(T2,E2,"app");var AT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var br,DA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,M){function N(){}N.prototype=M.prototype,R.F=M.prototype,R.prototype=new N,R.prototype.constructor=R,R.D=function(L,k,P){for(var D=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)D[Ue-2]=arguments[Ue];return M.prototype[k].apply(L,D)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,M,N){N||(N=0);const L=Array(16);if(typeof M=="string")for(var k=0;k<16;++k)L[k]=M.charCodeAt(N++)|M.charCodeAt(N++)<<8|M.charCodeAt(N++)<<16|M.charCodeAt(N++)<<24;else for(k=0;k<16;++k)L[k]=M[N++]|M[N++]<<8|M[N++]<<16|M[N++]<<24;M=R.g[0],N=R.g[1],k=R.g[2];let P=R.g[3],D;D=M+(P^N&(k^P))+L[0]+3614090360&4294967295,M=N+(D<<7&4294967295|D>>>25),D=P+(k^M&(N^k))+L[1]+3905402710&4294967295,P=M+(D<<12&4294967295|D>>>20),D=k+(N^P&(M^N))+L[2]+606105819&4294967295,k=P+(D<<17&4294967295|D>>>15),D=N+(M^k&(P^M))+L[3]+3250441966&4294967295,N=k+(D<<22&4294967295|D>>>10),D=M+(P^N&(k^P))+L[4]+4118548399&4294967295,M=N+(D<<7&4294967295|D>>>25),D=P+(k^M&(N^k))+L[5]+1200080426&4294967295,P=M+(D<<12&4294967295|D>>>20),D=k+(N^P&(M^N))+L[6]+2821735955&4294967295,k=P+(D<<17&4294967295|D>>>15),D=N+(M^k&(P^M))+L[7]+4249261313&4294967295,N=k+(D<<22&4294967295|D>>>10),D=M+(P^N&(k^P))+L[8]+1770035416&4294967295,M=N+(D<<7&4294967295|D>>>25),D=P+(k^M&(N^k))+L[9]+2336552879&4294967295,P=M+(D<<12&4294967295|D>>>20),D=k+(N^P&(M^N))+L[10]+4294925233&4294967295,k=P+(D<<17&4294967295|D>>>15),D=N+(M^k&(P^M))+L[11]+2304563134&4294967295,N=k+(D<<22&4294967295|D>>>10),D=M+(P^N&(k^P))+L[12]+1804603682&4294967295,M=N+(D<<7&4294967295|D>>>25),D=P+(k^M&(N^k))+L[13]+4254626195&4294967295,P=M+(D<<12&4294967295|D>>>20),D=k+(N^P&(M^N))+L[14]+2792965006&4294967295,k=P+(D<<17&4294967295|D>>>15),D=N+(M^k&(P^M))+L[15]+1236535329&4294967295,N=k+(D<<22&4294967295|D>>>10),D=M+(k^P&(N^k))+L[1]+4129170786&4294967295,M=N+(D<<5&4294967295|D>>>27),D=P+(N^k&(M^N))+L[6]+3225465664&4294967295,P=M+(D<<9&4294967295|D>>>23),D=k+(M^N&(P^M))+L[11]+643717713&4294967295,k=P+(D<<14&4294967295|D>>>18),D=N+(P^M&(k^P))+L[0]+3921069994&4294967295,N=k+(D<<20&4294967295|D>>>12),D=M+(k^P&(N^k))+L[5]+3593408605&4294967295,M=N+(D<<5&4294967295|D>>>27),D=P+(N^k&(M^N))+L[10]+38016083&4294967295,P=M+(D<<9&4294967295|D>>>23),D=k+(M^N&(P^M))+L[15]+3634488961&4294967295,k=P+(D<<14&4294967295|D>>>18),D=N+(P^M&(k^P))+L[4]+3889429448&4294967295,N=k+(D<<20&4294967295|D>>>12),D=M+(k^P&(N^k))+L[9]+568446438&4294967295,M=N+(D<<5&4294967295|D>>>27),D=P+(N^k&(M^N))+L[14]+3275163606&4294967295,P=M+(D<<9&4294967295|D>>>23),D=k+(M^N&(P^M))+L[3]+4107603335&4294967295,k=P+(D<<14&4294967295|D>>>18),D=N+(P^M&(k^P))+L[8]+1163531501&4294967295,N=k+(D<<20&4294967295|D>>>12),D=M+(k^P&(N^k))+L[13]+2850285829&4294967295,M=N+(D<<5&4294967295|D>>>27),D=P+(N^k&(M^N))+L[2]+4243563512&4294967295,P=M+(D<<9&4294967295|D>>>23),D=k+(M^N&(P^M))+L[7]+1735328473&4294967295,k=P+(D<<14&4294967295|D>>>18),D=N+(P^M&(k^P))+L[12]+2368359562&4294967295,N=k+(D<<20&4294967295|D>>>12),D=M+(N^k^P)+L[5]+4294588738&4294967295,M=N+(D<<4&4294967295|D>>>28),D=P+(M^N^k)+L[8]+2272392833&4294967295,P=M+(D<<11&4294967295|D>>>21),D=k+(P^M^N)+L[11]+1839030562&4294967295,k=P+(D<<16&4294967295|D>>>16),D=N+(k^P^M)+L[14]+4259657740&4294967295,N=k+(D<<23&4294967295|D>>>9),D=M+(N^k^P)+L[1]+2763975236&4294967295,M=N+(D<<4&4294967295|D>>>28),D=P+(M^N^k)+L[4]+1272893353&4294967295,P=M+(D<<11&4294967295|D>>>21),D=k+(P^M^N)+L[7]+4139469664&4294967295,k=P+(D<<16&4294967295|D>>>16),D=N+(k^P^M)+L[10]+3200236656&4294967295,N=k+(D<<23&4294967295|D>>>9),D=M+(N^k^P)+L[13]+681279174&4294967295,M=N+(D<<4&4294967295|D>>>28),D=P+(M^N^k)+L[0]+3936430074&4294967295,P=M+(D<<11&4294967295|D>>>21),D=k+(P^M^N)+L[3]+3572445317&4294967295,k=P+(D<<16&4294967295|D>>>16),D=N+(k^P^M)+L[6]+76029189&4294967295,N=k+(D<<23&4294967295|D>>>9),D=M+(N^k^P)+L[9]+3654602809&4294967295,M=N+(D<<4&4294967295|D>>>28),D=P+(M^N^k)+L[12]+3873151461&4294967295,P=M+(D<<11&4294967295|D>>>21),D=k+(P^M^N)+L[15]+530742520&4294967295,k=P+(D<<16&4294967295|D>>>16),D=N+(k^P^M)+L[2]+3299628645&4294967295,N=k+(D<<23&4294967295|D>>>9),D=M+(k^(N|~P))+L[0]+4096336452&4294967295,M=N+(D<<6&4294967295|D>>>26),D=P+(N^(M|~k))+L[7]+1126891415&4294967295,P=M+(D<<10&4294967295|D>>>22),D=k+(M^(P|~N))+L[14]+2878612391&4294967295,k=P+(D<<15&4294967295|D>>>17),D=N+(P^(k|~M))+L[5]+4237533241&4294967295,N=k+(D<<21&4294967295|D>>>11),D=M+(k^(N|~P))+L[12]+1700485571&4294967295,M=N+(D<<6&4294967295|D>>>26),D=P+(N^(M|~k))+L[3]+2399980690&4294967295,P=M+(D<<10&4294967295|D>>>22),D=k+(M^(P|~N))+L[10]+4293915773&4294967295,k=P+(D<<15&4294967295|D>>>17),D=N+(P^(k|~M))+L[1]+2240044497&4294967295,N=k+(D<<21&4294967295|D>>>11),D=M+(k^(N|~P))+L[8]+1873313359&4294967295,M=N+(D<<6&4294967295|D>>>26),D=P+(N^(M|~k))+L[15]+4264355552&4294967295,P=M+(D<<10&4294967295|D>>>22),D=k+(M^(P|~N))+L[6]+2734768916&4294967295,k=P+(D<<15&4294967295|D>>>17),D=N+(P^(k|~M))+L[13]+1309151649&4294967295,N=k+(D<<21&4294967295|D>>>11),D=M+(k^(N|~P))+L[4]+4149444226&4294967295,M=N+(D<<6&4294967295|D>>>26),D=P+(N^(M|~k))+L[11]+3174756917&4294967295,P=M+(D<<10&4294967295|D>>>22),D=k+(M^(P|~N))+L[2]+718787259&4294967295,k=P+(D<<15&4294967295|D>>>17),D=N+(P^(k|~M))+L[9]+3951481745&4294967295,R.g[0]=R.g[0]+M&4294967295,R.g[1]=R.g[1]+(k+(D<<21&4294967295|D>>>11))&4294967295,R.g[2]=R.g[2]+k&4294967295,R.g[3]=R.g[3]+P&4294967295}s.prototype.v=function(R,M){M===void 0&&(M=R.length);const N=M-this.blockSize,L=this.C;let k=this.h,P=0;for(;P<M;){if(k==0)for(;P<=N;)o(this,R,P),P+=this.blockSize;if(typeof R=="string"){for(;P<M;)if(L[k++]=R.charCodeAt(P++),k==this.blockSize){o(this,L),k=0;break}}else for(;P<M;)if(L[k++]=R[P++],k==this.blockSize){o(this,L),k=0;break}}this.h=k,this.o+=M},s.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var M=1;M<R.length-8;++M)R[M]=0;M=this.o*8;for(var N=R.length-8;N<R.length;++N)R[N]=M&255,M/=256;for(this.v(R),R=Array(16),M=0,N=0;N<4;++N)for(let L=0;L<32;L+=8)R[M++]=this.g[N]>>>L&255;return R};function l(R,M){var N=d;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=M(R)}function c(R,M){this.h=M;const N=[];let L=!0;for(let k=R.length-1;k>=0;k--){const P=R[k]|0;L&&P==M||(N[k]=P,L=!1)}this.g=N}var d={};function p(R){return-128<=R&&R<128?l(R,function(M){return new c([M|0],M<0?-1:0)}):new c([R|0],R<0?-1:0)}function h(R){if(isNaN(R)||!isFinite(R))return E;if(R<0)return F(h(-R));const M=[];let N=1;for(let L=0;R>=N;L++)M[L]=R/N|0,N*=4294967296;return new c(M,0)}function T(R,M){if(R.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(R.charAt(0)=="-")return F(T(R.substring(1),M));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=h(Math.pow(M,8));let L=E;for(let P=0;P<R.length;P+=8){var k=Math.min(8,R.length-P);const D=parseInt(R.substring(P,P+k),M);k<8?(k=h(Math.pow(M,k)),L=L.j(k).add(h(D))):(L=L.j(N),L=L.add(h(D)))}return L}var E=p(0),S=p(1),I=p(16777216);n=c.prototype,n.m=function(){if(B(this))return-F(this).m();let R=0,M=1;for(let N=0;N<this.g.length;N++){const L=this.i(N);R+=(L>=0?L:4294967296+L)*M,M*=4294967296}return R},n.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(V(this))return"0";if(B(this))return"-"+F(this).toString(R);const M=h(Math.pow(R,6));var N=this;let L="";for(;;){const k=Y(N,M).g;N=ee(N,k.j(M));let P=((N.g.length>0?N.g[0]:N.h)>>>0).toString(R);if(N=k,V(N))return P+L;for(;P.length<6;)P="0"+P;L=P+L}},n.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function V(R){if(R.h!=0)return!1;for(let M=0;M<R.g.length;M++)if(R.g[M]!=0)return!1;return!0}function B(R){return R.h==-1}n.l=function(R){return R=ee(this,R),B(R)?-1:V(R)?0:1};function F(R){const M=R.g.length,N=[];for(let L=0;L<M;L++)N[L]=~R.g[L];return new c(N,~R.h).add(S)}n.abs=function(){return B(this)?F(this):this},n.add=function(R){const M=Math.max(this.g.length,R.g.length),N=[];let L=0;for(let k=0;k<=M;k++){let P=L+(this.i(k)&65535)+(R.i(k)&65535),D=(P>>>16)+(this.i(k)>>>16)+(R.i(k)>>>16);L=D>>>16,P&=65535,D&=65535,N[k]=D<<16|P}return new c(N,N[N.length-1]&-2147483648?-1:0)};function ee(R,M){return R.add(F(M))}n.j=function(R){if(V(this)||V(R))return E;if(B(this))return B(R)?F(this).j(F(R)):F(F(this).j(R));if(B(R))return F(this.j(F(R)));if(this.l(I)<0&&R.l(I)<0)return h(this.m()*R.m());const M=this.g.length+R.g.length,N=[];for(var L=0;L<2*M;L++)N[L]=0;for(L=0;L<this.g.length;L++)for(let k=0;k<R.g.length;k++){const P=this.i(L)>>>16,D=this.i(L)&65535,Ue=R.i(k)>>>16,Be=R.i(k)&65535;N[2*L+2*k]+=D*Be,te(N,2*L+2*k),N[2*L+2*k+1]+=P*Be,te(N,2*L+2*k+1),N[2*L+2*k+1]+=D*Ue,te(N,2*L+2*k+1),N[2*L+2*k+2]+=P*Ue,te(N,2*L+2*k+2)}for(R=0;R<M;R++)N[R]=N[2*R+1]<<16|N[2*R];for(R=M;R<2*M;R++)N[R]=0;return new c(N,0)};function te(R,M){for(;(R[M]&65535)!=R[M];)R[M+1]+=R[M]>>>16,R[M]&=65535,M++}function K(R,M){this.g=R,this.h=M}function Y(R,M){if(V(M))throw Error("division by zero");if(V(R))return new K(E,E);if(B(R))return M=Y(F(R),M),new K(F(M.g),F(M.h));if(B(M))return M=Y(R,F(M)),new K(F(M.g),M.h);if(R.g.length>30){if(B(R)||B(M))throw Error("slowDivide_ only works with positive integers.");for(var N=S,L=M;L.l(R)<=0;)N=ae(N),L=ae(L);var k=Z(N,1),P=Z(L,1);for(L=Z(L,2),N=Z(N,2);!V(L);){var D=P.add(L);D.l(R)<=0&&(k=k.add(N),P=D),L=Z(L,1),N=Z(N,1)}return M=ee(R,k.j(M)),new K(k,M)}for(k=E;R.l(M)>=0;){for(N=Math.max(1,Math.floor(R.m()/M.m())),L=Math.ceil(Math.log(N)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),P=h(N),D=P.j(M);B(D)||D.l(R)>0;)N-=L,P=h(N),D=P.j(M);V(P)&&(P=S),k=k.add(P),R=ee(R,D)}return new K(k,R)}n.B=function(R){return Y(this,R).h},n.and=function(R){const M=Math.max(this.g.length,R.g.length),N=[];for(let L=0;L<M;L++)N[L]=this.i(L)&R.i(L);return new c(N,this.h&R.h)},n.or=function(R){const M=Math.max(this.g.length,R.g.length),N=[];for(let L=0;L<M;L++)N[L]=this.i(L)|R.i(L);return new c(N,this.h|R.h)},n.xor=function(R){const M=Math.max(this.g.length,R.g.length),N=[];for(let L=0;L<M;L++)N[L]=this.i(L)^R.i(L);return new c(N,this.h^R.h)};function ae(R){const M=R.g.length+1,N=[];for(let L=0;L<M;L++)N[L]=R.i(L)<<1|R.i(L-1)>>>31;return new c(N,R.h)}function Z(R,M){const N=M>>5;M%=32;const L=R.g.length-N,k=[];for(let P=0;P<L;P++)k[P]=M>0?R.i(P+N)>>>M|R.i(P+N+1)<<32-M:R.i(P+N);return new c(k,R.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,DA=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=h,c.fromString=T,br=c}).apply(typeof AT<"u"?AT:typeof self<"u"?self:typeof window<"u"?window:{});var od=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var PA,ou,VA,pd,np,kA,UA,LA;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof od=="object"&&od];for(var A=0;A<m.length;++A){var x=m[A];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var s=t(this);function o(m,A){if(A)e:{var x=s;m=m.split(".");for(var w=0;w<m.length-1;w++){var H=m[w];if(!(H in x))break e;x=x[H]}m=m[m.length-1],w=x[m],A=A(w),A!=w&&A!=null&&e(x,m,{configurable:!0,writable:!0,value:A})}}o("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(m){return m||function(A){var x=[],w;for(w in A)Object.prototype.hasOwnProperty.call(A,w)&&x.push([w,A[w]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(m){var A=typeof m;return A=="object"&&m!=null||A=="function"}function p(m,A,x){return m.call.apply(m.bind,arguments)}function h(m,A,x){return h=p,h.apply(null,arguments)}function T(m,A){var x=Array.prototype.slice.call(arguments,1);return function(){var w=x.slice();return w.push.apply(w,arguments),m.apply(this,w)}}function E(m,A){function x(){}x.prototype=A.prototype,m.Z=A.prototype,m.prototype=new x,m.prototype.constructor=m,m.Ob=function(w,H,X){for(var ye=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)ye[Le-2]=arguments[Le];return A.prototype[H].apply(w,ye)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function I(m){const A=m.length;if(A>0){const x=Array(A);for(let w=0;w<A;w++)x[w]=m[w];return x}return[]}function V(m,A){for(let w=1;w<arguments.length;w++){const H=arguments[w];var x=typeof H;if(x=x!="object"?x:H?Array.isArray(H)?"array":x:"null",x=="array"||x=="object"&&typeof H.length=="number"){x=m.length||0;const X=H.length||0;m.length=x+X;for(let ye=0;ye<X;ye++)m[x+ye]=H[ye]}else m.push(H)}}class B{constructor(A,x){this.i=A,this.j=x,this.h=0,this.g=null}get(){let A;return this.h>0?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function F(m){c.setTimeout(()=>{throw m},0)}function ee(){var m=R;let A=null;return m.g&&(A=m.g,m.g=m.g.next,m.g||(m.h=null),A.next=null),A}class te{constructor(){this.h=this.g=null}add(A,x){const w=K.get();w.set(A,x),this.h?this.h.next=w:this.g=w,this.h=w}}var K=new B(()=>new Y,m=>m.reset());class Y{constructor(){this.next=this.g=this.h=null}set(A,x){this.h=A,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,Z=!1,R=new te,M=()=>{const m=Promise.resolve(void 0);ae=()=>{m.then(N)}};function N(){for(var m;m=ee();){try{m.h.call(m.g)}catch(x){F(x)}var A=K;A.j(m),A.h<100&&(A.h++,m.next=A.g,A.g=m)}Z=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(m,A){this.type=m,this.g=this.target=A,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,A=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const x=()=>{};c.addEventListener("test",x,A),c.removeEventListener("test",x,A)}catch{}return m})();function D(m){return/^[\s\xa0]*$/.test(m)}function Ue(m,A){k.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,A)}E(Ue,k),Ue.prototype.init=function(m,A){const x=this.type=m.type,w=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=A,A=m.relatedTarget,A||(x=="mouseover"?A=m.fromElement:x=="mouseout"&&(A=m.toElement)),this.relatedTarget=A,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&Ue.Z.h.call(this)},Ue.prototype.h=function(){Ue.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Be="closure_listenable_"+(Math.random()*1e6|0),Q=0;function fe(m,A,x,w,H){this.listener=m,this.proxy=null,this.src=A,this.type=x,this.capture=!!w,this.ha=H,this.key=++Q,this.da=this.fa=!1}function Ce(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Fe(m,A,x){for(const w in m)A.call(x,m[w],w,m)}function Qe(m,A){for(const x in m)A.call(void 0,m[x],x,m)}function O(m){const A={};for(const x in m)A[x]=m[x];return A}const ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(m,A){let x,w;for(let H=1;H<arguments.length;H++){w=arguments[H];for(x in w)m[x]=w[x];for(let X=0;X<ie.length;X++)x=ie[X],Object.prototype.hasOwnProperty.call(w,x)&&(m[x]=w[x])}}function _e(m){this.src=m,this.g={},this.h=0}_e.prototype.add=function(m,A,x,w,H){const X=m.toString();m=this.g[X],m||(m=this.g[X]=[],this.h++);const ye=ce(m,A,w,H);return ye>-1?(A=m[ye],x||(A.fa=!1)):(A=new fe(A,this.src,X,!!w,H),A.fa=x,m.push(A)),A};function re(m,A){const x=A.type;if(x in m.g){var w=m.g[x],H=Array.prototype.indexOf.call(w,A,void 0),X;(X=H>=0)&&Array.prototype.splice.call(w,H,1),X&&(Ce(A),m.g[x].length==0&&(delete m.g[x],m.h--))}}function ce(m,A,x,w){for(let H=0;H<m.length;++H){const X=m[H];if(!X.da&&X.listener==A&&X.capture==!!x&&X.ha==w)return H}return-1}var ve="closure_lm_"+(Math.random()*1e6|0),Xe={};function tt(m,A,x,w,H){if(Array.isArray(A)){for(let X=0;X<A.length;X++)tt(m,A[X],x,w,H);return null}return x=Ur(x),m&&m[Be]?m.J(A,x,d(w)?!!w.capture:!1,H):An(m,A,x,!1,w,H)}function An(m,A,x,w,H,X){if(!A)throw Error("Invalid event type");const ye=d(H)?!!H.capture:!!H;let Le=Zi(m);if(Le||(m[ve]=Le=new _e(m)),x=Le.add(A,x,w,ye,X),x.proxy)return x;if(w=bt(),x.proxy=w,w.src=m,w.listener=x,m.addEventListener)P||(H=ye),H===void 0&&(H=!1),m.addEventListener(A.toString(),w,H);else if(m.attachEvent)m.attachEvent(Hn(A.toString()),w);else if(m.addListener&&m.removeListener)m.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return x}function bt(){function m(x){return A.call(m.src,m.listener,x)}const A=kr;return m}function bi(m,A,x,w,H){if(Array.isArray(A))for(var X=0;X<A.length;X++)bi(m,A[X],x,w,H);else w=d(w)?!!w.capture:!!w,x=Ur(x),m&&m[Be]?(m=m.i,X=String(A).toString(),X in m.g&&(A=m.g[X],x=ce(A,x,w,H),x>-1&&(Ce(A[x]),Array.prototype.splice.call(A,x,1),A.length==0&&(delete m.g[X],m.h--)))):m&&(m=Zi(m))&&(A=m.g[A.toString()],m=-1,A&&(m=ce(A,x,w,H)),(x=m>-1?A[m]:null)&&qs(x))}function qs(m){if(typeof m!="number"&&m&&!m.da){var A=m.src;if(A&&A[Be])re(A.i,m);else{var x=m.type,w=m.proxy;A.removeEventListener?A.removeEventListener(x,w,m.capture):A.detachEvent?A.detachEvent(Hn(x),w):A.addListener&&A.removeListener&&A.removeListener(w),(x=Zi(A))?(re(x,m),x.h==0&&(x.src=null,A[ve]=null)):Ce(m)}}}function Hn(m){return m in Xe?Xe[m]:Xe[m]="on"+m}function kr(m,A){if(m.da)m=!0;else{A=new Ue(A,this);const x=m.listener,w=m.ha||m.src;m.fa&&qs(m),m=x.call(w,A)}return m}function Zi(m){return m=m[ve],m instanceof _e?m:null}var Bs="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ur(m){return typeof m=="function"?m:(m[Bs]||(m[Bs]=function(A){return m.handleEvent(A)}),m[Bs])}function xt(){L.call(this),this.i=new _e(this),this.M=this,this.G=null}E(xt,L),xt.prototype[Be]=!0,xt.prototype.removeEventListener=function(m,A,x,w){bi(this,m,A,x,w)};function It(m,A){var x,w=m.G;if(w)for(x=[];w;w=w.G)x.push(w);if(m=m.M,w=A.type||A,typeof A=="string")A=new k(A,m);else if(A instanceof k)A.target=A.target||m;else{var H=A;A=new k(w,m),he(A,H)}H=!0;let X,ye;if(x)for(ye=x.length-1;ye>=0;ye--)X=A.g=x[ye],H=ri(X,w,!0,A)&&H;if(X=A.g=m,H=ri(X,w,!0,A)&&H,H=ri(X,w,!1,A)&&H,x)for(ye=0;ye<x.length;ye++)X=A.g=x[ye],H=ri(X,w,!1,A)&&H}xt.prototype.N=function(){if(xt.Z.N.call(this),this.i){var m=this.i;for(const A in m.g){const x=m.g[A];for(let w=0;w<x.length;w++)Ce(x[w]);delete m.g[A],m.h--}}this.G=null},xt.prototype.J=function(m,A,x,w){return this.i.add(String(m),A,!1,x,w)},xt.prototype.K=function(m,A,x,w){return this.i.add(String(m),A,!0,x,w)};function ri(m,A,x,w){if(A=m.i.g[String(A)],!A)return!0;A=A.concat();let H=!0;for(let X=0;X<A.length;++X){const ye=A[X];if(ye&&!ye.da&&ye.capture==x){const Le=ye.listener,Mt=ye.ha||ye.src;ye.fa&&re(m.i,ye),H=Le.call(Mt,w)!==!1&&H}}return H&&!w.defaultPrevented}function Mo(m,A){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(A)>2147483647?-1:c.setTimeout(m,A||0)}function Lr(m){m.g=Mo(()=>{m.g=null,m.i&&(m.i=!1,Lr(m))},m.l);const A=m.h;m.h=null,m.m.apply(null,A)}class $ extends L{constructor(A,x){super(),this.m=A,this.l=x,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:Lr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function de(m){L.call(this),this.h=m,this.g={}}E(de,L);var pe=[];function Ee(m){Fe(m.g,function(A,x){this.g.hasOwnProperty(x)&&qs(A)},m),m.g={}}de.prototype.N=function(){de.Z.N.call(this),Ee(this)},de.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var De=c.JSON.stringify,gt=c.JSON.parse,Or=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function qr(){}function Do(){}var Dn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Jt(){k.call(this,"d")}E(Jt,k);function Sn(){k.call(this,"c")}E(Sn,k);var ge={},wt=null;function yn(){return wt=wt||new xt}ge.Ia="serverreachability";function _n(m){k.call(this,ge.Ia,m)}E(_n,k);function cn(m){const A=yn();It(A,new _n(A))}ge.STAT_EVENT="statevent";function Ze(m,A){k.call(this,ge.STAT_EVENT,m),this.stat=A}E(Ze,k);function Ut(m){const A=yn();It(A,new Ze(A,m))}ge.Ja="timingevent";function xi(m,A){k.call(this,ge.Ja,m),this.size=A}E(xi,k);function Ci(m,A){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},A)}function oi(){this.g=!0}oi.prototype.ua=function(){this.g=!1};function Ef(m,A,x,w,H,X){m.info(function(){if(m.g)if(X){var ye="",Le=X.split("&");for(let rt=0;rt<Le.length;rt++){var Mt=Le[rt].split("=");if(Mt.length>1){const At=Mt[0];Mt=Mt[1];const Jn=At.split("_");ye=Jn.length>=2&&Jn[1]=="type"?ye+(At+"="+Mt+"&"):ye+(At+"=redacted&")}}}else ye=null;else ye=X;return"XMLHTTP REQ ("+w+") [attempt "+H+"]: "+A+`
`+x+`
`+ye})}function Uu(m,A,x,w,H,X,ye){m.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+H+"]: "+A+`
`+x+`
`+X+" "+ye})}function Ii(m,A,x,w){m.info(function(){return"XMLHTTP TEXT ("+A+"): "+Af(m,x)+(w?" "+w:"")})}function Br(m,A){m.info(function(){return"TIMEOUT: "+A})}oi.prototype.info=function(){};function Af(m,A){if(!m.g)return A;if(!A)return null;try{const X=JSON.parse(A);if(X){for(m=0;m<X.length;m++)if(Array.isArray(X[m])){var x=X[m];if(!(x.length<2)){var w=x[1];if(Array.isArray(w)&&!(w.length<1)){var H=w[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ye=1;ye<w.length;ye++)w[ye]=""}}}}return De(X)}catch{return A}}var Fr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},tl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},nl;function zr(){}E(zr,qr),zr.prototype.g=function(){return new XMLHttpRequest},nl=new zr;function es(m){return encodeURIComponent(String(m))}function Lu(m){var A=1;m=m.split(":");const x=[];for(;A>0&&m.length;)x.push(m.shift()),A--;return m.length&&x.push(m.join(":")),x}function ai(m,A,x,w){this.j=m,this.i=A,this.l=x,this.S=w||1,this.V=new de(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new li}function li(){this.i=null,this.g="",this.h=!1}var Lt={},Xt={};function wi(m,A,x){m.M=1,m.A=Hr(qt(A)),m.u=x,m.R=!0,Po(m,null)}function Po(m,A){m.F=Date.now(),Ri(m),m.B=qt(m.A);var x=m.B,w=m.S;Array.isArray(w)||(w=[String(w)]),Lo(x.i,"t",w),m.C=0,x=m.j.L,m.h=new li,m.g=Wu(m.j,x?A:null,!m.u),m.P>0&&(m.O=new $(h(m.Y,m,m.g),m.P)),A=m.V,x=m.g,w=m.ba;var H="readystatechange";Array.isArray(H)||(H&&(pe[0]=H.toString()),H=pe);for(let X=0;X<H.length;X++){const ye=tt(x,H[X],w||A.handleEvent,!1,A.h||A);if(!ye)break;A.g[ye.key]=ye}A=m.J?O(m.J):{},m.u?(m.v||(m.v="POST"),A["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,A)):(m.v="GET",m.g.ea(m.B,m.v,null,A)),cn(),Ef(m.i,m.v,m.B,m.l,m.S,m.u)}ai.prototype.ba=function(m){m=m.target;const A=this.O;A&&di(m)==3?A.j():this.Y(m)},ai.prototype.Y=function(m){try{if(m==this.g)e:{const Le=di(this.g),Mt=this.g.ya(),rt=this.g.ca();if(!(Le<3)&&(Le!=3||this.g&&(this.h.h||this.g.la()||sn(this.g)))){this.K||Le!=4||Mt==7||(Mt==8||rt<=0?cn(3):cn(2)),Ni(this);var A=this.g.ca();this.X=A;var x=Sf(this);if(this.o=A==200,Uu(this.i,this.v,this.B,this.l,this.S,Le,A),this.o){if(this.U&&!this.L){t:{if(this.g){var w,H=this.g;if((w=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(w)){var X=w;break t}}X=null}if(m=X)Ii(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Mi(this,m);else{this.o=!1,this.m=3,Ut(12),Pn(this),Gn(this);break e}}if(this.R){m=!0;let At;for(;!this.K&&this.C<x.length;)if(At=qu(this,x),At==Xt){Le==4&&(this.m=4,Ut(14),m=!1),Ii(this.i,this.l,null,"[Incomplete Response]");break}else if(At==Lt){this.m=4,Ut(15),Ii(this.i,this.l,x,"[Invalid Chunk]"),m=!1;break}else Ii(this.i,this.l,At,null),Mi(this,At);if(Ou(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Le!=4||x.length!=0||this.h.h||(this.m=1,Ut(16),m=!1),this.o=this.o&&m,!m)Ii(this.i,this.l,x,"[Invalid Chunked Response]"),Pn(this),Gn(this);else if(x.length>0&&!this.W){this.W=!0;var ye=this.j;ye.g==this&&ye.aa&&!ye.P&&(ye.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),yl(ye),ye.P=!0,Ut(11))}}else Ii(this.i,this.l,x,null),Mi(this,x);Le==4&&Pn(this),this.o&&!this.K&&(Le==4?Ku(this.j,this):(this.o=!1,Ri(this)))}else ns(this.g),A==400&&x.indexOf("Unknown SID")>0?(this.m=3,Ut(12)):(this.m=0,Ut(13)),Pn(this),Gn(this)}}}catch{}finally{}};function Sf(m){if(!Ou(m))return m.g.la();const A=sn(m.g);if(A==="")return"";let x="";const w=A.length,H=di(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Pn(m),Gn(m),"";m.h.i=new c.TextDecoder}for(let X=0;X<w;X++)m.h.h=!0,x+=m.h.i.decode(A[X],{stream:!(H&&X==w-1)});return A.length=0,m.h.g+=x,m.C=0,m.h.g}function Ou(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function qu(m,A){var x=m.C,w=A.indexOf(`
`,x);return w==-1?Xt:(x=Number(A.substring(x,w)),isNaN(x)?Lt:(w+=1,w+x>A.length?Xt:(A=A.slice(w,w+x),m.C=w+x,A)))}ai.prototype.cancel=function(){this.K=!0,Pn(this)};function Ri(m){m.T=Date.now()+m.H,Vo(m,m.H)}function Vo(m,A){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Ci(h(m.aa,m),A)}function Ni(m){m.D&&(c.clearTimeout(m.D),m.D=null)}ai.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Br(this.i,this.B),this.M!=2&&(cn(),Ut(17)),Pn(this),this.m=2,Gn(this)):Vo(this,this.T-m)};function Gn(m){m.j.I==0||m.K||Ku(m.j,m)}function Pn(m){Ni(m);var A=m.O;A&&typeof A.dispose=="function"&&A.dispose(),m.O=null,Ee(m.V),m.g&&(A=m.g,m.g=null,A.abort(),A.dispose())}function Mi(m,A){try{var x=m.j;if(x.I!=0&&(x.g==m||Pi(x.h,m))){if(!m.L&&Pi(x.h,m)&&x.I==3){try{var w=x.Ba.g.parse(A)}catch{w=null}if(Array.isArray(w)&&w.length==3){var H=w;if(H[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<m.F)zo(x),Ks(x);else break e;Qr(x),Ut(18)}}else x.xa=H[1],0<x.xa-x.K&&H[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Ci(h(x.Va,x),6e3));Di(x.h)<=1&&x.ta&&(x.ta=void 0)}else qi(x,11)}else if((m.L||x.g==m)&&zo(x),!D(A))for(H=x.Ba.g.parse(A),A=0;A<H.length;A++){let rt=H[A];const At=rt[0];if(!(At<=x.K))if(x.K=At,rt=rt[1],x.I==2)if(rt[0]=="c"){x.M=rt[1],x.ba=rt[2];const Jn=rt[3];Jn!=null&&(x.ka=Jn,x.j.info("VER="+x.ka));const Bi=rt[4];Bi!=null&&(x.za=Bi,x.j.info("SVER="+x.za));const fi=rt[5];fi!=null&&typeof fi=="number"&&fi>0&&(w=1.5*fi,x.O=w,x.j.info("backChannelRequestTimeoutMs_="+w)),w=x;const hi=m.g;if(hi){const Xr=hi.g?hi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xr){var X=w.h;X.g||Xr.indexOf("spdy")==-1&&Xr.indexOf("quic")==-1&&Xr.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(rl(X,X.h),X.h=null))}if(w.G){const Ho=hi.g?hi.g.getResponseHeader("X-HTTP-Session-Id"):null;Ho&&(w.wa=Ho,lt(w.J,w.G,Ho))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-m.F,x.j.info("Handshake RTT: "+x.T+"ms")),w=x;var ye=m;if(w.na=Xu(w,w.L?w.ba:null,w.W),ye.L){ol(w.h,ye);var Le=ye,Mt=w.O;Mt&&(Le.H=Mt),Le.D&&(Ni(Le),Ri(Le)),w.g=ye}else Yu(w);x.i.length>0&&Oi(x)}else rt[0]!="stop"&&rt[0]!="close"||qi(x,7);else x.I==3&&(rt[0]=="stop"||rt[0]=="close"?rt[0]=="stop"?qi(x,7):pl(x):rt[0]!="noop"&&x.l&&x.l.qa(rt),x.A=0)}}cn(4)}catch{}}var Ot=class{constructor(m,A){this.g=m,this.map=A}};function il(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function sl(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Di(m){return m.h?1:m.g?m.g.size:0}function Pi(m,A){return m.h?m.h==A:m.g?m.g.has(A):!1}function rl(m,A){m.g?m.g.add(A):m.h=A}function ol(m,A){m.h&&m.h==A?m.h=null:m.g&&m.g.has(A)&&m.g.delete(A)}il.prototype.cancel=function(){if(this.i=al(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function al(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let A=m.i;for(const x of m.g.values())A=A.concat(x.G);return A}return I(m.i)}var Bu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ko(m,A){if(m){m=m.split("&");for(let x=0;x<m.length;x++){const w=m[x].indexOf("=");let H,X=null;w>=0?(H=m[x].substring(0,w),X=m[x].substring(w+1)):H=m[x],A(H,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Vn(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let A;m instanceof Vn?(this.l=m.l,Wt(this,m.j),this.o=m.o,this.g=m.g,Fs(this,m.u),this.h=m.h,ll(this,Gu(m.i)),this.m=m.m):m&&(A=String(m).match(Bu))?(this.l=!1,Wt(this,A[1]||"",!0),this.o=Vi(A[2]||""),this.g=Vi(A[3]||"",!0),Fs(this,A[4]),this.h=Vi(A[5]||"",!0),ll(this,A[6]||"",!0),this.m=Vi(A[7]||"")):(this.l=!1,this.i=new Hs(null,this.l))}Vn.prototype.toString=function(){const m=[];var A=this.j;A&&m.push(Gr(A,Uo,!0),":");var x=this.g;return(x||A=="file")&&(m.push("//"),(A=this.o)&&m.push(Gr(A,Uo,!0),"@"),m.push(es(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&m.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&m.push("/"),m.push(Gr(x,x.charAt(0)=="/"?ul:Fu,!0))),(x=this.i.toString())&&m.push("?",x),(x=this.m)&&m.push("#",Gr(x,zu)),m.join("")},Vn.prototype.resolve=function(m){const A=qt(this);let x=!!m.j;x?Wt(A,m.j):x=!!m.o,x?A.o=m.o:x=!!m.g,x?A.g=m.g:x=m.u!=null;var w=m.h;if(x)Fs(A,m.u);else if(x=!!m.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var H=A.h.lastIndexOf("/");H!=-1&&(w=A.h.slice(0,H+1)+w)}if(H=w,H==".."||H==".")w="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){w=H.lastIndexOf("/",0)==0,H=H.split("/");const X=[];for(let ye=0;ye<H.length;){const Le=H[ye++];Le=="."?w&&ye==H.length&&X.push(""):Le==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),w&&ye==H.length&&X.push("")):(X.push(Le),w=!0)}w=X.join("/")}else w=H}return x?A.h=w:x=m.i.toString()!=="",x?ll(A,Gu(m.i)):x=!!m.m,x&&(A.m=m.m),A};function qt(m){return new Vn(m)}function Wt(m,A,x){m.j=x?Vi(A,!0):A,m.j&&(m.j=m.j.replace(/:$/,""))}function Fs(m,A){if(A){if(A=Number(A),isNaN(A)||A<0)throw Error("Bad port number "+A);m.u=A}else m.u=null}function ll(m,A,x){A instanceof Hs?(m.i=A,Oo(m.i,m.l)):(x||(A=Gr(A,zs)),m.i=new Hs(A,m.l))}function lt(m,A,x){m.i.set(A,x)}function Hr(m){return lt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Vi(m,A){return m?A?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Gr(m,A,x){return typeof m=="string"?(m=encodeURI(m).replace(A,bn),x&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function bn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Uo=/[#\/\?@]/g,Fu=/[#\?:]/g,ul=/[#\?]/g,zs=/[#\?@]/g,zu=/#/g;function Hs(m,A){this.h=this.g=null,this.i=m||null,this.j=!!A}function xn(m){m.g||(m.g=new Map,m.h=0,m.i&&ko(m.i,function(A,x){m.add(decodeURIComponent(A.replace(/\+/g," ")),x)}))}n=Hs.prototype,n.add=function(m,A){xn(this),this.i=null,m=Gs(this,m);let x=this.g.get(m);return x||this.g.set(m,x=[]),x.push(A),this.h+=1,this};function Hu(m,A){xn(m),A=Gs(m,A),m.g.has(A)&&(m.i=null,m.h-=m.g.get(A).length,m.g.delete(A))}function cl(m,A){return xn(m),A=Gs(m,A),m.g.has(A)}n.forEach=function(m,A){xn(this),this.g.forEach(function(x,w){x.forEach(function(H){m.call(A,H,w,this)},this)},this)};function dl(m,A){xn(m);let x=[];if(typeof A=="string")cl(m,A)&&(x=x.concat(m.g.get(Gs(m,A))));else for(m=Array.from(m.g.values()),A=0;A<m.length;A++)x=x.concat(m[A]);return x}n.set=function(m,A){return xn(this),this.i=null,m=Gs(this,m),cl(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[A]),this.h+=1,this},n.get=function(m,A){return m?(m=dl(this,m),m.length>0?String(m[0]):A):A};function Lo(m,A,x){Hu(m,A),x.length>0&&(m.i=null,m.g.set(Gs(m,A),I(x)),m.h+=x.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],A=Array.from(this.g.keys());for(let w=0;w<A.length;w++){var x=A[w];const H=es(x);x=dl(this,x);for(let X=0;X<x.length;X++){let ye=H;x[X]!==""&&(ye+="="+es(x[X])),m.push(ye)}}return this.i=m.join("&")};function Gu(m){const A=new Hs;return A.i=m.i,m.g&&(A.g=new Map(m.g),A.h=m.h),A}function Gs(m,A){return A=String(A),m.j&&(A=A.toLowerCase()),A}function Oo(m,A){A&&!m.j&&(xn(m),m.i=null,m.g.forEach(function(x,w){const H=w.toLowerCase();w!=H&&(Hu(this,w),Lo(this,H,x))},m)),m.j=A}function ui(m,A){const x=new oi;if(c.Image){const w=new Image;w.onload=T(jn,x,"TestLoadImage: loaded",!0,A,w),w.onerror=T(jn,x,"TestLoadImage: error",!1,A,w),w.onabort=T(jn,x,"TestLoadImage: abort",!1,A,w),w.ontimeout=T(jn,x,"TestLoadImage: timeout",!1,A,w),c.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=m}else A(!1)}function fl(m,A){const x=new oi,w=new AbortController,H=setTimeout(()=>{w.abort(),jn(x,"TestPingServer: timeout",!1,A)},1e4);fetch(m,{signal:w.signal}).then(X=>{clearTimeout(H),X.ok?jn(x,"TestPingServer: ok",!0,A):jn(x,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(H),jn(x,"TestPingServer: error",!1,A)})}function jn(m,A,x,w,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),w(x)}catch{}}function js(){this.g=new Or}function ki(m){this.i=m.Sb||null,this.h=m.ab||!1}E(ki,qr),ki.prototype.g=function(){return new jr(this.i,this.h)};function jr(m,A){xt.call(this),this.H=m,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(jr,xt),n=jr.prototype,n.open=function(m,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=A,this.readyState=1,ci(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const A={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(A.body=m),(this.H||c).fetch(new Request(this.D,A)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ys(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,ci(this)),this.g&&(this.readyState=3,ci(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;qo(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function qo(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var A=m.value?m.value:new Uint8Array(0);(A=this.B.decode(A,{stream:!m.done}))&&(this.response=this.responseText+=A)}m.done?Ys(this):ci(this),this.readyState==3&&qo(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,Ys(this))},n.Na=function(m){this.g&&(this.response=m,Ys(this))},n.ga=function(){this.g&&Ys(this)};function Ys(m){m.readyState=4,m.l=null,m.j=null,m.B=null,ci(m)}n.setRequestHeader=function(m,A){this.A.append(m,A)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],A=this.h.entries();for(var x=A.next();!x.done;)x=x.value,m.push(x[0]+": "+x[1]),x=A.next();return m.join(`\r
`)};function ci(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(jr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Yn(m){let A="";return Fe(m,function(x,w){A+=w,A+=":",A+=x,A+=`\r
`}),A}function Yr(m,A,x){e:{for(w in x){var w=!1;break e}w=!0}w||(x=Yn(x),typeof m=="string"?x!=null&&es(x):lt(m,A,x))}function dt(m){xt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(dt,xt);var Ui=/^https?$/i,hl=["POST","PUT"];n=dt.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,A,x,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);A=A?A.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():nl.g(),this.g.onreadystatechange=S(h(this.Ca,this));try{this.B=!0,this.g.open(A,String(m),!0),this.B=!1}catch(X){Jr(this,X);return}if(m=x||"",x=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var H in w)x.set(H,w[H]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const X of w.keys())x.set(X,w.get(X));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(x.keys()).find(X=>X.toLowerCase()=="content-type"),H=c.FormData&&m instanceof c.FormData,!(Array.prototype.indexOf.call(hl,A,void 0)>=0)||w||H||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ye]of x)this.g.setRequestHeader(X,ye);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(X){Jr(this,X)}};function Jr(m,A){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=A,m.o=5,ml(m),ts(m)}function ml(m){m.A||(m.A=!0,It(m,"complete"),It(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,It(this,"complete"),It(this,"abort"),ts(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ts(this,!0)),dt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Kr(this):this.Xa())},n.Xa=function(){Kr(this)};function Kr(m){if(m.h&&typeof l<"u"){if(m.v&&di(m)==4)setTimeout(m.Ca.bind(m),0);else if(It(m,"readystatechange"),di(m)==4){m.h=!1;try{const X=m.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var x;if(!(x=A)){var w;if(w=X===0){let ye=String(m.D).match(Bu)[1]||null;!ye&&c.self&&c.self.location&&(ye=c.self.location.protocol.slice(0,-1)),w=!Ui.test(ye?ye.toLowerCase():"")}x=w}if(x)It(m,"complete"),It(m,"success");else{m.o=6;try{var H=di(m)>2?m.g.statusText:""}catch{H=""}m.l=H+" ["+m.ca()+"]",ml(m)}}finally{ts(m)}}}}function ts(m,A){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const x=m.g;m.g=null,A||It(m,"ready");try{x.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function di(m){return m.g?m.g.readyState:0}n.ca=function(){try{return di(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var A=this.g.responseText;return m&&A.indexOf(m)==0&&(A=A.substring(m.length)),gt(A)}};function sn(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function ns(m){const A={};m=(m.g&&di(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<m.length;w++){if(D(m[w]))continue;var x=Lu(m[w]);const H=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const X=A[H]||[];A[H]=X,X.push(x)}Qe(A,function(w){return w.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Li(m,A,x){return x&&x.internalChannelParams&&x.internalChannelParams[m]||A}function Js(m){this.za=0,this.i=[],this.j=new oi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Li("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Li("baseRetryDelayMs",5e3,m),this.Za=Li("retryDelaySeedMs",1e4,m),this.Ta=Li("forwardChannelMaxRetries",2,m),this.va=Li("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new il(m&&m.concurrentRequestLimit),this.Ba=new js,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Js.prototype,n.ka=8,n.I=1,n.connect=function(m,A,x,w){Ut(0),this.W=m,this.H=A||{},x&&w!==void 0&&(this.H.OSID=x,this.H.OAID=w),this.F=this.X,this.J=Xu(this,null,this.W),Oi(this)};function pl(m){if(Bo(m),m.I==3){var A=m.V++,x=qt(m.J);if(lt(x,"SID",m.M),lt(x,"RID",A),lt(x,"TYPE","terminate"),$r(m,x),A=new ai(m,m.j,A),A.M=2,A.A=Hr(qt(x)),x=!1,c.navigator&&c.navigator.sendBeacon)try{x=c.navigator.sendBeacon(A.A.toString(),"")}catch{}!x&&c.Image&&(new Image().src=A.A,x=!0),x||(A.g=Wu(A.j,null),A.g.ea(A.A)),A.F=Date.now(),Ri(A)}Qu(m)}function Ks(m){m.g&&(yl(m),m.g.cancel(),m.g=null)}function Bo(m){Ks(m),m.v&&(c.clearTimeout(m.v),m.v=null),zo(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&c.clearTimeout(m.m),m.m=null)}function Oi(m){if(!sl(m.h)&&!m.m){m.m=!0;var A=m.Ea;ae||M(),Z||(ae(),Z=!0),R.add(A,m),m.D=0}}function Fo(m,A){return Di(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=A.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Ci(h(m.Ea,m,A),$u(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const H=new ai(this,this.j,m);let X=this.o;if(this.U&&(X?(X=O(X),he(X,this.U)):X=this.U),this.u!==null||this.R||(H.J=X,X=null),this.S)e:{for(var A=0,x=0;x<this.i.length;x++){t:{var w=this.i[x];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(A+=w,A>4096){A=x;break e}if(A===4096||x===this.i.length-1){A=x+1;break e}}A=1e3}else A=1e3;A=ju(this,H,A),x=qt(this.J),lt(x,"RID",m),lt(x,"CVER",22),this.G&&lt(x,"X-HTTP-Session-Id",this.G),$r(this,x),X&&(this.R?A="headers="+es(Yn(X))+"&"+A:this.u&&Yr(x,this.u,X)),rl(this.h,H),this.Ra&&lt(x,"TYPE","init"),this.S?(lt(x,"$req",A),lt(x,"SID","null"),H.U=!0,wi(H,x,null)):wi(H,x,A),this.I=2}}else this.I==3&&(m?gl(this,m):this.i.length==0||sl(this.h)||gl(this))};function gl(m,A){var x;A?x=A.l:x=m.V++;const w=qt(m.J);lt(w,"SID",m.M),lt(w,"RID",x),lt(w,"AID",m.K),$r(m,w),m.u&&m.o&&Yr(w,m.u,m.o),x=new ai(m,m.j,x,m.D+1),m.u===null&&(x.J=m.o),A&&(m.i=A.G.concat(m.i)),A=ju(m,x,1e3),x.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),rl(m.h,x),wi(x,w,A)}function $r(m,A){m.H&&Fe(m.H,function(x,w){lt(A,w,x)}),m.l&&Fe({},function(x,w){lt(A,w,x)})}function ju(m,A,x){x=Math.min(m.i.length,x);const w=m.l?h(m.l.Ka,m.l,m):null;e:{var H=m.i;let Le=-1;for(;;){const Mt=["count="+x];Le==-1?x>0?(Le=H[0].g,Mt.push("ofs="+Le)):Le=0:Mt.push("ofs="+Le);let rt=!0;for(let At=0;At<x;At++){var X=H[At].g;const Jn=H[At].map;if(X-=Le,X<0)Le=Math.max(0,H[At].g-100),rt=!1;else try{X="req"+X+"_"||"";try{var ye=Jn instanceof Map?Jn:Object.entries(Jn);for(const[Bi,fi]of ye){let hi=fi;d(fi)&&(hi=De(fi)),Mt.push(X+Bi+"="+encodeURIComponent(hi))}}catch(Bi){throw Mt.push(X+"type="+encodeURIComponent("_badmap")),Bi}}catch{w&&w(Jn)}}if(rt){ye=Mt.join("&");break e}}ye=void 0}return m=m.i.splice(0,x),A.G=m,ye}function Yu(m){if(!m.g&&!m.v){m.Y=1;var A=m.Da;ae||M(),Z||(ae(),Z=!0),R.add(A,m),m.A=0}}function Qr(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Ci(h(m.Da,m),$u(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,Ju(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Ci(h(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ut(10),Ks(this),Ju(this))};function yl(m){m.B!=null&&(c.clearTimeout(m.B),m.B=null)}function Ju(m){m.g=new ai(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var A=qt(m.na);lt(A,"RID","rpc"),lt(A,"SID",m.M),lt(A,"AID",m.K),lt(A,"CI",m.F?"0":"1"),!m.F&&m.ia&&lt(A,"TO",m.ia),lt(A,"TYPE","xmlhttp"),$r(m,A),m.u&&m.o&&Yr(A,m.u,m.o),m.O&&(m.g.H=m.O);var x=m.g;m=m.ba,x.M=1,x.A=Hr(qt(A)),x.u=null,x.R=!0,Po(x,m)}n.Va=function(){this.C!=null&&(this.C=null,Ks(this),Qr(this),Ut(19))};function zo(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function Ku(m,A){var x=null;if(m.g==A){zo(m),yl(m),m.g=null;var w=2}else if(Pi(m.h,A))x=A.G,ol(m.h,A),w=1;else return;if(m.I!=0){if(A.o)if(w==1){x=A.u?A.u.length:0,A=Date.now()-A.F;var H=m.D;w=yn(),It(w,new xi(w,x)),Oi(m)}else Yu(m);else if(H=A.m,H==3||H==0&&A.X>0||!(w==1&&Fo(m,A)||w==2&&Qr(m)))switch(x&&x.length>0&&(A=m.h,A.i=A.i.concat(x)),H){case 1:qi(m,5);break;case 4:qi(m,10);break;case 3:qi(m,6);break;default:qi(m,2)}}}function $u(m,A){let x=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(x*=2),x*A}function qi(m,A){if(m.j.info("Error code "+A),A==2){var x=h(m.bb,m),w=m.Ua;const H=!w;w=new Vn(w||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Wt(w,"https"),Hr(w),H?ui(w.toString(),x):fl(w.toString(),x)}else Ut(2);m.I=0,m.l&&m.l.pa(A),Qu(m),Bo(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function Qu(m){if(m.I=0,m.ja=[],m.l){const A=al(m.h);(A.length!=0||m.i.length!=0)&&(V(m.ja,A),V(m.ja,m.i),m.h.i.length=0,I(m.i),m.i.length=0),m.l.oa()}}function Xu(m,A,x){var w=x instanceof Vn?qt(x):new Vn(x);if(w.g!="")A&&(w.g=A+"."+w.g),Fs(w,w.u);else{var H=c.location;w=H.protocol,A=A?A+"."+H.hostname:H.hostname,H=+H.port;const X=new Vn(null);w&&Wt(X,w),A&&(X.g=A),H&&Fs(X,H),x&&(X.h=x),w=X}return x=m.G,A=m.wa,x&&A&&lt(w,x,A),lt(w,"VER",m.ka),$r(m,w),w}function Wu(m,A,x){if(A&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return A=m.Aa&&!m.ma?new dt(new ki({ab:x})):new dt(m.ma),A.Fa(m.L),A}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zu(){}n=Zu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function $s(){}$s.prototype.g=function(m,A){return new vn(m,A)};function vn(m,A){xt.call(this),this.g=new Js(A),this.l=m,this.h=A&&A.messageUrlParams||null,m=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(m?m["X-WebChannel-Content-Type"]=A.messageContentType:m={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.sa&&(m?m["X-WebChannel-Client-Profile"]=A.sa:m={"X-WebChannel-Client-Profile":A.sa}),this.g.U=m,(m=A&&A.Qb)&&!D(m)&&(this.g.u=m),this.A=A&&A.supportsCrossDomainXhr||!1,this.v=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!D(A)&&(this.g.G=A,m=this.h,m!==null&&A in m&&(m=this.h,A in m&&delete m[A])),this.j=new is(this)}E(vn,xt),vn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){pl(this.g)},vn.prototype.o=function(m){var A=this.g;if(typeof m=="string"){var x={};x.__data__=m,m=x}else this.v&&(x={},x.__data__=De(m),m=x);A.i.push(new Ot(A.Ya++,m)),A.I==3&&Oi(A)},vn.prototype.N=function(){this.g.l=null,delete this.j,pl(this.g),delete this.g,vn.Z.N.call(this)};function ec(m){Jt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var A=m.__sm__;if(A){e:{for(const x in A){m=x;break e}m=void 0}(this.i=m)&&(m=this.i,A=A!==null&&m in A?A[m]:void 0),this.data=A}else this.data=m}E(ec,Jt);function tc(){Sn.call(this),this.status=1}E(tc,Sn);function is(m){this.g=m}E(is,Zu),is.prototype.ra=function(){It(this.g,"a")},is.prototype.qa=function(m){It(this.g,new ec(m))},is.prototype.pa=function(m){It(this.g,new tc)},is.prototype.oa=function(){It(this.g,"b")},$s.prototype.createWebChannel=$s.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,LA=function(){return new $s},UA=function(){return yn()},kA=ge,np={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fr.NO_ERROR=0,Fr.TIMEOUT=8,Fr.HTTP_ERROR=6,pd=Fr,tl.COMPLETE="complete",VA=tl,Do.EventType=Dn,Dn.OPEN="a",Dn.CLOSE="b",Dn.ERROR="c",Dn.MESSAGE="d",xt.prototype.listen=xt.prototype.J,ou=Do,dt.prototype.listenOnce=dt.prototype.K,dt.prototype.getLastError=dt.prototype.Ha,dt.prototype.getLastErrorCode=dt.prototype.ya,dt.prototype.getStatus=dt.prototype.ca,dt.prototype.getResponseJson=dt.prototype.La,dt.prototype.getResponseText=dt.prototype.la,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Fa,PA=dt}).apply(typeof od<"u"?od:typeof self<"u"?self:typeof window<"u"?window:{});const ST="@firebase/firestore",bT="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qa="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=new Np("@firebase/firestore");function va(){return To.logLevel}function Te(n,...e){if(To.logLevel<=Ye.DEBUG){const t=e.map(Pp);To.debug(`Firestore (${Qa}): ${n}`,...t)}}function Ds(n,...e){if(To.logLevel<=Ye.ERROR){const t=e.map(Pp);To.error(`Firestore (${Qa}): ${n}`,...t)}}function Eo(n,...e){if(To.logLevel<=Ye.WARN){const t=e.map(Pp);To.warn(`Firestore (${Qa}): ${n}`,...t)}}function Pp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,OA(n,s,t)}function OA(n,e,t){let s=`FIRESTORE (${Qa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Ds(s),new Error(s)}function at(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||OA(e,o,s)}function ke(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends Ls{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(hn.UNAUTHENTICATED)))}shutdown(){}}class A2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class S2{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){at(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new ws;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ws,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ws)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(at(typeof s.accessToken=="string",31837,{l:s}),new qA(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return at(e===null||typeof e=="string",2055,{h:e}),new hn(e)}}class b2{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class x2{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new b2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(hn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class xT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class C2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ni(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){at(this.o===void 0,3512);const s=l=>{l.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Te("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new xT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(at(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new xT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=I2(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Je(n,e){return n<e?-1:n>e?1:0}function ip(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const o=n.charAt(s),l=e.charAt(s);if(o!==l)return Nm(o)===Nm(l)?Je(o,l):Nm(o)?1:-1}return Je(n.length,e.length)}const w2=55296,R2=57343;function Nm(n){const e=n.charCodeAt(0);return e>=w2&&e<=R2}function ka(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="__name__";class ji{constructor(e,t,s){t===void 0?t=0:t>e.length&&Me(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Me(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return ji.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ji?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=ji.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Je(e.length,t.length)}static compareSegments(e,t){const s=ji.isNumericId(e),o=ji.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?ji.extractNumericId(e).compare(ji.extractNumericId(t)):ip(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return br.fromString(e.substring(4,e.length-2))}}class Et extends ji{construct(e,t,s){return new Et(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new be(ue.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new Et(t)}static emptyPath(){return new Et([])}}const N2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends ji{construct(e,t,s){return new tn(e,t,s)}static isValidIdentifier(e){return N2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===CT}static keyField(){return new tn([CT])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new be(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new be(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new be(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(s+=d,o++):(l(),o++)}if(l(),c)throw new be(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(t)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(Et.fromString(e))}static fromName(e){return new we(Et.fromString(e).popFirst(5))}static empty(){return new we(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new Et(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(n,e,t){if(!t)throw new be(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function zA(n,e,t,s){if(e===!0&&s===!0)throw new be(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function IT(n){if(!we.isDocumentKey(n))throw new be(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function wT(n){if(we.isDocumentKey(n))throw new be(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function HA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Vp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Me(12329,{type:typeof n})}function Ps(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new be(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Vp(n);throw new be(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Cu(n,e){if(!HA(n))throw new be(ue.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(o&&typeof c!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new be(ue.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=-62135596800,NT=1e6;class yt{static now(){return yt.fromMillis(Date.now())}static fromDate(e){return yt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*NT);return new yt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new be(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new be(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<RT)throw new be(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/NT}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:yt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Cu(e,yt._jsonSchema))return new yt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-RT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}yt._jsonSchemaVersion="firestore/timestamp/1.0",yt._jsonSchema={type:jt("string",yt._jsonSchemaVersion),seconds:jt("number"),nanoseconds:jt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new yt(0,0))}static max(){return new Pe(new yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=-1;function M2(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=Pe.fromTimestamp(s===1e9?new yt(t+1,0):new yt(t,s));return new Cr(o,we.empty(),e)}function D2(n){return new Cr(n.readTime,n.key,_u)}class Cr{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Cr(Pe.min(),we.empty(),_u)}static max(){return new Cr(Pe.max(),we.empty(),_u)}}function P2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(n.documentKey,e.documentKey),t!==0?t:Je(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class k2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xa(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==V2)throw n;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):le.reject(t)}static resolve(e){return new le(((t,s)=>{t(e)}))}static reject(e){return new le(((t,s)=>{s(e)}))}static waitFor(e){return new le(((t,s)=>{let o=0,l=0,c=!1;e.forEach((d=>{++o,d.next((()=>{++l,c&&l===o&&t()}),(p=>s(p)))})),c=!0,l===o&&t()}))}static or(e){let t=le.resolve(!1);for(const s of e)t=t.next((o=>o?le.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new le(((s,o)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const h=p;t(e[h]).next((T=>{c[h]=T,++d,d===l&&s(c)}),(T=>o(T)))}}))}static doWhile(e,t){return new le(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function U2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Wa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ef.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp=-1;function tf(n){return n==null}function Nd(n){return n===0&&1/n==-1/0}function L2(n){return typeof n=="number"&&Number.isInteger(n)&&!Nd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA="";function O2(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=MT(e)),e=q2(n.get(t),e);return MT(e)}function q2(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case GA:t+="";break;default:t+=l}}return t}function MT(n){return n+GA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function xo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,t){this.comparator=e,this.root=t||un.EMPTY}insert(e,t){return new Ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,un.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,un.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ad(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ad(this.root,e,this.comparator,!1)}getReverseIterator(){return new ad(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ad(this.root,e,this.comparator,!0)}}class ad{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class un{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??un.RED,this.left=o??un.EMPTY,this.right=l??un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new un(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return un.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Me(27949);return e+(this.isRed()?0:1)}}un.EMPTY=null,un.RED=!0,un.BLACK=!1;un.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new un(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new PT(this.data.getIterator())}getIteratorFrom(e){return new PT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Qt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Qt(this.comparator);return t.data=e,t}}class PT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new _i([])}unionWith(e){let t=new Qt(tn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new _i(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ka(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new YA("Invalid base64 string: "+l):l}})(e);return new nn(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const B2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ir(n){if(at(!!n,39018),typeof n=="string"){let e=0;const t=B2.exec(n);if(at(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Vt(n.seconds),nanos:Vt(n.nanos)}}function Vt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function wr(n){return typeof n=="string"?nn.fromBase64String(n):nn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="server_timestamp",KA="__type__",$A="__previous_value__",QA="__local_write_time__";function Up(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[KA])==null?void 0:s.stringValue)===JA}function nf(n){const e=n.mapValue.fields[$A];return Up(e)?nf(e):e}function vu(n){const e=Ir(n.mapValue.fields[QA].timestampValue);return new yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,t,s,o,l,c,d,p,h,T){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=h,this.isUsingEmulator=T}}const Md="(default)";class Ua{constructor(e,t){this.projectId=e,this.database=t||Md}static empty(){return new Ua("","")}get isDefaultDatabase(){return this.database===Md}isEqual(e){return e instanceof Ua&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="__type__",z2="__max__",ld={mapValue:{}},WA="__vector__",Dd="value";function Rr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Up(n)?4:G2(n)?9007199254740991:H2(n)?10:11:Me(28295,{value:n})}function Xi(n,e){if(n===e)return!0;const t=Rr(n);if(t!==Rr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vu(n).isEqual(vu(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Ir(o.timestampValue),d=Ir(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return wr(o.bytesValue).isEqual(wr(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return Vt(o.geoPointValue.latitude)===Vt(l.geoPointValue.latitude)&&Vt(o.geoPointValue.longitude)===Vt(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Vt(o.integerValue)===Vt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=Vt(o.doubleValue),d=Vt(l.doubleValue);return c===d?Nd(c)===Nd(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return ka(n.arrayValue.values||[],e.arrayValue.values||[],Xi);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},d=l.mapValue.fields||{};if(DT(c)!==DT(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Xi(c[p],d[p])))return!1;return!0})(n,e);default:return Me(52216,{left:n})}}function Tu(n,e){return(n.values||[]).find((t=>Xi(t,e)))!==void 0}function La(n,e){if(n===e)return 0;const t=Rr(n),s=Rr(e);if(t!==s)return Je(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Je(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=Vt(l.integerValue||l.doubleValue),p=Vt(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return VT(n.timestampValue,e.timestampValue);case 4:return VT(vu(n),vu(e));case 5:return ip(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=wr(l),p=wr(c);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let h=0;h<d.length&&h<p.length;h++){const T=Je(d[h],p[h]);if(T!==0)return T}return Je(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Je(Vt(l.latitude),Vt(c.latitude));return d!==0?d:Je(Vt(l.longitude),Vt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return kT(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var S,I,V,B;const d=l.fields||{},p=c.fields||{},h=(S=d[Dd])==null?void 0:S.arrayValue,T=(I=p[Dd])==null?void 0:I.arrayValue,E=Je(((V=h==null?void 0:h.values)==null?void 0:V.length)||0,((B=T==null?void 0:T.values)==null?void 0:B.length)||0);return E!==0?E:kT(h,T)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===ld.mapValue&&c===ld.mapValue)return 0;if(l===ld.mapValue)return 1;if(c===ld.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),h=c.fields||{},T=Object.keys(h);p.sort(),T.sort();for(let E=0;E<p.length&&E<T.length;++E){const S=ip(p[E],T[E]);if(S!==0)return S;const I=La(d[p[E]],h[T[E]]);if(I!==0)return I}return Je(p.length,T.length)})(n.mapValue,e.mapValue);default:throw Me(23264,{he:t})}}function VT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Je(n,e);const t=Ir(n),s=Ir(e),o=Je(t.seconds,s.seconds);return o!==0?o:Je(t.nanos,s.nanos)}function kT(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=La(t[o],s[o]);if(l)return l}return Je(t.length,s.length)}function Oa(n){return sp(n)}function sp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Ir(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return wr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return we.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=sp(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of s)l?l=!1:o+=",",o+=`${c}:${sp(t.fields[c])}`;return o+"}"})(n.mapValue):Me(61005,{value:n})}function gd(n){switch(Rr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=nf(n);return e?16+gd(e):16;case 5:return 2*n.stringValue.length;case 6:return wr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+gd(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let o=0;return xo(s.fields,((l,c)=>{o+=l.length+gd(c)})),o})(n.mapValue);default:throw Me(13486,{value:n})}}function rp(n){return!!n&&"integerValue"in n}function Lp(n){return!!n&&"arrayValue"in n}function UT(n){return!!n&&"nullValue"in n}function LT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yd(n){return!!n&&"mapValue"in n}function H2(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[XA])==null?void 0:s.stringValue)===WA}function du(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return xo(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=du(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=du(n.arrayValue.values[t]);return e}return{...n}}function G2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===z2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.value=e}static empty(){return new ii({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!yd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=du(t)}setAll(e){let t=tn.emptyPath(),s={},o=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,s,o),s={},o=[],t=d.popLast()}c?s[d.lastSegment()]=du(c):o.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());yd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];yd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){xo(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new ii(du(this.value))}}function ZA(n){const e=[];return xo(n.fields,((t,s)=>{const o=new tn([t]);if(yd(s)){const l=ZA(s.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new _i(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,t,s,o,l,c,d){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new mn(e,0,Pe.min(),Pe.min(),Pe.min(),ii.empty(),0)}static newFoundDocument(e,t,s,o){return new mn(e,1,t,Pe.min(),s,o,0)}static newNoDocument(e,t){return new mn(e,2,t,Pe.min(),Pe.min(),ii.empty(),0)}static newUnknownDocument(e,t){return new mn(e,3,t,Pe.min(),Pe.min(),ii.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ii.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ii.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,t){this.position=e,this.inclusive=t}}function OT(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?s=we.comparator(we.fromName(c.referenceValue),t.key):s=La(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function qT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Xi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,t="asc"){this.field=e,this.dir=t}}function j2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{}class $t extends eS{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new J2(e,t,s):t==="array-contains"?new Q2(e,s):t==="in"?new X2(e,s):t==="not-in"?new W2(e,s):t==="array-contains-any"?new Z2(e,s):new $t(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new K2(e,s):new $2(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(La(t,this.value)):t!==null&&Rr(this.value)===Rr(t)&&this.matchesComparison(La(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wi extends eS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Wi(e,t)}matches(e){return tS(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function tS(n){return n.op==="and"}function nS(n){return Y2(n)&&tS(n)}function Y2(n){for(const e of n.filters)if(e instanceof Wi)return!1;return!0}function op(n){if(n instanceof $t)return n.field.canonicalString()+n.op.toString()+Oa(n.value);if(nS(n))return n.filters.map((e=>op(e))).join(",");{const e=n.filters.map((t=>op(t))).join(",");return`${n.op}(${e})`}}function iS(n,e){return n instanceof $t?(function(s,o){return o instanceof $t&&s.op===o.op&&s.field.isEqual(o.field)&&Xi(s.value,o.value)})(n,e):n instanceof Wi?(function(s,o){return o instanceof Wi&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,c,d)=>l&&iS(c,o.filters[d])),!0):!1})(n,e):void Me(19439)}function sS(n){return n instanceof $t?(function(t){return`${t.field.canonicalString()} ${t.op} ${Oa(t.value)}`})(n):n instanceof Wi?(function(t){return t.op.toString()+" {"+t.getFilters().map(sS).join(" ,")+"}"})(n):"Filter"}class J2 extends $t{constructor(e,t,s){super(e,t,s),this.key=we.fromName(s.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class K2 extends $t{constructor(e,t){super(e,"in",t),this.keys=rS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class $2 extends $t{constructor(e,t){super(e,"not-in",t),this.keys=rS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function rS(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>we.fromName(s.referenceValue)))}class Q2 extends $t{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Lp(t)&&Tu(t.arrayValue,this.value)}}class X2 extends $t{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Tu(this.value.arrayValue,t)}}class W2 extends $t{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Tu(this.value.arrayValue,t)}}class Z2 extends $t{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Lp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Tu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,t=null,s=[],o=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function BT(n,e=null,t=[],s=[],o=null,l=null,c=null){return new eP(n,e,t,s,o,l,c)}function Op(n){const e=ke(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>op(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),tf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Oa(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Oa(s))).join(",")),e.Te=t}return e.Te}function qp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!j2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!iS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!qT(n.startAt,e.startAt)&&qT(n.endAt,e.endAt)}function ap(n){return we.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,t=null,s=[],o=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function tP(n,e,t,s,o,l,c,d){return new sf(n,e,t,s,o,l,c,d)}function Bp(n){return new sf(n)}function FT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function nP(n){return n.collectionGroup!==null}function fu(n){const e=ke(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Qt(tn.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Vd(l,s))})),t.has(tn.keyField().canonicalString())||e.Ie.push(new Vd(tn.keyField(),s))}return e.Ie}function Yi(n){const e=ke(n);return e.Ee||(e.Ee=iP(e,fu(n))),e.Ee}function iP(n,e){if(n.limitType==="F")return BT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Vd(o.field,l)}));const t=n.endAt?new Pd(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Pd(n.startAt.position,n.startAt.inclusive):null;return BT(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function lp(n,e,t){return new sf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function rf(n,e){return qp(Yi(n),Yi(e))&&n.limitType===e.limitType}function oS(n){return`${Op(Yi(n))}|lt:${n.limitType}`}function Ta(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>sS(o))).join(", ")}]`),tf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Oa(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Oa(o))).join(",")),`Target(${s})`})(Yi(n))}; limitType=${n.limitType})`}function of(n,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):we.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,o){for(const l of fu(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(s,o){return!(s.startAt&&!(function(c,d,p){const h=OT(c,d,p);return c.inclusive?h<=0:h<0})(s.startAt,fu(s),o)||s.endAt&&!(function(c,d,p){const h=OT(c,d,p);return c.inclusive?h>=0:h>0})(s.endAt,fu(s),o))})(n,e)}function sP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function aS(n){return(e,t)=>{let s=!1;for(const o of fu(n)){const l=rP(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function rP(n,e,t){const s=n.field.isKeyField()?we.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),h=d.data.field(l);return p!==null&&h!==null?La(p,h):Me(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Me(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){xo(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return jA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=new Ct(we.comparator);function Vs(){return oP}const lS=new Ct(we.comparator);function au(...n){let e=lS;for(const t of n)e=e.insert(t.key,t);return e}function uS(n){let e=lS;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function po(){return hu()}function cS(){return hu()}function hu(){return new Co((n=>n.toString()),((n,e)=>n.isEqual(e)))}const aP=new Ct(we.comparator),lP=new Qt(we.comparator);function Ke(...n){let e=lP;for(const t of n)e=e.add(t);return e}const uP=new Qt(Je);function cP(){return uP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nd(e)?"-0":e}}function dS(n){return{integerValue:""+n}}function dP(n,e){return L2(e)?dS(e):Fp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(){this._=void 0}}function fP(n,e,t){return n instanceof kd?(function(o,l){const c={fields:{[KA]:{stringValue:JA},[QA]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Up(l)&&(l=nf(l)),l&&(c.fields[$A]=l),{mapValue:c}})(t,e):n instanceof Eu?hS(n,e):n instanceof Au?mS(n,e):(function(o,l){const c=fS(o,l),d=zT(c)+zT(o.Ae);return rp(c)&&rp(o.Ae)?dS(d):Fp(o.serializer,d)})(n,e)}function hP(n,e,t){return n instanceof Eu?hS(n,e):n instanceof Au?mS(n,e):t}function fS(n,e){return n instanceof Ud?(function(s){return rp(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class kd extends af{}class Eu extends af{constructor(e){super(),this.elements=e}}function hS(n,e){const t=pS(e);for(const s of n.elements)t.some((o=>Xi(o,s)))||t.push(s);return{arrayValue:{values:t}}}class Au extends af{constructor(e){super(),this.elements=e}}function mS(n,e){let t=pS(e);for(const s of n.elements)t=t.filter((o=>!Xi(o,s)));return{arrayValue:{values:t}}}class Ud extends af{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function zT(n){return Vt(n.integerValue||n.doubleValue)}function pS(n){return Lp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function mP(n,e){return n.field.isEqual(e.field)&&(function(s,o){return s instanceof Eu&&o instanceof Eu||s instanceof Au&&o instanceof Au?ka(s.elements,o.elements,Xi):s instanceof Ud&&o instanceof Ud?Xi(s.Ae,o.Ae):s instanceof kd&&o instanceof kd})(n.transform,e.transform)}class pP{constructor(e,t){this.version=e,this.transformResults=t}}class Ji{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ji}static exists(e){return new Ji(void 0,e)}static updateTime(e){return new Ji(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _d(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class lf{}function gS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new zp(n.key,Ji.none()):new Iu(n.key,n.data,Ji.none());{const t=n.data,s=ii.empty();let o=new Qt(tn.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),o=o.add(l)}return new Io(n.key,s,new _i(o.toArray()),Ji.none())}}function gP(n,e,t){n instanceof Iu?(function(o,l,c){const d=o.value.clone(),p=GT(o.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Io?(function(o,l,c){if(!_d(o.precondition,l))return void l.convertToUnknownDocument(c.version);const d=GT(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(yS(o)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function mu(n,e,t,s){return n instanceof Iu?(function(l,c,d,p){if(!_d(l.precondition,c))return d;const h=l.value.clone(),T=jT(l.fieldTransforms,p,c);return h.setAll(T),c.convertToFoundDocument(c.version,h).setHasLocalMutations(),null})(n,e,t,s):n instanceof Io?(function(l,c,d,p){if(!_d(l.precondition,c))return d;const h=jT(l.fieldTransforms,p,c),T=c.data;return T.setAll(yS(l)),T.setAll(h),c.convertToFoundDocument(c.version,T).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,s):(function(l,c,d){return _d(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function yP(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),l=fS(s.transform,o||null);l!=null&&(t===null&&(t=ii.empty()),t.set(s.field,l))}return t||null}function HT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&ka(s,o,((l,c)=>mP(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Iu extends lf{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Io extends lf{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function yS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function GT(n,e,t){const s=new Map;at(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,d=e.data.field(l.field);s.set(l.field,hP(c,d,t[o]))}return s}function jT(n,e,t){const s=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);s.set(o.field,fP(l,c,e))}return s}class zp extends lf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _P extends lf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&gP(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=mu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=mu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=cS();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(o.key)?null:d;const p=gS(c,d);p!==null&&s.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Pe.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ke())}isEqual(e){return this.batchId===e.batchId&&ka(this.mutations,e.mutations,((t,s)=>HT(t,s)))&&ka(this.baseMutations,e.baseMutations,((t,s)=>HT(t,s)))}}class Hp{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){at(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return aP})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,s[c].version);return new Hp(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt,We;function AP(n){switch(n){case ue.OK:return Me(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Me(15467,{code:n})}}function _S(n){if(n===void 0)return Ds("GRPC error has no .code"),ue.UNKNOWN;switch(n){case Gt.OK:return ue.OK;case Gt.CANCELLED:return ue.CANCELLED;case Gt.UNKNOWN:return ue.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return ue.INTERNAL;case Gt.UNAVAILABLE:return ue.UNAVAILABLE;case Gt.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Gt.NOT_FOUND:return ue.NOT_FOUND;case Gt.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Gt.ABORTED:return ue.ABORTED;case Gt.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Gt.DATA_LOSS:return ue.DATA_LOSS;default:return Me(39323,{code:n})}}(We=Gt||(Gt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP=new br([4294967295,4294967295],0);function YT(n){const e=SP().encode(n),t=new DA;return t.update(e),new Uint8Array(t.digest())}function JT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new br([t,s],0),new br([o,l],0)]}class Gp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new lu(`Invalid padding: ${t}`);if(s<0)throw new lu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new lu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new lu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=br.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(br.fromNumber(s)));return o.compare(bP)===1&&(o=new br([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=YT(e),[s,o]=JT(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Gp(l,o,t);return s.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=YT(e),[s,o]=JT(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class lu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,wu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new uf(Pe.min(),o,new Ct(Je),Vs(),Ke())}}class wu{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new wu(s,t,Ke(),Ke(),Ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class vS{constructor(e,t){this.targetId=e,this.Ce=t}}class TS{constructor(e,t,s=nn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class KT{constructor(){this.ve=0,this.Fe=$T(),this.Me=nn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ke(),t=Ke(),s=Ke();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Me(38017,{changeType:l})}})),new wu(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=$T()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,at(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class xP{constructor(e){this.Ge=e,this.ze=new Map,this.je=Vs(),this.Je=ud(),this.He=ud(),this.Ye=new Ct(Je)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Me(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(ap(l))if(s===0){const c=new we(l.path);this.et(t,c,mn.newNoDocument(c,Pe.min()))}else at(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const h=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let c,d;try{c=wr(s).toUint8Array()}catch(p){if(p instanceof YA)return Eo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Gp(c,o,l)}catch(p){return Eo(p instanceof lu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&ap(d.target)){const p=new we(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,mn.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let s=Ke();this.He.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const h=this.ot(p);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const o=new uf(e,t,this.Ye,this.je,s);return this.je=Vs(),this.Je=ud(),this.He=ud(),this.Ye=new Ct(Je),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new KT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Qt(Je),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Qt(Je),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Te("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new KT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ud(){return new Ct(we.comparator)}function $T(){return new Ct(we.comparator)}const CP={asc:"ASCENDING",desc:"DESCENDING"},IP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wP={and:"AND",or:"OR"};class RP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function up(n,e){return n.useProto3Json||tf(e)?e:{value:e}}function Ld(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ES(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function NP(n,e){return Ld(n,e.toTimestamp())}function Ki(n){return at(!!n,49232),Pe.fromTimestamp((function(t){const s=Ir(t);return new yt(s.seconds,s.nanos)})(n))}function jp(n,e){return cp(n,e).canonicalString()}function cp(n,e){const t=(function(o){return new Et(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function AS(n){const e=Et.fromString(n);return at(IS(e),10190,{key:e.toString()}),e}function dp(n,e){return jp(n.databaseId,e.path)}function Mm(n,e){const t=AS(e);if(t.get(1)!==n.databaseId.projectId)throw new be(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new be(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new we(bS(t))}function SS(n,e){return jp(n.databaseId,e)}function MP(n){const e=AS(n);return e.length===4?Et.emptyPath():bS(e)}function fp(n){return new Et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function bS(n){return at(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function QT(n,e,t){return{name:dp(n,e),fields:t.value.mapValue.fields}}function DP(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Me(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(h,T){return h.useProto3Json?(at(T===void 0||typeof T=="string",58123),nn.fromBase64String(T||"")):(at(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),nn.fromUint8Array(T||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(h){const T=h.code===void 0?ue.UNKNOWN:_S(h.code);return new be(T,h.message||"")})(c);t=new TS(s,o,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Mm(n,s.document.name),l=Ki(s.document.updateTime),c=s.document.createTime?Ki(s.document.createTime):Pe.min(),d=new ii({mapValue:{fields:s.document.fields}}),p=mn.newFoundDocument(o,l,c,d),h=s.targetIds||[],T=s.removedTargetIds||[];t=new vd(h,T,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Mm(n,s.document),l=s.readTime?Ki(s.readTime):Pe.min(),c=mn.newNoDocument(o,l),d=s.removedTargetIds||[];t=new vd([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Mm(n,s.document),l=s.removedTargetIds||[];t=new vd([],l,o,null)}else{if(!("filter"in e))return Me(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,c=new EP(o,l),d=s.targetId;t=new vS(d,c)}}return t}function PP(n,e){let t;if(e instanceof Iu)t={update:QT(n,e.key,e.value)};else if(e instanceof zp)t={delete:dp(n,e.key)};else if(e instanceof Io)t={update:QT(n,e.key,e.data),updateMask:zP(e.fieldMask)};else{if(!(e instanceof _P))return Me(16599,{Vt:e.type});t={verify:dp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const d=c.transform;if(d instanceof kd)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Eu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Au)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Ud)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Me(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:NP(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Me(27497)})(n,e.precondition)),t}function VP(n,e){return n&&n.length>0?(at(e!==void 0,14353),n.map((t=>(function(o,l){let c=o.updateTime?Ki(o.updateTime):Ki(l);return c.isEqual(Pe.min())&&(c=Ki(l)),new pP(c,o.transformResults||[])})(t,e)))):[]}function kP(n,e){return{documents:[SS(n,e.path)]}}function UP(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=SS(n,o);const l=(function(h){if(h.length!==0)return CS(Wi.create(h,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(h){if(h.length!==0)return h.map((T=>(function(S){return{field:Ea(S.field),direction:qP(S.dir)}})(T)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=up(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:o}}function LP(n){let e=MP(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){at(s===1,65062);const T=t.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let l=[];t.where&&(l=(function(E){const S=xS(E);return S instanceof Wi&&nS(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((S=>(function(V){return new Vd(Aa(V.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,tf(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(E){const S=!!E.before,I=E.values||[];return new Pd(I,S)})(t.startAt));let h=null;return t.endAt&&(h=(function(E){const S=!E.before,I=E.values||[];return new Pd(I,S)})(t.endAt)),tP(e,o,c,l,d,"F",p,h)}function OP(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function xS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Aa(t.unaryFilter.field);return $t.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Aa(t.unaryFilter.field);return $t.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Aa(t.unaryFilter.field);return $t.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Aa(t.unaryFilter.field);return $t.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}})(n):n.fieldFilter!==void 0?(function(t){return $t.create(Aa(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Wi.create(t.compositeFilter.filters.map((s=>xS(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Me(1026)}})(t.compositeFilter.op))})(n):Me(30097,{filter:n})}function qP(n){return CP[n]}function BP(n){return IP[n]}function FP(n){return wP[n]}function Ea(n){return{fieldPath:n.canonicalString()}}function Aa(n){return tn.fromServerFormat(n.fieldPath)}function CS(n){return n instanceof $t?(function(t){if(t.op==="=="){if(LT(t.value))return{unaryFilter:{field:Ea(t.field),op:"IS_NAN"}};if(UT(t.value))return{unaryFilter:{field:Ea(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(LT(t.value))return{unaryFilter:{field:Ea(t.field),op:"IS_NOT_NAN"}};if(UT(t.value))return{unaryFilter:{field:Ea(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ea(t.field),op:BP(t.op),value:t.value}}})(n):n instanceof Wi?(function(t){const s=t.getFilters().map((o=>CS(o)));return s.length===1?s[0]:{compositeFilter:{op:FP(t.op),filters:s}}})(n):Me(54877,{filter:n})}function zP(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function IS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,t,s,o,l=Pe.min(),c=Pe.min(),d=nn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Tr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e){this.yt=e}}function GP(n){const e=LP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?lp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(){this.Cn=new YP}addToCollectionParentIndex(e,t){return this.Cn.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(Cr.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(Cr.min())}updateCollectionGroup(e,t,s){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class YP{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Qt(Et.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Qt(Et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wS=41943040;class Mn{static withCacheSize(e){return new Mn(e,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mn.DEFAULT_COLLECTION_PERCENTILE=10,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mn.DEFAULT=new Mn(wS,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mn.DISABLED=new Mn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new qa(0)}static cr(){return new qa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="LruGarbageCollector",JP=1048576;function ZT([n,e],[t,s]){const o=Je(n,t);return o===0?Je(e,s):o}class KP{constructor(e){this.Ir=e,this.buffer=new Qt(ZT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();ZT(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $P{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Te(WT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Wa(t)?Te(WT,"Ignoring IndexedDB error during garbage collection: ",t):await Xa(t)}await this.Vr(3e5)}))}}class QP{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return le.resolve(ef.ce);const s=new KP(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(XT)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),XT):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,c,d,p,h;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,d=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(h=Date.now(),va()<=Ye.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-T}ms
	Determined least recently used ${o} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(h-p)+`ms
Total Duration: ${h-T}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function XP(n,e){return new QP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(){this.changes=new Co((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?le.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&mu(s.mutation,o,_i.empty(),yt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Ke()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Ke()){const o=po();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let c=au();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=po();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Ke())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,s,o){let l=Vs();const c=hu(),d=(function(){return hu()})();return t.forEach(((p,h)=>{const T=s.get(h.key);o.has(h.key)&&(T===void 0||T.mutation instanceof Io)?l=l.insert(h.key,h):T!==void 0?(c.set(h.key,T.mutation.getFieldMask()),mu(T.mutation,h,T.mutation.getFieldMask(),yt.now())):c.set(h.key,_i.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((h,T)=>c.set(h,T))),t.forEach(((h,T)=>d.set(h,new ZP(T,c.get(h)??null)))),d)))}recalculateAndSaveOverlays(e,t){const s=hu();let o=new Ct(((c,d)=>c-d)),l=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const h=t.get(p);if(h===null)return;let T=s.get(p)||_i.empty();T=d.applyToLocalView(h,T),s.set(p,T);const E=(o.get(d.batchId)||Ke()).add(p);o=o.insert(d.batchId,E)}))})).next((()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),h=p.key,T=p.value,E=cS();T.forEach((S=>{if(!l.has(S)){const I=gS(t.get(S),s.get(S));I!==null&&E.set(S,I),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,h,E))}return le.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(c){return we.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):nP(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):le.resolve(po());let d=_u,p=l;return c.next((h=>le.forEach(h,((T,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(T)?le.resolve():this.remoteDocumentCache.getEntry(e,T).next((S=>{p=p.insert(T,S)}))))).next((()=>this.populateOverlays(e,h,l))).next((()=>this.computeViews(e,p,h,Ke()))).next((T=>({batchId:d,changes:uS(T)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next((s=>{let o=au();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let c=au();return this.indexManager.getCollectionParents(e,l).next((d=>le.forEach(d,(p=>{const h=(function(E,S){return new sf(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,h,s,o).next((T=>{T.forEach(((E,S)=>{c=c.insert(E,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((c=>{l.forEach(((p,h)=>{const T=h.getKey();c.get(T)===null&&(c=c.insert(T,mn.newInvalidDocument(T)))}));let d=au();return c.forEach(((p,h)=>{const T=l.get(p);T!==void 0&&mu(T.mutation,h,_i.empty(),yt.now()),of(t,h)&&(d=d.insert(p,h))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return le.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Ki(o.createTime)}})(t)),le.resolve()}getNamedQuery(e,t){return le.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:GP(o.bundledQuery),readTime:Ki(o.readTime)}})(t)),le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(){this.overlays=new Ct(we.comparator),this.qr=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const s=po();return le.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),le.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),le.resolve()}getOverlaysForCollection(e,t,s){const o=po(),l=t.length+1,c=new we(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,h=p.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===l&&p.largestBatchId>s&&o.set(p.getKey(),p)}return le.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new Ct(((h,T)=>h-T));const c=this.overlays.getIterator();for(;c.hasNext();){const h=c.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>s){let T=l.get(h.largestBatchId);T===null&&(T=po(),l=l.insert(h.largestBatchId,T)),T.set(h.getKey(),h)}}const d=po(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((h,T)=>d.set(h,T))),!(d.size()>=o)););return le.resolve(d)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new TP(t,s));let l=this.qr.get(t);l===void 0&&(l=Ke(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(){this.Qr=new Qt(en.$r),this.Ur=new Qt(en.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new en(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new en(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new we(new Et([])),s=new en(t,e),o=new en(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new we(new Et([])),s=new en(t,e),o=new en(t,e+1);let l=Ke();return this.Ur.forEachInRange([s,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new en(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class en{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return we.comparator(e.key,t.key)||Je(e.Yr,t.Yr)}static Kr(e,t){return Je(e.Yr,t.Yr)||we.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Qt(en.$r)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new vP(l,t,s,o);this.mutationQueue.push(c);for(const d of o)this.Zr=this.Zr.add(new en(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return le.resolve(c)}lookupMutationBatch(e,t){return le.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return le.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?kp:this.tr-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new en(t,0),o=new en(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(c=>{const d=this.Xr(c.Yr);l.push(d)})),le.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Qt(Je);return t.forEach((o=>{const l=new en(o,0),c=new en(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(d=>{s=s.add(d.Yr)}))})),le.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;we.isDocumentKey(l)||(l=l.child(""));const c=new en(new we(l),0);let d=new Qt(Je);return this.Zr.forEachWhile((p=>{const h=p.key.path;return!!s.isPrefixOf(h)&&(h.length===o&&(d=d.add(p.Yr)),!0)}),c),le.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){at(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return le.forEach(t.mutations,(o=>{const l=new en(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new en(t,0),o=this.Zr.firstAfterOrEqual(s);return le.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e){this.ri=e,this.docs=(function(){return new Ct(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return le.resolve(s?s.document.mutableCopy():mn.newInvalidDocument(t))}getEntries(e,t){let s=Vs();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():mn.newInvalidDocument(o))})),le.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Vs();const c=t.path,d=new we(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:h,value:{document:T}}=p.getNext();if(!c.isPrefixOf(h.path))break;h.path.length>c.length+1||P2(D2(T),s)<=0||(o.has(T.key)||of(t,T))&&(l=l.insert(T.key,T.mutableCopy()))}return le.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Me(9500)}ii(e,t){return le.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new oV(this)}getSize(e){return le.resolve(this.size)}}class oV extends WP{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),le.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e){this.persistence=e,this.si=new Co((t=>Op(t)),qp),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.oi=0,this._i=new Yp,this.targetCount=0,this.ai=qa.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),le.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new qa(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Pr(t),le.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),le.waitFor(l).next((()=>o))}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return le.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),le.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),le.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),le.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return le.resolve(s)}containsKey(e,t){return le.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e,t){this.ui={},this.overlays={},this.ci=new ef(0),this.li=!1,this.li=!0,this.hi=new iV,this.referenceDelegate=e(this),this.Pi=new aV(this),this.indexManager=new jP,this.remoteDocumentCache=(function(o){return new rV(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new HP(t),this.Ii=new tV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new sV(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){Te("MemoryPersistence","Starting transaction:",e);const o=new lV(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return le.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class lV extends k2{constructor(e){super(),this.currentSequenceNumber=e}}class Jp{constructor(e){this.persistence=e,this.Ri=new Yp,this.Vi=null}static mi(e){return new Jp(e)}get fi(){if(this.Vi)return this.Vi;throw Me(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),le.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),le.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.fi,(s=>{const o=we.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Pe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return le.or([()=>le.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Od{constructor(e,t){this.persistence=e,this.pi=new Co((s=>O2(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=XP(this,t)}static mi(e,t){return new Od(e,t)}Ei(){}di(e){return le.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return le.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?le.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((d=>{d||(s++,l.removeEntry(c,Pe.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),le.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),le.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),le.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=gd(e.data.value)),t}br(e,t,s){return le.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return le.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=Ke(),o=Ke();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Kp(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return nD()?8:U2(gn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new uV;return this.Ss(e,t,c).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(va()<=Ye.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",Ta(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),le.resolve()):(va()<=Ye.DEBUG&&Te("QueryEngine","Query:",Ta(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(va()<=Ye.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",Ta(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yi(t))):le.resolve())}ys(e,t){if(FT(t))return le.resolve(null);let s=Yi(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=lp(t,null,"F"),s=Yi(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=Ke(...l);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,s).next((p=>{const h=this.Ds(t,d);return this.Cs(t,h,c,p.readTime)?this.ys(e,lp(t,null,"F")):this.vs(e,h,t,p)}))))})))))}ws(e,t,s,o){return FT(t)||o.isEqual(Pe.min())?le.resolve(null):this.ps.getDocuments(e,s).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,s,o)?le.resolve(null):(va()<=Ye.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ta(t)),this.vs(e,c,t,M2(o,_u)).next((d=>d)))}))}Ds(e,t){let s=new Qt(aS(e));return t.forEach(((o,l)=>{of(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return va()<=Ye.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",Ta(t)),this.ps.getDocumentsMatchingQuery(e,t,Cr.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p="LocalStore",dV=3e8;class fV{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Ct(Je),this.xs=new Co((l=>Op(l)),qp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function hV(n,e,t,s){return new fV(n,e,t,s)}async function NS(n,e){const t=ke(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],d=[];let p=Ke();for(const h of o){c.push(h.batchId);for(const T of h.mutations)p=p.add(T.key)}for(const h of l){d.push(h.batchId);for(const T of h.mutations)p=p.add(T.key)}return t.localDocuments.getDocuments(s,p).next((h=>({Ls:h,removedBatchIds:c,addedBatchIds:d})))}))}))}function mV(n,e){const t=ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,p,h,T){const E=h.batch,S=E.keys();let I=le.resolve();return S.forEach((V=>{I=I.next((()=>T.getEntry(p,V))).next((B=>{const F=h.docVersions.get(V);at(F!==null,48541),B.version.compareTo(F)<0&&(E.applyToRemoteDocument(B,h),B.isValidDocument()&&(B.setReadTime(h.commitVersion),T.addEntry(B)))}))})),I.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(d){let p=Ke();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(p=p.add(d.batch.mutations[h].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function MS(n){const e=ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function pV(n,e){const t=ke(n),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const d=[];e.targetChanges.forEach(((T,E)=>{const S=o.get(E);if(!S)return;d.push(t.Pi.removeMatchingKeys(l,T.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,T.addedDocuments,E))));let I=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?I=I.withResumeToken(nn.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):T.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(T.resumeToken,s)),o=o.insert(E,I),(function(B,F,ee){return B.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=dV?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0})(S,I,T)&&d.push(t.Pi.updateTargetData(l,I))}));let p=Vs(),h=Ke();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,T))})),d.push(gV(l,c,e.documentUpdates).next((T=>{p=T.ks,h=T.qs}))),!s.isEqual(Pe.min())){const T=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));d.push(T)}return le.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,h))).next((()=>p))})).then((l=>(t.Ms=o,l)))}function gV(n,e,t){let s=Ke(),o=Ke();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=Vs();return t.forEach(((d,p)=>{const h=l.get(d);p.isFoundDocument()!==h.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(Pe.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!h.isValidDocument()||p.version.compareTo(h.version)>0||p.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):Te($p,"Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",p.version)})),{ks:c,qs:o}}))}function yV(n,e){const t=ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=kp),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function _V(n,e){const t=ke(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,le.resolve(o)):t.Pi.allocateTargetId(s).next((c=>(o=new Tr(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function hp(n,e,t){const s=ke(n),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Wa(c))throw c;Te($p,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function eE(n,e,t){const s=ke(n);let o=Pe.min(),l=Ke();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,h,T){const E=ke(p),S=E.xs.get(T);return S!==void 0?le.resolve(E.Ms.get(S)):E.Pi.getTargetData(h,T)})(s,c,Yi(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?o:Pe.min(),t?l:Ke()))).next((d=>(vV(s,sP(e),d),{documents:d,Qs:l})))))}function vV(n,e,t){let s=n.Os.get(e)||Pe.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class tE{constructor(){this.activeTargetIds=cP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class TV{constructor(){this.Mo=new tE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new tE,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="ConnectivityMonitor";class iE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Te(nE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Te(nE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cd=null;function mp(){return cd===null?cd=(function(){return 268435456+Math.round(2147483648*Math.random())})():cd++,"0x"+cd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="RestConnection",AV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class SV{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Md?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const c=mp(),d=this.zo(e,t.toUriEncodedString());Te(Dm,`Sending RPC '${e}' ${c}:`,d,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,l);const{host:h}=new URL(d),T=Ka(h);return this.Jo(e,d,p,s,T).then((E=>(Te(Dm,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw Eo(Dm,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",s),E}))}Ho(e,t,s,o,l,c){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Qa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=AV[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="WebChannelConnection";class xV extends SV{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const c=mp();return new Promise(((d,p)=>{const h=new PA;h.setWithCredentials(!0),h.listenOnce(VA.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case pd.NO_ERROR:const E=h.getResponseJson();Te(fn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case pd.TIMEOUT:Te(fn,`RPC '${e}' ${c} timed out`),p(new be(ue.DEADLINE_EXCEEDED,"Request time out"));break;case pd.HTTP_ERROR:const S=h.getStatus();if(Te(fn,`RPC '${e}' ${c} failed with status:`,S,"response text:",h.getResponseText()),S>0){let I=h.getResponseJson();Array.isArray(I)&&(I=I[0]);const V=I==null?void 0:I.error;if(V&&V.status&&V.message){const B=(function(ee){const te=ee.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(te)>=0?te:ue.UNKNOWN})(V.status);p(new be(B,V.message))}else p(new be(ue.UNKNOWN,"Server responded with status "+h.getStatus()))}else p(new be(ue.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{l_:e,streamId:c,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{Te(fn,`RPC '${e}' ${c} completed.`)}}));const T=JSON.stringify(o);Te(fn,`RPC '${e}' ${c} sending request:`,o),h.send(t,"POST",T,s,15)}))}T_(e,t,s){const o=mp(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=LA(),d=UA(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(p.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const T=l.join("");Te(fn,`Creating RPC '${e}' stream ${o}: ${T}`,p);const E=c.createWebChannel(T,p);this.I_(E);let S=!1,I=!1;const V=new bV({Yo:F=>{I?Te(fn,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(S||(Te(fn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),S=!0),Te(fn,`RPC '${e}' stream ${o} sending:`,F),E.send(F))},Zo:()=>E.close()}),B=(F,ee,te)=>{F.listen(ee,(K=>{try{te(K)}catch(Y){setTimeout((()=>{throw Y}),0)}}))};return B(E,ou.EventType.OPEN,(()=>{I||(Te(fn,`RPC '${e}' stream ${o} transport opened.`),V.o_())})),B(E,ou.EventType.CLOSE,(()=>{I||(I=!0,Te(fn,`RPC '${e}' stream ${o} transport closed`),V.a_(),this.E_(E))})),B(E,ou.EventType.ERROR,(F=>{I||(I=!0,Eo(fn,`RPC '${e}' stream ${o} transport errored. Name:`,F.name,"Message:",F.message),V.a_(new be(ue.UNAVAILABLE,"The operation could not be completed")))})),B(E,ou.EventType.MESSAGE,(F=>{var ee;if(!I){const te=F.data[0];at(!!te,16349);const K=te,Y=(K==null?void 0:K.error)||((ee=K[0])==null?void 0:ee.error);if(Y){Te(fn,`RPC '${e}' stream ${o} received error:`,Y);const ae=Y.status;let Z=(function(N){const L=Gt[N];if(L!==void 0)return _S(L)})(ae),R=Y.message;Z===void 0&&(Z=ue.INTERNAL,R="Unknown error status: "+ae+" with message "+Y.message),I=!0,V.a_(new be(Z,R)),E.close()}else Te(fn,`RPC '${e}' stream ${o} received:`,te),V.u_(te)}})),B(d,kA.STAT_EVENT,(F=>{F.stat===np.PROXY?Te(fn,`RPC '${e}' stream ${o} detected buffering proxy`):F.stat===np.NOPROXY&&Te(fn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{V.__()}),0),V}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Pm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(n){return new RP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&Te("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="PersistentStream";class PS{constructor(e,t,s,o,l,c,d,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new DS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(Ds(t.toString()),Ds("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new be(ue.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Te(sE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Te(sE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class CV extends PS{constructor(e,t,s,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=DP(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Pe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Pe.min():c.readTime?Ki(c.readTime):Pe.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=fp(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=ap(p)?{documents:kP(l,p)}:{query:UP(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=ES(l,c.resumeToken);const h=up(l,c.expectedCount);h!==null&&(d.expectedCount=h)}else if(c.snapshotVersion.compareTo(Pe.min())>0){d.readTime=Ld(l,c.snapshotVersion.toTimestamp());const h=up(l,c.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const s=OP(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=fp(this.serializer),t.removeTarget=e,this.q_(t)}}class IV extends PS{constructor(e,t,s,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return at(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,at(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){at(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=VP(e.writeResults,e.commitTime),s=Ki(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=fp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>PP(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{}class RV extends wV{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new be(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,cp(t,s),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new be(ue.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,cp(t,s),o,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new be(ue.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class NV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ds(t),this.aa=!1):Te("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao="RemoteStore";class MV{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{wo(this)&&(Te(Ao,"Restarting streams for network reachability change."),await(async function(p){const h=ke(p);h.Ea.add(4),await Ru(h),h.Ra.set("Unknown"),h.Ea.delete(4),await df(h)})(this))}))})),this.Ra=new NV(s,o)}}async function df(n){if(wo(n))for(const e of n.da)await e(!0)}async function Ru(n){for(const e of n.da)await e(!1)}function VS(n,e){const t=ke(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Zp(t)?Wp(t):Za(t).O_()&&Xp(t,e))}function Qp(n,e){const t=ke(n),s=Za(t);t.Ia.delete(e),s.O_()&&kS(t,e),t.Ia.size===0&&(s.O_()?s.L_():wo(t)&&t.Ra.set("Unknown"))}function Xp(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Za(n).Y_(e)}function kS(n,e){n.Va.Ue(e),Za(n).Z_(e)}function Wp(n){n.Va=new xP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Za(n).start(),n.Ra.ua()}function Zp(n){return wo(n)&&!Za(n).x_()&&n.Ia.size>0}function wo(n){return ke(n).Ea.size===0}function US(n){n.Va=void 0}async function DV(n){n.Ra.set("Online")}async function PV(n){n.Ia.forEach(((e,t)=>{Xp(n,e)}))}async function VV(n,e){US(n),Zp(n)?(n.Ra.ha(e),Wp(n)):n.Ra.set("Unknown")}async function kV(n,e,t){if(n.Ra.set("Online"),e instanceof TS&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const d of l.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o.Ia.delete(d),o.Va.removeTarget(d))})(n,e)}catch(s){Te(Ao,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await qd(n,s)}else if(e instanceof vd?n.Va.Ze(e):e instanceof vS?n.Va.st(e):n.Va.tt(e),!t.isEqual(Pe.min()))try{const s=await MS(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach(((p,h)=>{if(p.resumeToken.approximateByteSize()>0){const T=l.Ia.get(h);T&&l.Ia.set(h,T.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,h)=>{const T=l.Ia.get(p);if(!T)return;l.Ia.set(p,T.withResumeToken(nn.EMPTY_BYTE_STRING,T.snapshotVersion)),kS(l,p);const E=new Tr(T.target,p,h,T.sequenceNumber);Xp(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(s){Te(Ao,"Failed to raise snapshot:",s),await qd(n,s)}}async function qd(n,e,t){if(!Wa(e))throw e;n.Ea.add(1),await Ru(n),n.Ra.set("Offline"),t||(t=()=>MS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Te(Ao,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await df(n)}))}function LS(n,e){return e().catch((t=>qd(n,t,e)))}async function ff(n){const e=ke(n),t=Nr(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:kp;for(;UV(e);)try{const o=await yV(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,LV(e,o)}catch(o){await qd(e,o)}OS(e)&&qS(e)}function UV(n){return wo(n)&&n.Ta.length<10}function LV(n,e){n.Ta.push(e);const t=Nr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function OS(n){return wo(n)&&!Nr(n).x_()&&n.Ta.length>0}function qS(n){Nr(n).start()}async function OV(n){Nr(n).ra()}async function qV(n){const e=Nr(n);for(const t of n.Ta)e.ea(t.mutations)}async function BV(n,e,t){const s=n.Ta.shift(),o=Hp.from(s,e,t);await LS(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await ff(n)}async function FV(n,e){e&&Nr(n).X_&&await(async function(s,o){if((function(c){return AP(c)&&c!==ue.ABORTED})(o.code)){const l=s.Ta.shift();Nr(s).B_(),await LS(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await ff(s)}})(n,e),OS(n)&&qS(n)}async function rE(n,e){const t=ke(n);t.asyncQueue.verifyOperationInProgress(),Te(Ao,"RemoteStore received new credentials");const s=wo(t);t.Ea.add(3),await Ru(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await df(t)}async function zV(n,e){const t=ke(n);e?(t.Ea.delete(2),await df(t)):e||(t.Ea.add(2),await Ru(t),t.Ra.set("Unknown"))}function Za(n){return n.ma||(n.ma=(function(t,s,o){const l=ke(t);return l.sa(),new CV(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:DV.bind(null,n),t_:PV.bind(null,n),r_:VV.bind(null,n),H_:kV.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Zp(n)?Wp(n):n.Ra.set("Unknown")):(await n.ma.stop(),US(n))}))),n.ma}function Nr(n){return n.fa||(n.fa=(function(t,s,o){const l=ke(t);return l.sa(),new IV(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:OV.bind(null,n),r_:FV.bind(null,n),ta:qV.bind(null,n),na:BV.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await ff(n)):(await n.fa.stop(),n.Ta.length>0&&(Te(Ao,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new ws,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const c=Date.now()+s,d=new eg(e,t,c,o,l);return d.start(s),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tg(n,e){if(Ds("AsyncQueue",`${e}: ${n}`),Wa(n))return new be(ue.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{static emptySet(e){return new Na(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||we.comparator(t.key,s.key):(t,s)=>we.comparator(t.key,s.key),this.keyedMap=au(),this.sortedSet=new Ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Na)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Na;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(){this.ga=new Ct(we.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Me(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Ba{constructor(e,t,s,o,l,c,d,p,h){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=h}static fromInitialDocuments(e,t,s,o,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Ba(e,t,Na.emptySet(t),c,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class GV{constructor(){this.queries=aE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=ke(t),l=o.queries;o.queries=aE(),l.forEach(((c,d)=>{for(const p of d.Sa)p.onError(s)}))})(this,new be(ue.ABORTED,"Firestore shutting down"))}}function aE(){return new Co((n=>oS(n)),rf)}async function BS(n,e){const t=ke(n);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new HV,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const d=tg(c,`Initialization of query '${Ta(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&ng(t)}async function FS(n,e){const t=ke(n),s=e.query;let o=3;const l=t.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function jV(n,e){const t=ke(n);let s=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(o)&&(s=!0);c.wa=o}}s&&ng(t)}function YV(n,e,t){const s=ke(n),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function ng(n){n.Ca.forEach((e=>{e.next()}))}var pp,lE;(lE=pp||(pp={})).Ma="default",lE.Cache="cache";class zS{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Ba(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ba.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==pp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e){this.key=e}}class GS{constructor(e){this.key=e}}class JV{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ke(),this.mutatedKeys=Ke(),this.eu=aS(e),this.tu=new Na(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new oE,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,h=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,E)=>{const S=o.get(T),I=of(this.query,E)?E:null,V=!!S&&this.mutatedKeys.has(S.key),B=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let F=!1;S&&I?S.data.isEqual(I.data)?V!==B&&(s.track({type:3,doc:I}),F=!0):this.su(S,I)||(s.track({type:2,doc:I}),F=!0,(p&&this.eu(I,p)>0||h&&this.eu(I,h)<0)&&(d=!0)):!S&&I?(s.track({type:0,doc:I}),F=!0):S&&!I&&(s.track({type:1,doc:S}),F=!0,(p||h)&&(d=!0)),F&&(I?(c=c.add(I),l=B?l.add(T):l.delete(T)):(c=c.delete(T),l=l.delete(T)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const T=this.query.limitType==="F"?c.last():c.first();c=c.delete(T.key),l=l.delete(T.key),s.track({type:1,doc:T})}return{tu:c,iu:s,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((T,E)=>(function(I,V){const B=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Rt:F})}};return B(I)-B(V)})(T.type,E.type)||this.eu(T.doc,E.doc))),this.ou(s),o=o??!1;const d=t&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,h=p!==this.Za;return this.Za=p,c.length!==0||h?{snapshot:new Ba(this.query,e.tu,l,c,e.mutatedKeys,p===0,h,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new oE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ke(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new GS(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new HS(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ke();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ba.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ig="SyncEngine";class KV{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class $V{constructor(e){this.key=e,this.hu=!1}}class QV{constructor(e,t,s,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Co((d=>oS(d)),rf),this.Iu=new Map,this.Eu=new Set,this.du=new Ct(we.comparator),this.Au=new Map,this.Ru=new Yp,this.Vu={},this.mu=new Map,this.fu=qa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function XV(n,e,t=!0){const s=QS(n);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await jS(s,e,t,!0),o}async function WV(n,e){const t=QS(n);await jS(t,e,!0,!1)}async function jS(n,e,t,s){const o=await _V(n.localStore,Yi(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return s&&(d=await ZV(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&VS(n.remoteStore,o),d}async function ZV(n,e,t,s,o){n.pu=(E,S,I)=>(async function(B,F,ee,te){let K=F.view.ru(ee);K.Cs&&(K=await eE(B.localStore,F.query,!1).then((({documents:R})=>F.view.ru(R,K))));const Y=te&&te.targetChanges.get(F.targetId),ae=te&&te.targetMismatches.get(F.targetId)!=null,Z=F.view.applyChanges(K,B.isPrimaryClient,Y,ae);return cE(B,F.targetId,Z.au),Z.snapshot})(n,E,S,I);const l=await eE(n.localStore,e,!0),c=new JV(e,l.Qs),d=c.ru(l.documents),p=wu.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),h=c.applyChanges(d,n.isPrimaryClient,p);cE(n,t,h.au);const T=new KV(e,t,c);return n.Tu.set(e,T),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function ek(n,e,t){const s=ke(n),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((c=>!rf(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await hp(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Qp(s.remoteStore,o.targetId),gp(s,o.targetId)})).catch(Xa)):(gp(s,o.targetId),await hp(s.localStore,o.targetId,!0))}async function tk(n,e){const t=ke(n),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Qp(t.remoteStore,s.targetId))}async function nk(n,e,t){const s=uk(n);try{const o=await(function(c,d){const p=ke(c),h=yt.now(),T=d.reduce(((I,V)=>I.add(V.key)),Ke());let E,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let V=Vs(),B=Ke();return p.Ns.getEntries(I,T).next((F=>{V=F,V.forEach(((ee,te)=>{te.isValidDocument()||(B=B.add(ee))}))})).next((()=>p.localDocuments.getOverlayedDocuments(I,V))).next((F=>{E=F;const ee=[];for(const te of d){const K=yP(te,E.get(te.key).overlayedDocument);K!=null&&ee.push(new Io(te.key,K,ZA(K.value.mapValue),Ji.exists(!0)))}return p.mutationQueue.addMutationBatch(I,h,ee,d)})).next((F=>{S=F;const ee=F.applyToLocalDocumentSet(E,B);return p.documentOverlayCache.saveOverlays(I,F.batchId,ee)}))})).then((()=>({batchId:S.batchId,changes:uS(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(c,d,p){let h=c.Vu[c.currentUser.toKey()];h||(h=new Ct(Je)),h=h.insert(d,p),c.Vu[c.currentUser.toKey()]=h})(s,o.batchId,t),await Nu(s,o.changes),await ff(s.remoteStore)}catch(o){const l=tg(o,"Failed to persist write");t.reject(l)}}async function YS(n,e){const t=ke(n);try{const s=await pV(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Au.get(l);c&&(at(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?at(c.hu,14607):o.removedDocuments.size>0&&(at(c.hu,42227),c.hu=!1))})),await Nu(t,s,e)}catch(s){await Xa(s)}}function uE(n,e,t){const s=ke(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(c,d){const p=ke(c);p.onlineState=d;let h=!1;p.queries.forEach(((T,E)=>{for(const S of E.Sa)S.va(d)&&(h=!0)})),h&&ng(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function ik(n,e,t){const s=ke(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let c=new Ct(we.comparator);c=c.insert(l,mn.newNoDocument(l,Pe.min()));const d=Ke().add(l),p=new uf(Pe.min(),new Map,new Ct(Je),c,d);await YS(s,p),s.du=s.du.remove(l),s.Au.delete(e),sg(s)}else await hp(s.localStore,e,!1).then((()=>gp(s,e,t))).catch(Xa)}async function sk(n,e){const t=ke(n),s=e.batch.batchId;try{const o=await mV(t.localStore,e);KS(t,s,null),JS(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Nu(t,o)}catch(o){await Xa(o)}}async function rk(n,e,t){const s=ke(n);try{const o=await(function(c,d){const p=ke(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let T;return p.mutationQueue.lookupMutationBatch(h,d).next((E=>(at(E!==null,37113),T=E.keys(),p.mutationQueue.removeMutationBatch(h,E)))).next((()=>p.mutationQueue.performConsistencyCheck(h))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(h,T,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,T))).next((()=>p.localDocuments.getDocuments(h,T)))}))})(s.localStore,e);KS(s,e,t),JS(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Nu(s,o)}catch(o){await Xa(o)}}function JS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function KS(n,e,t){const s=ke(n);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function gp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||$S(n,s)}))}function $S(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Qp(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),sg(n))}function cE(n,e,t){for(const s of t)s instanceof HS?(n.Ru.addReference(s.key,e),ok(n,s)):s instanceof GS?(Te(ig,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||$S(n,s.key)):Me(19791,{wu:s})}function ok(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(Te(ig,"New document in limbo: "+t),n.Eu.add(s),sg(n))}function sg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new we(Et.fromString(e)),s=n.fu.next();n.Au.set(s,new $V(t)),n.du=n.du.insert(t,s),VS(n.remoteStore,new Tr(Yi(Bp(t.path)),s,"TargetPurposeLimboResolution",ef.ce))}}async function Nu(n,e,t){const s=ke(n),o=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((d,p)=>{c.push(s.pu(p,e,t).then((h=>{var T;if((h||t)&&s.isPrimaryClient){const E=h?!h.fromCache:(T=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:T.current;s.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(h){o.push(h);const E=Kp.As(p.targetId,h);l.push(E)}})))})),await Promise.all(c),s.Pu.H_(o),await(async function(p,h){const T=ke(p);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>le.forEach(h,(S=>le.forEach(S.Es,(I=>T.persistence.referenceDelegate.addReference(E,S.targetId,I))).next((()=>le.forEach(S.ds,(I=>T.persistence.referenceDelegate.removeReference(E,S.targetId,I)))))))))}catch(E){if(!Wa(E))throw E;Te($p,"Failed to update sequence numbers: "+E)}for(const E of h){const S=E.targetId;if(!E.fromCache){const I=T.Ms.get(S),V=I.snapshotVersion,B=I.withLastLimboFreeSnapshotVersion(V);T.Ms=T.Ms.insert(S,B)}}})(s.localStore,l))}async function ak(n,e){const t=ke(n);if(!t.currentUser.isEqual(e)){Te(ig,"User change. New user:",e.toKey());const s=await NS(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((p=>{p.reject(new be(ue.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Nu(t,s.Ls)}}function lk(n,e){const t=ke(n),s=t.Au.get(e);if(s&&s.hu)return Ke().add(s.key);{let o=Ke();const l=t.Iu.get(e);if(!l)return o;for(const c of l){const d=t.Tu.get(c);o=o.unionWith(d.view.nu)}return o}}function QS(n){const e=ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=YS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ik.bind(null,e),e.Pu.H_=jV.bind(null,e.eventManager),e.Pu.yu=YV.bind(null,e.eventManager),e}function uk(n){const e=ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rk.bind(null,e),e}class Bd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return hV(this.persistence,new cV,e.initialUser,this.serializer)}Cu(e){return new RS(Jp.mi,this.serializer)}Du(e){return new TV}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bd.provider={build:()=>new Bd};class ck extends Bd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){at(this.persistence.referenceDelegate instanceof Od,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new $P(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Mn.withCacheSize(this.cacheSizeBytes):Mn.DEFAULT;return new RS((s=>Od.mi(s,t)),this.serializer)}}class yp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>uE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=ak.bind(null,this.syncEngine),await zV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new GV})()}createDatastore(e){const t=cf(e.databaseInfo.databaseId),s=(function(l){return new xV(l)})(e.databaseInfo);return(function(l,c,d,p){return new RV(l,c,d,p)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,c,d){return new MV(s,o,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>uE(this.syncEngine,t,0)),(function(){return iE.v()?new iE:new EV})())}createSyncEngine(e,t){return(function(o,l,c,d,p,h,T){const E=new QV(o,l,c,d,p,h);return T&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=ke(o);Te(Ao,"RemoteStore shutting down."),l.Ea.add(5),await Ru(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}yp.provider={build:()=>new yp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ds("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr="FirestoreClient";class dk{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=hn.UNAUTHENTICATED,this.clientId=Zd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{Te(Mr,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(Te(Mr,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ws;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=tg(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Vm(n,e){n.asyncQueue.verifyOperationInProgress(),Te(Mr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await NS(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function dE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await fk(n);Te(Mr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>rE(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>rE(e.remoteStore,o))),n._onlineComponents=e}async function fk(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Te(Mr,"Using user provided OfflineComponentProvider");try{await Vm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ue.FAILED_PRECONDITION||o.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Eo("Error using user provided cache. Falling back to memory cache: "+t),await Vm(n,new Bd)}}else Te(Mr,"Using default OfflineComponentProvider"),await Vm(n,new ck(void 0));return n._offlineComponents}async function WS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Te(Mr,"Using user provided OnlineComponentProvider"),await dE(n,n._uninitializedComponentsProvider._online)):(Te(Mr,"Using default OnlineComponentProvider"),await dE(n,new yp))),n._onlineComponents}function hk(n){return WS(n).then((e=>e.syncEngine))}async function ZS(n){const e=await WS(n),t=e.eventManager;return t.onListen=XV.bind(null,e.syncEngine),t.onUnlisten=ek.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=WV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=tk.bind(null,e.syncEngine),t}function mk(n,e,t={}){const s=new ws;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,h){const T=new XS({next:S=>{T.Nu(),c.enqueueAndForget((()=>FS(l,E)));const I=S.docs.has(d);!I&&S.fromCache?h.reject(new be(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&S.fromCache&&p&&p.source==="server"?h.reject(new be(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(S)},error:S=>h.reject(S)}),E=new zS(Bp(d.path),T,{includeMetadataChanges:!0,qa:!0});return BS(l,E)})(await ZS(n),n.asyncQueue,e,t,s))),s.promise}function pk(n,e,t={}){const s=new ws;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,h){const T=new XS({next:S=>{T.Nu(),c.enqueueAndForget((()=>FS(l,E))),S.fromCache&&p.source==="server"?h.reject(new be(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(S)},error:S=>h.reject(S)}),E=new zS(d,T,{includeMetadataChanges:!0,qa:!0});return BS(l,E)})(await ZS(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb="firestore.googleapis.com",hE=!0;class mE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new be(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tb,this.ssl=hE}else this.host=e.host,this.ssl=e.ssl??hE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<JP)throw new be(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eb(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new be(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new be(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new be(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hf{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new BA;switch(s.type){case"firstParty":return new x2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new be(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=fE.get(t);s&&(Te("ComponentProvider","Removing Datastore"),fE.delete(t),s.terminate())})(this),Promise.resolve()}}function nb(n,e,t,s={}){var h;n=Ps(n,hf);const o=Ka(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;o&&(bA(`https://${d}`),xA("Firestore",!0)),l.host!==tb&&l.host!==d&&Eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:d,ssl:o,emulatorOptions:s};if(!_o(p,c)&&(n._setSettings(p),s.mockUserToken)){let T,E;if(typeof s.mockUserToken=="string")T=s.mockUserToken,E=hn.MOCK_USER;else{T=JM(s.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new be(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new hn(S)}n._authCredentials=new A2(new qA(T,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Mu(this.firestore,e,this._query)}}class Yt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yt(this.firestore,e,this._key)}toJSON(){return{type:Yt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Cu(t,Yt._jsonSchema))return new Yt(e,s||null,new we(Et.fromString(t.referencePath)))}}Yt._jsonSchemaVersion="firestore/documentReference/1.0",Yt._jsonSchema={type:jt("string",Yt._jsonSchemaVersion),referencePath:jt("string")};class Rs extends Mu{constructor(e,t,s){super(e,t,Bp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yt(this.firestore,null,new we(e))}withConverter(e){return new Rs(this.firestore,e,this._path)}}function gk(n,e,...t){if(n=En(n),FA("collection","path",e),n instanceof hf){const s=Et.fromString(e,...t);return wT(s),new Rs(n,null,s)}{if(!(n instanceof Yt||n instanceof Rs))throw new be(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Et.fromString(e,...t));return wT(s),new Rs(n.firestore,null,s)}}function yk(n,e,...t){if(n=En(n),arguments.length===1&&(e=Zd.newId()),FA("doc","path",e),n instanceof hf){const s=Et.fromString(e,...t);return IT(s),new Yt(n,null,new we(s))}{if(!(n instanceof Yt||n instanceof Rs))throw new be(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Et.fromString(e,...t));return IT(s),new Yt(n.firestore,n instanceof Rs?n.converter:null,new we(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="AsyncQueue";class gE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new DS(this,"async_queue_retry"),this._c=()=>{const s=Pm();s&&Te(pE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Pm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Pm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ws;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Wa(e))throw e;Te(pE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Ds("INTERNAL UNHANDLED ERROR: ",yE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=eg.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Me(47125,{Pc:yE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function yE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class el extends hf{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new gE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gE(e),this._firestoreClient=void 0,await e}}}function ib(n,e){const t=typeof n=="object"?n:RA(),s=typeof n=="string"?n:Md,o=Dp(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=jM("firestore");l&&nb(o,...l)}return o}function mf(n){if(n._terminated)throw new be(ue.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||_k(n),n._firestoreClient}function _k(n){var s,o,l;const e=n._freezeSettings(),t=(function(d,p,h,T){return new F2(d,p,h,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,eb(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new dk(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zn(nn.fromBase64String(e))}catch(t){throw new be(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new zn(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Cu(e,zn._jsonSchema))return zn.fromBase64String(e.bytes)}}zn._jsonSchemaVersion="firestore/bytes/1.0",zn._jsonSchema={type:jt("string",zn._jsonSchemaVersion),bytes:jt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new be(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new be(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new be(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ti._jsonSchemaVersion}}static fromJSON(e){if(Cu(e,Ti._jsonSchema))return new Ti(e.latitude,e.longitude)}}Ti._jsonSchemaVersion="firestore/geoPoint/1.0",Ti._jsonSchema={type:jt("string",Ti._jsonSchemaVersion),latitude:jt("number"),longitude:jt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ei._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Cu(e,Ei._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ei(e.vectorValues);throw new be(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ei._jsonSchemaVersion="firestore/vectorValue/1.0",Ei._jsonSchema={type:jt("string",Ei._jsonSchemaVersion),vectorValues:jt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=/^__.*__$/;class Tk{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Io(e,this.data,this.fieldMask,t,this.fieldTransforms):new Iu(e,this.data,t,this.fieldTransforms)}}function sb(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{Ac:n})}}class og{constructor(e,t,s,o,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new og({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Fd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(sb(this.Ac)&&vk.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Ek{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||cf(e)}Cc(e,t,s,o=!1){return new og({Ac:e,methodName:t,Dc:s,path:tn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ak(n){const e=n._freezeSettings(),t=cf(n._databaseId);return new Ek(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Sk(n,e,t,s,o,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,o);lb("Data must be an object, but it was:",c,s);const d=ob(s,c);let p,h;if(l.merge)p=new _i(c.fieldMask),h=c.fieldTransforms;else if(l.mergeFields){const T=[];for(const E of l.mergeFields){const S=bk(e,E,t);if(!c.contains(S))throw new be(ue.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);Ck(T,S)||T.push(S)}p=new _i(T),h=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,h=c.fieldTransforms;return new Tk(new ii(d),p,h)}function rb(n,e){if(ab(n=En(n)))return lb("Unsupported field value:",e,n),ob(n,e);if(n instanceof rg)return(function(s,o){if(!sb(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let c=0;for(const d of s){let p=rb(d,o.wc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,o){if((s=En(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return dP(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=yt.fromDate(s);return{timestampValue:Ld(o.serializer,l)}}if(s instanceof yt){const l=new yt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ld(o.serializer,l)}}if(s instanceof Ti)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof zn)return{bytesValue:ES(o.serializer,s._byteString)};if(s instanceof Yt){const l=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:jp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Ei)return(function(c,d){return{mapValue:{fields:{[XA]:{stringValue:WA},[Dd]:{arrayValue:{values:c.toArray().map((h=>{if(typeof h!="number")throw d.Sc("VectorValues must only contain numeric values.");return Fp(d.serializer,h)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Vp(s)}`)})(n,e)}function ob(n,e){const t={};return jA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xo(n,((s,o)=>{const l=rb(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function ab(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof yt||n instanceof Ti||n instanceof zn||n instanceof Yt||n instanceof rg||n instanceof Ei)}function lb(n,e,t){if(!ab(t)||!HA(t)){const s=Vp(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function bk(n,e,t){if((e=En(e))instanceof pf)return e._internalPath;if(typeof e=="string")return ub(n,e);throw Fd("Field path arguments must be of type string or ",n,!1,void 0,t)}const xk=new RegExp("[~\\*/\\[\\]]");function ub(n,e,t){if(e.search(xk)>=0)throw Fd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new pf(...e.split("."))._internalPath}catch{throw Fd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Fd(n,e,t,s,o){const l=s&&!s.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${s}`),c&&(p+=` in document ${o}`),p+=")"),new be(ue.INVALID_ARGUMENT,d+n+p)}function Ck(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Ik(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(db("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Ik extends cb{data(){return super.data()}}function db(n,e){return typeof e=="string"?ub(n,e):e instanceof pf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new be(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fb{convertValue(e,t="none"){switch(Rr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Me(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return xo(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,o,l;const t=(l=(o=(s=e.fields)==null?void 0:s[Dd].arrayValue)==null?void 0:o.values)==null?void 0:l.map((c=>Vt(c.doubleValue)));return new Ei(t)}convertGeoPoint(e){return new Ti(Vt(e.latitude),Vt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=nf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(vu(e));default:return null}}convertTimestamp(e){const t=Ir(e);return new yt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Et.fromString(e);at(IS(s),9688,{name:e});const o=new Ua(s.get(1),s.get(3)),l=new we(s.popFirst(5));return o.isEqual(t)||Ds(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class ba{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xr extends cb{constructor(e,t,s,o,l,c){super(e,t,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(db("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new be(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=xr._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}xr._jsonSchemaVersion="firestore/documentSnapshot/1.0",xr._jsonSchema={type:jt("string",xr._jsonSchemaVersion),bundleSource:jt("string","DocumentSnapshot"),bundleName:jt("string"),bundle:jt("string")};class pu extends xr{data(e={}){return super.data(e)}}class go{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ba(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new pu(this._firestore,this._userDataWriter,s.key,s,new ba(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new be(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((d=>{const p=new pu(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ba(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new pu(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ba(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let h=-1,T=-1;return d.type!==0&&(h=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),T=c.indexOf(d.doc.key)),{type:Nk(d.type),doc:p,oldIndex:h,newIndex:T}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new be(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=go._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Zd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Nk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(n){n=Ps(n,Yt);const e=Ps(n.firestore,el);return mk(mf(e),n._key).then((t=>kk(e,n,t)))}go._jsonSchemaVersion="firestore/querySnapshot/1.0",go._jsonSchema={type:jt("string",go._jsonSchemaVersion),bundleSource:jt("string","QuerySnapshot"),bundleName:jt("string"),bundle:jt("string")};class hb extends fb{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yt(this.firestore,null,t)}}function Dk(n){n=Ps(n,Mu);const e=Ps(n.firestore,el),t=mf(e),s=new hb(e);return wk(n._query),pk(t,n._query).then((o=>new go(e,s,n,o)))}function Pk(n,e,t){n=Ps(n,Yt);const s=Ps(n.firestore,el),o=Rk(n.converter,e,t);return ag(s,[Sk(Ak(s),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Ji.none())])}function Vk(n){return ag(Ps(n.firestore,el),[new zp(n._key,Ji.none())])}function ag(n,e){return(function(s,o){const l=new ws;return s.asyncQueue.enqueueAndForget((async()=>nk(await hk(s),o,l))),l.promise})(mf(n),e)}function kk(n,e,t){const s=t.docs.get(e._key),o=new hb(n);return new xr(n,o,e._key,s,new ba(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Qa=o})($a),Va(new vo("firestore",((s,{instanceIdentifier:o,options:l})=>{const c=s.getProvider("app").getImmediate(),d=new el(new S2(s.getProvider("auth-internal")),new C2(c,s.getProvider("app-check-internal")),(function(h,T){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new be(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ua(h.options.projectId,T)})(c,o),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Sr(ST,bT,e),Sr(ST,bT,"esm2020")})();const dd=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:fb,Bytes:zn,CollectionReference:Rs,DocumentReference:Yt,DocumentSnapshot:xr,FieldPath:pf,FieldValue:rg,Firestore:el,FirestoreError:be,GeoPoint:Ti,Query:Mu,QueryDocumentSnapshot:pu,QuerySnapshot:go,SnapshotMetadata:ba,Timestamp:yt,VectorValue:Ei,_AutoId:Zd,_ByteString:nn,_DatabaseId:Ua,_DocumentKey:we,_EmptyAuthCredentialsProvider:BA,_FieldPath:tn,_cast:Ps,_logWarn:Eo,_validateIsNotUsedTogether:zA,collection:gk,connectFirestoreEmulator:nb,deleteDoc:Vk,doc:yk,ensureFirestoreConfigured:mf,executeWrite:ag,getDoc:Mk,getDocs:Dk,getFirestore:ib,setDoc:Pk},Symbol.toStringTag,{value:"Module"}));function mb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pb=mb,gb=new bu("auth","Firebase",mb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd=new Np("@firebase/auth");function Uk(n,...e){zd.logLevel<=Ye.WARN&&zd.warn(`Auth (${$a}): ${n}`,...e)}function Td(n,...e){zd.logLevel<=Ye.ERROR&&zd.error(`Auth (${$a}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(n,...e){throw lg(n,...e)}function $i(n,...e){return lg(n,...e)}function yb(n,e,t){const s={...pb(),[e]:t};return new bu("auth","Firebase",s).create(e,{appName:n.name})}function Ns(n){return yb(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lg(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return gb.create(n,...e)}function Ne(n,e,...t){if(!n)throw lg(e,...t)}function Cs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Td(e),new Error(e)}function ks(n,e){n||Cs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function Lk(){return _E()==="http:"||_E()==="https:"}function _E(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Lk()||ZM()||"connection"in navigator)?navigator.onLine:!0}function qk(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,t){this.shortDelay=e,this.longDelay=t,ks(t>e,"Short delay should be less than long delay!"),this.isMobile=QM()||eD()}get(){return Ok()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(n,e){ks(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Cs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Cs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Cs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],zk=new Du(3e4,6e4);function Vr(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Os(n,e,t,s,o={}){return vb(n,o,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const d=xu({key:n.config.apiKey,...c}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:p,...l};return WM()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&Ka(n.emulatorConfig.host)&&(h.credentials="include"),_b.fetch()(await Tb(n,n.config.apiHost,t,d),h)})}async function vb(n,e,t){n._canInitEmulator=!1;const s={...Bk,...e};try{const o=new Gk(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw fd(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,h]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw fd(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw fd(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw fd(n,"user-disabled",c);const T=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw yb(n,T,h);Ai(n,T)}}catch(o){if(o instanceof Ls)throw o;Ai(n,"network-request-failed",{message:String(o)})}}async function Pu(n,e,t,s,o={}){const l=await Os(n,e,t,s,o);return"mfaPendingCredential"in l&&Ai(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function Tb(n,e,t,s){const o=`${e}${t}?${s}`,l=n,c=l.config.emulator?ug(n.config,o):`${n.config.apiScheme}://${o}`;return Fk.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function Hk(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Gk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s($i(this.auth,"network-request-failed")),zk.get())})}}function fd(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=$i(n,e,s);return o.customData._tokenResponse=t,o}function vE(n){return n!==void 0&&n.enterprise!==void 0}class jk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Hk(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Yk(n,e){return Os(n,"GET","/v2/recaptchaConfig",Vr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jk(n,e){return Os(n,"POST","/v1/accounts:delete",e)}async function Hd(n,e){return Os(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Eb(n,e=!1){const t=En(n),s=await t.getIdToken(e),o=cg(s);Ne(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:gu(km(o.auth_time)),issuedAtTime:gu(km(o.iat)),expirationTime:gu(km(o.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function km(n){return Number(n)*1e3}function cg(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return Td("JWT malformed, contained fewer than 3 sections"),null;try{const o=TA(t);return o?JSON.parse(o):(Td("Failed to decode base64 JWT payload"),null)}catch(o){return Td("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function TE(n){const e=cg(n);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fa(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Ls&&Kk(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function Kk({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gu(this.lastLoginAt),this.creationTime=gu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gd(n){var E;const e=n.auth,t=await n.getIdToken(),s=await Fa(n,Hd(e,{idToken:t}));Ne(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=(E=o.providerUserInfo)!=null&&E.length?Sb(o.providerUserInfo):[],c=Qk(n.providerData,l),d=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(c!=null&&c.length),h=d?p:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new vp(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,T)}async function Ab(n){const e=En(n);await Gd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Qk(n,e){return[...n.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Sb(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xk(n,e){const t=await vb(n,{},async()=>{const s=xu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=await Tb(n,o,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:s};return n.emulatorConfig&&Ka(n.emulatorConfig.host)&&(p.credentials="include"),_b.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Wk(n,e){return Os(n,"POST","/v2/accounts:revokeToken",Vr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):TE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const t=TE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await Xk(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,c=new Ma;return s&&(Ne(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(Ne(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(Ne(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ma,this.toJSON())}_performRefresh(){return Cs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(n,e){Ne(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class vi{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new $k(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new vp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Fa(this,this.stsTokenManager.getToken(this.auth,e));return Ne(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Eb(this,e)}reload(){return Ab(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new vi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Gd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ni(this.auth.app))return Promise.reject(Ns(this.auth));const e=await this.getIdToken();return await Fa(this,Jk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,h=t.createdAt??void 0,T=t.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:I,providerData:V,stsTokenManager:B}=t;Ne(E&&B,e,"internal-error");const F=Ma.fromJSON(this.name,B);Ne(typeof E=="string",e,"internal-error"),_r(s,e.name),_r(o,e.name),Ne(typeof S=="boolean",e,"internal-error"),Ne(typeof I=="boolean",e,"internal-error"),_r(l,e.name),_r(c,e.name),_r(d,e.name),_r(p,e.name),_r(h,e.name),_r(T,e.name);const ee=new vi({uid:E,auth:e,email:o,emailVerified:S,displayName:s,isAnonymous:I,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:F,createdAt:h,lastLoginAt:T});return V&&Array.isArray(V)&&(ee.providerData=V.map(te=>({...te}))),p&&(ee._redirectEventId=p),ee}static async _fromIdTokenResponse(e,t,s=!1){const o=new Ma;o.updateFromServerResponse(t);const l=new vi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Gd(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Ne(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Sb(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),d=new Ma;d.updateFromIdToken(s);const p=new vi({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:c}),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new vp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,h),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=new Map;function Is(n){ks(n instanceof Function,"Expected a class definition");let e=EE.get(n);return e?(ks(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,EE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}bb.type="NONE";const Tp=bb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(n,e,t){return`firebase:${n}:${e}:${t}`}class Da{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=Ed(this.userKey,o.apiKey,l),this.fullPersistenceKey=Ed("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Hd(this.auth,{idToken:e}).catch(()=>{});return t?vi._fromGetAccountInfoResponse(this.auth,t,e):null}return vi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Da(Is(Tp),e,s);const o=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let l=o[0]||Is(Tp);const c=Ed(s,e.config.apiKey,e.name);let d=null;for(const h of t)try{const T=await h._get(c);if(T){let E;if(typeof T=="string"){const S=await Hd(e,{idToken:T}).catch(()=>{});if(!S)break;E=await vi._fromGetAccountInfoResponse(e,S,T)}else E=vi._fromJSON(e,T);h!==l&&(d=E),l=h;break}}catch{}const p=o.filter(h=>h._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Da(l,e,s):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async h=>{if(h!==l)try{await h._remove(c)}catch{}})),new Da(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Nb(e))return"Blackberry";if(Mb(e))return"Webos";if(Cb(e))return"Safari";if((e.includes("chrome/")||Ib(e))&&!e.includes("edge/"))return"Chrome";if(Rb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function xb(n=gn()){return/firefox\//i.test(n)}function Cb(n=gn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ib(n=gn()){return/crios\//i.test(n)}function wb(n=gn()){return/iemobile/i.test(n)}function Rb(n=gn()){return/android/i.test(n)}function Nb(n=gn()){return/blackberry/i.test(n)}function Mb(n=gn()){return/webos/i.test(n)}function dg(n=gn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Zk(n=gn()){var e;return dg(n)&&!!((e=window.navigator)!=null&&e.standalone)}function eU(){return tD()&&document.documentMode===10}function Db(n=gn()){return dg(n)||Rb(n)||Mb(n)||Nb(n)||/windows phone/i.test(n)||wb(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(n,e=[]){let t;switch(n){case"Browser":t=AE(gn());break;case"Worker":t=`${AE(gn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${$a}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nU(n,e={}){return Os(n,"GET","/v2/passwordPolicy",Vr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU=6;class sU{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??iU,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new SE(this),this.idTokenSubscription=new SE(this),this.beforeStateQueue=new tU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Is(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await Da.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Hd(this,{idToken:e}),s=await vi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(ni(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=s==null?void 0:s._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(s=p.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Gd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=qk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ni(this.app))return Promise.reject(Ns(this));const t=e?En(e):null;return t&&Ne(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ni(this.app)?Promise.reject(Ns(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ni(this.app)?Promise.reject(Ns(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Is(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nU(this),t=new sU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new bu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await Wk(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Is(e)||this._popupRedirectResolver;Ne(t,this,"argument-error"),this.redirectPersistenceManager=await Da.create(this,[Is(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Pb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(ni(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&Uk(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ro(n){return En(n)}class SE{constructor(e){this.auth=e,this.observer=null,this.addObserver=uD(t=>this.observer=t)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oU(n){gf=n}function Vb(n){return gf.loadJS(n)}function aU(){return gf.recaptchaEnterpriseScript}function lU(){return gf.gapiScript}function uU(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class cU{constructor(){this.enterprise=new dU}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class dU{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const fU="recaptcha-enterprise",kb="NO_RECAPTCHA";class hU{constructor(e){this.type=fU,this.auth=Ro(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{Yk(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const h=new jk(p);return l.tenantId==null?l._agentRecaptchaConfig=h:l._tenantRecaptchaConfigs[l.tenantId]=h,c(h.siteKey)}}).catch(p=>{d(p)})})}function o(l,c,d){const p=window.grecaptcha;vE(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(h=>{c(h)}).catch(()=>{c(kb)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new cU().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{s(this.auth).then(d=>{if(!t&&vE(window.grecaptcha))o(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=aU();p.length!==0&&(p+=d),Vb(p).then(()=>{o(d,l,c)}).catch(h=>{c(h)})}}).catch(d=>{c(d)})})}}async function bE(n,e,t,s=!1,o=!1){const l=new hU(n);let c;if(o)c=kb;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,h=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return s?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Ep(n,e,t,s,o){var l;if((l=n._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await bE(n,e,t,t==="getOobCode");return s(n,c)}else return s(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await bE(n,e,t,t==="getOobCode");return s(n,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(n,e){const t=Dp(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(_o(l,e??{}))return o;Ai(o,"already-initialized")}return t.initialize({options:e})}function mU(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Is);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function Lb(n,e,t){const s=Ro(n);Ne(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=Ob(e),{host:c,port:d}=pU(e),p=d===null?"":`:${d}`,h={url:`${l}//${c}${p}/`},T=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ne(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ne(_o(h,s.config.emulator)&&_o(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=h,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,Ka(c)?(bA(`${l}//${c}${p}`),xA("Auth",!0)):gU()}function Ob(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function pU(n){const e=Ob(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:xE(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:xE(c)}}}function xE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function gU(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Cs("not implemented")}_getIdTokenResponse(e){return Cs("not implemented")}_linkToIdToken(e,t){return Cs("not implemented")}_getReauthenticationResolver(e){return Cs("not implemented")}}async function yU(n,e){return Os(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _U(n,e){return Pu(n,"POST","/v1/accounts:signInWithPassword",Vr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vU(n,e){return Pu(n,"POST","/v1/accounts:signInWithEmailLink",Vr(n,e))}async function TU(n,e){return Pu(n,"POST","/v1/accounts:signInWithEmailLink",Vr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za extends yf{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new za(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new za(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ep(e,t,"signInWithPassword",_U);case"emailLink":return vU(e,{email:this._email,oobCode:this._password});default:Ai(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ep(e,s,"signUpPassword",yU);case"emailLink":return TU(e,{idToken:t,email:this._email,oobCode:this._password});default:Ai(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pa(n,e){return Pu(n,"POST","/v1/accounts:signInWithIdp",Vr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EU="http://localhost";class Dr extends yf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Dr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ai("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const c=new Dr(s,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Pa(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Pa(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Pa(e,t)}buildRequest(){const e={requestUri:EU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=xu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AU(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function SU(n){const e=su(ru(n)).link,t=e?su(ru(e)).deep_link_id:null,s=su(ru(n)).deep_link_id;return(s?su(ru(s)).link:null)||s||t||e||n}class _f{constructor(e){const t=su(ru(e)),s=t.apiKey??null,o=t.oobCode??null,l=AU(t.mode??null);Ne(s&&o&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=SU(e);try{return new _f(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(){this.providerId=No.PROVIDER_ID}static credential(e,t){return za._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=_f.parseLink(t);return Ne(s,"argument-error"),za._fromEmailAndCode(e,s.code,s.tenantId)}}No.PROVIDER_ID="password";No.EMAIL_PASSWORD_SIGN_IN_METHOD="password";No.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu extends qb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends Vu{constructor(){super("facebook.com")}static credential(e){return Dr._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Es.credential(e.oauthAccessToken)}catch{return null}}}Es.FACEBOOK_SIGN_IN_METHOD="facebook.com";Es.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends Vu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Dr._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return As.credential(t,s)}catch{return null}}}As.GOOGLE_SIGN_IN_METHOD="google.com";As.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss extends Vu{constructor(){super("github.com")}static credential(e){return Dr._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ss.credential(e.oauthAccessToken)}catch{return null}}}Ss.GITHUB_SIGN_IN_METHOD="github.com";Ss.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs extends Vu{constructor(){super("twitter.com")}static credential(e,t){return Dr._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return bs.credential(t,s)}catch{return null}}}bs.TWITTER_SIGN_IN_METHOD="twitter.com";bs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bU(n,e){return Pu(n,"POST","/v1/accounts:signUp",Vr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await vi._fromIdTokenResponse(e,s,o),c=CE(s);return new So({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=CE(s);return new So({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function CE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd extends Ls{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,jd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new jd(e,t,s,o)}}function Bb(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?jd._fromErrorAndOperation(n,l,e,s):l})}async function xU(n,e,t=!1){const s=await Fa(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return So._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CU(n,e,t=!1){const{auth:s}=n;if(ni(s.app))return Promise.reject(Ns(s));const o="reauthenticate";try{const l=await Fa(n,Bb(s,o,e,n),t);Ne(l.idToken,s,"internal-error");const c=cg(l.idToken);Ne(c,s,"internal-error");const{sub:d}=c;return Ne(n.uid===d,s,"user-mismatch"),So._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Ai(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fb(n,e,t=!1){if(ni(n.app))return Promise.reject(Ns(n));const s="signIn",o=await Bb(n,s,e),l=await So._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(l.user),l}async function zb(n,e){return Fb(Ro(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hb(n){const e=Ro(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function IU(n,e,t){if(ni(n.app))return Promise.reject(Ns(n));const s=Ro(n),c=await Ep(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bU).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&Hb(n),p}),d=await So._fromIdTokenResponse(s,"signIn",c);return await s._updateCurrentUser(d.user),d}function wU(n,e,t){return ni(n.app)?Promise.reject(Ns(n)):zb(En(n),No.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Hb(n),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RU(n,e){return Os(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NU(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=En(n),l={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await Fa(s,RU(s.auth,l));s.displayName=c.displayName||null,s.photoURL=c.photoUrl||null;const d=s.providerData.find(({providerId:p})=>p==="password");d&&(d.displayName=s.displayName,d.photoURL=s.photoURL),await s._updateTokensIfNecessary(c)}function Gb(n,e,t,s){return En(n).onIdTokenChanged(e,t,s)}function jb(n,e,t){return En(n).beforeAuthStateChanged(e,t)}function MU(n,e,t,s){return En(n).onAuthStateChanged(e,t,s)}function DU(n){return En(n).signOut()}const Yd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Yd,"1"),this.storage.removeItem(Yd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PU=1e3,VU=10;class Jb extends Yb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Db(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);eU()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,VU):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},PU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Jb.type="LOCAL";const Kb=Jb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b extends Yb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}$b.type="SESSION";const fg=$b;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kU(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new vf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const d=Array.from(c).map(async h=>h(t.origin,l)),p=await kU(d);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const h=hg("",20);o.port1.start();const T=setTimeout(()=>{p(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(E){const S=E;if(S.data.eventId===h)switch(S.data.status){case"ack":clearTimeout(T),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(T),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(){return window}function LU(n){Qi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(){return typeof Qi().WorkerGlobalScope<"u"&&typeof Qi().importScripts=="function"}async function OU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qU(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function BU(){return Qb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb="firebaseLocalStorageDb",FU=1,Jd="firebaseLocalStorage",Wb="fbase_key";class ku{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Tf(n,e){return n.transaction([Jd],e?"readwrite":"readonly").objectStore(Jd)}function zU(){const n=indexedDB.deleteDatabase(Xb);return new ku(n).toPromise()}function Ap(){const n=indexedDB.open(Xb,FU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Jd,{keyPath:Wb})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Jd)?e(s):(s.close(),await zU(),e(await Ap()))})})}async function IE(n,e,t){const s=Tf(n,!0).put({[Wb]:e,value:t});return new ku(s).toPromise()}async function HU(n,e){const t=Tf(n,!1).get(e),s=await new ku(t).toPromise();return s===void 0?null:s.value}function wE(n,e){const t=Tf(n,!0).delete(e);return new ku(t).toPromise()}const GU=800,jU=3;class Zb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ap(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>jU)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Qb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vf._getInstance(BU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await OU(),!this.activeServiceWorker)return;this.sender=new UU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ap();return await IE(e,Yd,"1"),await wE(e,Yd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>IE(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>HU(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>wE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Tf(o,!1).getAll();return new ku(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),GU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Zb.type="LOCAL";const ex=Zb;new Du(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YU(n,e){return e?Is(e):(Ne(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg extends yf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Pa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Pa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Pa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function JU(n){return Fb(n.auth,new mg(n),n.bypassAuthState)}function KU(n){const{auth:e,user:t}=n;return Ne(t,e,"internal-error"),CU(t,new mg(n),n.bypassAuthState)}async function $U(n){const{auth:e,user:t}=n;return Ne(t,e,"internal-error"),xU(t,new mg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return JU;case"linkViaPopup":case"linkViaRedirect":return $U;case"reauthViaPopup":case"reauthViaRedirect":return KU;default:Ai(this.auth,"internal-error")}}resolve(e){ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QU=new Du(2e3,1e4);class xa extends tx{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,xa.currentPopupAction&&xa.currentPopupAction.cancel(),xa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){ks(this.filter.length===1,"Popup operations only handle one event");const e=hg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject($i(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject($i(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($i(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,QU.get())};e()}}xa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XU="pendingRedirect",Ad=new Map;class WU extends tx{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Ad.get(this.auth._key());if(!e){try{const s=await ZU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Ad.set(this.auth._key(),e)}return this.bypassAuthState||Ad.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZU(n,e){const t=nL(e),s=tL(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function eL(n,e){Ad.set(n._key(),e)}function tL(n){return Is(n._redirectPersistence)}function nL(n){return Ed(XU,n.config.apiKey,n.name)}async function iL(n,e,t=!1){if(ni(n.app))return Promise.reject(Ns(n));const s=Ro(n),o=YU(s,e),c=await new WU(s,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=600*1e3;class rL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!nx(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError($i(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sL&&this.cachedEventUids.clear(),this.cachedEventUids.has(RE(e))}saveEventToCache(e){this.cachedEventUids.add(RE(e)),this.lastProcessedEventTime=Date.now()}}function RE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function nx({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function oL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nx(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aL(n,e={}){return Os(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uL=/^https?/;async function cL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await aL(n);for(const t of e)try{if(dL(t))return}catch{}Ai(n,"unauthorized-domain")}function dL(n){const e=_p(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!uL.test(t))return!1;if(lL.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL=new Du(3e4,6e4);function NE(){const n=Qi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function hL(n){return new Promise((e,t)=>{var o,l,c;function s(){NE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{NE(),t($i(n,"network-request-failed"))},timeout:fL.get()})}if((l=(o=Qi().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Qi().gapi)!=null&&c.load)s();else{const d=uU("iframefcb");return Qi()[d]=()=>{gapi.load?s():t($i(n,"network-request-failed"))},Vb(`${lU()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Sd=null,e})}let Sd=null;function mL(n){return Sd=Sd||hL(n),Sd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=new Du(5e3,15e3),gL="__/auth/iframe",yL="emulator/auth/iframe",_L={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function TL(n){const e=n.config;Ne(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ug(e,yL):`https://${n.config.authDomain}/${gL}`,s={apiKey:e.apiKey,appName:n.name,v:$a},o=vL.get(n.config.apiHost);o&&(s.eid=o);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${xu(s).slice(1)}`}async function EL(n){const e=await mL(n),t=Qi().gapi;return Ne(t,n,"internal-error"),e.open({where:document.body,url:TL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_L,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const c=$i(n,"network-request-failed"),d=Qi().setTimeout(()=>{l(c)},pL.get());function p(){Qi().clearTimeout(d),o(s)}s.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},SL=500,bL=600,xL="_blank",CL="http://localhost";class ME{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function IL(n,e,t,s=SL,o=bL){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const p={...AL,width:s.toString(),height:o.toString(),top:l,left:c},h=gn().toLowerCase();t&&(d=Ib(h)?xL:t),xb(h)&&(e=e||CL,p.scrollbars="yes");const T=Object.entries(p).reduce((S,[I,V])=>`${S}${I}=${V},`,"");if(Zk(h)&&d!=="_self")return wL(e||"",d),new ME(null);const E=window.open(e||"",d,T);Ne(E,n,"popup-blocked");try{E.focus()}catch{}return new ME(E)}function wL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL="__/auth/handler",NL="emulator/auth/handler",ML=encodeURIComponent("fac");async function DE(n,e,t,s,o,l){Ne(n.config.authDomain,n,"auth-domain-config-required"),Ne(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:$a,eventId:o};if(e instanceof qb){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",lD(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,E]of Object.entries({}))c[T]=E}if(e instanceof Vu){const T=e.getScopes().filter(E=>E!=="");T.length>0&&(c.scopes=T.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const T of Object.keys(d))d[T]===void 0&&delete d[T];const p=await n._getAppCheckToken(),h=p?`#${ML}=${encodeURIComponent(p)}`:"";return`${DL(n)}?${xu(d).slice(1)}${h}`}function DL({config:n}){return n.emulator?ug(n,NL):`https://${n.authDomain}/${RL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="webStorageSupport";class PL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fg,this._completeRedirectFn=iL,this._overrideRedirectResult=eL}async _openPopup(e,t,s,o){var c;ks((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await DE(e,t,s,_p(),o);return IL(e,l,hg())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await DE(e,t,s,_p(),o);return LU(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(ks(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await EL(e),s=new rL(e);return t.register("authEvent",o=>(Ne(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Um,{type:Um},o=>{var c;const l=(c=o==null?void 0:o[0])==null?void 0:c[Um];l!==void 0&&t(!!l),Ai(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=cL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Db()||Cb()||dg()}}const ix=PL;var PE="@firebase/auth",VE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function UL(n){Va(new vo("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=s.options;Ne(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pb(n)},h=new rU(s,o,l,p);return mU(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Va(new vo("auth-internal",e=>{const t=Ro(e.getProvider("auth").getImmediate());return(s=>new VL(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Sr(PE,VE,kL(n)),Sr(PE,VE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL=300,OL=SA("authIdTokenMaxAge")||LL;let kE=null;const qL=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>OL)return;const o=t==null?void 0:t.token;kE!==o&&(kE=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function sx(n=RA()){const e=Dp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Ub(n,{popupRedirectResolver:ix,persistence:[ex,Kb,fg]}),s=SA("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=qL(l.toString());jb(t,c,()=>c(t.currentUser)),Gb(t,d=>c(d))}}const o=EA("auth");return o&&Lb(t,`http://${o}`),t}function BL(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}oU({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const l=$i("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",BL().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});UL("Browser");const hd=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeURL:_f,AuthCredential:yf,EmailAuthCredential:za,EmailAuthProvider:No,FacebookAuthProvider:Es,GithubAuthProvider:Ss,GoogleAuthProvider:As,OAuthCredential:Dr,TwitterAuthProvider:bs,beforeAuthStateChanged:jb,browserLocalPersistence:Kb,browserPopupRedirectResolver:ix,browserSessionPersistence:fg,connectAuthEmulator:Lb,createUserWithEmailAndPassword:IU,getAuth:sx,getIdTokenResult:Eb,inMemoryPersistence:Tp,indexedDBLocalPersistence:ex,initializeAuth:Ub,onAuthStateChanged:MU,onIdTokenChanged:Gb,prodErrorMap:pb,reload:Ab,signInWithCredential:zb,signInWithEmailAndPassword:wU,signOut:DU,updateProfile:NU},Symbol.toStringTag,{value:"Module"}));let Lm=null,Ts=null,yi=null;const FL=()=>{try{return Ra().hasFirebase?(Lm=wA(kt.firebase),Ts=ib(Lm),yi=sx(Lm),console.log("   Firebase "),{success:!0}):(console.warn(" :  Firebase API  .    Firebase."),{success:!1,error:" Firebase  "})}catch(n){return console.error("    Firebase:",n),{success:!1,error:n instanceof Error?n.message:"  "}}};FL();const xs={async signUp(n,e,t){if(!yi)return{success:!1,error:"Firebase  "};try{const{createUserWithEmailAndPassword:s,updateProfile:o}=await vs(async()=>{const{createUserWithEmailAndPassword:c,updateProfile:d}=await Promise.resolve().then(()=>hd);return{createUserWithEmailAndPassword:c,updateProfile:d}},void 0),l=await s(yi,n,e);return await o(l.user,{displayName:t}),await this.saveData("users",l.user.uid,{email:n,displayName:t,createdAt:new Date().toISOString(),transactions:[],categories:[],cards:{},bankAccounts:{},investments:{currentValue:0},installments:[]}),{success:!0,user:l.user}}catch(s){return console.error("  :",s),{success:!1,error:s instanceof Error?s.message:"  "}}},async signIn(n,e){if(!yi)return{success:!1,error:"Firebase  "};try{const{signInWithEmailAndPassword:t}=await vs(async()=>{const{signInWithEmailAndPassword:o}=await Promise.resolve().then(()=>hd);return{signInWithEmailAndPassword:o}},void 0);return{success:!0,user:(await t(yi,n,e)).user}}catch(t){return console.error("   :",t),{success:!1,error:t instanceof Error?t.message:"  "}}},async signOut(){if(!yi)return{success:!1,error:"Firebase  "};try{const{signOut:n}=await vs(async()=>{const{signOut:e}=await Promise.resolve().then(()=>hd);return{signOut:e}},void 0);return await n(yi),{success:!0}}catch(n){return console.error("   :",n),{success:!1,error:n instanceof Error?n.message:"  "}}},async getCurrentUser(){return yi?yi.currentUser:null},async onAuthStateChanged(n){if(!yi)return n(null),()=>{};try{const{onAuthStateChanged:e}=await vs(async()=>{const{onAuthStateChanged:t}=await Promise.resolve().then(()=>hd);return{onAuthStateChanged:t}},void 0);return e(yi,t=>{console.log("    :",t?` : ${t.email}`:"  "),n(t)})}catch(e){return console.error("    onAuthStateChanged:",e),n(null),()=>{}}},async saveData(n,e,t){if(!Ts)return{success:!1,error:"Firebase  "};try{const{doc:s,setDoc:o}=await vs(async()=>{const{doc:c,setDoc:d}=await Promise.resolve().then(()=>dd);return{doc:c,setDoc:d}},void 0),l=s(Ts,n,e);return await o(l,{...t,lastUpdated:new Date().toISOString()}),{success:!0,id:e}}catch(s){return console.error("   :",s),{success:!1,error:s instanceof Error?s.message:"  "}}},async getData(n,e){if(!Ts)return{success:!1,error:"Firebase  "};try{const{doc:t,getDoc:s}=await vs(async()=>{const{doc:c,getDoc:d}=await Promise.resolve().then(()=>dd);return{doc:c,getDoc:d}},void 0),o=t(Ts,n,e),l=await s(o);return l.exists()?{success:!0,data:l.data()}:{success:!1,error:"  "}}catch(t){return console.error("   :",t),t instanceof Error?t.message.includes("permission")?{success:!1,error:"  :       Firestore"}:t.message.includes("network")?{success:!1,error:"  :    "}:{success:!1,error:t.message}:{success:!1,error:"  "}}},async getAllDocuments(n){if(!Ts)return{success:!1,error:"Firebase  "};try{const{collection:e,getDocs:t}=await vs(async()=>{const{collection:l,getDocs:c}=await Promise.resolve().then(()=>dd);return{collection:l,getDocs:c}},void 0),s=await t(e(Ts,n)),o=[];return s.forEach(l=>{o.push({id:l.id,...l.data()})}),{success:!0,data:o}}catch(e){return console.error("   :",e),{success:!1,error:e instanceof Error?e.message:"  "}}},async deleteDocument(n,e){if(!Ts)return{success:!1,error:"Firebase  "};try{const{doc:t,deleteDoc:s}=await vs(async()=>{const{doc:l,deleteDoc:c}=await Promise.resolve().then(()=>dd);return{doc:l,deleteDoc:c}},void 0),o=t(Ts,n,e);return await s(o),{success:!0}}catch(t){return console.error("   :",t),{success:!1,error:t instanceof Error?t.message:"  "}}},async syncLocalDataToFirebase(n,e){try{return await this.saveData("users",n,{financialData:e,syncTimestamp:new Date().toISOString()})}catch(t){return console.error("   :",t),{success:!1,error:t instanceof Error?t.message:"  "}}},async getDataFromFirebase(n){var e;try{const t=await this.getData("users",n);return t.success&&((e=t.data)!=null&&e.financialData)?{success:!0,data:t.data.financialData}:{success:!1,error:"   "}}catch(t){return console.error("     Firebase:",t),{success:!1,error:t instanceof Error?t.message:"  "}}}},UE=({onSuccess:n,onClose:e,hideCloseButton:t=!1})=>{const[s,o]=me.useState(!0),[l,c]=me.useState({email:"",password:"",displayName:""}),[d,p]=me.useState(!1),[h,T]=me.useState(""),E=async I=>{I.preventDefault(),p(!0),T("");try{let V;if(s)V=await xs.signIn(l.email,l.password);else{if(!l.displayName.trim()){T(" "),p(!1);return}V=await xs.signUp(l.email,l.password,l.displayName)}V.success?n(V.user):T(V.error||"   ")}catch{T("   ")}finally{p(!1)}},S=I=>{c(V=>({...V,[I.target.name]:I.target.value}))};return _.jsx("div",{className:`${t?"":"fixed inset-0 bg-black/60 backdrop-blur-sm z-[70] overflow-hidden"} flex items-center justify-center p-4`,style:t?{}:{position:"fixed",top:0,left:0,right:0,bottom:0},children:_.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md animate-fade-in",children:_.jsxs("div",{className:"p-6",children:[_.jsxs("div",{className:"flex justify-between items-center mb-6",children:[_.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:s?"  ":"   "}),!t&&_.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 transition-colors",children:""})]}),_.jsxs("form",{onSubmit:E,className:"space-y-4",children:[!s&&_.jsxs("div",{children:[_.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-slate-700 mb-1",children:" "}),_.jsx("input",{type:"text",id:"displayName",name:"displayName",value:l.displayName,onChange:S,className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"  ",required:!s})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-1",children:" "}),_.jsx("input",{type:"email",id:"email",name:"email",value:l.email,onChange:S,className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"example@email.com",required:!0})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 mb-1",children:" "}),_.jsx("input",{type:"password",id:"password",name:"password",value:l.password,onChange:S,className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:" ",required:!0,minLength:6})]}),h&&_.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:_.jsx("p",{className:"text-red-600 text-sm",children:h})}),_.jsx("button",{type:"submit",disabled:d,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-semibold rounded-lg transition-colors",children:d?"  ...":s?"  ":"  "})]}),_.jsx("div",{className:"mt-6 text-center",children:_.jsx("button",{onClick:()=>o(!s),className:"text-blue-600 hover:text-blue-700 font-medium",children:s?"     ":"    "})})]})})})},rx=()=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),_.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),pg=()=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:[_.jsx("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),_.jsx("path",{fillRule:"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"})]}),zL=()=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:[_.jsx("path",{d:"M9.5 2.672a.5.5 0 1 0 1 0V.672a.5.5 0 0 0-1 0v2zm4.5.012a.5.5 0 0 0-.707-.707l-1.414 1.414a.5.5 0 0 0 .707.707l1.414-1.414zM11.328 14a.5.5 0 0 0 .707.707l1.414-1.414a.5.5 0 0 0-.707-.707l-1.414 1.414zM16 8a.5.5 0 0 0-.5-.5h-2a.5.5 0 0 0 0 1h2a.5.5 0 0 0 .5-.5zM2 8a.5.5 0 0 0-.5-.5h-2a.5.5 0 0 0 0 1h2A.5.5 0 0 0 2 8zm4.5-.012a.5.5 0 0 0 .707-.707L5.793 5.864a.5.5 0 1 0-.707.707L6.5 7.988zM4.672 2.5a.5.5 0 0 0-.707.707l1.414 1.414a.5.5 0 0 0 .707-.707L4.672 2.5zM.5 8a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 0-1h-2A.5.5 0 0 0 .5 8zM8 0a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 1 0v-2A.5.5 0 0 0 8 0z"}),_.jsx("path",{d:"M8 4a4 4 0 1 1 0 8 4 4 0 0 1 0-8zm0 1a3 3 0 1 0 0 6 3 3 0 0 0 0-6z"})]}),HL=({className:n})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-6 w-6 ${n}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),GL=({className:n})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-6 w-6 ${n}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),jL=({className:n})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-6 w-6 ${n}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h7"})}),YL=({className:n})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-6 w-6 ${n}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h.01M12 12h.01M19 12h.01M5 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"})}),JL=({className:n})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-8 w-8 ${n}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),gg=({className:n})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),Om=({className:n})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),qm=({className:n})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),KL=({className:n})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})}),$L=({selectedYear:n,selectedMonth:e,onYearChange:t,onMonthChange:s,onAddTransaction:o,currentUser:l,onSignOut:c})=>{const d=me.useMemo(()=>{const h=new Date().getFullYear(),T=[];for(let E=h+1;E>=2020;E--)T.push(E);return T},[]),p=me.useMemo(()=>[{value:"all",label:" "},{value:1,label:""},{value:2,label:""},{value:3,label:""},{value:4,label:""},{value:5,label:""},{value:6,label:""},{value:7,label:""},{value:8,label:""},{value:9,label:""},{value:10,label:""},{value:11,label:""},{value:12,label:""}],[]);return _.jsx("header",{className:"bg-slate-50/95 backdrop-blur-lg border-b border-slate-200 py-3 shadow-sm",children:_.jsx("div",{className:"container mx-auto px-4",children:_.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center text-center sm:text-right gap-4",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center text-xl",children:""}),_.jsxs("div",{children:[_.jsx("h1",{className:"text-xl font-bold text-slate-900 tracking-wide",children:"  "}),_.jsx("p",{className:"text-xs text-slate-500",children:"Developed by K.A Team"})]})]}),_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsxs("div",{className:"flex items-center gap-2 bg-slate-200 p-1.5 rounded-lg",children:[_.jsx("select",{value:n,onChange:h=>t(parseInt(h.target.value)),className:"bg-slate-200 text-slate-800 font-semibold border-0 focus:ring-0 appearance-none p-2 rounded-md",children:d.map(h=>_.jsx("option",{value:h,children:h},h))}),_.jsx("select",{value:e,onChange:h=>s(h.target.value==="all"?"all":parseInt(h.target.value)),className:"bg-slate-200 text-slate-800 font-semibold border-0 focus:ring-0 appearance-none p-2 rounded-md",children:p.map(h=>_.jsx("option",{value:h.value,children:h.label},h.value))})]}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsxs("div",{className:"text-right",children:[_.jsx("p",{className:"font-semibold text-slate-800 text-sm",children:l.displayName||""}),_.jsx("p",{className:"text-xs text-slate-500",children:l.email})]}),_.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:_.jsx("span",{className:"text-blue-600 font-bold text-sm",children:(l.displayName||l.email||"U").charAt(0).toUpperCase()})}),_.jsx("button",{onClick:c,className:"px-3 py-1 text-xs bg-red-100 hover:bg-red-200 text-red-700 rounded-lg transition-colors",children:" "})]}),_.jsxs("button",{onClick:o,className:"hidden md:flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-2.5 rounded-lg transition-all duration-300",children:[_.jsx(JL,{className:"w-5 h-5"}),_.jsx("span",{children:" "})]})]})]})})})},Bm=[{id:"summary",label:" ",icon:HL},{id:"analysis",label:" ",icon:GL},{id:"transactions",label:" ",icon:jL},{id:"budget",label:" "},{id:"investment",label:" "},{id:"ai-assistant",label:"  "},{id:"cards",label:"  "},{id:"bank",label:" "},{id:"installments",label:" "},{id:"settings",label:" "}],LE=["summary","analysis","transactions"],QL=({activeTab:n,setActiveTab:e})=>{const[t,s]=me.useState(!1),o=d=>{e(d),s(!1)},l=Bm.filter(d=>LE.includes(d.id)),c=Bm.filter(d=>!LE.includes(d.id));return _.jsxs(_.Fragment,{children:[_.jsx("div",{className:"hidden md:flex flex-wrap justify-center mb-8 tab-bar rounded-xl p-2",children:Bm.map(d=>_.jsx("button",{onClick:()=>o(d.id),className:`tab-btn px-4 py-2 mx-1 mb-1 rounded-lg font-semibold text-sm flex items-center gap-2 ${n===d.id?"active":""}`,children:d.label},d.id))}),_.jsxs("div",{className:"md:hidden fixed bottom-0 left-0 right-0 h-20 bg-white/80 backdrop-blur-lg border-t border-slate-200 z-40 flex justify-around items-center",children:[l.map(d=>{const p=d.icon;return _.jsxs("button",{onClick:()=>o(d.id),className:`flex flex-col items-center justify-center gap-1 transition-colors w-full h-full ${n===d.id?"text-blue-600":"text-slate-500 hover:text-slate-900"}`,children:[p&&_.jsx(p,{}),_.jsx("span",{className:"text-xs",children:d.label.split(" ")[1]})]},d.id)}),_.jsxs("button",{onClick:()=>s(!t),className:`flex flex-col items-center justify-center gap-1 transition-colors w-full h-full ${t?"text-blue-600":"text-slate-500 hover:text-slate-900"}`,children:[_.jsx(YL,{}),_.jsx("span",{className:"text-xs",children:""})]})]}),t&&_.jsx("div",{className:"md:hidden fixed inset-0 bg-gray-900/50 backdrop-blur-sm z-50 flex justify-center items-end",onClick:()=>s(!1),children:_.jsxs("div",{className:"bg-white w-full rounded-t-2xl p-4 border-t border-slate-200 animate-fade-in",onClick:d=>d.stopPropagation(),children:[_.jsx("div",{className:"w-16 h-1 bg-slate-300 rounded-full mx-auto mb-4"}),_.jsx("div",{className:"grid grid-cols-3 gap-4 text-center",children:c.map(d=>_.jsxs("button",{onClick:()=>o(d.id),className:`p-3 rounded-lg flex flex-col items-center gap-2 ${n===d.id?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:[_.jsx("span",{className:"text-2xl",children:d.label.split(" ")[0]}),_.jsx("span",{className:"text-xs font-semibold",children:d.label.split(" ")[1]})]},d.id))})]})})]})},XL=({className:n})=>_.jsx("div",{className:`absolute inset-0 -translate-x-full animate-[shimmer_2s_infinite] bg-gradient-to-r from-transparent via-slate-200/80 to-transparent ${n}`}),Fm=()=>_.jsxs("div",{className:"glass-card p-6 h-96 relative overflow-hidden",children:[_.jsx("div",{className:"h-6 w-1/2 bg-slate-200 rounded mb-6"}),_.jsxs("div",{className:"space-y-4",children:[_.jsx("div",{className:"h-4 w-full bg-slate-200 rounded"}),_.jsx("div",{className:"h-4 w-5/6 bg-slate-200 rounded"}),_.jsx("div",{className:"h-4 w-full bg-slate-200 rounded"}),_.jsx("div",{className:"h-4 w-3/4 bg-slate-200 rounded"})]}),_.jsx(XL,{})]}),WL=()=>_.jsxs("div",{className:"container mx-auto px-2 sm:px-4 max-w-7xl mt-8 mb-20",children:[_.jsx("div",{className:"h-16 mb-3"}),_.jsx("div",{className:"flex flex-wrap justify-center mb-8 bg-slate-100 rounded-xl p-2 h-14"}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-fade-in",children:[_.jsx(Fm,{}),_.jsx(Fm,{}),_.jsx(Fm,{})]})]}),et=n=>(n||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),ZL=({title:n,details:e,barColor:t})=>_.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow h-32 flex flex-col justify-between",children:[_.jsxs("div",{className:"flex justify-between items-start",children:[_.jsx("h4",{className:"font-bold text-sm text-slate-800",children:n}),_.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:_.jsx("span",{className:"text-blue-600 text-sm",children:""})})]}),_.jsxs("div",{className:"bg-slate-50 p-2 rounded-lg border border-gray-200",children:[_.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[_.jsx("span",{className:"text-slate-600",children:":"}),_.jsx("span",{className:"font-semibold number-display text-slate-900 text-xs",children:et(e.balance)})]}),_.jsxs("div",{className:"flex justify-between text-xs",children:[_.jsx("span",{className:"text-slate-600",children:":"}),_.jsx("span",{className:"font-semibold number-display text-emerald-700 text-xs",children:et(e.available)})]})]}),_.jsx("div",{className:"bg-slate-200 rounded-full h-1.5 overflow-hidden",children:_.jsx("div",{className:`${t} rounded-full h-1.5 transition-all duration-300`,style:{width:`${Math.min(100,e.usagePercentage)}%`}})})]}),e4=({calculations:n,categories:e})=>{const t=Object.values(n.expensesByCategory).reduce((o,l)=>o+Number(l),0);if(t===0)return _.jsx("p",{className:"text-slate-500 text-center p-4 text-sm",children:"     ."});const s=Object.entries(n.expensesByCategory).sort(([,o],[,l])=>l-o);return _.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto pr-2",children:s.map(([o,l])=>{const c=e.find(p=>p.id===o);c&&`${c.icon}${c.name}`;const d=Number(l)/t*100;return _.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow h-20 flex flex-col justify-between",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"text-base",children:(c==null?void 0:c.icon)||""}),_.jsx("span",{className:"font-medium text-slate-700 truncate text-sm",title:c==null?void 0:c.name,children:(c==null?void 0:c.name)||" "})]}),_.jsx("span",{className:"font-semibold text-slate-900 number-display text-sm bg-slate-50 px-2 py-1 rounded border border-gray-200",children:et(l)})]}),_.jsx("div",{className:"mt-2 bg-slate-200 rounded-full h-1.5 overflow-hidden",children:_.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-1.5 rounded-full transition-all duration-500",style:{width:`${d.toFixed(1)}%`}})}),_.jsxs("div",{className:"text-xs text-slate-500 mt-1 text-center",children:[d.toFixed(1),"%"]})]},o)})})},t4=({calculations:n,categories:e})=>{const{totalIncome:t,totalExpenses:s,cardDetails:o,cardPayments:l,bankAccountDetails:c,totalDebt:d,totalAvailable:p,totalLimits:h,totalBankBalance:T}=n,E=t-s,S=["bg-blue-500","bg-red-500","bg-green-500","bg-purple-500","bg-yellow-500"];return _.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 animate-fade-in",children:[_.jsxs("div",{className:"card-consistent xl:col-span-1",children:[_.jsx("h3",{className:"font-semibold text-lg text-slate-800 mb-4",children:"   "}),_.jsx("div",{className:"space-y-4",children:Object.values(o).map((I,V)=>_.jsx(ZL,{title:I.name,details:I,barColor:S[V%S.length]},I.id))}),_.jsx("div",{className:"mt-4 p-3 bg-slate-100 rounded-lg",children:_.jsxs("div",{className:"space-y-3",children:[_.jsxs("div",{className:"bg-red-50 p-3 rounded-lg border border-red-200 text-center",children:[_.jsx("p",{className:"text-red-600 font-semibold text-xs mb-2",children:" "}),_.jsx("p",{className:"font-bold text-sm text-red-600 number-display",children:et(d)})]}),_.jsxs("div",{className:"bg-emerald-50 p-3 rounded-lg border border-emerald-200 text-center",children:[_.jsx("p",{className:"text-emerald-600 font-semibold text-xs mb-2",children:" "}),_.jsx("p",{className:"font-bold text-sm text-emerald-600 number-display",children:et(p)})]}),_.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200 text-center",children:[_.jsx("p",{className:"text-blue-600 font-semibold text-xs mb-2 whitespace-nowrap",children:" "}),_.jsx("p",{className:"font-bold text-sm text-blue-600 number-display",children:et(h)})]})]})})]}),_.jsxs("div",{className:"card-consistent xl:col-span-1",children:[_.jsx("h3",{className:"font-semibold text-lg text-slate-800 mb-4",children:"   "}),_.jsx("div",{className:"space-y-3",children:Object.values(c).map(I=>{const V=I.balance>0?"bank-card-positive":I.balance<0?"bank-card-negative":"bank-card-neutral";return _.jsxs("div",{className:`card-consistent ${V} h-32 flex flex-col justify-between`,children:[_.jsxs("div",{className:"flex justify-between items-start",children:[_.jsx("h3",{className:"font-semibold text-lg text-slate-800",children:I.name}),_.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:_.jsx("span",{className:"text-blue-600 text-sm",children:""})})]}),_.jsx("div",{className:"text-center",children:_.jsx("p",{className:"font-bold text-2xl text-blue-900 number-display",children:et(I.balance)})}),_.jsxs("div",{className:"flex justify-center gap-6 mt-1",children:[_.jsxs("div",{className:"text-center",children:[_.jsx("p",{className:"text-emerald-600 font-semibold text-xs mb-0.5",children:""}),_.jsxs("p",{className:"text-emerald-700 font-bold text-sm",children:["+",et(I.deposits)]})]}),_.jsxs("div",{className:"text-center",children:[_.jsx("p",{className:"text-red-600 font-semibold text-xs mb-0.5",children:""}),_.jsxs("p",{className:"text-red-700 font-bold text-sm",children:["-",et(I.withdrawals)]})]})]})]},I.id)})}),_.jsxs("div",{className:"mt-4 card-consistent text-center",children:[_.jsx("h3",{className:"font-semibold text-lg text-slate-800 mb-2",children:"   "}),_.jsx("p",{className:"font-bold text-xl text-blue-900 number-display",children:et(T)})]})]}),_.jsxs("div",{className:"card-consistent xl:col-span-1",children:[_.jsx("h3",{className:"font-semibold text-lg text-slate-800 mb-4",children:"   "}),_.jsxs("div",{className:"space-y-2 text-sm",children:[_.jsxs("div",{className:"flex justify-between",children:[_.jsx("span",{children:" :"}),_.jsx("span",{className:"font-bold text-sm text-emerald-500 number-display",children:et(t)})]}),_.jsxs("div",{className:"flex justify-between",children:[_.jsx("span",{children:" :"}),_.jsx("span",{className:"font-bold text-sm text-red-500 number-display",children:et(s)})]}),_.jsx("hr",{className:"my-2 border-slate-200"}),Object.values(o).map((I,V)=>_.jsxs("div",{className:"flex justify-between text-xs",children:[_.jsxs("span",{className:"text-slate-500",children:[" ",I.name,":"]}),_.jsx("span",{className:`font-semibold ${S[V%S.length].replace("bg-","text-")} number-display`,children:et(I.balance+(l[I.id]||0))})]},I.id)),_.jsx("hr",{className:"my-2 border-slate-200 border-dashed"}),Object.entries(l).map(([I,V])=>{var B;return _.jsxs("div",{className:"flex justify-between text-xs",children:[_.jsxs("span",{className:"text-slate-500",children:["  ",(B=o[I])==null?void 0:B.name,":"]}),_.jsx("span",{className:"font-semibold text-emerald-500 number-display",children:et(V)})]},I)}),_.jsx("hr",{className:"my-2 border-slate-200"}),_.jsxs("div",{className:"flex justify-between font-bold text-sm",children:[_.jsx("span",{children:":"}),_.jsx("span",{className:`number-display ${E>=0?"text-emerald-500":"text-red-500"}`,children:et(E)})]})]})]}),_.jsxs("div",{className:"card-consistent xl:col-span-1",children:[_.jsx("h3",{className:"font-semibold text-lg text-slate-800 mb-4",children:"  "}),_.jsx(e4,{calculations:n,categories:e})]})]})},n4=({transactions:n,allTransactions:e,categories:t,deleteTransaction:s,editTransaction:o,state:l})=>{const[c,d]=me.useState(""),[p,h]=me.useState(""),[T,E]=me.useState(""),[S,I]=me.useState(""),[V,B]=me.useState(""),F=Y=>{const ae={cash:" ","tabby-bnpl":"  (BNPL)","tamara-bnpl":"  (BNPL)"};return ae[Y]?ae[Y]:l.cards[Y]?` ${l.cards[Y].name}`:l.bankAccounts[Y]?` ${l.bankAccounts[Y].name}`:Y},ee=Y=>{const ae={income:" ",expense:" ","bnpl-payment":"  ","investment-deposit":"  ","investment-withdrawal":"  "};if(ae[Y])return ae[Y];if(Y.endsWith("-payment")){const Z=Y.replace("-payment","");if(l.cards[Z])return`  ${l.cards[Z].name}`}return Y},te=me.useMemo(()=>{let Y=n;if(S&&V){const ae=new Date(S),Z=new Date(V);Z.setHours(23,59,59,999),Y=e.filter(R=>{const M=new Date(R.date);return M>=ae&&M<=Z})}return Y=Y.filter(ae=>{const Z=c.toLowerCase(),R=t.find(k=>k.id===ae.categoryId),M=ae.description.toLowerCase().includes(Z)||(R==null?void 0:R.name.toLowerCase().includes(Z)),N=!p||ae.paymentMethod===p,L=!T||ae.categoryId===T;return M&&N&&L}),Y.sort((ae,Z)=>{const R=parseInt(ae.id.replace("trans-","").split("-")[0]);return parseInt(Z.id.replace("trans-","").split("-")[0])-R})},[n,e,c,p,T,S,V,t]),K=me.useMemo(()=>te.reduce((Y,ae)=>(ae.type==="income"||ae.type.toString().includes("payment")||ae.type==="investment-withdrawal"?Y.positive+=ae.amount:Y.negative+=ae.amount,Y),{positive:0,negative:0}),[te]);return _.jsx("div",{className:"space-y-6 animate-fade-in",children:_.jsxs("div",{className:"glass-card p-6",children:[_.jsx("h3",{className:"text-lg sm:text-xl font-bold text-slate-900 mb-4",children:"   "}),_.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 items-end p-4 bg-slate-100 rounded-lg mb-6",children:[_.jsxs("div",{children:[_.jsx("label",{htmlFor:"dateFrom",className:"block text-sm font-medium text-slate-600 mb-1",children:" "}),_.jsx("input",{type:"date",id:"dateFrom",value:S,onChange:Y=>I(Y.target.value),className:"w-full p-2"})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"dateTo",className:"block text-sm font-medium text-slate-600 mb-1",children:" "}),_.jsx("input",{type:"date",id:"dateTo",value:V,onChange:Y=>B(Y.target.value),className:"w-full p-2"})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"filterMethod",className:"block text-sm font-medium text-slate-600 mb-1",children:" "}),_.jsxs("select",{id:"filterMethod",value:p,onChange:Y=>h(Y.target.value),className:"p-2 w-full",children:[_.jsx("option",{value:"",children:" "}),Object.values(l.bankAccounts).map(Y=>_.jsxs("option",{value:Y.id,children:[" ",Y.name]},Y.id)),_.jsx("option",{value:"cash",children:" "}),Object.values(l.cards).map(Y=>_.jsxs("option",{value:Y.id,children:[" ",Y.name]},Y.id)),_.jsx("option",{value:"tabby-bnpl",children:" "}),_.jsx("option",{value:"tamara-bnpl",children:" "})]})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"filterCategory",className:"block text-sm font-medium text-slate-600 mb-1",children:""}),_.jsxs("select",{id:"filterCategory",value:T,onChange:Y=>E(Y.target.value),className:"p-2 w-full",children:[_.jsx("option",{value:"",children:" "}),t.map(Y=>_.jsx("option",{value:Y.id,children:Y.name},Y.id))]})]}),_.jsxs("div",{className:"sm:col-span-2 lg:col-span-4",children:[_.jsx("label",{htmlFor:"searchTerm",className:"block text-sm font-medium text-slate-600 mb-1",children:" "}),_.jsx("input",{type:"text",id:"searchTerm",placeholder:"...",value:c,onChange:Y=>d(Y.target.value),className:"p-2 w-full"})]})]}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center mb-6",children:[_.jsxs("div",{className:"card-consistent",children:[_.jsxs("div",{className:"flex justify-between items-start mb-3",children:[_.jsx("h3",{className:"font-semibold text-lg text-emerald-700",children:" "}),_.jsx("div",{className:"w-8 h-8 bg-emerald-100 rounded-full flex items-center justify-center",children:_.jsx("span",{className:"text-emerald-600 text-lg",children:""})})]}),_.jsx("div",{className:"bg-emerald-50 p-3 rounded-lg border border-emerald-200",children:_.jsx("p",{className:"font-bold text-sm text-emerald-800 number-display",children:et(K.positive)})})]}),_.jsxs("div",{className:"card-consistent",children:[_.jsxs("div",{className:"flex justify-between items-start mb-3",children:[_.jsx("h3",{className:"font-semibold text-lg text-red-700",children:" "}),_.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:_.jsx("span",{className:"text-red-600 text-lg",children:""})})]}),_.jsx("div",{className:"bg-red-50 p-3 rounded-lg border border-red-200",children:_.jsx("p",{className:"font-bold text-sm text-red-800 number-display",children:et(K.negative)})})]}),_.jsxs("div",{className:"card-consistent",children:[_.jsxs("div",{className:"flex justify-between items-start mb-3",children:[_.jsx("h3",{className:"font-semibold text-lg text-sky-700",children:""}),_.jsx("div",{className:"w-8 h-8 bg-sky-100 rounded-full flex items-center justify-center",children:_.jsx("span",{className:"text-sky-600 text-lg",children:""})})]}),_.jsx("div",{className:"bg-sky-50 p-3 rounded-lg border border-sky-200",children:_.jsx("p",{className:"font-bold text-sm text-sky-800 number-display",children:et(K.positive-K.negative)})})]})]}),_.jsxs("div",{className:"overflow-x-auto",children:[_.jsxs("table",{className:"w-full text-sm",children:[_.jsx("thead",{className:"border-b border-gray-200",children:_.jsxs("tr",{children:[_.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:""}),_.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:""}),_.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:""}),_.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:""}),_.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:""}),_.jsx("th",{className:"text-right py-3 px-4 font-semibold hidden sm:table-cell",children:""}),_.jsx("th",{className:"text-center py-3 px-4 font-semibold"})]})}),_.jsx("tbody",{children:te.map(Y=>{const ae=t.find(R=>R.id===Y.categoryId),Z=Y.type==="income"||Y.type.toString().includes("payment")||Y.type==="investment-withdrawal";return _.jsxs("tr",{className:"border-b border-gray-200/50 hover:bg-gray-50",children:[_.jsx("td",{className:"p-3",children:Y.date}),_.jsx("td",{className:"p-3",children:F(Y.paymentMethod)}),_.jsx("td",{className:"p-3",children:ee(Y.type)}),_.jsxs("td",{className:`p-3 font-semibold number-display ${Z?"text-emerald-500":"text-red-500"}`,children:[Z?"+":"-"," ",et(Y.amount)]}),_.jsx("td",{className:"p-3",children:ae?`${ae.icon} ${ae.name}`:" "}),_.jsx("td",{className:"p-3 text-slate-500 hidden sm:table-cell",children:Y.description||"-"}),_.jsx("td",{className:"p-3 text-center",children:_.jsxs("div",{className:"flex gap-2 justify-center",children:[_.jsx("button",{onClick:()=>o(Y.id),className:"text-slate-400 hover:text-blue-500 p-1 transition-colors",title:" ",children:""}),_.jsx("button",{onClick:()=>s(Y.id),className:"text-slate-400 hover:text-red-500 p-1 transition-colors",title:" ",children:_.jsx(pg,{})})]})})]},Y.id)})})]}),te.length===0&&_.jsxs("div",{className:"text-center p-8 text-slate-500",children:[_.jsx("p",{children:"     ."}),_.jsx("p",{className:"text-xs mt-1",children:"       ."})]})]})]})})},i4=()=>_.jsxs("div",{className:"ai-bubble chat-bubble typing-indicator flex items-center space-x-1 p-3 self-start",children:[_.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.3s]"}),_.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.15s]"}),_.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse"})]}),s4=({calculations:n,filteredTransactions:e})=>{const[t,s]=me.useState([{id:"1",text:' !    .          "   "  "      "',sender:"ai"}]),[o,l]=me.useState(""),[c,d]=me.useState(!1),p=me.useRef(null);me.useEffect(()=>{var T;(T=p.current)==null||T.scrollTo(0,p.current.scrollHeight)},[t,c]);const h=async T=>{T.preventDefault();const E=o.trim();if(!E||c)return;const S={id:Date.now().toString(),text:E,sender:"user"};s(I=>[...I,S]),l(""),d(!0);try{const V=await hA(E,{periodSummary:n,transactions:e}),B={id:(Date.now()+1).toString(),text:V,sender:"ai"};s(F=>[...F,B])}catch(I){const V={id:(Date.now()+1).toString(),text:I instanceof Error?I.message:"   .    .",sender:"ai"};s(B=>[...B,V])}finally{d(!1)}};return _.jsxs("div",{className:"glass-card overflow-hidden flex flex-col",style:{height:"70vh"},children:[_.jsxs("div",{className:"p-4 bg-gray-100 text-center flex-shrink-0",children:[_.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"   "}),_.jsx("p",{className:"text-sm text-slate-500",children:"       "})]}),_.jsxs("div",{ref:p,className:"p-4 flex-grow overflow-y-auto flex flex-col gap-4",children:[t.map(T=>_.jsx("div",{className:`chat-bubble ${T.sender==="user"?"user-bubble":"ai-bubble"}`,children:_.jsx("p",{dangerouslySetInnerHTML:{__html:T.text.replace(/\n/g,"<br />")}})},T.id)),c&&_.jsx(i4,{})]}),_.jsx("div",{className:"p-4 border-t border-gray-200 flex-shrink-0",children:_.jsxs("form",{onSubmit:h,className:"flex gap-2",children:[_.jsx("input",{type:"text",value:o,onChange:T=>l(T.target.value),className:"w-full p-3",placeholder:"  ...",required:!0,autoComplete:"off",disabled:c}),_.jsx("button",{type:"submit",disabled:c,className:"p-3 magical-button text-white rounded-lg flex-shrink-0 disabled:opacity-50",children:_.jsx(rx,{})})]})})]})},r4=({calculations:n,categories:e,allTransactions:t})=>{const s=me.useRef(null),o=me.useRef(null),l=me.useRef({}),c=me.useMemo(()=>Object.entries(n.expensesByCategory).map(([p,h])=>{const T=e.find(E=>E.id===p);return{name:T?`${T.icon} ${T.name}`:" ",value:h}}).sort((p,h)=>h.value-p.value),[n.expensesByCategory,e]),d=me.useMemo(()=>{const p={},h=new Date;for(let T=5;T>=0;T--){const S=new Date(h.getFullYear(),h.getMonth()-T,1).toLocaleString("en-US",{month:"short",year:"numeric"});p[S]={income:0,expenses:0}}return t.forEach(T=>{const S=new Date(T.date).toLocaleString("en-US",{month:"short",year:"numeric"});p[S]&&(T.type==="income"&&(p[S].income+=T.amount),(T.type==="expense"||T.type==="bnpl-payment")&&(p[S].expenses+=T.amount))}),{labels:Object.keys(p),incomeData:Object.values(p).map(T=>T.income),expensesData:Object.values(p).map(T=>T.expenses)}},[t]);return me.useEffect(()=>{var h,T;const p=window.Chart;if(p){if((h=l.current.pie)==null||h.destroy(),(T=l.current.bar)==null||T.destroy(),s.current&&c.length>0){const E=s.current.getContext("2d");E&&(l.current.pie=new p(E,{type:"doughnut",data:{labels:c.map(S=>S.name),datasets:[{data:c.map(S=>S.value),backgroundColor:["#3b82f6","#60a5fa","#93c5fd","#bfdbfe","#d1d5db","#9ca3af","#6b7280"],borderColor:"#ffffff",borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{color:"#475569",font:{family:"Cairo"}}}}}}))}if(o.current&&d.labels.length>0){const E=o.current.getContext("2d");E&&(l.current.bar=new p(E,{type:"bar",data:{labels:d.labels,datasets:[{label:"",data:d.incomeData,backgroundColor:"#10b981",borderRadius:4},{label:"",data:d.expensesData,backgroundColor:"#ef4444",borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{ticks:{color:"#64748b"},grid:{color:"#e2e8f0"}},x:{ticks:{color:"#64748b"},grid:{display:!1}}},plugins:{legend:{labels:{color:"#475569",font:{family:"Cairo"}}}}}}))}return()=>{var E,S;(E=l.current.pie)==null||E.destroy(),(S=l.current.bar)==null||S.destroy()}}},[c,d]),_.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 animate-fade-in",children:[_.jsxs("div",{className:"glass-card p-6",children:[_.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-900",children:"   "}),_.jsx("div",{className:"h-80",children:c.length>0?_.jsx("canvas",{ref:s}):_.jsx("p",{className:"text-center text-slate-500 mt-10",children:"   ."})})]}),_.jsxs("div",{className:"glass-card p-6",children:[_.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-900",children:"    ( 6 )"}),_.jsx("div",{className:"h-80",children:_.jsx("canvas",{ref:o})})]})]})},o4=({state:n,setLoading:e,setModal:t})=>{const[s,o]=me.useState(""),[l,c]=me.useState(""),d=async()=>{const p=parseFloat(s);if(isNaN(p)||p<=0){t({title:"",body:"<p>    .</p>",confirmText:"",hideCancel:!0});return}e(!0,"   ..."),c("");try{const h=new Date;h.setDate(h.getDate()-60);const T=n.transactions.filter(S=>new Date(S.date)>=h&&S.type==="expense");if(T.length<5)throw new Error("        .   5   .");const E=await gA(p,n.categories,T);c(E)}catch(h){const T=h instanceof Error?h.message:"   .";t({title:"   ",body:`<p>${T}</p>`,confirmText:"",hideCancel:!0})}finally{e(!1)}};return _.jsxs("div",{className:"glass-card p-6 animate-fade-in",children:[_.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-900",children:"   "}),_.jsxs("div",{className:"flex flex-col sm:flex-row items-end gap-4 mb-6 p-4 bg-slate-100 rounded-lg",children:[_.jsxs("div",{className:"flex-grow",children:[_.jsx("label",{htmlFor:"monthly-budget-input",className:"block text-sm font-medium text-slate-600 mb-1",children:"    ()"}),_.jsx("input",{type:"number",id:"monthly-budget-input",className:"w-full p-2",placeholder:"5000",value:s,onChange:p=>o(p.target.value)})]}),_.jsx("button",{onClick:d,className:"w-full sm:w-auto px-6 py-2 magical-button text-white rounded-lg font-semibold flex-shrink-0",children:"   "})]}),_.jsx("div",{className:"prose max-w-none",children:l?_.jsx("div",{dangerouslySetInnerHTML:{__html:l.replace(/### (.*)/g,'<h4 class="text-lg font-bold text-slate-900 mt-3 mb-2">$1</h4>').replace(/\n/g,"<br />")}}):_.jsx("p",{className:"text-center text-slate-500",children:"         ."})})]})},a4=({state:n,setState:e,calculations:t,setModal:s})=>{const[o,l]=me.useState([{id:"1",text:' !     .        "    ".         .',sender:"ai"}]),[c,d]=me.useState(""),[p,h]=me.useState(!1),T=me.useRef(null);me.useEffect(()=>{var V;(V=T.current)==null||V.scrollTo(0,T.current.scrollHeight)},[o,p]);const E=V=>{V.preventDefault();const B=V.target,F=parseFloat(B.elements.namedItem("investment-amount").value),ee=B.elements.namedItem("investment-type").value,te=B.elements.namedItem("payment-method").value;if(isNaN(F)||F<=0){s({title:"",body:"<p>   .</p>"});return}const K={amount:F,date:new Date().toISOString().split("T")[0],description:ee==="deposit"?"   ":"   ",paymentMethod:te,type:ee==="deposit"?"investment-deposit":"investment-withdrawal",categoryId:null};e(Y=>({...Y,transactions:[...Y.transactions,{...K,id:`trans-${Date.now()}`}]})),B.reset()},S=async V=>{V.preventDefault();const B=c.trim();if(!(!B||p)){l(F=>[...F,{id:Date.now().toString(),text:B,sender:"user"}]),d(""),h(!0);try{const F=await pA(B);l(ee=>[...ee,{id:(Date.now()+1).toString(),text:F,sender:"ai"}])}catch(F){l(ee=>[...ee,{id:(Date.now()+1).toString(),text:F instanceof Error?F.message:"  .",sender:"ai"}])}finally{h(!1)}}},I=()=>{const V=`<div><label class="block text-sm font-medium text-slate-600 mb-1">   ()</label><input type="number" id="edit-investment-value" class="w-full p-2" value="${n.investments.currentValue}"><p class="text-xs text-slate-500 mt-2">     .</p></div>`;s({show:!0,title:"  ",body:V,confirmText:"",onConfirm:()=>{const B=parseFloat(document.getElementById("edit-investment-value").value);if(isNaN(B)||B<0)return alert("   ."),!1;e(F=>({...F,investments:{...F.investments,currentValue:B}}))}})};return _.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 animate-fade-in",children:[_.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[_.jsxs("div",{className:"glass-card p-6 text-center",children:[_.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"   "}),_.jsx("p",{className:"text-4xl font-bold text-emerald-500 number-display",children:et(n.investments.currentValue)}),_.jsxs("p",{className:"text-sm text-slate-500 mt-2",children:[" : ",_.jsx("span",{className:"font-semibold number-display text-slate-600",children:et(t.totalInvestmentDeposits)})]}),_.jsx("button",{onClick:I,className:"mt-4 w-full px-4 py-2 bg-slate-200 text-slate-800 rounded-lg hover:bg-slate-300 transition-colors text-sm",children:"   "})]}),_.jsxs("div",{className:"glass-card p-6",children:[_.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"   "}),_.jsxs("form",{onSubmit:E,className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{htmlFor:"investment-amount",className:"block text-sm font-medium text-slate-600",children:""}),_.jsx("input",{type:"number",id:"investment-amount",name:"investment-amount",className:"mt-1 w-full p-2",required:!0})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"investment-type",className:"block text-sm font-medium text-slate-600",children:" "}),_.jsxs("select",{id:"investment-type",name:"investment-type",className:"mt-1 w-full p-2",children:[_.jsx("option",{value:"deposit",children:" "}),_.jsx("option",{value:"withdrawal",children:"  "})]})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"payment-method",className:"block text-sm font-medium text-slate-600",children:" "}),_.jsx("select",{id:"payment-method",name:"payment-method",className:"mt-1 w-full p-2",children:Object.values(n.bankAccounts).map(V=>_.jsxs("option",{value:V.id,children:[" ",V.name]},V.id))})]}),_.jsx("button",{type:"submit",className:"w-full magical-button text-white font-semibold py-2 rounded-lg",children:" "})]})]})]}),_.jsxs("div",{className:"lg:col-span-2 glass-card overflow-hidden flex flex-col",style:{height:"75vh"},children:[_.jsxs("div",{className:"p-4 bg-gray-100 text-center flex-shrink-0",children:[_.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"   "}),_.jsx("p",{className:"text-sm text-slate-500",children:"      "})]}),_.jsxs("div",{ref:T,className:"p-4 flex-grow overflow-y-auto flex flex-col gap-4",children:[o.map(V=>_.jsx("div",{className:`chat-bubble ${V.sender==="user"?"user-bubble":"ai-bubble"}`,dangerouslySetInnerHTML:{__html:V.text.replace(/\n/g,"<br/>")}},V.id)),p&&_.jsxs("div",{className:"ai-bubble chat-bubble typing-indicator flex items-center space-x-1 p-3 self-start",children:[_.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.3s]"}),_.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.15s]"}),_.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse"})]})]}),_.jsx("div",{className:"p-4 border-t border-gray-200 flex-shrink-0",children:_.jsxs("form",{onSubmit:S,className:"flex gap-2",children:[_.jsx("input",{type:"text",value:c,onChange:V=>d(V.target.value),className:"w-full p-3",placeholder:"  ...",required:!0,autoComplete:"off",disabled:p}),_.jsx("button",{type:"submit",className:"p-3 magical-button text-white rounded-lg flex-shrink-0",disabled:p,children:_.jsx(rx,{})})]})})]})]})},l4=({card:n,statementDetails:e,openCardFormModal:t,deleteCard:s})=>{const o=l=>!l||l.length===0?'<tr><td colspan="3" class="text-center text-slate-500 py-3">  </td></tr>':l.map(c=>`
            <tr class="hover:bg-slate-50">
                <td class="p-2">${c.postingDate||c.date}</td>
                <td class="p-2 truncate" title="${c.description}">${c.description}</td>
                <td class="p-2 number-display text-red-500">${et(c.amount)}</td>
            </tr>
        `).join("");return _.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow flex flex-col",children:[_.jsxs("div",{className:"flex items-start justify-between mb-4",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:_.jsx("span",{className:"text-blue-600 text-xl",children:""})}),_.jsx("h3",{className:"text-xl font-bold text-slate-900",children:n.name})]}),_.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[_.jsx("button",{onClick:()=>t(n.id),className:"text-sm bg-white/80 hover:bg-white w-8 h-8 rounded-full flex items-center justify-center transition-colors shadow-sm","aria-label":`  ${n.name}`,children:""}),_.jsx("button",{onClick:()=>s(n.id),className:"text-sm bg-red-100 hover:bg-red-200 w-8 h-8 rounded-full flex items-center justify-center transition-colors","aria-label":`  ${n.name}`,children:_.jsx(pg,{})})]})]}),_.jsxs("div",{className:"space-y-3",children:[_.jsxs("div",{className:"bg-amber-50 p-4 rounded-lg border border-amber-200 shadow-sm",children:[_.jsxs("div",{className:"flex justify-between items-center mb-2",children:[_.jsx("span",{className:"text-amber-700 text-sm font-medium",children:"   "}),_.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center",children:_.jsx("span",{className:"text-amber-600 text-lg",children:""})})]}),_.jsx("div",{className:"bg-white p-3 rounded-lg border border-amber-200 mb-2",children:_.jsxs("p",{className:"font-bold text-2xl text-amber-800 number-display text-center",children:[et(e.statementDueAmount)," "]})}),_.jsxs("div",{className:"flex justify-between items-center text-xs",children:[_.jsx("span",{className:"text-amber-600 font-medium",children:" :"}),_.jsx("span",{className:"font-semibold text-amber-700 bg-amber-100 px-2 py-1 rounded",children:e.dueDate.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})})]})]}),_.jsx("div",{className:"bg-slate-50 p-4 rounded-lg border border-gray-200",children:_.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[_.jsxs("div",{className:"p-3 bg-red-50 rounded-lg border border-red-200 text-center",children:[_.jsx("p",{className:"text-red-700 text-sm font-medium mb-1",children:"  "}),_.jsxs("p",{className:"font-bold text-red-800 number-display",children:[et(n.balance)," "]})]}),_.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200 text-center",children:[_.jsx("p",{className:"text-blue-700 text-sm font-medium mb-1",children:" "}),_.jsxs("p",{className:"font-bold text-blue-800 number-display",children:[et(n.limit)," "]})]}),_.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200 text-center",children:[_.jsx("p",{className:"text-green-700 text-sm font-medium mb-1",children:" "}),_.jsxs("p",{className:"font-bold text-green-800 number-display",children:[et(n.available)," "]})]}),_.jsxs("div",{className:"p-3 bg-orange-50 rounded-lg border border-orange-200 text-center",children:[_.jsx("p",{className:"text-orange-700 text-sm font-medium mb-1",children:" "}),_.jsxs("p",{className:`font-bold ${n.usagePercentage>80?"text-red-800":n.usagePercentage>60?"text-yellow-800":"text-green-800"}`,children:[n.usagePercentage.toFixed(1),"%"]})]})]})})]}),_.jsxs("div",{className:"mt-4 flex-grow flex flex-col",children:[_.jsxs("h4",{className:"font-semibold text-slate-600 mb-2 border-b border-slate-200 pb-1",children:["  (",e.upcomingTransactions.length,")"]}),_.jsx("div",{className:"flex-grow max-h-32 overflow-y-auto",children:_.jsx("table",{className:"w-full text-xs",dangerouslySetInnerHTML:{__html:`<tbody>${o(e.upcomingTransactions)}</tbody>`}})})]})]})},u4=({state:n,openCardFormModal:e,deleteCard:t})=>{const s=me.useMemo(()=>{const l={};return Object.values(n.cards).forEach(c=>{const d=new Date,p=d.getDate(),h=d.getMonth(),T=d.getFullYear();let E,S,I;p>c.statementDay?E=new Date(T,h,c.statementDay):E=new Date(T,h-1,c.statementDay),S=new Date(E.getFullYear(),E.getMonth()-1,c.statementDay+1);let V=E.getMonth()+1,B=E.getFullYear();V>11&&(V=0,B+=1),I=new Date(B,V,c.dueDay);const F=n.transactions.filter(K=>{const Y=new Date(K.postingDate||K.date);return K.paymentMethod===c.id&&(K.type==="expense"||K.type==="bnpl-payment")&&Y>=S&&Y<=E}),ee=n.transactions.filter(K=>{const Y=new Date(K.postingDate||K.date);return K.paymentMethod===c.id&&(K.type==="expense"||K.type==="bnpl-payment")&&Y>E}),te=F.reduce((K,Y)=>K+Y.amount,0);l[c.id]={statementDueAmount:te,dueDate:I,totalOutstanding:0,upcomingTransactions:ee}}),l},[n.transactions,n.cards]),o=Object.values(n.cards);return _.jsxs("div",{className:"space-y-6 animate-fade-in",children:[_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:" "}),_.jsx("button",{onClick:()=>e(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:"+  "})]}),_.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:o.map(l=>{const c=n.transactions.filter(p=>p.paymentMethod===l.id&&(p.type==="expense"||p.type==="bnpl-payment")).reduce((p,h)=>p+h.amount,0)-n.transactions.filter(p=>p.type===`${l.id}-payment`).reduce((p,h)=>p+h.amount,0),d={...l,balance:c,available:l.limit-c,usagePercentage:l.limit>0?c/l.limit*100:0};return _.jsx(l4,{card:d,statementDetails:s[d.id],openCardFormModal:e,deleteCard:t},d.id)})})]})},c4=(n,e)=>{const t={income:" ",expense:" ","bnpl-payment":"  ","investment-deposit":"  ","investment-withdrawal":"  "};if(t[n])return t[n];if(n.endsWith("-payment")){const s=n.replace("-payment","");if(e.cards[s])return`  ${e.cards[s].name}`}return n},d4=({account:n,openBankAccountFormModal:e,deleteBankAccount:t})=>_.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow",children:[_.jsxs("div",{className:"flex justify-between items-start mb-4",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:_.jsx("span",{className:"text-blue-600 text-xl",children:""})}),_.jsx("h4",{className:"text-xl font-bold text-slate-900",children:n.name})]}),_.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[_.jsx("button",{onClick:()=>e(n.id),className:"text-sm bg-white/80 hover:bg-white w-8 h-8 rounded-full flex items-center justify-center transition-colors shadow-sm","aria-label":`  ${n.name}`,children:""}),_.jsx("button",{onClick:()=>t(n.id),className:"text-sm bg-red-100 hover:bg-red-200 w-8 h-8 rounded-full flex items-center justify-center transition-colors","aria-label":`  ${n.name}`,children:_.jsx(pg,{})})]})]}),_.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4",children:[_.jsx("p",{className:"text-blue-700 font-semibold text-center mb-2",children:" "}),_.jsx("p",{className:"text-3xl font-bold text-blue-900 number-display text-center",children:et(n.balance)})]}),_.jsxs("div",{className:"space-y-3",children:[_.jsxs("div",{className:"bg-emerald-50 p-3 rounded-lg border border-emerald-200 text-center",children:[_.jsx("p",{className:"text-emerald-700 font-semibold text-sm mb-1",children:" "}),_.jsx("p",{className:"text-lg font-bold text-emerald-800 number-display",children:et(n.deposits)})]}),_.jsxs("div",{className:"bg-red-50 p-3 rounded-lg border border-red-200 text-center",children:[_.jsx("p",{className:"text-red-700 font-semibold text-sm mb-1",children:" "}),_.jsx("p",{className:"text-lg font-bold text-red-800 number-display",children:et(n.withdrawals)})]})]})]}),f4=({state:n,setState:e,calculations:t,filteredTransactions:s,categories:o,setModal:l,openBankAccountFormModal:c,deleteBankAccount:d,openTransferModal:p})=>_.jsxs("div",{className:"space-y-6 animate-fade-in",children:[_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"  "}),_.jsxs("div",{className:"flex gap-3",children:[Object.keys(n.bankAccounts).length>1&&_.jsx("button",{onClick:p,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-semibold",children:"   "}),_.jsx("button",{onClick:()=>c(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:"+  "})]})]}),_.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.values(t.bankAccountDetails).map(h=>_.jsx(d4,{account:h,openBankAccountFormModal:c,deleteBankAccount:d},h.id))}),_.jsxs("div",{className:"glass-card p-6",children:[_.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-900",children:"    ( )"}),_.jsx("div",{className:"overflow-x-auto",children:_.jsxs("table",{className:"w-full text-sm",children:[_.jsx("thead",{className:"border-b border-gray-200",children:_.jsxs("tr",{children:[_.jsx("th",{className:"text-right p-3 font-semibold",children:""}),_.jsx("th",{className:"text-right p-3 font-semibold",children:""}),_.jsx("th",{className:"text-right p-3 font-semibold",children:""}),_.jsx("th",{className:"text-right p-3 font-semibold",children:""}),_.jsx("th",{className:"text-right p-3 font-semibold",children:""}),_.jsx("th",{className:"text-right p-3 font-semibold",children:""})]})}),_.jsx("tbody",{children:s.filter(h=>n.bankAccounts[h.paymentMethod]).sort((h,T)=>new Date(T.date).getTime()-new Date(h.date).getTime()).map(h=>{var I;const T=["income","investment-withdrawal"].includes(h.type),E=T?"text-emerald-500":"text-red-500",S=o.find(V=>V.id===h.categoryId);return _.jsxs("tr",{className:"border-b border-gray-200/50",children:[_.jsx("td",{className:"p-3",children:h.date}),_.jsx("td",{className:"p-3",children:(I=n.bankAccounts[h.paymentMethod])==null?void 0:I.name}),_.jsx("td",{className:"p-3",children:c4(h.type,n)}),_.jsxs("td",{className:`p-3 font-semibold ${E} number-display`,children:[T?"+":"-",et(h.amount)]}),_.jsx("td",{className:"p-3",children:S?`${S.icon} ${S.name}`:"-"}),_.jsx("td",{className:"p-3 text-slate-500",children:h.description||"-"})]},h.id)})})]})})]})]}),OE=(n,e)=>{const t={cash:" ","tabby-bnpl":" ","tamara-bnpl":" ",reconciliation:" "};return t[n]?t[n]:e.cards[n]?` ${e.cards[n].name}`:e.bankAccounts[n]?` ${e.bankAccounts[n].name}`:n},h4=({state:n,setState:e,filteredTransactions:t,setModal:s})=>{const o=d=>{const p=n.installments.find(E=>E.id===d);if(!p||p.paid>=p.total)return;let h="";Object.values(n.bankAccounts).forEach(E=>{h+=`<option value="${E.id}"> ${E.name}</option>`}),h+='<option value="cash"> </option>',Object.values(n.cards).forEach(E=>{h+=`<option value="${E.id}"> ${E.name}</option>`});const T=`<p class="mb-4">     "${p.description}"  ${et(p.installmentAmount)} .</p><div><label for="installment-payment-source" class="block text-sm font-medium text-slate-600 mb-2"> </label><select id="installment-payment-source" class="w-full p-3">${h}</select></div>`;s({show:!0,title:" ",body:T,confirmText:" ",onConfirm:()=>{var B;const E=document.getElementById("installment-payment-source").value,S=n.categories.find(F=>F.name===" "||F.name==="  "),I=(S==null?void 0:S.id)||((B=n.categories.find(F=>F.name===""))==null?void 0:B.id)||"",V={id:"trans-"+Date.now(),amount:p.installmentAmount,date:new Date().toISOString().split("T")[0],description:`  ${p.paid+1} : ${p.description}`,paymentMethod:E,type:"bnpl-payment",categoryId:I,isInstallmentPayment:!0,installmentId:d};e(F=>{const ee=F.installments.map(te=>{if(te.id===d){const K={...te,paid:te.paid+1};return console.log("  :",{id:te.id,paid:te.paid,newPaid:K.paid,total:te.total}),K}return te});return{...F,transactions:[...F.transactions,V],installments:ee}})}})},l=n.installments.filter(d=>d.paid<d.total),c=n.transactions.filter(d=>d.isInstallmentPayment);return _.jsxs("div",{className:"animate-fade-in",children:[_.jsx("h3",{className:"text-2xl font-bold mb-4 text-slate-900",children:"   "}),_.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:l.length>0?l.map(d=>{const p=d.paid/d.total*100;return console.log("  :",{id:d.id,paid:d.paid,total:d.total,progress:p}),_.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow",children:[_.jsxs("div",{className:"flex justify-between items-start mb-3",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:_.jsx("span",{className:"text-blue-600 text-lg",children:""})}),_.jsxs("div",{children:[_.jsx("h4",{className:"font-bold text-slate-900",children:d.description}),_.jsx("p",{className:"text-sm text-slate-500",children:OE(d.provider,n)})]})]}),_.jsx("div",{className:"bg-blue-50 px-3 py-1 rounded-lg border border-blue-200",children:_.jsxs("span",{className:"font-bold text-blue-800 number-display text-sm",children:[et(d.installmentAmount),"/"]})})]}),_.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-gray-200 mb-3",children:[_.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5 mb-2 overflow-hidden",children:_.jsx("div",{className:"bg-blue-700 h-2.5 rounded-full transition-all duration-500",style:{width:`${p}%`}})}),_.jsxs("div",{className:"flex justify-between text-xs text-slate-600",children:[_.jsxs("span",{className:"font-medium",children:[d.paid," / ",d.total," "]}),_.jsxs("span",{className:"font-medium",children:[": ",d.total-d.paid]})]}),_.jsx("div",{className:"text-center mt-2",children:_.jsxs("span",{className:"text-xs text-slate-500",children:[p.toFixed(1),"% "]})})]}),_.jsx("div",{className:"text-center mt-3",children:_.jsx("button",{onClick:()=>o(d.id),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-300 text-sm w-full shadow-md font-semibold",children:"   "})})]},d.id)}):_.jsx("div",{className:"md:col-span-2 text-center p-6 glass-card",children:_.jsx("p",{className:"text-slate-500",children:"     !"})})}),_.jsxs("div",{className:"glass-card p-6 mt-8",children:[_.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-900",children:"   "}),_.jsx("div",{className:"overflow-x-auto",children:_.jsxs("table",{className:"w-full text-sm",children:[_.jsx("thead",{className:"border-b border-gray-200",children:_.jsxs("tr",{children:[_.jsx("th",{className:"text-right p-3 font-semibold",children:""}),_.jsx("th",{className:"text-right p-3 font-semibold",children:""}),_.jsx("th",{className:"text-right p-3 font-semibold",children:""}),_.jsx("th",{className:"text-right p-3 font-semibold",children:""})]})}),_.jsx("tbody",{children:c.sort((d,p)=>new Date(p.date).getTime()-new Date(d.date).getTime()).map(d=>_.jsxs("tr",{className:"border-b border-gray-200/50",children:[_.jsx("td",{className:"p-3",children:d.date}),_.jsx("td",{className:"p-3 text-slate-600",children:d.description}),_.jsx("td",{className:"p-3",children:OE(d.paymentMethod,n)}),_.jsx("td",{className:"p-3 text-red-500 font-semibold number-display",children:et(d.amount)})]},d.id))})]})})]})]})},m4=({state:n,setState:e,setModal:t,setLoading:s,onRestore:o})=>{const[l,c]=me.useState(Ra()),[d,p]=me.useState({connected:!1}),[h,T]=me.useState(!0),[E,S]=me.useState({firebase:l.hasFirebase,gemini:l.hasGemini});me.useEffect(()=>{const re=Ra();c(re),S({firebase:re.hasFirebase,gemini:re.hasGemini}),re.hasFirebase?(async()=>{try{T(!0);const ve=await xs.getData("test","connection");p({connected:!0})}catch(ve){p({connected:!1,error:ve instanceof Error?ve.message:"  "})}finally{T(!1)}})():(p({connected:!1,error:" Firebase  "}),T(!1))},[]);const I=({isValid:re})=>re?_.jsx(Om,{className:"w-6 h-6 text-green-500"}):_.jsx(qm,{className:"w-6 h-6 text-red-500"}),V=()=>_.jsx(KL,{className:"w-6 h-6 text-yellow-500"}),[B,F]=me.useState({name:"",icon:""}),[ee,te]=me.useState(null),[K,Y]=me.useState({name:"",icon:""}),[ae,Z]=me.useState({name:"",icon:""}),R=()=>{if(!B.name.trim()||!B.icon.trim()){t({title:"",body:"<p>    .</p>",hideCancel:!0,confirmText:""});return}const ce={id:`cat-${Date.now()}`,name:B.name.trim(),icon:B.icon.trim()};e(ve=>({...ve,categories:[...ve.categories,ce]})),F({name:"",icon:""}),t({title:"",body:"<p>   .</p>",hideCancel:!0,confirmText:""})},[M,N]=me.useState(!1),L=async()=>{const re=B.name.trim();if(!re){t({title:"",body:"<p>    .</p>",hideCancel:!0,confirmText:""});return}N(!0);try{const{suggestCategoryIcon:ce,initializeAi:ve}=await vs(async()=>{const{suggestCategoryIcon:tt,initializeAi:An}=await Promise.resolve().then(()=>VM);return{suggestCategoryIcon:tt,initializeAi:An}},void 0);ve();const Xe=await ce(re);Xe&&Xe.trim()?F(tt=>({...tt,icon:Xe.trim()})):t({title:"",body:"<p>      .</p>",hideCancel:!0,confirmText:""})}catch(ce){console.error("Icon suggestion error:",ce),t({title:"",body:`<p>    .     Gemini API  .</p><p> : ${ce.message}</p>`,hideCancel:!0,confirmText:""})}finally{N(!1)}},k=re=>{n.transactions.some(ce=>ce.categoryId===re)?t({title:"  ",body:"<p>         .     .</p>",hideCancel:!0,confirmText:""}):(e(ce=>({...ce,categories:ce.categories.filter(ve=>ve.id!==re)})),t({title:"",body:"<p>   .</p>",hideCancel:!0,confirmText:""}))},[P,D]=me.useState(!1),Ue=async()=>{const re=K.name.trim();if(!re){t({title:"",body:"<p>     .</p>",hideCancel:!0,confirmText:""});return}try{D(!0);const ce=await Qm(re);ce&&ce.trim()?Y(ve=>({...ve,icon:ce.trim()})):t({title:"",body:"<p>      .</p>",hideCancel:!0,confirmText:""})}catch(ce){console.error("Transaction type icon suggestion error:",ce),t({title:"",body:`<p>    .     Gemini API  .</p><p> : ${ce.message}</p>`,hideCancel:!0,confirmText:""})}finally{D(!1)}},[Be,Q]=me.useState(!1),fe=async()=>{const re=ae.name.trim();if(!re){t({title:"",body:"<p>     .</p>",hideCancel:!0,confirmText:""});return}try{Q(!0);const ce=await Qm(re);ce&&ce.trim()?Z(ve=>({...ve,icon:ce.trim()})):t({title:"",body:"<p>      .</p>",hideCancel:!0,confirmText:""})}catch(ce){console.error("Payment method icon suggestion error:",ce),t({title:"",body:`<p>    .     Gemini API  .</p><p> : ${ce.message}</p>`,hideCancel:!0,confirmText:""})}finally{Q(!1)}},Ce=()=>{if(!K.name.trim()||!K.icon.trim()){t({title:"",body:"<p>     .</p>",hideCancel:!0,confirmText:""});return}const ce={id:`custom-type-${Date.now()}`,name:K.name.trim(),icon:K.icon.trim(),isCustom:!0};e(ve=>({...ve,customTransactionTypes:[...ve.customTransactionTypes||[],ce]})),Y({name:"",icon:""}),t({title:"",body:"<p>    .</p>",hideCancel:!0,confirmText:""})},Fe=re=>{n.transactions.some(ce=>ce.type===re)?t({title:"  ",body:"<p>          .     .</p>",hideCancel:!0,confirmText:""}):(e(ce=>({...ce,customTransactionTypes:(ce.customTransactionTypes||[]).filter(ve=>ve.id!==re)})),t({title:"",body:"<p>    .</p>",hideCancel:!0,confirmText:""}))},Qe=()=>{if(!ae.name.trim()||!ae.icon.trim()){t({title:"",body:"<p>     .</p>",hideCancel:!0,confirmText:""});return}const ce={id:`custom-payment-${Date.now()}`,name:ae.name.trim(),icon:ae.icon.trim(),isCustom:!0};e(ve=>({...ve,customPaymentMethods:[...ve.customPaymentMethods||[],ce]})),Z({name:"",icon:""}),t({title:"",body:"<p>    .</p>",hideCancel:!0,confirmText:""})},O=re=>{n.transactions.some(ce=>ce.paymentMethod===re)?t({title:"  ",body:"<p>          .     .</p>",hideCancel:!0,confirmText:""}):(e(ce=>({...ce,customPaymentMethods:(ce.customPaymentMethods||[]).filter(ve=>ve.id!==re)})),t({title:"",body:"<p>    .</p>",hideCancel:!0,confirmText:""}))},ie=()=>{try{const re=JSON.stringify(n,null,2),ce=new Blob([re],{type:"application/json"}),ve=URL.createObjectURL(ce),Xe=document.createElement("a");Xe.href=ve,Xe.download=`masrof_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Xe),Xe.click(),document.body.removeChild(Xe),URL.revokeObjectURL(ve),t({title:"",body:"<p>     .</p>",hideCancel:!0,confirmText:""})}catch{t({title:"",body:"<p>   .</p>",hideCancel:!0,confirmText:""})}},he=async()=>{s(!0,"     ...");try{const re=await xs.saveData("backups",`backup_${new Date().toISOString().split("T")[0]}`,{...n,backupDate:new Date().toISOString(),version:"1.0.0"});if(re.success)t({title:"",body:"<p>      .</p>",hideCancel:!0,confirmText:""});else throw new Error(re.error)}catch{t({title:"",body:"<p>      .</p>",hideCancel:!0,confirmText:""})}finally{s(!1)}},_e=re=>{var Xe;const ce=(Xe=re.target.files)==null?void 0:Xe[0];if(!ce)return;const ve=new FileReader;ve.onload=tt=>{var An;try{const bt=JSON.parse((An=tt.target)==null?void 0:An.result);if(bt!=null&&bt.transactions&&(bt!=null&&bt.categories))o?o(bt):t({show:!0,title:"  ",body:"<p>        .</p>",confirmText:" ",onConfirm:()=>{const bi={transactions:bt.transactions||[],categories:bt.categories||[],installments:bt.installments||[],investments:bt.investments||{currentValue:0},cards:bt.cards||{},bankAccounts:bt.bankAccounts||{}};e(bi),t({title:"  ",body:"<p>   .</p>",confirmText:"",hideCancel:!0})}});else throw new Error("Invalid backup file format.")}catch{t({show:!0,title:"",body:"<p>    .   .</p>",confirmText:"",hideCancel:!0})}},ve.readAsText(ce),re.target.value=""};return _.jsxs("div",{className:"space-y-6 animate-fade-in",children:[_.jsx("div",{className:"flex justify-between items-center",children:_.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"  "})}),_.jsxs("div",{className:"glass-card p-6",children:[_.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"   API"}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"text-2xl",children:""}),_.jsxs("div",{children:[_.jsx("h4",{className:"font-semibold text-slate-800",children:"Firebase Configuration"}),_.jsxs("p",{className:"text-sm text-slate-600",children:["Project ID: ",kt.firebase.projectId]})]})]}),_.jsx("div",{className:"flex items-center gap-2",children:E.firebase?d.connected?_.jsxs(_.Fragment,{children:[_.jsx(Om,{className:"w-6 h-6 text-green-500"}),_.jsx("span",{className:"text-sm text-green-600",children:""})]}):_.jsxs(_.Fragment,{children:[_.jsx(V,{}),_.jsx("span",{className:"text-sm text-yellow-600",children:"    "})]}):_.jsxs(_.Fragment,{children:[_.jsx(qm,{className:"w-6 h-6 text-red-500"}),_.jsx("span",{className:"text-sm text-red-600",children:"  "})]})})]}),_.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"text-2xl",children:""}),_.jsxs("div",{children:[_.jsx("h4",{className:"font-semibold text-slate-800",children:"Gemini AI API"}),_.jsxs("p",{className:"text-sm text-slate-600",children:["Model: ",kt.gemini.model]})]})]}),_.jsx("div",{className:"flex items-center gap-2",children:E.gemini?_.jsxs(_.Fragment,{children:[_.jsx(Om,{className:"w-6 h-6 text-green-500"}),_.jsx("span",{className:"text-sm text-green-600",children:""})]}):_.jsxs(_.Fragment,{children:[_.jsx(qm,{className:"w-6 h-6 text-red-500"}),_.jsx("span",{className:"text-sm text-red-600",children:" "})]})})]})]}),!l.isValid&&_.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[_.jsx("h5",{className:"font-semibold text-red-800 mb-2",children:" :"}),_.jsx("ul",{className:"space-y-1",children:l.errors.map((re,ce)=>_.jsxs("li",{className:"text-sm text-red-600",children:[" ",re]},ce))})]})]}),_.jsxs("div",{className:"glass-card p-6",children:[_.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"  "}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[_.jsx("p",{className:"text-sm text-slate-600",children:" "}),_.jsx("p",{className:"font-semibold text-slate-800",children:kt.app.name})]}),_.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[_.jsx("p",{className:"text-sm text-slate-600",children:""}),_.jsx("p",{className:"font-semibold text-slate-800",children:kt.app.version})]}),_.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[_.jsx("p",{className:"text-sm text-slate-600",children:""}),_.jsx("p",{className:"font-semibold text-slate-800",children:kt.app.environment})]}),_.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[_.jsx("p",{className:"text-sm text-slate-600",children:" "}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(I,{isValid:l.isValid&&d.connected}),_.jsx("span",{className:`text-sm font-semibold ${l.isValid&&d.connected?"text-green-600":"text-red-600"}`,children:l.isValid&&d.connected?"":" "})]})]}),_.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[_.jsx("p",{className:"text-sm text-slate-600",children:""}),_.jsx("p",{className:"font-semibold text-slate-800",children:"Khaleel Alsani"})]})]})]}),(!l.isValid||!d.connected)&&_.jsxs("div",{className:"glass-card p-6",children:[_.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"  "}),_.jsxs("div",{className:"space-y-4",children:[!E.gemini&&_.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[_.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"  Gemini API:"}),_.jsxs("ol",{className:"text-sm text-yellow-700 space-y-1 list-decimal list-inside",children:[_.jsxs("li",{children:["  ",_.jsx("a",{href:"https://makersuite.google.com/app/apikey",target:"_blank",className:"underline",children:"Google AI Studio"})]}),_.jsx("li",{children:"  API "}),_.jsxs("li",{children:["   GitHub Secret  ",_.jsx("code",{className:"bg-yellow-100 px-1 rounded",children:"VITE_GEMINI_API_KEY"})]}),_.jsxs("li",{children:["    ",_.jsx("code",{className:"bg-yellow-100 px-1 rounded",children:".env.local"}),"  "]})]})]}),!E.firebase&&_.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[_.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"  Firebase:"}),_.jsxs("p",{className:"text-sm text-blue-700",children:["     Firebase  GitHub Secrets:",_.jsx("br",{})," VITE_FIREBASE_API_KEY",_.jsx("br",{})," VITE_FIREBASE_AUTH_DOMAIN",_.jsx("br",{})," VITE_FIREBASE_PROJECT_ID",_.jsx("br",{})," VITE_FIREBASE_STORAGE_BUCKET",_.jsx("br",{})," VITE_FIREBASE_MESSAGING_SENDER_ID",_.jsx("br",{})," VITE_FIREBASE_APP_ID"]})]})]})]}),_.jsxs("div",{className:"glass-card p-6",children:[_.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"  "}),_.jsxs("div",{className:"mb-6 p-4 bg-slate-50 rounded-lg",children:[_.jsx("h4",{className:"font-semibold text-slate-800 mb-3",children:"   "}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[_.jsx("input",{type:"text",placeholder:" ",value:B.name,onChange:re=>F(ce=>({...ce,name:re.target.value})),className:"px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("input",{type:"text",placeholder:" (: )",value:B.icon,onChange:re=>F(ce=>({...ce,icon:re.target.value})),className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),_.jsx("button",{type:"button",onClick:L,disabled:!B.name.trim()||M,className:"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center min-w-[44px]",title:"   ",children:M?_.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):""})]})]}),_.jsx("button",{onClick:R,className:"mt-3 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"  "})]}),_.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:n.categories.map(re=>_.jsxs("div",{className:"p-3 bg-white border border-slate-200 rounded-lg flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"text-lg",children:re.icon}),_.jsx("span",{className:"text-sm font-medium text-slate-800",children:re.name})]}),_.jsx("button",{onClick:()=>k(re.id),className:"text-red-500 hover:text-red-700 text-sm",title:" ",children:""})]},re.id))})]}),_.jsxs("div",{className:"glass-card p-6",children:[_.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"     "}),_.jsxs("div",{className:"mb-6 p-4 bg-slate-50 rounded-lg",children:[_.jsx("h4",{className:"font-semibold text-slate-800 mb-3",children:"   "}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[_.jsx("input",{type:"text",placeholder:"   (:  )",value:K.name,onChange:re=>Y(ce=>({...ce,name:re.target.value})),className:"px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("input",{type:"text",placeholder:" (: )",value:K.icon,onChange:re=>Y(ce=>({...ce,icon:re.target.value})),className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),_.jsx("button",{type:"button",onClick:Ue,disabled:!K.name.trim()||P,className:"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center min-w-[44px]",title:"   ",children:P?_.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):""}),_.jsx("button",{onClick:Ce,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:" "})]})]}),_.jsx("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-3 gap-2",children:(n.customTransactionTypes||[]).map(re=>_.jsxs("div",{className:"p-2 bg-white border border-slate-200 rounded-lg flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"text-sm",children:re.icon}),_.jsx("span",{className:"text-xs font-medium text-slate-800",children:re.name})]}),_.jsx("button",{onClick:()=>Fe(re.id),className:"text-red-500 hover:text-red-700 text-xs",title:"  ",children:""})]},re.id))})]}),_.jsxs("div",{className:"mb-6 p-4 bg-slate-50 rounded-lg",children:[_.jsx("h4",{className:"font-semibold text-slate-800 mb-3",children:"   "}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[_.jsx("input",{type:"text",placeholder:"   (: PayPal)",value:ae.name,onChange:re=>Z(ce=>({...ce,name:re.target.value})),className:"px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("input",{type:"text",placeholder:" (: )",value:ae.icon,onChange:re=>Z(ce=>({...ce,icon:re.target.value})),className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),_.jsx("button",{type:"button",onClick:fe,disabled:!ae.name.trim()||Be,className:"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center min-w-[44px]",title:"   ",children:Be?_.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):""}),_.jsx("button",{onClick:Qe,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:" "})]})]}),_.jsx("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-3 gap-2",children:(n.customPaymentMethods||[]).map(re=>_.jsxs("div",{className:"p-2 bg-white border border-slate-200 rounded-lg flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"text-sm",children:re.icon}),_.jsx("span",{className:"text-xs font-medium text-slate-800",children:re.name})]}),_.jsx("button",{onClick:()=>O(re.id),className:"text-red-500 hover:text-red-700 text-xs",title:"  ",children:""})]},re.id))})]}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[_.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[_.jsx("h4",{className:"font-semibold text-blue-800 mb-3",children:"   "}),_.jsxs("div",{className:"space-y-2 text-sm",children:[_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("span",{children:" "}),_.jsx("span",{className:"text-blue-600",children:""})]}),_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("span",{children:" "}),_.jsx("span",{className:"text-blue-600",children:""})]}),_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("span",{children:"  "}),_.jsx("span",{className:"text-blue-600",children:""})]}),_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("span",{children:"  "}),_.jsx("span",{className:"text-blue-600",children:""})]}),_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("span",{children:"  "}),_.jsx("span",{className:"text-blue-600",children:""})]})]})]}),_.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[_.jsx("h4",{className:"font-semibold text-green-800 mb-3",children:"   "}),_.jsxs("div",{className:"space-y-2 text-sm",children:[_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("span",{children:" "}),_.jsx("span",{className:"text-green-600",children:""})]}),_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("span",{children:" "}),_.jsx("span",{className:"text-green-600",children:""})]}),_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("span",{children:" "}),_.jsx("span",{className:"text-green-600",children:""})]}),_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("span",{children:"  "}),_.jsx("span",{className:"text-green-600",children:""})]})]})]})]})]}),_.jsxs("div",{className:"glass-card p-6",children:[_.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"   "}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[_.jsxs("div",{children:[_.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"   "}),_.jsx("p",{className:"text-slate-600 mb-3 text-sm",children:"     ."}),_.jsx("button",{onClick:ie,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"  "})]}),_.jsxs("div",{children:[_.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"   "}),_.jsx("p",{className:"text-slate-600 mb-3 text-sm",children:"       ."}),_.jsx("button",{onClick:he,className:"w-full px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",children:"   "})]}),_.jsxs("div",{children:[_.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"  "}),_.jsx("p",{className:"text-slate-600 mb-3 text-sm",children:"     ."}),_.jsx("input",{type:"file",id:"backup-file",accept:".json",className:"hidden",onChange:_e}),_.jsx("button",{onClick:()=>{var re;return(re=document.getElementById("backup-file"))==null?void 0:re.click()},className:"w-full px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg transition-colors",children:"  "})]})]})]}),_.jsx("div",{className:"text-center",children:_.jsx("button",{onClick:()=>{c(Ra()),window.location.reload()},disabled:h,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:h?" ...":"  "})})]})},p4=({onClose:n,onSave:e,initialData:t,categories:s,cards:o,bankAccounts:l,setModalConfig:c})=>{var k;const[d,p]=me.useState({amount:0,date:new Date().toISOString().split("T")[0],description:"",paymentMethod:Object.keys(l)[0]||"cash",type:"expense",categoryId:((k=s.find(P=>P.name===""))==null?void 0:k.id)||null}),[h,T]=me.useState(!1),[E,S]=me.useState(""),[I,V]=me.useState({isOpen:!1,text:""}),[B,F]=me.useState(!1),[ee,te]=me.useState(4),[K,Y]=me.useState(Object.keys(l)[0]||"cash");me.useEffect(()=>{var P;t?p(t):(P=navigator.clipboard)!=null&&P.readText&&(async()=>{try{const D=await navigator.clipboard.readText();D&&D.trim().length>10&&sessionStorage.getItem("ignoredClipboardText")!==D&&V({isOpen:!0,text:D})}catch{console.info("Clipboard read access denied or not supported.")}})()},[t]);const ae=P=>{const{name:D,value:Ue}=P.target;if(D==="paymentMethod"){const Be=Ue.includes("bnpl");F(Be),Be&&p(Q=>({...Q,type:"expense"}))}p(Be=>({...Be,[D]:D==="amount"?parseFloat(Ue):Ue}))},Z=P=>{P.preventDefault(),B&&d.paymentMethod.includes("bnpl")?e({...d,bnplData:{installmentsCount:ee,initialPaymentSource:K,installmentAmount:d.amount/ee}},t==null?void 0:t.id):e(d,t==null?void 0:t.id)},R=async P=>{if(P.trim()){T(!0),S("");try{const D=await mA(P,s,o,l),Ue=JSON.parse(D);Ue.error?S(Ue.error):p(Be=>({...Be,amount:Ue.amount||Be.amount,date:Ue.date||Be.date,description:Ue.merchant||Be.description,paymentMethod:Ue.paymentMethod||Be.paymentMethod,categoryId:Ue.categoryId||Be.categoryId}))}catch(D){S(D instanceof Error?D.message:"  ."),console.error(D)}finally{T(!1)}}},M=async()=>{S("");try{if(navigator.permissions&&navigator.permissions.query&&(await navigator.permissions.query({name:"clipboard-read"})).state==="denied"){S("    .              .");return}const P=await navigator.clipboard.readText();P&&P.trim().length>0?R(P):S(" .     .")}catch(P){console.error("Clipboard operation failed: ",P),S("   .          .")}},N=me.useMemo(()=>{const P=[{value:"cash",label:" "}];return Object.values(l).forEach(D=>P.push({value:D.id,label:` ${D.name}`})),Object.values(o).forEach(D=>P.push({value:D.id,label:` ${D.name}`})),P.push({value:"tabby-bnpl",label:" "}),P.push({value:"tamara-bnpl",label:" "}),P},[l,o]),L=me.useMemo(()=>{const P=[{value:"expense",label:" "},{value:"income",label:" "},{value:"bnpl-payment",label:"  "},{value:"investment-deposit",label:"  "},{value:"investment-withdrawal",label:"  "}];return Object.values(o).forEach(D=>P.push({value:`${D.id}-payment`,label:`  ${D.name}`})),P},[o]);return _.jsxs(_.Fragment,{children:[I.isOpen&&_.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] flex items-center justify-center p-4",onClick:()=>V({isOpen:!1,text:""}),children:_.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md animate-fade-in",onClick:P=>P.stopPropagation(),children:_.jsxs("div",{className:"p-6",children:[_.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"   "}),_.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"    .       "}),_.jsx("pre",{className:"bg-slate-100 p-3 rounded-md text-xs text-slate-500 max-h-24 overflow-y-auto whitespace-pre-wrap font-sans",children:I.text}),_.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[_.jsx("button",{onClick:()=>{sessionStorage.setItem("ignoredClipboardText",I.text),V({isOpen:!1,text:""})},className:"px-4 py-2 bg-slate-200 rounded-lg",children:""}),_.jsx("button",{onClick:()=>{V({isOpen:!1,text:""}),R(I.text)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:" "})]})]})})}),_.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:n,children:_.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg animate-fade-in max-h-[90vh] overflow-y-auto",onClick:P=>P.stopPropagation(),children:_.jsxs("div",{className:"p-6",children:[_.jsxs("div",{className:"flex justify-between items-center mb-6",children:[_.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:t?" ":"  "}),_.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600",children:_.jsx(gg,{})})]}),_.jsxs("button",{type:"button",onClick:M,disabled:h,className:"w-full flex items-center justify-center gap-2 mb-4 px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors disabled:opacity-50",children:[_.jsx(zL,{}),_.jsx("span",{children:"   "})]}),h&&_.jsxs("div",{className:"text-center p-4 mb-4 bg-blue-50 rounded-lg",children:[_.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mx-auto"}),_.jsx("p",{className:"text-blue-600 mt-2 text-sm",children:" ..."})]}),E&&_.jsx("p",{className:"text-red-500 text-sm mb-4 bg-red-50 p-3 rounded-lg",children:E}),_.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[_.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[_.jsxs("div",{children:[_.jsx("label",{htmlFor:"amount",className:"form-label",children:""}),_.jsx("input",{type:"number",name:"amount",value:d.amount,onChange:ae,className:"w-full",required:!0,step:"0.01"})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"date",className:"form-label",children:""}),_.jsx("input",{type:"date",name:"date",value:d.date,onChange:ae,className:"w-full",required:!0})]})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"description",className:"form-label",children:""}),_.jsx("input",{type:"text",name:"description",value:d.description,onChange:ae,className:"w-full",required:!0})]}),_.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[_.jsxs("div",{children:[_.jsx("label",{htmlFor:"type",className:"form-label",children:" "}),_.jsx("select",{name:"type",value:d.type,onChange:ae,className:"w-full",children:L.map(P=>_.jsx("option",{value:P.value,children:P.label},P.value))})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"paymentMethod",className:"form-label",children:" "}),_.jsx("select",{name:"paymentMethod",value:d.paymentMethod,onChange:ae,className:"w-full",children:N.map(P=>_.jsx("option",{value:P.value,children:P.label},P.value))})]})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"categoryId",className:"form-label",children:""}),_.jsxs("select",{name:"categoryId",value:d.categoryId||"",onChange:ae,className:"w-full",children:[_.jsx("option",{value:"",children:"--   --"}),s.map(P=>_.jsxs("option",{value:P.id,children:[P.icon," ",P.name]},P.id))]})]}),B&&_.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg space-y-4",children:[_.jsx("h3",{className:"font-semibold text-blue-800",children:"  "}),_.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[_.jsxs("div",{children:[_.jsx("label",{htmlFor:"installmentsCount",className:"form-label",children:" "}),_.jsxs("select",{value:ee,onChange:P=>te(parseInt(P.target.value)),className:"w-full",children:[_.jsx("option",{value:2,children:" (2)"}),_.jsx("option",{value:3,children:"3 "}),_.jsx("option",{value:4,children:"4 "})]})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"initialPaymentSource",className:"form-label",children:"  "}),_.jsx("select",{value:K,onChange:P=>Y(P.target.value),className:"w-full",children:N.filter(P=>!P.value.includes("bnpl")).map(P=>_.jsx("option",{value:P.value,children:P.label},P.value))})]})]}),_.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:_.jsxs("p",{className:"text-sm text-blue-700",children:[_.jsx("strong",{children:" :"})," ",(d.amount/ee).toFixed(2)," ",_.jsx("br",{}),_.jsx("strong",{children:" :"})," ",(d.amount*(ee-1)/ee).toFixed(2)," "]})})]}),_.jsx("button",{type:"submit",className:"w-full py-3 magical-button text-white font-semibold rounded-lg mt-6",children:t?" ":" "})]})]})})})]})},g4=({onClose:n,onSave:e,initialData:t})=>{var d;const[s,o]=me.useState({name:"",limit:0,dueDay:15,statementDay:25,smsSamples:[]});me.useEffect(()=>{t&&o(t)},[t]);const l=p=>{const{name:h,value:T,type:E}=p.target;o(h==="smsSamples"?S=>({...S,smsSamples:T.split(",").map(I=>I.trim()).filter(Boolean)}):S=>({...S,[h]:E==="number"?parseFloat(T)||0:T}))},c=p=>{p.preventDefault(),e(s,t==null?void 0:t.id)};return _.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:n,children:_.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg animate-fade-in",onClick:p=>p.stopPropagation(),children:_.jsxs("div",{className:"p-6",children:[_.jsxs("div",{className:"flex justify-between items-center mb-6",children:[_.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:t?" ":"  "}),_.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600",children:_.jsx(gg,{})})]}),_.jsxs("form",{onSubmit:c,className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-600 mb-1",children:" "}),_.jsx("input",{type:"text",name:"name",value:s.name,onChange:l,className:"w-full p-2",required:!0})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"limit",className:"block text-sm font-medium text-slate-600 mb-1",children:" "}),_.jsx("input",{type:"number",name:"limit",value:s.limit,onChange:l,className:"w-full p-2",required:!0,step:"100"})]}),_.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[_.jsxs("div",{children:[_.jsx("label",{htmlFor:"statementDay",className:"block text-sm font-medium text-slate-600 mb-1",children:"   ()"}),_.jsx("input",{type:"number",name:"statementDay",value:s.statementDay,onChange:l,className:"w-full p-2",required:!0,min:"1",max:"31"})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"dueDay",className:"block text-sm font-medium text-slate-600 mb-1",children:"  ()"}),_.jsx("input",{type:"number",name:"dueDay",value:s.dueDay,onChange:l,className:"w-full p-2",required:!0,min:"1",max:"31"})]})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"smsSamples",className:"block text-sm font-medium text-slate-600 mb-1",children:"   ( )"}),_.jsx("input",{type:"text",name:"smsSamples",value:((d=s.smsSamples)==null?void 0:d.join(", "))||"",onChange:l,className:"w-full p-2",placeholder:": SNB, , "}),_.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"            ."})]}),_.jsx("button",{type:"submit",className:"w-full py-3 magical-button text-white font-semibold rounded-lg mt-6",children:t?" ":" "})]})]})})})},y4=({onClose:n,onSave:e,initialData:t})=>{var d;const[s,o]=me.useState({name:"",balance:0,currency:"SAR",smsSamples:[]});me.useEffect(()=>{t&&o(t)},[t]);const l=p=>{const{name:h,value:T,type:E}=p.target;o(h==="smsSamples"?S=>({...S,smsSamples:T.split(",").map(I=>I.trim()).filter(Boolean)}):S=>({...S,[h]:E==="number"?parseFloat(T)||0:T}))},c=p=>{p.preventDefault(),e(s,t==null?void 0:t.id)};return _.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:n,children:_.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg animate-fade-in",onClick:p=>p.stopPropagation(),children:_.jsxs("div",{className:"p-6",children:[_.jsxs("div",{className:"flex justify-between items-center mb-6",children:[_.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:t?" ":"  "}),_.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600",children:_.jsx(gg,{})})]}),_.jsxs("form",{onSubmit:c,className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-600 mb-1",children:" "}),_.jsx("input",{type:"text",name:"name",value:s.name,onChange:l,className:"w-full p-2",required:!0})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{children:[_.jsx("label",{htmlFor:"balance",className:"block text-sm font-medium text-slate-600 mb-1",children:" "}),_.jsx("input",{type:"number",name:"balance",value:s.balance,onChange:l,className:"w-full p-2",required:!0,step:"10"})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"currency",className:"block text-sm font-medium text-slate-600 mb-1",children:""}),_.jsxs("select",{name:"currency",value:s.currency||"SAR",onChange:l,className:"w-full p-2",required:!0,children:[_.jsx("option",{value:"SAR",children:"   (SAR)"}),_.jsx("option",{value:"AED",children:"   (AED)"}),_.jsx("option",{value:"USD",children:"   (USD)"}),_.jsx("option",{value:"EUR",children:"  (EUR)"}),_.jsx("option",{value:"GBP",children:"   (GBP)"}),_.jsx("option",{value:"JOD",children:"   (JOD)"}),_.jsx("option",{value:"KWD",children:"   (KWD)"}),_.jsx("option",{value:"QAR",children:"   (QAR)"}),_.jsx("option",{value:"BHD",children:"   (BHD)"}),_.jsx("option",{value:"OMR",children:"   (OMR)"})]})]})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"smsSamples",className:"block text-sm font-medium text-slate-600 mb-1",children:"   ( )"}),_.jsx("input",{type:"text",name:"smsSamples",value:((d=s.smsSamples)==null?void 0:d.join(", "))||"",onChange:l,className:"w-full p-2",placeholder:": Alrajhi, , "}),_.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"            ."})]}),_.jsx("button",{type:"submit",className:"w-full py-3 magical-button text-white font-semibold rounded-lg mt-6",children:t?" ":" "})]})]})})})},_4=()=>{var xt,It,ri,Mo,Lr;const[n,e]=me.useState(!1),[t,s]=me.useState(rd),[o,l]=me.useState(new Date().getFullYear()),[c,d]=me.useState(new Date().getMonth()+1),[p,h]=me.useState("summary"),[T,E]=me.useState({isLoading:!1,text:""}),[S,I]=me.useState(null),[V,B]=me.useState({isOpen:!1}),[F,ee]=me.useState({isOpen:!1}),[te,K]=me.useState({isOpen:!1}),[Y,ae]=me.useState({isOpen:!1}),[Z,R]=me.useState({fromAccount:"",toAccount:"",amount:0,description:"",exchangeRate:1}),[M,N]=me.useState(!1),[L,k]=me.useState(""),[P,D]=me.useState(null),[Ue,Be]=me.useState(!1),[Q,fe]=me.useState(!0);me.useEffect(()=>{(async()=>{fA();const de=await xs.onAuthStateChanged(async pe=>{try{pe?(console.log("    :",pe.email),D(pe),await Ce(pe.uid)):(console.log("     "),D(null),await Fe())}catch(Ee){console.error("    :",Ee),await Fe()}finally{fe(!1),e(!0)}});return()=>{typeof de=="function"&&de()}})()},[]),me.useEffect(()=>(V.isOpen||F.isOpen||te.isOpen||Y.isOpen||S||T.isLoading?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open"),()=>{document.body.classList.remove("modal-open")}),[V.isOpen,F.isOpen,te.isOpen,Y.isOpen,S,T.isLoading]),me.useEffect(()=>{var $,de;Y.isOpen&&Z.fromAccount&&Z.toAccount&&(($=t.bankAccounts[Z.fromAccount])==null?void 0:$.currency)!==((de=t.bankAccounts[Z.toAccount])==null?void 0:de.currency)&&Bs()},[Z.fromAccount,Z.toAccount,Y.isOpen]);const Ce=async $=>{var de;try{const pe=await xs.getData("users",$);if(pe.success&&pe.data){const Ee=rd(),De={...Ee,...pe.data,cards:{...Ee.cards,...pe.data.cards||{}},bankAccounts:{...Ee.bankAccounts,...pe.data.bankAccounts||{}},investments:{...Ee.investments,...pe.data.investments||{}}};s(De),console.log("      Firebase")}else pe.success||(console.warn("       Firebase:",pe.error),(de=pe.error)!=null&&de.includes("")&&I({title:" -  Firebase",body:`<p>     . :</p>
                               <ul>
                                 <li>   </li>
                                 <li>    Firestore</li>
                                 <li>  FIREBASE_SETUP.md </li>
                               </ul>
                               <p>    .</p>`,confirmText:"",hideCancel:!0}))}catch(pe){console.error("    :",pe)}},Fe=async()=>{try{const $=localStorage.getItem("financial_dashboard_state");if($){const de=JSON.parse($),pe=rd(),Ee={...pe,...de,cards:{...pe.cards,...de.cards||{}},bankAccounts:{...pe.bankAccounts,...de.bankAccounts||{}},investments:{...pe.investments,...de.investments||{}}};s(Ee),console.log("     localStorage")}}catch($){console.error("    :",$)}};me.useEffect(()=>{if(n&&!Q&&(localStorage.setItem("financial_dashboard_state",JSON.stringify(t)),P)){const de=setTimeout(async()=>{try{const pe=await xs.saveData("users",P.uid,t);pe.success?console.log("     Firebase"):console.warn("      Firebase:",pe.error)}catch(pe){console.error("      Firebase:",pe)}},2e3);return()=>clearTimeout(de)}},[t,n,P,Q]);const Qe=($,de="")=>E({isLoading:$,text:de}),O=me.useCallback(()=>t.transactions?t.transactions.filter($=>{const de=new Date($.date),pe=de.getFullYear()===o,Ee=c==="all"||de.getMonth()+1===c;return pe&&Ee}):[],[t.transactions,o,c]),ie=me.useMemo(()=>O(),[O]),he=me.useMemo(()=>{const $={},de={},pe={},Ee={};t.cards&&typeof t.cards=="object"&&Object.values(t.cards).forEach(ge=>{ge&&ge.id&&(pe[ge.id]={...ge,balance:0,available:ge.limit,usagePercentage:0})}),t.bankAccounts&&typeof t.bankAccounts=="object"&&Object.values(t.bankAccounts).forEach(ge=>{ge&&ge.id&&(Ee[ge.id]={...ge,deposits:0,withdrawals:0})});let De=0,gt=0,Or=0,qr=0;ie.forEach(ge=>{if(ge.type==="income")De+=ge.amount;else if(ge.type==="expense")gt+=ge.amount,ge.categoryId&&($[ge.categoryId]=($[ge.categoryId]||0)+ge.amount);else if(ge.type==="bnpl-payment")gt+=ge.amount,ge.categoryId&&($[ge.categoryId]=($[ge.categoryId]||0)+ge.amount);else if(ge.type==="investment-deposit")Or+=ge.amount,gt+=ge.amount;else if(ge.type==="investment-withdrawal")qr+=ge.amount,De+=ge.amount;else if(ge.type.endsWith("-payment")){const wt=ge.type.replace("-payment","");de[wt]?de[wt]+=ge.amount:de[wt]=ge.amount}}),Object.keys(t.cards).forEach(ge=>{const wt=t.cards[ge];let yn=0;t.transactions.forEach(_n=>{_n.paymentMethod===ge&&_n.type==="expense"&&(yn+=_n.amount),_n.type===`${ge}-payment`&&(yn-=_n.amount)}),pe[ge].balance=yn,pe[ge].available=wt.limit-yn,pe[ge].usagePercentage=wt.limit>0?yn/wt.limit*100:0}),Object.keys(t.bankAccounts).forEach(ge=>{const wt=t.bankAccounts[ge];let yn=0,_n=0,cn=wt.balance;t.transactions.forEach(Ze=>{Ze.paymentMethod===ge&&(["income","investment-withdrawal"].includes(Ze.type)?cn+=Ze.amount:["expense","investment-deposit"].includes(Ze.type)&&(cn-=Ze.amount)),Ze.type.endsWith("-payment")&&Ze.paymentMethod===ge&&(cn-=Ze.amount),Ze.type==="expense"&&Ze.isInstallmentPayment&&Ze.paymentMethod===ge&&(cn-=Ze.amount)}),ie.forEach(Ze=>{Ze.paymentMethod===ge&&(["income","investment-withdrawal"].includes(Ze.type)?yn+=Ze.amount:["expense","investment-deposit"].includes(Ze.type)&&(_n+=Ze.amount)),Ze.type.endsWith("-payment")&&Ze.paymentMethod===ge&&(_n+=Ze.amount),Ze.type==="expense"&&Ze.isInstallmentPayment&&Ze.paymentMethod===ge&&(_n+=Ze.amount)}),Ee[ge].balance=cn,Ee[ge].deposits=yn,Ee[ge].withdrawals=_n});const Do=Object.values(pe).reduce((ge,wt)=>ge+wt.balance,0),Dn=Object.values(pe).reduce((ge,wt)=>ge+wt.available,0),Jt=Object.values(pe).reduce((ge,wt)=>ge+wt.limit,0),Sn=Object.values(Ee).reduce((ge,wt)=>ge+wt.balance,0);return{totalIncome:De,totalExpenses:gt,cardDetails:pe,cardPayments:de,bankAccountDetails:Ee,totalDebt:Do,totalAvailable:Dn,totalLimits:Jt,totalBankBalance:Sn,totalInvestmentDeposits:Or,totalInvestmentWithdrawals:qr,expensesByCategory:$}},[ie,t.transactions,t.cards,t.bankAccounts]),_e=($,de)=>{s(pe=>{if(de){const Ee=pe.transactions.map(De=>De.id===de?{...De,...$}:De);return{...pe,transactions:Ee}}else if($.bnplData&&$.paymentMethod.includes("bnpl")){const Ee={id:`installment-${Date.now()}`,provider:$.paymentMethod,description:$.description,totalAmount:$.amount,installmentAmount:$.bnplData.installmentAmount,total:$.bnplData.installmentsCount,paid:1,createdAt:$.date},De={id:`trans-${Date.now()}-1`,amount:$.bnplData.installmentAmount,date:$.date,description:`  : ${$.description}`,paymentMethod:$.bnplData.initialPaymentSource,type:"expense",categoryId:$.categoryId,isInstallmentPayment:!0,installmentId:Ee.id};return{...pe,transactions:[...pe.transactions,De],installments:[...pe.installments,Ee]}}else{const Ee={id:`trans-${Date.now()}`,...$};return{...pe,transactions:[...pe.transactions,Ee]}}}),B({isOpen:!1})},re=$=>{I({title:" ",body:"<p>              .</p>",confirmText:", ",onConfirm:()=>{s(de=>{const pe=de.transactions.find(gt=>gt.id===$);if(!pe)return de;const Ee=de.transactions.filter(gt=>gt.id!==$);let De=de.installments;return pe.isInstallmentPayment&&pe.installmentId&&(De=de.installments.map(gt=>gt.id===pe.installmentId?{...gt,paid:Math.max(0,gt.paid-1)}:gt)),{...de,transactions:Ee,installments:De}}),I(null)}})},ce=$=>{const de=t.transactions.find(pe=>pe.id===$);de&&B({isOpen:!0,initialData:de})},ve=async $=>{D($),Be(!1),await Ce($.uid)},Xe=async()=>{try{const $=await xs.signOut();$.success?(console.log("    "),D(null),await Fe()):console.error("    :",$.error)}catch($){console.error("    :",$)}},tt=($,de)=>{s(pe=>{const Ee={...pe.cards};if(de)Ee[de]={...Ee[de],...$,id:de};else{const De=`card-${Date.now()}`;Ee[De]={...$,id:De}}return{...pe,cards:Ee}}),ee({isOpen:!1})},An=$=>{var de;t.transactions.some(pe=>pe.paymentMethod===$||pe.type===`${$}-payment`)?I({title:"  ",body:"<p>         .    .</p>",hideCancel:!0,confirmText:""}):I({title:" ",body:`<p>        "${(de=t.cards[$])==null?void 0:de.name}"</p>`,confirmText:", ",onConfirm:()=>{s(pe=>{const Ee={...pe.cards};return delete Ee[$],{...pe,cards:Ee}}),I(null)}})},bt=($,de)=>{s(pe=>{const Ee={...pe.bankAccounts};if(de)Ee[de]={...Ee[de],...$,id:de};else{const De=`bank-${Date.now()}`;Ee[De]={...$,id:De}}return{...pe,bankAccounts:Ee}}),K({isOpen:!1})},bi=$=>{var de;t.transactions.some(pe=>pe.paymentMethod===$)?I({title:"  ",body:"<p>         .    .</p>",hideCancel:!0,confirmText:""}):I({title:" ",body:`<p>        "${(de=t.bankAccounts[$])==null?void 0:de.name}"</p>`,confirmText:", ",onConfirm:()=>{s(pe=>{const Ee={...pe.bankAccounts};return delete Ee[$],{...pe,bankAccounts:Ee}}),I(null)}})},qs=$=>{I({title:"  ",body:"<p>           .</p>",confirmText:"",cancelText:"",onConfirm:()=>{try{const de=rd();if($.creditCards&&!$.cards){const Ee={};Object.entries($.creditCards).forEach(([De,gt])=>{Ee[De]={id:De,name:De.toUpperCase(),limit:gt.creditLimit||0,balance:gt.currentBalance||0,dueDay:gt.dueDay||1,smsSamples:[],keywords:[]}}),$.cards=Ee}if($.cards&&typeof $.cards=="object"&&($.cards.snb||$.cards.enbd)){const Ee={};$.cards.snb&&(Ee["snb-card"]={id:"snb-card",name:"SNB ",limit:$.cards.snb.limit||0,dueDay:$.cards.snb.dueDay||1,statementDay:25,smsSamples:["SNB","",""]}),$.cards.enbd&&(Ee["enbd-card"]={id:"enbd-card",name:"ENBD ",limit:$.cards.enbd.limit||0,dueDay:$.cards.enbd.dueDay||1,statementDay:28,smsSamples:["ENBD","","Visa card"]}),$.cards=Ee}$.bank&&!$.bankAccounts&&($.bankAccounts={"bank-default":{id:"bank-default",name:" ",balance:$.bank.balance||0,smsSamples:["","mada","Alrajhi","","Inma","",""]}}),$.transactions&&Array.isArray($.transactions)&&($.transactions=$.transactions.map(Ee=>Ee.paymentMethod==="mada-bank"?{...Ee,paymentMethod:"bank-default"}:Ee));const pe={...de,...$};s(pe),P&&(async()=>{try{const De=await xs.saveData("users",P.uid,pe);De.success?console.log("      Firebase"):console.warn("      Firebase:",De.error)}catch(De){console.error("      Firebase:",De)}})(),I({title:"  ",body:"<p>      .</p>",confirmText:"",hideCancel:!0})}catch{I({title:"  ",body:"<p>    .    .</p>",confirmText:"",hideCancel:!0})}}})},Hn=$=>ee({isOpen:!0,initialData:$?t.cards[$]:null}),kr=$=>K({isOpen:!0,initialData:$?t.bankAccounts[$]:null}),Zi=()=>{if(!Z.fromAccount||!Z.toAccount||Z.amount<=0){I({title:"",body:"<p>     .</p>",hideCancel:!0,confirmText:""});return}if(Z.fromAccount===Z.toAccount){I({title:"",body:"<p>    .</p>",hideCancel:!0,confirmText:""});return}const $=t.bankAccounts[Z.fromAccount],de=t.bankAccounts[Z.toAccount],pe=Z.amount*Z.exchangeRate,Ee={id:`trans-${Date.now()}-withdrawal`,amount:Z.amount,date:new Date().toISOString().split("T")[0],description:`  ${(de==null?void 0:de.name)||" "}: ${Z.description}${Z.exchangeRate!==1?` (: ${Z.exchangeRate})`:""}`,paymentMethod:Z.fromAccount,type:"expense",categoryId:null},De={id:`trans-${Date.now()}-deposit`,amount:pe,date:new Date().toISOString().split("T")[0],description:`  ${($==null?void 0:$.name)||" "}: ${Z.description}${Z.exchangeRate!==1?` (: ${Z.exchangeRate})`:""}`,paymentMethod:Z.toAccount,type:"income",categoryId:null};s(gt=>({...gt,transactions:[...gt.transactions,Ee,De]})),ae({isOpen:!1}),R({fromAccount:"",toAccount:"",amount:0,description:"",exchangeRate:1}),k(""),I({title:" ",body:"<p>  !</p>",hideCancel:!0,confirmText:""})},Bs=async()=>{if(!Z.fromAccount||!Z.toAccount)return;const $=t.bankAccounts[Z.fromAccount],de=t.bankAccounts[Z.toAccount];if(!$||!de)return;const pe=$.currency||"SAR",Ee=de.currency||"SAR";if(pe===Ee){R(De=>({...De,exchangeRate:1})),k("");return}N(!0),k("");try{const De=await yA(pe,Ee);R(gt=>({...gt,exchangeRate:De.rate}))}catch(De){k(De instanceof Error?De.message:"     "),console.error("Exchange rate error:",De)}finally{N(!1)}};if(!n||Q)return _.jsx(WL,{});if(!P)return _.jsx("div",{className:"bg-slate-100 min-h-screen font-sans flex items-center justify-center",children:_.jsxs("div",{className:"w-full max-w-md px-4",children:[_.jsxs("div",{className:"text-center mb-8",children:[_.jsx("div",{className:"w-16 h-16 bg-blue-500/10 rounded-2xl flex items-center justify-center text-3xl mx-auto mb-4",children:""}),_.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"  "}),_.jsx("p",{className:"text-slate-600 mt-2",children:"      "})]}),_.jsx(UE,{onSuccess:ve,onClose:()=>{},hideCloseButton:!0})]})});`${o}${c==="all"?" ":new Date(o,c-1).toLocaleString("ar-SA",{month:"long"})}`;const Ur=()=>{switch(p){case"summary":return _.jsx(t4,{calculations:he,categories:t.categories});case"transactions":return _.jsx(n4,{transactions:ie,allTransactions:t.transactions,categories:t.categories,deleteTransaction:re,editTransaction:ce,state:t});case"ai-assistant":return _.jsx(s4,{calculations:he,filteredTransactions:ie});case"analysis":return _.jsx(r4,{calculations:he,categories:t.categories,allTransactions:t.transactions});case"budget":return _.jsx(o4,{state:t,setLoading:Qe,setModal:I});case"investment":return _.jsx(a4,{state:t,setState:s,calculations:he,setModal:I});case"cards":return _.jsx(u4,{state:t,openCardFormModal:Hn,deleteCard:An});case"bank":return _.jsx(f4,{state:t,setState:s,calculations:he,filteredTransactions:ie,categories:t.categories,setModal:I,openBankAccountFormModal:kr,deleteBankAccount:bi,openTransferModal:()=>ae({isOpen:!0})});case"installments":return _.jsx(h4,{state:t,setState:s,filteredTransactions:ie,setModal:I});case"settings":return _.jsx(m4,{state:t,setState:s,setModal:I,setLoading:Qe,onRestore:qs});default:return _.jsx("div",{children:"Tab not found"})}};return _.jsxs("div",{className:"bg-slate-100 min-h-screen font-sans",children:[_.jsx($L,{selectedYear:o,selectedMonth:c,onYearChange:l,onMonthChange:$=>d($),onAddTransaction:()=>B({isOpen:!0}),currentUser:P,onSignOut:Xe}),_.jsxs("main",{className:"container mx-auto px-2 sm:px-4 max-w-7xl mt-8 mb-20",children:[_.jsx(QL,{activeTab:p,setActiveTab:h}),Ur()]}),_.jsx("button",{onClick:()=>B({isOpen:!0}),className:"md:hidden fixed bottom-24 right-4 bg-blue-600 text-white w-14 h-14 rounded-full shadow-lg flex items-center justify-center z-40 text-2xl",children:"+"}),V.isOpen&&_.jsx(p4,{onClose:()=>B({isOpen:!1}),onSave:_e,initialData:V.initialData,categories:t.categories,cards:t.cards,bankAccounts:t.bankAccounts,setModalConfig:I}),F.isOpen&&_.jsx(g4,{onClose:()=>ee({isOpen:!1}),onSave:tt,initialData:F.initialData}),te.isOpen&&_.jsx(y4,{onClose:()=>K({isOpen:!1}),onSave:bt,initialData:te.initialData}),Y.isOpen&&_.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",onClick:()=>{ae({isOpen:!1}),R({fromAccount:"",toAccount:"",amount:0,description:"",exchangeRate:1}),k("")},children:_.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-lg animate-fade-in max-h-[90vh] overflow-y-auto",onClick:$=>$.stopPropagation(),children:_.jsxs("div",{className:"p-6",children:[_.jsxs("div",{className:"flex justify-between items-center mb-6",children:[_.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"   "}),_.jsx("button",{onClick:()=>{ae({isOpen:!1}),R({fromAccount:"",toAccount:"",amount:0,description:"",exchangeRate:1}),k("")},className:"text-slate-400 hover:text-slate-600",children:""})]}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{htmlFor:"fromAccount",className:"block text-sm font-medium text-slate-600 mb-1",children:" "}),_.jsxs("select",{id:"fromAccount",name:"fromAccount",value:Z.fromAccount,onChange:$=>R(de=>({...de,fromAccount:$.target.value})),className:"w-full p-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[_.jsx("option",{value:"",children:"  "}),Object.entries(t.bankAccounts).map(([$,de])=>_.jsx("option",{value:$,children:de.name},$))]})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"toAccount",className:"block text-sm font-medium text-slate-600 mb-1",children:" "}),_.jsxs("select",{id:"toAccount",name:"toAccount",value:Z.toAccount,onChange:$=>R(de=>({...de,toAccount:$.target.value})),className:"w-full p-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[_.jsx("option",{value:"",children:"  "}),Object.entries(t.bankAccounts).filter(([$])=>$!==Z.fromAccount).map(([$,de])=>_.jsx("option",{value:$,children:de.name},$))]})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-slate-600 mb-1",children:""}),_.jsx("input",{type:"number",id:"amount",name:"amount",step:"0.01",value:Z.amount,onChange:$=>R(de=>({...de,amount:parseFloat($.target.value)||0})),className:"w-full p-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00",required:!0})]}),Z.fromAccount&&Z.toAccount&&((xt=t.bankAccounts[Z.fromAccount])==null?void 0:xt.currency)!==((It=t.bankAccounts[Z.toAccount])==null?void 0:It.currency)&&_.jsxs("div",{children:[_.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["   (",(ri=t.bankAccounts[Z.fromAccount])==null?void 0:ri.currency,"  ",(Mo=t.bankAccounts[Z.toAccount])==null?void 0:Mo.currency,")"]}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("input",{type:"number",step:"0.0001",value:Z.exchangeRate,onChange:$=>R(de=>({...de,exchangeRate:parseFloat($.target.value)||1})),className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"1.0000"}),_.jsxs("button",{type:"button",onClick:Bs,disabled:M,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 transition-colors flex items-center gap-2",title:"   ",children:[M?_.jsx("div",{className:"w-4 h-4 border-2 border-t-transparent border-white rounded-full animate-spin"}):"",_.jsx("span",{className:"hidden sm:inline",children:""})]})]}),L&&_.jsx("p",{className:"text-red-500 text-xs mt-1",children:L}),_.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[" : ",(Z.amount*Z.exchangeRate).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})," ",(Lr=t.bankAccounts[Z.toAccount])==null?void 0:Lr.currency]})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-600 mb-1",children:" ()"}),_.jsx("input",{type:"text",id:"description",name:"description",value:Z.description,onChange:$=>R(de=>({...de,description:$.target.value})),className:"w-full p-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:":  "})]})]}),_.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[_.jsx("button",{type:"button",onClick:()=>{ae({isOpen:!1}),R({fromAccount:"",toAccount:"",amount:0,description:"",exchangeRate:1}),k("")},className:"px-4 py-2 bg-slate-200 rounded-lg hover:bg-slate-300 transition-colors",children:""}),_.jsx("button",{type:"button",onClick:Zi,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:""})]})]})})}),S&&_.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[10001] flex items-center justify-center p-4",onClick:()=>I(null),children:_.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4 animate-fade-in max-h-[90vh] overflow-y-auto",onClick:$=>$.stopPropagation(),children:[_.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:S.title}),_.jsx("div",{className:"text-slate-600",dangerouslySetInnerHTML:{__html:S.body}}),_.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[!S.hideCancel&&_.jsx("button",{onClick:()=>I(null),className:"px-4 py-2 bg-slate-200 rounded-lg",children:""}),_.jsx("button",{onClick:()=>{(!S.onConfirm||S.onConfirm()!==!1)&&I(null)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:S.confirmText||""})]})]})}),T.isLoading&&_.jsxs("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[10001] flex flex-col items-center justify-center",children:[_.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"}),_.jsx("p",{className:"text-white mt-4",children:T.text||" ..."})]}),Ue&&P&&_.jsx(UE,{onSuccess:ve,onClose:()=>Be(!1)})]})},ox=document.getElementById("root");if(!ox)throw new Error("Could not find root element");const v4=KC.createRoot(ox);v4.render(_.jsx(BC.StrictMode,{children:_.jsx(_4,{})}));
