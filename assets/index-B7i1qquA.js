(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function zE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Tm={exports:{}},Yl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bv;function Bx(){if(Bv)return Yl;Bv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,l){var c=null;if(l!==void 0&&(c=""+l),o.key!==void 0&&(c=""+o.key),"key"in o){l={};for(var d in o)d!=="key"&&(l[d]=o[d])}else l=o;return o=l.ref,{$$typeof:n,type:s,key:c,ref:o!==void 0?o:null,props:l}}return Yl.Fragment=e,Yl.jsx=t,Yl.jsxs=t,Yl}var Fv;function Fx(){return Fv||(Fv=1,Tm.exports=Bx()),Tm.exports}var v=Fx(),Em={exports:{}},Pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hv;function Hx(){if(Hv)return Pe;Hv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),A=Symbol.iterator;function x(O){return O===null||typeof O!="object"?null:(O=A&&O[A]||O["@@iterator"],typeof O=="function"?O:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,F={};function Z(O,ne,de){this.props=O,this.context=ne,this.refs=F,this.updater=de||k}Z.prototype.isReactComponent={},Z.prototype.setState=function(O,ne){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,ne,"setState")},Z.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function te(){}te.prototype=Z.prototype;function $(O,ne,de){this.props=O,this.context=ne,this.refs=F,this.updater=de||k}var z=$.prototype=new te;z.constructor=$,q(z,Z.prototype),z.isPureReactComponent=!0;var ae=Array.isArray;function ce(){}var M={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function R(O,ne,de){var me=de.ref;return{$$typeof:n,type:O,key:ne,ref:me!==void 0?me:null,props:de}}function D(O,ne){return R(O.type,ne,O.props)}function V(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function L(O){var ne={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(de){return ne[de]})}var P=/\/+/g;function qe(O,ne){return typeof O=="object"&&O!==null&&O.key!=null?L(""+O.key):ne.toString(36)}function it(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(ce,ce):(O.status="pending",O.then(function(ne){O.status==="pending"&&(O.status="fulfilled",O.value=ne)},function(ne){O.status==="pending"&&(O.status="rejected",O.reason=ne)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function W(O,ne,de,me,Ne){var ke=typeof O;(ke==="undefined"||ke==="boolean")&&(O=null);var He=!1;if(O===null)He=!0;else switch(ke){case"bigint":case"string":case"number":He=!0;break;case"object":switch(O.$$typeof){case n:case e:He=!0;break;case T:return He=O._init,W(He(O._payload),ne,de,me,Ne)}}if(He)return Ne=Ne(O),He=me===""?"."+qe(O,0):me,ae(Ne)?(de="",He!=null&&(de=He.replace(P,"$&/")+"/"),W(Ne,ne,de,"",function(Te){return Te})):Ne!=null&&(V(Ne)&&(Ne=D(Ne,de+(Ne.key==null||O&&O.key===Ne.key?"":(""+Ne.key).replace(P,"$&/")+"/")+He)),ne.push(Ne)),1;He=0;var xt=me===""?".":me+":";if(ae(O))for(var ie=0;ie<O.length;ie++)me=O[ie],ke=xt+qe(me,ie),He+=W(me,ne,de,ke,Ne);else if(ie=x(O),typeof ie=="function")for(O=ie.call(O),ie=0;!(me=O.next()).done;)me=me.value,ke=xt+qe(me,ie++),He+=W(me,ne,de,ke,Ne);else if(ke==="object"){if(typeof O.then=="function")return W(it(O),ne,de,me,Ne);throw ne=String(O),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return He}function K(O,ne,de){if(O==null)return O;var me=[],Ne=0;return W(O,me,"","",function(ke){return ne.call(de,ke,Ne++)}),me}function ue(O){if(O._status===-1){var ne=O._result;ne=ne(),ne.then(function(de){(O._status===0||O._status===-1)&&(O._status=1,O._result=de)},function(de){(O._status===0||O._status===-1)&&(O._status=2,O._result=de)}),O._status===-1&&(O._status=0,O._result=ne)}if(O._status===1)return O._result.default;throw O._result}var Ee=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},Me={map:K,forEach:function(O,ne,de){K(O,function(){ne.apply(this,arguments)},de)},count:function(O){var ne=0;return K(O,function(){ne++}),ne},toArray:function(O){return K(O,function(ne){return ne})||[]},only:function(O){if(!V(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Pe.Activity=E,Pe.Children=Me,Pe.Component=Z,Pe.Fragment=t,Pe.Profiler=o,Pe.PureComponent=$,Pe.StrictMode=s,Pe.Suspense=p,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(O){return M.H.useMemoCache(O)}},Pe.cache=function(O){return function(){return O.apply(null,arguments)}},Pe.cacheSignal=function(){return null},Pe.cloneElement=function(O,ne,de){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var me=q({},O.props),Ne=O.key;if(ne!=null)for(ke in ne.key!==void 0&&(Ne=""+ne.key),ne)!N.call(ne,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&ne.ref===void 0||(me[ke]=ne[ke]);var ke=arguments.length-2;if(ke===1)me.children=de;else if(1<ke){for(var He=Array(ke),xt=0;xt<ke;xt++)He[xt]=arguments[xt+2];me.children=He}return R(O.type,Ne,me)},Pe.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:l,_context:O},O},Pe.createElement=function(O,ne,de){var me,Ne={},ke=null;if(ne!=null)for(me in ne.key!==void 0&&(ke=""+ne.key),ne)N.call(ne,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(Ne[me]=ne[me]);var He=arguments.length-2;if(He===1)Ne.children=de;else if(1<He){for(var xt=Array(He),ie=0;ie<He;ie++)xt[ie]=arguments[ie+2];Ne.children=xt}if(O&&O.defaultProps)for(me in He=O.defaultProps,He)Ne[me]===void 0&&(Ne[me]=He[me]);return R(O,ke,Ne)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(O){return{$$typeof:d,render:O}},Pe.isValidElement=V,Pe.lazy=function(O){return{$$typeof:T,_payload:{_status:-1,_result:O},_init:ue}},Pe.memo=function(O,ne){return{$$typeof:h,type:O,compare:ne===void 0?null:ne}},Pe.startTransition=function(O){var ne=M.T,de={};M.T=de;try{var me=O(),Ne=M.S;Ne!==null&&Ne(de,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(ce,Ee)}catch(ke){Ee(ke)}finally{ne!==null&&de.types!==null&&(ne.types=de.types),M.T=ne}},Pe.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Pe.use=function(O){return M.H.use(O)},Pe.useActionState=function(O,ne,de){return M.H.useActionState(O,ne,de)},Pe.useCallback=function(O,ne){return M.H.useCallback(O,ne)},Pe.useContext=function(O){return M.H.useContext(O)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(O,ne){return M.H.useDeferredValue(O,ne)},Pe.useEffect=function(O,ne){return M.H.useEffect(O,ne)},Pe.useEffectEvent=function(O){return M.H.useEffectEvent(O)},Pe.useId=function(){return M.H.useId()},Pe.useImperativeHandle=function(O,ne,de){return M.H.useImperativeHandle(O,ne,de)},Pe.useInsertionEffect=function(O,ne){return M.H.useInsertionEffect(O,ne)},Pe.useLayoutEffect=function(O,ne){return M.H.useLayoutEffect(O,ne)},Pe.useMemo=function(O,ne){return M.H.useMemo(O,ne)},Pe.useOptimistic=function(O,ne){return M.H.useOptimistic(O,ne)},Pe.useReducer=function(O,ne,de){return M.H.useReducer(O,ne,de)},Pe.useRef=function(O){return M.H.useRef(O)},Pe.useState=function(O){return M.H.useState(O)},Pe.useSyncExternalStore=function(O,ne,de){return M.H.useSyncExternalStore(O,ne,de)},Pe.useTransition=function(){return M.H.useTransition()},Pe.version="19.2.0",Pe}var zv;function xp(){return zv||(zv=1,Em.exports=Hx()),Em.exports}var he=xp();const zx=zE(he);var Sm={exports:{}},Jl={},Am={exports:{}},bm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gv;function Gx(){return Gv||(Gv=1,(function(n){function e(W,K){var ue=W.length;W.push(K);e:for(;0<ue;){var Ee=ue-1>>>1,Me=W[Ee];if(0<o(Me,K))W[Ee]=K,W[ue]=Me,ue=Ee;else break e}}function t(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var K=W[0],ue=W.pop();if(ue!==K){W[0]=ue;e:for(var Ee=0,Me=W.length,O=Me>>>1;Ee<O;){var ne=2*(Ee+1)-1,de=W[ne],me=ne+1,Ne=W[me];if(0>o(de,ue))me<Me&&0>o(Ne,de)?(W[Ee]=Ne,W[me]=ue,Ee=me):(W[Ee]=de,W[ne]=ue,Ee=ne);else if(me<Me&&0>o(Ne,ue))W[Ee]=Ne,W[me]=ue,Ee=me;else break e}}return K}function o(W,K){var ue=W.sortIndex-K.sortIndex;return ue!==0?ue:W.id-K.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],h=[],T=1,E=null,A=3,x=!1,k=!1,q=!1,F=!1,Z=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function z(W){for(var K=t(h);K!==null;){if(K.callback===null)s(h);else if(K.startTime<=W)s(h),K.sortIndex=K.expirationTime,e(p,K);else break;K=t(h)}}function ae(W){if(q=!1,z(W),!k)if(t(p)!==null)k=!0,ce||(ce=!0,L());else{var K=t(h);K!==null&&it(ae,K.startTime-W)}}var ce=!1,M=-1,N=5,R=-1;function D(){return F?!0:!(n.unstable_now()-R<N)}function V(){if(F=!1,ce){var W=n.unstable_now();R=W;var K=!0;try{e:{k=!1,q&&(q=!1,te(M),M=-1),x=!0;var ue=A;try{t:{for(z(W),E=t(p);E!==null&&!(E.expirationTime>W&&D());){var Ee=E.callback;if(typeof Ee=="function"){E.callback=null,A=E.priorityLevel;var Me=Ee(E.expirationTime<=W);if(W=n.unstable_now(),typeof Me=="function"){E.callback=Me,z(W),K=!0;break t}E===t(p)&&s(p),z(W)}else s(p);E=t(p)}if(E!==null)K=!0;else{var O=t(h);O!==null&&it(ae,O.startTime-W),K=!1}}break e}finally{E=null,A=ue,x=!1}K=void 0}}finally{K?L():ce=!1}}}var L;if(typeof $=="function")L=function(){$(V)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,qe=P.port2;P.port1.onmessage=V,L=function(){qe.postMessage(null)}}else L=function(){Z(V,0)};function it(W,K){M=Z(function(){W(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return A},n.unstable_next=function(W){switch(A){case 1:case 2:case 3:var K=3;break;default:K=A}var ue=A;A=K;try{return W()}finally{A=ue}},n.unstable_requestPaint=function(){F=!0},n.unstable_runWithPriority=function(W,K){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ue=A;A=W;try{return K()}finally{A=ue}},n.unstable_scheduleCallback=function(W,K,ue){var Ee=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?Ee+ue:Ee):ue=Ee,W){case 1:var Me=-1;break;case 2:Me=250;break;case 5:Me=1073741823;break;case 4:Me=1e4;break;default:Me=5e3}return Me=ue+Me,W={id:T++,callback:K,priorityLevel:W,startTime:ue,expirationTime:Me,sortIndex:-1},ue>Ee?(W.sortIndex=ue,e(h,W),t(p)===null&&W===t(h)&&(q?(te(M),M=-1):q=!0,it(ae,ue-Ee))):(W.sortIndex=Me,e(p,W),k||x||(k=!0,ce||(ce=!0,L()))),W},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(W){var K=A;return function(){var ue=A;A=K;try{return W.apply(this,arguments)}finally{A=ue}}}})(bm)),bm}var jv;function jx(){return jv||(jv=1,Am.exports=Gx()),Am.exports}var Cm={exports:{}},un={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yv;function Yx(){if(Yv)return un;Yv=1;var n=xp();function e(p){var h="https://react.dev/errors/"+p;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)h+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+p+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(p,h,T){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:p,containerInfo:h,implementation:T}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,h){if(p==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,un.createPortal=function(p,h){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return l(p,h,null,T)},un.flushSync=function(p){var h=c.T,T=s.p;try{if(c.T=null,s.p=2,p)return p()}finally{c.T=h,s.p=T,s.d.f()}},un.preconnect=function(p,h){typeof p=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(p,h))},un.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},un.preinit=function(p,h){if(typeof p=="string"&&h&&typeof h.as=="string"){var T=h.as,E=d(T,h.crossOrigin),A=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;T==="style"?s.d.S(p,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:E,integrity:A,fetchPriority:x}):T==="script"&&s.d.X(p,{crossOrigin:E,integrity:A,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},un.preinitModule=function(p,h){if(typeof p=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var T=d(h.as,h.crossOrigin);s.d.M(p,{crossOrigin:T,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(p)},un.preload=function(p,h){if(typeof p=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var T=h.as,E=d(T,h.crossOrigin);s.d.L(p,T,{crossOrigin:E,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},un.preloadModule=function(p,h){if(typeof p=="string")if(h){var T=d(h.as,h.crossOrigin);s.d.m(p,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:T,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(p)},un.requestFormReset=function(p){s.d.r(p)},un.unstable_batchedUpdates=function(p,h){return p(h)},un.useFormState=function(p,h,T){return c.H.useFormState(p,h,T)},un.useFormStatus=function(){return c.H.useHostTransitionStatus()},un.version="19.2.0",un}var Jv;function Jx(){if(Jv)return Cm.exports;Jv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Cm.exports=Yx(),Cm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kv;function Kx(){if(Kv)return Jl;Kv=1;var n=jx(),e=xp(),t=Jx();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,a=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(a=r.return),i=r.return;while(i)}return r.tag===3?a:null}function c(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function p(i){if(l(i)!==i)throw Error(s(188))}function h(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var a=i,u=r;;){var y=a.return;if(y===null)break;var _=y.alternate;if(_===null){if(u=y.return,u!==null){a=u;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===a)return p(y),i;if(_===u)return p(y),r;_=_.sibling}throw Error(s(188))}if(a.return!==u.return)a=y,u=_;else{for(var b=!1,I=y.child;I;){if(I===a){b=!0,a=y,u=_;break}if(I===u){b=!0,u=y,a=_;break}I=I.sibling}if(!b){for(I=_.child;I;){if(I===a){b=!0,a=_,u=y;break}if(I===u){b=!0,u=_,a=y;break}I=I.sibling}if(!b)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:r}function T(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=T(i),r!==null)return r;i=i.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),$=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function L(i){return i===null||typeof i!="object"?null:(i=V&&i[V]||i["@@iterator"],typeof i=="function"?i:null)}var P=Symbol.for("react.client.reference");function qe(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===P?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case q:return"Fragment";case Z:return"Profiler";case F:return"StrictMode";case ae:return"Suspense";case ce:return"SuspenseList";case R:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case k:return"Portal";case $:return i.displayName||"Context";case te:return(i._context.displayName||"Context")+".Consumer";case z:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case M:return r=i.displayName||null,r!==null?r:qe(i.type)||"Memo";case N:r=i._payload,i=i._init;try{return qe(i(r))}catch{}}return null}var it=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},Ee=[],Me=-1;function O(i){return{current:i}}function ne(i){0>Me||(i.current=Ee[Me],Ee[Me]=null,Me--)}function de(i,r){Me++,Ee[Me]=i.current,i.current=r}var me=O(null),Ne=O(null),ke=O(null),He=O(null);function xt(i,r){switch(de(ke,r),de(Ne,i),de(me,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?uv(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=uv(r),i=cv(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ne(me),de(me,i)}function ie(){ne(me),ne(Ne),ne(ke)}function Te(i){i.memoizedState!==null&&de(He,i);var r=me.current,a=cv(r,i.type);r!==a&&(de(Ne,i),de(me,a))}function ge(i){Ne.current===i&&(ne(me),ne(Ne)),He.current===i&&(ne(He),Hl._currentValue=ue)}var be,Ze;function jt(i){if(be===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);be=r&&r[1]||"",Ze=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+be+i+Ze}var ks=!1;function Ti(i,r){if(!i||ks)return"";ks=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(X){var J=X}Reflect.construct(i,[],re)}else{try{re.call()}catch(X){J=X}i.call(re.prototype)}}else{try{throw Error()}catch(X){J=X}(re=i())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(X){if(X&&J&&typeof X.stack=="string")return[X.stack,J.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=u.DetermineComponentFrameRoot(),b=_[0],I=_[1];if(b&&I){var U=b.split(`
`),Y=I.split(`
`);for(y=u=0;u<U.length&&!U[u].includes("DetermineComponentFrameRoot");)u++;for(;y<Y.length&&!Y[y].includes("DetermineComponentFrameRoot");)y++;if(u===U.length||y===Y.length)for(u=U.length-1,y=Y.length-1;1<=u&&0<=y&&U[u]!==Y[y];)y--;for(;1<=u&&0<=y;u--,y--)if(U[u]!==Y[y]){if(u!==1||y!==1)do if(u--,y--,0>y||U[u]!==Y[y]){var ee=`
`+U[u].replace(" at new "," at ");return i.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",i.displayName)),ee}while(1<=u&&0<=y);break}}}finally{ks=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?jt(a):""}function Mr(i,r){switch(i.tag){case 26:case 27:case 5:return jt(i.type);case 16:return jt("Lazy");case 13:return i.child!==r&&r!==null?jt("Suspense Fallback"):jt("Suspense");case 19:return jt("SuspenseList");case 0:case 15:return Ti(i.type,!1);case 11:return Ti(i.type.render,!1);case 1:return Ti(i.type,!0);case 31:return jt("Activity");default:return""}}function Dr(i){try{var r="",a=null;do r+=Mr(i,a),a=i,i=i.return;while(i);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var St=Object.prototype.hasOwnProperty,It=n.unstable_scheduleCallback,pe=n.unstable_cancelCallback,wt=n.unstable_shouldYield,In=n.unstable_requestPaint,ht=n.unstable_now,wn=n.unstable_getCurrentPriorityLevel,et=n.unstable_ImmediatePriority,Ya=n.unstable_UserBlockingPriority,Us=n.unstable_NormalPriority,Af=n.unstable_LowPriority,Mu=n.unstable_IdlePriority,Du=n.log,Pu=n.unstable_setDisableYieldValue,ti=null,tn=null;function qn(i){if(typeof Du=="function"&&Pu(i),tn&&typeof tn.setStrictMode=="function")try{tn.setStrictMode(ti,i)}catch{}}var Rt=Math.clz32?Math.clz32:ku,Vu=Math.log,Co=Math.LN2;function ku(i){return i>>>=0,i===0?32:31-(Vu(i)/Co|0)|0}var Ei=256,Pr=262144,Vt=4194304;function Si(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Ai(i,r,a){var u=i.pendingLanes;if(u===0)return 0;var y=0,_=i.suspendedLanes,b=i.pingedLanes;i=i.warmLanes;var I=u&134217727;return I!==0?(u=I&~_,u!==0?y=Si(u):(b&=I,b!==0?y=Si(b):a||(a=I&~i,a!==0&&(y=Si(a))))):(I=u&~_,I!==0?y=Si(I):b!==0?y=Si(b):a||(a=u&~i,a!==0&&(y=Si(a)))),y===0?0:r!==0&&r!==y&&(r&_)===0&&(_=y&-y,a=r&-r,_>=a||_===32&&(a&4194048)!==0)?r:y}function ni(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function bf(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Uu(){var i=Vt;return Vt<<=1,(Vt&62914560)===0&&(Vt=4194304),i}function bi(i){for(var r=[],a=0;31>a;a++)r.push(i);return r}function Vr(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Cf(i,r,a,u,y,_){var b=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var I=i.entanglements,U=i.expirationTimes,Y=i.hiddenUpdates;for(a=b&~a;0<a;){var ee=31-Rt(a),re=1<<ee;I[ee]=0,U[ee]=-1;var J=Y[ee];if(J!==null)for(Y[ee]=null,ee=0;ee<J.length;ee++){var X=J[ee];X!==null&&(X.lane&=-536870913)}a&=~re}u!==0&&kr(i,u,0),_!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=_&~(b&~r))}function kr(i,r,a){i.pendingLanes|=r,i.suspendedLanes&=~r;var u=31-Rt(r);i.entangledLanes|=r,i.entanglements[u]=i.entanglements[u]|1073741824|a&261930}function Ja(i,r){var a=i.entangledLanes|=r;for(i=i.entanglements;a;){var u=31-Rt(a),y=1<<u;y&r|i[u]&r&&(i[u]|=r),a&=~y}}function Ka(i,r){var a=r&-r;return a=(a&42)!==0?1:Ur(a),(a&(i.suspendedLanes|r))!==0?0:a}function Ur(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Qi(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Lu(){var i=K.p;return i!==0?i:(i=window.event,i===void 0?32:Pv(i.type))}function ii(i,r){var a=K.p;try{return K.p=i,r()}finally{K.p=a}}var si=Math.random().toString(36).slice(2),kt="__reactFiber$"+si,$t="__reactProps$"+si,Ci="__reactContainer$"+si,xo="__reactEvents$"+si,xf="__reactListeners$"+si,Ou="__reactHandles$"+si,qu="__reactResources$"+si,xi="__reactMarker$"+si;function Io(i){delete i[kt],delete i[$t],delete i[xo],delete i[xf],delete i[Ou]}function Ii(i){var r=i[kt];if(r)return r;for(var a=i.parentNode;a;){if(r=a[Ci]||a[kt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(i=yv(i);i!==null;){if(a=i[kt])return a;i=yv(i)}return r}i=a,a=i.parentNode}return null}function Bn(i){if(i=i[kt]||i[Ci]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function Rn(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function wi(i){var r=i[qu];return r||(r=i[qu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ut(i){i[xi]=!0}var $a=new Set,Qa={};function Ri(i,r){Ni(i,r),Ni(i+"Capture",r)}function Ni(i,r){for(Qa[i]=r,i=0;i<r.length;i++)$a.add(r[i])}var Xa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wa={},Za={};function Bu(i){return St.call(Za,i)?!0:St.call(Wa,i)?!1:Xa.test(i)?Za[i]=!0:(Wa[i]=!0,!1)}function wo(i,r,a){if(Bu(r))if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+a)}}function Nn(i,r,a){if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+a)}}function Lt(i,r,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(r,a,""+u)}}function Qt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ls(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function el(i,r,a){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var y=u.get,_=u.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return y.call(this)},set:function(b){a=""+b,_.call(this,b)}}),Object.defineProperty(i,r,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(b){a=""+b},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function rt(i){if(!i._valueTracker){var r=Ls(i)?"checked":"value";i._valueTracker=el(i,r,""+i[r])}}function Lr(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var a=r.getValue(),u="";return i&&(u=Ls(i)?i.checked?"true":"false":i.value),i=u,i!==a?(r.setValue(i),!0):!1}function Mi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Or=/[\n"\\]/g;function vn(i){return i.replace(Or,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ro(i,r,a,u,y,_,b,I){i.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.type=b:i.removeAttribute("type"),r!=null?b==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+Qt(r)):i.value!==""+Qt(r)&&(i.value=""+Qt(r)):b!=="submit"&&b!=="reset"||i.removeAttribute("value"),r!=null?tl(i,b,Qt(r)):a!=null?tl(i,b,Qt(a)):u!=null&&i.removeAttribute("value"),y==null&&_!=null&&(i.defaultChecked=!!_),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?i.name=""+Qt(I):i.removeAttribute("name")}function Fu(i,r,a,u,y,_,b,I){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),r!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){rt(i);return}a=a!=null?""+Qt(a):"",r=r!=null?""+Qt(r):a,I||r===i.value||(i.value=r),i.defaultValue=r}u=u??y,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=I?i.checked:!!u,i.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.name=b),rt(i)}function tl(i,r,a){r==="number"&&Mi(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function Os(i,r,a,u){if(i=i.options,r){r={};for(var y=0;y<a.length;y++)r["$"+a[y]]=!0;for(a=0;a<i.length;a++)y=r.hasOwnProperty("$"+i[a].value),i[a].selected!==y&&(i[a].selected=y),y&&u&&(i[a].defaultSelected=!0)}else{for(a=""+Qt(a),r=null,y=0;y<i.length;y++){if(i[y].value===a){i[y].selected=!0,u&&(i[y].defaultSelected=!0);return}r!==null||i[y].disabled||(r=i[y])}r!==null&&(r.selected=!0)}}function Hu(i,r,a){if(r!=null&&(r=""+Qt(r),r!==i.value&&(i.value=r),a==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=a!=null?""+Qt(a):""}function qs(i,r,a,u){if(r==null){if(u!=null){if(a!=null)throw Error(s(92));if(it(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),r=a}a=Qt(r),i.defaultValue=a,u=i.textContent,u===a&&u!==""&&u!==null&&(i.value=u),rt(i)}function Tn(i,r){if(r){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=r;return}}i.textContent=r}var zu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nl(i,r,a){var u=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":u?i.setProperty(r,a):typeof a!="number"||a===0||zu.has(r)?r==="float"?i.cssFloat=a:i[r]=(""+a).trim():i[r]=a+"px"}function il(i,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var y in r)u=r[y],r.hasOwnProperty(y)&&a[y]!==u&&nl(i,y,u)}else for(var _ in r)r.hasOwnProperty(_)&&nl(i,_,r[_])}function No(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mo(i){return Bs.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ri(){}var sl=null;function Fn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Fs=null,Di=null;function qr(i){var r=Bn(i);if(r&&(i=r.stateNode)){var a=i[$t]||null;e:switch(i=r.stateNode,r.type){case"input":if(Ro(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+vn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var u=a[r];if(u!==i&&u.form===i.form){var y=u[$t]||null;if(!y)throw Error(s(90));Ro(u,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<a.length;r++)u=a[r],u.form===i.form&&Lr(u)}break e;case"textarea":Hu(i,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Os(i,!!a.multiple,r,!1)}}}var Do=!1;function Hs(i,r,a){if(Do)return i(r,a);Do=!0;try{var u=i(r);return u}finally{if(Do=!1,(Fs!==null||Di!==null)&&(Lc(),Fs&&(r=Fs,i=Di,Di=Fs=null,qr(r),i)))for(r=0;r<i.length;r++)qr(i[r])}}function oi(i,r){var a=i.stateNode;if(a===null)return null;var u=a[$t]||null;if(u===null)return null;a=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Br=!1;if(Hn)try{var lt={};Object.defineProperty(lt,"passive",{get:function(){Br=!0}}),window.addEventListener("test",lt,lt),window.removeEventListener("test",lt,lt)}catch{Br=!1}var Pi=null,rl=null,Fr=null;function ol(){if(Fr)return Fr;var i,r=rl,a=r.length,u,y="value"in Pi?Pi.value:Pi.textContent,_=y.length;for(i=0;i<a&&r[i]===y[i];i++);var b=a-i;for(u=1;u<=b&&r[a-u]===y[_-u];u++);return Fr=y.slice(i,1<u?1-u:void 0)}function Hr(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Xi(){return!0}function ai(){return!1}function nn(i){function r(a,u,y,_,b){this._reactName=a,this._targetInst=y,this.type=u,this.nativeEvent=_,this.target=b,this.currentTarget=null;for(var I in i)i.hasOwnProperty(I)&&(a=i[I],this[I]=a?a(_):_[I]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Xi:ai,this.isPropagationStopped=ai,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Xi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Xi)},persist:function(){},isPersistent:Xi}),r}var Wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vi=nn(Wi),zs=E({},Wi,{view:0,detail:0}),al=nn(zs),Gs,Po,ki,Vo=E({},zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:js,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ki&&(ki&&i.type==="mousemove"?(Gs=i.screenX-ki.screenX,Po=i.screenY-ki.screenY):Po=Gs=0,ki=i),Gs)},movementY:function(i){return"movementY"in i?i.movementY:Po}}),ll=nn(Vo),zr=E({},Vo,{dataTransfer:0}),ju=nn(zr),Yu=E({},zs,{relatedTarget:0}),Gr=nn(Yu),ul=E({},Wi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ju=nn(ul),ko=E({},Wi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Ku=nn(ko),$u=E({},Wi,{data:0}),Ui=nn($u),Qu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zu(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=Wu[i])?!!r[i]:!1}function js(){return Zu}var pn=E({},zs,{key:function(i){if(i.key){var r=Qu[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Hr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Xu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:js,charCode:function(i){return i.type==="keypress"?Hr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Hr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ec=nn(pn),tc=E({},Vo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zi=nn(tc),m=E({},zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:js}),S=nn(m),C=E({},Wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=nn(C),G=E({},Vo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=nn(G),fe=E({},Wi,{newState:0,oldState:0}),Ue=nn(fe),Nt=[9,13,27,32],tt=Hn&&"CompositionEvent"in window,vt=null;Hn&&"documentMode"in document&&(vt=document.documentMode);var zn=Hn&&"TextEvent"in window&&!vt,Li=Hn&&(!tt||vt&&8<vt&&11>=vt),li=" ",ui=!1;function jr(i,r){switch(i){case"keyup":return Nt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uo(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Lo=!1;function cC(i,r){switch(i){case"compositionend":return Uo(r);case"keypress":return r.which!==32?null:(ui=!0,li);case"textInput":return i=r.data,i===li&&ui?null:i;default:return null}}function dC(i,r){if(Lo)return i==="compositionend"||!tt&&jr(i,r)?(i=ol(),Fr=rl=Pi=null,Lo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Li&&r.locale!=="ko"?null:r.data;default:return null}}var fC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tg(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!fC[i.type]:r==="textarea"}function Eg(i,r,a,u){Fs?Di?Di.push(u):Di=[u]:Fs=u,r=Gc(r,"onChange"),0<r.length&&(a=new Vi("onChange","change",null,a,u),i.push({event:a,listeners:r}))}var cl=null,dl=null;function hC(i){iv(i,0)}function nc(i){var r=Rn(i);if(Lr(r))return i}function Sg(i,r){if(i==="change")return r}var Ag=!1;if(Hn){var If;if(Hn){var wf="oninput"in document;if(!wf){var bg=document.createElement("div");bg.setAttribute("oninput","return;"),wf=typeof bg.oninput=="function"}If=wf}else If=!1;Ag=If&&(!document.documentMode||9<document.documentMode)}function Cg(){cl&&(cl.detachEvent("onpropertychange",xg),dl=cl=null)}function xg(i){if(i.propertyName==="value"&&nc(dl)){var r=[];Eg(r,dl,i,Fn(i)),Hs(hC,r)}}function mC(i,r,a){i==="focusin"?(Cg(),cl=r,dl=a,cl.attachEvent("onpropertychange",xg)):i==="focusout"&&Cg()}function pC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return nc(dl)}function gC(i,r){if(i==="click")return nc(r)}function yC(i,r){if(i==="input"||i==="change")return nc(r)}function _C(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var Mn=typeof Object.is=="function"?Object.is:_C;function fl(i,r){if(Mn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var a=Object.keys(i),u=Object.keys(r);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var y=a[u];if(!St.call(r,y)||!Mn(i[y],r[y]))return!1}return!0}function Ig(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function wg(i,r){var a=Ig(i);i=0;for(var u;a;){if(a.nodeType===3){if(u=i+a.textContent.length,i<=r&&u>=r)return{node:a,offset:r-i};i=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ig(a)}}function Rg(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?Rg(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function Ng(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Mi(i.document);r instanceof i.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)i=r.contentWindow;else break;r=Mi(i.document)}return r}function Rf(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var vC=Hn&&"documentMode"in document&&11>=document.documentMode,Oo=null,Nf=null,hl=null,Mf=!1;function Mg(i,r,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Mf||Oo==null||Oo!==Mi(u)||(u=Oo,"selectionStart"in u&&Rf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),hl&&fl(hl,u)||(hl=u,u=Gc(Nf,"onSelect"),0<u.length&&(r=new Vi("onSelect","select",null,r,a),i.push({event:r,listeners:u}),r.target=Oo)))}function Yr(i,r){var a={};return a[i.toLowerCase()]=r.toLowerCase(),a["Webkit"+i]="webkit"+r,a["Moz"+i]="moz"+r,a}var qo={animationend:Yr("Animation","AnimationEnd"),animationiteration:Yr("Animation","AnimationIteration"),animationstart:Yr("Animation","AnimationStart"),transitionrun:Yr("Transition","TransitionRun"),transitionstart:Yr("Transition","TransitionStart"),transitioncancel:Yr("Transition","TransitionCancel"),transitionend:Yr("Transition","TransitionEnd")},Df={},Dg={};Hn&&(Dg=document.createElement("div").style,"AnimationEvent"in window||(delete qo.animationend.animation,delete qo.animationiteration.animation,delete qo.animationstart.animation),"TransitionEvent"in window||delete qo.transitionend.transition);function Jr(i){if(Df[i])return Df[i];if(!qo[i])return i;var r=qo[i],a;for(a in r)if(r.hasOwnProperty(a)&&a in Dg)return Df[i]=r[a];return i}var Pg=Jr("animationend"),Vg=Jr("animationiteration"),kg=Jr("animationstart"),TC=Jr("transitionrun"),EC=Jr("transitionstart"),SC=Jr("transitioncancel"),Ug=Jr("transitionend"),Lg=new Map,Pf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pf.push("scrollEnd");function ci(i,r){Lg.set(i,r),Ri(r,[i])}var ic=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Gn=[],Bo=0,Vf=0;function sc(){for(var i=Bo,r=Vf=Bo=0;r<i;){var a=Gn[r];Gn[r++]=null;var u=Gn[r];Gn[r++]=null;var y=Gn[r];Gn[r++]=null;var _=Gn[r];if(Gn[r++]=null,u!==null&&y!==null){var b=u.pending;b===null?y.next=y:(y.next=b.next,b.next=y),u.pending=y}_!==0&&Og(a,y,_)}}function rc(i,r,a,u){Gn[Bo++]=i,Gn[Bo++]=r,Gn[Bo++]=a,Gn[Bo++]=u,Vf|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function kf(i,r,a,u){return rc(i,r,a,u),oc(i)}function Kr(i,r){return rc(i,null,null,r),oc(i)}function Og(i,r,a){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a);for(var y=!1,_=i.return;_!==null;)_.childLanes|=a,u=_.alternate,u!==null&&(u.childLanes|=a),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(y=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,y&&r!==null&&(y=31-Rt(a),i=_.hiddenUpdates,u=i[y],u===null?i[y]=[r]:u.push(r),r.lane=a|536870912),_):null}function oc(i){if(50<kl)throw kl=0,Gh=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Fo={};function AC(i,r,a,u){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(i,r,a,u){return new AC(i,r,a,u)}function Uf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function es(i,r){var a=i.alternate;return a===null?(a=Dn(i.tag,r,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=r,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,r=i.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function qg(i,r){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,r=a.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function ac(i,r,a,u,y,_){var b=0;if(u=i,typeof i=="function")Uf(i)&&(b=1);else if(typeof i=="string")b=wx(i,a,me.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case R:return i=Dn(31,a,r,y),i.elementType=R,i.lanes=_,i;case q:return $r(a.children,y,_,r);case F:b=8,y|=24;break;case Z:return i=Dn(12,a,r,y|2),i.elementType=Z,i.lanes=_,i;case ae:return i=Dn(13,a,r,y),i.elementType=ae,i.lanes=_,i;case ce:return i=Dn(19,a,r,y),i.elementType=ce,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case $:b=10;break e;case te:b=9;break e;case z:b=11;break e;case M:b=14;break e;case N:b=16,u=null;break e}b=29,a=Error(s(130,i===null?"null":typeof i,"")),u=null}return r=Dn(b,a,r,y),r.elementType=i,r.type=u,r.lanes=_,r}function $r(i,r,a,u){return i=Dn(7,i,u,r),i.lanes=a,i}function Lf(i,r,a){return i=Dn(6,i,null,r),i.lanes=a,i}function Bg(i){var r=Dn(18,null,null,0);return r.stateNode=i,r}function Of(i,r,a){return r=Dn(4,i.children!==null?i.children:[],i.key,r),r.lanes=a,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var Fg=new WeakMap;function jn(i,r){if(typeof i=="object"&&i!==null){var a=Fg.get(i);return a!==void 0?a:(r={value:i,source:r,stack:Dr(r)},Fg.set(i,r),r)}return{value:i,source:r,stack:Dr(r)}}var Ho=[],zo=0,lc=null,ml=0,Yn=[],Jn=0,Ys=null,Oi=1,qi="";function ts(i,r){Ho[zo++]=ml,Ho[zo++]=lc,lc=i,ml=r}function Hg(i,r,a){Yn[Jn++]=Oi,Yn[Jn++]=qi,Yn[Jn++]=Ys,Ys=i;var u=Oi;i=qi;var y=32-Rt(u)-1;u&=~(1<<y),a+=1;var _=32-Rt(r)+y;if(30<_){var b=y-y%5;_=(u&(1<<b)-1).toString(32),u>>=b,y-=b,Oi=1<<32-Rt(r)+y|a<<y|u,qi=_+i}else Oi=1<<_|a<<y|u,qi=i}function qf(i){i.return!==null&&(ts(i,1),Hg(i,1,0))}function Bf(i){for(;i===lc;)lc=Ho[--zo],Ho[zo]=null,ml=Ho[--zo],Ho[zo]=null;for(;i===Ys;)Ys=Yn[--Jn],Yn[Jn]=null,qi=Yn[--Jn],Yn[Jn]=null,Oi=Yn[--Jn],Yn[Jn]=null}function zg(i,r){Yn[Jn++]=Oi,Yn[Jn++]=qi,Yn[Jn++]=Ys,Oi=r.id,qi=r.overflow,Ys=i}var sn=null,pt=null,Ke=!1,Js=null,Kn=!1,Ff=Error(s(519));function Ks(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw pl(jn(r,i)),Ff}function Gg(i){var r=i.stateNode,a=i.type,u=i.memoizedProps;switch(r[kt]=i,r[$t]=u,a){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(a=0;a<Ll.length;a++)Fe(Ll[a],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":Fe("invalid",r),Fu(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Fe("invalid",r);break;case"textarea":Fe("invalid",r),qs(r,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||u.suppressHydrationWarning===!0||av(r.textContent,a)?(u.popover!=null&&(Fe("beforetoggle",r),Fe("toggle",r)),u.onScroll!=null&&Fe("scroll",r),u.onScrollEnd!=null&&Fe("scrollend",r),u.onClick!=null&&(r.onclick=ri),r=!0):r=!1,r||Ks(i,!0)}function jg(i){for(sn=i.return;sn;)switch(sn.tag){case 5:case 31:case 13:Kn=!1;return;case 27:case 3:Kn=!0;return;default:sn=sn.return}}function Go(i){if(i!==sn)return!1;if(!Ke)return jg(i),Ke=!0,!1;var r=i.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||rm(i.type,i.memoizedProps)),a=!a),a&&pt&&Ks(i),jg(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));pt=gv(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));pt=gv(i)}else r===27?(r=pt,lr(i.type)?(i=cm,cm=null,pt=i):pt=r):pt=sn?Qn(i.stateNode.nextSibling):null;return!0}function Qr(){pt=sn=null,Ke=!1}function Hf(){var i=Js;return i!==null&&(bn===null?bn=i:bn.push.apply(bn,i),Js=null),i}function pl(i){Js===null?Js=[i]:Js.push(i)}var zf=O(null),Xr=null,ns=null;function $s(i,r,a){de(zf,r._currentValue),r._currentValue=a}function is(i){i._currentValue=zf.current,ne(zf)}function Gf(i,r,a){for(;i!==null;){var u=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),i===a)break;i=i.return}}function jf(i,r,a,u){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var _=y.dependencies;if(_!==null){var b=y.child;_=_.firstContext;e:for(;_!==null;){var I=_;_=y;for(var U=0;U<r.length;U++)if(I.context===r[U]){_.lanes|=a,I=_.alternate,I!==null&&(I.lanes|=a),Gf(_.return,a,i),u||(b=null);break e}_=I.next}}else if(y.tag===18){if(b=y.return,b===null)throw Error(s(341));b.lanes|=a,_=b.alternate,_!==null&&(_.lanes|=a),Gf(b,a,i),b=null}else b=y.child;if(b!==null)b.return=y;else for(b=y;b!==null;){if(b===i){b=null;break}if(y=b.sibling,y!==null){y.return=b.return,b=y;break}b=b.return}y=b}}function jo(i,r,a,u){i=null;for(var y=r,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var b=y.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var I=y.type;Mn(y.pendingProps.value,b.value)||(i!==null?i.push(I):i=[I])}}else if(y===He.current){if(b=y.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(Hl):i=[Hl])}y=y.return}i!==null&&jf(r,i,a,u),r.flags|=262144}function uc(i){for(i=i.firstContext;i!==null;){if(!Mn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Wr(i){Xr=i,ns=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function rn(i){return Yg(Xr,i)}function cc(i,r){return Xr===null&&Wr(i),Yg(i,r)}function Yg(i,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},ns===null){if(i===null)throw Error(s(308));ns=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else ns=ns.next=r;return a}var bC=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(a,u){i.push(u)}};this.abort=function(){r.aborted=!0,i.forEach(function(a){return a()})}},CC=n.unstable_scheduleCallback,xC=n.unstable_NormalPriority,Ot={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yf(){return{controller:new bC,data:new Map,refCount:0}}function gl(i){i.refCount--,i.refCount===0&&CC(xC,function(){i.controller.abort()})}var yl=null,Jf=0,Yo=0,Jo=null;function IC(i,r){if(yl===null){var a=yl=[];Jf=0,Yo=Qh(),Jo={status:"pending",value:void 0,then:function(u){a.push(u)}}}return Jf++,r.then(Jg,Jg),r}function Jg(){if(--Jf===0&&yl!==null){Jo!==null&&(Jo.status="fulfilled");var i=yl;yl=null,Yo=0,Jo=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function wC(i,r){var a=[],u={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return i.then(function(){u.status="fulfilled",u.value=r;for(var y=0;y<a.length;y++)(0,a[y])(r)},function(y){for(u.status="rejected",u.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),u}var Kg=W.S;W.S=function(i,r){M_=ht(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&IC(i,r),Kg!==null&&Kg(i,r)};var Zr=O(null);function Kf(){var i=Zr.current;return i!==null?i:ft.pooledCache}function dc(i,r){r===null?de(Zr,Zr.current):de(Zr,r.pool)}function $g(){var i=Kf();return i===null?null:{parent:Ot._currentValue,pool:i}}var Ko=Error(s(460)),$f=Error(s(474)),fc=Error(s(542)),hc={then:function(){}};function Qg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Xg(i,r,a){switch(a=i[a],a===void 0?i.push(r):a!==r&&(r.then(ri,ri),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Zg(i),i;default:if(typeof r.status=="string")r.then(ri,ri);else{if(i=ft,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(u){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=u}},function(u){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Zg(i),i}throw to=r,Ko}}function eo(i){try{var r=i._init;return r(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(to=a,Ko):a}}var to=null;function Wg(){if(to===null)throw Error(s(459));var i=to;return to=null,i}function Zg(i){if(i===Ko||i===fc)throw Error(s(483))}var $o=null,_l=0;function mc(i){var r=_l;return _l+=1,$o===null&&($o=[]),Xg($o,i,r)}function vl(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function pc(i,r){throw r.$$typeof===A?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function ey(i){function r(H,B){if(i){var j=H.deletions;j===null?(H.deletions=[B],H.flags|=16):j.push(B)}}function a(H,B){if(!i)return null;for(;B!==null;)r(H,B),B=B.sibling;return null}function u(H){for(var B=new Map;H!==null;)H.key!==null?B.set(H.key,H):B.set(H.index,H),H=H.sibling;return B}function y(H,B){return H=es(H,B),H.index=0,H.sibling=null,H}function _(H,B,j){return H.index=j,i?(j=H.alternate,j!==null?(j=j.index,j<B?(H.flags|=67108866,B):j):(H.flags|=67108866,B)):(H.flags|=1048576,B)}function b(H){return i&&H.alternate===null&&(H.flags|=67108866),H}function I(H,B,j,se){return B===null||B.tag!==6?(B=Lf(j,H.mode,se),B.return=H,B):(B=y(B,j),B.return=H,B)}function U(H,B,j,se){var Ce=j.type;return Ce===q?ee(H,B,j.props.children,se,j.key):B!==null&&(B.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===N&&eo(Ce)===B.type)?(B=y(B,j.props),vl(B,j),B.return=H,B):(B=ac(j.type,j.key,j.props,null,H.mode,se),vl(B,j),B.return=H,B)}function Y(H,B,j,se){return B===null||B.tag!==4||B.stateNode.containerInfo!==j.containerInfo||B.stateNode.implementation!==j.implementation?(B=Of(j,H.mode,se),B.return=H,B):(B=y(B,j.children||[]),B.return=H,B)}function ee(H,B,j,se,Ce){return B===null||B.tag!==7?(B=$r(j,H.mode,se,Ce),B.return=H,B):(B=y(B,j),B.return=H,B)}function re(H,B,j){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Lf(""+B,H.mode,j),B.return=H,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case x:return j=ac(B.type,B.key,B.props,null,H.mode,j),vl(j,B),j.return=H,j;case k:return B=Of(B,H.mode,j),B.return=H,B;case N:return B=eo(B),re(H,B,j)}if(it(B)||L(B))return B=$r(B,H.mode,j,null),B.return=H,B;if(typeof B.then=="function")return re(H,mc(B),j);if(B.$$typeof===$)return re(H,cc(H,B),j);pc(H,B)}return null}function J(H,B,j,se){var Ce=B!==null?B.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return Ce!==null?null:I(H,B,""+j,se);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case x:return j.key===Ce?U(H,B,j,se):null;case k:return j.key===Ce?Y(H,B,j,se):null;case N:return j=eo(j),J(H,B,j,se)}if(it(j)||L(j))return Ce!==null?null:ee(H,B,j,se,null);if(typeof j.then=="function")return J(H,B,mc(j),se);if(j.$$typeof===$)return J(H,B,cc(H,j),se);pc(H,j)}return null}function X(H,B,j,se,Ce){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return H=H.get(j)||null,I(B,H,""+se,Ce);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case x:return H=H.get(se.key===null?j:se.key)||null,U(B,H,se,Ce);case k:return H=H.get(se.key===null?j:se.key)||null,Y(B,H,se,Ce);case N:return se=eo(se),X(H,B,j,se,Ce)}if(it(se)||L(se))return H=H.get(j)||null,ee(B,H,se,Ce,null);if(typeof se.then=="function")return X(H,B,j,mc(se),Ce);if(se.$$typeof===$)return X(H,B,j,cc(B,se),Ce);pc(B,se)}return null}function _e(H,B,j,se){for(var Ce=null,Qe=null,Ae=B,Oe=B=0,Ge=null;Ae!==null&&Oe<j.length;Oe++){Ae.index>Oe?(Ge=Ae,Ae=null):Ge=Ae.sibling;var Xe=J(H,Ae,j[Oe],se);if(Xe===null){Ae===null&&(Ae=Ge);break}i&&Ae&&Xe.alternate===null&&r(H,Ae),B=_(Xe,B,Oe),Qe===null?Ce=Xe:Qe.sibling=Xe,Qe=Xe,Ae=Ge}if(Oe===j.length)return a(H,Ae),Ke&&ts(H,Oe),Ce;if(Ae===null){for(;Oe<j.length;Oe++)Ae=re(H,j[Oe],se),Ae!==null&&(B=_(Ae,B,Oe),Qe===null?Ce=Ae:Qe.sibling=Ae,Qe=Ae);return Ke&&ts(H,Oe),Ce}for(Ae=u(Ae);Oe<j.length;Oe++)Ge=X(Ae,H,Oe,j[Oe],se),Ge!==null&&(i&&Ge.alternate!==null&&Ae.delete(Ge.key===null?Oe:Ge.key),B=_(Ge,B,Oe),Qe===null?Ce=Ge:Qe.sibling=Ge,Qe=Ge);return i&&Ae.forEach(function(hr){return r(H,hr)}),Ke&&ts(H,Oe),Ce}function Ie(H,B,j,se){if(j==null)throw Error(s(151));for(var Ce=null,Qe=null,Ae=B,Oe=B=0,Ge=null,Xe=j.next();Ae!==null&&!Xe.done;Oe++,Xe=j.next()){Ae.index>Oe?(Ge=Ae,Ae=null):Ge=Ae.sibling;var hr=J(H,Ae,Xe.value,se);if(hr===null){Ae===null&&(Ae=Ge);break}i&&Ae&&hr.alternate===null&&r(H,Ae),B=_(hr,B,Oe),Qe===null?Ce=hr:Qe.sibling=hr,Qe=hr,Ae=Ge}if(Xe.done)return a(H,Ae),Ke&&ts(H,Oe),Ce;if(Ae===null){for(;!Xe.done;Oe++,Xe=j.next())Xe=re(H,Xe.value,se),Xe!==null&&(B=_(Xe,B,Oe),Qe===null?Ce=Xe:Qe.sibling=Xe,Qe=Xe);return Ke&&ts(H,Oe),Ce}for(Ae=u(Ae);!Xe.done;Oe++,Xe=j.next())Xe=X(Ae,H,Oe,Xe.value,se),Xe!==null&&(i&&Xe.alternate!==null&&Ae.delete(Xe.key===null?Oe:Xe.key),B=_(Xe,B,Oe),Qe===null?Ce=Xe:Qe.sibling=Xe,Qe=Xe);return i&&Ae.forEach(function(qx){return r(H,qx)}),Ke&&ts(H,Oe),Ce}function dt(H,B,j,se){if(typeof j=="object"&&j!==null&&j.type===q&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case x:e:{for(var Ce=j.key;B!==null;){if(B.key===Ce){if(Ce=j.type,Ce===q){if(B.tag===7){a(H,B.sibling),se=y(B,j.props.children),se.return=H,H=se;break e}}else if(B.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===N&&eo(Ce)===B.type){a(H,B.sibling),se=y(B,j.props),vl(se,j),se.return=H,H=se;break e}a(H,B);break}else r(H,B);B=B.sibling}j.type===q?(se=$r(j.props.children,H.mode,se,j.key),se.return=H,H=se):(se=ac(j.type,j.key,j.props,null,H.mode,se),vl(se,j),se.return=H,H=se)}return b(H);case k:e:{for(Ce=j.key;B!==null;){if(B.key===Ce)if(B.tag===4&&B.stateNode.containerInfo===j.containerInfo&&B.stateNode.implementation===j.implementation){a(H,B.sibling),se=y(B,j.children||[]),se.return=H,H=se;break e}else{a(H,B);break}else r(H,B);B=B.sibling}se=Of(j,H.mode,se),se.return=H,H=se}return b(H);case N:return j=eo(j),dt(H,B,j,se)}if(it(j))return _e(H,B,j,se);if(L(j)){if(Ce=L(j),typeof Ce!="function")throw Error(s(150));return j=Ce.call(j),Ie(H,B,j,se)}if(typeof j.then=="function")return dt(H,B,mc(j),se);if(j.$$typeof===$)return dt(H,B,cc(H,j),se);pc(H,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,B!==null&&B.tag===6?(a(H,B.sibling),se=y(B,j),se.return=H,H=se):(a(H,B),se=Lf(j,H.mode,se),se.return=H,H=se),b(H)):a(H,B)}return function(H,B,j,se){try{_l=0;var Ce=dt(H,B,j,se);return $o=null,Ce}catch(Ae){if(Ae===Ko||Ae===fc)throw Ae;var Qe=Dn(29,Ae,null,H.mode);return Qe.lanes=se,Qe.return=H,Qe}finally{}}}var no=ey(!0),ty=ey(!1),Qs=!1;function Qf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xf(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Xs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ws(i,r,a){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(nt&2)!==0){var y=u.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),u.pending=r,r=oc(i),Og(i,null,a),r}return rc(i,u,r,a),oc(i)}function Tl(i,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var u=r.lanes;u&=i.pendingLanes,a|=u,r.lanes=a,Ja(i,a)}}function Wf(i,r){var a=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var y=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?y=_=b:_=_.next=b,a=a.next}while(a!==null);_===null?y=_=r:_=_.next=r}else y=_=r;a={baseState:u.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:u.shared,callbacks:u.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=r:i.next=r,a.lastBaseUpdate=r}var Zf=!1;function El(){if(Zf){var i=Jo;if(i!==null)throw i}}function Sl(i,r,a,u){Zf=!1;var y=i.updateQueue;Qs=!1;var _=y.firstBaseUpdate,b=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var U=I,Y=U.next;U.next=null,b===null?_=Y:b.next=Y,b=U;var ee=i.alternate;ee!==null&&(ee=ee.updateQueue,I=ee.lastBaseUpdate,I!==b&&(I===null?ee.firstBaseUpdate=Y:I.next=Y,ee.lastBaseUpdate=U))}if(_!==null){var re=y.baseState;b=0,ee=Y=U=null,I=_;do{var J=I.lane&-536870913,X=J!==I.lane;if(X?(ze&J)===J:(u&J)===J){J!==0&&J===Yo&&(Zf=!0),ee!==null&&(ee=ee.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var _e=i,Ie=I;J=r;var dt=a;switch(Ie.tag){case 1:if(_e=Ie.payload,typeof _e=="function"){re=_e.call(dt,re,J);break e}re=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=Ie.payload,J=typeof _e=="function"?_e.call(dt,re,J):_e,J==null)break e;re=E({},re,J);break e;case 2:Qs=!0}}J=I.callback,J!==null&&(i.flags|=64,X&&(i.flags|=8192),X=y.callbacks,X===null?y.callbacks=[J]:X.push(J))}else X={lane:J,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ee===null?(Y=ee=X,U=re):ee=ee.next=X,b|=J;if(I=I.next,I===null){if(I=y.shared.pending,I===null)break;X=I,I=X.next,X.next=null,y.lastBaseUpdate=X,y.shared.pending=null}}while(!0);ee===null&&(U=re),y.baseState=U,y.firstBaseUpdate=Y,y.lastBaseUpdate=ee,_===null&&(y.shared.lanes=0),ir|=b,i.lanes=b,i.memoizedState=re}}function ny(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function iy(i,r){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)ny(a[i],r)}var Qo=O(null),gc=O(0);function sy(i,r){i=fs,de(gc,i),de(Qo,r),fs=i|r.baseLanes}function eh(){de(gc,fs),de(Qo,Qo.current)}function th(){fs=gc.current,ne(Qo),ne(gc)}var Pn=O(null),$n=null;function Zs(i){var r=i.alternate;de(Mt,Mt.current&1),de(Pn,i),$n===null&&(r===null||Qo.current!==null||r.memoizedState!==null)&&($n=i)}function nh(i){de(Mt,Mt.current),de(Pn,i),$n===null&&($n=i)}function ry(i){i.tag===22?(de(Mt,Mt.current),de(Pn,i),$n===null&&($n=i)):er()}function er(){de(Mt,Mt.current),de(Pn,Pn.current)}function Vn(i){ne(Pn),$n===i&&($n=null),ne(Mt)}var Mt=O(0);function yc(i){for(var r=i;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||lm(a)||um(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ss=0,Le=null,ut=null,qt=null,_c=!1,Xo=!1,io=!1,vc=0,Al=0,Wo=null,RC=0;function At(){throw Error(s(321))}function ih(i,r){if(r===null)return!1;for(var a=0;a<r.length&&a<i.length;a++)if(!Mn(i[a],r[a]))return!1;return!0}function sh(i,r,a,u,y,_){return ss=_,Le=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,W.H=i===null||i.memoizedState===null?Hy:vh,io=!1,_=a(u,y),io=!1,Xo&&(_=ay(r,a,u,y)),oy(i),_}function oy(i){W.H=xl;var r=ut!==null&&ut.next!==null;if(ss=0,qt=ut=Le=null,_c=!1,Al=0,Wo=null,r)throw Error(s(300));i===null||Bt||(i=i.dependencies,i!==null&&uc(i)&&(Bt=!0))}function ay(i,r,a,u){Le=i;var y=0;do{if(Xo&&(Wo=null),Al=0,Xo=!1,25<=y)throw Error(s(301));if(y+=1,qt=ut=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}W.H=zy,_=r(a,u)}while(Xo);return _}function NC(){var i=W.H,r=i.useState()[0];return r=typeof r.then=="function"?bl(r):r,i=i.useState()[0],(ut!==null?ut.memoizedState:null)!==i&&(Le.flags|=1024),r}function rh(){var i=vc!==0;return vc=0,i}function oh(i,r,a){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~a}function ah(i){if(_c){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}_c=!1}ss=0,qt=ut=Le=null,Xo=!1,Al=vc=0,Wo=null}function gn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?Le.memoizedState=qt=i:qt=qt.next=i,qt}function Dt(){if(ut===null){var i=Le.alternate;i=i!==null?i.memoizedState:null}else i=ut.next;var r=qt===null?Le.memoizedState:qt.next;if(r!==null)qt=r,ut=i;else{if(i===null)throw Le.alternate===null?Error(s(467)):Error(s(310));ut=i,i={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},qt===null?Le.memoizedState=qt=i:qt=qt.next=i}return qt}function Tc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bl(i){var r=Al;return Al+=1,Wo===null&&(Wo=[]),i=Xg(Wo,i,r),r=Le,(qt===null?r.memoizedState:qt.next)===null&&(r=r.alternate,W.H=r===null||r.memoizedState===null?Hy:vh),i}function Ec(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return bl(i);if(i.$$typeof===$)return rn(i)}throw Error(s(438,String(i)))}function lh(i){var r=null,a=Le.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var u=Le.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Tc(),Le.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(i),u=0;u<i;u++)a[u]=D;return r.index++,a}function rs(i,r){return typeof r=="function"?r(i):r}function Sc(i){var r=Dt();return uh(r,ut,i)}function uh(i,r,a){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var y=i.baseQueue,_=u.pending;if(_!==null){if(y!==null){var b=y.next;y.next=_.next,_.next=b}r.baseQueue=y=_,u.pending=null}if(_=i.baseState,y===null)i.memoizedState=_;else{r=y.next;var I=b=null,U=null,Y=r,ee=!1;do{var re=Y.lane&-536870913;if(re!==Y.lane?(ze&re)===re:(ss&re)===re){var J=Y.revertLane;if(J===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),re===Yo&&(ee=!0);else if((ss&J)===J){Y=Y.next,J===Yo&&(ee=!0);continue}else re={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},U===null?(I=U=re,b=_):U=U.next=re,Le.lanes|=J,ir|=J;re=Y.action,io&&a(_,re),_=Y.hasEagerState?Y.eagerState:a(_,re)}else J={lane:re,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},U===null?(I=U=J,b=_):U=U.next=J,Le.lanes|=re,ir|=re;Y=Y.next}while(Y!==null&&Y!==r);if(U===null?b=_:U.next=I,!Mn(_,i.memoizedState)&&(Bt=!0,ee&&(a=Jo,a!==null)))throw a;i.memoizedState=_,i.baseState=b,i.baseQueue=U,u.lastRenderedState=_}return y===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function ch(i){var r=Dt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var u=a.dispatch,y=a.pending,_=r.memoizedState;if(y!==null){a.pending=null;var b=y=y.next;do _=i(_,b.action),b=b.next;while(b!==y);Mn(_,r.memoizedState)||(Bt=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),a.lastRenderedState=_}return[_,u]}function ly(i,r,a){var u=Le,y=Dt(),_=Ke;if(_){if(a===void 0)throw Error(s(407));a=a()}else a=r();var b=!Mn((ut||y).memoizedState,a);if(b&&(y.memoizedState=a,Bt=!0),y=y.queue,hh(dy.bind(null,u,y,i),[i]),y.getSnapshot!==r||b||qt!==null&&qt.memoizedState.tag&1){if(u.flags|=2048,Zo(9,{destroy:void 0},cy.bind(null,u,y,a,r),null),ft===null)throw Error(s(349));_||(ss&127)!==0||uy(u,r,a)}return a}function uy(i,r,a){i.flags|=16384,i={getSnapshot:r,value:a},r=Le.updateQueue,r===null?(r=Tc(),Le.updateQueue=r,r.stores=[i]):(a=r.stores,a===null?r.stores=[i]:a.push(i))}function cy(i,r,a,u){r.value=a,r.getSnapshot=u,fy(r)&&hy(i)}function dy(i,r,a){return a(function(){fy(r)&&hy(i)})}function fy(i){var r=i.getSnapshot;i=i.value;try{var a=r();return!Mn(i,a)}catch{return!0}}function hy(i){var r=Kr(i,2);r!==null&&Cn(r,i,2)}function dh(i){var r=gn();if(typeof i=="function"){var a=i;if(i=a(),io){qn(!0);try{a()}finally{qn(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:i},r}function my(i,r,a,u){return i.baseState=a,uh(i,ut,typeof u=="function"?u:rs)}function MC(i,r,a,u,y){if(Cc(i))throw Error(s(485));if(i=r.action,i!==null){var _={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){_.listeners.push(b)}};W.T!==null?a(!0):_.isTransition=!1,u(_),a=r.pending,a===null?(_.next=r.pending=_,py(r,_)):(_.next=a.next,r.pending=a.next=_)}}function py(i,r){var a=r.action,u=r.payload,y=i.state;if(r.isTransition){var _=W.T,b={};W.T=b;try{var I=a(y,u),U=W.S;U!==null&&U(b,I),gy(i,r,I)}catch(Y){fh(i,r,Y)}finally{_!==null&&b.types!==null&&(_.types=b.types),W.T=_}}else try{_=a(y,u),gy(i,r,_)}catch(Y){fh(i,r,Y)}}function gy(i,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){yy(i,r,u)},function(u){return fh(i,r,u)}):yy(i,r,a)}function yy(i,r,a){r.status="fulfilled",r.value=a,_y(r),i.state=a,r=i.pending,r!==null&&(a=r.next,a===r?i.pending=null:(a=a.next,r.next=a,py(i,a)))}function fh(i,r,a){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=a,_y(r),r=r.next;while(r!==u)}i.action=null}function _y(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function vy(i,r){return r}function Ty(i,r){if(Ke){var a=ft.formState;if(a!==null){e:{var u=Le;if(Ke){if(pt){t:{for(var y=pt,_=Kn;y.nodeType!==8;){if(!_){y=null;break t}if(y=Qn(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){pt=Qn(y.nextSibling),u=y.data==="F!";break e}}Ks(u)}u=!1}u&&(r=a[0])}}return a=gn(),a.memoizedState=a.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vy,lastRenderedState:r},a.queue=u,a=qy.bind(null,Le,u),u.dispatch=a,u=dh(!1),_=_h.bind(null,Le,!1,u.queue),u=gn(),y={state:r,dispatch:null,action:i,pending:null},u.queue=y,a=MC.bind(null,Le,y,_,a),y.dispatch=a,u.memoizedState=i,[r,a,!1]}function Ey(i){var r=Dt();return Sy(r,ut,i)}function Sy(i,r,a){if(r=uh(i,r,vy)[0],i=Sc(rs)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=bl(r)}catch(b){throw b===Ko?fc:b}else u=r;r=Dt();var y=r.queue,_=y.dispatch;return a!==r.memoizedState&&(Le.flags|=2048,Zo(9,{destroy:void 0},DC.bind(null,y,a),null)),[u,_,i]}function DC(i,r){i.action=r}function Ay(i){var r=Dt(),a=ut;if(a!==null)return Sy(r,a,i);Dt(),r=r.memoizedState,a=Dt();var u=a.queue.dispatch;return a.memoizedState=i,[r,u,!1]}function Zo(i,r,a,u){return i={tag:i,create:a,deps:u,inst:r,next:null},r=Le.updateQueue,r===null&&(r=Tc(),Le.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=i.next=i:(u=a.next,a.next=i,i.next=u,r.lastEffect=i),i}function by(){return Dt().memoizedState}function Ac(i,r,a,u){var y=gn();Le.flags|=i,y.memoizedState=Zo(1|r,{destroy:void 0},a,u===void 0?null:u)}function bc(i,r,a,u){var y=Dt();u=u===void 0?null:u;var _=y.memoizedState.inst;ut!==null&&u!==null&&ih(u,ut.memoizedState.deps)?y.memoizedState=Zo(r,_,a,u):(Le.flags|=i,y.memoizedState=Zo(1|r,_,a,u))}function Cy(i,r){Ac(8390656,8,i,r)}function hh(i,r){bc(2048,8,i,r)}function PC(i){Le.flags|=4;var r=Le.updateQueue;if(r===null)r=Tc(),Le.updateQueue=r,r.events=[i];else{var a=r.events;a===null?r.events=[i]:a.push(i)}}function xy(i){var r=Dt().memoizedState;return PC({ref:r,nextImpl:i}),function(){if((nt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function Iy(i,r){return bc(4,2,i,r)}function wy(i,r){return bc(4,4,i,r)}function Ry(i,r){if(typeof r=="function"){i=i();var a=r(i);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function Ny(i,r,a){a=a!=null?a.concat([i]):null,bc(4,4,Ry.bind(null,r,i),a)}function mh(){}function My(i,r){var a=Dt();r=r===void 0?null:r;var u=a.memoizedState;return r!==null&&ih(r,u[1])?u[0]:(a.memoizedState=[i,r],i)}function Dy(i,r){var a=Dt();r=r===void 0?null:r;var u=a.memoizedState;if(r!==null&&ih(r,u[1]))return u[0];if(u=i(),io){qn(!0);try{i()}finally{qn(!1)}}return a.memoizedState=[u,r],u}function ph(i,r,a){return a===void 0||(ss&1073741824)!==0&&(ze&261930)===0?i.memoizedState=r:(i.memoizedState=a,i=P_(),Le.lanes|=i,ir|=i,a)}function Py(i,r,a,u){return Mn(a,r)?a:Qo.current!==null?(i=ph(i,a,u),Mn(i,r)||(Bt=!0),i):(ss&42)===0||(ss&1073741824)!==0&&(ze&261930)===0?(Bt=!0,i.memoizedState=a):(i=P_(),Le.lanes|=i,ir|=i,r)}function Vy(i,r,a,u,y){var _=K.p;K.p=_!==0&&8>_?_:8;var b=W.T,I={};W.T=I,_h(i,!1,r,a);try{var U=y(),Y=W.S;if(Y!==null&&Y(I,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ee=wC(U,u);Cl(i,r,ee,Ln(i))}else Cl(i,r,u,Ln(i))}catch(re){Cl(i,r,{then:function(){},status:"rejected",reason:re},Ln())}finally{K.p=_,b!==null&&I.types!==null&&(b.types=I.types),W.T=b}}function VC(){}function gh(i,r,a,u){if(i.tag!==5)throw Error(s(476));var y=ky(i).queue;Vy(i,y,r,ue,a===null?VC:function(){return Uy(i),a(u)})}function ky(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:ue},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:a},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function Uy(i){var r=ky(i);r.next===null&&(r=i.alternate.memoizedState),Cl(i,r.next.queue,{},Ln())}function yh(){return rn(Hl)}function Ly(){return Dt().memoizedState}function Oy(){return Dt().memoizedState}function kC(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var a=Ln();i=Xs(a);var u=Ws(r,i,a);u!==null&&(Cn(u,r,a),Tl(u,r,a)),r={cache:Yf()},i.payload=r;return}r=r.return}}function UC(i,r,a){var u=Ln();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Cc(i)?By(r,a):(a=kf(i,r,a,u),a!==null&&(Cn(a,i,u),Fy(a,r,u)))}function qy(i,r,a){var u=Ln();Cl(i,r,a,u)}function Cl(i,r,a,u){var y={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Cc(i))By(r,y);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var b=r.lastRenderedState,I=_(b,a);if(y.hasEagerState=!0,y.eagerState=I,Mn(I,b))return rc(i,r,y,0),ft===null&&sc(),!1}catch{}finally{}if(a=kf(i,r,y,u),a!==null)return Cn(a,i,u),Fy(a,r,u),!0}return!1}function _h(i,r,a,u){if(u={lane:2,revertLane:Qh(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Cc(i)){if(r)throw Error(s(479))}else r=kf(i,a,u,2),r!==null&&Cn(r,i,2)}function Cc(i){var r=i.alternate;return i===Le||r!==null&&r===Le}function By(i,r){Xo=_c=!0;var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}function Fy(i,r,a){if((a&4194048)!==0){var u=r.lanes;u&=i.pendingLanes,a|=u,r.lanes=a,Ja(i,a)}}var xl={readContext:rn,use:Ec,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useLayoutEffect:At,useInsertionEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useSyncExternalStore:At,useId:At,useHostTransitionStatus:At,useFormState:At,useActionState:At,useOptimistic:At,useMemoCache:At,useCacheRefresh:At};xl.useEffectEvent=At;var Hy={readContext:rn,use:Ec,useCallback:function(i,r){return gn().memoizedState=[i,r===void 0?null:r],i},useContext:rn,useEffect:Cy,useImperativeHandle:function(i,r,a){a=a!=null?a.concat([i]):null,Ac(4194308,4,Ry.bind(null,r,i),a)},useLayoutEffect:function(i,r){return Ac(4194308,4,i,r)},useInsertionEffect:function(i,r){Ac(4,2,i,r)},useMemo:function(i,r){var a=gn();r=r===void 0?null:r;var u=i();if(io){qn(!0);try{i()}finally{qn(!1)}}return a.memoizedState=[u,r],u},useReducer:function(i,r,a){var u=gn();if(a!==void 0){var y=a(r);if(io){qn(!0);try{a(r)}finally{qn(!1)}}}else y=r;return u.memoizedState=u.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},u.queue=i,i=i.dispatch=UC.bind(null,Le,i),[u.memoizedState,i]},useRef:function(i){var r=gn();return i={current:i},r.memoizedState=i},useState:function(i){i=dh(i);var r=i.queue,a=qy.bind(null,Le,r);return r.dispatch=a,[i.memoizedState,a]},useDebugValue:mh,useDeferredValue:function(i,r){var a=gn();return ph(a,i,r)},useTransition:function(){var i=dh(!1);return i=Vy.bind(null,Le,i.queue,!0,!1),gn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,a){var u=Le,y=gn();if(Ke){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),ft===null)throw Error(s(349));(ze&127)!==0||uy(u,r,a)}y.memoizedState=a;var _={value:a,getSnapshot:r};return y.queue=_,Cy(dy.bind(null,u,_,i),[i]),u.flags|=2048,Zo(9,{destroy:void 0},cy.bind(null,u,_,a,r),null),a},useId:function(){var i=gn(),r=ft.identifierPrefix;if(Ke){var a=qi,u=Oi;a=(u&~(1<<32-Rt(u)-1)).toString(32)+a,r="_"+r+"R_"+a,a=vc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=RC++,r="_"+r+"r_"+a.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:yh,useFormState:Ty,useActionState:Ty,useOptimistic:function(i){var r=gn();r.memoizedState=r.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=_h.bind(null,Le,!0,a),a.dispatch=r,[i,r]},useMemoCache:lh,useCacheRefresh:function(){return gn().memoizedState=kC.bind(null,Le)},useEffectEvent:function(i){var r=gn(),a={impl:i};return r.memoizedState=a,function(){if((nt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},vh={readContext:rn,use:Ec,useCallback:My,useContext:rn,useEffect:hh,useImperativeHandle:Ny,useInsertionEffect:Iy,useLayoutEffect:wy,useMemo:Dy,useReducer:Sc,useRef:by,useState:function(){return Sc(rs)},useDebugValue:mh,useDeferredValue:function(i,r){var a=Dt();return Py(a,ut.memoizedState,i,r)},useTransition:function(){var i=Sc(rs)[0],r=Dt().memoizedState;return[typeof i=="boolean"?i:bl(i),r]},useSyncExternalStore:ly,useId:Ly,useHostTransitionStatus:yh,useFormState:Ey,useActionState:Ey,useOptimistic:function(i,r){var a=Dt();return my(a,ut,i,r)},useMemoCache:lh,useCacheRefresh:Oy};vh.useEffectEvent=xy;var zy={readContext:rn,use:Ec,useCallback:My,useContext:rn,useEffect:hh,useImperativeHandle:Ny,useInsertionEffect:Iy,useLayoutEffect:wy,useMemo:Dy,useReducer:ch,useRef:by,useState:function(){return ch(rs)},useDebugValue:mh,useDeferredValue:function(i,r){var a=Dt();return ut===null?ph(a,i,r):Py(a,ut.memoizedState,i,r)},useTransition:function(){var i=ch(rs)[0],r=Dt().memoizedState;return[typeof i=="boolean"?i:bl(i),r]},useSyncExternalStore:ly,useId:Ly,useHostTransitionStatus:yh,useFormState:Ay,useActionState:Ay,useOptimistic:function(i,r){var a=Dt();return ut!==null?my(a,ut,i,r):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:lh,useCacheRefresh:Oy};zy.useEffectEvent=xy;function Th(i,r,a,u){r=i.memoizedState,a=a(u,r),a=a==null?r:E({},r,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var Eh={enqueueSetState:function(i,r,a){i=i._reactInternals;var u=Ln(),y=Xs(u);y.payload=r,a!=null&&(y.callback=a),r=Ws(i,y,u),r!==null&&(Cn(r,i,u),Tl(r,i,u))},enqueueReplaceState:function(i,r,a){i=i._reactInternals;var u=Ln(),y=Xs(u);y.tag=1,y.payload=r,a!=null&&(y.callback=a),r=Ws(i,y,u),r!==null&&(Cn(r,i,u),Tl(r,i,u))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var a=Ln(),u=Xs(a);u.tag=2,r!=null&&(u.callback=r),r=Ws(i,u,a),r!==null&&(Cn(r,i,a),Tl(r,i,a))}};function Gy(i,r,a,u,y,_,b){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,_,b):r.prototype&&r.prototype.isPureReactComponent?!fl(a,u)||!fl(y,_):!0}function jy(i,r,a,u){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,u),r.state!==i&&Eh.enqueueReplaceState(r,r.state,null)}function so(i,r){var a=r;if("ref"in r){a={};for(var u in r)u!=="ref"&&(a[u]=r[u])}if(i=i.defaultProps){a===r&&(a=E({},a));for(var y in i)a[y]===void 0&&(a[y]=i[y])}return a}function Yy(i){ic(i)}function Jy(i){console.error(i)}function Ky(i){ic(i)}function xc(i,r){try{var a=i.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function $y(i,r,a){try{var u=i.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Sh(i,r,a){return a=Xs(a),a.tag=3,a.payload={element:null},a.callback=function(){xc(i,r)},a}function Qy(i){return i=Xs(i),i.tag=3,i}function Xy(i,r,a,u){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var _=u.value;i.payload=function(){return y(_)},i.callback=function(){$y(r,a,u)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(i.callback=function(){$y(r,a,u),typeof y!="function"&&(sr===null?sr=new Set([this]):sr.add(this));var I=u.stack;this.componentDidCatch(u.value,{componentStack:I!==null?I:""})})}function LC(i,r,a,u,y){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=a.alternate,r!==null&&jo(r,a,y,!0),a=Pn.current,a!==null){switch(a.tag){case 31:case 13:return $n===null?Oc():a.alternate===null&&bt===0&&(bt=3),a.flags&=-257,a.flags|=65536,a.lanes=y,u===hc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([u]):r.add(u),Jh(i,u,y)),!1;case 22:return a.flags|=65536,u===hc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([u]):a.add(u)),Jh(i,u,y)),!1}throw Error(s(435,a.tag))}return Jh(i,u,y),Oc(),!1}if(Ke)return r=Pn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,u!==Ff&&(i=Error(s(422),{cause:u}),pl(jn(i,a)))):(u!==Ff&&(r=Error(s(423),{cause:u}),pl(jn(r,a))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,u=jn(u,a),y=Sh(i.stateNode,u,y),Wf(i,y),bt!==4&&(bt=2)),!1;var _=Error(s(520),{cause:u});if(_=jn(_,a),Vl===null?Vl=[_]:Vl.push(_),bt!==4&&(bt=2),r===null)return!0;u=jn(u,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,i=y&-y,a.lanes|=i,i=Sh(a.stateNode,u,i),Wf(a,i),!1;case 1:if(r=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(sr===null||!sr.has(_))))return a.flags|=65536,y&=-y,a.lanes|=y,y=Qy(y),Xy(y,i,a,u),Wf(a,y),!1}a=a.return}while(a!==null);return!1}var Ah=Error(s(461)),Bt=!1;function on(i,r,a,u){r.child=i===null?ty(r,null,a,u):no(r,i.child,a,u)}function Wy(i,r,a,u,y){a=a.render;var _=r.ref;if("ref"in u){var b={};for(var I in u)I!=="ref"&&(b[I]=u[I])}else b=u;return Wr(r),u=sh(i,r,a,b,_,y),I=rh(),i!==null&&!Bt?(oh(i,r,y),os(i,r,y)):(Ke&&I&&qf(r),r.flags|=1,on(i,r,u,y),r.child)}function Zy(i,r,a,u,y){if(i===null){var _=a.type;return typeof _=="function"&&!Uf(_)&&_.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=_,e_(i,r,_,u,y)):(i=ac(a.type,null,u,r,r.mode,y),i.ref=r.ref,i.return=r,r.child=i)}if(_=i.child,!Mh(i,y)){var b=_.memoizedProps;if(a=a.compare,a=a!==null?a:fl,a(b,u)&&i.ref===r.ref)return os(i,r,y)}return r.flags|=1,i=es(_,u),i.ref=r.ref,i.return=r,r.child=i}function e_(i,r,a,u,y){if(i!==null){var _=i.memoizedProps;if(fl(_,u)&&i.ref===r.ref)if(Bt=!1,r.pendingProps=u=_,Mh(i,y))(i.flags&131072)!==0&&(Bt=!0);else return r.lanes=i.lanes,os(i,r,y)}return bh(i,r,a,u,y)}function t_(i,r,a,u){var y=u.children,_=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|a:a,i!==null){for(u=r.child=i.child,y=0;u!==null;)y=y|u.lanes|u.childLanes,u=u.sibling;u=y&~_}else u=0,r.child=null;return n_(i,r,_,a,u)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&dc(r,_!==null?_.cachePool:null),_!==null?sy(r,_):eh(),ry(r);else return u=r.lanes=536870912,n_(i,r,_!==null?_.baseLanes|a:a,a,u)}else _!==null?(dc(r,_.cachePool),sy(r,_),er(),r.memoizedState=null):(i!==null&&dc(r,null),eh(),er());return on(i,r,y,a),r.child}function Il(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function n_(i,r,a,u,y){var _=Kf();return _=_===null?null:{parent:Ot._currentValue,pool:_},r.memoizedState={baseLanes:a,cachePool:_},i!==null&&dc(r,null),eh(),ry(r),i!==null&&jo(i,r,u,!0),r.childLanes=y,null}function Ic(i,r){return r=Rc({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function i_(i,r,a){return no(r,i.child,null,a),i=Ic(r,r.pendingProps),i.flags|=2,Vn(r),r.memoizedState=null,i}function OC(i,r,a){var u=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(Ke){if(u.mode==="hidden")return i=Ic(r,u),r.lanes=536870912,Il(null,i);if(nh(r),(i=pt)?(i=pv(i,Kn),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ys!==null?{id:Oi,overflow:qi}:null,retryLane:536870912,hydrationErrors:null},a=Bg(i),a.return=r,r.child=a,sn=r,pt=null)):i=null,i===null)throw Ks(r);return r.lanes=536870912,null}return Ic(r,u)}var _=i.memoizedState;if(_!==null){var b=_.dehydrated;if(nh(r),y)if(r.flags&256)r.flags&=-257,r=i_(i,r,a);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(Bt||jo(i,r,a,!1),y=(a&i.childLanes)!==0,Bt||y){if(u=ft,u!==null&&(b=Ka(u,a),b!==0&&b!==_.retryLane))throw _.retryLane=b,Kr(i,b),Cn(u,i,b),Ah;Oc(),r=i_(i,r,a)}else i=_.treeContext,pt=Qn(b.nextSibling),sn=r,Ke=!0,Js=null,Kn=!1,i!==null&&zg(r,i),r=Ic(r,u),r.flags|=4096;return r}return i=es(i.child,{mode:u.mode,children:u.children}),i.ref=r.ref,r.child=i,i.return=r,i}function wc(i,r){var a=r.ref;if(a===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(r.flags|=4194816)}}function bh(i,r,a,u,y){return Wr(r),a=sh(i,r,a,u,void 0,y),u=rh(),i!==null&&!Bt?(oh(i,r,y),os(i,r,y)):(Ke&&u&&qf(r),r.flags|=1,on(i,r,a,y),r.child)}function s_(i,r,a,u,y,_){return Wr(r),r.updateQueue=null,a=ay(r,u,a,y),oy(i),u=rh(),i!==null&&!Bt?(oh(i,r,_),os(i,r,_)):(Ke&&u&&qf(r),r.flags|=1,on(i,r,a,_),r.child)}function r_(i,r,a,u,y){if(Wr(r),r.stateNode===null){var _=Fo,b=a.contextType;typeof b=="object"&&b!==null&&(_=rn(b)),_=new a(u,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Eh,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=u,_.state=r.memoizedState,_.refs={},Qf(r),b=a.contextType,_.context=typeof b=="object"&&b!==null?rn(b):Fo,_.state=r.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(Th(r,a,b,u),_.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(b=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),b!==_.state&&Eh.enqueueReplaceState(_,_.state,null),Sl(r,u,_,y),El(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(i===null){_=r.stateNode;var I=r.memoizedProps,U=so(a,I);_.props=U;var Y=_.context,ee=a.contextType;b=Fo,typeof ee=="object"&&ee!==null&&(b=rn(ee));var re=a.getDerivedStateFromProps;ee=typeof re=="function"||typeof _.getSnapshotBeforeUpdate=="function",I=r.pendingProps!==I,ee||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(I||Y!==b)&&jy(r,_,u,b),Qs=!1;var J=r.memoizedState;_.state=J,Sl(r,u,_,y),El(),Y=r.memoizedState,I||J!==Y||Qs?(typeof re=="function"&&(Th(r,a,re,u),Y=r.memoizedState),(U=Qs||Gy(r,a,U,u,J,Y,b))?(ee||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=Y),_.props=u,_.state=Y,_.context=b,u=U):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{_=r.stateNode,Xf(i,r),b=r.memoizedProps,ee=so(a,b),_.props=ee,re=r.pendingProps,J=_.context,Y=a.contextType,U=Fo,typeof Y=="object"&&Y!==null&&(U=rn(Y)),I=a.getDerivedStateFromProps,(Y=typeof I=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(b!==re||J!==U)&&jy(r,_,u,U),Qs=!1,J=r.memoizedState,_.state=J,Sl(r,u,_,y),El();var X=r.memoizedState;b!==re||J!==X||Qs||i!==null&&i.dependencies!==null&&uc(i.dependencies)?(typeof I=="function"&&(Th(r,a,I,u),X=r.memoizedState),(ee=Qs||Gy(r,a,ee,u,J,X,U)||i!==null&&i.dependencies!==null&&uc(i.dependencies))?(Y||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,X,U),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,X,U)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||b===i.memoizedProps&&J===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&J===i.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=X),_.props=u,_.state=X,_.context=U,u=ee):(typeof _.componentDidUpdate!="function"||b===i.memoizedProps&&J===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&J===i.memoizedState||(r.flags|=1024),u=!1)}return _=u,wc(i,r),u=(r.flags&128)!==0,_||u?(_=r.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,i!==null&&u?(r.child=no(r,i.child,null,y),r.child=no(r,null,a,y)):on(i,r,a,y),r.memoizedState=_.state,i=r.child):i=os(i,r,y),i}function o_(i,r,a,u){return Qr(),r.flags|=256,on(i,r,a,u),r.child}var Ch={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xh(i){return{baseLanes:i,cachePool:$g()}}function Ih(i,r,a){return i=i!==null?i.childLanes&~a:0,r&&(i|=Un),i}function a_(i,r,a){var u=r.pendingProps,y=!1,_=(r.flags&128)!==0,b;if((b=_)||(b=i!==null&&i.memoizedState===null?!1:(Mt.current&2)!==0),b&&(y=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,i===null){if(Ke){if(y?Zs(r):er(),(i=pt)?(i=pv(i,Kn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ys!==null?{id:Oi,overflow:qi}:null,retryLane:536870912,hydrationErrors:null},a=Bg(i),a.return=r,r.child=a,sn=r,pt=null)):i=null,i===null)throw Ks(r);return um(i)?r.lanes=32:r.lanes=536870912,null}var I=u.children;return u=u.fallback,y?(er(),y=r.mode,I=Rc({mode:"hidden",children:I},y),u=$r(u,y,a,null),I.return=r,u.return=r,I.sibling=u,r.child=I,u=r.child,u.memoizedState=xh(a),u.childLanes=Ih(i,b,a),r.memoizedState=Ch,Il(null,u)):(Zs(r),wh(r,I))}var U=i.memoizedState;if(U!==null&&(I=U.dehydrated,I!==null)){if(_)r.flags&256?(Zs(r),r.flags&=-257,r=Rh(i,r,a)):r.memoizedState!==null?(er(),r.child=i.child,r.flags|=128,r=null):(er(),I=u.fallback,y=r.mode,u=Rc({mode:"visible",children:u.children},y),I=$r(I,y,a,null),I.flags|=2,u.return=r,I.return=r,u.sibling=I,r.child=u,no(r,i.child,null,a),u=r.child,u.memoizedState=xh(a),u.childLanes=Ih(i,b,a),r.memoizedState=Ch,r=Il(null,u));else if(Zs(r),um(I)){if(b=I.nextSibling&&I.nextSibling.dataset,b)var Y=b.dgst;b=Y,u=Error(s(419)),u.stack="",u.digest=b,pl({value:u,source:null,stack:null}),r=Rh(i,r,a)}else if(Bt||jo(i,r,a,!1),b=(a&i.childLanes)!==0,Bt||b){if(b=ft,b!==null&&(u=Ka(b,a),u!==0&&u!==U.retryLane))throw U.retryLane=u,Kr(i,u),Cn(b,i,u),Ah;lm(I)||Oc(),r=Rh(i,r,a)}else lm(I)?(r.flags|=192,r.child=i.child,r=null):(i=U.treeContext,pt=Qn(I.nextSibling),sn=r,Ke=!0,Js=null,Kn=!1,i!==null&&zg(r,i),r=wh(r,u.children),r.flags|=4096);return r}return y?(er(),I=u.fallback,y=r.mode,U=i.child,Y=U.sibling,u=es(U,{mode:"hidden",children:u.children}),u.subtreeFlags=U.subtreeFlags&65011712,Y!==null?I=es(Y,I):(I=$r(I,y,a,null),I.flags|=2),I.return=r,u.return=r,u.sibling=I,r.child=u,Il(null,u),u=r.child,I=i.child.memoizedState,I===null?I=xh(a):(y=I.cachePool,y!==null?(U=Ot._currentValue,y=y.parent!==U?{parent:U,pool:U}:y):y=$g(),I={baseLanes:I.baseLanes|a,cachePool:y}),u.memoizedState=I,u.childLanes=Ih(i,b,a),r.memoizedState=Ch,Il(i.child,u)):(Zs(r),a=i.child,i=a.sibling,a=es(a,{mode:"visible",children:u.children}),a.return=r,a.sibling=null,i!==null&&(b=r.deletions,b===null?(r.deletions=[i],r.flags|=16):b.push(i)),r.child=a,r.memoizedState=null,a)}function wh(i,r){return r=Rc({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function Rc(i,r){return i=Dn(22,i,null,r),i.lanes=0,i}function Rh(i,r,a){return no(r,i.child,null,a),i=wh(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function l_(i,r,a){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r),Gf(i.return,r,a)}function Nh(i,r,a,u,y,_){var b=i.memoizedState;b===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:y,treeForkCount:_}:(b.isBackwards=r,b.rendering=null,b.renderingStartTime=0,b.last=u,b.tail=a,b.tailMode=y,b.treeForkCount=_)}function u_(i,r,a){var u=r.pendingProps,y=u.revealOrder,_=u.tail;u=u.children;var b=Mt.current,I=(b&2)!==0;if(I?(b=b&1|2,r.flags|=128):b&=1,de(Mt,b),on(i,r,u,a),u=Ke?ml:0,!I&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&l_(i,a,r);else if(i.tag===19)l_(i,a,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(a=r.child,y=null;a!==null;)i=a.alternate,i!==null&&yc(i)===null&&(y=a),a=a.sibling;a=y,a===null?(y=r.child,r.child=null):(y=a.sibling,a.sibling=null),Nh(r,!1,y,a,_,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=r.child,r.child=null;y!==null;){if(i=y.alternate,i!==null&&yc(i)===null){r.child=y;break}i=y.sibling,y.sibling=a,a=y,y=i}Nh(r,!0,a,null,_,u);break;case"together":Nh(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function os(i,r,a){if(i!==null&&(r.dependencies=i.dependencies),ir|=r.lanes,(a&r.childLanes)===0)if(i!==null){if(jo(i,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,a=es(i,i.pendingProps),r.child=a,a.return=r;i.sibling!==null;)i=i.sibling,a=a.sibling=es(i,i.pendingProps),a.return=r;a.sibling=null}return r.child}function Mh(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&uc(i)))}function qC(i,r,a){switch(r.tag){case 3:xt(r,r.stateNode.containerInfo),$s(r,Ot,i.memoizedState.cache),Qr();break;case 27:case 5:Te(r);break;case 4:xt(r,r.stateNode.containerInfo);break;case 10:$s(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,nh(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Zs(r),r.flags|=128,null):(a&r.child.childLanes)!==0?a_(i,r,a):(Zs(r),i=os(i,r,a),i!==null?i.sibling:null);Zs(r);break;case 19:var y=(i.flags&128)!==0;if(u=(a&r.childLanes)!==0,u||(jo(i,r,a,!1),u=(a&r.childLanes)!==0),y){if(u)return u_(i,r,a);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),de(Mt,Mt.current),u)break;return null;case 22:return r.lanes=0,t_(i,r,a,r.pendingProps);case 24:$s(r,Ot,i.memoizedState.cache)}return os(i,r,a)}function c_(i,r,a){if(i!==null)if(i.memoizedProps!==r.pendingProps)Bt=!0;else{if(!Mh(i,a)&&(r.flags&128)===0)return Bt=!1,qC(i,r,a);Bt=(i.flags&131072)!==0}else Bt=!1,Ke&&(r.flags&1048576)!==0&&Hg(r,ml,r.index);switch(r.lanes=0,r.tag){case 16:e:{var u=r.pendingProps;if(i=eo(r.elementType),r.type=i,typeof i=="function")Uf(i)?(u=so(i,u),r.tag=1,r=r_(null,r,i,u,a)):(r.tag=0,r=bh(null,r,i,u,a));else{if(i!=null){var y=i.$$typeof;if(y===z){r.tag=11,r=Wy(null,r,i,u,a);break e}else if(y===M){r.tag=14,r=Zy(null,r,i,u,a);break e}}throw r=qe(i)||i,Error(s(306,r,""))}}return r;case 0:return bh(i,r,r.type,r.pendingProps,a);case 1:return u=r.type,y=so(u,r.pendingProps),r_(i,r,u,y,a);case 3:e:{if(xt(r,r.stateNode.containerInfo),i===null)throw Error(s(387));u=r.pendingProps;var _=r.memoizedState;y=_.element,Xf(i,r),Sl(r,u,null,a);var b=r.memoizedState;if(u=b.cache,$s(r,Ot,u),u!==_.cache&&jf(r,[Ot],a,!0),El(),u=b.element,_.isDehydrated)if(_={element:u,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=o_(i,r,u,a);break e}else if(u!==y){y=jn(Error(s(424)),r),pl(y),r=o_(i,r,u,a);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(pt=Qn(i.firstChild),sn=r,Ke=!0,Js=null,Kn=!0,a=ty(r,null,u,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Qr(),u===y){r=os(i,r,a);break e}on(i,r,u,a)}r=r.child}return r;case 26:return wc(i,r),i===null?(a=Ev(r.type,null,r.pendingProps,null))?r.memoizedState=a:Ke||(a=r.type,i=r.pendingProps,u=jc(ke.current).createElement(a),u[kt]=r,u[$t]=i,an(u,a,i),Ut(u),r.stateNode=u):r.memoizedState=Ev(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return Te(r),i===null&&Ke&&(u=r.stateNode=_v(r.type,r.pendingProps,ke.current),sn=r,Kn=!0,y=pt,lr(r.type)?(cm=y,pt=Qn(u.firstChild)):pt=y),on(i,r,r.pendingProps.children,a),wc(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&Ke&&((y=u=pt)&&(u=px(u,r.type,r.pendingProps,Kn),u!==null?(r.stateNode=u,sn=r,pt=Qn(u.firstChild),Kn=!1,y=!0):y=!1),y||Ks(r)),Te(r),y=r.type,_=r.pendingProps,b=i!==null?i.memoizedProps:null,u=_.children,rm(y,_)?u=null:b!==null&&rm(y,b)&&(r.flags|=32),r.memoizedState!==null&&(y=sh(i,r,NC,null,null,a),Hl._currentValue=y),wc(i,r),on(i,r,u,a),r.child;case 6:return i===null&&Ke&&((i=a=pt)&&(a=gx(a,r.pendingProps,Kn),a!==null?(r.stateNode=a,sn=r,pt=null,i=!0):i=!1),i||Ks(r)),null;case 13:return a_(i,r,a);case 4:return xt(r,r.stateNode.containerInfo),u=r.pendingProps,i===null?r.child=no(r,null,u,a):on(i,r,u,a),r.child;case 11:return Wy(i,r,r.type,r.pendingProps,a);case 7:return on(i,r,r.pendingProps,a),r.child;case 8:return on(i,r,r.pendingProps.children,a),r.child;case 12:return on(i,r,r.pendingProps.children,a),r.child;case 10:return u=r.pendingProps,$s(r,r.type,u.value),on(i,r,u.children,a),r.child;case 9:return y=r.type._context,u=r.pendingProps.children,Wr(r),y=rn(y),u=u(y),r.flags|=1,on(i,r,u,a),r.child;case 14:return Zy(i,r,r.type,r.pendingProps,a);case 15:return e_(i,r,r.type,r.pendingProps,a);case 19:return u_(i,r,a);case 31:return OC(i,r,a);case 22:return t_(i,r,a,r.pendingProps);case 24:return Wr(r),u=rn(Ot),i===null?(y=Kf(),y===null&&(y=ft,_=Yf(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=a),y=_),r.memoizedState={parent:u,cache:y},Qf(r),$s(r,Ot,y)):((i.lanes&a)!==0&&(Xf(i,r),Sl(r,null,null,a),El()),y=i.memoizedState,_=r.memoizedState,y.parent!==u?(y={parent:u,cache:u},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),$s(r,Ot,u)):(u=_.cache,$s(r,Ot,u),u!==y.cache&&jf(r,[Ot],a,!0))),on(i,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function as(i){i.flags|=4}function Dh(i,r,a,u,y){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(L_())i.flags|=8192;else throw to=hc,$f}else i.flags&=-16777217}function d_(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!xv(r))if(L_())i.flags|=8192;else throw to=hc,$f}function Nc(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Uu():536870912,i.lanes|=r,ia|=r)}function wl(i,r){if(!Ke)switch(i.tailMode){case"hidden":r=i.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function gt(i){var r=i.alternate!==null&&i.alternate.child===i.child,a=0,u=0;if(r)for(var y=i.child;y!==null;)a|=y.lanes|y.childLanes,u|=y.subtreeFlags&65011712,u|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)a|=y.lanes|y.childLanes,u|=y.subtreeFlags,u|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=u,i.childLanes=a,r}function BC(i,r,a){var u=r.pendingProps;switch(Bf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(r),null;case 1:return gt(r),null;case 3:return a=r.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),is(Ot),ie(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Go(r)?as(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Hf())),gt(r),null;case 26:var y=r.type,_=r.memoizedState;return i===null?(as(r),_!==null?(gt(r),d_(r,_)):(gt(r),Dh(r,y,null,u,a))):_?_!==i.memoizedState?(as(r),gt(r),d_(r,_)):(gt(r),r.flags&=-16777217):(i=i.memoizedProps,i!==u&&as(r),gt(r),Dh(r,y,i,u,a)),null;case 27:if(ge(r),a=ke.current,y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&as(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return gt(r),null}i=me.current,Go(r)?Gg(r):(i=_v(y,u,a),r.stateNode=i,as(r))}return gt(r),null;case 5:if(ge(r),y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&as(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return gt(r),null}if(_=me.current,Go(r))Gg(r);else{var b=jc(ke.current);switch(_){case 1:_=b.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=b.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=b.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=b.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=b.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof u.is=="string"?b.createElement("select",{is:u.is}):b.createElement("select"),u.multiple?_.multiple=!0:u.size&&(_.size=u.size);break;default:_=typeof u.is=="string"?b.createElement(y,{is:u.is}):b.createElement(y)}}_[kt]=r,_[$t]=u;e:for(b=r.child;b!==null;){if(b.tag===5||b.tag===6)_.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===r)break e;for(;b.sibling===null;){if(b.return===null||b.return===r)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}r.stateNode=_;e:switch(an(_,y,u),y){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&as(r)}}return gt(r),Dh(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,a),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==u&&as(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(s(166));if(i=ke.current,Go(r)){if(i=r.stateNode,a=r.memoizedProps,u=null,y=sn,y!==null)switch(y.tag){case 27:case 5:u=y.memoizedProps}i[kt]=r,i=!!(i.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||av(i.nodeValue,a)),i||Ks(r,!0)}else i=jc(i).createTextNode(u),i[kt]=r,r.stateNode=i}return gt(r),null;case 31:if(a=r.memoizedState,i===null||i.memoizedState!==null){if(u=Go(r),a!==null){if(i===null){if(!u)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[kt]=r}else Qr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;gt(r),i=!1}else a=Hf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return r.flags&256?(Vn(r),r):(Vn(r),null);if((r.flags&128)!==0)throw Error(s(558))}return gt(r),null;case 13:if(u=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=Go(r),u!==null&&u.dehydrated!==null){if(i===null){if(!y)throw Error(s(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[kt]=r}else Qr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;gt(r),y=!1}else y=Hf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Vn(r),r):(Vn(r),null)}return Vn(r),(r.flags&128)!==0?(r.lanes=a,r):(a=u!==null,i=i!==null&&i.memoizedState!==null,a&&(u=r.child,y=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(y=u.alternate.memoizedState.cachePool.pool),_=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==y&&(u.flags|=2048)),a!==i&&a&&(r.child.flags|=8192),Nc(r,r.updateQueue),gt(r),null);case 4:return ie(),i===null&&em(r.stateNode.containerInfo),gt(r),null;case 10:return is(r.type),gt(r),null;case 19:if(ne(Mt),u=r.memoizedState,u===null)return gt(r),null;if(y=(r.flags&128)!==0,_=u.rendering,_===null)if(y)wl(u,!1);else{if(bt!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(_=yc(i),_!==null){for(r.flags|=128,wl(u,!1),i=_.updateQueue,r.updateQueue=i,Nc(r,i),r.subtreeFlags=0,i=a,a=r.child;a!==null;)qg(a,i),a=a.sibling;return de(Mt,Mt.current&1|2),Ke&&ts(r,u.treeForkCount),r.child}i=i.sibling}u.tail!==null&&ht()>kc&&(r.flags|=128,y=!0,wl(u,!1),r.lanes=4194304)}else{if(!y)if(i=yc(_),i!==null){if(r.flags|=128,y=!0,i=i.updateQueue,r.updateQueue=i,Nc(r,i),wl(u,!0),u.tail===null&&u.tailMode==="hidden"&&!_.alternate&&!Ke)return gt(r),null}else 2*ht()-u.renderingStartTime>kc&&a!==536870912&&(r.flags|=128,y=!0,wl(u,!1),r.lanes=4194304);u.isBackwards?(_.sibling=r.child,r.child=_):(i=u.last,i!==null?i.sibling=_:r.child=_,u.last=_)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=ht(),i.sibling=null,a=Mt.current,de(Mt,y?a&1|2:a&1),Ke&&ts(r,u.treeForkCount),i):(gt(r),null);case 22:case 23:return Vn(r),th(),u=r.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(a&536870912)!==0&&(r.flags&128)===0&&(gt(r),r.subtreeFlags&6&&(r.flags|=8192)):gt(r),a=r.updateQueue,a!==null&&Nc(r,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==a&&(r.flags|=2048),i!==null&&ne(Zr),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),is(Ot),gt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function FC(i,r){switch(Bf(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return is(Ot),ie(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return ge(r),null;case 31:if(r.memoizedState!==null){if(Vn(r),r.alternate===null)throw Error(s(340));Qr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(Vn(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Qr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return ne(Mt),null;case 4:return ie(),null;case 10:return is(r.type),null;case 22:case 23:return Vn(r),th(),i!==null&&ne(Zr),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return is(Ot),null;case 25:return null;default:return null}}function f_(i,r){switch(Bf(r),r.tag){case 3:is(Ot),ie();break;case 26:case 27:case 5:ge(r);break;case 4:ie();break;case 31:r.memoizedState!==null&&Vn(r);break;case 13:Vn(r);break;case 19:ne(Mt);break;case 10:is(r.type);break;case 22:case 23:Vn(r),th(),i!==null&&ne(Zr);break;case 24:is(Ot)}}function Rl(i,r){try{var a=r.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var y=u.next;a=y;do{if((a.tag&i)===i){u=void 0;var _=a.create,b=a.inst;u=_(),b.destroy=u}a=a.next}while(a!==y)}}catch(I){at(r,r.return,I)}}function tr(i,r,a){try{var u=r.updateQueue,y=u!==null?u.lastEffect:null;if(y!==null){var _=y.next;u=_;do{if((u.tag&i)===i){var b=u.inst,I=b.destroy;if(I!==void 0){b.destroy=void 0,y=r;var U=a,Y=I;try{Y()}catch(ee){at(y,U,ee)}}}u=u.next}while(u!==_)}}catch(ee){at(r,r.return,ee)}}function h_(i){var r=i.updateQueue;if(r!==null){var a=i.stateNode;try{iy(r,a)}catch(u){at(i,i.return,u)}}}function m_(i,r,a){a.props=so(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(u){at(i,r,u)}}function Nl(i,r){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof a=="function"?i.refCleanup=a(u):a.current=u}}catch(y){at(i,r,y)}}function Bi(i,r){var a=i.ref,u=i.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(y){at(i,r,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){at(i,r,y)}else a.current=null}function p_(i){var r=i.type,a=i.memoizedProps,u=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(y){at(i,i.return,y)}}function Ph(i,r,a){try{var u=i.stateNode;ux(u,i.type,a,r),u[$t]=r}catch(y){at(i,i.return,y)}}function g_(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&lr(i.type)||i.tag===4}function Vh(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||g_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&lr(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function kh(i,r,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(i),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=ri));else if(u!==4&&(u===27&&lr(i.type)&&(a=i.stateNode,r=null),i=i.child,i!==null))for(kh(i,r,a),i=i.sibling;i!==null;)kh(i,r,a),i=i.sibling}function Mc(i,r,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?a.insertBefore(i,r):a.appendChild(i);else if(u!==4&&(u===27&&lr(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(Mc(i,r,a),i=i.sibling;i!==null;)Mc(i,r,a),i=i.sibling}function y_(i){var r=i.stateNode,a=i.memoizedProps;try{for(var u=i.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);an(r,u,a),r[kt]=i,r[$t]=a}catch(_){at(i,i.return,_)}}var ls=!1,Ft=!1,Uh=!1,__=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function HC(i,r){if(i=i.containerInfo,im=Wc,i=Ng(i),Rf(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var y=u.anchorOffset,_=u.focusNode;u=u.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var b=0,I=-1,U=-1,Y=0,ee=0,re=i,J=null;t:for(;;){for(var X;re!==a||y!==0&&re.nodeType!==3||(I=b+y),re!==_||u!==0&&re.nodeType!==3||(U=b+u),re.nodeType===3&&(b+=re.nodeValue.length),(X=re.firstChild)!==null;)J=re,re=X;for(;;){if(re===i)break t;if(J===a&&++Y===y&&(I=b),J===_&&++ee===u&&(U=b),(X=re.nextSibling)!==null)break;re=J,J=re.parentNode}re=X}a=I===-1||U===-1?null:{start:I,end:U}}else a=null}a=a||{start:0,end:0}}else a=null;for(sm={focusedElem:i,selectionRange:a},Wc=!1,Xt=r;Xt!==null;)if(r=Xt,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Xt=i;else for(;Xt!==null;){switch(r=Xt,_=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)y=i[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,a=r,y=_.memoizedProps,_=_.memoizedState,u=a.stateNode;try{var _e=so(a.type,y);i=u.getSnapshotBeforeUpdate(_e,_),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ie){at(a,a.return,Ie)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,a=i.nodeType,a===9)am(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":am(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Xt=i;break}Xt=r.return}}function v_(i,r,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:cs(i,a),u&4&&Rl(5,a);break;case 1:if(cs(i,a),u&4)if(i=a.stateNode,r===null)try{i.componentDidMount()}catch(b){at(a,a.return,b)}else{var y=so(a.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(y,r,i.__reactInternalSnapshotBeforeUpdate)}catch(b){at(a,a.return,b)}}u&64&&h_(a),u&512&&Nl(a,a.return);break;case 3:if(cs(i,a),u&64&&(i=a.updateQueue,i!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{iy(i,r)}catch(b){at(a,a.return,b)}}break;case 27:r===null&&u&4&&y_(a);case 26:case 5:cs(i,a),r===null&&u&4&&p_(a),u&512&&Nl(a,a.return);break;case 12:cs(i,a);break;case 31:cs(i,a),u&4&&S_(i,a);break;case 13:cs(i,a),u&4&&A_(i,a),u&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=XC.bind(null,a),yx(i,a))));break;case 22:if(u=a.memoizedState!==null||ls,!u){r=r!==null&&r.memoizedState!==null||Ft,y=ls;var _=Ft;ls=u,(Ft=r)&&!_?ds(i,a,(a.subtreeFlags&8772)!==0):cs(i,a),ls=y,Ft=_}break;case 30:break;default:cs(i,a)}}function T_(i){var r=i.alternate;r!==null&&(i.alternate=null,T_(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&Io(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Tt=null,En=!1;function us(i,r,a){for(a=a.child;a!==null;)E_(i,r,a),a=a.sibling}function E_(i,r,a){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(ti,a)}catch{}switch(a.tag){case 26:Ft||Bi(a,r),us(i,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ft||Bi(a,r);var u=Tt,y=En;lr(a.type)&&(Tt=a.stateNode,En=!1),us(i,r,a),ql(a.stateNode),Tt=u,En=y;break;case 5:Ft||Bi(a,r);case 6:if(u=Tt,y=En,Tt=null,us(i,r,a),Tt=u,En=y,Tt!==null)if(En)try{(Tt.nodeType===9?Tt.body:Tt.nodeName==="HTML"?Tt.ownerDocument.body:Tt).removeChild(a.stateNode)}catch(_){at(a,r,_)}else try{Tt.removeChild(a.stateNode)}catch(_){at(a,r,_)}break;case 18:Tt!==null&&(En?(i=Tt,hv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),da(i)):hv(Tt,a.stateNode));break;case 4:u=Tt,y=En,Tt=a.stateNode.containerInfo,En=!0,us(i,r,a),Tt=u,En=y;break;case 0:case 11:case 14:case 15:tr(2,a,r),Ft||tr(4,a,r),us(i,r,a);break;case 1:Ft||(Bi(a,r),u=a.stateNode,typeof u.componentWillUnmount=="function"&&m_(a,r,u)),us(i,r,a);break;case 21:us(i,r,a);break;case 22:Ft=(u=Ft)||a.memoizedState!==null,us(i,r,a),Ft=u;break;default:us(i,r,a)}}function S_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{da(i)}catch(a){at(r,r.return,a)}}}function A_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{da(i)}catch(a){at(r,r.return,a)}}function zC(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new __),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new __),r;default:throw Error(s(435,i.tag))}}function Dc(i,r){var a=zC(i);r.forEach(function(u){if(!a.has(u)){a.add(u);var y=WC.bind(null,i,u);u.then(y,y)}})}function Sn(i,r){var a=r.deletions;if(a!==null)for(var u=0;u<a.length;u++){var y=a[u],_=i,b=r,I=b;e:for(;I!==null;){switch(I.tag){case 27:if(lr(I.type)){Tt=I.stateNode,En=!1;break e}break;case 5:Tt=I.stateNode,En=!1;break e;case 3:case 4:Tt=I.stateNode.containerInfo,En=!0;break e}I=I.return}if(Tt===null)throw Error(s(160));E_(_,b,y),Tt=null,En=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)b_(r,i),r=r.sibling}var di=null;function b_(i,r){var a=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Sn(r,i),An(i),u&4&&(tr(3,i,i.return),Rl(3,i),tr(5,i,i.return));break;case 1:Sn(r,i),An(i),u&512&&(Ft||a===null||Bi(a,a.return)),u&64&&ls&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var y=di;if(Sn(r,i),An(i),u&512&&(Ft||a===null||Bi(a,a.return)),u&4){var _=a!==null?a.memoizedState:null;if(u=i.memoizedState,a===null)if(u===null)if(i.stateNode===null){e:{u=i.type,a=i.memoizedProps,y=y.ownerDocument||y;t:switch(u){case"title":_=y.getElementsByTagName("title")[0],(!_||_[xi]||_[kt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(u),y.head.insertBefore(_,y.querySelector("head > title"))),an(_,u,a),_[kt]=i,Ut(_),u=_;break e;case"link":var b=bv("link","href",y).get(u+(a.href||""));if(b){for(var I=0;I<b.length;I++)if(_=b[I],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(I,1);break t}}_=y.createElement(u),an(_,u,a),y.head.appendChild(_);break;case"meta":if(b=bv("meta","content",y).get(u+(a.content||""))){for(I=0;I<b.length;I++)if(_=b[I],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(I,1);break t}}_=y.createElement(u),an(_,u,a),y.head.appendChild(_);break;default:throw Error(s(468,u))}_[kt]=i,Ut(_),u=_}i.stateNode=u}else Cv(y,i.type,i.stateNode);else i.stateNode=Av(y,u,i.memoizedProps);else _!==u?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,u===null?Cv(y,i.type,i.stateNode):Av(y,u,i.memoizedProps)):u===null&&i.stateNode!==null&&Ph(i,i.memoizedProps,a.memoizedProps)}break;case 27:Sn(r,i),An(i),u&512&&(Ft||a===null||Bi(a,a.return)),a!==null&&u&4&&Ph(i,i.memoizedProps,a.memoizedProps);break;case 5:if(Sn(r,i),An(i),u&512&&(Ft||a===null||Bi(a,a.return)),i.flags&32){y=i.stateNode;try{Tn(y,"")}catch(_e){at(i,i.return,_e)}}u&4&&i.stateNode!=null&&(y=i.memoizedProps,Ph(i,y,a!==null?a.memoizedProps:y)),u&1024&&(Uh=!0);break;case 6:if(Sn(r,i),An(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,a=i.stateNode;try{a.nodeValue=u}catch(_e){at(i,i.return,_e)}}break;case 3:if(Kc=null,y=di,di=Yc(r.containerInfo),Sn(r,i),di=y,An(i),u&4&&a!==null&&a.memoizedState.isDehydrated)try{da(r.containerInfo)}catch(_e){at(i,i.return,_e)}Uh&&(Uh=!1,C_(i));break;case 4:u=di,di=Yc(i.stateNode.containerInfo),Sn(r,i),An(i),di=u;break;case 12:Sn(r,i),An(i);break;case 31:Sn(r,i),An(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Dc(i,u)));break;case 13:Sn(r,i),An(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Vc=ht()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Dc(i,u)));break;case 22:y=i.memoizedState!==null;var U=a!==null&&a.memoizedState!==null,Y=ls,ee=Ft;if(ls=Y||y,Ft=ee||U,Sn(r,i),Ft=ee,ls=Y,An(i),u&8192)e:for(r=i.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(a===null||U||ls||Ft||ro(i)),a=null,r=i;;){if(r.tag===5||r.tag===26){if(a===null){U=a=r;try{if(_=U.stateNode,y)b=_.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{I=U.stateNode;var re=U.memoizedProps.style,J=re!=null&&re.hasOwnProperty("display")?re.display:null;I.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(_e){at(U,U.return,_e)}}}else if(r.tag===6){if(a===null){U=r;try{U.stateNode.nodeValue=y?"":U.memoizedProps}catch(_e){at(U,U.return,_e)}}}else if(r.tag===18){if(a===null){U=r;try{var X=U.stateNode;y?mv(X,!0):mv(U.stateNode,!1)}catch(_e){at(U,U.return,_e)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=i.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Dc(i,a))));break;case 19:Sn(r,i),An(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Dc(i,u)));break;case 30:break;case 21:break;default:Sn(r,i),An(i)}}function An(i){var r=i.flags;if(r&2){try{for(var a,u=i.return;u!==null;){if(g_(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var y=a.stateNode,_=Vh(i);Mc(i,_,y);break;case 5:var b=a.stateNode;a.flags&32&&(Tn(b,""),a.flags&=-33);var I=Vh(i);Mc(i,I,b);break;case 3:case 4:var U=a.stateNode.containerInfo,Y=Vh(i);kh(i,Y,U);break;default:throw Error(s(161))}}catch(ee){at(i,i.return,ee)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function C_(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;C_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function cs(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)v_(i,r.alternate,r),r=r.sibling}function ro(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:tr(4,r,r.return),ro(r);break;case 1:Bi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&m_(r,r.return,a),ro(r);break;case 27:ql(r.stateNode);case 26:case 5:Bi(r,r.return),ro(r);break;case 22:r.memoizedState===null&&ro(r);break;case 30:ro(r);break;default:ro(r)}i=i.sibling}}function ds(i,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,y=i,_=r,b=_.flags;switch(_.tag){case 0:case 11:case 15:ds(y,_,a),Rl(4,_);break;case 1:if(ds(y,_,a),u=_,y=u.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Y){at(u,u.return,Y)}if(u=_,y=u.updateQueue,y!==null){var I=u.stateNode;try{var U=y.shared.hiddenCallbacks;if(U!==null)for(y.shared.hiddenCallbacks=null,y=0;y<U.length;y++)ny(U[y],I)}catch(Y){at(u,u.return,Y)}}a&&b&64&&h_(_),Nl(_,_.return);break;case 27:y_(_);case 26:case 5:ds(y,_,a),a&&u===null&&b&4&&p_(_),Nl(_,_.return);break;case 12:ds(y,_,a);break;case 31:ds(y,_,a),a&&b&4&&S_(y,_);break;case 13:ds(y,_,a),a&&b&4&&A_(y,_);break;case 22:_.memoizedState===null&&ds(y,_,a),Nl(_,_.return);break;case 30:break;default:ds(y,_,a)}r=r.sibling}}function Lh(i,r){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&gl(a))}function Oh(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&gl(i))}function fi(i,r,a,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)x_(i,r,a,u),r=r.sibling}function x_(i,r,a,u){var y=r.flags;switch(r.tag){case 0:case 11:case 15:fi(i,r,a,u),y&2048&&Rl(9,r);break;case 1:fi(i,r,a,u);break;case 3:fi(i,r,a,u),y&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&gl(i)));break;case 12:if(y&2048){fi(i,r,a,u),i=r.stateNode;try{var _=r.memoizedProps,b=_.id,I=_.onPostCommit;typeof I=="function"&&I(b,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(U){at(r,r.return,U)}}else fi(i,r,a,u);break;case 31:fi(i,r,a,u);break;case 13:fi(i,r,a,u);break;case 23:break;case 22:_=r.stateNode,b=r.alternate,r.memoizedState!==null?_._visibility&2?fi(i,r,a,u):Ml(i,r):_._visibility&2?fi(i,r,a,u):(_._visibility|=2,ea(i,r,a,u,(r.subtreeFlags&10256)!==0||!1)),y&2048&&Lh(b,r);break;case 24:fi(i,r,a,u),y&2048&&Oh(r.alternate,r);break;default:fi(i,r,a,u)}}function ea(i,r,a,u,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=i,b=r,I=a,U=u,Y=b.flags;switch(b.tag){case 0:case 11:case 15:ea(_,b,I,U,y),Rl(8,b);break;case 23:break;case 22:var ee=b.stateNode;b.memoizedState!==null?ee._visibility&2?ea(_,b,I,U,y):Ml(_,b):(ee._visibility|=2,ea(_,b,I,U,y)),y&&Y&2048&&Lh(b.alternate,b);break;case 24:ea(_,b,I,U,y),y&&Y&2048&&Oh(b.alternate,b);break;default:ea(_,b,I,U,y)}r=r.sibling}}function Ml(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=i,u=r,y=u.flags;switch(u.tag){case 22:Ml(a,u),y&2048&&Lh(u.alternate,u);break;case 24:Ml(a,u),y&2048&&Oh(u.alternate,u);break;default:Ml(a,u)}r=r.sibling}}var Dl=8192;function ta(i,r,a){if(i.subtreeFlags&Dl)for(i=i.child;i!==null;)I_(i,r,a),i=i.sibling}function I_(i,r,a){switch(i.tag){case 26:ta(i,r,a),i.flags&Dl&&i.memoizedState!==null&&Rx(a,di,i.memoizedState,i.memoizedProps);break;case 5:ta(i,r,a);break;case 3:case 4:var u=di;di=Yc(i.stateNode.containerInfo),ta(i,r,a),di=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=Dl,Dl=16777216,ta(i,r,a),Dl=u):ta(i,r,a));break;default:ta(i,r,a)}}function w_(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Pl(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];Xt=u,N_(u,i)}w_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)R_(i),i=i.sibling}function R_(i){switch(i.tag){case 0:case 11:case 15:Pl(i),i.flags&2048&&tr(9,i,i.return);break;case 3:Pl(i);break;case 12:Pl(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Pc(i)):Pl(i);break;default:Pl(i)}}function Pc(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];Xt=u,N_(u,i)}w_(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:tr(8,r,r.return),Pc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Pc(r));break;default:Pc(r)}i=i.sibling}}function N_(i,r){for(;Xt!==null;){var a=Xt;switch(a.tag){case 0:case 11:case 15:tr(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:gl(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Xt=u;else e:for(a=i;Xt!==null;){u=Xt;var y=u.sibling,_=u.return;if(T_(u),u===a){Xt=null;break e}if(y!==null){y.return=_,Xt=y;break e}Xt=_}}}var GC={getCacheForType:function(i){var r=rn(Ot),a=r.data.get(i);return a===void 0&&(a=i(),r.data.set(i,a)),a},cacheSignal:function(){return rn(Ot).controller.signal}},jC=typeof WeakMap=="function"?WeakMap:Map,nt=0,ft=null,Be=null,ze=0,ot=0,kn=null,nr=!1,na=!1,qh=!1,fs=0,bt=0,ir=0,oo=0,Bh=0,Un=0,ia=0,Vl=null,bn=null,Fh=!1,Vc=0,M_=0,kc=1/0,Uc=null,sr=null,Yt=0,rr=null,sa=null,hs=0,Hh=0,zh=null,D_=null,kl=0,Gh=null;function Ln(){return(nt&2)!==0&&ze!==0?ze&-ze:W.T!==null?Qh():Lu()}function P_(){if(Un===0)if((ze&536870912)===0||Ke){var i=Pr;Pr<<=1,(Pr&3932160)===0&&(Pr=262144),Un=i}else Un=536870912;return i=Pn.current,i!==null&&(i.flags|=32),Un}function Cn(i,r,a){(i===ft&&(ot===2||ot===9)||i.cancelPendingCommit!==null)&&(ra(i,0),or(i,ze,Un,!1)),Vr(i,a),((nt&2)===0||i!==ft)&&(i===ft&&((nt&2)===0&&(oo|=a),bt===4&&or(i,ze,Un,!1)),Fi(i))}function V_(i,r,a){if((nt&6)!==0)throw Error(s(327));var u=!a&&(r&127)===0&&(r&i.expiredLanes)===0||ni(i,r),y=u?KC(i,r):Yh(i,r,!0),_=u;do{if(y===0){na&&!u&&or(i,r,0,!1);break}else{if(a=i.current.alternate,_&&!YC(a)){y=Yh(i,r,!1),_=!1;continue}if(y===2){if(_=r,i.errorRecoveryDisabledLanes&_)var b=0;else b=i.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var I=i;y=Vl;var U=I.current.memoizedState.isDehydrated;if(U&&(ra(I,b).flags|=256),b=Yh(I,b,!1),b!==2){if(qh&&!U){I.errorRecoveryDisabledLanes|=_,oo|=_,y=4;break e}_=bn,bn=y,_!==null&&(bn===null?bn=_:bn.push.apply(bn,_))}y=b}if(_=!1,y!==2)continue}}if(y===1){ra(i,0),or(i,r,0,!0);break}e:{switch(u=i,_=y,_){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:or(u,r,Un,!nr);break e;case 2:bn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(y=Vc+300-ht(),10<y)){if(or(u,r,Un,!nr),Ai(u,0,!0)!==0)break e;hs=r,u.timeoutHandle=dv(k_.bind(null,u,a,bn,Uc,Fh,r,Un,oo,ia,nr,_,"Throttled",-0,0),y);break e}k_(u,a,bn,Uc,Fh,r,Un,oo,ia,nr,_,null,-0,0)}}break}while(!0);Fi(i)}function k_(i,r,a,u,y,_,b,I,U,Y,ee,re,J,X){if(i.timeoutHandle=-1,re=r.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ri},I_(r,_,re);var _e=(_&62914560)===_?Vc-ht():(_&4194048)===_?M_-ht():0;if(_e=Nx(re,_e),_e!==null){hs=_,i.cancelPendingCommit=_e(z_.bind(null,i,r,_,a,u,y,b,I,U,ee,re,null,J,X)),or(i,_,b,!Y);return}}z_(i,r,_,a,u,y,b,I,U)}function YC(i){for(var r=i;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var y=a[u],_=y.getSnapshot;y=y.value;try{if(!Mn(_(),y))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function or(i,r,a,u){r&=~Bh,r&=~oo,i.suspendedLanes|=r,i.pingedLanes&=~r,u&&(i.warmLanes|=r),u=i.expirationTimes;for(var y=r;0<y;){var _=31-Rt(y),b=1<<_;u[_]=-1,y&=~b}a!==0&&kr(i,a,r)}function Lc(){return(nt&6)===0?(Ul(0),!1):!0}function jh(){if(Be!==null){if(ot===0)var i=Be.return;else i=Be,ns=Xr=null,ah(i),$o=null,_l=0,i=Be;for(;i!==null;)f_(i.alternate,i),i=i.return;Be=null}}function ra(i,r){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,fx(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),hs=0,jh(),ft=i,Be=a=es(i.current,null),ze=r,ot=0,kn=null,nr=!1,na=ni(i,r),qh=!1,ia=Un=Bh=oo=ir=bt=0,bn=Vl=null,Fh=!1,(r&8)!==0&&(r|=r&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=r;0<u;){var y=31-Rt(u),_=1<<y;r|=i[y],u&=~_}return fs=r,sc(),a}function U_(i,r){Le=null,W.H=xl,r===Ko||r===fc?(r=Wg(),ot=3):r===$f?(r=Wg(),ot=4):ot=r===Ah?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,kn=r,Be===null&&(bt=1,xc(i,jn(r,i.current)))}function L_(){var i=Pn.current;return i===null?!0:(ze&4194048)===ze?$n===null:(ze&62914560)===ze||(ze&536870912)!==0?i===$n:!1}function O_(){var i=W.H;return W.H=xl,i===null?xl:i}function q_(){var i=W.A;return W.A=GC,i}function Oc(){bt=4,nr||(ze&4194048)!==ze&&Pn.current!==null||(na=!0),(ir&134217727)===0&&(oo&134217727)===0||ft===null||or(ft,ze,Un,!1)}function Yh(i,r,a){var u=nt;nt|=2;var y=O_(),_=q_();(ft!==i||ze!==r)&&(Uc=null,ra(i,r)),r=!1;var b=bt;e:do try{if(ot!==0&&Be!==null){var I=Be,U=kn;switch(ot){case 8:jh(),b=6;break e;case 3:case 2:case 9:case 6:Pn.current===null&&(r=!0);var Y=ot;if(ot=0,kn=null,oa(i,I,U,Y),a&&na){b=0;break e}break;default:Y=ot,ot=0,kn=null,oa(i,I,U,Y)}}JC(),b=bt;break}catch(ee){U_(i,ee)}while(!0);return r&&i.shellSuspendCounter++,ns=Xr=null,nt=u,W.H=y,W.A=_,Be===null&&(ft=null,ze=0,sc()),b}function JC(){for(;Be!==null;)B_(Be)}function KC(i,r){var a=nt;nt|=2;var u=O_(),y=q_();ft!==i||ze!==r?(Uc=null,kc=ht()+500,ra(i,r)):na=ni(i,r);e:do try{if(ot!==0&&Be!==null){r=Be;var _=kn;t:switch(ot){case 1:ot=0,kn=null,oa(i,r,_,1);break;case 2:case 9:if(Qg(_)){ot=0,kn=null,F_(r);break}r=function(){ot!==2&&ot!==9||ft!==i||(ot=7),Fi(i)},_.then(r,r);break e;case 3:ot=7;break e;case 4:ot=5;break e;case 7:Qg(_)?(ot=0,kn=null,F_(r)):(ot=0,kn=null,oa(i,r,_,7));break;case 5:var b=null;switch(Be.tag){case 26:b=Be.memoizedState;case 5:case 27:var I=Be;if(b?xv(b):I.stateNode.complete){ot=0,kn=null;var U=I.sibling;if(U!==null)Be=U;else{var Y=I.return;Y!==null?(Be=Y,qc(Y)):Be=null}break t}}ot=0,kn=null,oa(i,r,_,5);break;case 6:ot=0,kn=null,oa(i,r,_,6);break;case 8:jh(),bt=6;break e;default:throw Error(s(462))}}$C();break}catch(ee){U_(i,ee)}while(!0);return ns=Xr=null,W.H=u,W.A=y,nt=a,Be!==null?0:(ft=null,ze=0,sc(),bt)}function $C(){for(;Be!==null&&!wt();)B_(Be)}function B_(i){var r=c_(i.alternate,i,fs);i.memoizedProps=i.pendingProps,r===null?qc(i):Be=r}function F_(i){var r=i,a=r.alternate;switch(r.tag){case 15:case 0:r=s_(a,r,r.pendingProps,r.type,void 0,ze);break;case 11:r=s_(a,r,r.pendingProps,r.type.render,r.ref,ze);break;case 5:ah(r);default:f_(a,r),r=Be=qg(r,fs),r=c_(a,r,fs)}i.memoizedProps=i.pendingProps,r===null?qc(i):Be=r}function oa(i,r,a,u){ns=Xr=null,ah(r),$o=null,_l=0;var y=r.return;try{if(LC(i,y,r,a,ze)){bt=1,xc(i,jn(a,i.current)),Be=null;return}}catch(_){if(y!==null)throw Be=y,_;bt=1,xc(i,jn(a,i.current)),Be=null;return}r.flags&32768?(Ke||u===1?i=!0:na||(ze&536870912)!==0?i=!1:(nr=i=!0,(u===2||u===9||u===3||u===6)&&(u=Pn.current,u!==null&&u.tag===13&&(u.flags|=16384))),H_(r,i)):qc(r)}function qc(i){var r=i;do{if((r.flags&32768)!==0){H_(r,nr);return}i=r.return;var a=BC(r.alternate,r,fs);if(a!==null){Be=a;return}if(r=r.sibling,r!==null){Be=r;return}Be=r=i}while(r!==null);bt===0&&(bt=5)}function H_(i,r){do{var a=FC(i.alternate,i);if(a!==null){a.flags&=32767,Be=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(i=i.sibling,i!==null)){Be=i;return}Be=i=a}while(i!==null);bt=6,Be=null}function z_(i,r,a,u,y,_,b,I,U){i.cancelPendingCommit=null;do Bc();while(Yt!==0);if((nt&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(_=r.lanes|r.childLanes,_|=Vf,Cf(i,a,_,b,I,U),i===ft&&(Be=ft=null,ze=0),sa=r,rr=i,hs=a,Hh=_,zh=y,D_=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,ZC(Us,function(){return K_(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=W.T,W.T=null,y=K.p,K.p=2,b=nt,nt|=4;try{HC(i,r,a)}finally{nt=b,K.p=y,W.T=u}}Yt=1,G_(),j_(),Y_()}}function G_(){if(Yt===1){Yt=0;var i=rr,r=sa,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=W.T,W.T=null;var u=K.p;K.p=2;var y=nt;nt|=4;try{b_(r,i);var _=sm,b=Ng(i.containerInfo),I=_.focusedElem,U=_.selectionRange;if(b!==I&&I&&I.ownerDocument&&Rg(I.ownerDocument.documentElement,I)){if(U!==null&&Rf(I)){var Y=U.start,ee=U.end;if(ee===void 0&&(ee=Y),"selectionStart"in I)I.selectionStart=Y,I.selectionEnd=Math.min(ee,I.value.length);else{var re=I.ownerDocument||document,J=re&&re.defaultView||window;if(J.getSelection){var X=J.getSelection(),_e=I.textContent.length,Ie=Math.min(U.start,_e),dt=U.end===void 0?Ie:Math.min(U.end,_e);!X.extend&&Ie>dt&&(b=dt,dt=Ie,Ie=b);var H=wg(I,Ie),B=wg(I,dt);if(H&&B&&(X.rangeCount!==1||X.anchorNode!==H.node||X.anchorOffset!==H.offset||X.focusNode!==B.node||X.focusOffset!==B.offset)){var j=re.createRange();j.setStart(H.node,H.offset),X.removeAllRanges(),Ie>dt?(X.addRange(j),X.extend(B.node,B.offset)):(j.setEnd(B.node,B.offset),X.addRange(j))}}}}for(re=[],X=I;X=X.parentNode;)X.nodeType===1&&re.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<re.length;I++){var se=re[I];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Wc=!!im,sm=im=null}finally{nt=y,K.p=u,W.T=a}}i.current=r,Yt=2}}function j_(){if(Yt===2){Yt=0;var i=rr,r=sa,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=W.T,W.T=null;var u=K.p;K.p=2;var y=nt;nt|=4;try{v_(i,r.alternate,r)}finally{nt=y,K.p=u,W.T=a}}Yt=3}}function Y_(){if(Yt===4||Yt===3){Yt=0,In();var i=rr,r=sa,a=hs,u=D_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Yt=5:(Yt=0,sa=rr=null,J_(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(sr=null),Qi(a),r=r.stateNode,tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(ti,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=W.T,y=K.p,K.p=2,W.T=null;try{for(var _=i.onRecoverableError,b=0;b<u.length;b++){var I=u[b];_(I.value,{componentStack:I.stack})}}finally{W.T=r,K.p=y}}(hs&3)!==0&&Bc(),Fi(i),y=i.pendingLanes,(a&261930)!==0&&(y&42)!==0?i===Gh?kl++:(kl=0,Gh=i):kl=0,Ul(0)}}function J_(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,gl(r)))}function Bc(){return G_(),j_(),Y_(),K_()}function K_(){if(Yt!==5)return!1;var i=rr,r=Hh;Hh=0;var a=Qi(hs),u=W.T,y=K.p;try{K.p=32>a?32:a,W.T=null,a=zh,zh=null;var _=rr,b=hs;if(Yt=0,sa=rr=null,hs=0,(nt&6)!==0)throw Error(s(331));var I=nt;if(nt|=4,R_(_.current),x_(_,_.current,b,a),nt=I,Ul(0,!1),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(ti,_)}catch{}return!0}finally{K.p=y,W.T=u,J_(i,r)}}function $_(i,r,a){r=jn(a,r),r=Sh(i.stateNode,r,2),i=Ws(i,r,2),i!==null&&(Vr(i,2),Fi(i))}function at(i,r,a){if(i.tag===3)$_(i,i,a);else for(;r!==null;){if(r.tag===3){$_(r,i,a);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(sr===null||!sr.has(u))){i=jn(a,i),a=Qy(2),u=Ws(r,a,2),u!==null&&(Xy(a,u,r,i),Vr(u,2),Fi(u));break}}r=r.return}}function Jh(i,r,a){var u=i.pingCache;if(u===null){u=i.pingCache=new jC;var y=new Set;u.set(r,y)}else y=u.get(r),y===void 0&&(y=new Set,u.set(r,y));y.has(a)||(qh=!0,y.add(a),i=QC.bind(null,i,r,a),r.then(i,i))}function QC(i,r,a){var u=i.pingCache;u!==null&&u.delete(r),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,ft===i&&(ze&a)===a&&(bt===4||bt===3&&(ze&62914560)===ze&&300>ht()-Vc?(nt&2)===0&&ra(i,0):Bh|=a,ia===ze&&(ia=0)),Fi(i)}function Q_(i,r){r===0&&(r=Uu()),i=Kr(i,r),i!==null&&(Vr(i,r),Fi(i))}function XC(i){var r=i.memoizedState,a=0;r!==null&&(a=r.retryLane),Q_(i,a)}function WC(i,r){var a=0;switch(i.tag){case 31:case 13:var u=i.stateNode,y=i.memoizedState;y!==null&&(a=y.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(r),Q_(i,a)}function ZC(i,r){return It(i,r)}var Fc=null,aa=null,Kh=!1,Hc=!1,$h=!1,ar=0;function Fi(i){i!==aa&&i.next===null&&(aa===null?Fc=aa=i:aa=aa.next=i),Hc=!0,Kh||(Kh=!0,tx())}function Ul(i,r){if(!$h&&Hc){$h=!0;do for(var a=!1,u=Fc;u!==null;){if(i!==0){var y=u.pendingLanes;if(y===0)var _=0;else{var b=u.suspendedLanes,I=u.pingedLanes;_=(1<<31-Rt(42|i)+1)-1,_&=y&~(b&~I),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,ev(u,_))}else _=ze,_=Ai(u,u===ft?_:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(_&3)===0||ni(u,_)||(a=!0,ev(u,_));u=u.next}while(a);$h=!1}}function ex(){X_()}function X_(){Hc=Kh=!1;var i=0;ar!==0&&dx()&&(i=ar);for(var r=ht(),a=null,u=Fc;u!==null;){var y=u.next,_=W_(u,r);_===0?(u.next=null,a===null?Fc=y:a.next=y,y===null&&(aa=a)):(a=u,(i!==0||(_&3)!==0)&&(Hc=!0)),u=y}Yt!==0&&Yt!==5||Ul(i),ar!==0&&(ar=0)}function W_(i,r){for(var a=i.suspendedLanes,u=i.pingedLanes,y=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var b=31-Rt(_),I=1<<b,U=y[b];U===-1?((I&a)===0||(I&u)!==0)&&(y[b]=bf(I,r)):U<=r&&(i.expiredLanes|=I),_&=~I}if(r=ft,a=ze,a=Ai(i,i===r?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,a===0||i===r&&(ot===2||ot===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&pe(u),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||ni(i,a)){if(r=a&-a,r===i.callbackPriority)return r;switch(u!==null&&pe(u),Qi(a)){case 2:case 8:a=Ya;break;case 32:a=Us;break;case 268435456:a=Mu;break;default:a=Us}return u=Z_.bind(null,i),a=It(a,u),i.callbackPriority=r,i.callbackNode=a,r}return u!==null&&u!==null&&pe(u),i.callbackPriority=2,i.callbackNode=null,2}function Z_(i,r){if(Yt!==0&&Yt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(Bc()&&i.callbackNode!==a)return null;var u=ze;return u=Ai(i,i===ft?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(V_(i,u,r),W_(i,ht()),i.callbackNode!=null&&i.callbackNode===a?Z_.bind(null,i):null)}function ev(i,r){if(Bc())return null;V_(i,r,!0)}function tx(){hx(function(){(nt&6)!==0?It(et,ex):X_()})}function Qh(){if(ar===0){var i=Yo;i===0&&(i=Ei,Ei<<=1,(Ei&261888)===0&&(Ei=256)),ar=i}return ar}function tv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Mo(""+i)}function nv(i,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,i.id&&a.setAttribute("form",i.id),r.parentNode.insertBefore(a,r),i=new FormData(i),a.parentNode.removeChild(a),i}function nx(i,r,a,u,y){if(r==="submit"&&a&&a.stateNode===y){var _=tv((y[$t]||null).action),b=u.submitter;b&&(r=(r=b[$t]||null)?tv(r.formAction):b.getAttribute("formAction"),r!==null&&(_=r,b=null));var I=new Vi("action","action",null,u,y);i.push({event:I,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ar!==0){var U=b?nv(y,b):new FormData(y);gh(a,{pending:!0,data:U,method:y.method,action:_},null,U)}}else typeof _=="function"&&(I.preventDefault(),U=b?nv(y,b):new FormData(y),gh(a,{pending:!0,data:U,method:y.method,action:_},_,U))},currentTarget:y}]})}}for(var Xh=0;Xh<Pf.length;Xh++){var Wh=Pf[Xh],ix=Wh.toLowerCase(),sx=Wh[0].toUpperCase()+Wh.slice(1);ci(ix,"on"+sx)}ci(Pg,"onAnimationEnd"),ci(Vg,"onAnimationIteration"),ci(kg,"onAnimationStart"),ci("dblclick","onDoubleClick"),ci("focusin","onFocus"),ci("focusout","onBlur"),ci(TC,"onTransitionRun"),ci(EC,"onTransitionStart"),ci(SC,"onTransitionCancel"),ci(Ug,"onTransitionEnd"),Ni("onMouseEnter",["mouseout","mouseover"]),Ni("onMouseLeave",["mouseout","mouseover"]),Ni("onPointerEnter",["pointerout","pointerover"]),Ni("onPointerLeave",["pointerout","pointerover"]),Ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ri("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ll));function iv(i,r){r=(r&4)!==0;for(var a=0;a<i.length;a++){var u=i[a],y=u.event;u=u.listeners;e:{var _=void 0;if(r)for(var b=u.length-1;0<=b;b--){var I=u[b],U=I.instance,Y=I.currentTarget;if(I=I.listener,U!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=Y;try{_(y)}catch(ee){ic(ee)}y.currentTarget=null,_=U}else for(b=0;b<u.length;b++){if(I=u[b],U=I.instance,Y=I.currentTarget,I=I.listener,U!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=Y;try{_(y)}catch(ee){ic(ee)}y.currentTarget=null,_=U}}}}function Fe(i,r){var a=r[xo];a===void 0&&(a=r[xo]=new Set);var u=i+"__bubble";a.has(u)||(sv(r,i,2,!1),a.add(u))}function Zh(i,r,a){var u=0;r&&(u|=4),sv(a,i,u,r)}var zc="_reactListening"+Math.random().toString(36).slice(2);function em(i){if(!i[zc]){i[zc]=!0,$a.forEach(function(a){a!=="selectionchange"&&(rx.has(a)||Zh(a,!1,i),Zh(a,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[zc]||(r[zc]=!0,Zh("selectionchange",!1,r))}}function sv(i,r,a,u){switch(Pv(r)){case 2:var y=Px;break;case 8:y=Vx;break;default:y=pm}a=y.bind(null,r,a,i),y=void 0,!Br||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),u?y!==void 0?i.addEventListener(r,a,{capture:!0,passive:y}):i.addEventListener(r,a,!0):y!==void 0?i.addEventListener(r,a,{passive:y}):i.addEventListener(r,a,!1)}function tm(i,r,a,u,y){var _=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var I=u.stateNode.containerInfo;if(I===y)break;if(b===4)for(b=u.return;b!==null;){var U=b.tag;if((U===3||U===4)&&b.stateNode.containerInfo===y)return;b=b.return}for(;I!==null;){if(b=Ii(I),b===null)return;if(U=b.tag,U===5||U===6||U===26||U===27){u=_=b;continue e}I=I.parentNode}}u=u.return}Hs(function(){var Y=_,ee=Fn(a),re=[];e:{var J=Lg.get(i);if(J!==void 0){var X=Vi,_e=i;switch(i){case"keypress":if(Hr(a)===0)break e;case"keydown":case"keyup":X=ec;break;case"focusin":_e="focus",X=Gr;break;case"focusout":_e="blur",X=Gr;break;case"beforeblur":case"afterblur":X=Gr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=ll;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=ju;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=S;break;case Pg:case Vg:case kg:X=Ju;break;case Ug:X=w;break;case"scroll":case"scrollend":X=al;break;case"wheel":X=Q;break;case"copy":case"cut":case"paste":X=Ku;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Zi;break;case"toggle":case"beforetoggle":X=Ue}var Ie=(r&4)!==0,dt=!Ie&&(i==="scroll"||i==="scrollend"),H=Ie?J!==null?J+"Capture":null:J;Ie=[];for(var B=Y,j;B!==null;){var se=B;if(j=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||j===null||H===null||(se=oi(B,H),se!=null&&Ie.push(Ol(B,se,j))),dt)break;B=B.return}0<Ie.length&&(J=new X(J,_e,null,a,ee),re.push({event:J,listeners:Ie}))}}if((r&7)===0){e:{if(J=i==="mouseover"||i==="pointerover",X=i==="mouseout"||i==="pointerout",J&&a!==sl&&(_e=a.relatedTarget||a.fromElement)&&(Ii(_e)||_e[Ci]))break e;if((X||J)&&(J=ee.window===ee?ee:(J=ee.ownerDocument)?J.defaultView||J.parentWindow:window,X?(_e=a.relatedTarget||a.toElement,X=Y,_e=_e?Ii(_e):null,_e!==null&&(dt=l(_e),Ie=_e.tag,_e!==dt||Ie!==5&&Ie!==27&&Ie!==6)&&(_e=null)):(X=null,_e=Y),X!==_e)){if(Ie=ll,se="onMouseLeave",H="onMouseEnter",B="mouse",(i==="pointerout"||i==="pointerover")&&(Ie=Zi,se="onPointerLeave",H="onPointerEnter",B="pointer"),dt=X==null?J:Rn(X),j=_e==null?J:Rn(_e),J=new Ie(se,B+"leave",X,a,ee),J.target=dt,J.relatedTarget=j,se=null,Ii(ee)===Y&&(Ie=new Ie(H,B+"enter",_e,a,ee),Ie.target=j,Ie.relatedTarget=dt,se=Ie),dt=se,X&&_e)t:{for(Ie=ox,H=X,B=_e,j=0,se=H;se;se=Ie(se))j++;se=0;for(var Ce=B;Ce;Ce=Ie(Ce))se++;for(;0<j-se;)H=Ie(H),j--;for(;0<se-j;)B=Ie(B),se--;for(;j--;){if(H===B||B!==null&&H===B.alternate){Ie=H;break t}H=Ie(H),B=Ie(B)}Ie=null}else Ie=null;X!==null&&rv(re,J,X,Ie,!1),_e!==null&&dt!==null&&rv(re,dt,_e,Ie,!0)}}e:{if(J=Y?Rn(Y):window,X=J.nodeName&&J.nodeName.toLowerCase(),X==="select"||X==="input"&&J.type==="file")var Qe=Sg;else if(Tg(J))if(Ag)Qe=yC;else{Qe=pC;var Ae=mC}else X=J.nodeName,!X||X.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?Y&&No(Y.elementType)&&(Qe=Sg):Qe=gC;if(Qe&&(Qe=Qe(i,Y))){Eg(re,Qe,a,ee);break e}Ae&&Ae(i,J,Y),i==="focusout"&&Y&&J.type==="number"&&Y.memoizedProps.value!=null&&tl(J,"number",J.value)}switch(Ae=Y?Rn(Y):window,i){case"focusin":(Tg(Ae)||Ae.contentEditable==="true")&&(Oo=Ae,Nf=Y,hl=null);break;case"focusout":hl=Nf=Oo=null;break;case"mousedown":Mf=!0;break;case"contextmenu":case"mouseup":case"dragend":Mf=!1,Mg(re,a,ee);break;case"selectionchange":if(vC)break;case"keydown":case"keyup":Mg(re,a,ee)}var Oe;if(tt)e:{switch(i){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else Lo?jr(i,a)&&(Ge="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Ge="onCompositionStart");Ge&&(Li&&a.locale!=="ko"&&(Lo||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&Lo&&(Oe=ol()):(Pi=ee,rl="value"in Pi?Pi.value:Pi.textContent,Lo=!0)),Ae=Gc(Y,Ge),0<Ae.length&&(Ge=new Ui(Ge,i,null,a,ee),re.push({event:Ge,listeners:Ae}),Oe?Ge.data=Oe:(Oe=Uo(a),Oe!==null&&(Ge.data=Oe)))),(Oe=zn?cC(i,a):dC(i,a))&&(Ge=Gc(Y,"onBeforeInput"),0<Ge.length&&(Ae=new Ui("onBeforeInput","beforeinput",null,a,ee),re.push({event:Ae,listeners:Ge}),Ae.data=Oe)),nx(re,i,Y,a,ee)}iv(re,r)})}function Ol(i,r,a){return{instance:i,listener:r,currentTarget:a}}function Gc(i,r){for(var a=r+"Capture",u=[];i!==null;){var y=i,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=oi(i,a),y!=null&&u.unshift(Ol(i,y,_)),y=oi(i,r),y!=null&&u.push(Ol(i,y,_))),i.tag===3)return u;i=i.return}return[]}function ox(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function rv(i,r,a,u,y){for(var _=r._reactName,b=[];a!==null&&a!==u;){var I=a,U=I.alternate,Y=I.stateNode;if(I=I.tag,U!==null&&U===u)break;I!==5&&I!==26&&I!==27||Y===null||(U=Y,y?(Y=oi(a,_),Y!=null&&b.unshift(Ol(a,Y,U))):y||(Y=oi(a,_),Y!=null&&b.push(Ol(a,Y,U)))),a=a.return}b.length!==0&&i.push({event:r,listeners:b})}var ax=/\r\n?/g,lx=/\u0000|\uFFFD/g;function ov(i){return(typeof i=="string"?i:""+i).replace(ax,`
`).replace(lx,"")}function av(i,r){return r=ov(r),ov(i)===r}function ct(i,r,a,u,y,_){switch(a){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||Tn(i,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&Tn(i,""+u);break;case"className":Nn(i,"class",u);break;case"tabIndex":Nn(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Nn(i,a,u);break;case"style":il(i,u,_);break;case"data":if(r!=="object"){Nn(i,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||a!=="href")){i.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=Mo(""+u),i.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(r!=="input"&&ct(i,r,"name",y.name,y,null),ct(i,r,"formEncType",y.formEncType,y,null),ct(i,r,"formMethod",y.formMethod,y,null),ct(i,r,"formTarget",y.formTarget,y,null)):(ct(i,r,"encType",y.encType,y,null),ct(i,r,"method",y.method,y,null),ct(i,r,"target",y.target,y,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=Mo(""+u),i.setAttribute(a,u);break;case"onClick":u!=null&&(i.onclick=ri);break;case"onScroll":u!=null&&Fe("scroll",i);break;case"onScrollEnd":u!=null&&Fe("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}a=Mo(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""+u):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":u===!0?i.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,u):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(a,u):i.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(a):i.setAttribute(a,u);break;case"popover":Fe("beforetoggle",i),Fe("toggle",i),wo(i,"popover",u);break;case"xlinkActuate":Lt(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Lt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Lt(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Lt(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Lt(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Lt(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Lt(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Lt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Lt(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":wo(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Gu.get(a)||a,wo(i,a,u))}}function nm(i,r,a,u,y,_){switch(a){case"style":il(i,u,_);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof u=="string"?Tn(i,u):(typeof u=="number"||typeof u=="bigint")&&Tn(i,""+u);break;case"onScroll":u!=null&&Fe("scroll",i);break;case"onScrollEnd":u!=null&&Fe("scrollend",i);break;case"onClick":u!=null&&(i.onclick=ri);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),r=a.slice(2,y?a.length-7:void 0),_=i[$t]||null,_=_!=null?_[a]:null,typeof _=="function"&&i.removeEventListener(r,_,y),typeof u=="function")){typeof _!="function"&&_!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(r,u,y);break e}a in i?i[a]=u:u===!0?i.setAttribute(a,""):wo(i,a,u)}}}function an(i,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",i),Fe("load",i);var u=!1,y=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var b=a[_];if(b!=null)switch(_){case"src":u=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ct(i,r,_,b,a,null)}}y&&ct(i,r,"srcSet",a.srcSet,a,null),u&&ct(i,r,"src",a.src,a,null);return;case"input":Fe("invalid",i);var I=_=b=y=null,U=null,Y=null;for(u in a)if(a.hasOwnProperty(u)){var ee=a[u];if(ee!=null)switch(u){case"name":y=ee;break;case"type":b=ee;break;case"checked":U=ee;break;case"defaultChecked":Y=ee;break;case"value":_=ee;break;case"defaultValue":I=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,r));break;default:ct(i,r,u,ee,a,null)}}Fu(i,_,I,U,Y,b,y,!1);return;case"select":Fe("invalid",i),u=b=_=null;for(y in a)if(a.hasOwnProperty(y)&&(I=a[y],I!=null))switch(y){case"value":_=I;break;case"defaultValue":b=I;break;case"multiple":u=I;default:ct(i,r,y,I,a,null)}r=_,a=b,i.multiple=!!u,r!=null?Os(i,!!u,r,!1):a!=null&&Os(i,!!u,a,!0);return;case"textarea":Fe("invalid",i),_=y=u=null;for(b in a)if(a.hasOwnProperty(b)&&(I=a[b],I!=null))switch(b){case"value":u=I;break;case"defaultValue":y=I;break;case"children":_=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(91));break;default:ct(i,r,b,I,a,null)}qs(i,u,y,_);return;case"option":for(U in a)if(a.hasOwnProperty(U)&&(u=a[U],u!=null))switch(U){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ct(i,r,U,u,a,null)}return;case"dialog":Fe("beforetoggle",i),Fe("toggle",i),Fe("cancel",i),Fe("close",i);break;case"iframe":case"object":Fe("load",i);break;case"video":case"audio":for(u=0;u<Ll.length;u++)Fe(Ll[u],i);break;case"image":Fe("error",i),Fe("load",i);break;case"details":Fe("toggle",i);break;case"embed":case"source":case"link":Fe("error",i),Fe("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in a)if(a.hasOwnProperty(Y)&&(u=a[Y],u!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ct(i,r,Y,u,a,null)}return;default:if(No(r)){for(ee in a)a.hasOwnProperty(ee)&&(u=a[ee],u!==void 0&&nm(i,r,ee,u,a,void 0));return}}for(I in a)a.hasOwnProperty(I)&&(u=a[I],u!=null&&ct(i,r,I,u,a,null))}function ux(i,r,a,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,b=null,I=null,U=null,Y=null,ee=null;for(X in a){var re=a[X];if(a.hasOwnProperty(X)&&re!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":U=re;default:u.hasOwnProperty(X)||ct(i,r,X,null,u,re)}}for(var J in u){var X=u[J];if(re=a[J],u.hasOwnProperty(J)&&(X!=null||re!=null))switch(J){case"type":_=X;break;case"name":y=X;break;case"checked":Y=X;break;case"defaultChecked":ee=X;break;case"value":b=X;break;case"defaultValue":I=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,r));break;default:X!==re&&ct(i,r,J,X,u,re)}}Ro(i,b,I,U,Y,ee,_,y);return;case"select":X=b=I=J=null;for(_ in a)if(U=a[_],a.hasOwnProperty(_)&&U!=null)switch(_){case"value":break;case"multiple":X=U;default:u.hasOwnProperty(_)||ct(i,r,_,null,u,U)}for(y in u)if(_=u[y],U=a[y],u.hasOwnProperty(y)&&(_!=null||U!=null))switch(y){case"value":J=_;break;case"defaultValue":I=_;break;case"multiple":b=_;default:_!==U&&ct(i,r,y,_,u,U)}r=I,a=b,u=X,J!=null?Os(i,!!a,J,!1):!!u!=!!a&&(r!=null?Os(i,!!a,r,!0):Os(i,!!a,a?[]:"",!1));return;case"textarea":X=J=null;for(I in a)if(y=a[I],a.hasOwnProperty(I)&&y!=null&&!u.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:ct(i,r,I,null,u,y)}for(b in u)if(y=u[b],_=a[b],u.hasOwnProperty(b)&&(y!=null||_!=null))switch(b){case"value":J=y;break;case"defaultValue":X=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:y!==_&&ct(i,r,b,y,u,_)}Hu(i,J,X);return;case"option":for(var _e in a)if(J=a[_e],a.hasOwnProperty(_e)&&J!=null&&!u.hasOwnProperty(_e))switch(_e){case"selected":i.selected=!1;break;default:ct(i,r,_e,null,u,J)}for(U in u)if(J=u[U],X=a[U],u.hasOwnProperty(U)&&J!==X&&(J!=null||X!=null))switch(U){case"selected":i.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:ct(i,r,U,J,u,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in a)J=a[Ie],a.hasOwnProperty(Ie)&&J!=null&&!u.hasOwnProperty(Ie)&&ct(i,r,Ie,null,u,J);for(Y in u)if(J=u[Y],X=a[Y],u.hasOwnProperty(Y)&&J!==X&&(J!=null||X!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,r));break;default:ct(i,r,Y,J,u,X)}return;default:if(No(r)){for(var dt in a)J=a[dt],a.hasOwnProperty(dt)&&J!==void 0&&!u.hasOwnProperty(dt)&&nm(i,r,dt,void 0,u,J);for(ee in u)J=u[ee],X=a[ee],!u.hasOwnProperty(ee)||J===X||J===void 0&&X===void 0||nm(i,r,ee,J,u,X);return}}for(var H in a)J=a[H],a.hasOwnProperty(H)&&J!=null&&!u.hasOwnProperty(H)&&ct(i,r,H,null,u,J);for(re in u)J=u[re],X=a[re],!u.hasOwnProperty(re)||J===X||J==null&&X==null||ct(i,r,re,J,u,X)}function lv(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function cx(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var y=a[u],_=y.transferSize,b=y.initiatorType,I=y.duration;if(_&&I&&lv(b)){for(b=0,I=y.responseEnd,u+=1;u<a.length;u++){var U=a[u],Y=U.startTime;if(Y>I)break;var ee=U.transferSize,re=U.initiatorType;ee&&lv(re)&&(U=U.responseEnd,b+=ee*(U<I?1:(I-Y)/(U-Y)))}if(--u,r+=8*(_+b)/(y.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var im=null,sm=null;function jc(i){return i.nodeType===9?i:i.ownerDocument}function uv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cv(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function rm(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var om=null;function dx(){var i=window.event;return i&&i.type==="popstate"?i===om?!1:(om=i,!0):(om=null,!1)}var dv=typeof setTimeout=="function"?setTimeout:void 0,fx=typeof clearTimeout=="function"?clearTimeout:void 0,fv=typeof Promise=="function"?Promise:void 0,hx=typeof queueMicrotask=="function"?queueMicrotask:typeof fv<"u"?function(i){return fv.resolve(null).then(i).catch(mx)}:dv;function mx(i){setTimeout(function(){throw i})}function lr(i){return i==="head"}function hv(i,r){var a=r,u=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(u===0){i.removeChild(y),da(r);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")ql(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,ql(a);for(var _=a.firstChild;_;){var b=_.nextSibling,I=_.nodeName;_[xi]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=b}}else a==="body"&&ql(i.ownerDocument.body);a=y}while(a);da(r)}function mv(i,r){var a=i;i=0;do{var u=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=u}while(a)}function am(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":am(a),Io(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function px(i,r,a,u){for(;i.nodeType===1;){var y=a;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[xi])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Qn(i.nextSibling),i===null)break}return null}function gx(i,r,a){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Qn(i.nextSibling),i===null))return null;return i}function pv(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Qn(i.nextSibling),i===null))return null;return i}function lm(i){return i.data==="$?"||i.data==="$~"}function um(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function yx(i,r){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||a.readyState!=="loading")r();else{var u=function(){r(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Qn(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var cm=null;function gv(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(r===0)return Qn(i.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}i=i.nextSibling}return null}function yv(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return i;r--}else a!=="/$"&&a!=="/&"||r++}i=i.previousSibling}return null}function _v(i,r,a){switch(r=jc(a),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function ql(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);Io(i)}var Xn=new Map,vv=new Set;function Yc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ms=K.d;K.d={f:_x,r:vx,D:Tx,C:Ex,L:Sx,m:Ax,X:Cx,S:bx,M:xx};function _x(){var i=ms.f(),r=Lc();return i||r}function vx(i){var r=Bn(i);r!==null&&r.tag===5&&r.type==="form"?Uy(r):ms.r(i)}var la=typeof document>"u"?null:document;function Tv(i,r,a){var u=la;if(u&&typeof r=="string"&&r){var y=vn(r);y='link[rel="'+i+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),vv.has(y)||(vv.add(y),i={rel:i,crossOrigin:a,href:r},u.querySelector(y)===null&&(r=u.createElement("link"),an(r,"link",i),Ut(r),u.head.appendChild(r)))}}function Tx(i){ms.D(i),Tv("dns-prefetch",i,null)}function Ex(i,r){ms.C(i,r),Tv("preconnect",i,r)}function Sx(i,r,a){ms.L(i,r,a);var u=la;if(u&&i&&r){var y='link[rel="preload"][as="'+vn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+vn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+vn(a.imageSizes)+'"]')):y+='[href="'+vn(i)+'"]';var _=y;switch(r){case"style":_=ua(i);break;case"script":_=ca(i)}Xn.has(_)||(i=E({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:i,as:r},a),Xn.set(_,i),u.querySelector(y)!==null||r==="style"&&u.querySelector(Bl(_))||r==="script"&&u.querySelector(Fl(_))||(r=u.createElement("link"),an(r,"link",i),Ut(r),u.head.appendChild(r)))}}function Ax(i,r){ms.m(i,r);var a=la;if(a&&i){var u=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+vn(u)+'"][href="'+vn(i)+'"]',_=y;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=ca(i)}if(!Xn.has(_)&&(i=E({rel:"modulepreload",href:i},r),Xn.set(_,i),a.querySelector(y)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Fl(_)))return}u=a.createElement("link"),an(u,"link",i),Ut(u),a.head.appendChild(u)}}}function bx(i,r,a){ms.S(i,r,a);var u=la;if(u&&i){var y=wi(u).hoistableStyles,_=ua(i);r=r||"default";var b=y.get(_);if(!b){var I={loading:0,preload:null};if(b=u.querySelector(Bl(_)))I.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":r},a),(a=Xn.get(_))&&dm(i,a);var U=b=u.createElement("link");Ut(U),an(U,"link",i),U._p=new Promise(function(Y,ee){U.onload=Y,U.onerror=ee}),U.addEventListener("load",function(){I.loading|=1}),U.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Jc(b,r,u)}b={type:"stylesheet",instance:b,count:1,state:I},y.set(_,b)}}}function Cx(i,r){ms.X(i,r);var a=la;if(a&&i){var u=wi(a).hoistableScripts,y=ca(i),_=u.get(y);_||(_=a.querySelector(Fl(y)),_||(i=E({src:i,async:!0},r),(r=Xn.get(y))&&fm(i,r),_=a.createElement("script"),Ut(_),an(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(y,_))}}function xx(i,r){ms.M(i,r);var a=la;if(a&&i){var u=wi(a).hoistableScripts,y=ca(i),_=u.get(y);_||(_=a.querySelector(Fl(y)),_||(i=E({src:i,async:!0,type:"module"},r),(r=Xn.get(y))&&fm(i,r),_=a.createElement("script"),Ut(_),an(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(y,_))}}function Ev(i,r,a,u){var y=(y=ke.current)?Yc(y):null;if(!y)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=ua(a.href),a=wi(y).hoistableStyles,u=a.get(r),u||(u={type:"style",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=ua(a.href);var _=wi(y).hoistableStyles,b=_.get(i);if(b||(y=y.ownerDocument||y,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,b),(_=y.querySelector(Bl(i)))&&!_._p&&(b.instance=_,b.state.loading=5),Xn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Xn.set(i,a),_||Ix(y,i,a,b.state))),r&&u===null)throw Error(s(528,""));return b}if(r&&u!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ca(a),a=wi(y).hoistableScripts,u=a.get(r),u||(u={type:"script",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function ua(i){return'href="'+vn(i)+'"'}function Bl(i){return'link[rel="stylesheet"]['+i+"]"}function Sv(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function Ix(i,r,a,u){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=i.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),an(r,"link",a),Ut(r),i.head.appendChild(r))}function ca(i){return'[src="'+vn(i)+'"]'}function Fl(i){return"script[async]"+i}function Av(i,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var u=i.querySelector('style[data-href~="'+vn(a.href)+'"]');if(u)return r.instance=u,Ut(u),u;var y=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Ut(u),an(u,"style",y),Jc(u,a.precedence,i),r.instance=u;case"stylesheet":y=ua(a.href);var _=i.querySelector(Bl(y));if(_)return r.state.loading|=4,r.instance=_,Ut(_),_;u=Sv(a),(y=Xn.get(y))&&dm(u,y),_=(i.ownerDocument||i).createElement("link"),Ut(_);var b=_;return b._p=new Promise(function(I,U){b.onload=I,b.onerror=U}),an(_,"link",u),r.state.loading|=4,Jc(_,a.precedence,i),r.instance=_;case"script":return _=ca(a.src),(y=i.querySelector(Fl(_)))?(r.instance=y,Ut(y),y):(u=a,(y=Xn.get(_))&&(u=E({},a),fm(u,y)),i=i.ownerDocument||i,y=i.createElement("script"),Ut(y),an(y,"link",u),i.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,Jc(u,a.precedence,i));return r.instance}function Jc(i,r,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=u.length?u[u.length-1]:null,_=y,b=0;b<u.length;b++){var I=u[b];if(I.dataset.precedence===r)_=I;else if(_!==y)break}_?_.parentNode.insertBefore(i,_.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(i,r.firstChild))}function dm(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function fm(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Kc=null;function bv(i,r,a){if(Kc===null){var u=new Map,y=Kc=new Map;y.set(a,u)}else y=Kc,u=y.get(a),u||(u=new Map,y.set(a,u));if(u.has(i))return u;for(u.set(i,null),a=a.getElementsByTagName(i),y=0;y<a.length;y++){var _=a[y];if(!(_[xi]||_[kt]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var b=_.getAttribute(r)||"";b=i+b;var I=u.get(b);I?I.push(_):u.set(b,[_])}}return u}function Cv(i,r,a){i=i.ownerDocument||i,i.head.insertBefore(a,r==="title"?i.querySelector("head > title"):null)}function wx(i,r,a){if(a===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function xv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function Rx(i,r,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=ua(u.href),_=r.querySelector(Bl(y));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=$c.bind(i),r.then(i,i)),a.state.loading|=4,a.instance=_,Ut(_);return}_=r.ownerDocument||r,u=Sv(u),(y=Xn.get(y))&&dm(u,y),_=_.createElement("link"),Ut(_);var b=_;b._p=new Promise(function(I,U){b.onload=I,b.onerror=U}),an(_,"link",u),a.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=$c.bind(i),r.addEventListener("load",a),r.addEventListener("error",a))}}var hm=0;function Nx(i,r){return i.stylesheets&&i.count===0&&Xc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var u=setTimeout(function(){if(i.stylesheets&&Xc(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+r);0<i.imgBytes&&hm===0&&(hm=62500*cx());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Xc(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>hm?50:800)+r);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(y)}}:null}function $c(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Qc=null;function Xc(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Qc=new Map,r.forEach(Mx,i),Qc=null,$c.call(i))}function Mx(i,r){if(!(r.state.loading&4)){var a=Qc.get(i);if(a)var u=a.get(null);else{a=new Map,Qc.set(i,a);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var b=y[_];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),u=b)}u&&a.set(null,u)}y=r.instance,b=y.getAttribute("data-precedence"),_=a.get(b)||u,_===u&&a.set(null,y),a.set(b,y),this.count++,u=$c.bind(this),y.addEventListener("load",u),y.addEventListener("error",u),_?_.parentNode.insertBefore(y,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),r.state.loading|=4}}var Hl={$$typeof:$,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function Dx(i,r,a,u,y,_,b,I,U){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bi(0),this.hiddenUpdates=bi(null),this.identifierPrefix=u,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function Iv(i,r,a,u,y,_,b,I,U,Y,ee,re){return i=new Dx(i,r,a,b,U,Y,ee,re,I),r=1,_===!0&&(r|=24),_=Dn(3,null,null,r),i.current=_,_.stateNode=i,r=Yf(),r.refCount++,i.pooledCache=r,r.refCount++,_.memoizedState={element:u,isDehydrated:a,cache:r},Qf(_),i}function wv(i){return i?(i=Fo,i):Fo}function Rv(i,r,a,u,y,_){y=wv(y),u.context===null?u.context=y:u.pendingContext=y,u=Xs(r),u.payload={element:a},_=_===void 0?null:_,_!==null&&(u.callback=_),a=Ws(i,u,r),a!==null&&(Cn(a,i,r),Tl(a,i,r))}function Nv(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<r?a:r}}function mm(i,r){Nv(i,r),(i=i.alternate)&&Nv(i,r)}function Mv(i){if(i.tag===13||i.tag===31){var r=Kr(i,67108864);r!==null&&Cn(r,i,67108864),mm(i,67108864)}}function Dv(i){if(i.tag===13||i.tag===31){var r=Ln();r=Ur(r);var a=Kr(i,r);a!==null&&Cn(a,i,r),mm(i,r)}}var Wc=!0;function Px(i,r,a,u){var y=W.T;W.T=null;var _=K.p;try{K.p=2,pm(i,r,a,u)}finally{K.p=_,W.T=y}}function Vx(i,r,a,u){var y=W.T;W.T=null;var _=K.p;try{K.p=8,pm(i,r,a,u)}finally{K.p=_,W.T=y}}function pm(i,r,a,u){if(Wc){var y=gm(u);if(y===null)tm(i,r,u,Zc,a),Vv(i,u);else if(Ux(y,i,r,a,u))u.stopPropagation();else if(Vv(i,u),r&4&&-1<kx.indexOf(i)){for(;y!==null;){var _=Bn(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var b=Si(_.pendingLanes);if(b!==0){var I=_;for(I.pendingLanes|=2,I.entangledLanes|=2;b;){var U=1<<31-Rt(b);I.entanglements[1]|=U,b&=~U}Fi(_),(nt&6)===0&&(kc=ht()+500,Ul(0))}}break;case 31:case 13:I=Kr(_,2),I!==null&&Cn(I,_,2),Lc(),mm(_,2)}if(_=gm(u),_===null&&tm(i,r,u,Zc,a),_===y)break;y=_}y!==null&&u.stopPropagation()}else tm(i,r,u,null,a)}}function gm(i){return i=Fn(i),ym(i)}var Zc=null;function ym(i){if(Zc=null,i=Ii(i),i!==null){var r=l(i);if(r===null)i=null;else{var a=r.tag;if(a===13){if(i=c(r),i!==null)return i;i=null}else if(a===31){if(i=d(r),i!==null)return i;i=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Zc=i,null}function Pv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wn()){case et:return 2;case Ya:return 8;case Us:case Af:return 32;case Mu:return 268435456;default:return 32}default:return 32}}var _m=!1,ur=null,cr=null,dr=null,zl=new Map,Gl=new Map,fr=[],kx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Vv(i,r){switch(i){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":dr=null;break;case"pointerover":case"pointerout":zl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gl.delete(r.pointerId)}}function jl(i,r,a,u,y,_){return i===null||i.nativeEvent!==_?(i={blockedOn:r,domEventName:a,eventSystemFlags:u,nativeEvent:_,targetContainers:[y]},r!==null&&(r=Bn(r),r!==null&&Mv(r)),i):(i.eventSystemFlags|=u,r=i.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),i)}function Ux(i,r,a,u,y){switch(r){case"focusin":return ur=jl(ur,i,r,a,u,y),!0;case"dragenter":return cr=jl(cr,i,r,a,u,y),!0;case"mouseover":return dr=jl(dr,i,r,a,u,y),!0;case"pointerover":var _=y.pointerId;return zl.set(_,jl(zl.get(_)||null,i,r,a,u,y)),!0;case"gotpointercapture":return _=y.pointerId,Gl.set(_,jl(Gl.get(_)||null,i,r,a,u,y)),!0}return!1}function kv(i){var r=Ii(i.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=c(a),r!==null){i.blockedOn=r,ii(i.priority,function(){Dv(a)});return}}else if(r===31){if(r=d(a),r!==null){i.blockedOn=r,ii(i.priority,function(){Dv(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ed(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var a=gm(i.nativeEvent);if(a===null){a=i.nativeEvent;var u=new a.constructor(a.type,a);sl=u,a.target.dispatchEvent(u),sl=null}else return r=Bn(a),r!==null&&Mv(r),i.blockedOn=a,!1;r.shift()}return!0}function Uv(i,r,a){ed(i)&&a.delete(r)}function Lx(){_m=!1,ur!==null&&ed(ur)&&(ur=null),cr!==null&&ed(cr)&&(cr=null),dr!==null&&ed(dr)&&(dr=null),zl.forEach(Uv),Gl.forEach(Uv)}function td(i,r){i.blockedOn===r&&(i.blockedOn=null,_m||(_m=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Lx)))}var nd=null;function Lv(i){nd!==i&&(nd=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){nd===i&&(nd=null);for(var r=0;r<i.length;r+=3){var a=i[r],u=i[r+1],y=i[r+2];if(typeof u!="function"){if(ym(u||a)===null)continue;break}var _=Bn(a);_!==null&&(i.splice(r,3),r-=3,gh(_,{pending:!0,data:y,method:a.method,action:u},u,y))}}))}function da(i){function r(U){return td(U,i)}ur!==null&&td(ur,i),cr!==null&&td(cr,i),dr!==null&&td(dr,i),zl.forEach(r),Gl.forEach(r);for(var a=0;a<fr.length;a++){var u=fr[a];u.blockedOn===i&&(u.blockedOn=null)}for(;0<fr.length&&(a=fr[0],a.blockedOn===null);)kv(a),a.blockedOn===null&&fr.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var y=a[u],_=a[u+1],b=y[$t]||null;if(typeof _=="function")b||Lv(a);else if(b){var I=null;if(_&&_.hasAttribute("formAction")){if(y=_,b=_[$t]||null)I=b.formAction;else if(ym(y)!==null)continue}else I=b.action;typeof I=="function"?a[u+1]=I:(a.splice(u,3),u-=3),Lv(a)}}}function Ov(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(b){return y=b})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function vm(i){this._internalRoot=i}id.prototype.render=vm.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,u=Ln();Rv(a,u,i,r,null,null)},id.prototype.unmount=vm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;Rv(i.current,2,null,i,null,null),Lc(),r[Ci]=null}};function id(i){this._internalRoot=i}id.prototype.unstable_scheduleHydration=function(i){if(i){var r=Lu();i={blockedOn:null,target:i,priority:r};for(var a=0;a<fr.length&&r!==0&&r<fr[a].priority;a++);fr.splice(a,0,i),a===0&&kv(i)}};var qv=e.version;if(qv!=="19.2.0")throw Error(s(527,qv,"19.2.0"));K.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=h(r),i=i!==null?T(i):null,i=i===null?null:i.stateNode,i};var Ox={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sd.isDisabled&&sd.supportsFiber)try{ti=sd.inject(Ox),tn=sd}catch{}}return Jl.createRoot=function(i,r){if(!o(i))throw Error(s(299));var a=!1,u="",y=Yy,_=Jy,b=Ky;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError)),r=Iv(i,1,!1,null,null,a,u,null,y,_,b,Ov),i[Ci]=r.current,em(i),new vm(r)},Jl.hydrateRoot=function(i,r,a){if(!o(i))throw Error(s(299));var u=!1,y="",_=Yy,b=Jy,I=Ky,U=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.formState!==void 0&&(U=a.formState)),r=Iv(i,1,!0,r,a??null,u,y,U,_,b,I,Ov),r.context=wv(null),a=r.current,u=Ln(),u=Ur(u),y=Xs(u),y.callback=null,Ws(a,y,u),a=u,r.current.lanes=a,Vr(r,a),Fi(r),i[Ci]=r.current,em(i),new id(r)},Jl.version="19.2.0",Jl}var $v;function $x(){if($v)return Sm.exports;$v=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Sm.exports=Kx(),Sm.exports}var Qx=$x();const Xx=zE(Qx),rd=()=>({transactions:[],categories:[{id:"cat-1",name:"بقالة",icon:"🛒"},{id:"cat-2",name:"مطاعم",icon:"🍔"},{id:"cat-3",name:"وقود",icon:"⛽"},{id:"cat-4",name:"فواتير",icon:"🧾"},{id:"cat-9",name:"سداد فواتير",icon:"💳"},{id:"cat-5",name:"تسوق",icon:"🛍️"},{id:"cat-6",name:"إيجار",icon:"🏠"},{id:"cat-8",name:"صيدلية",icon:"💊"},{id:"cat-7",name:"أخرى",icon:"💸"}],installments:[],investments:{currentValue:0},cards:{"snb-card":{id:"snb-card",name:"SNB الأهلي",limit:26e3,dueDay:15,statementDay:25,smsSamples:["SNB","الأهلي","إئتمانية"]},"enbd-card":{id:"enbd-card",name:"ENBD الإمارات",limit:1e4,dueDay:18,statementDay:28,smsSamples:["ENBD","الإمارات","Visa card"]}},bankAccounts:{"bank-default":{id:"bank-default",name:"حساب البنك",balance:0,smsSamples:["مدى","mada","Alrajhi","الراجحي","Inma","الإنماء","بنك"]}}});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Wx,Zx;function eI(){return{geminiUrl:Wx,vertexUrl:Zx}}function tI(n,e,t,s){var o,l;if(!(n!=null&&n.baseUrl)){const c=eI();return e?(o=c.vertexUrl)!==null&&o!==void 0?o:t:(l=c.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _o{}function ve(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function g(n,e,t){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const d=c.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[d])){const p=n[d];if(Array.isArray(t))for(let h=0;h<p.length;h++){const T=p[h];g(T,e.slice(l+1),t[h])}else for(const h of p)g(h,e.slice(l+1),t)}return}else if(c.endsWith("[0]")){const d=c.slice(0,-3);d in n||(n[d]=[{}]);const p=n[d];g(p[0],e.slice(l+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const s=e[e.length-1],o=n[s];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const o=e[s];if(o.endsWith("[]")){const l=o.slice(0,-2);if(l in n){const c=n[l];return Array.isArray(c)?c.map(d=>f(d,e.slice(s+1),t)):t}else return t}else n=n[o]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ip(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nI(n){const e={},t=f(n,["operationName"]);t!=null&&g(e,["operationName"],t);const s=f(n,["resourceName"]);return s!=null&&g(e,["_url","resourceName"],s),e}function iI(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&g(e,["response"],rI(c)),e}function sI(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["response"]);return c!=null&&g(e,["response"],oI(c)),e}function rI(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>aI(c))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function oI(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>lI(c))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function aI(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],dI(t)),e}function lI(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],fI(t)),e}function uI(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function cI(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function dI(n){const e={},t=f(n,["video","uri"]);t!=null&&g(e,["uri"],t);const s=f(n,["video","encodedVideo"]);s!=null&&g(e,["videoBytes"],Ip(s));const o=f(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function fI(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],Ip(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Qv;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Qv||(Qv={}));var Xv;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Xv||(Xv={}));var pr;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(pr||(pr={}));var Wv;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Wv||(Wv={}));var Zv;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Zv||(Zv={}));var e0;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(e0||(e0={}));var t0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(t0||(t0={}));var n0;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(n0||(n0={}));var i0;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(i0||(i0={}));var s0;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(s0||(s0={}));var r0;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(r0||(r0={}));var o0;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(o0||(o0={}));var a0;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(a0||(a0={}));var l0;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY"})(l0||(l0={}));var u0;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(u0||(u0={}));var xd;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(xd||(xd={}));var c0;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(c0||(c0={}));var Ym;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Ym||(Ym={}));var d0;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(d0||(d0={}));var f0;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(f0||(f0={}));var h0;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V"})(h0||(h0={}));var m0;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(m0||(m0={}));var p0;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(p0||(p0={}));var g0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(g0||(g0={}));var y0;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(y0||(y0={}));var _0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(_0||(_0={}));var v0;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(v0||(v0={}));var T0;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(T0||(T0={}));var E0;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(E0||(E0={}));var S0;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(S0||(S0={}));var A0;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(A0||(A0={}));var b0;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(b0||(b0={}));var C0;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(C0||(C0={}));var x0;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(x0||(x0={}));var I0;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(I0||(I0={}));var w0;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(w0||(w0={}));var R0;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(R0||(R0={}));var N0;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(N0||(N0={}));var M0;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(M0||(M0={}));var D0;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(D0||(D0={}));var P0;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(P0||(P0={}));var V0;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(V0||(V0={}));var k0;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(k0||(k0={}));var U0;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(U0||(U0={}));var L0;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(L0||(L0={}));var O0;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(O0||(O0={}));var q0;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(q0||(q0={}));var B0;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(B0||(B0={}));var ga;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(ga||(ga={}));class Jm{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Kl{get text(){var e,t,s,o,l,c,d,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",T=!1;const E=[];for(const A of(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[x,k]of Object.entries(A))x!=="text"&&x!=="thought"&&(k!==null||k!==void 0)&&E.push(x);if(typeof A.text=="string"){if(typeof A.thought=="boolean"&&A.thought)continue;T=!0,h+=A.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),T?h:void 0}get data(){var e,t,s,o,l,c,d,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const T=[];for(const E of(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[A,x]of Object.entries(E))A!=="inlineData"&&(x!==null||x!==void 0)&&T.push(A);E.inlineData&&typeof E.inlineData.data=="string"&&(h+=atob(E.inlineData.data))}return T.length>0&&console.warn(`there are non-data parts ${T} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,s,o,l,c,d,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(T=>T.functionCall).map(T=>T.functionCall).filter(T=>T!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,s,o,l,c,d,p,h;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const T=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((T==null?void 0:T.length)!==0)return(h=T==null?void 0:T[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,s,o,l,c,d,p,h;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const T=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((T==null?void 0:T.length)!==0)return(h=T==null?void 0:T[0])===null||h===void 0?void 0:h.output}}class F0{}class H0{}class hI{}class mI{}class pI{}class gI{}class z0{}class G0{}class j0{}class yI{}class Id{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const s=new Id;let o;const l=e;return t?o=sI(l):o=iI(l),Object.assign(s,o),s}}class Y0{}class J0{}class K0{}class _I{}class vI{}class TI{}class $0{}class EI{get text(){var e,t,s;let o="",l=!1;const c=[];for(const d of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[p,h]of Object.entries(d))p!=="text"&&p!=="thought"&&h!==null&&c.push(p);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,o+=d.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var e,t,s;let o="";const l=[];for(const c of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[d,p]of Object.entries(c))d!=="inlineData"&&p!==null&&l.push(d);c.inlineData&&typeof c.inlineData.data=="string"&&(o+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class SI{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function We(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function GE(n,e){const t=We(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function jE(n){return Array.isArray(n)?n.map(e=>wd(e)):[wd(n)]}function wd(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function YE(n){const e=wd(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function JE(n){const e=wd(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Q0(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function KE(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Q0(e)):[Q0(n)]}function Km(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function X0(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function W0(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function hn(n){if(n==null)throw new Error("ContentUnion is required");return Km(n)?n:{role:"user",parts:KE(n)}}function wp(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=hn(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=hn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>hn(t)):[hn(e)]}function ei(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(X0(n)||W0(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[hn(n)]}const e=[],t=[],s=Km(n[0]);for(const o of n){const l=Km(o);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(o);else{if(X0(o)||W0(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return s||e.push({role:"user",parts:KE(t)}),e}function AI(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(pr).includes(t[0].toUpperCase())?t[0].toUpperCase():pr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(pr).includes(s.toUpperCase())?s.toUpperCase():pr.TYPE_UNSPECIFIED})}}function va(n){const e={},t=["items"],s=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&AI(n.type,e);for(const[c,d]of Object.entries(n))if(d!=null)if(c=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(pr).includes(d.toUpperCase())?d.toUpperCase():pr.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=va(d);else if(s.includes(c)){const p=[];for(const h of d){if(h.type=="null"){e.nullable=!0;continue}p.push(va(h))}e[c]=p}else if(o.includes(c)){const p={};for(const[h,T]of Object.entries(d))p[h]=va(T);e[c]=p}else{if(c==="additionalProperties")continue;e[c]=d}return e}function Rp(n){return va(n)}function Np(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Mp(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Ua(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=va(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=va(e.response));return n}function La(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function bI(n,e,t,s=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function Ds(n,e){if(typeof e!="string")throw new Error("name must be a string");return bI(n,e,"cachedContents")}function $E(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Rr(n){return Ip(n)}function CI(n){return n!=null&&typeof n=="object"&&"name"in n}function xI(n){return n!=null&&typeof n=="object"&&"video"in n}function II(n){return n!=null&&typeof n=="object"&&"uri"in n}function QE(n){var e;let t;if(CI(n)&&(t=n.name),!(II(n)&&(t=n.uri,t===void 0))&&!(xI(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function XE(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function WE(n){for(const e of["models","tunedModels","publisherModels"])if(wI(n,e))return n[e];return[]}function wI(n,e){return n!==null&&typeof n=="object"&&e in n}function RI(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function NI(n,e={}){const t=[],s=new Set;for(const o of n){const l=o.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const c=RI(o,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function ZE(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function MI(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function eS(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let l=!1;for(const c of o){if(typeof c!="object"||c===null)continue;const p=c.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Oa(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function tS(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DI(n){const e={},t=f(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const s=f(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>lw(c))),g(e,["inlinedResponses"],l)}const o=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["inlinedEmbedContentResponses"],l)}return e}function PI(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const s=f(n,["gcsDestination","outputUriPrefix"]);s!=null&&g(e,["gcsUri"],s);const o=f(n,["bigqueryDestination","outputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function VI(n){const e={},t=f(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const s=f(n,["gcsUri"]);s!=null&&g(e,["gcsDestination","outputUriPrefix"],s);const o=f(n,["bigqueryUri"]);if(o!=null&&g(e,["bigqueryDestination","outputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Ql(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata","displayName"]);s!=null&&g(e,["displayName"],s);const o=f(n,["metadata","state"]);o!=null&&g(e,["state"],tS(o));const l=f(n,["metadata","createTime"]);l!=null&&g(e,["createTime"],l);const c=f(n,["metadata","endTime"]);c!=null&&g(e,["endTime"],c);const d=f(n,["metadata","updateTime"]);d!=null&&g(e,["updateTime"],d);const p=f(n,["metadata","model"]);p!=null&&g(e,["model"],p);const h=f(n,["metadata","output"]);return h!=null&&g(e,["dest"],DI(eS(h))),e}function $m(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const o=f(n,["state"]);o!=null&&g(e,["state"],tS(o));const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["createTime"]);c!=null&&g(e,["createTime"],c);const d=f(n,["startTime"]);d!=null&&g(e,["startTime"],d);const p=f(n,["endTime"]);p!=null&&g(e,["endTime"],p);const h=f(n,["updateTime"]);h!=null&&g(e,["updateTime"],h);const T=f(n,["model"]);T!=null&&g(e,["model"],T);const E=f(n,["inputConfig"]);E!=null&&g(e,["src"],kI(E));const A=f(n,["outputConfig"]);return A!=null&&g(e,["dest"],PI(eS(A))),e}function kI(n){const e={},t=f(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const s=f(n,["gcsSource","uris"]);s!=null&&g(e,["gcsUri"],s);const o=f(n,["bigquerySource","inputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function UI(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&g(t,["fileName"],s);const o=f(e,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>aw(n,c))),g(t,["requests","requests"],l)}return t}function LI(n){const e={},t=f(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const s=f(n,["gcsUri"]);s!=null&&g(e,["gcsSource","uris"],s);const o=f(n,["bigqueryUri"]);if(o!=null&&g(e,["bigquerySource","inputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function OI(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&g(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function qI(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Oa(n,s)),t}function BI(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Oa(n,s)),t}function FI(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],HI(s));const o=f(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const l=f(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const c=f(n,["urlContextMetadata"]);c!=null&&g(e,["urlContextMetadata"],c);const d=f(n,["avgLogprobs"]);d!=null&&g(e,["avgLogprobs"],d);const p=f(n,["groundingMetadata"]);p!=null&&g(e,["groundingMetadata"],p);const h=f(n,["index"]);h!=null&&g(e,["index"],h);const T=f(n,["logprobsResult"]);T!=null&&g(e,["logprobsResult"],T);const E=f(n,["safetyRatings"]);if(E!=null){let A=E;Array.isArray(A)&&(A=A.map(x=>x)),g(e,["safetyRatings"],A)}return e}function HI(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["citations"],s)}return e}function nS(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>pw(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function zI(n,e){const t={},s=f(n,["displayName"]);if(e!==void 0&&s!=null&&g(e,["batch","displayName"],s),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function GI(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const o=f(n,["dest"]);return e!==void 0&&o!=null&&g(e,["outputConfig"],VI(MI(o))),t}function Z0(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],We(n,s));const o=f(e,["src"]);o!=null&&g(t,["batch","inputConfig"],UI(n,ZE(n,o)));const l=f(e,["config"]);return l!=null&&zI(l,t),t}function jI(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],We(n,s));const o=f(e,["src"]);o!=null&&g(t,["inputConfig"],LI(ZE(n,o)));const l=f(e,["config"]);return l!=null&&GI(l,t),t}function YI(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["batch","displayName"],s),t}function xm(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],We(n,s));const o=f(e,["src"]);o!=null&&g(t,["batch","inputConfig"],ZI(n,o));const l=f(e,["config"]);return l!=null&&YI(l,t),t}function JI(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Oa(n,s)),t}function KI(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Oa(n,s)),t}function $I(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);return l!=null&&g(e,["error"],l),e}function QI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);return l!=null&&g(e,["error"],l),e}function XI(n,e){const t={},s=f(e,["contents"]);if(s!=null){let l=wp(n,s);Array.isArray(l)&&(l=l.map(c=>c)),g(t,["requests[]","request","content"],l)}const o=f(e,["config"]);return o!=null&&g(t,["_self"],WI(o,t)),t}function WI(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function ZI(n,e){const t={},s=f(e,["fileName"]);s!=null&&g(t,["file_name"],s);const o=f(e,["inlinedRequests"]);return o!=null&&g(t,["requests"],XI(n,o)),t}function ew(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function tw(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],nS(hn(o)));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&g(s,["topP"],c);const d=f(e,["topK"]);d!=null&&g(s,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&g(s,["maxOutputTokens"],h);const T=f(e,["stopSequences"]);T!=null&&g(s,["stopSequences"],T);const E=f(e,["responseLogprobs"]);E!=null&&g(s,["responseLogprobs"],E);const A=f(e,["logprobs"]);A!=null&&g(s,["logprobs"],A);const x=f(e,["presencePenalty"]);x!=null&&g(s,["presencePenalty"],x);const k=f(e,["frequencyPenalty"]);k!=null&&g(s,["frequencyPenalty"],k);const q=f(e,["seed"]);q!=null&&g(s,["seed"],q);const F=f(e,["responseMimeType"]);F!=null&&g(s,["responseMimeType"],F);const Z=f(e,["responseSchema"]);Z!=null&&g(s,["responseSchema"],Rp(Z));const te=f(e,["responseJsonSchema"]);if(te!=null&&g(s,["responseJsonSchema"],te),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const $=f(e,["safetySettings"]);if(t!==void 0&&$!=null){let L=$;Array.isArray(L)&&(L=L.map(P=>gw(P))),g(t,["safetySettings"],L)}const z=f(e,["tools"]);if(t!==void 0&&z!=null){let L=La(z);Array.isArray(L)&&(L=L.map(P=>yw(Ua(P)))),g(t,["tools"],L)}const ae=f(e,["toolConfig"]);if(t!==void 0&&ae!=null&&g(t,["toolConfig"],ae),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ce=f(e,["cachedContent"]);t!==void 0&&ce!=null&&g(t,["cachedContent"],Ds(n,ce));const M=f(e,["responseModalities"]);M!=null&&g(s,["responseModalities"],M);const N=f(e,["mediaResolution"]);N!=null&&g(s,["mediaResolution"],N);const R=f(e,["speechConfig"]);if(R!=null&&g(s,["speechConfig"],Np(R)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=f(e,["thinkingConfig"]);D!=null&&g(s,["thinkingConfig"],D);const V=f(e,["imageConfig"]);return V!=null&&g(s,["imageConfig"],V),s}function nw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(h=>FI(h))),g(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const l=f(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&g(e,["responseId"],c);const d=f(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function iw(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Oa(n,s)),t}function sw(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Oa(n,s)),t}function rw(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function ow(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&g(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function aw(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["request","model"],We(n,s));const o=f(e,["contents"]);if(o!=null){let d=ei(o);Array.isArray(d)&&(d=d.map(p=>nS(p))),g(t,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&g(t,["metadata"],l);const c=f(e,["config"]);return c!=null&&g(t,["request","generationConfig"],tw(n,c,f(t,["request"],{}))),t}function lw(n){const e={},t=f(n,["response"]);t!=null&&g(e,["response"],nw(t));const s=f(n,["error"]);return s!=null&&g(e,["error"],s),e}function uw(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);if(e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function cw(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const l=f(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),t}function dw(n){const e={},t=f(n,["config"]);return t!=null&&uw(t,e),e}function fw(n){const e={},t=f(n,["config"]);return t!=null&&cw(t,e),e}function hw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Ql(c))),g(e,["batchJobs"],l)}return e}function mw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>$m(c))),g(e,["batchJobs"],l)}return e}function pw(n){const e={},t=f(n,["videoMetadata"]);t!=null&&g(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&g(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&g(e,["inlineData"],OI(o));const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],ew(l));const c=f(n,["thoughtSignature"]);c!=null&&g(e,["thoughtSignature"],c);const d=f(n,["functionCall"]);d!=null&&g(e,["functionCall"],d);const p=f(n,["codeExecutionResult"]);p!=null&&g(e,["codeExecutionResult"],p);const h=f(n,["executableCode"]);h!=null&&g(e,["executableCode"],h);const T=f(n,["functionResponse"]);T!=null&&g(e,["functionResponse"],T);const E=f(n,["text"]);return E!=null&&g(e,["text"],E),e}function gw(n){const e={};if(f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=f(n,["category"]);t!=null&&g(e,["category"],t);const s=f(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function yw(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(T=>T)),g(e,["functionDeclarations"],h)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&g(e,["googleSearch"],ow(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&g(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],rw(l));const c=f(n,["urlContext"]);c!=null&&g(e,["urlContext"],c);const d=f(n,["computerUse"]);d!=null&&g(e,["computerUse"],d);const p=f(n,["codeExecution"]);return p!=null&&g(e,["codeExecution"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var co;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(co||(co={}));class gu{constructor(e,t,s,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,o)}init(e,t,s){var o,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(o=c.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _w extends _o{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{var s,o;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(t.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(t);const d=this.createInlinedEmbedContentRequest(t),p=d.path,h=d.body,T=xm(this.apiClient,t)._query||{};return this.apiClient.request({path:p,queryParams:T,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(A=>A.json()).then(A=>Ql(A))},this.list=async(t={})=>new gu(co.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=Z0(this.apiClient,e),s=t._url,o=ve("{model}:batchGenerateContent",s),d=t.batch.inputConfig.requests,p=d.requests,h=[];for(const T of p){const E=Object.assign({},T);if(E.systemInstruction){const A=E.systemInstruction;delete E.systemInstruction;const x=E.request;x.systemInstruction=A,E.request=x}h.push(E)}return d.requests=h,delete t.config,delete t._url,delete t._query,{path:o,body:t}}createInlinedEmbedContentRequest(e){const t=xm(this.apiClient,e),s=t._url,o=ve("{model}:asyncBatchEmbedContent",s),d=t.batch.inputConfig.requests,p=d.requests,h=[];delete d.config;for(const T of p){const E=Object.assign({},T),A=E.request;for(const x in E)x!=="request"&&(A[x]=E[x],delete E[x]);h.push(E)}return d.requests=h,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},o=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${o}`),s.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${o}`;else if(c)s.dest=`${c}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=jI(this.apiClient,e);return d=ve("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>$m(T))}else{const h=Z0(this.apiClient,e);return d=ve("{model}:batchGenerateContent",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>Ql(T))}}async createEmbeddingsInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=xm(this.apiClient,e);return l=ve("{model}:asyncBatchEmbedContent",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>Ql(p))}}async get(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=sw(this.apiClient,e);return d=ve("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>$m(T))}else{const h=iw(this.apiClient,e);return d=ve("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>Ql(T))}}async cancel(e){var t,s,o,l;let c="",d={};if(this.apiClient.isVertexAI()){const p=BI(this.apiClient,e);c=ve("batchPredictionJobs/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=qI(this.apiClient,e);c=ve("batches/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=fw(e);return d=ve("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const E=mw(T),A=new $0;return Object.assign(A,E),A})}else{const h=dw(e);return d=ve("batches",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const E=hw(T),A=new $0;return Object.assign(A,E),A})}}async delete(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=KI(this.apiClient,e);return d=ve("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>QI(T))}else{const h=JI(this.apiClient,e);return d=ve("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>$I(T))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vw(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&g(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function eT(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>Bw(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function Tw(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const l=f(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let T=ei(c);Array.isArray(T)&&(T=T.map(E=>eT(E))),g(e,["contents"],T)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],eT(hn(d)));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let T=p;Array.isArray(T)&&(T=T.map(E=>Fw(E))),g(e,["tools"],T)}const h=f(n,["toolConfig"]);if(e!==void 0&&h!=null&&g(e,["toolConfig"],h),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function Ew(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const l=f(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let E=ei(c);Array.isArray(E)&&(E=E.map(A=>A)),g(e,["contents"],E)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],hn(d));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let E=p;Array.isArray(E)&&(E=E.map(A=>Hw(A))),g(e,["tools"],E)}const h=f(n,["toolConfig"]);e!==void 0&&h!=null&&g(e,["toolConfig"],h);const T=f(n,["kmsKeyName"]);return e!==void 0&&T!=null&&g(e,["encryption_spec","kmsKeyName"],T),t}function Sw(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],GE(n,s));const o=f(e,["config"]);return o!=null&&Tw(o,t),t}function Aw(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],GE(n,s));const o=f(e,["config"]);return o!=null&&Ew(o,t),t}function bw(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ds(n,s)),t}function Cw(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ds(n,s)),t}function xw(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function Iw(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function ww(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Rw(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&g(e,["response"],c);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function Nw(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ds(n,s)),t}function Mw(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ds(n,s)),t}function Dw(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function Pw(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&g(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Vw(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function kw(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function Uw(n){const e={},t=f(n,["config"]);return t!=null&&Vw(t,e),e}function Lw(n){const e={},t=f(n,["config"]);return t!=null&&kw(t,e),e}function Ow(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["cachedContents"],l)}return e}function qw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["cachedContents"],l)}return e}function Bw(n){const e={},t=f(n,["videoMetadata"]);t!=null&&g(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&g(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&g(e,["inlineData"],vw(o));const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],ww(l));const c=f(n,["thoughtSignature"]);c!=null&&g(e,["thoughtSignature"],c);const d=f(n,["functionCall"]);d!=null&&g(e,["functionCall"],d);const p=f(n,["codeExecutionResult"]);p!=null&&g(e,["codeExecutionResult"],p);const h=f(n,["executableCode"]);h!=null&&g(e,["executableCode"],h);const T=f(n,["functionResponse"]);T!=null&&g(e,["functionResponse"],T);const E=f(n,["text"]);return E!=null&&g(e,["text"],E),e}function Fw(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(T=>T)),g(e,["functionDeclarations"],h)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&g(e,["googleSearch"],Pw(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&g(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],Dw(l));const c=f(n,["urlContext"]);c!=null&&g(e,["urlContext"],c);const d=f(n,["computerUse"]);d!=null&&g(e,["computerUse"],d);const p=f(n,["codeExecution"]);return p!=null&&g(e,["codeExecution"],p),e}function Hw(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>Rw(A))),g(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const o=f(n,["googleSearch"]);o!=null&&g(e,["googleSearch"],o);const l=f(n,["googleSearchRetrieval"]);l!=null&&g(e,["googleSearchRetrieval"],l);const c=f(n,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const p=f(n,["urlContext"]);p!=null&&g(e,["urlContext"],p);const h=f(n,["computerUse"]);h!=null&&g(e,["computerUse"],h);const T=f(n,["codeExecution"]);return T!=null&&g(e,["codeExecution"],T),e}function zw(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function Gw(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function jw(n,e){const t={},s=f(e,["name"]);s!=null&&g(t,["_url","name"],Ds(n,s));const o=f(e,["config"]);return o!=null&&zw(o,t),t}function Yw(n,e){const t={},s=f(e,["name"]);s!=null&&g(t,["_url","name"],Ds(n,s));const o=f(e,["config"]);return o!=null&&Gw(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jw extends _o{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new gu(co.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=Aw(this.apiClient,e);return d=ve("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>T)}else{const h=Sw(this.apiClient,e);return d=ve("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>T)}}async get(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=Mw(this.apiClient,e);return d=ve("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>T)}else{const h=Nw(this.apiClient,e);return d=ve("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>T)}}async delete(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=Cw(this.apiClient,e);return d=ve("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const E=Iw(T),A=new J0;return Object.assign(A,E),A})}else{const h=bw(this.apiClient,e);return d=ve("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const E=xw(T),A=new J0;return Object.assign(A,E),A})}}async update(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=Yw(this.apiClient,e);return d=ve("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>T)}else{const h=jw(this.apiClient,e);return d=ve("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>T)}}async listInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=Lw(e);return d=ve("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const E=qw(T),A=new K0;return Object.assign(A,E),A})}else{const h=Uw(e);return d=ve("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const E=Ow(T),A=new K0;return Object.assign(A,E),A})}}}function tT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function yt(n){return this instanceof yt?(this.v=n,this):new yt(n)}function Ta(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(x){return function(k){return Promise.resolve(k).then(x,E)}}function d(x,k){s[x]&&(o[x]=function(q){return new Promise(function(F,Z){l.push([x,q,F,Z])>1||p(x,q)})},k&&(o[x]=k(o[x])))}function p(x,k){try{h(s[x](k))}catch(q){A(l[0][3],q)}}function h(x){x.value instanceof yt?Promise.resolve(x.value.v).then(T,E):A(l[0][2],x)}function T(x){p("next",x)}function E(x){p("throw",x)}function A(x,k){x(k),l.shift(),l.length&&p(l[0][0],l[0][1])}}function nu(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof tT=="function"?tT(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(c){return new Promise(function(d,p){c=n[l](c),o(d,p,c.done,c.value)})}}function o(l,c,d,p){Promise.resolve(p).then(function(h){l({value:h,done:d})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kw(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:iS(t)}function iS(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function $w(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function nT(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const o=[];let l=!0;for(;s<t&&n[s].role==="model";)o.push(n[s]),l&&!iS(n[s])&&(l=!1),s++;l?e.push(...o):e.pop()}return e}class Qw{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Xw(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Xw{constructor(e,t,s,o={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),$w(l)}async sendMessage(e){var t;await this.sendPromise;const s=hn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,c,d;const p=await o,h=(c=(l=p.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,T=p.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let A=[];T!=null&&(A=(d=T.slice(E))!==null&&d!==void 0?d:[]);const x=h?[h]:[];this.recordHistory(s,x,A)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const s=hn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?nT(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,o;return Ta(this,arguments,function*(){var c,d,p,h;const T=[];try{for(var E=!0,A=nu(e),x;x=yield yt(A.next()),c=x.done,!c;E=!0){h=x.value,E=!1;const k=h;if(Kw(k)){const q=(o=(s=k.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content;q!==void 0&&T.push(q)}yield yield yt(k)}}catch(k){d={error:k}}finally{try{!E&&!c&&(p=A.return)&&(yield yt(p.call(A)))}finally{if(d)throw d.error}}this.recordHistory(t,T)})}recordHistory(e,t,s){let o=[];t.length>0&&t.every(l=>l.role!==void 0)?o=t:o.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...nT(s)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qd extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Qd.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ww(n){const e={},t=f(n,["file"]);return t!=null&&g(e,["file"],t),e}function Zw(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function eR(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],QE(t)),e}function tR(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function nR(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],QE(t)),e}function iR(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function sR(n){const e={},t=f(n,["config"]);return t!=null&&iR(t,e),e}function rR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oR extends _o{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new gu(co.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=sR(e);return l=ve("files",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(h=>{const T=h;return T.sdkHttpResponse={headers:p.headers},T})),o.then(p=>{const h=rR(p),T=new _I;return Object.assign(T,h),T})}}async createInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Ww(e);return l=ve("upload/v1beta/files",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const h=Zw(p),T=new vI;return Object.assign(T,h),T})}}async get(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=nR(e);return l=ve("files/{file}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=eR(e);return l=ve("files/{file}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(h=>{const T=h;return T.sdkHttpResponse={headers:p.headers},T})),o.then(p=>{const h=tR(p),T=new TI;return Object.assign(T,h),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pd(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&g(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function aR(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>SR(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function lR(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function uR(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&g(e,["response"],c);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function cR(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=f(n,["audioTimestamp"]);s!=null&&g(e,["audioTimestamp"],s);const o=f(n,["candidateCount"]);o!=null&&g(e,["candidateCount"],o);const l=f(n,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const c=f(n,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const d=f(n,["logprobs"]);d!=null&&g(e,["logprobs"],d);const p=f(n,["maxOutputTokens"]);p!=null&&g(e,["maxOutputTokens"],p);const h=f(n,["mediaResolution"]);h!=null&&g(e,["mediaResolution"],h);const T=f(n,["presencePenalty"]);T!=null&&g(e,["presencePenalty"],T);const E=f(n,["responseJsonSchema"]);E!=null&&g(e,["responseJsonSchema"],E);const A=f(n,["responseLogprobs"]);A!=null&&g(e,["responseLogprobs"],A);const x=f(n,["responseMimeType"]);x!=null&&g(e,["responseMimeType"],x);const k=f(n,["responseModalities"]);k!=null&&g(e,["responseModalities"],k);const q=f(n,["responseSchema"]);q!=null&&g(e,["responseSchema"],q);const F=f(n,["routingConfig"]);F!=null&&g(e,["routingConfig"],F);const Z=f(n,["seed"]);Z!=null&&g(e,["seed"],Z);const te=f(n,["speechConfig"]);te!=null&&g(e,["speechConfig"],sS(te));const $=f(n,["stopSequences"]);$!=null&&g(e,["stopSequences"],$);const z=f(n,["temperature"]);z!=null&&g(e,["temperature"],z);const ae=f(n,["thinkingConfig"]);ae!=null&&g(e,["thinkingConfig"],ae);const ce=f(n,["topK"]);ce!=null&&g(e,["topK"],ce);const M=f(n,["topP"]);return M!=null&&g(e,["topP"],M),e}function dR(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function fR(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&g(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function hR(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const T=f(n,["seed"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","seed"],T);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],Mp(E));const A=f(n,["thinkingConfig"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","thinkingConfig"],A);const x=f(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],x);const k=f(n,["systemInstruction"]);e!==void 0&&k!=null&&g(e,["setup","systemInstruction"],aR(hn(k)));const q=f(n,["tools"]);if(e!==void 0&&q!=null){let ce=La(q);Array.isArray(ce)&&(ce=ce.map(M=>bR(Ua(M)))),g(e,["setup","tools"],ce)}const F=f(n,["sessionResumption"]);e!==void 0&&F!=null&&g(e,["setup","sessionResumption"],AR(F));const Z=f(n,["inputAudioTranscription"]);e!==void 0&&Z!=null&&g(e,["setup","inputAudioTranscription"],Z);const te=f(n,["outputAudioTranscription"]);e!==void 0&&te!=null&&g(e,["setup","outputAudioTranscription"],te);const $=f(n,["realtimeInputConfig"]);e!==void 0&&$!=null&&g(e,["setup","realtimeInputConfig"],$);const z=f(n,["contextWindowCompression"]);e!==void 0&&z!=null&&g(e,["setup","contextWindowCompression"],z);const ae=f(n,["proactivity"]);return e!==void 0&&ae!=null&&g(e,["setup","proactivity"],ae),t}function mR(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],cR(s));const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const T=f(n,["seed"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","seed"],T);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],sS(Mp(E)));const A=f(n,["thinkingConfig"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","thinkingConfig"],A);const x=f(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],x);const k=f(n,["systemInstruction"]);e!==void 0&&k!=null&&g(e,["setup","systemInstruction"],hn(k));const q=f(n,["tools"]);if(e!==void 0&&q!=null){let ce=La(q);Array.isArray(ce)&&(ce=ce.map(M=>CR(Ua(M)))),g(e,["setup","tools"],ce)}const F=f(n,["sessionResumption"]);e!==void 0&&F!=null&&g(e,["setup","sessionResumption"],F);const Z=f(n,["inputAudioTranscription"]);e!==void 0&&Z!=null&&g(e,["setup","inputAudioTranscription"],Z);const te=f(n,["outputAudioTranscription"]);e!==void 0&&te!=null&&g(e,["setup","outputAudioTranscription"],te);const $=f(n,["realtimeInputConfig"]);e!==void 0&&$!=null&&g(e,["setup","realtimeInputConfig"],$);const z=f(n,["contextWindowCompression"]);e!==void 0&&z!=null&&g(e,["setup","contextWindowCompression"],z);const ae=f(n,["proactivity"]);return e!==void 0&&ae!=null&&g(e,["setup","proactivity"],ae),t}function pR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],We(n,s));const o=f(e,["config"]);return o!=null&&g(t,["config"],hR(o,t)),t}function gR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],We(n,s));const o=f(e,["config"]);return o!=null&&g(t,["config"],mR(o,t)),t}function yR(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function _R(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["weightedPrompts"],s)}return e}function vR(n){const e={},t=f(n,["media"]);if(t!=null){let h=jE(t);Array.isArray(h)&&(h=h.map(T=>pd(T))),g(e,["mediaChunks"],h)}const s=f(n,["audio"]);s!=null&&g(e,["audio"],pd(JE(s)));const o=f(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const l=f(n,["video"]);l!=null&&g(e,["video"],pd(YE(l)));const c=f(n,["text"]);c!=null&&g(e,["text"],c);const d=f(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function TR(n){const e={},t=f(n,["media"]);if(t!=null){let h=jE(t);Array.isArray(h)&&(h=h.map(T=>T)),g(e,["mediaChunks"],h)}const s=f(n,["audio"]);s!=null&&g(e,["audio"],JE(s));const o=f(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const l=f(n,["video"]);l!=null&&g(e,["video"],YE(l));const c=f(n,["text"]);c!=null&&g(e,["text"],c);const d=f(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function ER(n){const e={},t=f(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const s=f(n,["serverContent"]);s!=null&&g(e,["serverContent"],s);const o=f(n,["toolCall"]);o!=null&&g(e,["toolCall"],o);const l=f(n,["toolCallCancellation"]);l!=null&&g(e,["toolCallCancellation"],l);const c=f(n,["usageMetadata"]);c!=null&&g(e,["usageMetadata"],xR(c));const d=f(n,["goAway"]);d!=null&&g(e,["goAway"],d);const p=f(n,["sessionResumptionUpdate"]);return p!=null&&g(e,["sessionResumptionUpdate"],p),e}function SR(n){const e={},t=f(n,["videoMetadata"]);t!=null&&g(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&g(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&g(e,["inlineData"],pd(o));const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],lR(l));const c=f(n,["thoughtSignature"]);c!=null&&g(e,["thoughtSignature"],c);const d=f(n,["functionCall"]);d!=null&&g(e,["functionCall"],d);const p=f(n,["codeExecutionResult"]);p!=null&&g(e,["codeExecutionResult"],p);const h=f(n,["executableCode"]);h!=null&&g(e,["executableCode"],h);const T=f(n,["functionResponse"]);T!=null&&g(e,["functionResponse"],T);const E=f(n,["text"]);return E!=null&&g(e,["text"],E),e}function AR(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function sS(n){const e={},t=f(n,["voiceConfig"]);if(t!=null&&g(e,["voiceConfig"],t),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=f(n,["languageCode"]);return s!=null&&g(e,["languageCode"],s),e}function bR(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(T=>T)),g(e,["functionDeclarations"],h)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&g(e,["googleSearch"],fR(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&g(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],dR(l));const c=f(n,["urlContext"]);c!=null&&g(e,["urlContext"],c);const d=f(n,["computerUse"]);d!=null&&g(e,["computerUse"],d);const p=f(n,["codeExecution"]);return p!=null&&g(e,["codeExecution"],p),e}function CR(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>uR(A))),g(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const o=f(n,["googleSearch"]);o!=null&&g(e,["googleSearch"],o);const l=f(n,["googleSearchRetrieval"]);l!=null&&g(e,["googleSearchRetrieval"],l);const c=f(n,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const p=f(n,["urlContext"]);p!=null&&g(e,["urlContext"],p);const h=f(n,["computerUse"]);h!=null&&g(e,["computerUse"],h);const T=f(n,["codeExecution"]);return T!=null&&g(e,["codeExecution"],T),e}function xR(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const s=f(n,["cachedContentTokenCount"]);s!=null&&g(e,["cachedContentTokenCount"],s);const o=f(n,["candidatesTokenCount"]);o!=null&&g(e,["responseTokenCount"],o);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&g(e,["toolUsePromptTokenCount"],l);const c=f(n,["thoughtsTokenCount"]);c!=null&&g(e,["thoughtsTokenCount"],c);const d=f(n,["totalTokenCount"]);d!=null&&g(e,["totalTokenCount"],d);const p=f(n,["promptTokensDetails"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(k=>k)),g(e,["promptTokensDetails"],x)}const h=f(n,["cacheTokensDetails"]);if(h!=null){let x=h;Array.isArray(x)&&(x=x.map(k=>k)),g(e,["cacheTokensDetails"],x)}const T=f(n,["candidatesTokensDetails"]);if(T!=null){let x=T;Array.isArray(x)&&(x=x.map(k=>k)),g(e,["responseTokensDetails"],x)}const E=f(n,["toolUsePromptTokensDetails"]);if(E!=null){let x=E;Array.isArray(x)&&(x=x.map(k=>k)),g(e,["toolUsePromptTokensDetails"],x)}const A=f(n,["trafficType"]);return A!=null&&g(e,["trafficType"],A),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IR(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&g(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function wR(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],RR(s));const o=f(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const l=f(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const c=f(n,["urlContextMetadata"]);c!=null&&g(e,["urlContextMetadata"],c);const d=f(n,["avgLogprobs"]);d!=null&&g(e,["avgLogprobs"],d);const p=f(n,["groundingMetadata"]);p!=null&&g(e,["groundingMetadata"],p);const h=f(n,["index"]);h!=null&&g(e,["index"],h);const T=f(n,["logprobsResult"]);T!=null&&g(e,["logprobsResult"],T);const E=f(n,["safetyRatings"]);if(E!=null){let A=E;Array.isArray(A)&&(A=A.map(x=>x)),g(e,["safetyRatings"],A)}return e}function RR(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["citations"],s)}return e}function NR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],We(n,s));const o=f(e,["contents"]);if(o!=null){let l=ei(o);Array.isArray(l)&&(l=l.map(c=>c)),g(t,["contents"],l)}return t}function MR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["tokensInfo"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),g(e,["tokensInfo"],o)}return e}function DR(n){const e={},t=f(n,["values"]);t!=null&&g(e,["values"],t);const s=f(n,["statistics"]);return s!=null&&g(e,["statistics"],PR(s)),e}function PR(n){const e={},t=f(n,["truncated"]);t!=null&&g(e,["truncated"],t);const s=f(n,["token_count"]);return s!=null&&g(e,["tokenCount"],s),e}function Xd(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>ON(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function VR(n){const e={},t=f(n,["controlType"]);t!=null&&g(e,["controlType"],t);const s=f(n,["enableControlImageComputation"]);return s!=null&&g(e,["computeControl"],s),e}function kR(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function UR(n,e){const t={},s=f(n,["systemInstruction"]);e!==void 0&&s!=null&&g(e,["systemInstruction"],hn(s));const o=f(n,["tools"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>uS(d))),g(e,["tools"],c)}const l=f(n,["generationConfig"]);return e!==void 0&&l!=null&&g(e,["generationConfig"],CN(l)),t}function LR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],We(n,s));const o=f(e,["contents"]);if(o!=null){let c=ei(o);Array.isArray(c)&&(c=c.map(d=>Xd(d))),g(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&kR(l),t}function OR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],We(n,s));const o=f(e,["contents"]);if(o!=null){let c=ei(o);Array.isArray(c)&&(c=c.map(d=>d)),g(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&UR(l,t),t}function qR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);s!=null&&g(e,["totalTokens"],s);const o=f(n,["cachedContentTokenCount"]);return o!=null&&g(e,["cachedContentTokenCount"],o),e}function BR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);return s!=null&&g(e,["totalTokens"],s),e}function FR(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],We(n,s)),t}function HR(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],We(n,s)),t}function zR(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function GR(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function jR(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&g(e,["parameters","aspectRatio"],c);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const h=f(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&g(e,["parameters","safetySetting"],h);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&g(e,["parameters","personGeneration"],T);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const A=f(n,["includeRaiReason"]);e!==void 0&&A!=null&&g(e,["parameters","includeRaiReason"],A);const x=f(n,["language"]);e!==void 0&&x!=null&&g(e,["parameters","language"],x);const k=f(n,["outputMimeType"]);e!==void 0&&k!=null&&g(e,["parameters","outputOptions","mimeType"],k);const q=f(n,["outputCompressionQuality"]);e!==void 0&&q!=null&&g(e,["parameters","outputOptions","compressionQuality"],q);const F=f(n,["addWatermark"]);e!==void 0&&F!=null&&g(e,["parameters","addWatermark"],F);const Z=f(n,["labels"]);e!==void 0&&Z!=null&&g(e,["labels"],Z);const te=f(n,["editMode"]);e!==void 0&&te!=null&&g(e,["parameters","editMode"],te);const $=f(n,["baseSteps"]);return e!==void 0&&$!=null&&g(e,["parameters","editConfig","baseSteps"],$),t}function YR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],We(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>GN(p))),g(t,["instances[0]","referenceImages"],d)}const c=f(e,["config"]);return c!=null&&jR(c,t),t}function JR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Wd(l))),g(e,["generatedImages"],o)}return e}function KR(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function $R(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["instances[]","task_type"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["instances[]","title"],o);const l=f(n,["outputDimensionality"]);e!==void 0&&l!=null&&g(e,["parameters","outputDimensionality"],l);const c=f(n,["mimeType"]);e!==void 0&&c!=null&&g(e,["instances[]","mimeType"],c);const d=f(n,["autoTruncate"]);return e!==void 0&&d!=null&&g(e,["parameters","autoTruncate"],d),t}function QR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],We(n,s));const o=f(e,["contents"]);if(o!=null){let d=wp(n,o);Array.isArray(d)&&(d=d.map(p=>p)),g(t,["requests[]","content"],d)}const l=f(e,["config"]);l!=null&&KR(l,t);const c=f(e,["model"]);return c!==void 0&&g(t,["requests[]","model"],We(n,c)),t}function XR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],We(n,s));const o=f(e,["contents"]);if(o!=null){let c=wp(n,o);Array.isArray(c)&&(c=c.map(d=>d)),g(t,["instances[]","content"],c)}const l=f(e,["config"]);return l!=null&&$R(l,t),t}function WR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["embeddings"],l)}const o=f(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function ZR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>DR(c))),g(e,["embeddings"],l)}const o=f(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function eN(n){const e={},t=f(n,["endpoint"]);t!=null&&g(e,["name"],t);const s=f(n,["deployedModelId"]);return s!=null&&g(e,["deployedModelId"],s),e}function tN(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function nN(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&g(e,["response"],c);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function iN(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],Xd(hn(o)));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&g(s,["topP"],c);const d=f(e,["topK"]);d!=null&&g(s,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&g(s,["maxOutputTokens"],h);const T=f(e,["stopSequences"]);T!=null&&g(s,["stopSequences"],T);const E=f(e,["responseLogprobs"]);E!=null&&g(s,["responseLogprobs"],E);const A=f(e,["logprobs"]);A!=null&&g(s,["logprobs"],A);const x=f(e,["presencePenalty"]);x!=null&&g(s,["presencePenalty"],x);const k=f(e,["frequencyPenalty"]);k!=null&&g(s,["frequencyPenalty"],k);const q=f(e,["seed"]);q!=null&&g(s,["seed"],q);const F=f(e,["responseMimeType"]);F!=null&&g(s,["responseMimeType"],F);const Z=f(e,["responseSchema"]);Z!=null&&g(s,["responseSchema"],Rp(Z));const te=f(e,["responseJsonSchema"]);if(te!=null&&g(s,["responseJsonSchema"],te),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const $=f(e,["safetySettings"]);if(t!==void 0&&$!=null){let L=$;Array.isArray(L)&&(L=L.map(P=>jN(P))),g(t,["safetySettings"],L)}const z=f(e,["tools"]);if(t!==void 0&&z!=null){let L=La(z);Array.isArray(L)&&(L=L.map(P=>XN(Ua(P)))),g(t,["tools"],L)}const ae=f(e,["toolConfig"]);if(t!==void 0&&ae!=null&&g(t,["toolConfig"],ae),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ce=f(e,["cachedContent"]);t!==void 0&&ce!=null&&g(t,["cachedContent"],Ds(n,ce));const M=f(e,["responseModalities"]);M!=null&&g(s,["responseModalities"],M);const N=f(e,["mediaResolution"]);N!=null&&g(s,["mediaResolution"],N);const R=f(e,["speechConfig"]);if(R!=null&&g(s,["speechConfig"],Np(R)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=f(e,["thinkingConfig"]);D!=null&&g(s,["thinkingConfig"],D);const V=f(e,["imageConfig"]);return V!=null&&g(s,["imageConfig"],V),s}function sN(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],hn(o));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&g(s,["topP"],c);const d=f(e,["topK"]);d!=null&&g(s,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&g(s,["maxOutputTokens"],h);const T=f(e,["stopSequences"]);T!=null&&g(s,["stopSequences"],T);const E=f(e,["responseLogprobs"]);E!=null&&g(s,["responseLogprobs"],E);const A=f(e,["logprobs"]);A!=null&&g(s,["logprobs"],A);const x=f(e,["presencePenalty"]);x!=null&&g(s,["presencePenalty"],x);const k=f(e,["frequencyPenalty"]);k!=null&&g(s,["frequencyPenalty"],k);const q=f(e,["seed"]);q!=null&&g(s,["seed"],q);const F=f(e,["responseMimeType"]);F!=null&&g(s,["responseMimeType"],F);const Z=f(e,["responseSchema"]);Z!=null&&g(s,["responseSchema"],Rp(Z));const te=f(e,["responseJsonSchema"]);te!=null&&g(s,["responseJsonSchema"],te);const $=f(e,["routingConfig"]);$!=null&&g(s,["routingConfig"],$);const z=f(e,["modelSelectionConfig"]);z!=null&&g(s,["modelConfig"],z);const ae=f(e,["safetySettings"]);if(t!==void 0&&ae!=null){let W=ae;Array.isArray(W)&&(W=W.map(K=>K)),g(t,["safetySettings"],W)}const ce=f(e,["tools"]);if(t!==void 0&&ce!=null){let W=La(ce);Array.isArray(W)&&(W=W.map(K=>uS(Ua(K)))),g(t,["tools"],W)}const M=f(e,["toolConfig"]);t!==void 0&&M!=null&&g(t,["toolConfig"],M);const N=f(e,["labels"]);t!==void 0&&N!=null&&g(t,["labels"],N);const R=f(e,["cachedContent"]);t!==void 0&&R!=null&&g(t,["cachedContent"],Ds(n,R));const D=f(e,["responseModalities"]);D!=null&&g(s,["responseModalities"],D);const V=f(e,["mediaResolution"]);V!=null&&g(s,["mediaResolution"],V);const L=f(e,["speechConfig"]);L!=null&&g(s,["speechConfig"],lS(Np(L)));const P=f(e,["audioTimestamp"]);P!=null&&g(s,["audioTimestamp"],P);const qe=f(e,["thinkingConfig"]);qe!=null&&g(s,["thinkingConfig"],qe);const it=f(e,["imageConfig"]);return it!=null&&g(s,["imageConfig"],it),s}function iT(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],We(n,s));const o=f(e,["contents"]);if(o!=null){let c=ei(o);Array.isArray(c)&&(c=c.map(d=>Xd(d))),g(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&g(t,["generationConfig"],iN(n,l,t)),t}function sT(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],We(n,s));const o=f(e,["contents"]);if(o!=null){let c=ei(o);Array.isArray(c)&&(c=c.map(d=>d)),g(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&g(t,["generationConfig"],sN(n,l,t)),t}function rT(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(h=>wR(h))),g(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const l=f(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&g(e,["responseId"],c);const d=f(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function oT(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(T=>T)),g(e,["candidates"],h)}const o=f(n,["createTime"]);o!=null&&g(e,["createTime"],o);const l=f(n,["modelVersion"]);l!=null&&g(e,["modelVersion"],l);const c=f(n,["promptFeedback"]);c!=null&&g(e,["promptFeedback"],c);const d=f(n,["responseId"]);d!=null&&g(e,["responseId"],d);const p=f(n,["usageMetadata"]);return p!=null&&g(e,["usageMetadata"],p),e}function rN(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const o=f(n,["aspectRatio"]);e!==void 0&&o!=null&&g(e,["parameters","aspectRatio"],o);const l=f(n,["guidanceScale"]);if(e!==void 0&&l!=null&&g(e,["parameters","guidanceScale"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&g(e,["parameters","safetySetting"],c);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d);const p=f(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&g(e,["parameters","includeSafetyAttributes"],p);const h=f(n,["includeRaiReason"]);e!==void 0&&h!=null&&g(e,["parameters","includeRaiReason"],h);const T=f(n,["language"]);e!==void 0&&T!=null&&g(e,["parameters","language"],T);const E=f(n,["outputMimeType"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","mimeType"],E);const A=f(n,["outputCompressionQuality"]);if(e!==void 0&&A!=null&&g(e,["parameters","outputOptions","compressionQuality"],A),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=f(n,["imageSize"]);if(e!==void 0&&x!=null&&g(e,["parameters","sampleImageSize"],x),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function oN(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&g(e,["parameters","aspectRatio"],c);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const h=f(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&g(e,["parameters","safetySetting"],h);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&g(e,["parameters","personGeneration"],T);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const A=f(n,["includeRaiReason"]);e!==void 0&&A!=null&&g(e,["parameters","includeRaiReason"],A);const x=f(n,["language"]);e!==void 0&&x!=null&&g(e,["parameters","language"],x);const k=f(n,["outputMimeType"]);e!==void 0&&k!=null&&g(e,["parameters","outputOptions","mimeType"],k);const q=f(n,["outputCompressionQuality"]);e!==void 0&&q!=null&&g(e,["parameters","outputOptions","compressionQuality"],q);const F=f(n,["addWatermark"]);e!==void 0&&F!=null&&g(e,["parameters","addWatermark"],F);const Z=f(n,["labels"]);e!==void 0&&Z!=null&&g(e,["labels"],Z);const te=f(n,["imageSize"]);e!==void 0&&te!=null&&g(e,["parameters","sampleImageSize"],te);const $=f(n,["enhancePrompt"]);return e!==void 0&&$!=null&&g(e,["parameters","enhancePrompt"],$),t}function aN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],We(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["config"]);return l!=null&&rN(l,t),t}function lN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],We(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["config"]);return l!=null&&oN(l,t),t}function uN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>EN(c))),g(e,["generatedImages"],l)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],oS(o)),e}function cN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Wd(c))),g(e,["generatedImages"],l)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],aS(o)),e}function dN(n,e){const t={},s=f(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=f(n,["durationSeconds"]);if(e!==void 0&&o!=null&&g(e,["parameters","durationSeconds"],o),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const c=f(n,["resolution"]);e!==void 0&&c!=null&&g(e,["parameters","resolution"],c);const d=f(n,["personGeneration"]);if(e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=f(n,["negativePrompt"]);e!==void 0&&p!=null&&g(e,["parameters","negativePrompt"],p);const h=f(n,["enhancePrompt"]);if(e!==void 0&&h!=null&&g(e,["parameters","enhancePrompt"],h),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const T=f(n,["lastFrame"]);e!==void 0&&T!=null&&g(e,["instances[0]","lastFrame"],Zd(T));const E=f(n,["referenceImages"]);if(e!==void 0&&E!=null){let A=E;Array.isArray(A)&&(A=A.map(x=>c1(x))),g(e,["instances[0]","referenceImages"],A)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function fN(n,e){const t={},s=f(n,["numberOfVideos"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&g(e,["parameters","storageUri"],o);const l=f(n,["fps"]);e!==void 0&&l!=null&&g(e,["parameters","fps"],l);const c=f(n,["durationSeconds"]);e!==void 0&&c!=null&&g(e,["parameters","durationSeconds"],c);const d=f(n,["seed"]);e!==void 0&&d!=null&&g(e,["parameters","seed"],d);const p=f(n,["aspectRatio"]);e!==void 0&&p!=null&&g(e,["parameters","aspectRatio"],p);const h=f(n,["resolution"]);e!==void 0&&h!=null&&g(e,["parameters","resolution"],h);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&g(e,["parameters","personGeneration"],T);const E=f(n,["pubsubTopic"]);e!==void 0&&E!=null&&g(e,["parameters","pubsubTopic"],E);const A=f(n,["negativePrompt"]);e!==void 0&&A!=null&&g(e,["parameters","negativePrompt"],A);const x=f(n,["enhancePrompt"]);e!==void 0&&x!=null&&g(e,["parameters","enhancePrompt"],x);const k=f(n,["generateAudio"]);e!==void 0&&k!=null&&g(e,["parameters","generateAudio"],k);const q=f(n,["lastFrame"]);e!==void 0&&q!=null&&g(e,["instances[0]","lastFrame"],vi(q));const F=f(n,["referenceImages"]);if(e!==void 0&&F!=null){let $=F;Array.isArray($)&&($=$.map(z=>d1(z))),g(e,["instances[0]","referenceImages"],$)}const Z=f(n,["mask"]);e!==void 0&&Z!=null&&g(e,["instances[0]","mask"],u1(Z));const te=f(n,["compressionQuality"]);return e!==void 0&&te!=null&&g(e,["parameters","compressionQuality"],te),t}function hN(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&g(e,["response"],yN(c)),e}function mN(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["response"]);return c!=null&&g(e,["response"],_N(c)),e}function pN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],We(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["image"]);l!=null&&g(t,["instances[0]","image"],Zd(l));const c=f(e,["video"]);c!=null&&g(t,["instances[0]","video"],cS(c));const d=f(e,["source"]);d!=null&&vN(d,t);const p=f(e,["config"]);return p!=null&&dN(p,t),t}function gN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],We(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["image"]);l!=null&&g(t,["instances[0]","image"],vi(l));const c=f(e,["video"]);c!=null&&g(t,["instances[0]","video"],dS(c));const d=f(e,["source"]);d!=null&&TN(d,t);const p=f(e,["config"]);return p!=null&&fN(p,t),t}function yN(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>AN(c))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function _N(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>bN(c))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function vN(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],Zd(o));const l=f(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],cS(l)),t}function TN(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],vi(o));const l=f(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],dS(l)),t}function EN(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],NN(t));const s=f(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const o=f(n,["_self"]);return o!=null&&g(e,["safetyAttributes"],oS(o)),e}function Wd(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],rS(t));const s=f(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const o=f(n,["_self"]);o!=null&&g(e,["safetyAttributes"],aS(o));const l=f(n,["prompt"]);return l!=null&&g(e,["enhancedPrompt"],l),e}function SN(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["mask"],rS(t));const s=f(n,["labels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),g(e,["labels"],o)}return e}function AN(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],a1(t)),e}function bN(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],l1(t)),e}function CN(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=f(n,["audioTimestamp"]);s!=null&&g(e,["audioTimestamp"],s);const o=f(n,["candidateCount"]);o!=null&&g(e,["candidateCount"],o);const l=f(n,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const c=f(n,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const d=f(n,["logprobs"]);d!=null&&g(e,["logprobs"],d);const p=f(n,["maxOutputTokens"]);p!=null&&g(e,["maxOutputTokens"],p);const h=f(n,["mediaResolution"]);h!=null&&g(e,["mediaResolution"],h);const T=f(n,["presencePenalty"]);T!=null&&g(e,["presencePenalty"],T);const E=f(n,["responseJsonSchema"]);E!=null&&g(e,["responseJsonSchema"],E);const A=f(n,["responseLogprobs"]);A!=null&&g(e,["responseLogprobs"],A);const x=f(n,["responseMimeType"]);x!=null&&g(e,["responseMimeType"],x);const k=f(n,["responseModalities"]);k!=null&&g(e,["responseModalities"],k);const q=f(n,["responseSchema"]);q!=null&&g(e,["responseSchema"],q);const F=f(n,["routingConfig"]);F!=null&&g(e,["routingConfig"],F);const Z=f(n,["seed"]);Z!=null&&g(e,["seed"],Z);const te=f(n,["speechConfig"]);te!=null&&g(e,["speechConfig"],lS(te));const $=f(n,["stopSequences"]);$!=null&&g(e,["stopSequences"],$);const z=f(n,["temperature"]);z!=null&&g(e,["temperature"],z);const ae=f(n,["thinkingConfig"]);ae!=null&&g(e,["thinkingConfig"],ae);const ce=f(n,["topK"]);ce!=null&&g(e,["topK"],ce);const M=f(n,["topP"]);return M!=null&&g(e,["topP"],M),e}function xN(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],We(n,s)),t}function IN(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],We(n,s)),t}function wN(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function RN(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&g(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function NN(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],Rr(t));const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function rS(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["imageBytes"],Rr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function Zd(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],Rr(t));const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function vi(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["imageBytes"]);s!=null&&g(e,["bytesBase64Encoded"],Rr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function MN(n,e,t){const s={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&g(t,["_query","filter"],c);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],XE(n,d)),s}function DN(n,e,t){const s={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&g(t,["_query","filter"],c);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],XE(n,d)),s}function PN(n,e){const t={},s=f(e,["config"]);return s!=null&&MN(n,s,t),t}function VN(n,e){const t={},s=f(e,["config"]);return s!=null&&DN(n,s,t),t}function kN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["_self"]);if(o!=null){let l=WE(o);Array.isArray(l)&&(l=l.map(c=>Qm(c))),g(e,["models"],l)}return e}function UN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["_self"]);if(o!=null){let l=WE(o);Array.isArray(l)&&(l=l.map(c=>Xm(c))),g(e,["models"],l)}return e}function LN(n){const e={},t=f(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const s=f(n,["segmentationClasses"]);s!=null&&g(e,["maskClasses"],s);const o=f(n,["maskDilation"]);return o!=null&&g(e,["dilation"],o),e}function Qm(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const o=f(n,["description"]);o!=null&&g(e,["description"],o);const l=f(n,["version"]);l!=null&&g(e,["version"],l);const c=f(n,["_self"]);c!=null&&g(e,["tunedModelInfo"],WN(c));const d=f(n,["inputTokenLimit"]);d!=null&&g(e,["inputTokenLimit"],d);const p=f(n,["outputTokenLimit"]);p!=null&&g(e,["outputTokenLimit"],p);const h=f(n,["supportedGenerationMethods"]);return h!=null&&g(e,["supportedActions"],h),e}function Xm(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const o=f(n,["description"]);o!=null&&g(e,["description"],o);const l=f(n,["versionId"]);l!=null&&g(e,["version"],l);const c=f(n,["deployedModels"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(A=>eN(A))),g(e,["endpoints"],E)}const d=f(n,["labels"]);d!=null&&g(e,["labels"],d);const p=f(n,["_self"]);p!=null&&g(e,["tunedModelInfo"],ZN(p));const h=f(n,["defaultCheckpointId"]);h!=null&&g(e,["defaultCheckpointId"],h);const T=f(n,["checkpoints"]);if(T!=null){let E=T;Array.isArray(E)&&(E=E.map(A=>A)),g(e,["checkpoints"],E)}return e}function ON(n){const e={},t=f(n,["videoMetadata"]);t!=null&&g(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&g(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&g(e,["inlineData"],IR(o));const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],tN(l));const c=f(n,["thoughtSignature"]);c!=null&&g(e,["thoughtSignature"],c);const d=f(n,["functionCall"]);d!=null&&g(e,["functionCall"],d);const p=f(n,["codeExecutionResult"]);p!=null&&g(e,["codeExecutionResult"],p);const h=f(n,["executableCode"]);h!=null&&g(e,["executableCode"],h);const T=f(n,["functionResponse"]);T!=null&&g(e,["functionResponse"],T);const E=f(n,["text"]);return E!=null&&g(e,["text"],E),e}function qN(n){const e={},t=f(n,["productImage"]);return t!=null&&g(e,["image"],vi(t)),e}function BN(n,e){const t={},s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const o=f(n,["baseSteps"]);e!==void 0&&o!=null&&g(e,["parameters","editConfig","baseSteps"],o);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&g(e,["parameters","storageUri"],l);const c=f(n,["seed"]);e!==void 0&&c!=null&&g(e,["parameters","seed"],c);const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&g(e,["parameters","safetySetting"],d);const p=f(n,["personGeneration"]);e!==void 0&&p!=null&&g(e,["parameters","personGeneration"],p);const h=f(n,["addWatermark"]);e!==void 0&&h!=null&&g(e,["parameters","addWatermark"],h);const T=f(n,["outputMimeType"]);e!==void 0&&T!=null&&g(e,["parameters","outputOptions","mimeType"],T);const E=f(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","compressionQuality"],E);const A=f(n,["enhancePrompt"]);e!==void 0&&A!=null&&g(e,["parameters","enhancePrompt"],A);const x=f(n,["labels"]);return e!==void 0&&x!=null&&g(e,["labels"],x),t}function FN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],We(n,s));const o=f(e,["source"]);o!=null&&zN(o,t);const l=f(e,["config"]);return l!=null&&BN(l,t),t}function HN(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>Wd(o))),g(e,["generatedImages"],s)}return e}function zN(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=f(n,["personImage"]);e!==void 0&&o!=null&&g(e,["instances[0]","personImage","image"],vi(o));const l=f(n,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>qN(d))),g(e,["instances[0]","productImages"],c)}return t}function GN(n){const e={},t=f(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],vi(t));const s=f(n,["referenceId"]);s!=null&&g(e,["referenceId"],s);const o=f(n,["referenceType"]);o!=null&&g(e,["referenceType"],o);const l=f(n,["maskImageConfig"]);l!=null&&g(e,["maskImageConfig"],LN(l));const c=f(n,["controlImageConfig"]);c!=null&&g(e,["controlImageConfig"],VR(c));const d=f(n,["styleImageConfig"]);d!=null&&g(e,["styleImageConfig"],d);const p=f(n,["subjectImageConfig"]);return p!=null&&g(e,["subjectImageConfig"],p),e}function oS(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const o=f(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function aS(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const o=f(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function jN(n){const e={};if(f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=f(n,["category"]);t!=null&&g(e,["category"],t);const s=f(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function YN(n){const e={},t=f(n,["image"]);return t!=null&&g(e,["image"],vi(t)),e}function JN(n,e){const t={},s=f(n,["mode"]);e!==void 0&&s!=null&&g(e,["parameters","mode"],s);const o=f(n,["maxPredictions"]);e!==void 0&&o!=null&&g(e,["parameters","maxPredictions"],o);const l=f(n,["confidenceThreshold"]);e!==void 0&&l!=null&&g(e,["parameters","confidenceThreshold"],l);const c=f(n,["maskDilation"]);e!==void 0&&c!=null&&g(e,["parameters","maskDilation"],c);const d=f(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&g(e,["parameters","binaryColorThreshold"],d);const p=f(n,["labels"]);return e!==void 0&&p!=null&&g(e,["labels"],p),t}function KN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],We(n,s));const o=f(e,["source"]);o!=null&&QN(o,t);const l=f(e,["config"]);return l!=null&&JN(l,t),t}function $N(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>SN(o))),g(e,["generatedMasks"],s)}return e}function QN(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],vi(o));const l=f(n,["scribbleImage"]);return e!==void 0&&l!=null&&g(e,["instances[0]","scribble"],YN(l)),t}function lS(n){const e={},t=f(n,["voiceConfig"]);if(t!=null&&g(e,["voiceConfig"],t),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=f(n,["languageCode"]);return s!=null&&g(e,["languageCode"],s),e}function XN(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(T=>T)),g(e,["functionDeclarations"],h)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&g(e,["googleSearch"],RN(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&g(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],wN(l));const c=f(n,["urlContext"]);c!=null&&g(e,["urlContext"],c);const d=f(n,["computerUse"]);d!=null&&g(e,["computerUse"],d);const p=f(n,["codeExecution"]);return p!=null&&g(e,["codeExecution"],p),e}function uS(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>nN(A))),g(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const o=f(n,["googleSearch"]);o!=null&&g(e,["googleSearch"],o);const l=f(n,["googleSearchRetrieval"]);l!=null&&g(e,["googleSearchRetrieval"],l);const c=f(n,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const p=f(n,["urlContext"]);p!=null&&g(e,["urlContext"],p);const h=f(n,["computerUse"]);h!=null&&g(e,["computerUse"],h);const T=f(n,["codeExecution"]);return T!=null&&g(e,["codeExecution"],T),e}function WN(n){const e={},t=f(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&g(e,["createTime"],s);const o=f(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function ZN(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&g(e,["createTime"],s);const o=f(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function e1(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const o=f(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function t1(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const o=f(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function n1(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","name"],We(n,s));const o=f(e,["config"]);return o!=null&&e1(o,t),t}function i1(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],We(n,s));const o=f(e,["config"]);return o!=null&&t1(o,t),t}function s1(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const o=f(n,["includeRaiReason"]);e!==void 0&&o!=null&&g(e,["parameters","includeRaiReason"],o);const l=f(n,["outputMimeType"]);e!==void 0&&l!=null&&g(e,["parameters","outputOptions","mimeType"],l);const c=f(n,["outputCompressionQuality"]);e!==void 0&&c!=null&&g(e,["parameters","outputOptions","compressionQuality"],c);const d=f(n,["enhanceInputImage"]);e!==void 0&&d!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],d);const p=f(n,["imagePreservationFactor"]);e!==void 0&&p!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],p);const h=f(n,["labels"]);e!==void 0&&h!=null&&g(e,["labels"],h);const T=f(n,["numberOfImages"]);e!==void 0&&T!=null&&g(e,["parameters","sampleCount"],T);const E=f(n,["mode"]);return e!==void 0&&E!=null&&g(e,["parameters","mode"],E),t}function r1(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],We(n,s));const o=f(e,["image"]);o!=null&&g(t,["instances[0]","image"],vi(o));const l=f(e,["upscaleFactor"]);l!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],l);const c=f(e,["config"]);return c!=null&&s1(c,t),t}function o1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Wd(l))),g(e,["generatedImages"],o)}return e}function a1(n){const e={},t=f(n,["video","uri"]);t!=null&&g(e,["uri"],t);const s=f(n,["video","encodedVideo"]);s!=null&&g(e,["videoBytes"],Rr(s));const o=f(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function l1(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],Rr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function u1(n){const e={},t=f(n,["image"]);t!=null&&g(e,["_self"],vi(t));const s=f(n,["maskMode"]);return s!=null&&g(e,["maskMode"],s),e}function c1(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],Zd(t));const s=f(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function d1(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],vi(t));const s=f(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function cS(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["video","uri"],t);const s=f(n,["videoBytes"]);s!=null&&g(e,["video","encodedVideo"],Rr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["encoding"],o),e}function dS(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["videoBytes"]);s!=null&&g(e,["bytesBase64Encoded"],Rr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const f1="Content-Type",h1="X-Server-Timeout",m1="User-Agent",Wm="x-goog-api-client",p1="1.24.0",g1=`google-genai-sdk/${p1}`,y1="v1beta1",_1="v1beta",aT=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class v1{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:y1,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:_1,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const o=[this.getRequestUrlInternal(t)];return s&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[c,d]of Object.entries(e.queryParams))o.searchParams.append(c,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(t))typeof l=="object"?s[o]=Object.assign(Object.assign({},s[o]),l):l!==void 0&&(s[o]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s){if(t&&t.timeout||s){const o=new AbortController,l=o.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const c=setTimeout(()=>o.abort(),t.timeout);c&&typeof c.unref=="function"&&c.unref()}s&&s.addEventListener("abort",()=>{o.abort()}),e.signal=l}return t&&t.extraBody!==null&&T1(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await lT(o),new Jm(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await lT(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return Ta(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let c="";for(;;){const{done:d,value:p}=yield yt(o.read());if(d){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=l.decode(p,{stream:!0});try{const E=JSON.parse(h);if("error"in E){const A=JSON.parse(JSON.stringify(E.error)),x=A.status,k=A.code,q=`got status: ${x}. ${JSON.stringify(E)}`;if(k>=400&&k<600)throw new Qd({message:q,status:k})}}catch(E){if(E.name==="ApiError")throw E}c+=h;let T=c.match(aT);for(;T;){const E=T[1];try{const A=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield yt(new Jm(A)),c=c.slice(T[0].length),T=c.match(aT)}catch(A){throw new Error(`exception parsing stream chunk ${E}. ${A}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=g1+" "+this.clientOptions.userAgentExtra;return e[m1]=t,e[Wm]=t,e[f1]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[s,o]of Object.entries(e.headers))t.append(s,o);e.timeout&&e.timeout>0&&t.append(h1,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var s;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);o.sizeBytes=String(c.size);const d=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:c.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const p=await this.fetchUploadUrl(o,t);return l.upload(e,p,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var s;let o={};t!=null&&t.httpOptions?o=t.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},c=await this.request({path:ve("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:o});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(s=c==null?void 0:c.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function lT(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(s);throw t>=400&&t<600?new Qd({message:o,status:t}):new Error(o)}}function T1(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,c){const d=Object.assign({},l);for(const p in c)if(Object.prototype.hasOwnProperty.call(c,p)){const h=c[p],T=d[p];h&&typeof h=="object"&&!Array.isArray(h)&&T&&typeof T=="object"&&!Array.isArray(T)?d[p]=s(T,h):(T&&h&&typeof T!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof T}, New type: ${typeof h}. Overwriting.`),d[p]=h)}return d}const o=s(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const E1="mcp_used/unknown";let S1=!1;function fS(n){for(const e of n)if(A1(e)||typeof e=="object"&&"inputSchema"in e)return!0;return S1}function hS(n){var e;const t=(e=n[Wm])!==null&&e!==void 0?e:"";n[Wm]=(t+` ${E1}`).trimStart()}function A1(n){return n!==null&&typeof n=="object"&&n instanceof Dp}function b1(n,e=100){return Ta(this,arguments,function*(){let s,o=0;for(;o<e;){const l=yield yt(n.listTools({cursor:s}));for(const c of l.tools)yield yield yt(c),o++;if(!l.nextCursor)break;s=l.nextCursor}})}class Dp{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Dp(e,t)}async initialize(){var e,t,s,o;if(this.mcpTools.length>0)return;const l={},c=[];for(const T of this.mcpClients)try{for(var d=!0,p=(t=void 0,nu(b1(T))),h;h=await p.next(),e=h.done,!e;d=!0){o=h.value,d=!1;const E=o;c.push(E);const A=E.name;if(l[A])throw new Error(`Duplicate function name ${A} found in MCP tools. Please ensure function names are unique.`);l[A]=T}}catch(E){t={error:E}}finally{try{!d&&!e&&(s=p.return)&&await s.call(p)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),NI(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await o.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function C1(n,e,t){const s=new SI;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(s,o),e(s)}class x1{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=R1(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),p=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let h=()=>{};const T=new Promise($=>{h=$}),E=e.callbacks,A=function(){h({})},x=this.apiClient,k={onopen:A,onmessage:$=>{C1(x,E.onmessage,$)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function($){},onclose:(s=E==null?void 0:E.onclose)!==null&&s!==void 0?s:function($){}},q=this.webSocketFactory.create(p,w1(c),k);q.connect(),await T;const te={setup:{model:We(this.apiClient,e.model)}};return q.send(JSON.stringify(te)),new I1(q,this.apiClient)}}class I1{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=_R(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=yR(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ga.PLAY)}pause(){this.sendPlaybackControl(ga.PAUSE)}stop(){this.sendPlaybackControl(ga.STOP)}resetContext(){this.sendPlaybackControl(ga.RESET_CONTEXT)}close(){this.conn.close()}}function w1(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function R1(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const N1="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function M1(n,e,t){const s=new EI;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const l=JSON.parse(o);if(n.isVertexAI()){const c=ER(l);Object.assign(s,c)}else Object.assign(s,l);e(s)}class D1{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new x1(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,o,l,c,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let T;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&fS(e.config.tools)&&hS(E);const A=U1(E);if(this.apiClient.isVertexAI())T=`${p}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(A);else{const R=this.apiClient.getApiKey();let D="BidiGenerateContent",V="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),D="BidiGenerateContentConstrained",V="access_token"),T=`${p}/ws/google.ai.generativelanguage.${h}.GenerativeService.${D}?${V}=${R}`}let x=()=>{};const k=new Promise(R=>{x=R}),q=e.callbacks,F=function(){var R;(R=q==null?void 0:q.onopen)===null||R===void 0||R.call(q),x({})},Z=this.apiClient,te={onopen:F,onmessage:R=>{M1(Z,q.onmessage,R)},onerror:(t=q==null?void 0:q.onerror)!==null&&t!==void 0?t:function(R){},onclose:(s=q==null?void 0:q.onclose)!==null&&s!==void 0?s:function(R){}},$=this.webSocketFactory.create(T,k1(A),te);$.connect(),await k;let z=We(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&z.startsWith("publishers/")){const R=this.apiClient.getProject(),D=this.apiClient.getLocation();z=`projects/${R}/locations/${D}/`+z}let ae={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[xd.AUDIO]}:e.config.responseModalities=[xd.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ce=(d=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[],M=[];for(const R of ce)if(this.isCallableTool(R)){const D=R;M.push(await D.tool())}else M.push(R);M.length>0&&(e.config.tools=M);const N={model:z,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ae=gR(this.apiClient,N):ae=pR(this.apiClient,N),delete ae.config,$.send(JSON.stringify(ae)),new V1($,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const P1={turnComplete:!0};class V1{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=ei(t.turns),e.isVertexAI()||(s=s.map(o=>Xd(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(N1)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},P1),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:TR(e)}:t={realtimeInput:vR(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function k1(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function U1(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uT=10;function cT(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const c of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Ea(c)){o=!0;break}if(!o)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Ea(n){return"callTool"in n&&typeof n.callTool=="function"}function L1(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>Ea(o)))!==null&&s!==void 0?s:!1}function O1(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>!Ea(o)))!==null&&s!==void 0?s:!1}function dT(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class q1 extends _o{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,o,l,c,d;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!L1(t)||cT(t.config))return await this.generateContentInternal(p);if(O1(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let h,T;const E=ei(p.contents),A=(l=(o=(s=p.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:uT;let x=0;for(;x<A&&(h=await this.generateContentInternal(p),!(!h.functionCalls||h.functionCalls.length===0));){const k=h.candidates[0].content,q=[];for(const F of(d=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[])if(Ea(F)){const te=await F.callTool(h.functionCalls);q.push(...te)}x++,T={role:"user",parts:q},p.contents=ei(p.contents),p.contents.push(k),p.contents.push(T),dT(p.config)&&(E.push(k),E.push(T))}return dT(p.config)&&(h.automaticFunctionCallingHistory=E),h},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),cT(t.config)){const s=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(s)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var o;let l;const c=[];if(s!=null&&s.generatedImages)for(const p of s.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((o=p==null?void 0:p.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=p==null?void 0:p.safetyAttributes:c.push(p);let d;return l?d={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:d={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},d}),this.list=async t=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new gu(co.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(c),c)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,o;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const c=await Promise.all(l.map(async p=>Ea(p)?await p.tool():p)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(d.config.tools=c,e.config&&e.config.tools&&fS(e.config.tools)){const p=(o=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&o!==void 0?o:{};let h=Object.assign({},p);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),hS(h),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return d}async initAfcToolsMap(e){var t,s,o;const l=new Map;for(const c of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(Ea(c)){const d=c,p=await d.tool();for(const h of(o=p.functionDeclarations)!==null&&o!==void 0?o:[]){if(!h.name)throw new Error("Function declaration name is required.");if(l.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);l.set(h.name,d)}}return l}async processAfcStream(e){var t,s,o;const l=(o=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:uT;let c=!1,d=0;const p=await this.initAfcToolsMap(e);return(function(h,T,E){var A,x;return Ta(this,arguments,function*(){for(var k,q,F,Z;d<l;){c&&(d++,c=!1);const ae=yield yt(h.processParamsMaybeAddMcpUsage(E)),ce=yield yt(h.generateContentStreamInternal(ae)),M=[],N=[];try{for(var te=!0,$=(q=void 0,nu(ce)),z;z=yield yt($.next()),k=z.done,!k;te=!0){Z=z.value,te=!1;const R=Z;if(yield yield yt(R),R.candidates&&(!((A=R.candidates[0])===null||A===void 0)&&A.content)){N.push(R.candidates[0].content);for(const D of(x=R.candidates[0].content.parts)!==null&&x!==void 0?x:[])if(d<l&&D.functionCall){if(!D.functionCall.name)throw new Error("Function call name was not returned by the model.");if(T.has(D.functionCall.name)){const V=yield yt(T.get(D.functionCall.name).callTool([D.functionCall]));M.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${T.keys()}, mising tool: ${D.functionCall.name}`)}}}}catch(R){q={error:R}}finally{try{!te&&!k&&(F=$.return)&&(yield yt(F.call($)))}finally{if(q)throw q.error}}if(M.length>0){c=!0;const R=new Kl;R.candidates=[{content:{role:"user",parts:M}}],yield yield yt(R);const D=[];D.push(...N),D.push({role:"user",parts:M});const V=ei(E.contents).concat(D);E.contents=V}else break}})})(this,p,e)}async generateContentInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=sT(this.apiClient,e);return d=ve("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const E=oT(T),A=new Kl;return Object.assign(A,E),A})}else{const h=iT(this.apiClient,e);return d=ve("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const E=rT(T),A=new Kl;return Object.assign(A,E),A})}}async generateContentStreamInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=sT(this.apiClient,e);return d=ve("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(E){return Ta(this,arguments,function*(){var A,x,k,q;try{for(var F=!0,Z=nu(E),te;te=yield yt(Z.next()),A=te.done,!A;F=!0){q=te.value,F=!1;const $=q,z=oT(yield yt($.json()));z.sdkHttpResponse={headers:$.headers};const ae=new Kl;Object.assign(ae,z),yield yield yt(ae)}}catch($){x={error:$}}finally{try{!F&&!A&&(k=Z.return)&&(yield yt(k.call(Z)))}finally{if(x)throw x.error}}})})}else{const h=iT(this.apiClient,e);return d=ve("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(E){return Ta(this,arguments,function*(){var A,x,k,q;try{for(var F=!0,Z=nu(E),te;te=yield yt(Z.next()),A=te.done,!A;F=!0){q=te.value,F=!1;const $=q,z=rT(yield yt($.json()));z.sdkHttpResponse={headers:$.headers};const ae=new Kl;Object.assign(ae,z),yield yield yt(ae)}}catch($){x={error:$}}finally{try{!F&&!A&&(k=Z.return)&&(yield yt(k.call(Z)))}finally{if(x)throw x.error}}})})}}async embedContent(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=XR(this.apiClient,e);return d=ve("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const E=ZR(T),A=new F0;return Object.assign(A,E),A})}else{const h=QR(this.apiClient,e);return d=ve("{model}:batchEmbedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const E=WR(T),A=new F0;return Object.assign(A,E),A})}}async generateImagesInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=lN(this.apiClient,e);return d=ve("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const E=cN(T),A=new H0;return Object.assign(A,E),A})}else{const h=aN(this.apiClient,e);return d=ve("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const E=uN(T),A=new H0;return Object.assign(A,E),A})}}async editImageInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=YR(this.apiClient,e);return l=ve("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(h=>{const T=h;return T.sdkHttpResponse={headers:p.headers},T})),o.then(p=>{const h=JR(p),T=new hI;return Object.assign(T,h),T})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=r1(this.apiClient,e);return l=ve("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(h=>{const T=h;return T.sdkHttpResponse={headers:p.headers},T})),o.then(p=>{const h=o1(p),T=new mI;return Object.assign(T,h),T})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=FN(this.apiClient,e);return l=ve("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const h=HN(p),T=new pI;return Object.assign(T,h),T})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=KN(this.apiClient,e);return l=ve("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const h=$N(p),T=new gI;return Object.assign(T,h),T})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=IN(this.apiClient,e);return d=ve("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>Xm(T))}else{const h=xN(this.apiClient,e);return d=ve("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>Qm(T))}}async listInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=VN(this.apiClient,e);return d=ve("{models_url}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const E=UN(T),A=new z0;return Object.assign(A,E),A})}else{const h=PN(this.apiClient,e);return d=ve("{models_url}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const E=kN(T),A=new z0;return Object.assign(A,E),A})}}async update(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=i1(this.apiClient,e);return d=ve("{model}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>Xm(T))}else{const h=n1(this.apiClient,e);return d=ve("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>Qm(T))}}async delete(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=HR(this.apiClient,e);return d=ve("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const E=GR(T),A=new G0;return Object.assign(A,E),A})}else{const h=FR(this.apiClient,e);return d=ve("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const E=zR(T),A=new G0;return Object.assign(A,E),A})}}async countTokens(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=OR(this.apiClient,e);return d=ve("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const E=BR(T),A=new j0;return Object.assign(A,E),A})}else{const h=LR(this.apiClient,e);return d=ve("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const E=qR(T),A=new j0;return Object.assign(A,E),A})}}async computeTokens(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=NR(this.apiClient,e);return l=ve("{model}:computeTokens",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(h=>{const T=h;return T.sdkHttpResponse={headers:p.headers},T})),o.then(p=>{const h=MR(p),T=new yI;return Object.assign(T,h),T})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=gN(this.apiClient,e);return d=ve("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>{const E=mN(T),A=new Id;return Object.assign(A,E),A})}else{const h=pN(this.apiClient,e);return d=ve("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>{const E=hN(T),A=new Id;return Object.assign(A,E),A})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class B1 extends _o{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=cI(e);return d=ve("{operationName}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c}else{const h=uI(e);return d=ve("{operationName}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c}}async fetchPredictVideosOperationInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=nI(e);return l=ve("{resourceName}:fetchPredictOperation",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function F1(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&g(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function H1(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>Q1(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function z1(n,e,t){const s={},o=f(e,["expireTime"]);t!==void 0&&o!=null&&g(t,["expireTime"],o);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&g(t,["newSessionExpireTime"],l);const c=f(e,["uses"]);t!==void 0&&c!=null&&g(t,["uses"],c);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&g(t,["bidiGenerateContentSetup"],$1(n,d));const p=f(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&g(t,["fieldMask"],p),s}function G1(n,e){const t={},s=f(e,["config"]);return s!=null&&g(t,["config"],z1(n,s,t)),t}function j1(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Y1(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function J1(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&g(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function K1(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const T=f(n,["seed"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","seed"],T);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],Mp(E));const A=f(n,["thinkingConfig"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","thinkingConfig"],A);const x=f(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],x);const k=f(n,["systemInstruction"]);e!==void 0&&k!=null&&g(e,["setup","systemInstruction"],H1(hn(k)));const q=f(n,["tools"]);if(e!==void 0&&q!=null){let ce=La(q);Array.isArray(ce)&&(ce=ce.map(M=>W1(Ua(M)))),g(e,["setup","tools"],ce)}const F=f(n,["sessionResumption"]);e!==void 0&&F!=null&&g(e,["setup","sessionResumption"],X1(F));const Z=f(n,["inputAudioTranscription"]);e!==void 0&&Z!=null&&g(e,["setup","inputAudioTranscription"],Z);const te=f(n,["outputAudioTranscription"]);e!==void 0&&te!=null&&g(e,["setup","outputAudioTranscription"],te);const $=f(n,["realtimeInputConfig"]);e!==void 0&&$!=null&&g(e,["setup","realtimeInputConfig"],$);const z=f(n,["contextWindowCompression"]);e!==void 0&&z!=null&&g(e,["setup","contextWindowCompression"],z);const ae=f(n,["proactivity"]);return e!==void 0&&ae!=null&&g(e,["setup","proactivity"],ae),t}function $1(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],We(n,s));const o=f(e,["config"]);return o!=null&&g(t,["config"],K1(o,t)),t}function Q1(n){const e={},t=f(n,["videoMetadata"]);t!=null&&g(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&g(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&g(e,["inlineData"],F1(o));const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],j1(l));const c=f(n,["thoughtSignature"]);c!=null&&g(e,["thoughtSignature"],c);const d=f(n,["functionCall"]);d!=null&&g(e,["functionCall"],d);const p=f(n,["codeExecutionResult"]);p!=null&&g(e,["codeExecutionResult"],p);const h=f(n,["executableCode"]);h!=null&&g(e,["executableCode"],h);const T=f(n,["functionResponse"]);T!=null&&g(e,["functionResponse"],T);const E=f(n,["text"]);return E!=null&&g(e,["text"],E),e}function X1(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function W1(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(T=>T)),g(e,["functionDeclarations"],h)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&g(e,["googleSearch"],J1(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&g(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],Y1(l));const c=f(n,["urlContext"]);c!=null&&g(e,["urlContext"],c);const d=f(n,["computerUse"]);d!=null&&g(e,["computerUse"],d);const p=f(n,["codeExecution"]);return p!=null&&g(e,["codeExecution"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Z1(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const o=Object.keys(s).map(l=>`${t}.${l}`);e.push(...o)}else e.push(t)}return e.join(",")}function eM(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const l=Z1(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(h=>c.includes(h)?`generationConfig.${h}`:h));const p=[];l&&p.push(l),d.length>0&&p.push(...d),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class tM extends _o{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=G1(this.apiClient,e);l=ve("auth_tokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const p=eM(d,e.config);return o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nM(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function iM(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function sM(n,e){const t={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=f(n,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&g(e,["displayName"],s),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=f(n,["epochCount"]);e!==void 0&&o!=null&&g(e,["tuningTask","hyperparameters","epochCount"],o);const l=f(n,["learningRateMultiplier"]);if(l!=null&&g(t,["tuningTask","hyperparameters","learningRateMultiplier"],l),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=f(n,["batchSize"]);e!==void 0&&c!=null&&g(e,["tuningTask","hyperparameters","batchSize"],c);const d=f(n,["learningRate"]);if(e!==void 0&&d!=null&&g(e,["tuningTask","hyperparameters","learningRate"],d),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return t}function rM(n,e){const t={},s=f(n,["validationDataset"]);e!==void 0&&s!=null&&g(e,["supervisedTuningSpec"],TM(s,t));const o=f(n,["tunedModelDisplayName"]);e!==void 0&&o!=null&&g(e,["tunedModelDisplayName"],o);const l=f(n,["description"]);e!==void 0&&l!=null&&g(e,["description"],l);const c=f(n,["epochCount"]);e!==void 0&&c!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],c);const d=f(n,["learningRateMultiplier"]);e!==void 0&&d!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],d);const p=f(n,["exportLastCheckpointOnly"]);e!==void 0&&p!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],p);const h=f(n,["adapterSize"]);if(e!==void 0&&h!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],h),f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=f(n,["labels"]);return e!==void 0&&T!=null&&g(e,["labels"],T),t}function oM(n){const e={},t=f(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["preTunedModel"]);s!=null&&g(e,["preTunedModel"],s);const o=f(n,["trainingDataset"]);o!=null&&g(e,["tuningTask","trainingData"],yM(o));const l=f(n,["config"]);return l!=null&&sM(l,e),e}function aM(n){const e={},t=f(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["preTunedModel"]);s!=null&&g(e,["preTunedModel"],s);const o=f(n,["trainingDataset"]);o!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],_M(o,e));const l=f(n,["config"]);return l!=null&&rM(l,e),e}function lM(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function uM(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function cM(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const l=f(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),t}function dM(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const l=f(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),t}function fM(n){const e={},t=f(n,["config"]);return t!=null&&cM(t,e),e}function hM(n){const e={},t=f(n,["config"]);return t!=null&&dM(t,e),e}function mM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["tunedModels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>mS(c))),g(e,["tuningJobs"],l)}return e}function pM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["tuningJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Zm(c))),g(e,["tuningJobs"],l)}return e}function gM(n){const e={},t=f(n,["name"]);t!=null&&g(e,["model"],t);const s=f(n,["name"]);return s!=null&&g(e,["endpoint"],s),e}function yM(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const t=f(n,["examples"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["examples","examples"],s)}return e}function _M(n,e){const t={},s=f(n,["gcsUri"]);e!==void 0&&s!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],s);const o=f(n,["vertexDatasetResource"]);if(e!==void 0&&o!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],o),f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function mS(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["state"]);o!=null&&g(e,["state"],$E(o));const l=f(n,["createTime"]);l!=null&&g(e,["createTime"],l);const c=f(n,["tuningTask","startTime"]);c!=null&&g(e,["startTime"],c);const d=f(n,["tuningTask","completeTime"]);d!=null&&g(e,["endTime"],d);const p=f(n,["updateTime"]);p!=null&&g(e,["updateTime"],p);const h=f(n,["description"]);h!=null&&g(e,["description"],h);const T=f(n,["baseModel"]);T!=null&&g(e,["baseModel"],T);const E=f(n,["_self"]);E!=null&&g(e,["tunedModel"],gM(E));const A=f(n,["customBaseModel"]);A!=null&&g(e,["customBaseModel"],A);const x=f(n,["experiment"]);x!=null&&g(e,["experiment"],x);const k=f(n,["labels"]);k!=null&&g(e,["labels"],k);const q=f(n,["outputUri"]);q!=null&&g(e,["outputUri"],q);const F=f(n,["pipelineJob"]);F!=null&&g(e,["pipelineJob"],F);const Z=f(n,["serviceAccount"]);Z!=null&&g(e,["serviceAccount"],Z);const te=f(n,["tunedModelDisplayName"]);te!=null&&g(e,["tunedModelDisplayName"],te);const $=f(n,["veoTuningSpec"]);return $!=null&&g(e,["veoTuningSpec"],$),e}function Zm(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["state"]);o!=null&&g(e,["state"],$E(o));const l=f(n,["createTime"]);l!=null&&g(e,["createTime"],l);const c=f(n,["startTime"]);c!=null&&g(e,["startTime"],c);const d=f(n,["endTime"]);d!=null&&g(e,["endTime"],d);const p=f(n,["updateTime"]);p!=null&&g(e,["updateTime"],p);const h=f(n,["error"]);h!=null&&g(e,["error"],h);const T=f(n,["description"]);T!=null&&g(e,["description"],T);const E=f(n,["baseModel"]);E!=null&&g(e,["baseModel"],E);const A=f(n,["tunedModel"]);A!=null&&g(e,["tunedModel"],A);const x=f(n,["preTunedModel"]);x!=null&&g(e,["preTunedModel"],x);const k=f(n,["supervisedTuningSpec"]);k!=null&&g(e,["supervisedTuningSpec"],k);const q=f(n,["tuningDataStats"]);q!=null&&g(e,["tuningDataStats"],q);const F=f(n,["encryptionSpec"]);F!=null&&g(e,["encryptionSpec"],F);const Z=f(n,["partnerModelTuningSpec"]);Z!=null&&g(e,["partnerModelTuningSpec"],Z);const te=f(n,["customBaseModel"]);te!=null&&g(e,["customBaseModel"],te);const $=f(n,["experiment"]);$!=null&&g(e,["experiment"],$);const z=f(n,["labels"]);z!=null&&g(e,["labels"],z);const ae=f(n,["outputUri"]);ae!=null&&g(e,["outputUri"],ae);const ce=f(n,["pipelineJob"]);ce!=null&&g(e,["pipelineJob"],ce);const M=f(n,["serviceAccount"]);M!=null&&g(e,["serviceAccount"],M);const N=f(n,["tunedModelDisplayName"]);N!=null&&g(e,["tunedModelDisplayName"],N);const R=f(n,["veoTuningSpec"]);return R!=null&&g(e,["veoTuningSpec"],R),e}function vM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["metadata"]);o!=null&&g(e,["metadata"],o);const l=f(n,["done"]);l!=null&&g(e,["done"],l);const c=f(n,["error"]);return c!=null&&g(e,["error"],c),e}function TM(n,e){const t={},s=f(n,["gcsUri"]);s!=null&&g(t,["validationDatasetUri"],s);const o=f(n,["vertexDatasetResource"]);return e!==void 0&&o!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EM extends _o{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new gu(co.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:o});return l.baseModel=void 0,await this.tuneInternal(l)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),l=await this.tuneMldevInternal(o);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:Ym.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=uM(e);return d=ve("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>Zm(T))}else{const h=lM(e);return d=ve("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>mS(T))}}async listInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=hM(e);return d=ve("tuningJobs",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const E=pM(T),A=new Y0;return Object.assign(A,E),A})}else{const h=fM(e);return d=ve("tunedModels",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const E=mM(T),A=new Y0;return Object.assign(A,E),A})}}async cancel(e){var t,s,o,l;let c="",d={};if(this.apiClient.isVertexAI()){const p=iM(e);c=ve("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=nM(e);c=ve("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=aM(e);return l=ve("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(h=>{const T=h;return T.sdkHttpResponse={headers:p.headers},T})),o.then(p=>Zm(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=oM(e);return l=ve("tunedModels",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(h=>{const T=h;return T.sdkHttpResponse={headers:p.headers},T})),o.then(p=>vM(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SM{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const AM=1024*1024*8,bM=3,CM=1e3,xM=2,Im="x-goog-upload-status";async function IM(n,e,t){var s,o,l;let c=0,d=0,p=new Jm(new Response),h="upload";for(c=n.size;d<c;){const E=Math.min(AM,c-d),A=n.slice(d,d+E);d+E>=c&&(h+=", finalize");let x=0,k=CM;for(;x<bM&&(p=await t.request({path:"",body:A,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(d),"Content-Length":String(E)}}}),!(!((s=p==null?void 0:p.headers)===null||s===void 0)&&s[Im]));)x++,await RM(k),k=k*xM;if(d+=E,((o=p==null?void 0:p.headers)===null||o===void 0?void 0:o[Im])!=="active")break;if(c<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const T=await(p==null?void 0:p.json());if(((l=p==null?void 0:p.headers)===null||l===void 0?void 0:l[Im])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return T.file}async function wM(n){return{size:n.size,type:n.type}}function RM(n){return new Promise(e=>setTimeout(e,n))}class NM{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await IM(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await wM(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MM{create(e,t,s){return new DM(e,t,s)}}class DM{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fT="x-goog-api-key";class PM{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(fT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(fT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VM="gl-node/";class kM{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=tI(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const o=new PM(this.apiKey);this.apiClient=new v1({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:VM+"web",uploader:new NM,downloader:new SM}),this.models=new q1(this.apiClient),this.live=new D1(this.apiClient,o,new MM),this.batches=new _w(this.apiClient),this.chats=new Qw(this.models,this.apiClient),this.caches=new Jw(this.apiClient),this.files=new oR(this.apiClient),this.operations=new B1(this.apiClient),this.authTokens=new tM(this.apiClient),this.tunings=new EM(this.apiClient)}}const pS={BASE_URL:"/fd/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_ENVIRONMENT:"production",VITE_FIREBASE_API_KEY:"AIzaSyBA1uXbBt5qHfOh9nTFXuI2IVN-uhWYD_g",VITE_FIREBASE_APP_ID:"1:221809737779:web:a0e2f3d1b9b6c1e1f2d3e4",VITE_FIREBASE_AUTH_DOMAIN:"expenses-140c4.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"221809737779",VITE_FIREBASE_PROJECT_ID:"expenses-140c4",VITE_FIREBASE_STORAGE_BUCKET:"expenses-140c4.appspot.com",VITE_GEMINI_API_KEY:"AIzaSyCU4hOMnyFAWpi1zuy1tRuWW9AV358_njE"},Ct={firebase:{apiKey:"AIzaSyBA1uXbBt5qHfOh9nTFXuI2IVN-uhWYD_g",authDomain:"expenses-140c4.firebaseapp.com",projectId:"expenses-140c4",storageBucket:"expenses-140c4.appspot.com",messagingSenderId:"221809737779",appId:"1:221809737779:web:a0e2f3d1b9b6c1e1f2d3e4"},gemini:{apiKey:"AIzaSyCU4hOMnyFAWpi1zuy1tRuWW9AV358_njE",model:"gemini-2.5-flash"},app:{name:"لوحة التحكم المالية",version:"1.0.0",environment:"production"}};console.log("🔍 فحص متغيرات البيئة:",{environment:Ct.app.environment,firebaseApiKey:Ct.firebase.apiKey?"✅ موجود":"❌ مفقود",firebaseAuthDomain:Ct.firebase.authDomain||"❌ مفقود",firebaseProjectId:Ct.firebase.projectId||"❌ مفقود",firebaseStorageBucket:Ct.firebase.storageBucket||"❌ مفقود",firebaseMessagingSenderId:Ct.firebase.messagingSenderId||"❌ مفقود",firebaseAppId:Ct.firebase.appId||"❌ مفقود",geminiApiKey:"✅ موجود",allEnvVars:Object.keys(pS).filter(n=>n.startsWith("VITE_"))});console.log("🔍 جميع متغيرات VITE_ في البيئة:",Object.keys(pS).filter(n=>n.startsWith("VITE_")));const Sa=()=>{const n=[];return Ct.firebase.apiKey||n.push("مفتاح Firebase API مفقود"),Ct.firebase.authDomain||n.push("Firebase Auth Domain مفقود"),Ct.firebase.projectId||n.push("معرف مشروع Firebase مفقود"),Ct.firebase.storageBucket||n.push("Firebase Storage Bucket مفقود"),Ct.firebase.messagingSenderId||n.push("Firebase Messaging Sender ID مفقود"),Ct.firebase.appId||n.push("Firebase App ID مفقود"),{isValid:n.length===0,errors:n,hasFirebase:!!Ct.firebase.apiKey,hasGemini:!0}};if(typeof window<"u"){const n=Sa();n.isValid?console.log("✅ جميع الإعدادات صحيحة ومكتملة"):console.warn("⚠️ تحذير: بعض الإعدادات غير مكتملة:",n.errors)}let Rd;const UM=Ct.gemini.model,gS=()=>{if(Rd)return;const n=Sa();if(!n.isValid){console.warn("⚠️ تحذير: مفتاح Gemini API غير صحيح:",n.errors);return}try{Rd=new kM({apiKey:Ct.gemini.apiKey}),console.log("🤖 تم تهيئة خدمة Gemini بنجاح")}catch(e){console.error("❌ خطأ في تهيئة خدمة Gemini:",e)}},yu={FINANCIAL_ANALYST:`You are an expert financial analyst assistant, "المحلل الذكي". You have full access to the user's financial data for a specific period. Your purpose is to provide detailed, insightful analysis and answer complex questions in Arabic based ONLY on the data provided for that period.
- Today's date is ${new Date().toLocaleDateString("en-CA")}.
- Analyze the user's provided financial state (transactions, card details, bank balance, investments, installments) for the specified period to answer their query.
- Be thorough. Connect different parts of their financial data to give holistic answers.
- DO NOT just state data, INTERPRET it. Provide insights, identify trends, and offer observations.
- Be friendly, professional, and act as a true financial advisor.`,INVESTMENT_COACH:`You are an educational investment coach named "المستشار الذكي". Your primary role is to educate the user about investment concepts and strategies, particularly within the context of the Saudi stock market (Tadawul).
- You MUST NOT give direct financial advice. Do not recommend buying or selling specific stocks (e.g., "Buy Aramco").
- When asked for a recommendation, you MUST politely decline and instead explain HOW the user can research and make their own informed decisions.
- Your tone should be encouraging, educational, and responsible.
- Keep your answers clear, concise, and in Arabic.`,PASTE_ANALYZER:`You are an intelligent data extraction tool for Arabic and English financial transaction SMS messages from Saudi Arabia. Your task is to analyze the provided text and respond ONLY with a valid JSON object containing the keys: "merchant", "amount", "date", "paymentMethod", and "categoryId".
- **CRITICAL RULE**: Extract data ONLY from the user's text. Do not invent or infer information. If a piece of information is not present in the text, its corresponding JSON value should be null.
- **ERROR HANDLING**: If the provided text does not seem to be a financial transaction SMS at all, you MUST respond with a JSON object containing a single key "error" with the value "النص المقدم لا يبدو كرسالة معاملة مالية.".

- **Amount Extraction**:
  - The 'amount' is the primary transaction value.
  - Look for a number after keywords like "بـ" or "Amount:".
  - You MUST ignore any numbers associated with "Remaining limit", "الصرف المتبقي", or card numbers.

- **Date Extraction**:
  - The 'date' MUST be in "YYYY-MM-DD" format.
  - If the text provides a full timestamp like "2025-09-06 15:11:57", extract only the date part "2025-09-06".
  - If the text uses "DD/MM/YY", you must convert it. Example: '01/09/25' becomes '2025-09-01'.

- **Merchant Extraction**:
  - The 'merchant' is the store or service name.
  - Look for text after keywords like "من" or "Merchant:".

{{PAYMENT_METHOD_MAPPING}}

- **Category ID**:
  - Analyze the merchant name and suggest the most relevant ID from the provided list of available categories. If unsure, use the ID for the category named 'أخرى'.

---
**EXAMPLES**

1.  **Input**: "شراء-POS\\nبـ182 SAR\\nمن Adel Inte\\nمدى-ابل*2855\\nفي 01/09/25 22:11"
    **Output**: { "merchant": "Adel Inte", "amount": 182, "date": "2025-09-01", "paymentMethod": "bank-default", "categoryId": "cat-5" }

2.  **Input**: "شراء-POS\\nبـ‬‪95.78 ‬‪SAR\\nمن ‬‪BINDAWOOD\\nإئتمانية **4278 ‬‪(Apple Pay)\\nفي ‬‪03/09/25 ‬‪14:45\\nالصرف المتبقي ‬‪12146.95 ‬‪SAR"
    **Output**: { "merchant": "BINDAWOOD", "amount": 95.78, "date": "2025-09-03", "paymentMethod": "snb-card", "categoryId": "cat-1" }

3.  **Input**: "POS Purchase (Apple Pay)\\nCard: Visa card XX8095\\nAmount: SAR 115.00\\nMerchant: AlHamra Roundabout Statio\\nIn: SAUDI ARABIA\\nRemaining limit SAR 2,502.34\\nOn: 2025-09-06 15:11:57"
    **Output**: { "merchant": "AlHamra Roundabout Statio", "amount": 115.00, "date": "2025-09-06", "paymentMethod": "enbd-card", "categoryId": "cat-3" }

4.  **Input**: "POS Purchase (Apple Pay)\\nCard: Visa card XX8095\\nAmount: SAR 10.00\\nMerchant: MKAN CO\\nIn: SAUDI ARABIA\\nRemaining limit SAR 2,782.27\\nOn: 2025-09-03 23:44:56"
    **Output**: { "merchant": "MKAN CO", "amount": 10.00, "date": "2025-09-03", "paymentMethod": "enbd-card", "categoryId": "cat-7" }
---
`,ICON_SUGGESTER:"You are an emoji expert. Your task is to suggest a single, relevant emoji for a given category name. You must respond with ONLY the emoji character and nothing else.",BUDGET_PLANNER:`You are a helpful and encouraging financial planning assistant in Arabic. Your goal is to help the user create a realistic monthly budget based on their spending history and a total budget amount they provide. Use the 50/30/20 rule (50% for Needs, 30% for Wants, 20% for Savings/Debt) as a general framework, but you MUST adapt it to the user's actual spending patterns revealed in their transaction data. Your response MUST be in Arabic and formatted using Markdown. It should contain: 1. A brief, encouraging introductory sentence. 2. A breakdown of the total budget into Needs, Wants, and Savings, with the suggested amount for each. 3. A detailed table with three columns: "الفئة", "المبلغ المقترح", and "ملاحظات". 4. In the table, allocate the "Needs" and "Wants" amounts across the user's actual spending categories. 5. The "Notes" column should provide a brief justification. 6. Conclude with a short, motivational tip.`},_u=async(n,e,t=!1)=>{if(!Rd)throw new Error("لم تتم تهيئة خدمة الذكاء الاصطناعي. يرجى التأكد من صحة إعدادات الاتصال.");try{return(await Rd.models.generateContent({model:UM,contents:e,config:{systemInstruction:n,...t&&{responseMimeType:"application/json"}}})).text}catch(s){console.error("Gemini API Error:",s);let o="عفواً، حدث خطأ أثناء الاتصال بالخادم. يرجى المحاولة مرة أخرى.";throw s instanceof Error&&"message"in s&&s.message.includes("403")&&(o="تم رفض الوصول (403). يرجى التحقق من قيود مفتاح API الخاص بك في Google Cloud Console."),new Error(o)}},yS=(n,e)=>_u(yu.FINANCIAL_ANALYST,`User Query: "${n}"

Financial Data: ${JSON.stringify(e)}`),_S=(n,e,t,s)=>{const o=Object.keys(t),l=Object.keys(s);let c=`- **Payment Method Mapping**:
  - The 'paymentMethod' MUST be one of these exact values: [${[...l,...o].map(p=>`'${p}'`).join(", ")}].
`;Object.values(s).forEach(p=>{const h=[p.name.split(" ")[0],...p.smsSamples||[]].filter(Boolean);h.length>0&&(c+=`  - If the text is a bank/mada transaction and contains any of these: '${h.join("', '")}', use '${p.id}'.
`)}),Object.values(t).forEach(p=>{const h=[p.name.split(" ")[0],...p.smsSamples||[]].filter(Boolean);h.length>0&&(c+=`  - If the text is a credit card transaction and contains any of these: '${h.join("', '")}', use '${p.id}'.
`)}),c+="  - If no specific bank account keywords match for a bank/mada transaction, default to the first bank account ID in the list.";const d=yu.PASTE_ANALYZER.replace("{{PAYMENT_METHOD_MAPPING}}",c);return _u(d,`Text to analyze: "${n}"

Available Categories: ${JSON.stringify(e)}

First bank account ID is '${l[0]}'`,!0)},vS=n=>_u(yu.INVESTMENT_COACH,n),LM=n=>_u(yu.ICON_SUGGESTER,`Category: ${n}`),TS=(n,e,t)=>_u(yu.BUDGET_PLANNER,`Total monthly budget is: ${n} SAR. My spending categories are: ${JSON.stringify(e)}. My transactions from the last 60 days are: ${JSON.stringify(t)}`),OM=Object.freeze(Object.defineProperty({__proto__:null,analyzeFinancialData:yS,analyzePastedText:_S,generateBudgetPlan:TS,generateInvestmentAdvice:vS,initializeAi:gS,suggestCategoryIcon:LM},Symbol.toStringTag,{value:"Module"})),qM="modulepreload",BM=function(n){return"/fd/"+n},hT={},ps=function(e,t,s){let o=Promise.resolve();if(t&&t.length>0){let c=function(h){return Promise.all(h.map(T=>Promise.resolve(T).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));o=c(t.map(h=>{if(h=BM(h),h in hT)return;hT[h]=!0;const T=h.endsWith(".css"),E=T?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${E}`))return;const A=document.createElement("link");if(A.rel=T?"stylesheet":qM,T||(A.as="script"),A.crossOrigin="",A.href=h,p&&A.setAttribute("nonce",p),document.head.appendChild(A),T)return new Promise((x,k)=>{A.addEventListener("load",x),A.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${h}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return o.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})},FM=()=>{};var mT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},HM=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],d=n[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},SS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,d=c?n[o+1]:0,p=o+2<n.length,h=p?n[o+2]:0,T=l>>2,E=(l&3)<<4|d>>4;let A=(d&15)<<2|h>>6,x=h&63;p||(x=64,c||(A=64)),s.push(t[T],t[E],t[A],t[x])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ES(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):HM(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const h=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||d==null||h==null||E==null)throw new zM;const A=l<<2|d>>4;if(s.push(A),h!==64){const x=d<<4&240|h>>2;if(s.push(x),E!==64){const k=h<<6&192|E;s.push(k)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class zM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GM=function(n){const e=ES(n);return SS.encodeByteArray(e,!0)},Nd=function(n){return GM(n).replace(/\./g,"")},AS=function(n){try{return SS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM=()=>jM().__FIREBASE_DEFAULTS__,JM=()=>{if(typeof process>"u"||typeof mT>"u")return;const n=mT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},KM=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&AS(n[1]);return e&&JSON.parse(e)},ef=()=>{try{return FM()||YM()||JM()||KM()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},bS=n=>{var e,t;return(t=(e=ef())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},$M=n=>{const e=bS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},CS=()=>{var n;return(n=ef())==null?void 0:n.config},xS=n=>{var e;return(e=ef())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function IS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XM(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Nd(JSON.stringify(t)),Nd(JSON.stringify(c)),""].join(".")}const iu={};function WM(){const n={prod:[],emulator:[]};for(const e of Object.keys(iu))iu[e]?n.emulator.push(e):n.prod.push(e);return n}function ZM(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let pT=!1;function wS(n,e){if(typeof window>"u"||typeof document>"u"||!qa(window.location.host)||iu[n]===e||iu[n]||pT)return;iu[n]=e;function t(A){return`__firebase__banner__${A}`}const s="__firebase__banner",l=WM().prod.length>0;function c(){const A=document.getElementById(s);A&&A.remove()}function d(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function p(A,x){A.setAttribute("width","24"),A.setAttribute("id",x),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function h(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{pT=!0,c()},A}function T(A,x){A.setAttribute("id",x),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function E(){const A=ZM(s),x=t("text"),k=document.getElementById(x)||document.createElement("span"),q=t("learnmore"),F=document.getElementById(q)||document.createElement("a"),Z=t("preprendIcon"),te=document.getElementById(Z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const $=A.element;d($),T(F,q);const z=h();p(te,Z),$.append(te,k,F,z),document.body.appendChild($)}l?(k.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function tD(){var e;const n=(e=ef())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iD(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function sD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rD(){const n=mn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function oD(){return!tD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aD(){try{return typeof indexedDB=="object"}catch{return!1}}function lD(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD="FirebaseError";class Ps extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=uD,Object.setPrototypeOf(this,Ps.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vu.prototype.create)}}class vu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?cD(l,s):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new Ps(o,d,s)}}function cD(n,e){return n.replace(dD,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const dD=/\{\$([^}]+)}/g;function fD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function fo(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=n[o],c=e[o];if(gT(l)&&gT(c)){if(!fo(l,c))return!1}else if(l!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function gT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Xl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Wl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function hD(n,e){const t=new mD(n,e);return t.subscribe.bind(t)}class mD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");pD(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=wm),o.error===void 0&&(o.error=wm),o.complete===void 0&&(o.complete=wm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pD(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function wm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(n){return n&&n._delegate?n._delegate:n}class ho{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new QM;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_D(e))try{this.getOrInitializeService({instanceIdentifier:ao})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=ao){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ao){return this.instances.has(e)}getOptions(e=ao){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&c.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:yD(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ao){return this.component?this.component.multipleInstances?e:ao:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yD(n){return n===ao?void 0:n}function _D(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new gD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(je||(je={}));const TD={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},ED=je.INFO,SD={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},AD=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=SD[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pp{constructor(e){this.name=e,this._logLevel=ED,this._logHandler=AD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const bD=(n,e)=>e.some(t=>n instanceof t);let yT,_T;function CD(){return yT||(yT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xD(){return _T||(_T=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const RS=new WeakMap,ep=new WeakMap,NS=new WeakMap,Rm=new WeakMap,Vp=new WeakMap;function ID(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(yr(n.result)),o()},c=()=>{s(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&RS.set(t,n)}).catch(()=>{}),Vp.set(e,n),e}function wD(n){if(ep.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});ep.set(n,e)}let tp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ep.get(n);if(e==="objectStoreNames")return n.objectStoreNames||NS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return yr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function RD(n){tp=n(tp)}function ND(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Nm(this),e,...t);return NS.set(s,e.sort?e.sort():[e]),yr(s)}:xD().includes(n)?function(...e){return n.apply(Nm(this),e),yr(RS.get(this))}:function(...e){return yr(n.apply(Nm(this),e))}}function MD(n){return typeof n=="function"?ND(n):(n instanceof IDBTransaction&&wD(n),bD(n,CD())?new Proxy(n,tp):n)}function yr(n){if(n instanceof IDBRequest)return ID(n);if(Rm.has(n))return Rm.get(n);const e=MD(n);return e!==n&&(Rm.set(n,e),Vp.set(e,n)),e}const Nm=n=>Vp.get(n);function DD(n,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),d=yr(c);return s&&c.addEventListener("upgradeneeded",p=>{s(yr(c.result),p.oldVersion,p.newVersion,yr(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",h=>o(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const PD=["get","getKey","getAll","getAllKeys","count"],VD=["put","add","delete","clear"],Mm=new Map;function vT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Mm.get(e))return Mm.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=VD.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||PD.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,o?"readwrite":"readonly");let h=p.store;return s&&(h=h.index(d.shift())),(await Promise.all([h[t](...d),o&&p.done]))[0]};return Mm.set(e,l),l}RD(n=>({...n,get:(e,t,s)=>vT(e,t)||n.get(e,t,s),has:(e,t)=>!!vT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(UD(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function UD(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const np="@firebase/app",TT="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=new Pp("@firebase/app"),LD="@firebase/app-compat",OD="@firebase/analytics-compat",qD="@firebase/analytics",BD="@firebase/app-check-compat",FD="@firebase/app-check",HD="@firebase/auth",zD="@firebase/auth-compat",GD="@firebase/database",jD="@firebase/data-connect",YD="@firebase/database-compat",JD="@firebase/functions",KD="@firebase/functions-compat",$D="@firebase/installations",QD="@firebase/installations-compat",XD="@firebase/messaging",WD="@firebase/messaging-compat",ZD="@firebase/performance",e2="@firebase/performance-compat",t2="@firebase/remote-config",n2="@firebase/remote-config-compat",i2="@firebase/storage",s2="@firebase/storage-compat",r2="@firebase/firestore",o2="@firebase/ai",a2="@firebase/firestore-compat",l2="firebase",u2="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip="[DEFAULT]",c2={[np]:"fire-core",[LD]:"fire-core-compat",[qD]:"fire-analytics",[OD]:"fire-analytics-compat",[FD]:"fire-app-check",[BD]:"fire-app-check-compat",[HD]:"fire-auth",[zD]:"fire-auth-compat",[GD]:"fire-rtdb",[jD]:"fire-data-connect",[YD]:"fire-rtdb-compat",[JD]:"fire-fn",[KD]:"fire-fn-compat",[$D]:"fire-iid",[QD]:"fire-iid-compat",[XD]:"fire-fcm",[WD]:"fire-fcm-compat",[ZD]:"fire-perf",[e2]:"fire-perf-compat",[t2]:"fire-rc",[n2]:"fire-rc-compat",[i2]:"fire-gcs",[s2]:"fire-gcs-compat",[r2]:"fire-fst",[a2]:"fire-fst-compat",[o2]:"fire-vertex","fire-js":"fire-js",[l2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md=new Map,d2=new Map,sp=new Map;function ET(n,e){try{n.container.addComponent(e)}catch(t){Is.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ia(n){const e=n.name;if(sp.has(e))return Is.debug(`There were multiple attempts to register component ${e}.`),!1;sp.set(e,n);for(const t of Md.values())ET(t,n);for(const t of d2.values())ET(t,n);return!0}function kp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Wn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_r=new vu("app","Firebase",f2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ho("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _r.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba=u2;function MS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:ip,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw _r.create("bad-app-name",{appName:String(o)});if(t||(t=CS()),!t)throw _r.create("no-options");const l=Md.get(o);if(l){if(fo(t,l.options)&&fo(s,l.config))return l;throw _r.create("duplicate-app",{appName:o})}const c=new vD(o);for(const p of sp.values())c.addComponent(p);const d=new h2(t,s,c);return Md.set(o,d),d}function DS(n=ip){const e=Md.get(n);if(!e&&n===ip&&CS())return MS();if(!e)throw _r.create("no-app",{appName:n});return e}function vr(n,e,t){let s=c2[n]??n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Is.warn(c.join(" "));return}Ia(new ho(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2="firebase-heartbeat-database",p2=1,cu="firebase-heartbeat-store";let Dm=null;function PS(){return Dm||(Dm=DD(m2,p2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(cu)}catch(t){console.warn(t)}}}}).catch(n=>{throw _r.create("idb-open",{originalErrorMessage:n.message})})),Dm}async function g2(n){try{const t=(await PS()).transaction(cu),s=await t.objectStore(cu).get(VS(n));return await t.done,s}catch(e){if(e instanceof Ps)Is.warn(e.message);else{const t=_r.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Is.warn(t.message)}}}async function ST(n,e){try{const s=(await PS()).transaction(cu,"readwrite");await s.objectStore(cu).put(e,VS(n)),await s.done}catch(t){if(t instanceof Ps)Is.warn(t.message);else{const s=_r.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Is.warn(s.message)}}}function VS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=1024,_2=30;class v2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new E2(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=AT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>_2){const c=S2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Is.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=AT(),{heartbeatsToSend:s,unsentEntries:o}=T2(this._heartbeatsCache.heartbeats),l=Nd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Is.warn(t),""}}}function AT(){return new Date().toISOString().substring(0,10)}function T2(n,e=y2){const t=[];let s=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),bT(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),bT(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class E2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aD()?lD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await g2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return ST(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return ST(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function bT(n){return Nd(JSON.stringify({version:2,heartbeats:n})).length}function S2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(n){Ia(new ho("platform-logger",e=>new kD(e),"PRIVATE")),Ia(new ho("heartbeat",e=>new v2(e),"PRIVATE")),vr(np,TT,n),vr(np,TT,"esm2020"),vr("fire-js","")}A2("");var b2="firebase",C2="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vr(b2,C2,"app");var CT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tr,kS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,N){function R(){}R.prototype=N.prototype,M.F=N.prototype,M.prototype=new R,M.prototype.constructor=M,M.D=function(D,V,L){for(var P=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)P[qe-2]=arguments[qe];return N.prototype[V].apply(D,P)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,N,R){R||(R=0);const D=Array(16);if(typeof N=="string")for(var V=0;V<16;++V)D[V]=N.charCodeAt(R++)|N.charCodeAt(R++)<<8|N.charCodeAt(R++)<<16|N.charCodeAt(R++)<<24;else for(V=0;V<16;++V)D[V]=N[R++]|N[R++]<<8|N[R++]<<16|N[R++]<<24;N=M.g[0],R=M.g[1],V=M.g[2];let L=M.g[3],P;P=N+(L^R&(V^L))+D[0]+3614090360&4294967295,N=R+(P<<7&4294967295|P>>>25),P=L+(V^N&(R^V))+D[1]+3905402710&4294967295,L=N+(P<<12&4294967295|P>>>20),P=V+(R^L&(N^R))+D[2]+606105819&4294967295,V=L+(P<<17&4294967295|P>>>15),P=R+(N^V&(L^N))+D[3]+3250441966&4294967295,R=V+(P<<22&4294967295|P>>>10),P=N+(L^R&(V^L))+D[4]+4118548399&4294967295,N=R+(P<<7&4294967295|P>>>25),P=L+(V^N&(R^V))+D[5]+1200080426&4294967295,L=N+(P<<12&4294967295|P>>>20),P=V+(R^L&(N^R))+D[6]+2821735955&4294967295,V=L+(P<<17&4294967295|P>>>15),P=R+(N^V&(L^N))+D[7]+4249261313&4294967295,R=V+(P<<22&4294967295|P>>>10),P=N+(L^R&(V^L))+D[8]+1770035416&4294967295,N=R+(P<<7&4294967295|P>>>25),P=L+(V^N&(R^V))+D[9]+2336552879&4294967295,L=N+(P<<12&4294967295|P>>>20),P=V+(R^L&(N^R))+D[10]+4294925233&4294967295,V=L+(P<<17&4294967295|P>>>15),P=R+(N^V&(L^N))+D[11]+2304563134&4294967295,R=V+(P<<22&4294967295|P>>>10),P=N+(L^R&(V^L))+D[12]+1804603682&4294967295,N=R+(P<<7&4294967295|P>>>25),P=L+(V^N&(R^V))+D[13]+4254626195&4294967295,L=N+(P<<12&4294967295|P>>>20),P=V+(R^L&(N^R))+D[14]+2792965006&4294967295,V=L+(P<<17&4294967295|P>>>15),P=R+(N^V&(L^N))+D[15]+1236535329&4294967295,R=V+(P<<22&4294967295|P>>>10),P=N+(V^L&(R^V))+D[1]+4129170786&4294967295,N=R+(P<<5&4294967295|P>>>27),P=L+(R^V&(N^R))+D[6]+3225465664&4294967295,L=N+(P<<9&4294967295|P>>>23),P=V+(N^R&(L^N))+D[11]+643717713&4294967295,V=L+(P<<14&4294967295|P>>>18),P=R+(L^N&(V^L))+D[0]+3921069994&4294967295,R=V+(P<<20&4294967295|P>>>12),P=N+(V^L&(R^V))+D[5]+3593408605&4294967295,N=R+(P<<5&4294967295|P>>>27),P=L+(R^V&(N^R))+D[10]+38016083&4294967295,L=N+(P<<9&4294967295|P>>>23),P=V+(N^R&(L^N))+D[15]+3634488961&4294967295,V=L+(P<<14&4294967295|P>>>18),P=R+(L^N&(V^L))+D[4]+3889429448&4294967295,R=V+(P<<20&4294967295|P>>>12),P=N+(V^L&(R^V))+D[9]+568446438&4294967295,N=R+(P<<5&4294967295|P>>>27),P=L+(R^V&(N^R))+D[14]+3275163606&4294967295,L=N+(P<<9&4294967295|P>>>23),P=V+(N^R&(L^N))+D[3]+4107603335&4294967295,V=L+(P<<14&4294967295|P>>>18),P=R+(L^N&(V^L))+D[8]+1163531501&4294967295,R=V+(P<<20&4294967295|P>>>12),P=N+(V^L&(R^V))+D[13]+2850285829&4294967295,N=R+(P<<5&4294967295|P>>>27),P=L+(R^V&(N^R))+D[2]+4243563512&4294967295,L=N+(P<<9&4294967295|P>>>23),P=V+(N^R&(L^N))+D[7]+1735328473&4294967295,V=L+(P<<14&4294967295|P>>>18),P=R+(L^N&(V^L))+D[12]+2368359562&4294967295,R=V+(P<<20&4294967295|P>>>12),P=N+(R^V^L)+D[5]+4294588738&4294967295,N=R+(P<<4&4294967295|P>>>28),P=L+(N^R^V)+D[8]+2272392833&4294967295,L=N+(P<<11&4294967295|P>>>21),P=V+(L^N^R)+D[11]+1839030562&4294967295,V=L+(P<<16&4294967295|P>>>16),P=R+(V^L^N)+D[14]+4259657740&4294967295,R=V+(P<<23&4294967295|P>>>9),P=N+(R^V^L)+D[1]+2763975236&4294967295,N=R+(P<<4&4294967295|P>>>28),P=L+(N^R^V)+D[4]+1272893353&4294967295,L=N+(P<<11&4294967295|P>>>21),P=V+(L^N^R)+D[7]+4139469664&4294967295,V=L+(P<<16&4294967295|P>>>16),P=R+(V^L^N)+D[10]+3200236656&4294967295,R=V+(P<<23&4294967295|P>>>9),P=N+(R^V^L)+D[13]+681279174&4294967295,N=R+(P<<4&4294967295|P>>>28),P=L+(N^R^V)+D[0]+3936430074&4294967295,L=N+(P<<11&4294967295|P>>>21),P=V+(L^N^R)+D[3]+3572445317&4294967295,V=L+(P<<16&4294967295|P>>>16),P=R+(V^L^N)+D[6]+76029189&4294967295,R=V+(P<<23&4294967295|P>>>9),P=N+(R^V^L)+D[9]+3654602809&4294967295,N=R+(P<<4&4294967295|P>>>28),P=L+(N^R^V)+D[12]+3873151461&4294967295,L=N+(P<<11&4294967295|P>>>21),P=V+(L^N^R)+D[15]+530742520&4294967295,V=L+(P<<16&4294967295|P>>>16),P=R+(V^L^N)+D[2]+3299628645&4294967295,R=V+(P<<23&4294967295|P>>>9),P=N+(V^(R|~L))+D[0]+4096336452&4294967295,N=R+(P<<6&4294967295|P>>>26),P=L+(R^(N|~V))+D[7]+1126891415&4294967295,L=N+(P<<10&4294967295|P>>>22),P=V+(N^(L|~R))+D[14]+2878612391&4294967295,V=L+(P<<15&4294967295|P>>>17),P=R+(L^(V|~N))+D[5]+4237533241&4294967295,R=V+(P<<21&4294967295|P>>>11),P=N+(V^(R|~L))+D[12]+1700485571&4294967295,N=R+(P<<6&4294967295|P>>>26),P=L+(R^(N|~V))+D[3]+2399980690&4294967295,L=N+(P<<10&4294967295|P>>>22),P=V+(N^(L|~R))+D[10]+4293915773&4294967295,V=L+(P<<15&4294967295|P>>>17),P=R+(L^(V|~N))+D[1]+2240044497&4294967295,R=V+(P<<21&4294967295|P>>>11),P=N+(V^(R|~L))+D[8]+1873313359&4294967295,N=R+(P<<6&4294967295|P>>>26),P=L+(R^(N|~V))+D[15]+4264355552&4294967295,L=N+(P<<10&4294967295|P>>>22),P=V+(N^(L|~R))+D[6]+2734768916&4294967295,V=L+(P<<15&4294967295|P>>>17),P=R+(L^(V|~N))+D[13]+1309151649&4294967295,R=V+(P<<21&4294967295|P>>>11),P=N+(V^(R|~L))+D[4]+4149444226&4294967295,N=R+(P<<6&4294967295|P>>>26),P=L+(R^(N|~V))+D[11]+3174756917&4294967295,L=N+(P<<10&4294967295|P>>>22),P=V+(N^(L|~R))+D[2]+718787259&4294967295,V=L+(P<<15&4294967295|P>>>17),P=R+(L^(V|~N))+D[9]+3951481745&4294967295,M.g[0]=M.g[0]+N&4294967295,M.g[1]=M.g[1]+(V+(P<<21&4294967295|P>>>11))&4294967295,M.g[2]=M.g[2]+V&4294967295,M.g[3]=M.g[3]+L&4294967295}s.prototype.v=function(M,N){N===void 0&&(N=M.length);const R=N-this.blockSize,D=this.C;let V=this.h,L=0;for(;L<N;){if(V==0)for(;L<=R;)o(this,M,L),L+=this.blockSize;if(typeof M=="string"){for(;L<N;)if(D[V++]=M.charCodeAt(L++),V==this.blockSize){o(this,D),V=0;break}}else for(;L<N;)if(D[V++]=M[L++],V==this.blockSize){o(this,D),V=0;break}}this.h=V,this.o+=N},s.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var N=1;N<M.length-8;++N)M[N]=0;N=this.o*8;for(var R=M.length-8;R<M.length;++R)M[R]=N&255,N/=256;for(this.v(M),M=Array(16),N=0,R=0;R<4;++R)for(let D=0;D<32;D+=8)M[N++]=this.g[R]>>>D&255;return M};function l(M,N){var R=d;return Object.prototype.hasOwnProperty.call(R,M)?R[M]:R[M]=N(M)}function c(M,N){this.h=N;const R=[];let D=!0;for(let V=M.length-1;V>=0;V--){const L=M[V]|0;D&&L==N||(R[V]=L,D=!1)}this.g=R}var d={};function p(M){return-128<=M&&M<128?l(M,function(N){return new c([N|0],N<0?-1:0)}):new c([M|0],M<0?-1:0)}function h(M){if(isNaN(M)||!isFinite(M))return E;if(M<0)return F(h(-M));const N=[];let R=1;for(let D=0;M>=R;D++)N[D]=M/R|0,R*=4294967296;return new c(N,0)}function T(M,N){if(M.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(M.charAt(0)=="-")return F(T(M.substring(1),N));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=h(Math.pow(N,8));let D=E;for(let L=0;L<M.length;L+=8){var V=Math.min(8,M.length-L);const P=parseInt(M.substring(L,L+V),N);V<8?(V=h(Math.pow(N,V)),D=D.j(V).add(h(P))):(D=D.j(R),D=D.add(h(P)))}return D}var E=p(0),A=p(1),x=p(16777216);n=c.prototype,n.m=function(){if(q(this))return-F(this).m();let M=0,N=1;for(let R=0;R<this.g.length;R++){const D=this.i(R);M+=(D>=0?D:4294967296+D)*N,N*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(k(this))return"0";if(q(this))return"-"+F(this).toString(M);const N=h(Math.pow(M,6));var R=this;let D="";for(;;){const V=z(R,N).g;R=Z(R,V.j(N));let L=((R.g.length>0?R.g[0]:R.h)>>>0).toString(M);if(R=V,k(R))return L+D;for(;L.length<6;)L="0"+L;D=L+D}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function k(M){if(M.h!=0)return!1;for(let N=0;N<M.g.length;N++)if(M.g[N]!=0)return!1;return!0}function q(M){return M.h==-1}n.l=function(M){return M=Z(this,M),q(M)?-1:k(M)?0:1};function F(M){const N=M.g.length,R=[];for(let D=0;D<N;D++)R[D]=~M.g[D];return new c(R,~M.h).add(A)}n.abs=function(){return q(this)?F(this):this},n.add=function(M){const N=Math.max(this.g.length,M.g.length),R=[];let D=0;for(let V=0;V<=N;V++){let L=D+(this.i(V)&65535)+(M.i(V)&65535),P=(L>>>16)+(this.i(V)>>>16)+(M.i(V)>>>16);D=P>>>16,L&=65535,P&=65535,R[V]=P<<16|L}return new c(R,R[R.length-1]&-2147483648?-1:0)};function Z(M,N){return M.add(F(N))}n.j=function(M){if(k(this)||k(M))return E;if(q(this))return q(M)?F(this).j(F(M)):F(F(this).j(M));if(q(M))return F(this.j(F(M)));if(this.l(x)<0&&M.l(x)<0)return h(this.m()*M.m());const N=this.g.length+M.g.length,R=[];for(var D=0;D<2*N;D++)R[D]=0;for(D=0;D<this.g.length;D++)for(let V=0;V<M.g.length;V++){const L=this.i(D)>>>16,P=this.i(D)&65535,qe=M.i(V)>>>16,it=M.i(V)&65535;R[2*D+2*V]+=P*it,te(R,2*D+2*V),R[2*D+2*V+1]+=L*it,te(R,2*D+2*V+1),R[2*D+2*V+1]+=P*qe,te(R,2*D+2*V+1),R[2*D+2*V+2]+=L*qe,te(R,2*D+2*V+2)}for(M=0;M<N;M++)R[M]=R[2*M+1]<<16|R[2*M];for(M=N;M<2*N;M++)R[M]=0;return new c(R,0)};function te(M,N){for(;(M[N]&65535)!=M[N];)M[N+1]+=M[N]>>>16,M[N]&=65535,N++}function $(M,N){this.g=M,this.h=N}function z(M,N){if(k(N))throw Error("division by zero");if(k(M))return new $(E,E);if(q(M))return N=z(F(M),N),new $(F(N.g),F(N.h));if(q(N))return N=z(M,F(N)),new $(F(N.g),N.h);if(M.g.length>30){if(q(M)||q(N))throw Error("slowDivide_ only works with positive integers.");for(var R=A,D=N;D.l(M)<=0;)R=ae(R),D=ae(D);var V=ce(R,1),L=ce(D,1);for(D=ce(D,2),R=ce(R,2);!k(D);){var P=L.add(D);P.l(M)<=0&&(V=V.add(R),L=P),D=ce(D,1),R=ce(R,1)}return N=Z(M,V.j(N)),new $(V,N)}for(V=E;M.l(N)>=0;){for(R=Math.max(1,Math.floor(M.m()/N.m())),D=Math.ceil(Math.log(R)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),L=h(R),P=L.j(N);q(P)||P.l(M)>0;)R-=D,L=h(R),P=L.j(N);k(L)&&(L=A),V=V.add(L),M=Z(M,P)}return new $(V,M)}n.B=function(M){return z(this,M).h},n.and=function(M){const N=Math.max(this.g.length,M.g.length),R=[];for(let D=0;D<N;D++)R[D]=this.i(D)&M.i(D);return new c(R,this.h&M.h)},n.or=function(M){const N=Math.max(this.g.length,M.g.length),R=[];for(let D=0;D<N;D++)R[D]=this.i(D)|M.i(D);return new c(R,this.h|M.h)},n.xor=function(M){const N=Math.max(this.g.length,M.g.length),R=[];for(let D=0;D<N;D++)R[D]=this.i(D)^M.i(D);return new c(R,this.h^M.h)};function ae(M){const N=M.g.length+1,R=[];for(let D=0;D<N;D++)R[D]=M.i(D)<<1|M.i(D-1)>>>31;return new c(R,M.h)}function ce(M,N){const R=N>>5;N%=32;const D=M.g.length-R,V=[];for(let L=0;L<D;L++)V[L]=N>0?M.i(L+R)>>>N|M.i(L+R+1)<<32-N:M.i(L+R);return new c(V,M.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,kS=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=h,c.fromString=T,Tr=c}).apply(typeof CT<"u"?CT:typeof self<"u"?self:typeof window<"u"?window:{});var od=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var US,Zl,LS,gd,rp,OS,qS,BS;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof od=="object"&&od];for(var S=0;S<m.length;++S){var C=m[S];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var s=t(this);function o(m,S){if(S)e:{var C=s;m=m.split(".");for(var w=0;w<m.length-1;w++){var G=m[w];if(!(G in C))break e;C=C[G]}m=m[m.length-1],w=C[m],S=S(w),S!=w&&S!=null&&e(C,m,{configurable:!0,writable:!0,value:S})}}o("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(m){return m||function(S){var C=[],w;for(w in S)Object.prototype.hasOwnProperty.call(S,w)&&C.push([w,S[w]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(m){var S=typeof m;return S=="object"&&m!=null||S=="function"}function p(m,S,C){return m.call.apply(m.bind,arguments)}function h(m,S,C){return h=p,h.apply(null,arguments)}function T(m,S){var C=Array.prototype.slice.call(arguments,1);return function(){var w=C.slice();return w.push.apply(w,arguments),m.apply(this,w)}}function E(m,S){function C(){}C.prototype=S.prototype,m.Z=S.prototype,m.prototype=new C,m.prototype.constructor=m,m.Ob=function(w,G,Q){for(var fe=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)fe[Ue-2]=arguments[Ue];return S.prototype[G].apply(w,fe)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function x(m){const S=m.length;if(S>0){const C=Array(S);for(let w=0;w<S;w++)C[w]=m[w];return C}return[]}function k(m,S){for(let w=1;w<arguments.length;w++){const G=arguments[w];var C=typeof G;if(C=C!="object"?C:G?Array.isArray(G)?"array":C:"null",C=="array"||C=="object"&&typeof G.length=="number"){C=m.length||0;const Q=G.length||0;m.length=C+Q;for(let fe=0;fe<Q;fe++)m[C+fe]=G[fe]}else m.push(G)}}class q{constructor(S,C){this.i=S,this.j=C,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function F(m){c.setTimeout(()=>{throw m},0)}function Z(){var m=M;let S=null;return m.g&&(S=m.g,m.g=m.g.next,m.g||(m.h=null),S.next=null),S}class te{constructor(){this.h=this.g=null}add(S,C){const w=$.get();w.set(S,C),this.h?this.h.next=w:this.g=w,this.h=w}}var $=new q(()=>new z,m=>m.reset());class z{constructor(){this.next=this.g=this.h=null}set(S,C){this.h=S,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,ce=!1,M=new te,N=()=>{const m=Promise.resolve(void 0);ae=()=>{m.then(R)}};function R(){for(var m;m=Z();){try{m.h.call(m.g)}catch(C){F(C)}var S=$;S.j(m),S.h<100&&(S.h++,m.next=S.g,S.g=m)}ce=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(m,S){this.type=m,this.g=this.target=S,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,S=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const C=()=>{};c.addEventListener("test",C,S),c.removeEventListener("test",C,S)}catch{}return m})();function P(m){return/^[\s\xa0]*$/.test(m)}function qe(m,S){V.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,S)}E(qe,V),qe.prototype.init=function(m,S){const C=this.type=m.type,w=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=S,S=m.relatedTarget,S||(C=="mouseover"?S=m.fromElement:C=="mouseout"&&(S=m.toElement)),this.relatedTarget=S,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&qe.Z.h.call(this)},qe.prototype.h=function(){qe.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var it="closure_listenable_"+(Math.random()*1e6|0),W=0;function K(m,S,C,w,G){this.listener=m,this.proxy=null,this.src=S,this.type=C,this.capture=!!w,this.ha=G,this.key=++W,this.da=this.fa=!1}function ue(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Ee(m,S,C){for(const w in m)S.call(C,m[w],w,m)}function Me(m,S){for(const C in m)S.call(void 0,m[C],C,m)}function O(m){const S={};for(const C in m)S[C]=m[C];return S}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(m,S){let C,w;for(let G=1;G<arguments.length;G++){w=arguments[G];for(C in w)m[C]=w[C];for(let Q=0;Q<ne.length;Q++)C=ne[Q],Object.prototype.hasOwnProperty.call(w,C)&&(m[C]=w[C])}}function me(m){this.src=m,this.g={},this.h=0}me.prototype.add=function(m,S,C,w,G){const Q=m.toString();m=this.g[Q],m||(m=this.g[Q]=[],this.h++);const fe=ke(m,S,w,G);return fe>-1?(S=m[fe],C||(S.fa=!1)):(S=new K(S,this.src,Q,!!w,G),S.fa=C,m.push(S)),S};function Ne(m,S){const C=S.type;if(C in m.g){var w=m.g[C],G=Array.prototype.indexOf.call(w,S,void 0),Q;(Q=G>=0)&&Array.prototype.splice.call(w,G,1),Q&&(ue(S),m.g[C].length==0&&(delete m.g[C],m.h--))}}function ke(m,S,C,w){for(let G=0;G<m.length;++G){const Q=m[G];if(!Q.da&&Q.listener==S&&Q.capture==!!C&&Q.ha==w)return G}return-1}var He="closure_lm_"+(Math.random()*1e6|0),xt={};function ie(m,S,C,w,G){if(Array.isArray(S)){for(let Q=0;Q<S.length;Q++)ie(m,S[Q],C,w,G);return null}return C=Dr(C),m&&m[it]?m.J(S,C,d(w)?!!w.capture:!1,G):Te(m,S,C,!1,w,G)}function Te(m,S,C,w,G,Q){if(!S)throw Error("Invalid event type");const fe=d(G)?!!G.capture:!!G;let Ue=Ti(m);if(Ue||(m[He]=Ue=new me(m)),C=Ue.add(S,C,w,fe,Q),C.proxy)return C;if(w=ge(),C.proxy=w,w.src=m,w.listener=C,m.addEventListener)L||(G=fe),G===void 0&&(G=!1),m.addEventListener(S.toString(),w,G);else if(m.attachEvent)m.attachEvent(jt(S.toString()),w);else if(m.addListener&&m.removeListener)m.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return C}function ge(){function m(C){return S.call(m.src,m.listener,C)}const S=ks;return m}function be(m,S,C,w,G){if(Array.isArray(S))for(var Q=0;Q<S.length;Q++)be(m,S[Q],C,w,G);else w=d(w)?!!w.capture:!!w,C=Dr(C),m&&m[it]?(m=m.i,Q=String(S).toString(),Q in m.g&&(S=m.g[Q],C=ke(S,C,w,G),C>-1&&(ue(S[C]),Array.prototype.splice.call(S,C,1),S.length==0&&(delete m.g[Q],m.h--)))):m&&(m=Ti(m))&&(S=m.g[S.toString()],m=-1,S&&(m=ke(S,C,w,G)),(C=m>-1?S[m]:null)&&Ze(C))}function Ze(m){if(typeof m!="number"&&m&&!m.da){var S=m.src;if(S&&S[it])Ne(S.i,m);else{var C=m.type,w=m.proxy;S.removeEventListener?S.removeEventListener(C,w,m.capture):S.detachEvent?S.detachEvent(jt(C),w):S.addListener&&S.removeListener&&S.removeListener(w),(C=Ti(S))?(Ne(C,m),C.h==0&&(C.src=null,S[He]=null)):ue(m)}}}function jt(m){return m in xt?xt[m]:xt[m]="on"+m}function ks(m,S){if(m.da)m=!0;else{S=new qe(S,this);const C=m.listener,w=m.ha||m.src;m.fa&&Ze(m),m=C.call(w,S)}return m}function Ti(m){return m=m[He],m instanceof me?m:null}var Mr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Dr(m){return typeof m=="function"?m:(m[Mr]||(m[Mr]=function(S){return m.handleEvent(S)}),m[Mr])}function St(){D.call(this),this.i=new me(this),this.M=this,this.G=null}E(St,D),St.prototype[it]=!0,St.prototype.removeEventListener=function(m,S,C,w){be(this,m,S,C,w)};function It(m,S){var C,w=m.G;if(w)for(C=[];w;w=w.G)C.push(w);if(m=m.M,w=S.type||S,typeof S=="string")S=new V(S,m);else if(S instanceof V)S.target=S.target||m;else{var G=S;S=new V(w,m),de(S,G)}G=!0;let Q,fe;if(C)for(fe=C.length-1;fe>=0;fe--)Q=S.g=C[fe],G=pe(Q,w,!0,S)&&G;if(Q=S.g=m,G=pe(Q,w,!0,S)&&G,G=pe(Q,w,!1,S)&&G,C)for(fe=0;fe<C.length;fe++)Q=S.g=C[fe],G=pe(Q,w,!1,S)&&G}St.prototype.N=function(){if(St.Z.N.call(this),this.i){var m=this.i;for(const S in m.g){const C=m.g[S];for(let w=0;w<C.length;w++)ue(C[w]);delete m.g[S],m.h--}}this.G=null},St.prototype.J=function(m,S,C,w){return this.i.add(String(m),S,!1,C,w)},St.prototype.K=function(m,S,C,w){return this.i.add(String(m),S,!0,C,w)};function pe(m,S,C,w){if(S=m.i.g[String(S)],!S)return!0;S=S.concat();let G=!0;for(let Q=0;Q<S.length;++Q){const fe=S[Q];if(fe&&!fe.da&&fe.capture==C){const Ue=fe.listener,Nt=fe.ha||fe.src;fe.fa&&Ne(m.i,fe),G=Ue.call(Nt,w)!==!1&&G}}return G&&!w.defaultPrevented}function wt(m,S){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:c.setTimeout(m,S||0)}function In(m){m.g=wt(()=>{m.g=null,m.i&&(m.i=!1,In(m))},m.l);const S=m.h;m.h=null,m.m.apply(null,S)}class ht extends D{constructor(S,C){super(),this.m=S,this.l=C,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:In(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wn(m){D.call(this),this.h=m,this.g={}}E(wn,D);var et=[];function Ya(m){Ee(m.g,function(S,C){this.g.hasOwnProperty(C)&&Ze(S)},m),m.g={}}wn.prototype.N=function(){wn.Z.N.call(this),Ya(this)},wn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Us=c.JSON.stringify,Af=c.JSON.parse,Mu=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function Du(){}function Pu(){}var ti={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function tn(){V.call(this,"d")}E(tn,V);function qn(){V.call(this,"c")}E(qn,V);var Rt={},Vu=null;function Co(){return Vu=Vu||new St}Rt.Ia="serverreachability";function ku(m){V.call(this,Rt.Ia,m)}E(ku,V);function Ei(m){const S=Co();It(S,new ku(S))}Rt.STAT_EVENT="statevent";function Pr(m,S){V.call(this,Rt.STAT_EVENT,m),this.stat=S}E(Pr,V);function Vt(m){const S=Co();It(S,new Pr(S,m))}Rt.Ja="timingevent";function Si(m,S){V.call(this,Rt.Ja,m),this.size=S}E(Si,V);function Ai(m,S){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},S)}function ni(){this.g=!0}ni.prototype.ua=function(){this.g=!1};function bf(m,S,C,w,G,Q){m.info(function(){if(m.g)if(Q){var fe="",Ue=Q.split("&");for(let tt=0;tt<Ue.length;tt++){var Nt=Ue[tt].split("=");if(Nt.length>1){const vt=Nt[0];Nt=Nt[1];const zn=vt.split("_");fe=zn.length>=2&&zn[1]=="type"?fe+(vt+"="+Nt+"&"):fe+(vt+"=redacted&")}}}else fe=null;else fe=Q;return"XMLHTTP REQ ("+w+") [attempt "+G+"]: "+S+`
`+C+`
`+fe})}function Uu(m,S,C,w,G,Q,fe){m.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+G+"]: "+S+`
`+C+`
`+Q+" "+fe})}function bi(m,S,C,w){m.info(function(){return"XMLHTTP TEXT ("+S+"): "+Cf(m,C)+(w?" "+w:"")})}function Vr(m,S){m.info(function(){return"TIMEOUT: "+S})}ni.prototype.info=function(){};function Cf(m,S){if(!m.g)return S;if(!S)return null;try{const Q=JSON.parse(S);if(Q){for(m=0;m<Q.length;m++)if(Array.isArray(Q[m])){var C=Q[m];if(!(C.length<2)){var w=C[1];if(Array.isArray(w)&&!(w.length<1)){var G=w[0];if(G!="noop"&&G!="stop"&&G!="close")for(let fe=1;fe<w.length;fe++)w[fe]=""}}}}return Us(Q)}catch{return S}}var kr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ja={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ka;function Ur(){}E(Ur,Du),Ur.prototype.g=function(){return new XMLHttpRequest},Ka=new Ur;function Qi(m){return encodeURIComponent(String(m))}function Lu(m){var S=1;m=m.split(":");const C=[];for(;S>0&&m.length;)C.push(m.shift()),S--;return m.length&&C.push(m.join(":")),C}function ii(m,S,C,w){this.j=m,this.i=S,this.l=C,this.S=w||1,this.V=new wn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new si}function si(){this.i=null,this.g="",this.h=!1}var kt={},$t={};function Ci(m,S,C){m.M=1,m.A=Lr(Lt(S)),m.u=C,m.R=!0,xo(m,null)}function xo(m,S){m.F=Date.now(),xi(m),m.B=Lt(m.A);var C=m.B,w=m.S;Array.isArray(w)||(w=[String(w)]),No(C.i,"t",w),m.C=0,C=m.j.L,m.h=new si,m.g=Wu(m.j,C?S:null,!m.u),m.P>0&&(m.O=new ht(h(m.Y,m,m.g),m.P)),S=m.V,C=m.g,w=m.ba;var G="readystatechange";Array.isArray(G)||(G&&(et[0]=G.toString()),G=et);for(let Q=0;Q<G.length;Q++){const fe=ie(C,G[Q],w||S.handleEvent,!1,S.h||S);if(!fe)break;S.g[fe.key]=fe}S=m.J?O(m.J):{},m.u?(m.v||(m.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,S)):(m.v="GET",m.g.ea(m.B,m.v,null,S)),Ei(),bf(m.i,m.v,m.B,m.l,m.S,m.u)}ii.prototype.ba=function(m){m=m.target;const S=this.O;S&&ai(m)==3?S.j():this.Y(m)},ii.prototype.Y=function(m){try{if(m==this.g)e:{const Ue=ai(this.g),Nt=this.g.ya(),tt=this.g.ca();if(!(Ue<3)&&(Ue!=3||this.g&&(this.h.h||this.g.la()||nn(this.g)))){this.K||Ue!=4||Nt==7||(Nt==8||tt<=0?Ei(3):Ei(2)),Ii(this);var S=this.g.ca();this.X=S;var C=xf(this);if(this.o=S==200,Uu(this.i,this.v,this.B,this.l,this.S,Ue,S),this.o){if(this.U&&!this.L){t:{if(this.g){var w,G=this.g;if((w=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(w)){var Q=w;break t}}Q=null}if(m=Q)bi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wi(this,m);else{this.o=!1,this.m=3,Vt(12),Rn(this),Bn(this);break e}}if(this.R){m=!0;let vt;for(;!this.K&&this.C<C.length;)if(vt=qu(this,C),vt==$t){Ue==4&&(this.m=4,Vt(14),m=!1),bi(this.i,this.l,null,"[Incomplete Response]");break}else if(vt==kt){this.m=4,Vt(15),bi(this.i,this.l,C,"[Invalid Chunk]"),m=!1;break}else bi(this.i,this.l,vt,null),wi(this,vt);if(Ou(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ue!=4||C.length!=0||this.h.h||(this.m=1,Vt(16),m=!1),this.o=this.o&&m,!m)bi(this.i,this.l,C,"[Invalid Chunked Response]"),Rn(this),Bn(this);else if(C.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),ul(fe),fe.P=!0,Vt(11))}}else bi(this.i,this.l,C,null),wi(this,C);Ue==4&&Rn(this),this.o&&!this.K&&(Ue==4?Ku(this.j,this):(this.o=!1,xi(this)))}else Wi(this.g),S==400&&C.indexOf("Unknown SID")>0?(this.m=3,Vt(12)):(this.m=0,Vt(13)),Rn(this),Bn(this)}}}catch{}finally{}};function xf(m){if(!Ou(m))return m.g.la();const S=nn(m.g);if(S==="")return"";let C="";const w=S.length,G=ai(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Rn(m),Bn(m),"";m.h.i=new c.TextDecoder}for(let Q=0;Q<w;Q++)m.h.h=!0,C+=m.h.i.decode(S[Q],{stream:!(G&&Q==w-1)});return S.length=0,m.h.g+=C,m.C=0,m.h.g}function Ou(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function qu(m,S){var C=m.C,w=S.indexOf(`
`,C);return w==-1?$t:(C=Number(S.substring(C,w)),isNaN(C)?kt:(w+=1,w+C>S.length?$t:(S=S.slice(w,w+C),m.C=w+C,S)))}ii.prototype.cancel=function(){this.K=!0,Rn(this)};function xi(m){m.T=Date.now()+m.H,Io(m,m.H)}function Io(m,S){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Ai(h(m.aa,m),S)}function Ii(m){m.D&&(c.clearTimeout(m.D),m.D=null)}ii.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Vr(this.i,this.B),this.M!=2&&(Ei(),Vt(17)),Rn(this),this.m=2,Bn(this)):Io(this,this.T-m)};function Bn(m){m.j.I==0||m.K||Ku(m.j,m)}function Rn(m){Ii(m);var S=m.O;S&&typeof S.dispose=="function"&&S.dispose(),m.O=null,Ya(m.V),m.g&&(S=m.g,m.g=null,S.abort(),S.dispose())}function wi(m,S){try{var C=m.j;if(C.I!=0&&(C.g==m||Ni(C.h,m))){if(!m.L&&Ni(C.h,m)&&C.I==3){try{var w=C.Ba.g.parse(S)}catch{w=null}if(Array.isArray(w)&&w.length==3){var G=w;if(G[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<m.F)ko(C),Gs(C);else break e;Gr(C),Vt(18)}}else C.xa=G[1],0<C.xa-C.K&&G[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=Ai(h(C.Va,C),6e3));Ri(C.h)<=1&&C.ta&&(C.ta=void 0)}else Ui(C,11)}else if((m.L||C.g==m)&&ko(C),!P(S))for(G=C.Ba.g.parse(S),S=0;S<G.length;S++){let tt=G[S];const vt=tt[0];if(!(vt<=C.K))if(C.K=vt,tt=tt[1],C.I==2)if(tt[0]=="c"){C.M=tt[1],C.ba=tt[2];const zn=tt[3];zn!=null&&(C.ka=zn,C.j.info("VER="+C.ka));const Li=tt[4];Li!=null&&(C.za=Li,C.j.info("SVER="+C.za));const li=tt[5];li!=null&&typeof li=="number"&&li>0&&(w=1.5*li,C.O=w,C.j.info("backChannelRequestTimeoutMs_="+w)),w=C;const ui=m.g;if(ui){const jr=ui.g?ui.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jr){var Q=w.h;Q.g||jr.indexOf("spdy")==-1&&jr.indexOf("quic")==-1&&jr.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Xa(Q,Q.h),Q.h=null))}if(w.G){const Uo=ui.g?ui.g.getResponseHeader("X-HTTP-Session-Id"):null;Uo&&(w.wa=Uo,rt(w.J,w.G,Uo))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-m.F,C.j.info("Handshake RTT: "+C.T+"ms")),w=C;var fe=m;if(w.na=Xu(w,w.L?w.ba:null,w.W),fe.L){Wa(w.h,fe);var Ue=fe,Nt=w.O;Nt&&(Ue.H=Nt),Ue.D&&(Ii(Ue),xi(Ue)),w.g=fe}else Yu(w);C.i.length>0&&ki(C)}else tt[0]!="stop"&&tt[0]!="close"||Ui(C,7);else C.I==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?Ui(C,7):al(C):tt[0]!="noop"&&C.l&&C.l.qa(tt),C.A=0)}}Ei(4)}catch{}}var Ut=class{constructor(m,S){this.g=m,this.map=S}};function $a(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Qa(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Ri(m){return m.h?1:m.g?m.g.size:0}function Ni(m,S){return m.h?m.h==S:m.g?m.g.has(S):!1}function Xa(m,S){m.g?m.g.add(S):m.h=S}function Wa(m,S){m.h&&m.h==S?m.h=null:m.g&&m.g.has(S)&&m.g.delete(S)}$a.prototype.cancel=function(){if(this.i=Za(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Za(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let S=m.i;for(const C of m.g.values())S=S.concat(C.G);return S}return x(m.i)}var Bu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wo(m,S){if(m){m=m.split("&");for(let C=0;C<m.length;C++){const w=m[C].indexOf("=");let G,Q=null;w>=0?(G=m[C].substring(0,w),Q=m[C].substring(w+1)):G=m[C],S(G,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Nn(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;m instanceof Nn?(this.l=m.l,Qt(this,m.j),this.o=m.o,this.g=m.g,Ls(this,m.u),this.h=m.h,el(this,Gu(m.i)),this.m=m.m):m&&(S=String(m).match(Bu))?(this.l=!1,Qt(this,S[1]||"",!0),this.o=Mi(S[2]||""),this.g=Mi(S[3]||"",!0),Ls(this,S[4]),this.h=Mi(S[5]||"",!0),el(this,S[6]||"",!0),this.m=Mi(S[7]||"")):(this.l=!1,this.i=new qs(null,this.l))}Nn.prototype.toString=function(){const m=[];var S=this.j;S&&m.push(Or(S,Ro,!0),":");var C=this.g;return(C||S=="file")&&(m.push("//"),(S=this.o)&&m.push(Or(S,Ro,!0),"@"),m.push(Qi(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&m.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&m.push("/"),m.push(Or(C,C.charAt(0)=="/"?tl:Fu,!0))),(C=this.i.toString())&&m.push("?",C),(C=this.m)&&m.push("#",Or(C,Hu)),m.join("")},Nn.prototype.resolve=function(m){const S=Lt(this);let C=!!m.j;C?Qt(S,m.j):C=!!m.o,C?S.o=m.o:C=!!m.g,C?S.g=m.g:C=m.u!=null;var w=m.h;if(C)Ls(S,m.u);else if(C=!!m.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var G=S.h.lastIndexOf("/");G!=-1&&(w=S.h.slice(0,G+1)+w)}if(G=w,G==".."||G==".")w="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){w=G.lastIndexOf("/",0)==0,G=G.split("/");const Q=[];for(let fe=0;fe<G.length;){const Ue=G[fe++];Ue=="."?w&&fe==G.length&&Q.push(""):Ue==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),w&&fe==G.length&&Q.push("")):(Q.push(Ue),w=!0)}w=Q.join("/")}else w=G}return C?S.h=w:C=m.i.toString()!=="",C?el(S,Gu(m.i)):C=!!m.m,C&&(S.m=m.m),S};function Lt(m){return new Nn(m)}function Qt(m,S,C){m.j=C?Mi(S,!0):S,m.j&&(m.j=m.j.replace(/:$/,""))}function Ls(m,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);m.u=S}else m.u=null}function el(m,S,C){S instanceof qs?(m.i=S,Mo(m.i,m.l)):(C||(S=Or(S,Os)),m.i=new qs(S,m.l))}function rt(m,S,C){m.i.set(S,C)}function Lr(m){return rt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Mi(m,S){return m?S?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Or(m,S,C){return typeof m=="string"?(m=encodeURI(m).replace(S,vn),C&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function vn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Ro=/[#\/\?@]/g,Fu=/[#\?:]/g,tl=/[#\?]/g,Os=/[#\?@]/g,Hu=/#/g;function qs(m,S){this.h=this.g=null,this.i=m||null,this.j=!!S}function Tn(m){m.g||(m.g=new Map,m.h=0,m.i&&wo(m.i,function(S,C){m.add(decodeURIComponent(S.replace(/\+/g," ")),C)}))}n=qs.prototype,n.add=function(m,S){Tn(this),this.i=null,m=Bs(this,m);let C=this.g.get(m);return C||this.g.set(m,C=[]),C.push(S),this.h+=1,this};function zu(m,S){Tn(m),S=Bs(m,S),m.g.has(S)&&(m.i=null,m.h-=m.g.get(S).length,m.g.delete(S))}function nl(m,S){return Tn(m),S=Bs(m,S),m.g.has(S)}n.forEach=function(m,S){Tn(this),this.g.forEach(function(C,w){C.forEach(function(G){m.call(S,G,w,this)},this)},this)};function il(m,S){Tn(m);let C=[];if(typeof S=="string")nl(m,S)&&(C=C.concat(m.g.get(Bs(m,S))));else for(m=Array.from(m.g.values()),S=0;S<m.length;S++)C=C.concat(m[S]);return C}n.set=function(m,S){return Tn(this),this.i=null,m=Bs(this,m),nl(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[S]),this.h+=1,this},n.get=function(m,S){return m?(m=il(this,m),m.length>0?String(m[0]):S):S};function No(m,S,C){zu(m,S),C.length>0&&(m.i=null,m.g.set(Bs(m,S),x(C)),m.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],S=Array.from(this.g.keys());for(let w=0;w<S.length;w++){var C=S[w];const G=Qi(C);C=il(this,C);for(let Q=0;Q<C.length;Q++){let fe=G;C[Q]!==""&&(fe+="="+Qi(C[Q])),m.push(fe)}}return this.i=m.join("&")};function Gu(m){const S=new qs;return S.i=m.i,m.g&&(S.g=new Map(m.g),S.h=m.h),S}function Bs(m,S){return S=String(S),m.j&&(S=S.toLowerCase()),S}function Mo(m,S){S&&!m.j&&(Tn(m),m.i=null,m.g.forEach(function(C,w){const G=w.toLowerCase();w!=G&&(zu(this,w),No(this,G,C))},m)),m.j=S}function ri(m,S){const C=new ni;if(c.Image){const w=new Image;w.onload=T(Fn,C,"TestLoadImage: loaded",!0,S,w),w.onerror=T(Fn,C,"TestLoadImage: error",!1,S,w),w.onabort=T(Fn,C,"TestLoadImage: abort",!1,S,w),w.ontimeout=T(Fn,C,"TestLoadImage: timeout",!1,S,w),c.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=m}else S(!1)}function sl(m,S){const C=new ni,w=new AbortController,G=setTimeout(()=>{w.abort(),Fn(C,"TestPingServer: timeout",!1,S)},1e4);fetch(m,{signal:w.signal}).then(Q=>{clearTimeout(G),Q.ok?Fn(C,"TestPingServer: ok",!0,S):Fn(C,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(G),Fn(C,"TestPingServer: error",!1,S)})}function Fn(m,S,C,w,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),w(C)}catch{}}function Fs(){this.g=new Mu}function Di(m){this.i=m.Sb||null,this.h=m.ab||!1}E(Di,Du),Di.prototype.g=function(){return new qr(this.i,this.h)};function qr(m,S){St.call(this),this.H=m,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(qr,St),n=qr.prototype,n.open=function(m,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=S,this.readyState=1,oi(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(S.body=m),(this.H||c).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Hs(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,oi(this)),this.g&&(this.readyState=3,oi(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Do(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Do(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var S=m.value?m.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!m.done}))&&(this.response=this.responseText+=S)}m.done?Hs(this):oi(this),this.readyState==3&&Do(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,Hs(this))},n.Na=function(m){this.g&&(this.response=m,Hs(this))},n.ga=function(){this.g&&Hs(this)};function Hs(m){m.readyState=4,m.l=null,m.j=null,m.B=null,oi(m)}n.setRequestHeader=function(m,S){this.A.append(m,S)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],S=this.h.entries();for(var C=S.next();!C.done;)C=C.value,m.push(C[0]+": "+C[1]),C=S.next();return m.join(`\r
`)};function oi(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(qr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Hn(m){let S="";return Ee(m,function(C,w){S+=w,S+=":",S+=C,S+=`\r
`}),S}function Br(m,S,C){e:{for(w in C){var w=!1;break e}w=!0}w||(C=Hn(C),typeof m=="string"?C!=null&&Qi(C):rt(m,S,C))}function lt(m){St.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(lt,St);var Pi=/^https?$/i,rl=["POST","PUT"];n=lt.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,S,C,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);S=S?S.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ka.g(),this.g.onreadystatechange=A(h(this.Ca,this));try{this.B=!0,this.g.open(S,String(m),!0),this.B=!1}catch(Q){Fr(this,Q);return}if(m=C||"",C=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var G in w)C.set(G,w[G]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Q of w.keys())C.set(Q,w.get(Q));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(C.keys()).find(Q=>Q.toLowerCase()=="content-type"),G=c.FormData&&m instanceof c.FormData,!(Array.prototype.indexOf.call(rl,S,void 0)>=0)||w||G||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,fe]of C)this.g.setRequestHeader(Q,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(Q){Fr(this,Q)}};function Fr(m,S){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=S,m.o=5,ol(m),Xi(m)}function ol(m){m.A||(m.A=!0,It(m,"complete"),It(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,It(this,"complete"),It(this,"abort"),Xi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xi(this,!0)),lt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Hr(this):this.Xa())},n.Xa=function(){Hr(this)};function Hr(m){if(m.h&&typeof l<"u"){if(m.v&&ai(m)==4)setTimeout(m.Ca.bind(m),0);else if(It(m,"readystatechange"),ai(m)==4){m.h=!1;try{const Q=m.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var C;if(!(C=S)){var w;if(w=Q===0){let fe=String(m.D).match(Bu)[1]||null;!fe&&c.self&&c.self.location&&(fe=c.self.location.protocol.slice(0,-1)),w=!Pi.test(fe?fe.toLowerCase():"")}C=w}if(C)It(m,"complete"),It(m,"success");else{m.o=6;try{var G=ai(m)>2?m.g.statusText:""}catch{G=""}m.l=G+" ["+m.ca()+"]",ol(m)}}finally{Xi(m)}}}}function Xi(m,S){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const C=m.g;m.g=null,S||It(m,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ai(m){return m.g?m.g.readyState:0}n.ca=function(){try{return ai(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var S=this.g.responseText;return m&&S.indexOf(m)==0&&(S=S.substring(m.length)),Af(S)}};function nn(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Wi(m){const S={};m=(m.g&&ai(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<m.length;w++){if(P(m[w]))continue;var C=Lu(m[w]);const G=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const Q=S[G]||[];S[G]=Q,Q.push(C)}Me(S,function(w){return w.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vi(m,S,C){return C&&C.internalChannelParams&&C.internalChannelParams[m]||S}function zs(m){this.za=0,this.i=[],this.j=new ni,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vi("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vi("baseRetryDelayMs",5e3,m),this.Za=Vi("retryDelaySeedMs",1e4,m),this.Ta=Vi("forwardChannelMaxRetries",2,m),this.va=Vi("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new $a(m&&m.concurrentRequestLimit),this.Ba=new Fs,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=zs.prototype,n.ka=8,n.I=1,n.connect=function(m,S,C,w){Vt(0),this.W=m,this.H=S||{},C&&w!==void 0&&(this.H.OSID=C,this.H.OAID=w),this.F=this.X,this.J=Xu(this,null,this.W),ki(this)};function al(m){if(Po(m),m.I==3){var S=m.V++,C=Lt(m.J);if(rt(C,"SID",m.M),rt(C,"RID",S),rt(C,"TYPE","terminate"),zr(m,C),S=new ii(m,m.j,S),S.M=2,S.A=Lr(Lt(C)),C=!1,c.navigator&&c.navigator.sendBeacon)try{C=c.navigator.sendBeacon(S.A.toString(),"")}catch{}!C&&c.Image&&(new Image().src=S.A,C=!0),C||(S.g=Wu(S.j,null),S.g.ea(S.A)),S.F=Date.now(),xi(S)}Qu(m)}function Gs(m){m.g&&(ul(m),m.g.cancel(),m.g=null)}function Po(m){Gs(m),m.v&&(c.clearTimeout(m.v),m.v=null),ko(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&c.clearTimeout(m.m),m.m=null)}function ki(m){if(!Qa(m.h)&&!m.m){m.m=!0;var S=m.Ea;ae||N(),ce||(ae(),ce=!0),M.add(S,m),m.D=0}}function Vo(m,S){return Ri(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=S.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Ai(h(m.Ea,m,S),$u(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const G=new ii(this,this.j,m);let Q=this.o;if(this.U&&(Q?(Q=O(Q),de(Q,this.U)):Q=this.U),this.u!==null||this.R||(G.J=Q,Q=null),this.S)e:{for(var S=0,C=0;C<this.i.length;C++){t:{var w=this.i[C];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(S+=w,S>4096){S=C;break e}if(S===4096||C===this.i.length-1){S=C+1;break e}}S=1e3}else S=1e3;S=ju(this,G,S),C=Lt(this.J),rt(C,"RID",m),rt(C,"CVER",22),this.G&&rt(C,"X-HTTP-Session-Id",this.G),zr(this,C),Q&&(this.R?S="headers="+Qi(Hn(Q))+"&"+S:this.u&&Br(C,this.u,Q)),Xa(this.h,G),this.Ra&&rt(C,"TYPE","init"),this.S?(rt(C,"$req",S),rt(C,"SID","null"),G.U=!0,Ci(G,C,null)):Ci(G,C,S),this.I=2}}else this.I==3&&(m?ll(this,m):this.i.length==0||Qa(this.h)||ll(this))};function ll(m,S){var C;S?C=S.l:C=m.V++;const w=Lt(m.J);rt(w,"SID",m.M),rt(w,"RID",C),rt(w,"AID",m.K),zr(m,w),m.u&&m.o&&Br(w,m.u,m.o),C=new ii(m,m.j,C,m.D+1),m.u===null&&(C.J=m.o),S&&(m.i=S.G.concat(m.i)),S=ju(m,C,1e3),C.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Xa(m.h,C),Ci(C,w,S)}function zr(m,S){m.H&&Ee(m.H,function(C,w){rt(S,w,C)}),m.l&&Ee({},function(C,w){rt(S,w,C)})}function ju(m,S,C){C=Math.min(m.i.length,C);const w=m.l?h(m.l.Ka,m.l,m):null;e:{var G=m.i;let Ue=-1;for(;;){const Nt=["count="+C];Ue==-1?C>0?(Ue=G[0].g,Nt.push("ofs="+Ue)):Ue=0:Nt.push("ofs="+Ue);let tt=!0;for(let vt=0;vt<C;vt++){var Q=G[vt].g;const zn=G[vt].map;if(Q-=Ue,Q<0)Ue=Math.max(0,G[vt].g-100),tt=!1;else try{Q="req"+Q+"_"||"";try{var fe=zn instanceof Map?zn:Object.entries(zn);for(const[Li,li]of fe){let ui=li;d(li)&&(ui=Us(li)),Nt.push(Q+Li+"="+encodeURIComponent(ui))}}catch(Li){throw Nt.push(Q+"type="+encodeURIComponent("_badmap")),Li}}catch{w&&w(zn)}}if(tt){fe=Nt.join("&");break e}}fe=void 0}return m=m.i.splice(0,C),S.G=m,fe}function Yu(m){if(!m.g&&!m.v){m.Y=1;var S=m.Da;ae||N(),ce||(ae(),ce=!0),M.add(S,m),m.A=0}}function Gr(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Ai(h(m.Da,m),$u(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,Ju(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Ai(h(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Vt(10),Gs(this),Ju(this))};function ul(m){m.B!=null&&(c.clearTimeout(m.B),m.B=null)}function Ju(m){m.g=new ii(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var S=Lt(m.na);rt(S,"RID","rpc"),rt(S,"SID",m.M),rt(S,"AID",m.K),rt(S,"CI",m.F?"0":"1"),!m.F&&m.ia&&rt(S,"TO",m.ia),rt(S,"TYPE","xmlhttp"),zr(m,S),m.u&&m.o&&Br(S,m.u,m.o),m.O&&(m.g.H=m.O);var C=m.g;m=m.ba,C.M=1,C.A=Lr(Lt(S)),C.u=null,C.R=!0,xo(C,m)}n.Va=function(){this.C!=null&&(this.C=null,Gs(this),Gr(this),Vt(19))};function ko(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function Ku(m,S){var C=null;if(m.g==S){ko(m),ul(m),m.g=null;var w=2}else if(Ni(m.h,S))C=S.G,Wa(m.h,S),w=1;else return;if(m.I!=0){if(S.o)if(w==1){C=S.u?S.u.length:0,S=Date.now()-S.F;var G=m.D;w=Co(),It(w,new Si(w,C)),ki(m)}else Yu(m);else if(G=S.m,G==3||G==0&&S.X>0||!(w==1&&Vo(m,S)||w==2&&Gr(m)))switch(C&&C.length>0&&(S=m.h,S.i=S.i.concat(C)),G){case 1:Ui(m,5);break;case 4:Ui(m,10);break;case 3:Ui(m,6);break;default:Ui(m,2)}}}function $u(m,S){let C=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(C*=2),C*S}function Ui(m,S){if(m.j.info("Error code "+S),S==2){var C=h(m.bb,m),w=m.Ua;const G=!w;w=new Nn(w||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Qt(w,"https"),Lr(w),G?ri(w.toString(),C):sl(w.toString(),C)}else Vt(2);m.I=0,m.l&&m.l.pa(S),Qu(m),Po(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function Qu(m){if(m.I=0,m.ja=[],m.l){const S=Za(m.h);(S.length!=0||m.i.length!=0)&&(k(m.ja,S),k(m.ja,m.i),m.h.i.length=0,x(m.i),m.i.length=0),m.l.oa()}}function Xu(m,S,C){var w=C instanceof Nn?Lt(C):new Nn(C);if(w.g!="")S&&(w.g=S+"."+w.g),Ls(w,w.u);else{var G=c.location;w=G.protocol,S=S?S+"."+G.hostname:G.hostname,G=+G.port;const Q=new Nn(null);w&&Qt(Q,w),S&&(Q.g=S),G&&Ls(Q,G),C&&(Q.h=C),w=Q}return C=m.G,S=m.wa,C&&S&&rt(w,C,S),rt(w,"VER",m.ka),zr(m,w),w}function Wu(m,S,C){if(S&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=m.Aa&&!m.ma?new lt(new Di({ab:C})):new lt(m.ma),S.Fa(m.L),S}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zu(){}n=Zu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function js(){}js.prototype.g=function(m,S){return new pn(m,S)};function pn(m,S){St.call(this),this.g=new zs(S),this.l=m,this.h=S&&S.messageUrlParams||null,m=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(m?m["X-WebChannel-Content-Type"]=S.messageContentType:m={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(m?m["X-WebChannel-Client-Profile"]=S.sa:m={"X-WebChannel-Client-Profile":S.sa}),this.g.U=m,(m=S&&S.Qb)&&!P(m)&&(this.g.u=m),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!P(S)&&(this.g.G=S,m=this.h,m!==null&&S in m&&(m=this.h,S in m&&delete m[S])),this.j=new Zi(this)}E(pn,St),pn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){al(this.g)},pn.prototype.o=function(m){var S=this.g;if(typeof m=="string"){var C={};C.__data__=m,m=C}else this.v&&(C={},C.__data__=Us(m),m=C);S.i.push(new Ut(S.Ya++,m)),S.I==3&&ki(S)},pn.prototype.N=function(){this.g.l=null,delete this.j,al(this.g),delete this.g,pn.Z.N.call(this)};function ec(m){tn.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var S=m.__sm__;if(S){e:{for(const C in S){m=C;break e}m=void 0}(this.i=m)&&(m=this.i,S=S!==null&&m in S?S[m]:void 0),this.data=S}else this.data=m}E(ec,tn);function tc(){qn.call(this),this.status=1}E(tc,qn);function Zi(m){this.g=m}E(Zi,Zu),Zi.prototype.ra=function(){It(this.g,"a")},Zi.prototype.qa=function(m){It(this.g,new ec(m))},Zi.prototype.pa=function(m){It(this.g,new tc)},Zi.prototype.oa=function(){It(this.g,"b")},js.prototype.createWebChannel=js.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,BS=function(){return new js},qS=function(){return Co()},OS=Rt,rp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},kr.NO_ERROR=0,kr.TIMEOUT=8,kr.HTTP_ERROR=6,gd=kr,Ja.COMPLETE="complete",LS=Ja,Pu.EventType=ti,ti.OPEN="a",ti.CLOSE="b",ti.ERROR="c",ti.MESSAGE="d",St.prototype.listen=St.prototype.J,Zl=Pu,lt.prototype.listenOnce=lt.prototype.K,lt.prototype.getLastError=lt.prototype.Ha,lt.prototype.getLastErrorCode=lt.prototype.ya,lt.prototype.getStatus=lt.prototype.ca,lt.prototype.getResponseJson=lt.prototype.La,lt.prototype.getResponseText=lt.prototype.la,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Fa,US=lt}).apply(typeof od<"u"?od:typeof self<"u"?self:typeof window<"u"?window:{});const xT="@firebase/firestore",IT="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fa="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=new Pp("@firebase/firestore");function fa(){return mo.logLevel}function ye(n,...e){if(mo.logLevel<=je.DEBUG){const t=e.map(Up);mo.debug(`Firestore (${Fa}): ${n}`,...t)}}function ws(n,...e){if(mo.logLevel<=je.ERROR){const t=e.map(Up);mo.error(`Firestore (${Fa}): ${n}`,...t)}}function po(n,...e){if(mo.logLevel<=je.WARN){const t=e.map(Up);mo.warn(`Firestore (${Fa}): ${n}`,...t)}}function Up(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,FS(n,s,t)}function FS(n,e,t){let s=`FIRESTORE (${Fa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw ws(s),new Error(s)}function st(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||FS(e,o,s)}function Ve(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends Ps{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(dn.UNAUTHENTICATED)))}shutdown(){}}class x2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class I2{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){st(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new bs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new bs,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new bs)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(st(typeof s.accessToken=="string",31837,{l:s}),new HS(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return st(e===null||typeof e=="string",2055,{h:e}),new dn(e)}}class w2{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class R2{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new w2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(dn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class wT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class N2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Wn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){st(this.o===void 0,3512);const s=l=>{l.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ye("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new wT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(st(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new wT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=M2(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Ye(n,e){return n<e?-1:n>e?1:0}function op(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const o=n.charAt(s),l=e.charAt(s);if(o!==l)return Pm(o)===Pm(l)?Ye(o,l):Pm(o)?1:-1}return Ye(n.length,e.length)}const D2=55296,P2=57343;function Pm(n){const e=n.charCodeAt(0);return e>=D2&&e<=P2}function wa(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="__name__";class Hi{constructor(e,t,s){t===void 0?t=0:t>e.length&&Re(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Re(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Hi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Hi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=Hi.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ye(e.length,t.length)}static compareSegments(e,t){const s=Hi.isNumericId(e),o=Hi.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Hi.extractNumericId(e).compare(Hi.extractNumericId(t)):op(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Tr.fromString(e.substring(4,e.length-2))}}class _t extends Hi{construct(e,t,s){return new _t(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Se(le.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new _t(t)}static emptyPath(){return new _t([])}}const V2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends Hi{construct(e,t,s){return new Zt(e,t,s)}static isValidIdentifier(e){return V2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===RT}static keyField(){return new Zt([RT])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new Se(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new Se(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Se(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(s+=d,o++):(l(),o++)}if(l(),c)throw new Se(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zt(t)}static emptyPath(){return new Zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.path=e}static fromPath(e){return new xe(_t.fromString(e))}static fromName(e){return new xe(_t.fromString(e).popFirst(5))}static empty(){return new xe(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return _t.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new _t(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(n,e,t){if(!t)throw new Se(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function jS(n,e,t,s){if(e===!0&&s===!0)throw new Se(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function NT(n){if(!xe.isDocumentKey(n))throw new Se(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function MT(n){if(xe.isDocumentKey(n))throw new Se(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function YS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Lp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Re(12329,{type:typeof n})}function Rs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Se(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Lp(n);throw new Se(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Eu(n,e){if(!YS(n))throw new Se(le.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(o&&typeof c!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new Se(le.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT=-62135596800,PT=1e6;class mt{static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*PT);return new mt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Se(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Se(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<DT)throw new Se(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/PT}_compareTo(e){return this.seconds===e.seconds?Ye(this.nanoseconds,e.nanoseconds):Ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:mt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Eu(e,mt._jsonSchema))return new mt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-DT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}mt._jsonSchemaVersion="firestore/timestamp/1.0",mt._jsonSchema={type:zt("string",mt._jsonSchemaVersion),seconds:zt("number"),nanoseconds:zt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new mt(0,0))}static max(){return new De(new mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du=-1;function k2(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=De.fromTimestamp(s===1e9?new mt(t+1,0):new mt(t,s));return new Sr(o,xe.empty(),e)}function U2(n){return new Sr(n.readTime,n.key,du)}class Sr{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Sr(De.min(),xe.empty(),du)}static max(){return new Sr(De.max(),xe.empty(),du)}}function L2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=xe.comparator(n.documentKey,e.documentKey),t!==0?t:Ye(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class q2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ha(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==O2)throw n;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.reject(t)}static resolve(e){return new oe(((t,s)=>{t(e)}))}static reject(e){return new oe(((t,s)=>{s(e)}))}static waitFor(e){return new oe(((t,s)=>{let o=0,l=0,c=!1;e.forEach((d=>{++o,d.next((()=>{++l,c&&l===o&&t()}),(p=>s(p)))})),c=!0,l===o&&t()}))}static or(e){let t=oe.resolve(!1);for(const s of e)t=t.next((o=>o?oe.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new oe(((s,o)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const h=p;t(e[h]).next((T=>{c[h]=T,++d,d===l&&s(c)}),(T=>o(T)))}}))}static doWhile(e,t){return new oe(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function B2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function za(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}nf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op=-1;function sf(n){return n==null}function Dd(n){return n===0&&1/n==-1/0}function F2(n){return typeof n=="number"&&Number.isInteger(n)&&!Dd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS="";function H2(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=VT(e)),e=z2(n.get(t),e);return VT(e)}function z2(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case JS:t+="";break;default:t+=l}}return t}function VT(n){return n+JS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function vo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function KS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,t){this.comparator=e,this.root=t||ln.EMPTY}insert(e,t){return new Et(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ad(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ad(this.root,e,this.comparator,!1)}getReverseIterator(){return new ad(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ad(this.root,e,this.comparator,!0)}}class ad{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ln{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??ln.RED,this.left=o??ln.EMPTY,this.right=l??ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new ln(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return ln.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Re(27949);return e+(this.isRed()?0:1)}}ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1;ln.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new ln(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new UT(this.data.getIterator())}getIteratorFrom(e){return new UT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Kt(this.comparator);return t.data=e,t}}class UT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this.fields=e,e.sort(Zt.comparator)}static empty(){return new mi([])}unionWith(e){let t=new Kt(Zt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new mi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wa(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new $S("Invalid base64 string: "+l):l}})(e);return new en(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new en(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const G2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ar(n){if(st(!!n,39018),typeof n=="string"){let e=0;const t=G2.exec(n);if(st(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Pt(n.seconds),nanos:Pt(n.nanos)}}function Pt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function br(n){return typeof n=="string"?en.fromBase64String(n):en.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="server_timestamp",XS="__type__",WS="__previous_value__",ZS="__local_write_time__";function qp(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[XS])==null?void 0:s.stringValue)===QS}function rf(n){const e=n.mapValue.fields[WS];return qp(e)?rf(e):e}function fu(n){const e=Ar(n.mapValue.fields[ZS].timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e,t,s,o,l,c,d,p,h,T){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=h,this.isUsingEmulator=T}}const Pd="(default)";class Ra{constructor(e,t){this.projectId=e,this.database=t||Pd}static empty(){return new Ra("","")}get isDefaultDatabase(){return this.database===Pd}isEqual(e){return e instanceof Ra&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="__type__",Y2="__max__",ld={mapValue:{}},tA="__vector__",Vd="value";function Cr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qp(n)?4:K2(n)?9007199254740991:J2(n)?10:11:Re(28295,{value:n})}function Ki(n,e){if(n===e)return!0;const t=Cr(n);if(t!==Cr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return fu(n).isEqual(fu(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Ar(o.timestampValue),d=Ar(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return br(o.bytesValue).isEqual(br(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return Pt(o.geoPointValue.latitude)===Pt(l.geoPointValue.latitude)&&Pt(o.geoPointValue.longitude)===Pt(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Pt(o.integerValue)===Pt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=Pt(o.doubleValue),d=Pt(l.doubleValue);return c===d?Dd(c)===Dd(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return wa(n.arrayValue.values||[],e.arrayValue.values||[],Ki);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},d=l.mapValue.fields||{};if(kT(c)!==kT(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Ki(c[p],d[p])))return!1;return!0})(n,e);default:return Re(52216,{left:n})}}function hu(n,e){return(n.values||[]).find((t=>Ki(t,e)))!==void 0}function Na(n,e){if(n===e)return 0;const t=Cr(n),s=Cr(e);if(t!==s)return Ye(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ye(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=Pt(l.integerValue||l.doubleValue),p=Pt(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return LT(n.timestampValue,e.timestampValue);case 4:return LT(fu(n),fu(e));case 5:return op(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=br(l),p=br(c);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let h=0;h<d.length&&h<p.length;h++){const T=Ye(d[h],p[h]);if(T!==0)return T}return Ye(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Ye(Pt(l.latitude),Pt(c.latitude));return d!==0?d:Ye(Pt(l.longitude),Pt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return OT(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var A,x,k,q;const d=l.fields||{},p=c.fields||{},h=(A=d[Vd])==null?void 0:A.arrayValue,T=(x=p[Vd])==null?void 0:x.arrayValue,E=Ye(((k=h==null?void 0:h.values)==null?void 0:k.length)||0,((q=T==null?void 0:T.values)==null?void 0:q.length)||0);return E!==0?E:OT(h,T)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===ld.mapValue&&c===ld.mapValue)return 0;if(l===ld.mapValue)return 1;if(c===ld.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),h=c.fields||{},T=Object.keys(h);p.sort(),T.sort();for(let E=0;E<p.length&&E<T.length;++E){const A=op(p[E],T[E]);if(A!==0)return A;const x=Na(d[p[E]],h[T[E]]);if(x!==0)return x}return Ye(p.length,T.length)})(n.mapValue,e.mapValue);default:throw Re(23264,{he:t})}}function LT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ye(n,e);const t=Ar(n),s=Ar(e),o=Ye(t.seconds,s.seconds);return o!==0?o:Ye(t.nanos,s.nanos)}function OT(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Na(t[o],s[o]);if(l)return l}return Ye(t.length,s.length)}function Ma(n){return ap(n)}function ap(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Ar(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return br(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return xe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=ap(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of s)l?l=!1:o+=",",o+=`${c}:${ap(t.fields[c])}`;return o+"}"})(n.mapValue):Re(61005,{value:n})}function yd(n){switch(Cr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=rf(n);return e?16+yd(e):16;case 5:return 2*n.stringValue.length;case 6:return br(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+yd(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let o=0;return vo(s.fields,((l,c)=>{o+=l.length+yd(c)})),o})(n.mapValue);default:throw Re(13486,{value:n})}}function lp(n){return!!n&&"integerValue"in n}function Bp(n){return!!n&&"arrayValue"in n}function qT(n){return!!n&&"nullValue"in n}function BT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function _d(n){return!!n&&"mapValue"in n}function J2(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[eA])==null?void 0:s.stringValue)===tA}function su(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return vo(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=su(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=su(n.arrayValue.values[t]);return e}return{...n}}function K2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Y2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.value=e}static empty(){return new Zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!_d(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=su(t)}setAll(e){let t=Zt.emptyPath(),s={},o=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,s,o),s={},o=[],t=d.popLast()}c?s[d.lastSegment()]=su(c):o.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());_d(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ki(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];_d(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){vo(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new Zn(su(this.value))}}function nA(n){const e=[];return vo(n.fields,((t,s)=>{const o=new Zt([t]);if(_d(s)){const l=nA(s.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new mi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,t,s,o,l,c,d){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new fn(e,0,De.min(),De.min(),De.min(),Zn.empty(),0)}static newFoundDocument(e,t,s,o){return new fn(e,1,t,De.min(),s,o,0)}static newNoDocument(e,t){return new fn(e,2,t,De.min(),De.min(),Zn.empty(),0)}static newUnknownDocument(e,t){return new fn(e,3,t,De.min(),De.min(),Zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,t){this.position=e,this.inclusive=t}}function FT(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?s=xe.comparator(xe.fromName(c.referenceValue),t.key):s=Na(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function HT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ki(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,t="asc"){this.field=e,this.dir=t}}function $2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{}class Jt extends iA{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new X2(e,t,s):t==="array-contains"?new eP(e,s):t==="in"?new tP(e,s):t==="not-in"?new nP(e,s):t==="array-contains-any"?new iP(e,s):new Jt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new W2(e,s):new Z2(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Na(t,this.value)):t!==null&&Cr(this.value)===Cr(t)&&this.matchesComparison(Na(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $i extends iA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new $i(e,t)}matches(e){return sA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function sA(n){return n.op==="and"}function rA(n){return Q2(n)&&sA(n)}function Q2(n){for(const e of n.filters)if(e instanceof $i)return!1;return!0}function up(n){if(n instanceof Jt)return n.field.canonicalString()+n.op.toString()+Ma(n.value);if(rA(n))return n.filters.map((e=>up(e))).join(",");{const e=n.filters.map((t=>up(t))).join(",");return`${n.op}(${e})`}}function oA(n,e){return n instanceof Jt?(function(s,o){return o instanceof Jt&&s.op===o.op&&s.field.isEqual(o.field)&&Ki(s.value,o.value)})(n,e):n instanceof $i?(function(s,o){return o instanceof $i&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,c,d)=>l&&oA(c,o.filters[d])),!0):!1})(n,e):void Re(19439)}function aA(n){return n instanceof Jt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ma(t.value)}`})(n):n instanceof $i?(function(t){return t.op.toString()+" {"+t.getFilters().map(aA).join(" ,")+"}"})(n):"Filter"}class X2 extends Jt{constructor(e,t,s){super(e,t,s),this.key=xe.fromName(s.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class W2 extends Jt{constructor(e,t){super(e,"in",t),this.keys=lA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Z2 extends Jt{constructor(e,t){super(e,"not-in",t),this.keys=lA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function lA(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>xe.fromName(s.referenceValue)))}class eP extends Jt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bp(t)&&hu(t.arrayValue,this.value)}}class tP extends Jt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&hu(this.value.arrayValue,t)}}class nP extends Jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(hu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!hu(this.value.arrayValue,t)}}class iP extends Jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>hu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,t=null,s=[],o=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function zT(n,e=null,t=[],s=[],o=null,l=null,c=null){return new sP(n,e,t,s,o,l,c)}function Fp(n){const e=Ve(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>up(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),sf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Ma(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Ma(s))).join(",")),e.Te=t}return e.Te}function Hp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!$2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!oA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!HT(n.startAt,e.startAt)&&HT(n.endAt,e.endAt)}function cp(n){return xe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,t=null,s=[],o=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function rP(n,e,t,s,o,l,c,d){return new of(n,e,t,s,o,l,c,d)}function zp(n){return new of(n)}function GT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function oP(n){return n.collectionGroup!==null}function ru(n){const e=Ve(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Kt(Zt.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Ud(l,s))})),t.has(Zt.keyField().canonicalString())||e.Ie.push(new Ud(Zt.keyField(),s))}return e.Ie}function zi(n){const e=Ve(n);return e.Ee||(e.Ee=aP(e,ru(n))),e.Ee}function aP(n,e){if(n.limitType==="F")return zT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Ud(o.field,l)}));const t=n.endAt?new kd(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new kd(n.startAt.position,n.startAt.inclusive):null;return zT(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function dp(n,e,t){return new of(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function af(n,e){return Hp(zi(n),zi(e))&&n.limitType===e.limitType}function uA(n){return`${Fp(zi(n))}|lt:${n.limitType}`}function ha(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>aA(o))).join(", ")}]`),sf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Ma(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Ma(o))).join(",")),`Target(${s})`})(zi(n))}; limitType=${n.limitType})`}function lf(n,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):xe.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,o){for(const l of ru(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(s,o){return!(s.startAt&&!(function(c,d,p){const h=FT(c,d,p);return c.inclusive?h<=0:h<0})(s.startAt,ru(s),o)||s.endAt&&!(function(c,d,p){const h=FT(c,d,p);return c.inclusive?h>=0:h>0})(s.endAt,ru(s),o))})(n,e)}function lP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function cA(n){return(e,t)=>{let s=!1;for(const o of ru(n)){const l=uP(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function uP(n,e,t){const s=n.field.isKeyField()?xe.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),h=d.data.field(l);return p!==null&&h!==null?Na(p,h):Re(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Re(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){vo(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return KS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP=new Et(xe.comparator);function Ns(){return cP}const dA=new Et(xe.comparator);function eu(...n){let e=dA;for(const t of n)e=e.insert(t.key,t);return e}function fA(n){let e=dA;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function lo(){return ou()}function hA(){return ou()}function ou(){return new To((n=>n.toString()),((n,e)=>n.isEqual(e)))}const dP=new Et(xe.comparator),fP=new Kt(xe.comparator);function Je(...n){let e=fP;for(const t of n)e=e.add(t);return e}const hP=new Kt(Ye);function mP(){return hP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dd(e)?"-0":e}}function mA(n){return{integerValue:""+n}}function pP(n,e){return F2(e)?mA(e):Gp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(){this._=void 0}}function gP(n,e,t){return n instanceof Ld?(function(o,l){const c={fields:{[XS]:{stringValue:QS},[ZS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&qp(l)&&(l=rf(l)),l&&(c.fields[WS]=l),{mapValue:c}})(t,e):n instanceof mu?gA(n,e):n instanceof pu?yA(n,e):(function(o,l){const c=pA(o,l),d=jT(c)+jT(o.Ae);return lp(c)&&lp(o.Ae)?mA(d):Gp(o.serializer,d)})(n,e)}function yP(n,e,t){return n instanceof mu?gA(n,e):n instanceof pu?yA(n,e):t}function pA(n,e){return n instanceof Od?(function(s){return lp(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Ld extends uf{}class mu extends uf{constructor(e){super(),this.elements=e}}function gA(n,e){const t=_A(e);for(const s of n.elements)t.some((o=>Ki(o,s)))||t.push(s);return{arrayValue:{values:t}}}class pu extends uf{constructor(e){super(),this.elements=e}}function yA(n,e){let t=_A(e);for(const s of n.elements)t=t.filter((o=>!Ki(o,s)));return{arrayValue:{values:t}}}class Od extends uf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function jT(n){return Pt(n.integerValue||n.doubleValue)}function _A(n){return Bp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function _P(n,e){return n.field.isEqual(e.field)&&(function(s,o){return s instanceof mu&&o instanceof mu||s instanceof pu&&o instanceof pu?wa(s.elements,o.elements,Ki):s instanceof Od&&o instanceof Od?Ki(s.Ae,o.Ae):s instanceof Ld&&o instanceof Ld})(n.transform,e.transform)}class vP{constructor(e,t){this.version=e,this.transformResults=t}}class Gi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Gi}static exists(e){return new Gi(void 0,e)}static updateTime(e){return new Gi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class cf{}function vA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new jp(n.key,Gi.none()):new Su(n.key,n.data,Gi.none());{const t=n.data,s=Zn.empty();let o=new Kt(Zt.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),o=o.add(l)}return new Eo(n.key,s,new mi(o.toArray()),Gi.none())}}function TP(n,e,t){n instanceof Su?(function(o,l,c){const d=o.value.clone(),p=JT(o.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Eo?(function(o,l,c){if(!vd(o.precondition,l))return void l.convertToUnknownDocument(c.version);const d=JT(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(TA(o)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function au(n,e,t,s){return n instanceof Su?(function(l,c,d,p){if(!vd(l.precondition,c))return d;const h=l.value.clone(),T=KT(l.fieldTransforms,p,c);return h.setAll(T),c.convertToFoundDocument(c.version,h).setHasLocalMutations(),null})(n,e,t,s):n instanceof Eo?(function(l,c,d,p){if(!vd(l.precondition,c))return d;const h=KT(l.fieldTransforms,p,c),T=c.data;return T.setAll(TA(l)),T.setAll(h),c.convertToFoundDocument(c.version,T).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,s):(function(l,c,d){return vd(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function EP(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),l=pA(s.transform,o||null);l!=null&&(t===null&&(t=Zn.empty()),t.set(s.field,l))}return t||null}function YT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&wa(s,o,((l,c)=>_P(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Su extends cf{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Eo extends cf{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function TA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function JT(n,e,t){const s=new Map;st(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,d=e.data.field(l.field);s.set(l.field,yP(c,d,t[o]))}return s}function KT(n,e,t){const s=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);s.set(o.field,gP(l,c,e))}return s}class jp extends cf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SP extends cf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&TP(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=au(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=au(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=hA();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(o.key)?null:d;const p=vA(c,d);p!==null&&s.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(De.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Je())}isEqual(e){return this.batchId===e.batchId&&wa(this.mutations,e.mutations,((t,s)=>YT(t,s)))&&wa(this.baseMutations,e.baseMutations,((t,s)=>YT(t,s)))}}class Yp{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){st(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return dP})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,s[c].version);return new Yp(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht,$e;function xP(n){switch(n){case le.OK:return Re(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return Re(15467,{code:n})}}function EA(n){if(n===void 0)return ws("GRPC error has no .code"),le.UNKNOWN;switch(n){case Ht.OK:return le.OK;case Ht.CANCELLED:return le.CANCELLED;case Ht.UNKNOWN:return le.UNKNOWN;case Ht.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Ht.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Ht.INTERNAL:return le.INTERNAL;case Ht.UNAVAILABLE:return le.UNAVAILABLE;case Ht.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Ht.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Ht.NOT_FOUND:return le.NOT_FOUND;case Ht.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Ht.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Ht.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Ht.ABORTED:return le.ABORTED;case Ht.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Ht.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Ht.DATA_LOSS:return le.DATA_LOSS;default:return Re(39323,{code:n})}}($e=Ht||(Ht={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=new Tr([4294967295,4294967295],0);function $T(n){const e=IP().encode(n),t=new kS;return t.update(e),new Uint8Array(t.digest())}function QT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Tr([t,s],0),new Tr([o,l],0)]}class Jp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new tu(`Invalid padding: ${t}`);if(s<0)throw new tu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new tu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new tu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Tr.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(Tr.fromNumber(s)));return o.compare(wP)===1&&(o=new Tr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=$T(e),[s,o]=QT(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Jp(l,o,t);return s.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=$T(e),[s,o]=QT(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Au.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new df(De.min(),o,new Et(Ye),Ns(),Je())}}class Au{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Au(s,t,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class SA{constructor(e,t){this.targetId=e,this.Ce=t}}class AA{constructor(e,t,s=en.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class XT{constructor(){this.ve=0,this.Fe=WT(),this.Me=en.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Je(),t=Je(),s=Je();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Re(38017,{changeType:l})}})),new Au(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=WT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,st(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class RP{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ns(),this.Je=ud(),this.He=ud(),this.Ye=new Et(Ye)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Re(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(cp(l))if(s===0){const c=new xe(l.path);this.et(t,c,fn.newNoDocument(c,De.min()))}else st(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const h=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let c,d;try{c=br(s).toUint8Array()}catch(p){if(p instanceof $S)return po("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Jp(c,o,l)}catch(p){return po(p instanceof tu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&cp(d.target)){const p=new xe(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,fn.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let s=Je();this.He.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const h=this.ot(p);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const o=new df(e,t,this.Ye,this.je,s);return this.je=Ns(),this.Je=ud(),this.He=ud(),this.Ye=new Et(Ye),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new XT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Kt(Ye),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Kt(Ye),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new XT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ud(){return new Et(xe.comparator)}function WT(){return new Et(xe.comparator)}const NP={asc:"ASCENDING",desc:"DESCENDING"},MP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DP={and:"AND",or:"OR"};class PP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function fp(n,e){return n.useProto3Json||sf(e)?e:{value:e}}function qd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function VP(n,e){return qd(n,e.toTimestamp())}function ji(n){return st(!!n,49232),De.fromTimestamp((function(t){const s=Ar(t);return new mt(s.seconds,s.nanos)})(n))}function Kp(n,e){return hp(n,e).canonicalString()}function hp(n,e){const t=(function(o){return new _t(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function CA(n){const e=_t.fromString(n);return st(NA(e),10190,{key:e.toString()}),e}function mp(n,e){return Kp(n.databaseId,e.path)}function Vm(n,e){const t=CA(e);if(t.get(1)!==n.databaseId.projectId)throw new Se(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Se(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new xe(IA(t))}function xA(n,e){return Kp(n.databaseId,e)}function kP(n){const e=CA(n);return e.length===4?_t.emptyPath():IA(e)}function pp(n){return new _t(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function IA(n){return st(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ZT(n,e,t){return{name:mp(n,e),fields:t.value.mapValue.fields}}function UP(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Re(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(h,T){return h.useProto3Json?(st(T===void 0||typeof T=="string",58123),en.fromBase64String(T||"")):(st(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),en.fromUint8Array(T||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(h){const T=h.code===void 0?le.UNKNOWN:EA(h.code);return new Se(T,h.message||"")})(c);t=new AA(s,o,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Vm(n,s.document.name),l=ji(s.document.updateTime),c=s.document.createTime?ji(s.document.createTime):De.min(),d=new Zn({mapValue:{fields:s.document.fields}}),p=fn.newFoundDocument(o,l,c,d),h=s.targetIds||[],T=s.removedTargetIds||[];t=new Td(h,T,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Vm(n,s.document),l=s.readTime?ji(s.readTime):De.min(),c=fn.newNoDocument(o,l),d=s.removedTargetIds||[];t=new Td([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Vm(n,s.document),l=s.removedTargetIds||[];t=new Td([],l,o,null)}else{if(!("filter"in e))return Re(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,c=new CP(o,l),d=s.targetId;t=new SA(d,c)}}return t}function LP(n,e){let t;if(e instanceof Su)t={update:ZT(n,e.key,e.value)};else if(e instanceof jp)t={delete:mp(n,e.key)};else if(e instanceof Eo)t={update:ZT(n,e.key,e.data),updateMask:YP(e.fieldMask)};else{if(!(e instanceof SP))return Re(16599,{Vt:e.type});t={verify:mp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const d=c.transform;if(d instanceof Ld)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof mu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof pu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Od)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Re(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:VP(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Re(27497)})(n,e.precondition)),t}function OP(n,e){return n&&n.length>0?(st(e!==void 0,14353),n.map((t=>(function(o,l){let c=o.updateTime?ji(o.updateTime):ji(l);return c.isEqual(De.min())&&(c=ji(l)),new vP(c,o.transformResults||[])})(t,e)))):[]}function qP(n,e){return{documents:[xA(n,e.path)]}}function BP(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=xA(n,o);const l=(function(h){if(h.length!==0)return RA($i.create(h,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(h){if(h.length!==0)return h.map((T=>(function(A){return{field:ma(A.field),direction:zP(A.dir)}})(T)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=fp(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:o}}function FP(n){let e=kP(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){st(s===1,65062);const T=t.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let l=[];t.where&&(l=(function(E){const A=wA(E);return A instanceof $i&&rA(A)?A.getFilters():[A]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((A=>(function(k){return new Ud(pa(k.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(A)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let A;return A=typeof E=="object"?E.value:E,sf(A)?null:A})(t.limit));let p=null;t.startAt&&(p=(function(E){const A=!!E.before,x=E.values||[];return new kd(x,A)})(t.startAt));let h=null;return t.endAt&&(h=(function(E){const A=!E.before,x=E.values||[];return new kd(x,A)})(t.endAt)),rP(e,o,c,l,d,"F",p,h)}function HP(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function wA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=pa(t.unaryFilter.field);return Jt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=pa(t.unaryFilter.field);return Jt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=pa(t.unaryFilter.field);return Jt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=pa(t.unaryFilter.field);return Jt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Jt.create(pa(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return $i.create(t.compositeFilter.filters.map((s=>wA(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Re(1026)}})(t.compositeFilter.op))})(n):Re(30097,{filter:n})}function zP(n){return NP[n]}function GP(n){return MP[n]}function jP(n){return DP[n]}function ma(n){return{fieldPath:n.canonicalString()}}function pa(n){return Zt.fromServerFormat(n.fieldPath)}function RA(n){return n instanceof Jt?(function(t){if(t.op==="=="){if(BT(t.value))return{unaryFilter:{field:ma(t.field),op:"IS_NAN"}};if(qT(t.value))return{unaryFilter:{field:ma(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(BT(t.value))return{unaryFilter:{field:ma(t.field),op:"IS_NOT_NAN"}};if(qT(t.value))return{unaryFilter:{field:ma(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ma(t.field),op:GP(t.op),value:t.value}}})(n):n instanceof $i?(function(t){const s=t.getFilters().map((o=>RA(o)));return s.length===1?s[0]:{compositeFilter:{op:jP(t.op),filters:s}}})(n):Re(54877,{filter:n})}function YP(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function NA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,t,s,o,l=De.min(),c=De.min(),d=en.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new gr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e){this.yt=e}}function KP(n){const e=FP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?dp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(){this.Cn=new QP}addToCollectionParentIndex(e,t){return this.Cn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Sr.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Sr.min())}updateCollectionGroup(e,t,s){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class QP{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Kt(_t.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Kt(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},MA=41943040;class xn{static withCacheSize(e){return new xn(e,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(MA,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Da(0)}static cr(){return new Da(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="LruGarbageCollector",XP=1048576;function nE([n,e],[t,s]){const o=Ye(n,t);return o===0?Ye(e,s):o}class WP{constructor(e){this.Ir=e,this.buffer=new Kt(nE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();nE(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ZP{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ye(tE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){za(t)?ye(tE,"Ignoring IndexedDB error during garbage collection: ",t):await Ha(t)}await this.Vr(3e5)}))}}class eV{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return oe.resolve(nf.ce);const s=new WP(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(eE)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,c,d,p,h;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,d=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(h=Date.now(),fa()<=je.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-T}ms
	Determined least recently used ${o} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(h-p)+`ms
Total Duration: ${h-T}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function tV(n,e){return new eV(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(){this.changes=new To((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?oe.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&au(s.mutation,o,mi.empty(),mt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Je()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Je()){const o=lo();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let c=eu();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=lo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Je())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,s,o){let l=Ns();const c=ou(),d=(function(){return ou()})();return t.forEach(((p,h)=>{const T=s.get(h.key);o.has(h.key)&&(T===void 0||T.mutation instanceof Eo)?l=l.insert(h.key,h):T!==void 0?(c.set(h.key,T.mutation.getFieldMask()),au(T.mutation,h,T.mutation.getFieldMask(),mt.now())):c.set(h.key,mi.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((h,T)=>c.set(h,T))),t.forEach(((h,T)=>d.set(h,new iV(T,c.get(h)??null)))),d)))}recalculateAndSaveOverlays(e,t){const s=ou();let o=new Et(((c,d)=>c-d)),l=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const h=t.get(p);if(h===null)return;let T=s.get(p)||mi.empty();T=d.applyToLocalView(h,T),s.set(p,T);const E=(o.get(d.batchId)||Je()).add(p);o=o.insert(d.batchId,E)}))})).next((()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),h=p.key,T=p.value,E=hA();T.forEach((A=>{if(!l.has(A)){const x=vA(t.get(A),s.get(A));x!==null&&E.set(A,x),l=l.add(A)}})),c.push(this.documentOverlayCache.saveOverlays(e,h,E))}return oe.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(c){return xe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):oP(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):oe.resolve(lo());let d=du,p=l;return c.next((h=>oe.forEach(h,((T,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(T)?oe.resolve():this.remoteDocumentCache.getEntry(e,T).next((A=>{p=p.insert(T,A)}))))).next((()=>this.populateOverlays(e,h,l))).next((()=>this.computeViews(e,p,h,Je()))).next((T=>({batchId:d,changes:fA(T)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next((s=>{let o=eu();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let c=eu();return this.indexManager.getCollectionParents(e,l).next((d=>oe.forEach(d,(p=>{const h=(function(E,A){return new of(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,h,s,o).next((T=>{T.forEach(((E,A)=>{c=c.insert(E,A)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((c=>{l.forEach(((p,h)=>{const T=h.getKey();c.get(T)===null&&(c=c.insert(T,fn.newInvalidDocument(T)))}));let d=eu();return c.forEach(((p,h)=>{const T=l.get(p);T!==void 0&&au(T.mutation,h,mi.empty(),mt.now()),lf(t,h)&&(d=d.insert(p,h))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return oe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:ji(o.createTime)}})(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:KP(o.bundledQuery),readTime:ji(o.readTime)}})(t)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(){this.overlays=new Et(xe.comparator),this.qr=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const s=lo();return oe.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),oe.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),oe.resolve()}getOverlaysForCollection(e,t,s){const o=lo(),l=t.length+1,c=new xe(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,h=p.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===l&&p.largestBatchId>s&&o.set(p.getKey(),p)}return oe.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new Et(((h,T)=>h-T));const c=this.overlays.getIterator();for(;c.hasNext();){const h=c.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>s){let T=l.get(h.largestBatchId);T===null&&(T=lo(),l=l.insert(h.largestBatchId,T)),T.set(h.getKey(),h)}}const d=lo(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((h,T)=>d.set(h,T))),!(d.size()>=o)););return oe.resolve(d)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new bP(t,s));let l=this.qr.get(t);l===void 0&&(l=Je(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(){this.Qr=new Kt(Wt.$r),this.Ur=new Kt(Wt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Wt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Wt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new xe(new _t([])),s=new Wt(t,e),o=new Wt(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new xe(new _t([])),s=new Wt(t,e),o=new Wt(t,e+1);let l=Je();return this.Ur.forEachInRange([s,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Wt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Wt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return xe.comparator(e.key,t.key)||Ye(e.Yr,t.Yr)}static Kr(e,t){return Ye(e.Yr,t.Yr)||xe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Kt(Wt.$r)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new AP(l,t,s,o);this.mutationQueue.push(c);for(const d of o)this.Zr=this.Zr.add(new Wt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return oe.resolve(c)}lookupMutationBatch(e,t){return oe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return oe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?Op:this.tr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Wt(t,0),o=new Wt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(c=>{const d=this.Xr(c.Yr);l.push(d)})),oe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Kt(Ye);return t.forEach((o=>{const l=new Wt(o,0),c=new Wt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(d=>{s=s.add(d.Yr)}))})),oe.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;xe.isDocumentKey(l)||(l=l.child(""));const c=new Wt(new xe(l),0);let d=new Kt(Ye);return this.Zr.forEachWhile((p=>{const h=p.key.path;return!!s.isPrefixOf(h)&&(h.length===o&&(d=d.add(p.Yr)),!0)}),c),oe.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){st(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return oe.forEach(t.mutations,(o=>{const l=new Wt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Wt(t,0),o=this.Zr.firstAfterOrEqual(s);return oe.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e){this.ri=e,this.docs=(function(){return new Et(xe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return oe.resolve(s?s.document.mutableCopy():fn.newInvalidDocument(t))}getEntries(e,t){let s=Ns();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():fn.newInvalidDocument(o))})),oe.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Ns();const c=t.path,d=new xe(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:h,value:{document:T}}=p.getNext();if(!c.isPrefixOf(h.path))break;h.path.length>c.length+1||L2(U2(T),s)<=0||(o.has(T.key)||lf(t,T))&&(l=l.insert(T.key,T.mutableCopy()))}return oe.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Re(9500)}ii(e,t){return oe.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new cV(this)}getSize(e){return oe.resolve(this.size)}}class cV extends nV{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),oe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e){this.persistence=e,this.si=new To((t=>Fp(t)),Hp),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.oi=0,this._i=new $p,this.targetCount=0,this.ai=Da.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),oe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Da(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Pr(t),oe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),oe.waitFor(l).next((()=>o))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return oe.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),oe.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),oe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return oe.resolve(s)}containsKey(e,t){return oe.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,t){this.ui={},this.overlays={},this.ci=new nf(0),this.li=!1,this.li=!0,this.hi=new aV,this.referenceDelegate=e(this),this.Pi=new dV(this),this.indexManager=new $P,this.remoteDocumentCache=(function(o){return new uV(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new JP(t),this.Ii=new rV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new oV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new lV(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ye("MemoryPersistence","Starting transaction:",e);const o=new fV(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return oe.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class fV extends q2{constructor(e){super(),this.currentSequenceNumber=e}}class Qp{constructor(e){this.persistence=e,this.Ri=new $p,this.Vi=null}static mi(e){return new Qp(e)}get fi(){if(this.Vi)return this.Vi;throw Re(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),oe.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.fi,(s=>{const o=xe.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,De.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return oe.or([()=>oe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Bd{constructor(e,t){this.persistence=e,this.pi=new To((s=>H2(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=tV(this,t)}static mi(e,t){return new Bd(e,t)}Ei(){}di(e){return oe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return oe.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?oe.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((d=>{d||(s++,l.removeEntry(c,De.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),oe.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=yd(e.data.value)),t}br(e,t,s){return oe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return oe.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=Je(),o=Je();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Xp(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return oD()?8:B2(mn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new hV;return this.Ss(e,t,c).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(fa()<=je.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",ha(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),oe.resolve()):(fa()<=je.DEBUG&&ye("QueryEngine","Query:",ha(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(fa()<=je.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",ha(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zi(t))):oe.resolve())}ys(e,t){if(GT(t))return oe.resolve(null);let s=zi(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=dp(t,null,"F"),s=zi(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=Je(...l);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,s).next((p=>{const h=this.Ds(t,d);return this.Cs(t,h,c,p.readTime)?this.ys(e,dp(t,null,"F")):this.vs(e,h,t,p)}))))})))))}ws(e,t,s,o){return GT(t)||o.isEqual(De.min())?oe.resolve(null):this.ps.getDocuments(e,s).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,s,o)?oe.resolve(null):(fa()<=je.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ha(t)),this.vs(e,c,t,k2(o,du)).next((d=>d)))}))}Ds(e,t){let s=new Kt(cA(e));return t.forEach(((o,l)=>{lf(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return fa()<=je.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",ha(t)),this.ps.getDocumentsMatchingQuery(e,t,Sr.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="LocalStore",pV=3e8;class gV{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Et(Ye),this.xs=new To((l=>Fp(l)),Hp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function yV(n,e,t,s){return new gV(n,e,t,s)}async function PA(n,e){const t=Ve(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],d=[];let p=Je();for(const h of o){c.push(h.batchId);for(const T of h.mutations)p=p.add(T.key)}for(const h of l){d.push(h.batchId);for(const T of h.mutations)p=p.add(T.key)}return t.localDocuments.getDocuments(s,p).next((h=>({Ls:h,removedBatchIds:c,addedBatchIds:d})))}))}))}function _V(n,e){const t=Ve(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,p,h,T){const E=h.batch,A=E.keys();let x=oe.resolve();return A.forEach((k=>{x=x.next((()=>T.getEntry(p,k))).next((q=>{const F=h.docVersions.get(k);st(F!==null,48541),q.version.compareTo(F)<0&&(E.applyToRemoteDocument(q,h),q.isValidDocument()&&(q.setReadTime(h.commitVersion),T.addEntry(q)))}))})),x.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(d){let p=Je();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(p=p.add(d.batch.mutations[h].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function VA(n){const e=Ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function vV(n,e){const t=Ve(n),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const d=[];e.targetChanges.forEach(((T,E)=>{const A=o.get(E);if(!A)return;d.push(t.Pi.removeMatchingKeys(l,T.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,T.addedDocuments,E))));let x=A.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?x=x.withResumeToken(en.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):T.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(T.resumeToken,s)),o=o.insert(E,x),(function(q,F,Z){return q.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=pV?!0:Z.addedDocuments.size+Z.modifiedDocuments.size+Z.removedDocuments.size>0})(A,x,T)&&d.push(t.Pi.updateTargetData(l,x))}));let p=Ns(),h=Je();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,T))})),d.push(TV(l,c,e.documentUpdates).next((T=>{p=T.ks,h=T.qs}))),!s.isEqual(De.min())){const T=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));d.push(T)}return oe.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,h))).next((()=>p))})).then((l=>(t.Ms=o,l)))}function TV(n,e,t){let s=Je(),o=Je();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=Ns();return t.forEach(((d,p)=>{const h=l.get(d);p.isFoundDocument()!==h.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(De.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!h.isValidDocument()||p.version.compareTo(h.version)>0||p.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):ye(Wp,"Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",p.version)})),{ks:c,qs:o}}))}function EV(n,e){const t=Ve(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Op),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function SV(n,e){const t=Ve(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,oe.resolve(o)):t.Pi.allocateTargetId(s).next((c=>(o=new gr(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function gp(n,e,t){const s=Ve(n),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!za(c))throw c;ye(Wp,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function iE(n,e,t){const s=Ve(n);let o=De.min(),l=Je();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,h,T){const E=Ve(p),A=E.xs.get(T);return A!==void 0?oe.resolve(E.Ms.get(A)):E.Pi.getTargetData(h,T)})(s,c,zi(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?o:De.min(),t?l:Je()))).next((d=>(AV(s,lP(e),d),{documents:d,Qs:l})))))}function AV(n,e,t){let s=n.Os.get(e)||De.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class sE{constructor(){this.activeTargetIds=mP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bV{constructor(){this.Mo=new sE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new sE,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="ConnectivityMonitor";class oE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ye(rE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ye(rE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cd=null;function yp(){return cd===null?cd=(function(){return 268435456+Math.round(2147483648*Math.random())})():cd++,"0x"+cd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km="RestConnection",xV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class IV{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Pd?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const c=yp(),d=this.zo(e,t.toUriEncodedString());ye(km,`Sending RPC '${e}' ${c}:`,d,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,l);const{host:h}=new URL(d),T=qa(h);return this.Jo(e,d,p,s,T).then((E=>(ye(km,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw po(km,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",s),E}))}Ho(e,t,s,o,l,c){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Fa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=xV[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="WebChannelConnection";class RV extends IV{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const c=yp();return new Promise(((d,p)=>{const h=new US;h.setWithCredentials(!0),h.listenOnce(LS.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case gd.NO_ERROR:const E=h.getResponseJson();ye(cn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case gd.TIMEOUT:ye(cn,`RPC '${e}' ${c} timed out`),p(new Se(le.DEADLINE_EXCEEDED,"Request time out"));break;case gd.HTTP_ERROR:const A=h.getStatus();if(ye(cn,`RPC '${e}' ${c} failed with status:`,A,"response text:",h.getResponseText()),A>0){let x=h.getResponseJson();Array.isArray(x)&&(x=x[0]);const k=x==null?void 0:x.error;if(k&&k.status&&k.message){const q=(function(Z){const te=Z.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(te)>=0?te:le.UNKNOWN})(k.status);p(new Se(q,k.message))}else p(new Se(le.UNKNOWN,"Server responded with status "+h.getStatus()))}else p(new Se(le.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{l_:e,streamId:c,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ye(cn,`RPC '${e}' ${c} completed.`)}}));const T=JSON.stringify(o);ye(cn,`RPC '${e}' ${c} sending request:`,o),h.send(t,"POST",T,s,15)}))}T_(e,t,s){const o=yp(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=BS(),d=qS(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(p.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const T=l.join("");ye(cn,`Creating RPC '${e}' stream ${o}: ${T}`,p);const E=c.createWebChannel(T,p);this.I_(E);let A=!1,x=!1;const k=new wV({Yo:F=>{x?ye(cn,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(A||(ye(cn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),A=!0),ye(cn,`RPC '${e}' stream ${o} sending:`,F),E.send(F))},Zo:()=>E.close()}),q=(F,Z,te)=>{F.listen(Z,($=>{try{te($)}catch(z){setTimeout((()=>{throw z}),0)}}))};return q(E,Zl.EventType.OPEN,(()=>{x||(ye(cn,`RPC '${e}' stream ${o} transport opened.`),k.o_())})),q(E,Zl.EventType.CLOSE,(()=>{x||(x=!0,ye(cn,`RPC '${e}' stream ${o} transport closed`),k.a_(),this.E_(E))})),q(E,Zl.EventType.ERROR,(F=>{x||(x=!0,po(cn,`RPC '${e}' stream ${o} transport errored. Name:`,F.name,"Message:",F.message),k.a_(new Se(le.UNAVAILABLE,"The operation could not be completed")))})),q(E,Zl.EventType.MESSAGE,(F=>{var Z;if(!x){const te=F.data[0];st(!!te,16349);const $=te,z=($==null?void 0:$.error)||((Z=$[0])==null?void 0:Z.error);if(z){ye(cn,`RPC '${e}' stream ${o} received error:`,z);const ae=z.status;let ce=(function(R){const D=Ht[R];if(D!==void 0)return EA(D)})(ae),M=z.message;ce===void 0&&(ce=le.INTERNAL,M="Unknown error status: "+ae+" with message "+z.message),x=!0,k.a_(new Se(ce,M)),E.close()}else ye(cn,`RPC '${e}' stream ${o} received:`,te),k.u_(te)}})),q(d,OS.STAT_EVENT,(F=>{F.stat===rp.PROXY?ye(cn,`RPC '${e}' stream ${o} detected buffering proxy`):F.stat===rp.NOPROXY&&ye(cn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Um(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(n){return new PP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&ye("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="PersistentStream";class UA{constructor(e,t,s,o,l,c,d,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new kA(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(ws(t.toString()),ws("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new Se(le.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ye(aE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ye(aE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class NV extends UA{constructor(e,t,s,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=UP(this.serializer,e),s=(function(l){if(!("targetChange"in l))return De.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?De.min():c.readTime?ji(c.readTime):De.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=pp(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=cp(p)?{documents:qP(l,p)}:{query:BP(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=bA(l,c.resumeToken);const h=fp(l,c.expectedCount);h!==null&&(d.expectedCount=h)}else if(c.snapshotVersion.compareTo(De.min())>0){d.readTime=qd(l,c.snapshotVersion.toTimestamp());const h=fp(l,c.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const s=HP(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=pp(this.serializer),t.removeTarget=e,this.q_(t)}}class MV extends UA{constructor(e,t,s,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return st(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,st(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){st(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=OP(e.writeResults,e.commitTime),s=ji(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=pp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>LP(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{}class PV extends DV{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Se(le.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,hp(t,s),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Se(le.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,hp(t,s),o,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Se(le.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class VV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ws(t),this.aa=!1):ye("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go="RemoteStore";class kV{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{So(this)&&(ye(go,"Restarting streams for network reachability change."),await(async function(p){const h=Ve(p);h.Ea.add(4),await bu(h),h.Ra.set("Unknown"),h.Ea.delete(4),await hf(h)})(this))}))})),this.Ra=new VV(s,o)}}async function hf(n){if(So(n))for(const e of n.da)await e(!0)}async function bu(n){for(const e of n.da)await e(!1)}function LA(n,e){const t=Ve(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ng(t)?tg(t):Ga(t).O_()&&eg(t,e))}function Zp(n,e){const t=Ve(n),s=Ga(t);t.Ia.delete(e),s.O_()&&OA(t,e),t.Ia.size===0&&(s.O_()?s.L_():So(t)&&t.Ra.set("Unknown"))}function eg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ga(n).Y_(e)}function OA(n,e){n.Va.Ue(e),Ga(n).Z_(e)}function tg(n){n.Va=new RP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ga(n).start(),n.Ra.ua()}function ng(n){return So(n)&&!Ga(n).x_()&&n.Ia.size>0}function So(n){return Ve(n).Ea.size===0}function qA(n){n.Va=void 0}async function UV(n){n.Ra.set("Online")}async function LV(n){n.Ia.forEach(((e,t)=>{eg(n,e)}))}async function OV(n,e){qA(n),ng(n)?(n.Ra.ha(e),tg(n)):n.Ra.set("Unknown")}async function qV(n,e,t){if(n.Ra.set("Online"),e instanceof AA&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const d of l.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o.Ia.delete(d),o.Va.removeTarget(d))})(n,e)}catch(s){ye(go,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Fd(n,s)}else if(e instanceof Td?n.Va.Ze(e):e instanceof SA?n.Va.st(e):n.Va.tt(e),!t.isEqual(De.min()))try{const s=await VA(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach(((p,h)=>{if(p.resumeToken.approximateByteSize()>0){const T=l.Ia.get(h);T&&l.Ia.set(h,T.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,h)=>{const T=l.Ia.get(p);if(!T)return;l.Ia.set(p,T.withResumeToken(en.EMPTY_BYTE_STRING,T.snapshotVersion)),OA(l,p);const E=new gr(T.target,p,h,T.sequenceNumber);eg(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(s){ye(go,"Failed to raise snapshot:",s),await Fd(n,s)}}async function Fd(n,e,t){if(!za(e))throw e;n.Ea.add(1),await bu(n),n.Ra.set("Offline"),t||(t=()=>VA(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ye(go,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await hf(n)}))}function BA(n,e){return e().catch((t=>Fd(n,t,e)))}async function mf(n){const e=Ve(n),t=xr(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Op;for(;BV(e);)try{const o=await EV(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,FV(e,o)}catch(o){await Fd(e,o)}FA(e)&&HA(e)}function BV(n){return So(n)&&n.Ta.length<10}function FV(n,e){n.Ta.push(e);const t=xr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function FA(n){return So(n)&&!xr(n).x_()&&n.Ta.length>0}function HA(n){xr(n).start()}async function HV(n){xr(n).ra()}async function zV(n){const e=xr(n);for(const t of n.Ta)e.ea(t.mutations)}async function GV(n,e,t){const s=n.Ta.shift(),o=Yp.from(s,e,t);await BA(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await mf(n)}async function jV(n,e){e&&xr(n).X_&&await(async function(s,o){if((function(c){return xP(c)&&c!==le.ABORTED})(o.code)){const l=s.Ta.shift();xr(s).B_(),await BA(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await mf(s)}})(n,e),FA(n)&&HA(n)}async function lE(n,e){const t=Ve(n);t.asyncQueue.verifyOperationInProgress(),ye(go,"RemoteStore received new credentials");const s=So(t);t.Ea.add(3),await bu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await hf(t)}async function YV(n,e){const t=Ve(n);e?(t.Ea.delete(2),await hf(t)):e||(t.Ea.add(2),await bu(t),t.Ra.set("Unknown"))}function Ga(n){return n.ma||(n.ma=(function(t,s,o){const l=Ve(t);return l.sa(),new NV(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:UV.bind(null,n),t_:LV.bind(null,n),r_:OV.bind(null,n),H_:qV.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),ng(n)?tg(n):n.Ra.set("Unknown")):(await n.ma.stop(),qA(n))}))),n.ma}function xr(n){return n.fa||(n.fa=(function(t,s,o){const l=Ve(t);return l.sa(),new MV(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:HV.bind(null,n),r_:jV.bind(null,n),ta:zV.bind(null,n),na:GV.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await mf(n)):(await n.fa.stop(),n.Ta.length>0&&(ye(go,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const c=Date.now()+s,d=new ig(e,t,c,o,l);return d.start(s),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sg(n,e){if(ws("AsyncQueue",`${e}: ${n}`),za(n))return new Se(le.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{static emptySet(e){return new Aa(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||xe.comparator(t.key,s.key):(t,s)=>xe.comparator(t.key,s.key),this.keyedMap=eu(),this.sortedSet=new Et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Aa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Aa;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(){this.ga=new Et(xe.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Re(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Pa{constructor(e,t,s,o,l,c,d,p,h){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=h}static fromInitialDocuments(e,t,s,o,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Pa(e,t,Aa.emptySet(t),c,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&af(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class KV{constructor(){this.queries=cE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Ve(t),l=o.queries;o.queries=cE(),l.forEach(((c,d)=>{for(const p of d.Sa)p.onError(s)}))})(this,new Se(le.ABORTED,"Firestore shutting down"))}}function cE(){return new To((n=>uA(n)),af)}async function zA(n,e){const t=Ve(n);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new JV,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const d=sg(c,`Initialization of query '${ha(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&rg(t)}async function GA(n,e){const t=Ve(n),s=e.query;let o=3;const l=t.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function $V(n,e){const t=Ve(n);let s=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(o)&&(s=!0);c.wa=o}}s&&rg(t)}function QV(n,e,t){const s=Ve(n),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function rg(n){n.Ca.forEach((e=>{e.next()}))}var _p,dE;(dE=_p||(_p={})).Ma="default",dE.Cache="cache";class jA{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Pa(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Pa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_p.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.key=e}}class JA{constructor(e){this.key=e}}class XV{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Je(),this.mutatedKeys=Je(),this.eu=cA(e),this.tu=new Aa(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new uE,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,h=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,E)=>{const A=o.get(T),x=lf(this.query,E)?E:null,k=!!A&&this.mutatedKeys.has(A.key),q=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let F=!1;A&&x?A.data.isEqual(x.data)?k!==q&&(s.track({type:3,doc:x}),F=!0):this.su(A,x)||(s.track({type:2,doc:x}),F=!0,(p&&this.eu(x,p)>0||h&&this.eu(x,h)<0)&&(d=!0)):!A&&x?(s.track({type:0,doc:x}),F=!0):A&&!x&&(s.track({type:1,doc:A}),F=!0,(p||h)&&(d=!0)),F&&(x?(c=c.add(x),l=q?l.add(T):l.delete(T)):(c=c.delete(T),l=l.delete(T)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const T=this.query.limitType==="F"?c.last():c.first();c=c.delete(T.key),l=l.delete(T.key),s.track({type:1,doc:T})}return{tu:c,iu:s,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((T,E)=>(function(x,k){const q=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{Rt:F})}};return q(x)-q(k)})(T.type,E.type)||this.eu(T.doc,E.doc))),this.ou(s),o=o??!1;const d=t&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,h=p!==this.Za;return this.Za=p,c.length!==0||h?{snapshot:new Pa(this.query,e.tu,l,c,e.mutatedKeys,p===0,h,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new uE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Je(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new JA(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new YA(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Je();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Pa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const og="SyncEngine";class WV{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class ZV{constructor(e){this.key=e,this.hu=!1}}class ek{constructor(e,t,s,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new To((d=>uA(d)),af),this.Iu=new Map,this.Eu=new Set,this.du=new Et(xe.comparator),this.Au=new Map,this.Ru=new $p,this.Vu={},this.mu=new Map,this.fu=Da.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function tk(n,e,t=!0){const s=ZA(n);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await KA(s,e,t,!0),o}async function nk(n,e){const t=ZA(n);await KA(t,e,!0,!1)}async function KA(n,e,t,s){const o=await SV(n.localStore,zi(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return s&&(d=await ik(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&LA(n.remoteStore,o),d}async function ik(n,e,t,s,o){n.pu=(E,A,x)=>(async function(q,F,Z,te){let $=F.view.ru(Z);$.Cs&&($=await iE(q.localStore,F.query,!1).then((({documents:M})=>F.view.ru(M,$))));const z=te&&te.targetChanges.get(F.targetId),ae=te&&te.targetMismatches.get(F.targetId)!=null,ce=F.view.applyChanges($,q.isPrimaryClient,z,ae);return hE(q,F.targetId,ce.au),ce.snapshot})(n,E,A,x);const l=await iE(n.localStore,e,!0),c=new XV(e,l.Qs),d=c.ru(l.documents),p=Au.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),h=c.applyChanges(d,n.isPrimaryClient,p);hE(n,t,h.au);const T=new WV(e,t,c);return n.Tu.set(e,T),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function sk(n,e,t){const s=Ve(n),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((c=>!af(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await gp(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Zp(s.remoteStore,o.targetId),vp(s,o.targetId)})).catch(Ha)):(vp(s,o.targetId),await gp(s.localStore,o.targetId,!0))}async function rk(n,e){const t=Ve(n),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Zp(t.remoteStore,s.targetId))}async function ok(n,e,t){const s=hk(n);try{const o=await(function(c,d){const p=Ve(c),h=mt.now(),T=d.reduce(((x,k)=>x.add(k.key)),Je());let E,A;return p.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let k=Ns(),q=Je();return p.Ns.getEntries(x,T).next((F=>{k=F,k.forEach(((Z,te)=>{te.isValidDocument()||(q=q.add(Z))}))})).next((()=>p.localDocuments.getOverlayedDocuments(x,k))).next((F=>{E=F;const Z=[];for(const te of d){const $=EP(te,E.get(te.key).overlayedDocument);$!=null&&Z.push(new Eo(te.key,$,nA($.value.mapValue),Gi.exists(!0)))}return p.mutationQueue.addMutationBatch(x,h,Z,d)})).next((F=>{A=F;const Z=F.applyToLocalDocumentSet(E,q);return p.documentOverlayCache.saveOverlays(x,F.batchId,Z)}))})).then((()=>({batchId:A.batchId,changes:fA(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(c,d,p){let h=c.Vu[c.currentUser.toKey()];h||(h=new Et(Ye)),h=h.insert(d,p),c.Vu[c.currentUser.toKey()]=h})(s,o.batchId,t),await Cu(s,o.changes),await mf(s.remoteStore)}catch(o){const l=sg(o,"Failed to persist write");t.reject(l)}}async function $A(n,e){const t=Ve(n);try{const s=await vV(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Au.get(l);c&&(st(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?st(c.hu,14607):o.removedDocuments.size>0&&(st(c.hu,42227),c.hu=!1))})),await Cu(t,s,e)}catch(s){await Ha(s)}}function fE(n,e,t){const s=Ve(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(c,d){const p=Ve(c);p.onlineState=d;let h=!1;p.queries.forEach(((T,E)=>{for(const A of E.Sa)A.va(d)&&(h=!0)})),h&&rg(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function ak(n,e,t){const s=Ve(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let c=new Et(xe.comparator);c=c.insert(l,fn.newNoDocument(l,De.min()));const d=Je().add(l),p=new df(De.min(),new Map,new Et(Ye),c,d);await $A(s,p),s.du=s.du.remove(l),s.Au.delete(e),ag(s)}else await gp(s.localStore,e,!1).then((()=>vp(s,e,t))).catch(Ha)}async function lk(n,e){const t=Ve(n),s=e.batch.batchId;try{const o=await _V(t.localStore,e);XA(t,s,null),QA(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Cu(t,o)}catch(o){await Ha(o)}}async function uk(n,e,t){const s=Ve(n);try{const o=await(function(c,d){const p=Ve(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let T;return p.mutationQueue.lookupMutationBatch(h,d).next((E=>(st(E!==null,37113),T=E.keys(),p.mutationQueue.removeMutationBatch(h,E)))).next((()=>p.mutationQueue.performConsistencyCheck(h))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(h,T,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,T))).next((()=>p.localDocuments.getDocuments(h,T)))}))})(s.localStore,e);XA(s,e,t),QA(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Cu(s,o)}catch(o){await Ha(o)}}function QA(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function XA(n,e,t){const s=Ve(n);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function vp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||WA(n,s)}))}function WA(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Zp(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),ag(n))}function hE(n,e,t){for(const s of t)s instanceof YA?(n.Ru.addReference(s.key,e),ck(n,s)):s instanceof JA?(ye(og,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||WA(n,s.key)):Re(19791,{wu:s})}function ck(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(ye(og,"New document in limbo: "+t),n.Eu.add(s),ag(n))}function ag(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new xe(_t.fromString(e)),s=n.fu.next();n.Au.set(s,new ZV(t)),n.du=n.du.insert(t,s),LA(n.remoteStore,new gr(zi(zp(t.path)),s,"TargetPurposeLimboResolution",nf.ce))}}async function Cu(n,e,t){const s=Ve(n),o=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((d,p)=>{c.push(s.pu(p,e,t).then((h=>{var T;if((h||t)&&s.isPrimaryClient){const E=h?!h.fromCache:(T=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:T.current;s.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(h){o.push(h);const E=Xp.As(p.targetId,h);l.push(E)}})))})),await Promise.all(c),s.Pu.H_(o),await(async function(p,h){const T=Ve(p);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>oe.forEach(h,(A=>oe.forEach(A.Es,(x=>T.persistence.referenceDelegate.addReference(E,A.targetId,x))).next((()=>oe.forEach(A.ds,(x=>T.persistence.referenceDelegate.removeReference(E,A.targetId,x)))))))))}catch(E){if(!za(E))throw E;ye(Wp,"Failed to update sequence numbers: "+E)}for(const E of h){const A=E.targetId;if(!E.fromCache){const x=T.Ms.get(A),k=x.snapshotVersion,q=x.withLastLimboFreeSnapshotVersion(k);T.Ms=T.Ms.insert(A,q)}}})(s.localStore,l))}async function dk(n,e){const t=Ve(n);if(!t.currentUser.isEqual(e)){ye(og,"User change. New user:",e.toKey());const s=await PA(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((p=>{p.reject(new Se(le.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Cu(t,s.Ls)}}function fk(n,e){const t=Ve(n),s=t.Au.get(e);if(s&&s.hu)return Je().add(s.key);{let o=Je();const l=t.Iu.get(e);if(!l)return o;for(const c of l){const d=t.Tu.get(c);o=o.unionWith(d.view.nu)}return o}}function ZA(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$A.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ak.bind(null,e),e.Pu.H_=$V.bind(null,e.eventManager),e.Pu.yu=QV.bind(null,e.eventManager),e}function hk(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uk.bind(null,e),e}class Hd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ff(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return yV(this.persistence,new mV,e.initialUser,this.serializer)}Cu(e){return new DA(Qp.mi,this.serializer)}Du(e){return new bV}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hd.provider={build:()=>new Hd};class mk extends Hd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){st(this.persistence.referenceDelegate instanceof Bd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new ZP(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new DA((s=>Bd.mi(s,t)),this.serializer)}}class Tp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>fE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=dk.bind(null,this.syncEngine),await YV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new KV})()}createDatastore(e){const t=ff(e.databaseInfo.databaseId),s=(function(l){return new RV(l)})(e.databaseInfo);return(function(l,c,d,p){return new PV(l,c,d,p)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,c,d){return new kV(s,o,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>fE(this.syncEngine,t,0)),(function(){return oE.v()?new oE:new CV})())}createSyncEngine(e,t){return(function(o,l,c,d,p,h,T){const E=new ek(o,l,c,d,p,h);return T&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Ve(o);ye(go,"RemoteStore shutting down."),l.Ea.add(5),await bu(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Tp.provider={build:()=>new Tp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ws("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir="FirestoreClient";class pk{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=dn.UNAUTHENTICATED,this.clientId=tf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{ye(Ir,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(ye(Ir,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=sg(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Lm(n,e){n.asyncQueue.verifyOperationInProgress(),ye(Ir,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await PA(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function mE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await gk(n);ye(Ir,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>lE(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>lE(e.remoteStore,o))),n._onlineComponents=e}async function gk(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ye(Ir,"Using user provided OfflineComponentProvider");try{await Lm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===le.FAILED_PRECONDITION||o.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;po("Error using user provided cache. Falling back to memory cache: "+t),await Lm(n,new Hd)}}else ye(Ir,"Using default OfflineComponentProvider"),await Lm(n,new mk(void 0));return n._offlineComponents}async function tb(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ye(Ir,"Using user provided OnlineComponentProvider"),await mE(n,n._uninitializedComponentsProvider._online)):(ye(Ir,"Using default OnlineComponentProvider"),await mE(n,new Tp))),n._onlineComponents}function yk(n){return tb(n).then((e=>e.syncEngine))}async function nb(n){const e=await tb(n),t=e.eventManager;return t.onListen=tk.bind(null,e.syncEngine),t.onUnlisten=sk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=nk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=rk.bind(null,e.syncEngine),t}function _k(n,e,t={}){const s=new bs;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,h){const T=new eb({next:A=>{T.Nu(),c.enqueueAndForget((()=>GA(l,E)));const x=A.docs.has(d);!x&&A.fromCache?h.reject(new Se(le.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&A.fromCache&&p&&p.source==="server"?h.reject(new Se(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(A)},error:A=>h.reject(A)}),E=new jA(zp(d.path),T,{includeMetadataChanges:!0,qa:!0});return zA(l,E)})(await nb(n),n.asyncQueue,e,t,s))),s.promise}function vk(n,e,t={}){const s=new bs;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,h){const T=new eb({next:A=>{T.Nu(),c.enqueueAndForget((()=>GA(l,E))),A.fromCache&&p.source==="server"?h.reject(new Se(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(A)},error:A=>h.reject(A)}),E=new jA(d,T,{includeMetadataChanges:!0,qa:!0});return zA(l,E)})(await nb(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="firestore.googleapis.com",gE=!0;class yE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Se(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sb,this.ssl=gE}else this.host=e.host,this.ssl=e.ssl??gE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=MA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<XP)throw new Se(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ib(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Se(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Se(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Se(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pf{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new zS;switch(s.type){case"firstParty":return new R2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Se(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=pE.get(t);s&&(ye("ComponentProvider","Removing Datastore"),pE.delete(t),s.terminate())})(this),Promise.resolve()}}function rb(n,e,t,s={}){var h;n=Rs(n,pf);const o=qa(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;o&&(IS(`https://${d}`),wS("Firestore",!0)),l.host!==sb&&l.host!==d&&po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:d,ssl:o,emulatorOptions:s};if(!fo(p,c)&&(n._setSettings(p),s.mockUserToken)){let T,E;if(typeof s.mockUserToken=="string")T=s.mockUserToken,E=dn.MOCK_USER;else{T=XM(s.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new Se(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new dn(A)}n._authCredentials=new x2(new HS(T,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new xu(this.firestore,e,this._query)}}class Gt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}toJSON(){return{type:Gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Eu(t,Gt._jsonSchema))return new Gt(e,s||null,new xe(_t.fromString(t.referencePath)))}}Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:zt("string",Gt._jsonSchemaVersion),referencePath:zt("string")};class Cs extends xu{constructor(e,t,s){super(e,t,zp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new xe(e))}withConverter(e){return new Cs(this.firestore,e,this._path)}}function Tk(n,e,...t){if(n=_n(n),GS("collection","path",e),n instanceof pf){const s=_t.fromString(e,...t);return MT(s),new Cs(n,null,s)}{if(!(n instanceof Gt||n instanceof Cs))throw new Se(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(_t.fromString(e,...t));return MT(s),new Cs(n.firestore,null,s)}}function Ek(n,e,...t){if(n=_n(n),arguments.length===1&&(e=tf.newId()),GS("doc","path",e),n instanceof pf){const s=_t.fromString(e,...t);return NT(s),new Gt(n,null,new xe(s))}{if(!(n instanceof Gt||n instanceof Cs))throw new Se(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(_t.fromString(e,...t));return NT(s),new Gt(n.firestore,n instanceof Cs?n.converter:null,new xe(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="AsyncQueue";class vE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new kA(this,"async_queue_retry"),this._c=()=>{const s=Um();s&&ye(_E,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Um();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Um();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new bs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!za(e))throw e;ye(_E,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,ws("INTERNAL UNHANDLED ERROR: ",TE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=ig.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Re(47125,{Pc:TE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function TE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class ja extends pf{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new vE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vE(e),this._firestoreClient=void 0,await e}}}function ob(n,e){const t=typeof n=="object"?n:DS(),s=typeof n=="string"?n:Pd,o=kp(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=$M("firestore");l&&rb(o,...l)}return o}function gf(n){if(n._terminated)throw new Se(le.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Sk(n),n._firestoreClient}function Sk(n){var s,o,l;const e=n._freezeSettings(),t=(function(d,p,h,T){return new j2(d,p,h,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,ib(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new pk(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this._byteString=e}static fromBase64String(e){try{return new On(en.fromBase64String(e))}catch(t){throw new Se(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new On(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:On._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Eu(e,On._jsonSchema))return On.fromBase64String(e.bytes)}}On._jsonSchemaVersion="firestore/bytes/1.0",On._jsonSchema={type:zt("string",On._jsonSchemaVersion),bytes:zt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Se(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Se(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Se(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ye(this._lat,e._lat)||Ye(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gi._jsonSchemaVersion}}static fromJSON(e){if(Eu(e,gi._jsonSchema))return new gi(e.latitude,e.longitude)}}gi._jsonSchemaVersion="firestore/geoPoint/1.0",gi._jsonSchema={type:zt("string",gi._jsonSchemaVersion),latitude:zt("number"),longitude:zt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Eu(e,yi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new yi(e.vectorValues);throw new Se(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yi._jsonSchemaVersion="firestore/vectorValue/1.0",yi._jsonSchema={type:zt("string",yi._jsonSchemaVersion),vectorValues:zt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=/^__.*__$/;class bk{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Eo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Su(e,this.data,t,this.fieldTransforms)}}function ab(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{Ac:n})}}class ug{constructor(e,t,s,o,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ug({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return zd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ab(this.Ac)&&Ak.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Ck{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||ff(e)}Cc(e,t,s,o=!1){return new ug({Ac:e,methodName:t,Dc:s,path:Zt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xk(n){const e=n._freezeSettings(),t=ff(n._databaseId);return new Ck(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ik(n,e,t,s,o,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,o);db("Data must be an object, but it was:",c,s);const d=ub(s,c);let p,h;if(l.merge)p=new mi(c.fieldMask),h=c.fieldTransforms;else if(l.mergeFields){const T=[];for(const E of l.mergeFields){const A=wk(e,E,t);if(!c.contains(A))throw new Se(le.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);Nk(T,A)||T.push(A)}p=new mi(T),h=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,h=c.fieldTransforms;return new bk(new Zn(d),p,h)}function lb(n,e){if(cb(n=_n(n)))return db("Unsupported field value:",e,n),ub(n,e);if(n instanceof lg)return(function(s,o){if(!ab(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let c=0;for(const d of s){let p=lb(d,o.wc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,o){if((s=_n(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return pP(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=mt.fromDate(s);return{timestampValue:qd(o.serializer,l)}}if(s instanceof mt){const l=new mt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:qd(o.serializer,l)}}if(s instanceof gi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof On)return{bytesValue:bA(o.serializer,s._byteString)};if(s instanceof Gt){const l=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Kp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof yi)return(function(c,d){return{mapValue:{fields:{[eA]:{stringValue:tA},[Vd]:{arrayValue:{values:c.toArray().map((h=>{if(typeof h!="number")throw d.Sc("VectorValues must only contain numeric values.");return Gp(d.serializer,h)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Lp(s)}`)})(n,e)}function ub(n,e){const t={};return KS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vo(n,((s,o)=>{const l=lb(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function cb(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof mt||n instanceof gi||n instanceof On||n instanceof Gt||n instanceof lg||n instanceof yi)}function db(n,e,t){if(!cb(t)||!YS(t)){const s=Lp(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function wk(n,e,t){if((e=_n(e))instanceof yf)return e._internalPath;if(typeof e=="string")return fb(n,e);throw zd("Field path arguments must be of type string or ",n,!1,void 0,t)}const Rk=new RegExp("[~\\*/\\[\\]]");function fb(n,e,t){if(e.search(Rk)>=0)throw zd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new yf(...e.split("."))._internalPath}catch{throw zd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function zd(n,e,t,s,o){const l=s&&!s.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${s}`),c&&(p+=` in document ${o}`),p+=")"),new Se(le.INVALID_ARGUMENT,d+n+p)}function Nk(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Mk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(mb("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Mk extends hb{data(){return super.data()}}function mb(n,e){return typeof e=="string"?fb(n,e):e instanceof yf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Se(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pb{convertValue(e,t="none"){switch(Cr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(br(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Re(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return vo(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,o,l;const t=(l=(o=(s=e.fields)==null?void 0:s[Vd].arrayValue)==null?void 0:o.values)==null?void 0:l.map((c=>Pt(c.doubleValue)));return new yi(t)}convertGeoPoint(e){return new gi(Pt(e.latitude),Pt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=rf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(fu(e));default:return null}}convertTimestamp(e){const t=Ar(e);return new mt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=_t.fromString(e);st(NA(s),9688,{name:e});const o=new Ra(s.get(1),s.get(3)),l=new xe(s.popFirst(5));return o.isEqual(t)||ws(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class ya{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Er extends hb{constructor(e,t,s,o,l,c){super(e,t,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(mb("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Er._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Er._jsonSchemaVersion="firestore/documentSnapshot/1.0",Er._jsonSchema={type:zt("string",Er._jsonSchemaVersion),bundleSource:zt("string","DocumentSnapshot"),bundleName:zt("string"),bundle:zt("string")};class lu extends Er{data(e={}){return super.data(e)}}class uo{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ya(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new lu(this._firestore,this._userDataWriter,s.key,s,new ya(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Se(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((d=>{const p=new lu(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ya(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new lu(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ya(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let h=-1,T=-1;return d.type!==0&&(h=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),T=c.indexOf(d.doc.key)),{type:Vk(d.type),doc:p,oldIndex:h,newIndex:T}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=uo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=tf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Vk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(n){n=Rs(n,Gt);const e=Rs(n.firestore,ja);return _k(gf(e),n._key).then((t=>qk(e,n,t)))}uo._jsonSchemaVersion="firestore/querySnapshot/1.0",uo._jsonSchema={type:zt("string",uo._jsonSchemaVersion),bundleSource:zt("string","QuerySnapshot"),bundleName:zt("string"),bundle:zt("string")};class gb extends pb{constructor(e){super(),this.firestore=e}convertBytes(e){return new On(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,t)}}function Uk(n){n=Rs(n,xu);const e=Rs(n.firestore,ja),t=gf(e),s=new gb(e);return Dk(n._query),vk(t,n._query).then((o=>new uo(e,s,n,o)))}function Lk(n,e,t){n=Rs(n,Gt);const s=Rs(n.firestore,ja),o=Pk(n.converter,e,t);return cg(s,[Ik(xk(s),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Gi.none())])}function Ok(n){return cg(Rs(n.firestore,ja),[new jp(n._key,Gi.none())])}function cg(n,e){return(function(s,o){const l=new bs;return s.asyncQueue.enqueueAndForget((async()=>ok(await yk(s),o,l))),l.promise})(gf(n),e)}function qk(n,e,t){const s=t.docs.get(e._key),o=new gb(n);return new Er(n,o,e._key,s,new ya(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Fa=o})(Ba),Ia(new ho("firestore",((s,{instanceIdentifier:o,options:l})=>{const c=s.getProvider("app").getImmediate(),d=new ja(new I2(s.getProvider("auth-internal")),new N2(c,s.getProvider("app-check-internal")),(function(h,T){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Se(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ra(h.options.projectId,T)})(c,o),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),vr(xT,IT,e),vr(xT,IT,"esm2020")})();const dd=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:pb,Bytes:On,CollectionReference:Cs,DocumentReference:Gt,DocumentSnapshot:Er,FieldPath:yf,FieldValue:lg,Firestore:ja,FirestoreError:Se,GeoPoint:gi,Query:xu,QueryDocumentSnapshot:lu,QuerySnapshot:uo,SnapshotMetadata:ya,Timestamp:mt,VectorValue:yi,_AutoId:tf,_ByteString:en,_DatabaseId:Ra,_DocumentKey:xe,_EmptyAuthCredentialsProvider:zS,_FieldPath:Zt,_cast:Rs,_logWarn:po,_validateIsNotUsedTogether:jS,collection:Tk,connectFirestoreEmulator:rb,deleteDoc:Ok,doc:Ek,ensureFirestoreConfigured:gf,executeWrite:cg,getDoc:kk,getDocs:Uk,getFirestore:ob,setDoc:Lk},Symbol.toStringTag,{value:"Module"}));function yb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _b=yb,vb=new vu("auth","Firebase",yb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd=new Pp("@firebase/auth");function Bk(n,...e){Gd.logLevel<=je.WARN&&Gd.warn(`Auth (${Ba}): ${n}`,...e)}function Ed(n,...e){Gd.logLevel<=je.ERROR&&Gd.error(`Auth (${Ba}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(n,...e){throw dg(n,...e)}function Yi(n,...e){return dg(n,...e)}function Tb(n,e,t){const s={..._b(),[e]:t};return new vu("auth","Firebase",s).create(e,{appName:n.name})}function xs(n){return Tb(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dg(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return vb.create(n,...e)}function we(n,e,...t){if(!n)throw dg(e,...t)}function Ss(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ed(e),new Error(e)}function Ms(n,e){n||Ss(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function Fk(){return EE()==="http:"||EE()==="https:"}function EE(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Fk()||iD()||"connection"in navigator)?navigator.onLine:!0}function zk(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ms(t>e,"Short delay should be less than long delay!"),this.isMobile=eD()||sD()}get(){return Hk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(n,e){Ms(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ss("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ss("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ss("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Yk=new Iu(3e4,6e4);function Nr(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Vs(n,e,t,s,o={}){return Sb(n,o,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const d=Tu({key:n.config.apiKey,...c}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:p,...l};return nD()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&qa(n.emulatorConfig.host)&&(h.credentials="include"),Eb.fetch()(await Ab(n,n.config.apiHost,t,d),h)})}async function Sb(n,e,t){n._canInitEmulator=!1;const s={...Gk,...e};try{const o=new Kk(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw fd(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,h]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw fd(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw fd(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw fd(n,"user-disabled",c);const T=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Tb(n,T,h);_i(n,T)}}catch(o){if(o instanceof Ps)throw o;_i(n,"network-request-failed",{message:String(o)})}}async function wu(n,e,t,s,o={}){const l=await Vs(n,e,t,s,o);return"mfaPendingCredential"in l&&_i(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function Ab(n,e,t,s){const o=`${e}${t}?${s}`,l=n,c=l.config.emulator?fg(n.config,o):`${n.config.apiScheme}://${o}`;return jk.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function Jk(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Kk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Yi(this.auth,"network-request-failed")),Yk.get())})}}function fd(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Yi(n,e,s);return o.customData._tokenResponse=t,o}function SE(n){return n!==void 0&&n.enterprise!==void 0}class $k{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Jk(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Qk(n,e){return Vs(n,"GET","/v2/recaptchaConfig",Nr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xk(n,e){return Vs(n,"POST","/v1/accounts:delete",e)}async function jd(n,e){return Vs(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bb(n,e=!1){const t=_n(n),s=await t.getIdToken(e),o=hg(s);we(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:uu(Om(o.auth_time)),issuedAtTime:uu(Om(o.iat)),expirationTime:uu(Om(o.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Om(n){return Number(n)*1e3}function hg(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return Ed("JWT malformed, contained fewer than 3 sections"),null;try{const o=AS(t);return o?JSON.parse(o):(Ed("Failed to decode base64 JWT payload"),null)}catch(o){return Ed("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function AE(n){const e=hg(n);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Va(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Ps&&Wk(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function Wk({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=uu(this.lastLoginAt),this.creationTime=uu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yd(n){var E;const e=n.auth,t=await n.getIdToken(),s=await Va(n,jd(e,{idToken:t}));we(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=(E=o.providerUserInfo)!=null&&E.length?xb(o.providerUserInfo):[],c=eU(n.providerData,l),d=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(c!=null&&c.length),h=d?p:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Sp(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,T)}async function Cb(n){const e=_n(n);await Yd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function eU(n,e){return[...n.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function xb(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tU(n,e){const t=await Sb(n,{},async()=>{const s=Tu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=await Ab(n,o,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:s};return n.emulatorConfig&&qa(n.emulatorConfig.host)&&(p.credentials="include"),Eb.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function nU(n,e){return Vs(n,"POST","/v2/accounts:revokeToken",Nr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):AE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){we(e.length!==0,"internal-error");const t=AE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await tU(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,c=new ba;return s&&(we(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(we(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(we(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ba,this.toJSON())}_performRefresh(){return Ss("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(n,e){we(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class pi{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new Zk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Sp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Va(this,this.stsTokenManager.getToken(this.auth,e));return we(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return bb(this,e)}reload(){return Cb(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new pi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Yd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wn(this.auth.app))return Promise.reject(xs(this.auth));const e=await this.getIdToken();return await Va(this,Xk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,h=t.createdAt??void 0,T=t.lastLoginAt??void 0,{uid:E,emailVerified:A,isAnonymous:x,providerData:k,stsTokenManager:q}=t;we(E&&q,e,"internal-error");const F=ba.fromJSON(this.name,q);we(typeof E=="string",e,"internal-error"),mr(s,e.name),mr(o,e.name),we(typeof A=="boolean",e,"internal-error"),we(typeof x=="boolean",e,"internal-error"),mr(l,e.name),mr(c,e.name),mr(d,e.name),mr(p,e.name),mr(h,e.name),mr(T,e.name);const Z=new pi({uid:E,auth:e,email:o,emailVerified:A,displayName:s,isAnonymous:x,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:F,createdAt:h,lastLoginAt:T});return k&&Array.isArray(k)&&(Z.providerData=k.map(te=>({...te}))),p&&(Z._redirectEventId=p),Z}static async _fromIdTokenResponse(e,t,s=!1){const o=new ba;o.updateFromServerResponse(t);const l=new pi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Yd(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];we(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?xb(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),d=new ba;d.updateFromIdToken(s);const p=new pi({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:c}),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Sp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,h),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE=new Map;function As(n){Ms(n instanceof Function,"Expected a class definition");let e=bE.get(n);return e?(Ms(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,bE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Ib.type="NONE";const Ap=Ib;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(n,e,t){return`firebase:${n}:${e}:${t}`}class Ca{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=Sd(this.userKey,o.apiKey,l),this.fullPersistenceKey=Sd("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await jd(this.auth,{idToken:e}).catch(()=>{});return t?pi._fromGetAccountInfoResponse(this.auth,t,e):null}return pi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Ca(As(Ap),e,s);const o=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let l=o[0]||As(Ap);const c=Sd(s,e.config.apiKey,e.name);let d=null;for(const h of t)try{const T=await h._get(c);if(T){let E;if(typeof T=="string"){const A=await jd(e,{idToken:T}).catch(()=>{});if(!A)break;E=await pi._fromGetAccountInfoResponse(e,A,T)}else E=pi._fromJSON(e,T);h!==l&&(d=E),l=h;break}}catch{}const p=o.filter(h=>h._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Ca(l,e,s):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async h=>{if(h!==l)try{await h._remove(c)}catch{}})),new Ca(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Mb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Pb(e))return"Blackberry";if(Vb(e))return"Webos";if(Rb(e))return"Safari";if((e.includes("chrome/")||Nb(e))&&!e.includes("edge/"))return"Chrome";if(Db(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function wb(n=mn()){return/firefox\//i.test(n)}function Rb(n=mn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Nb(n=mn()){return/crios\//i.test(n)}function Mb(n=mn()){return/iemobile/i.test(n)}function Db(n=mn()){return/android/i.test(n)}function Pb(n=mn()){return/blackberry/i.test(n)}function Vb(n=mn()){return/webos/i.test(n)}function mg(n=mn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function iU(n=mn()){var e;return mg(n)&&!!((e=window.navigator)!=null&&e.standalone)}function sU(){return rD()&&document.documentMode===10}function kb(n=mn()){return mg(n)||Db(n)||Vb(n)||Pb(n)||/windows phone/i.test(n)||Mb(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(n,e=[]){let t;switch(n){case"Browser":t=CE(mn());break;case"Worker":t=`${CE(mn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ba}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oU(n,e={}){return Vs(n,"GET","/v2/passwordPolicy",Nr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aU=6;class lU{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??aU,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xE(this),this.idTokenSubscription=new xE(this),this.beforeStateQueue=new rU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=As(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await Ca.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await jd(this,{idToken:e}),s=await pi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Wn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=s==null?void 0:s._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(s=p.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Yd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wn(this.app))return Promise.reject(xs(this));const t=e?_n(e):null;return t&&we(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wn(this.app)?Promise.reject(xs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wn(this.app)?Promise.reject(xs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(As(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await oU(this),t=new lU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new vu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await nU(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&As(e)||this._popupRedirectResolver;we(t,this,"argument-error"),this.redirectPersistenceManager=await Ca.create(this,[As(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ub(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(Wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&Bk(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ao(n){return _n(n)}class xE{constructor(e){this.auth=e,this.observer=null,this.addObserver=hD(t=>this.observer=t)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _f={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cU(n){_f=n}function Lb(n){return _f.loadJS(n)}function dU(){return _f.recaptchaEnterpriseScript}function fU(){return _f.gapiScript}function hU(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class mU{constructor(){this.enterprise=new pU}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class pU{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const gU="recaptcha-enterprise",Ob="NO_RECAPTCHA";class yU{constructor(e){this.type=gU,this.auth=Ao(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{Qk(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const h=new $k(p);return l.tenantId==null?l._agentRecaptchaConfig=h:l._tenantRecaptchaConfigs[l.tenantId]=h,c(h.siteKey)}}).catch(p=>{d(p)})})}function o(l,c,d){const p=window.grecaptcha;SE(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(h=>{c(h)}).catch(()=>{c(Ob)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new mU().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{s(this.auth).then(d=>{if(!t&&SE(window.grecaptcha))o(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=dU();p.length!==0&&(p+=d),Lb(p).then(()=>{o(d,l,c)}).catch(h=>{c(h)})}}).catch(d=>{c(d)})})}}async function IE(n,e,t,s=!1,o=!1){const l=new yU(n);let c;if(o)c=Ob;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,h=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return s?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function bp(n,e,t,s,o){var l;if((l=n._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await IE(n,e,t,t==="getOobCode");return s(n,c)}else return s(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await IE(n,e,t,t==="getOobCode");return s(n,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(n,e){const t=kp(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(fo(l,e??{}))return o;_i(o,"already-initialized")}return t.initialize({options:e})}function _U(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(As);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function Bb(n,e,t){const s=Ao(n);we(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=Fb(e),{host:c,port:d}=vU(e),p=d===null?"":`:${d}`,h={url:`${l}//${c}${p}/`},T=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){we(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),we(fo(h,s.config.emulator)&&fo(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=h,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,qa(c)?(IS(`${l}//${c}${p}`),wS("Auth",!0)):TU()}function Fb(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function vU(n){const e=Fb(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:wE(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:wE(c)}}}function wE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function TU(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ss("not implemented")}_getIdTokenResponse(e){return Ss("not implemented")}_linkToIdToken(e,t){return Ss("not implemented")}_getReauthenticationResolver(e){return Ss("not implemented")}}async function EU(n,e){return Vs(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SU(n,e){return wu(n,"POST","/v1/accounts:signInWithPassword",Nr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AU(n,e){return wu(n,"POST","/v1/accounts:signInWithEmailLink",Nr(n,e))}async function bU(n,e){return wu(n,"POST","/v1/accounts:signInWithEmailLink",Nr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka extends vf{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new ka(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new ka(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bp(e,t,"signInWithPassword",SU);case"emailLink":return AU(e,{email:this._email,oobCode:this._password});default:_i(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bp(e,s,"signUpPassword",EU);case"emailLink":return bU(e,{idToken:t,email:this._email,oobCode:this._password});default:_i(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xa(n,e){return wu(n,"POST","/v1/accounts:signInWithIdp",Nr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CU="http://localhost";class wr extends vf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new wr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):_i("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const c=new wr(s,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return xa(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,xa(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xa(e,t)}buildRequest(){const e={requestUri:CU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Tu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xU(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function IU(n){const e=Xl(Wl(n)).link,t=e?Xl(Wl(e)).deep_link_id:null,s=Xl(Wl(n)).deep_link_id;return(s?Xl(Wl(s)).link:null)||s||t||e||n}class Tf{constructor(e){const t=Xl(Wl(e)),s=t.apiKey??null,o=t.oobCode??null,l=xU(t.mode??null);we(s&&o&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=IU(e);try{return new Tf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(){this.providerId=bo.PROVIDER_ID}static credential(e,t){return ka._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Tf.parseLink(t);return we(s,"argument-error"),ka._fromEmailAndCode(e,s.code,s.tenantId)}}bo.PROVIDER_ID="password";bo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";bo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends Hb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends Ru{constructor(){super("facebook.com")}static credential(e){return wr._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ys.credential(e.oauthAccessToken)}catch{return null}}}ys.FACEBOOK_SIGN_IN_METHOD="facebook.com";ys.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s extends Ru{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return wr._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return _s.credential(t,s)}catch{return null}}}_s.GOOGLE_SIGN_IN_METHOD="google.com";_s.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends Ru{constructor(){super("github.com")}static credential(e){return wr._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vs.credential(e.oauthAccessToken)}catch{return null}}}vs.GITHUB_SIGN_IN_METHOD="github.com";vs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts extends Ru{constructor(){super("twitter.com")}static credential(e,t){return wr._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Ts.credential(t,s)}catch{return null}}}Ts.TWITTER_SIGN_IN_METHOD="twitter.com";Ts.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wU(n,e){return wu(n,"POST","/v1/accounts:signUp",Nr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await pi._fromIdTokenResponse(e,s,o),c=RE(s);return new yo({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=RE(s);return new yo({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function RE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd extends Ps{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Jd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Jd(e,t,s,o)}}function zb(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Jd._fromErrorAndOperation(n,l,e,s):l})}async function RU(n,e,t=!1){const s=await Va(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return yo._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NU(n,e,t=!1){const{auth:s}=n;if(Wn(s.app))return Promise.reject(xs(s));const o="reauthenticate";try{const l=await Va(n,zb(s,o,e,n),t);we(l.idToken,s,"internal-error");const c=hg(l.idToken);we(c,s,"internal-error");const{sub:d}=c;return we(n.uid===d,s,"user-mismatch"),yo._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&_i(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gb(n,e,t=!1){if(Wn(n.app))return Promise.reject(xs(n));const s="signIn",o=await zb(n,s,e),l=await yo._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(l.user),l}async function jb(n,e){return Gb(Ao(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yb(n){const e=Ao(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function MU(n,e,t){if(Wn(n.app))return Promise.reject(xs(n));const s=Ao(n),c=await bp(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",wU).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&Yb(n),p}),d=await yo._fromIdTokenResponse(s,"signIn",c);return await s._updateCurrentUser(d.user),d}function DU(n,e,t){return Wn(n.app)?Promise.reject(xs(n)):jb(_n(n),bo.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Yb(n),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PU(n,e){return Vs(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VU(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=_n(n),l={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await Va(s,PU(s.auth,l));s.displayName=c.displayName||null,s.photoURL=c.photoUrl||null;const d=s.providerData.find(({providerId:p})=>p==="password");d&&(d.displayName=s.displayName,d.photoURL=s.photoURL),await s._updateTokensIfNecessary(c)}function Jb(n,e,t,s){return _n(n).onIdTokenChanged(e,t,s)}function Kb(n,e,t){return _n(n).beforeAuthStateChanged(e,t)}function kU(n,e,t,s){return _n(n).onAuthStateChanged(e,t,s)}function UU(n){return _n(n).signOut()}const Kd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Kd,"1"),this.storage.removeItem(Kd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU=1e3,OU=10;class Qb extends $b{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);sU()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,OU):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},LU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Qb.type="LOCAL";const Xb=Qb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb extends $b{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Wb.type="SESSION";const pg=Wb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qU(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Ef(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const d=Array.from(c).map(async h=>h(t.origin,l)),p=await qU(d);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ef.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const h=gg("",20);o.port1.start();const T=setTimeout(()=>{p(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(E){const A=E;if(A.data.eventId===h)switch(A.data.status){case"ack":clearTimeout(T),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(A.data.response);break;default:clearTimeout(T),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(){return window}function FU(n){Ji().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(){return typeof Ji().WorkerGlobalScope<"u"&&typeof Ji().importScripts=="function"}async function HU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zU(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function GU(){return Zb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="firebaseLocalStorageDb",jU=1,$d="firebaseLocalStorage",tC="fbase_key";class Nu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Sf(n,e){return n.transaction([$d],e?"readwrite":"readonly").objectStore($d)}function YU(){const n=indexedDB.deleteDatabase(eC);return new Nu(n).toPromise()}function Cp(){const n=indexedDB.open(eC,jU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore($d,{keyPath:tC})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains($d)?e(s):(s.close(),await YU(),e(await Cp()))})})}async function NE(n,e,t){const s=Sf(n,!0).put({[tC]:e,value:t});return new Nu(s).toPromise()}async function JU(n,e){const t=Sf(n,!1).get(e),s=await new Nu(t).toPromise();return s===void 0?null:s.value}function ME(n,e){const t=Sf(n,!0).delete(e);return new Nu(t).toPromise()}const KU=800,$U=3;class nC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>$U)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Zb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ef._getInstance(GU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await HU(),!this.activeServiceWorker)return;this.sender=new BU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||zU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cp();return await NE(e,Kd,"1"),await ME(e,Kd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>NE(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>JU(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ME(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Sf(o,!1).getAll();return new Nu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nC.type="LOCAL";const iC=nC;new Iu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QU(n,e){return e?As(e):(we(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg extends vf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return xa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return xa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function XU(n){return Gb(n.auth,new yg(n),n.bypassAuthState)}function WU(n){const{auth:e,user:t}=n;return we(t,e,"internal-error"),NU(t,new yg(n),n.bypassAuthState)}async function ZU(n){const{auth:e,user:t}=n;return we(t,e,"internal-error"),RU(t,new yg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XU;case"linkViaPopup":case"linkViaRedirect":return ZU;case"reauthViaPopup":case"reauthViaRedirect":return WU;default:_i(this.auth,"internal-error")}}resolve(e){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL=new Iu(2e3,1e4);class _a extends sC{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,_a.currentPopupAction&&_a.currentPopupAction.cancel(),_a.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){Ms(this.filter.length===1,"Popup operations only handle one event");const e=gg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Yi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Yi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_a.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,eL.get())};e()}}_a.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL="pendingRedirect",Ad=new Map;class nL extends sC{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Ad.get(this.auth._key());if(!e){try{const s=await iL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Ad.set(this.auth._key(),e)}return this.bypassAuthState||Ad.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iL(n,e){const t=oL(e),s=rL(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function sL(n,e){Ad.set(n._key(),e)}function rL(n){return As(n._redirectPersistence)}function oL(n){return Sd(tL,n.config.apiKey,n.name)}async function aL(n,e,t=!1){if(Wn(n.app))return Promise.reject(xs(n));const s=Ao(n),o=QU(s,e),c=await new nL(s,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL=600*1e3;class uL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!rC(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Yi(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lL&&this.cachedEventUids.clear(),this.cachedEventUids.has(DE(e))}saveEventToCache(e){this.cachedEventUids.add(DE(e)),this.lastProcessedEventTime=Date.now()}}function DE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function rC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function cL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dL(n,e={}){return Vs(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hL=/^https?/;async function mL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await dL(n);for(const t of e)try{if(pL(t))return}catch{}_i(n,"unauthorized-domain")}function pL(n){const e=Ep(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!hL.test(t))return!1;if(fL.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL=new Iu(3e4,6e4);function PE(){const n=Ji().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function yL(n){return new Promise((e,t)=>{var o,l,c;function s(){PE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{PE(),t(Yi(n,"network-request-failed"))},timeout:gL.get()})}if((l=(o=Ji().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Ji().gapi)!=null&&c.load)s();else{const d=hU("iframefcb");return Ji()[d]=()=>{gapi.load?s():t(Yi(n,"network-request-failed"))},Lb(`${fU()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw bd=null,e})}let bd=null;function _L(n){return bd=bd||yL(n),bd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL=new Iu(5e3,15e3),TL="__/auth/iframe",EL="emulator/auth/iframe",SL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bL(n){const e=n.config;we(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?fg(e,EL):`https://${n.config.authDomain}/${TL}`,s={apiKey:e.apiKey,appName:n.name,v:Ba},o=AL.get(n.config.apiHost);o&&(s.eid=o);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Tu(s).slice(1)}`}async function CL(n){const e=await _L(n),t=Ji().gapi;return we(t,n,"internal-error"),e.open({where:document.body,url:bL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:SL,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const c=Yi(n,"network-request-failed"),d=Ji().setTimeout(()=>{l(c)},vL.get());function p(){Ji().clearTimeout(d),o(s)}s.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},IL=500,wL=600,RL="_blank",NL="http://localhost";class VE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ML(n,e,t,s=IL,o=wL){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const p={...xL,width:s.toString(),height:o.toString(),top:l,left:c},h=mn().toLowerCase();t&&(d=Nb(h)?RL:t),wb(h)&&(e=e||NL,p.scrollbars="yes");const T=Object.entries(p).reduce((A,[x,k])=>`${A}${x}=${k},`,"");if(iU(h)&&d!=="_self")return DL(e||"",d),new VE(null);const E=window.open(e||"",d,T);we(E,n,"popup-blocked");try{E.focus()}catch{}return new VE(E)}function DL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL="__/auth/handler",VL="emulator/auth/handler",kL=encodeURIComponent("fac");async function kE(n,e,t,s,o,l){we(n.config.authDomain,n,"auth-domain-config-required"),we(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Ba,eventId:o};if(e instanceof Hb){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",fD(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,E]of Object.entries({}))c[T]=E}if(e instanceof Ru){const T=e.getScopes().filter(E=>E!=="");T.length>0&&(c.scopes=T.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const T of Object.keys(d))d[T]===void 0&&delete d[T];const p=await n._getAppCheckToken(),h=p?`#${kL}=${encodeURIComponent(p)}`:"";return`${UL(n)}?${Tu(d).slice(1)}${h}`}function UL({config:n}){return n.emulator?fg(n,VL):`https://${n.authDomain}/${PL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm="webStorageSupport";class LL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pg,this._completeRedirectFn=aL,this._overrideRedirectResult=sL}async _openPopup(e,t,s,o){var c;Ms((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await kE(e,t,s,Ep(),o);return ML(e,l,gg())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await kE(e,t,s,Ep(),o);return FU(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Ms(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await CL(e),s=new uL(e);return t.register("authEvent",o=>(we(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qm,{type:qm},o=>{var c;const l=(c=o==null?void 0:o[0])==null?void 0:c[qm];l!==void 0&&t(!!l),_i(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=mL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return kb()||Rb()||mg()}}const oC=LL;var UE="@firebase/auth",LE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function BL(n){Ia(new ho("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=s.options;we(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ub(n)},h=new uU(s,o,l,p);return _U(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Ia(new ho("auth-internal",e=>{const t=Ao(e.getProvider("auth").getImmediate());return(s=>new OL(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),vr(UE,LE,qL(n)),vr(UE,LE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL=300,HL=xS("authIdTokenMaxAge")||FL;let OE=null;const zL=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>HL)return;const o=t==null?void 0:t.token;OE!==o&&(OE=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function aC(n=DS()){const e=kp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=qb(n,{popupRedirectResolver:oC,persistence:[iC,Xb,pg]}),s=xS("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=zL(l.toString());Kb(t,c,()=>c(t.currentUser)),Jb(t,d=>c(d))}}const o=bS("auth");return o&&Bb(t,`http://${o}`),t}function GL(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}cU({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const l=Yi("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",GL().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});BL("Browser");const hd=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeURL:Tf,AuthCredential:vf,EmailAuthCredential:ka,EmailAuthProvider:bo,FacebookAuthProvider:ys,GithubAuthProvider:vs,GoogleAuthProvider:_s,OAuthCredential:wr,TwitterAuthProvider:Ts,beforeAuthStateChanged:Kb,browserLocalPersistence:Xb,browserPopupRedirectResolver:oC,browserSessionPersistence:pg,connectAuthEmulator:Bb,createUserWithEmailAndPassword:MU,getAuth:aC,getIdTokenResult:bb,inMemoryPersistence:Ap,indexedDBLocalPersistence:iC,initializeAuth:qb,onAuthStateChanged:kU,onIdTokenChanged:Jb,prodErrorMap:_b,reload:Cb,signInWithCredential:jb,signInWithEmailAndPassword:DU,signOut:UU,updateProfile:VU},Symbol.toStringTag,{value:"Module"}));let Bm=null,gs=null,hi=null;const jL=()=>{try{return Sa().hasFirebase?(Bm=MS(Ct.firebase),gs=ob(Bm),hi=aC(Bm),console.log("🔥 تم تهيئة Firebase بنجاح"),{success:!0}):(console.warn("⚠️ تحذير: مفاتيح Firebase API غير متوفرة. لن يتم تهيئة Firebase."),{success:!1,error:"مفاتيح Firebase غير متوفرة"})}catch(n){return console.error("❌ خطأ في تهيئة Firebase:",n),{success:!1,error:n instanceof Error?n.message:"خطأ غير معروف"}}};jL();const Es={async signUp(n,e,t){if(!hi)return{success:!1,error:"Firebase غير مهيأ"};try{const{createUserWithEmailAndPassword:s,updateProfile:o}=await ps(async()=>{const{createUserWithEmailAndPassword:c,updateProfile:d}=await Promise.resolve().then(()=>hd);return{createUserWithEmailAndPassword:c,updateProfile:d}},void 0),l=await s(hi,n,e);return await o(l.user,{displayName:t}),await this.saveData("users",l.user.uid,{email:n,displayName:t,createdAt:new Date().toISOString(),transactions:[],categories:[],cards:{},bankAccounts:{},investments:{currentValue:0},installments:[]}),{success:!0,user:l.user}}catch(s){return console.error("خطأ في التسجيل:",s),{success:!1,error:s instanceof Error?s.message:"خطأ غير معروف"}}},async signIn(n,e){if(!hi)return{success:!1,error:"Firebase غير مهيأ"};try{const{signInWithEmailAndPassword:t}=await ps(async()=>{const{signInWithEmailAndPassword:o}=await Promise.resolve().then(()=>hd);return{signInWithEmailAndPassword:o}},void 0);return{success:!0,user:(await t(hi,n,e)).user}}catch(t){return console.error("خطأ في تسجيل الدخول:",t),{success:!1,error:t instanceof Error?t.message:"خطأ غير معروف"}}},async signOut(){if(!hi)return{success:!1,error:"Firebase غير مهيأ"};try{const{signOut:n}=await ps(async()=>{const{signOut:e}=await Promise.resolve().then(()=>hd);return{signOut:e}},void 0);return await n(hi),{success:!0}}catch(n){return console.error("خطأ في تسجيل الخروج:",n),{success:!1,error:n instanceof Error?n.message:"خطأ غير معروف"}}},async getCurrentUser(){return hi?hi.currentUser:null},async onAuthStateChanged(n){if(!hi)return n(null),()=>{};try{const{onAuthStateChanged:e}=await ps(async()=>{const{onAuthStateChanged:t}=await Promise.resolve().then(()=>hd);return{onAuthStateChanged:t}},void 0);return e(hi,t=>{console.log("🔐 تغيير في حالة المصادقة:",t?`مسجل دخول: ${t.email}`:"غير مسجل دخول"),n(t)})}catch(e){return console.error("❌ خطأ في تحميل onAuthStateChanged:",e),n(null),()=>{}}},async saveData(n,e,t){if(!gs)return{success:!1,error:"Firebase غير مهيأ"};try{const{doc:s,setDoc:o}=await ps(async()=>{const{doc:c,setDoc:d}=await Promise.resolve().then(()=>dd);return{doc:c,setDoc:d}},void 0),l=s(gs,n,e);return await o(l,{...t,lastUpdated:new Date().toISOString()}),{success:!0,id:e}}catch(s){return console.error("خطأ في حفظ البيانات:",s),{success:!1,error:s instanceof Error?s.message:"خطأ غير معروف"}}},async getData(n,e){if(!gs)return{success:!1,error:"Firebase غير مهيأ"};try{const{doc:t,getDoc:s}=await ps(async()=>{const{doc:c,getDoc:d}=await Promise.resolve().then(()=>dd);return{doc:c,getDoc:d}},void 0),o=t(gs,n,e),l=await s(o);return l.exists()?{success:!0,data:l.data()}:{success:!1,error:"المستند غير موجود"}}catch(t){return console.error("خطأ في جلب البيانات:",t),{success:!1,error:t instanceof Error?t.message:"خطأ غير معروف"}}},async getAllDocuments(n){if(!gs)return{success:!1,error:"Firebase غير مهيأ"};try{const{collection:e,getDocs:t}=await ps(async()=>{const{collection:l,getDocs:c}=await Promise.resolve().then(()=>dd);return{collection:l,getDocs:c}},void 0),s=await t(e(gs,n)),o=[];return s.forEach(l=>{o.push({id:l.id,...l.data()})}),{success:!0,data:o}}catch(e){return console.error("خطأ في جلب المستندات:",e),{success:!1,error:e instanceof Error?e.message:"خطأ غير معروف"}}},async deleteDocument(n,e){if(!gs)return{success:!1,error:"Firebase غير مهيأ"};try{const{doc:t,deleteDoc:s}=await ps(async()=>{const{doc:l,deleteDoc:c}=await Promise.resolve().then(()=>dd);return{doc:l,deleteDoc:c}},void 0),o=t(gs,n,e);return await s(o),{success:!0}}catch(t){return console.error("خطأ في حذف المستند:",t),{success:!1,error:t instanceof Error?t.message:"خطأ غير معروف"}}},async syncLocalDataToFirebase(n,e){try{return await this.saveData("users",n,{financialData:e,syncTimestamp:new Date().toISOString()})}catch(t){return console.error("خطأ في مزامنة البيانات:",t),{success:!1,error:t instanceof Error?t.message:"خطأ غير معروف"}}},async getDataFromFirebase(n){var e;try{const t=await this.getData("users",n);return t.success&&((e=t.data)!=null&&e.financialData)?{success:!0,data:t.data.financialData}:{success:!1,error:"لا توجد بيانات محفوظة"}}catch(t){return console.error("خطأ في جلب البيانات من Firebase:",t),{success:!1,error:t instanceof Error?t.message:"خطأ غير معروف"}}}},qE=({onSuccess:n,onClose:e,hideCloseButton:t=!1})=>{const[s,o]=he.useState(!0),[l,c]=he.useState({email:"",password:"",displayName:""}),[d,p]=he.useState(!1),[h,T]=he.useState(""),E=async x=>{x.preventDefault(),p(!0),T("");try{let k;if(s)k=await Es.signIn(l.email,l.password);else{if(!l.displayName.trim()){T("الاسم مطلوب"),p(!1);return}k=await Es.signUp(l.email,l.password,l.displayName)}k.success?n(k.user):T(k.error||"حدث خطأ غير متوقع")}catch{T("حدث خطأ في الاتصال")}finally{p(!1)}},A=x=>{c(k=>({...k,[x.target.name]:x.target.value}))};return v.jsx("div",{className:`${t?"":"fixed inset-0 bg-black/60 backdrop-blur-sm z-[70] overflow-hidden"} flex items-center justify-center p-4`,style:t?{}:{position:"fixed",top:0,left:0,right:0,bottom:0},children:v.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md animate-fade-in",children:v.jsxs("div",{className:"p-6",children:[v.jsxs("div",{className:"flex justify-between items-center mb-6",children:[v.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:s?"🔐 تسجيل الدخول":"📝 إنشاء حساب جديد"}),!t&&v.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 transition-colors",children:"✕"})]}),v.jsxs("form",{onSubmit:E,className:"space-y-4",children:[!s&&v.jsxs("div",{children:[v.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-slate-700 mb-1",children:"الاسم الكامل"}),v.jsx("input",{type:"text",id:"displayName",name:"displayName",value:l.displayName,onChange:A,className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل اسمك الكامل",required:!s})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-1",children:"البريد الإلكتروني"}),v.jsx("input",{type:"email",id:"email",name:"email",value:l.email,onChange:A,className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"example@email.com",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 mb-1",children:"كلمة المرور"}),v.jsx("input",{type:"password",id:"password",name:"password",value:l.password,onChange:A,className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"كلمة المرور",required:!0,minLength:6})]}),h&&v.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:v.jsx("p",{className:"text-red-600 text-sm",children:h})}),v.jsx("button",{type:"submit",disabled:d,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-semibold rounded-lg transition-colors",children:d?"⏳ جاري المعالجة...":s?"🔐 تسجيل الدخول":"📝 إنشاء حساب"})]}),v.jsx("div",{className:"mt-6 text-center",children:v.jsx("button",{onClick:()=>o(!s),className:"text-blue-600 hover:text-blue-700 font-medium",children:s?"ليس لديك حساب؟ إنشاء حساب جديد":"لديك حساب بالفعل؟ تسجيل الدخول"})})]})})})},lC=()=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),v.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),_g=()=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:[v.jsx("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),v.jsx("path",{fillRule:"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"})]}),YL=({className:n})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-6 w-6 ${n}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),JL=({className:n})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-6 w-6 ${n}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),KL=({className:n})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-6 w-6 ${n}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h7"})}),$L=({className:n})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-6 w-6 ${n}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h.01M12 12h.01M19 12h.01M5 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"})}),QL=({className:n})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-8 w-8 ${n}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),vg=({className:n})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),Fm=({className:n})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Hm=({className:n})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),XL=({className:n})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})}),WL=({selectedYear:n,selectedMonth:e,onYearChange:t,onMonthChange:s,onAddTransaction:o,currentUser:l,onSignOut:c})=>{const d=he.useMemo(()=>{const h=new Date().getFullYear(),T=[];for(let E=h+1;E>=2020;E--)T.push(E);return T},[]),p=he.useMemo(()=>[{value:"all",label:"كل الشهور"},{value:1,label:"يناير"},{value:2,label:"فبراير"},{value:3,label:"مارس"},{value:4,label:"أبريل"},{value:5,label:"مايو"},{value:6,label:"يونيو"},{value:7,label:"يوليو"},{value:8,label:"أغسطس"},{value:9,label:"سبتمبر"},{value:10,label:"أكتوبر"},{value:11,label:"نوفمبر"},{value:12,label:"ديسمبر"}],[]);return v.jsx("header",{className:"bg-slate-50/95 backdrop-blur-lg border-b border-slate-200 py-3 shadow-sm",children:v.jsx("div",{className:"container mx-auto px-4",children:v.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center text-center sm:text-right gap-4",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center text-xl",children:"💰"}),v.jsxs("div",{children:[v.jsx("h1",{className:"text-xl font-bold text-slate-900 tracking-wide",children:"لوحة التحكم المالية"}),v.jsx("p",{className:"text-xs text-slate-500",children:"Developed by K.A Team"})]})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("div",{className:"flex items-center gap-2 bg-slate-200 p-1.5 rounded-lg",children:[v.jsx("select",{value:n,onChange:h=>t(parseInt(h.target.value)),className:"bg-slate-200 text-slate-800 font-semibold border-0 focus:ring-0 appearance-none p-2 rounded-md",children:d.map(h=>v.jsx("option",{value:h,children:h},h))}),v.jsx("select",{value:e,onChange:h=>s(h.target.value==="all"?"all":parseInt(h.target.value)),className:"bg-slate-200 text-slate-800 font-semibold border-0 focus:ring-0 appearance-none p-2 rounded-md",children:p.map(h=>v.jsx("option",{value:h.value,children:h.label},h.value))})]}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsxs("div",{className:"text-right",children:[v.jsx("p",{className:"font-semibold text-slate-800 text-sm",children:l.displayName||"المستخدم"}),v.jsx("p",{className:"text-xs text-slate-500",children:l.email})]}),v.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:v.jsx("span",{className:"text-blue-600 font-bold text-sm",children:(l.displayName||l.email||"U").charAt(0).toUpperCase()})}),v.jsx("button",{onClick:c,className:"px-3 py-1 text-xs bg-red-100 hover:bg-red-200 text-red-700 rounded-lg transition-colors",children:"🚪 خروج"})]}),v.jsxs("button",{onClick:o,className:"hidden md:flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-2.5 rounded-lg transition-all duration-300",children:[v.jsx(QL,{className:"w-5 h-5"}),v.jsx("span",{children:"إضافة حركة"})]})]})]})})})},zm=[{id:"summary",label:"📊 الملخص",icon:YL},{id:"analysis",label:"📈 التحليل",icon:JL},{id:"transactions",label:"💳 الحركات",icon:KL},{id:"budget",label:"✨ الميزانية"},{id:"investment",label:"💹 الاستثمار"},{id:"ai-assistant",label:"🤖 المحلل الذكي"},{id:"cards",label:"💳 إدارة البطاقات"},{id:"bank",label:"🏦 البنك"},{id:"installments",label:"📱 الأقساط"},{id:"settings",label:"⚙️ الإعدادات"}],BE=["summary","analysis","transactions"],ZL=({activeTab:n,setActiveTab:e})=>{const[t,s]=he.useState(!1),o=d=>{e(d),s(!1)},l=zm.filter(d=>BE.includes(d.id)),c=zm.filter(d=>!BE.includes(d.id));return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"hidden md:flex flex-wrap justify-center mb-8 tab-bar rounded-xl p-2",children:zm.map(d=>v.jsx("button",{onClick:()=>o(d.id),className:`tab-btn px-4 py-2 mx-1 mb-1 rounded-lg font-semibold text-sm flex items-center gap-2 ${n===d.id?"active":""}`,children:d.label},d.id))}),v.jsxs("div",{className:"md:hidden fixed bottom-0 left-0 right-0 h-20 bg-white/80 backdrop-blur-lg border-t border-slate-200 z-40 flex justify-around items-center",children:[l.map(d=>{const p=d.icon;return v.jsxs("button",{onClick:()=>o(d.id),className:`flex flex-col items-center justify-center gap-1 transition-colors w-full h-full ${n===d.id?"text-blue-600":"text-slate-500 hover:text-slate-900"}`,children:[p&&v.jsx(p,{}),v.jsx("span",{className:"text-xs",children:d.label.split(" ")[1]})]},d.id)}),v.jsxs("button",{onClick:()=>s(!t),className:`flex flex-col items-center justify-center gap-1 transition-colors w-full h-full ${t?"text-blue-600":"text-slate-500 hover:text-slate-900"}`,children:[v.jsx($L,{}),v.jsx("span",{className:"text-xs",children:"المزيد"})]})]}),t&&v.jsx("div",{className:"md:hidden fixed inset-0 bg-gray-900/50 backdrop-blur-sm z-50 flex justify-center items-end",onClick:()=>s(!1),children:v.jsxs("div",{className:"bg-white w-full rounded-t-2xl p-4 border-t border-slate-200 animate-fade-in",onClick:d=>d.stopPropagation(),children:[v.jsx("div",{className:"w-16 h-1 bg-slate-300 rounded-full mx-auto mb-4"}),v.jsx("div",{className:"grid grid-cols-3 gap-4 text-center",children:c.map(d=>v.jsxs("button",{onClick:()=>o(d.id),className:`p-3 rounded-lg flex flex-col items-center gap-2 ${n===d.id?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:[v.jsx("span",{className:"text-2xl",children:d.label.split(" ")[0]}),v.jsx("span",{className:"text-xs font-semibold",children:d.label.split(" ")[1]})]},d.id))})]})})]})},e4=({className:n})=>v.jsx("div",{className:`absolute inset-0 -translate-x-full animate-[shimmer_2s_infinite] bg-gradient-to-r from-transparent via-slate-200/80 to-transparent ${n}`}),Gm=()=>v.jsxs("div",{className:"glass-card p-6 h-96 relative overflow-hidden",children:[v.jsx("div",{className:"h-6 w-1/2 bg-slate-200 rounded mb-6"}),v.jsxs("div",{className:"space-y-4",children:[v.jsx("div",{className:"h-4 w-full bg-slate-200 rounded"}),v.jsx("div",{className:"h-4 w-5/6 bg-slate-200 rounded"}),v.jsx("div",{className:"h-4 w-full bg-slate-200 rounded"}),v.jsx("div",{className:"h-4 w-3/4 bg-slate-200 rounded"})]}),v.jsx(e4,{})]}),t4=()=>v.jsxs("div",{className:"container mx-auto px-2 sm:px-4 max-w-7xl mt-8 mb-20",children:[v.jsx("div",{className:"h-16 mb-3"}),v.jsx("div",{className:"flex flex-wrap justify-center mb-8 bg-slate-100 rounded-xl p-2 h-14"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-fade-in",children:[v.jsx(Gm,{}),v.jsx(Gm,{}),v.jsx(Gm,{})]})]}),yn=n=>(n||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),n4=({title:n,details:e,barColor:t})=>v.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow",children:[v.jsxs("div",{className:"flex justify-between items-start mb-3",children:[v.jsx("h4",{className:"font-bold text-md text-slate-800",children:n}),v.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:v.jsx("span",{className:"text-blue-600 text-lg",children:"💳"})})]}),v.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-gray-200 mb-3",children:[v.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[v.jsx("span",{className:"text-slate-600",children:"المستحق:"}),v.jsxs("span",{className:"font-bold number-display text-slate-900",children:[yn(e.balance)," ريال"]})]}),v.jsxs("div",{className:"flex justify-between text-sm",children:[v.jsx("span",{className:"text-slate-600",children:"المتبقي:"}),v.jsxs("span",{className:"font-bold number-display text-emerald-700",children:[yn(e.available)," ريال"]})]})]}),v.jsx("div",{className:"bg-slate-200 rounded-full h-2 overflow-hidden",children:v.jsx("div",{className:`${t} rounded-full h-2 transition-all duration-300`,style:{width:`${Math.min(100,e.usagePercentage)}%`}})})]}),i4=({calculations:n,categories:e})=>{const t=Object.values(n.expensesByCategory).reduce((o,l)=>o+Number(l),0);if(t===0)return v.jsx("p",{className:"text-slate-500 text-center p-4 text-sm",children:"لا توجد مصاريف في هذه الفترة."});const s=Object.entries(n.expensesByCategory).sort(([,o],[,l])=>l-o);return v.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto pr-2",children:s.map(([o,l])=>{const c=e.find(p=>p.id===o);c&&`${c.icon}${c.name}`;const d=Number(l)/t*100;return v.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"text-lg",children:(c==null?void 0:c.icon)||"📊"}),v.jsx("span",{className:"font-medium text-slate-700 truncate",title:c==null?void 0:c.name,children:(c==null?void 0:c.name)||"غير مصنف"})]}),v.jsxs("span",{className:"font-bold text-slate-900 number-display bg-slate-50 px-2 py-1 rounded-lg border border-gray-200",children:[yn(l)," ريال"]})]}),v.jsx("div",{className:"mt-2 bg-slate-200 rounded-full h-2 overflow-hidden",children:v.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-2 rounded-full transition-all duration-500",style:{width:`${d.toFixed(1)}%`}})}),v.jsxs("div",{className:"text-xs text-slate-500 mt-1 text-center",children:[d.toFixed(1),"%"]})]},o)})})},s4=({calculations:n,categories:e})=>{const{totalIncome:t,totalExpenses:s,cardDetails:o,cardPayments:l,bankAccountDetails:c,totalDebt:d,totalAvailable:p,totalLimits:h,totalBankBalance:T}=n,E=t-s,A=["bg-blue-500","bg-red-500","bg-green-500","bg-purple-500","bg-yellow-500"];return v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 animate-fade-in",children:[v.jsxs("div",{className:"glass-card p-6 xl:col-span-1",children:[v.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"💳 ملخص ديون البطاقات"}),v.jsx("div",{className:"space-y-4",children:Object.values(o).map((x,k)=>v.jsx(n4,{title:x.name,details:x,barColor:A[k%A.length]},x.id))}),v.jsx("div",{className:"mt-4 p-3 bg-slate-100 rounded-lg",children:v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"bg-red-50 p-3 rounded-lg border border-red-200 text-center",children:[v.jsx("p",{className:"text-red-600 text-xs font-medium mb-2",children:"إجمالي الديون"}),v.jsx("p",{className:"text-sm font-bold text-red-600 number-display",children:yn(d)})]}),v.jsxs("div",{className:"bg-emerald-50 p-3 rounded-lg border border-emerald-200 text-center",children:[v.jsx("p",{className:"text-emerald-600 text-xs font-medium mb-2",children:"إجمالي المتاح"}),v.jsx("p",{className:"text-sm font-bold text-emerald-600 number-display",children:yn(p)})]}),v.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200 text-center",children:[v.jsx("p",{className:"text-blue-600 text-xs font-medium mb-2 whitespace-nowrap",children:"إجمالي الحدود"}),v.jsx("p",{className:"text-sm font-bold text-blue-600 number-display",children:yn(h)})]})]})})]}),v.jsxs("div",{className:"glass-card p-6 xl:col-span-1",children:[v.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"🏦 ملخص الحسابات البنكية"}),v.jsx("div",{className:"space-y-3",children:Object.values(c).map(x=>v.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow",children:[v.jsxs("div",{className:"flex justify-between items-start mb-3",children:[v.jsx("p",{className:"font-bold text-slate-800",children:x.name}),v.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:v.jsx("span",{className:"text-blue-600 text-lg",children:"🏛️"})})]}),v.jsx("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:v.jsx("p",{className:"font-bold text-2xl text-blue-900 number-display text-center",children:yn(x.balance)})}),v.jsxs("div",{className:"flex justify-between text-xs mt-3 px-1",children:[v.jsx("div",{className:"bg-emerald-50 px-2 py-1 rounded-lg border border-emerald-200",children:v.jsxs("span",{className:"text-emerald-700 font-semibold",children:["+",yn(x.deposits)]})}),v.jsx("div",{className:"bg-red-50 px-2 py-1 rounded-lg border border-red-200",children:v.jsxs("span",{className:"text-red-700 font-semibold",children:["-",yn(x.withdrawals)]})})]})]},x.id))}),v.jsx("div",{className:"mt-4 bg-white p-4 rounded-xl border border-blue-200 shadow-lg text-center",children:v.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[v.jsx("p",{className:"text-blue-700 text-sm font-medium mb-2",children:"🏦 إجمالي الأرصدة البنكية"}),v.jsxs("p",{className:"text-3xl font-bold text-blue-900 number-display",children:[yn(T)," ريال"]})]})})]}),v.jsxs("div",{className:"glass-card p-6 xl:col-span-1",children:[v.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"📈 تقرير مالي شامل"}),v.jsxs("div",{className:"space-y-2 text-sm",children:[v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{children:"إجمالي الدخل:"}),v.jsx("span",{className:"font-bold text-emerald-500 number-display",children:yn(t)})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{children:"إجمالي المصاريف:"}),v.jsx("span",{className:"font-bold text-red-500 number-display",children:yn(s)})]}),v.jsx("hr",{className:"my-2 border-slate-200"}),Object.values(o).map((x,k)=>v.jsxs("div",{className:"flex justify-between text-xs",children:[v.jsxs("span",{className:"text-slate-500",children:["مصاريف ",x.name,":"]}),v.jsx("span",{className:`font-semibold ${A[k%A.length].replace("bg-","text-")} number-display`,children:yn(x.balance+(l[x.id]||0))})]},x.id)),v.jsx("hr",{className:"my-2 border-slate-200 border-dashed"}),Object.entries(l).map(([x,k])=>{var q;return v.jsxs("div",{className:"flex justify-between text-xs",children:[v.jsxs("span",{className:"text-slate-500",children:["إجمالي سداد ",(q=o[x])==null?void 0:q.name,":"]}),v.jsx("span",{className:"font-semibold text-emerald-500 number-display",children:yn(k)})]},x)}),v.jsx("hr",{className:"my-2 border-slate-200"}),v.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[v.jsx("span",{children:"الصافي:"}),v.jsx("span",{className:`number-display ${E>=0?"text-emerald-500":"text-red-500"}`,children:yn(E)})]})]})]}),v.jsxs("div",{className:"glass-card p-6 xl:col-span-1",children:[v.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"📊 ملخص الفئات"}),v.jsx(i4,{calculations:n,categories:e})]})]})},md=n=>(n||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),r4=({transactions:n,allTransactions:e,categories:t,deleteTransaction:s,editTransaction:o,state:l})=>{const[c,d]=he.useState(""),[p,h]=he.useState(""),[T,E]=he.useState(""),[A,x]=he.useState(""),[k,q]=he.useState(""),F=z=>{const ae={cash:"💵 نقدي","tabby-bnpl":"📱 تابي (BNPL)","tamara-bnpl":"📱 تمارا (BNPL)"};return ae[z]?ae[z]:l.cards[z]?`💳 ${l.cards[z].name}`:l.bankAccounts[z]?`🏦 ${l.bankAccounts[z].name}`:z},Z=z=>{const ae={income:"💰 دخل",expense:"💸 مصاريف","bnpl-payment":"📱 سداد قسط","investment-deposit":"💹 إيداع استثماري","investment-withdrawal":"💹 سحب استثماري"};if(ae[z])return ae[z];if(z.endsWith("-payment")){const ce=z.replace("-payment","");if(l.cards[ce])return`💳 سداد ${l.cards[ce].name}`}return z},te=he.useMemo(()=>{let z=n;if(A&&k){const ae=new Date(A),ce=new Date(k);ce.setHours(23,59,59,999),z=e.filter(M=>{const N=new Date(M.date);return N>=ae&&N<=ce})}return z=z.filter(ae=>{const ce=c.toLowerCase(),M=t.find(V=>V.id===ae.categoryId),N=ae.description.toLowerCase().includes(ce)||(M==null?void 0:M.name.toLowerCase().includes(ce)),R=!p||ae.paymentMethod===p,D=!T||ae.categoryId===T;return N&&R&&D}),z.sort((ae,ce)=>{const M=parseInt(ae.id.replace("trans-","").split("-")[0]);return parseInt(ce.id.replace("trans-","").split("-")[0])-M})},[n,e,c,p,T,A,k,t]),$=he.useMemo(()=>te.reduce((z,ae)=>(ae.type==="income"||ae.type.toString().includes("payment")||ae.type==="investment-withdrawal"?z.positive+=ae.amount:z.negative+=ae.amount,z),{positive:0,negative:0}),[te]);return v.jsx("div",{className:"space-y-6 animate-fade-in",children:v.jsxs("div",{className:"glass-card p-6",children:[v.jsx("h3",{className:"text-lg sm:text-xl font-bold text-slate-900 mb-4",children:"📋 سجل المعاملات والتقارير"}),v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 items-end p-4 bg-slate-100 rounded-lg mb-6",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"dateFrom",className:"block text-sm font-medium text-slate-600 mb-1",children:"من تاريخ"}),v.jsx("input",{type:"date",id:"dateFrom",value:A,onChange:z=>x(z.target.value),className:"w-full p-2"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"dateTo",className:"block text-sm font-medium text-slate-600 mb-1",children:"إلى تاريخ"}),v.jsx("input",{type:"date",id:"dateTo",value:k,onChange:z=>q(z.target.value),className:"w-full p-2"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"filterMethod",className:"block text-sm font-medium text-slate-600 mb-1",children:"وسيلة الدفع"}),v.jsxs("select",{id:"filterMethod",value:p,onChange:z=>h(z.target.value),className:"p-2 w-full",children:[v.jsx("option",{value:"",children:"كل الوسائل"}),Object.values(l.bankAccounts).map(z=>v.jsxs("option",{value:z.id,children:["🏦 ",z.name]},z.id)),v.jsx("option",{value:"cash",children:"💵 نقدي"}),Object.values(l.cards).map(z=>v.jsxs("option",{value:z.id,children:["💳 ",z.name]},z.id)),v.jsx("option",{value:"tabby-bnpl",children:"📱 تابي"}),v.jsx("option",{value:"tamara-bnpl",children:"📱 تمارا"})]})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"filterCategory",className:"block text-sm font-medium text-slate-600 mb-1",children:"الفئة"}),v.jsxs("select",{id:"filterCategory",value:T,onChange:z=>E(z.target.value),className:"p-2 w-full",children:[v.jsx("option",{value:"",children:"كل الفئات"}),t.map(z=>v.jsx("option",{value:z.id,children:z.name},z.id))]})]}),v.jsxs("div",{className:"sm:col-span-2 lg:col-span-4",children:[v.jsx("label",{htmlFor:"searchTerm",className:"block text-sm font-medium text-slate-600 mb-1",children:"بحث بالوصف"}),v.jsx("input",{type:"text",id:"searchTerm",placeholder:"🔍...",value:c,onChange:z=>d(z.target.value),className:"p-2 w-full"})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center mb-6",children:[v.jsxs("div",{className:"bg-white p-4 rounded-xl border border-emerald-200 shadow-sm hover:shadow-md transition-shadow",children:[v.jsxs("div",{className:"flex justify-between items-start mb-3",children:[v.jsx("p",{className:"text-emerald-700 text-sm font-medium",children:"إجمالي الإيجابي"}),v.jsx("div",{className:"w-8 h-8 bg-emerald-100 rounded-full flex items-center justify-center",children:v.jsx("span",{className:"text-emerald-600 text-lg",children:"💰"})})]}),v.jsx("div",{className:"bg-emerald-50 p-3 rounded-lg border border-emerald-200",children:v.jsx("p",{className:"font-bold text-xl text-emerald-800 number-display",children:md($.positive)})})]}),v.jsxs("div",{className:"bg-white p-4 rounded-xl border border-red-200 shadow-sm hover:shadow-md transition-shadow",children:[v.jsxs("div",{className:"flex justify-between items-start mb-3",children:[v.jsx("p",{className:"text-red-700 text-sm font-medium",children:"إجمالي السلبي"}),v.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:v.jsx("span",{className:"text-red-600 text-lg",children:"💸"})})]}),v.jsx("div",{className:"bg-red-50 p-3 rounded-lg border border-red-200",children:v.jsx("p",{className:"font-bold text-xl text-red-800 number-display",children:md($.negative)})})]}),v.jsxs("div",{className:"bg-white p-4 rounded-xl border border-sky-200 shadow-sm hover:shadow-md transition-shadow",children:[v.jsxs("div",{className:"flex justify-between items-start mb-3",children:[v.jsx("p",{className:"text-sky-700 text-sm font-medium",children:"الصافي"}),v.jsx("div",{className:"w-8 h-8 bg-sky-100 rounded-full flex items-center justify-center",children:v.jsx("span",{className:"text-sky-600 text-lg",children:"📊"})})]}),v.jsx("div",{className:"bg-sky-50 p-3 rounded-lg border border-sky-200",children:v.jsx("p",{className:"font-bold text-xl text-sky-800 number-display",children:md($.positive-$.negative)})})]})]}),v.jsxs("div",{className:"overflow-x-auto",children:[v.jsxs("table",{className:"w-full text-sm",children:[v.jsx("thead",{className:"border-b border-gray-200",children:v.jsxs("tr",{children:[v.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:"التاريخ"}),v.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:"الوسيلة"}),v.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:"النوع"}),v.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:"المبلغ"}),v.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:"الفئة"}),v.jsx("th",{className:"text-right py-3 px-4 font-semibold hidden sm:table-cell",children:"الوصف"}),v.jsx("th",{className:"text-center py-3 px-4 font-semibold"})]})}),v.jsx("tbody",{children:te.map(z=>{const ae=t.find(M=>M.id===z.categoryId),ce=z.type==="income"||z.type.toString().includes("payment")||z.type==="investment-withdrawal";return v.jsxs("tr",{className:"border-b border-gray-200/50 hover:bg-gray-50",children:[v.jsx("td",{className:"p-3",children:z.date}),v.jsx("td",{className:"p-3",children:F(z.paymentMethod)}),v.jsx("td",{className:"p-3",children:Z(z.type)}),v.jsxs("td",{className:`p-3 font-semibold number-display ${ce?"text-emerald-500":"text-red-500"}`,children:[ce?"+":"-"," ",md(z.amount)]}),v.jsx("td",{className:"p-3",children:ae?`${ae.icon} ${ae.name}`:"غير محدد"}),v.jsx("td",{className:"p-3 text-slate-500 hidden sm:table-cell",children:z.description||"-"}),v.jsx("td",{className:"p-3 text-center",children:v.jsxs("div",{className:"flex gap-2 justify-center",children:[v.jsx("button",{onClick:()=>o(z.id),className:"text-slate-400 hover:text-blue-500 p-1 transition-colors",title:"تعديل الحركة",children:"✏️"}),v.jsx("button",{onClick:()=>s(z.id),className:"text-slate-400 hover:text-red-500 p-1 transition-colors",title:"حذف الحركة",children:v.jsx(_g,{})})]})})]},z.id)})})]}),te.length===0&&v.jsxs("div",{className:"text-center p-8 text-slate-500",children:[v.jsx("p",{children:"لا توجد معاملات تطابق الفلاتر المحددة."}),v.jsx("p",{className:"text-xs mt-1",children:"جرب توسيع النطاق الزمني أو تعديل الفلاتر الأخرى."})]})]})]})})},o4=()=>v.jsxs("div",{className:"ai-bubble chat-bubble typing-indicator flex items-center space-x-1 p-3 self-start",children:[v.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.3s]"}),v.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.15s]"}),v.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse"})]}),a4=({calculations:n,filteredTransactions:e})=>{const[t,s]=he.useState([{id:"1",text:'أهلاً بك! أنا مساعدك المالي الشامل. يمكنك أن تسألني أسئلة تفصيلية عن وضعك المالي، مثل "ما هو إجمالي ديوني؟" أو "هل إنفاقي هذا الشهر يتوافق مع أهدافي؟"',sender:"ai"}]),[o,l]=he.useState(""),[c,d]=he.useState(!1),p=he.useRef(null);he.useEffect(()=>{var T;(T=p.current)==null||T.scrollTo(0,p.current.scrollHeight)},[t,c]);const h=async T=>{T.preventDefault();const E=o.trim();if(!E||c)return;const A={id:Date.now().toString(),text:E,sender:"user"};s(x=>[...x,A]),l(""),d(!0);try{const k=await yS(E,{periodSummary:n,transactions:e}),q={id:(Date.now()+1).toString(),text:k,sender:"ai"};s(F=>[...F,q])}catch(x){const k={id:(Date.now()+1).toString(),text:x instanceof Error?x.message:"عذراً، حدث خطأ ما. يرجى المحاولة مرة أخرى.",sender:"ai"};s(q=>[...q,k])}finally{d(!1)}};return v.jsxs("div",{className:"glass-card overflow-hidden flex flex-col",style:{height:"70vh"},children:[v.jsxs("div",{className:"p-4 bg-gray-100 text-center flex-shrink-0",children:[v.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"🤖 المحلل المالي الذكي"}),v.jsx("p",{className:"text-sm text-slate-500",children:"اسأل أي شيء عن بياناتك المالية للشهر المحدد"})]}),v.jsxs("div",{ref:p,className:"p-4 flex-grow overflow-y-auto flex flex-col gap-4",children:[t.map(T=>v.jsx("div",{className:`chat-bubble ${T.sender==="user"?"user-bubble":"ai-bubble"}`,children:v.jsx("p",{dangerouslySetInnerHTML:{__html:T.text.replace(/\n/g,"<br />")}})},T.id)),c&&v.jsx(o4,{})]}),v.jsx("div",{className:"p-4 border-t border-gray-200 flex-shrink-0",children:v.jsxs("form",{onSubmit:h,className:"flex gap-2",children:[v.jsx("input",{type:"text",value:o,onChange:T=>l(T.target.value),className:"w-full p-3",placeholder:"اكتب سؤالك هنا...",required:!0,autoComplete:"off",disabled:c}),v.jsx("button",{type:"submit",disabled:c,className:"p-3 magical-button text-white rounded-lg flex-shrink-0 disabled:opacity-50",children:v.jsx(lC,{})})]})})]})},l4=({calculations:n,categories:e,allTransactions:t})=>{const s=he.useRef(null),o=he.useRef(null),l=he.useRef({}),c=he.useMemo(()=>Object.entries(n.expensesByCategory).map(([p,h])=>{const T=e.find(E=>E.id===p);return{name:T?`${T.icon} ${T.name}`:"غير محدد",value:h}}).sort((p,h)=>h.value-p.value),[n.expensesByCategory,e]),d=he.useMemo(()=>{const p={},h=new Date;for(let T=5;T>=0;T--){const A=new Date(h.getFullYear(),h.getMonth()-T,1).toLocaleString("en-US",{month:"short",year:"numeric"});p[A]={income:0,expenses:0}}return t.forEach(T=>{const A=new Date(T.date).toLocaleString("en-US",{month:"short",year:"numeric"});p[A]&&(T.type==="income"&&(p[A].income+=T.amount),(T.type==="expense"||T.type==="bnpl-payment")&&(p[A].expenses+=T.amount))}),{labels:Object.keys(p),incomeData:Object.values(p).map(T=>T.income),expensesData:Object.values(p).map(T=>T.expenses)}},[t]);return he.useEffect(()=>{var h,T;const p=window.Chart;if(p){if((h=l.current.pie)==null||h.destroy(),(T=l.current.bar)==null||T.destroy(),s.current&&c.length>0){const E=s.current.getContext("2d");E&&(l.current.pie=new p(E,{type:"doughnut",data:{labels:c.map(A=>A.name),datasets:[{data:c.map(A=>A.value),backgroundColor:["#3b82f6","#60a5fa","#93c5fd","#bfdbfe","#d1d5db","#9ca3af","#6b7280"],borderColor:"#ffffff",borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{color:"#475569",font:{family:"Cairo"}}}}}}))}if(o.current&&d.labels.length>0){const E=o.current.getContext("2d");E&&(l.current.bar=new p(E,{type:"bar",data:{labels:d.labels,datasets:[{label:"الدخل",data:d.incomeData,backgroundColor:"#10b981",borderRadius:4},{label:"المصاريف",data:d.expensesData,backgroundColor:"#ef4444",borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{ticks:{color:"#64748b"},grid:{color:"#e2e8f0"}},x:{ticks:{color:"#64748b"},grid:{display:!1}}},plugins:{legend:{labels:{color:"#475569",font:{family:"Cairo"}}}}}}))}return()=>{var E,A;(E=l.current.pie)==null||E.destroy(),(A=l.current.bar)==null||A.destroy()}}},[c,d]),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 animate-fade-in",children:[v.jsxs("div",{className:"glass-card p-6",children:[v.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-900",children:"📊 توزيع مصاريف الفترة"}),v.jsx("div",{className:"h-80",children:c.length>0?v.jsx("canvas",{ref:s}):v.jsx("p",{className:"text-center text-slate-500 mt-10",children:"لا توجد مصاريف لعرضها."})})]}),v.jsxs("div",{className:"glass-card p-6",children:[v.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-900",children:"📈 الدخل مقابل المصاريف (آخر 6 أشهر)"}),v.jsx("div",{className:"h-80",children:v.jsx("canvas",{ref:o})})]})]})},u4=({state:n,setLoading:e,setModal:t})=>{const[s,o]=he.useState(""),[l,c]=he.useState(""),d=async()=>{const p=parseFloat(s);if(isNaN(p)||p<=0){t({title:"خطأ",body:"<p>الرجاء إدخال مبلغ ميزانية صحيح.</p>",confirmText:"موافق",hideCancel:!0});return}e(!0,"جاري إنشاء خطة الميزانية..."),c("");try{const h=new Date;h.setDate(h.getDate()-60);const T=n.transactions.filter(A=>new Date(A.date)>=h&&A.type==="expense");if(T.length<5)throw new Error("لا توجد بيانات كافية عن إنفاقك لإنشاء خطة دقيقة. يرجى إضافة 5 معاملات على الأقل.");const E=await TS(p,n.categories,T);c(E)}catch(h){const T=h instanceof Error?h.message:"حدث خطأ غير متوقع.";t({title:"خطأ في إنشاء الميزانية",body:`<p>${T}</p>`,confirmText:"موافق",hideCancel:!0})}finally{e(!1)}};return v.jsxs("div",{className:"glass-card p-6 animate-fade-in",children:[v.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-900",children:"✨ الميزانية الشهرية الذكية"}),v.jsxs("div",{className:"flex flex-col sm:flex-row items-end gap-4 mb-6 p-4 bg-slate-100 rounded-lg",children:[v.jsxs("div",{className:"flex-grow",children:[v.jsx("label",{htmlFor:"monthly-budget-input",className:"block text-sm font-medium text-slate-600 mb-1",children:"أدخل إجمالي ميزانيتك الشهرية (ريال)"}),v.jsx("input",{type:"number",id:"monthly-budget-input",className:"w-full p-2",placeholder:"5000",value:s,onChange:p=>o(p.target.value)})]}),v.jsx("button",{onClick:d,className:"w-full sm:w-auto px-6 py-2 magical-button text-white rounded-lg font-semibold flex-shrink-0",children:"✨ إنشاء خطة الميزانية"})]}),v.jsx("div",{className:"prose max-w-none",children:l?v.jsx("div",{dangerouslySetInnerHTML:{__html:l.replace(/### (.*)/g,'<h4 class="text-lg font-bold text-slate-900 mt-3 mb-2">$1</h4>').replace(/\n/g,"<br />")}}):v.jsx("p",{className:"text-center text-slate-500",children:"أدخل ميزانيتك أعلاه للحصول على خطة مخصصة بناءً على إنفاقك."})})]})},c4=({state:n,setState:e,calculations:t,setModal:s})=>{const[o,l]=he.useState([{id:"1",text:'أهلاً بك! أنا مرشدك لفهم عالم الاستثمار. يمكنك سؤالي عن استراتيجيات، أو مفاهيم مثل "ما هو الاستثمار طويل الأجل؟". تذكر، أنا لا أقدم نصائح مباشرة لشراء أسهم معينة.',sender:"ai"}]),[c,d]=he.useState(""),[p,h]=he.useState(!1),T=he.useRef(null);he.useEffect(()=>{var k;(k=T.current)==null||k.scrollTo(0,T.current.scrollHeight)},[o,p]);const E=k=>{k.preventDefault();const q=k.target,F=parseFloat(q.elements.namedItem("investment-amount").value),Z=q.elements.namedItem("investment-type").value,te=q.elements.namedItem("payment-method").value;if(isNaN(F)||F<=0){s({title:"خطأ",body:"<p>الرجاء إدخال مبلغ صحيح.</p>"});return}const $={amount:F,date:new Date().toISOString().split("T")[0],description:Z==="deposit"?"إيداع في المحفظة الاستثمارية":"سحب من المحفظة الاستثمارية",paymentMethod:te,type:Z==="deposit"?"investment-deposit":"investment-withdrawal",categoryId:null};e(z=>({...z,transactions:[...z.transactions,{...$,id:`trans-${Date.now()}`}]})),q.reset()},A=async k=>{k.preventDefault();const q=c.trim();if(!(!q||p)){l(F=>[...F,{id:Date.now().toString(),text:q,sender:"user"}]),d(""),h(!0);try{const F=await vS(q);l(Z=>[...Z,{id:(Date.now()+1).toString(),text:F,sender:"ai"}])}catch(F){l(Z=>[...Z,{id:(Date.now()+1).toString(),text:F instanceof Error?F.message:"عذراً، حدث خطأ.",sender:"ai"}])}finally{h(!1)}}},x=()=>{const k=`<div><label class="block text-sm font-medium text-slate-600 mb-1">القيمة الحالية للمحفظة (ريال)</label><input type="number" id="edit-investment-value" class="w-full p-2" value="${n.investments.currentValue}"><p class="text-xs text-slate-500 mt-2">أدخل القيمة السوقية الحالية لجميع استثماراتك.</p></div>`;s({show:!0,title:"تحديث قيمة المحفظة",body:k,confirmText:"حفظ",onConfirm:()=>{const q=parseFloat(document.getElementById("edit-investment-value").value);if(isNaN(q)||q<0)return alert("الرجاء إدخال قيمة صحيحة."),!1;e(F=>({...F,investments:{...F.investments,currentValue:q}}))}})};return v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 animate-fade-in",children:[v.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[v.jsxs("div",{className:"glass-card p-6 text-center",children:[v.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"💰 القيمة الحالية للمحفظة"}),v.jsx("p",{className:"text-4xl font-bold text-emerald-500 number-display",children:FE(n.investments.currentValue)}),v.jsxs("p",{className:"text-sm text-slate-500 mt-2",children:["إجمالي المستثمر: ",v.jsx("span",{className:"font-semibold number-display text-slate-600",children:FE(t.totalInvestmentDeposits)})]}),v.jsx("button",{onClick:x,className:"mt-4 w-full px-4 py-2 bg-slate-200 text-slate-800 rounded-lg hover:bg-slate-300 transition-colors text-sm",children:"✏️ تحديث القيمة الحالية"})]}),v.jsxs("div",{className:"glass-card p-6",children:[v.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"💸 إضافة حركة استثمارية"}),v.jsxs("form",{onSubmit:E,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"investment-amount",className:"block text-sm font-medium text-slate-600",children:"المبلغ"}),v.jsx("input",{type:"number",id:"investment-amount",name:"investment-amount",className:"mt-1 w-full p-2",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"investment-type",className:"block text-sm font-medium text-slate-600",children:"نوع الحركة"}),v.jsxs("select",{id:"investment-type",name:"investment-type",className:"mt-1 w-full p-2",children:[v.jsx("option",{value:"deposit",children:"إيداع للمحفظة"}),v.jsx("option",{value:"withdrawal",children:"سحب من المحفظة"})]})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"payment-method",className:"block text-sm font-medium text-slate-600",children:"الحساب البنكي"}),v.jsx("select",{id:"payment-method",name:"payment-method",className:"mt-1 w-full p-2",children:Object.values(n.bankAccounts).map(k=>v.jsxs("option",{value:k.id,children:["🏦 ",k.name]},k.id))})]}),v.jsx("button",{type:"submit",className:"w-full magical-button text-white font-semibold py-2 rounded-lg",children:"تنفيذ الحركة"})]})]})]}),v.jsxs("div",{className:"lg:col-span-2 glass-card overflow-hidden flex flex-col",style:{height:"75vh"},children:[v.jsxs("div",{className:"p-4 bg-gray-100 text-center flex-shrink-0",children:[v.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"🤖 مستشارك الاستثماري الذكي"}),v.jsx("p",{className:"text-sm text-slate-500",children:"اسأل عن المفاهيم والاستراتيجيات لاتخاذ قرارات أفضل"})]}),v.jsxs("div",{ref:T,className:"p-4 flex-grow overflow-y-auto flex flex-col gap-4",children:[o.map(k=>v.jsx("div",{className:`chat-bubble ${k.sender==="user"?"user-bubble":"ai-bubble"}`,dangerouslySetInnerHTML:{__html:k.text.replace(/\n/g,"<br/>")}},k.id)),p&&v.jsxs("div",{className:"ai-bubble chat-bubble typing-indicator flex items-center space-x-1 p-3 self-start",children:[v.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.3s]"}),v.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.15s]"}),v.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse"})]})]}),v.jsx("div",{className:"p-4 border-t border-gray-200 flex-shrink-0",children:v.jsxs("form",{onSubmit:A,className:"flex gap-2",children:[v.jsx("input",{type:"text",value:c,onChange:k=>d(k.target.value),className:"w-full p-3",placeholder:"اسأل عن الاستثمار...",required:!0,autoComplete:"off",disabled:p}),v.jsx("button",{type:"submit",className:"p-3 magical-button text-white rounded-lg flex-shrink-0",disabled:p,children:v.jsx(lC,{})})]})})]})]})},FE=n=>(n||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),$l=n=>(n||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),d4=({card:n,statementDetails:e,openCardFormModal:t,deleteCard:s})=>{const o=l=>!l||l.length===0?'<tr><td colspan="3" class="text-center text-slate-500 py-3">لا توجد حركات</td></tr>':l.map(c=>`
            <tr class="hover:bg-slate-50">
                <td class="p-2">${c.postingDate||c.date}</td>
                <td class="p-2 truncate" title="${c.description}">${c.description}</td>
                <td class="p-2 number-display text-red-500">${$l(c.amount)}</td>
            </tr>
        `).join("");return v.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow flex flex-col",children:[v.jsxs("div",{className:"flex items-start justify-between mb-4",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:v.jsx("span",{className:"text-blue-600 text-xl",children:"💳"})}),v.jsx("h3",{className:"text-xl font-bold text-slate-900",children:n.name})]}),v.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[v.jsx("button",{onClick:()=>t(n.id),className:"text-sm bg-white/80 hover:bg-white w-8 h-8 rounded-full flex items-center justify-center transition-colors shadow-sm","aria-label":`تعديل بطاقة ${n.name}`,children:"✏️"}),v.jsx("button",{onClick:()=>s(n.id),className:"text-sm bg-red-100 hover:bg-red-200 w-8 h-8 rounded-full flex items-center justify-center transition-colors","aria-label":`حذف بطاقة ${n.name}`,children:v.jsx(_g,{})})]})]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"bg-amber-50 p-4 rounded-lg border border-amber-200 shadow-sm",children:[v.jsxs("div",{className:"flex justify-between items-center mb-2",children:[v.jsx("span",{className:"text-amber-700 text-sm font-medium",children:"المبلغ المستحق للكشف الحالي"}),v.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center",children:v.jsx("span",{className:"text-amber-600 text-lg",children:"📅"})})]}),v.jsx("div",{className:"bg-white p-3 rounded-lg border border-amber-200 mb-2",children:v.jsxs("p",{className:"font-bold text-2xl text-amber-800 number-display text-center",children:[$l(e.statementDueAmount)," ريال"]})}),v.jsxs("div",{className:"flex justify-between items-center text-xs",children:[v.jsx("span",{className:"text-amber-600 font-medium",children:"تاريخ الاستحقاق:"}),v.jsx("span",{className:"font-semibold text-amber-700 bg-amber-100 px-2 py-1 rounded",children:e.dueDate.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})})]})]}),v.jsx("div",{className:"bg-slate-50 p-4 rounded-lg border border-gray-200",children:v.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[v.jsxs("div",{className:"p-3 bg-red-50 rounded-lg border border-red-200 text-center",children:[v.jsx("p",{className:"text-red-700 text-sm font-medium mb-1",children:"الرصيد الإجمالي المستحق"}),v.jsxs("p",{className:"font-bold text-red-800 number-display",children:[$l(n.balance)," ريال"]})]}),v.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200 text-center",children:[v.jsx("p",{className:"text-blue-700 text-sm font-medium mb-1",children:"الحد الائتماني"}),v.jsxs("p",{className:"font-bold text-blue-800 number-display",children:[$l(n.limit)," ريال"]})]}),v.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200 text-center",children:[v.jsx("p",{className:"text-green-700 text-sm font-medium mb-1",children:"الرصيد المتاح"}),v.jsxs("p",{className:"font-bold text-green-800 number-display",children:[$l(n.available)," ريال"]})]}),v.jsxs("div",{className:"p-3 bg-orange-50 rounded-lg border border-orange-200 text-center",children:[v.jsx("p",{className:"text-orange-700 text-sm font-medium mb-1",children:"نسبة الاستخدام"}),v.jsxs("p",{className:`font-bold ${n.usagePercentage>80?"text-red-800":n.usagePercentage>60?"text-yellow-800":"text-green-800"}`,children:[n.usagePercentage.toFixed(1),"%"]})]})]})})]}),v.jsxs("div",{className:"mt-4 flex-grow flex flex-col",children:[v.jsxs("h4",{className:"font-semibold text-slate-600 mb-2 border-b border-slate-200 pb-1",children:["المعاملات القادمة (",e.upcomingTransactions.length,")"]}),v.jsx("div",{className:"flex-grow max-h-32 overflow-y-auto",children:v.jsx("table",{className:"w-full text-xs",dangerouslySetInnerHTML:{__html:`<tbody>${o(e.upcomingTransactions)}</tbody>`}})})]})]})},f4=({state:n,openCardFormModal:e,deleteCard:t})=>{const s=he.useMemo(()=>{const l={};return Object.values(n.cards).forEach(c=>{const d=new Date,p=d.getDate(),h=d.getMonth(),T=d.getFullYear();let E,A,x;p>c.statementDay?E=new Date(T,h,c.statementDay):E=new Date(T,h-1,c.statementDay),A=new Date(E.getFullYear(),E.getMonth()-1,c.statementDay+1);let k=E.getMonth()+1,q=E.getFullYear();k>11&&(k=0,q+=1),x=new Date(q,k,c.dueDay);const F=n.transactions.filter($=>{const z=new Date($.postingDate||$.date);return $.paymentMethod===c.id&&($.type==="expense"||$.type==="bnpl-payment")&&z>=A&&z<=E}),Z=n.transactions.filter($=>{const z=new Date($.postingDate||$.date);return $.paymentMethod===c.id&&($.type==="expense"||$.type==="bnpl-payment")&&z>E}),te=F.reduce(($,z)=>$+z.amount,0);l[c.id]={statementDueAmount:te,dueDate:x,totalOutstanding:0,upcomingTransactions:Z}}),l},[n.transactions,n.cards]),o=Object.values(n.cards);return v.jsxs("div",{className:"space-y-6 animate-fade-in",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"إدارة البطاقات"}),v.jsx("button",{onClick:()=>e(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:"+ إضافة بطاقة"})]}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:o.map(l=>{const c=n.transactions.filter(p=>p.paymentMethod===l.id&&(p.type==="expense"||p.type==="bnpl-payment")).reduce((p,h)=>p+h.amount,0)-n.transactions.filter(p=>p.type===`${l.id}-payment`).reduce((p,h)=>p+h.amount,0),d={...l,balance:c,available:l.limit-c,usagePercentage:l.limit>0?c/l.limit*100:0};return v.jsx(d4,{card:d,statementDetails:s[d.id],openCardFormModal:e,deleteCard:t},d.id)})})]})},Cd=n=>(n||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),h4=(n,e)=>{const t={income:"💰 دخل",expense:"💸 مصاريف","bnpl-payment":"📱 سداد قسط","investment-deposit":"💹 إيداع استثماري","investment-withdrawal":"💹 سحب استثماري"};if(t[n])return t[n];if(n.endsWith("-payment")){const s=n.replace("-payment","");if(e.cards[s])return`💳 سداد ${e.cards[s].name}`}return n},m4=({account:n,openBankAccountFormModal:e,deleteBankAccount:t})=>v.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow",children:[v.jsxs("div",{className:"flex justify-between items-start mb-4",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:v.jsx("span",{className:"text-blue-600 text-xl",children:"🏦"})}),v.jsx("h4",{className:"text-xl font-bold text-slate-900",children:n.name})]}),v.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[v.jsx("button",{onClick:()=>e(n.id),className:"text-sm bg-white/80 hover:bg-white w-8 h-8 rounded-full flex items-center justify-center transition-colors shadow-sm","aria-label":`تعديل حساب ${n.name}`,children:"✏️"}),v.jsx("button",{onClick:()=>t(n.id),className:"text-sm bg-red-100 hover:bg-red-200 w-8 h-8 rounded-full flex items-center justify-center transition-colors","aria-label":`حذف حساب ${n.name}`,children:v.jsx(_g,{})})]})]}),v.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4",children:[v.jsx("p",{className:"text-blue-700 font-semibold text-center mb-2",children:"الرصيد الحالي"}),v.jsx("p",{className:"text-3xl font-bold text-blue-900 number-display text-center",children:Cd(n.balance)})]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"bg-emerald-50 p-3 rounded-lg border border-emerald-200 text-center",children:[v.jsx("p",{className:"text-emerald-700 font-semibold text-sm mb-1",children:"إيداعات الفترة"}),v.jsx("p",{className:"text-lg font-bold text-emerald-800 number-display",children:Cd(n.deposits)})]}),v.jsxs("div",{className:"bg-red-50 p-3 rounded-lg border border-red-200 text-center",children:[v.jsx("p",{className:"text-red-700 font-semibold text-sm mb-1",children:"سحوبات الفترة"}),v.jsx("p",{className:"text-lg font-bold text-red-800 number-display",children:Cd(n.withdrawals)})]})]})]}),p4=({state:n,setState:e,calculations:t,filteredTransactions:s,categories:o,setModal:l,openBankAccountFormModal:c,deleteBankAccount:d})=>{const[p,h]=he.useState({isOpen:!1}),[T,E]=he.useState({fromAccount:"",toAccount:"",amount:0,description:""}),A=()=>{var q,F;if(!T.fromAccount||!T.toAccount||T.amount<=0){l({title:"خطأ",body:"<p>يرجى ملء جميع البيانات بشكل صحيح.</p>",hideCancel:!0,confirmText:"موافق"});return}if(T.fromAccount===T.toAccount){l({title:"خطأ",body:"<p>لا يمكن التحويل لنفس الحساب.</p>",hideCancel:!0,confirmText:"موافق"});return}const x={id:`trans-${Date.now()}-withdrawal`,amount:T.amount,date:new Date().toISOString().split("T")[0],description:`تحويل إلى ${((q=n.bankAccounts[T.toAccount])==null?void 0:q.name)||"حساب آخر"}: ${T.description}`,paymentMethod:T.fromAccount,type:"expense",categoryId:null},k={id:`trans-${Date.now()}-deposit`,amount:T.amount,date:new Date().toISOString().split("T")[0],description:`تحويل من ${((F=n.bankAccounts[T.fromAccount])==null?void 0:F.name)||"حساب آخر"}: ${T.description}`,paymentMethod:T.toAccount,type:"income",categoryId:null};e(Z=>({...Z,transactions:[...Z.transactions,x,k]})),h({isOpen:!1}),E({fromAccount:"",toAccount:"",amount:0,description:""}),l({title:"نجح",body:"<p>تم التحويل بنجاح.</p>",hideCancel:!0,confirmText:"موافق"})};return v.jsxs("div",{className:"space-y-6 animate-fade-in",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"إدارة الحسابات البنكية"}),v.jsxs("div",{className:"flex gap-3",children:[Object.keys(n.bankAccounts).length>1&&v.jsx("button",{onClick:()=>h({isOpen:!0}),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-semibold",children:"💸 تحويل بين الحسابات"}),v.jsx("button",{onClick:()=>c(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:"+ إضافة حساب"})]})]}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.values(t.bankAccountDetails).map(x=>v.jsx(m4,{account:x,openBankAccountFormModal:c,deleteBankAccount:d},x.id))}),v.jsxs("div",{className:"glass-card p-6",children:[v.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-900",children:"📋 معاملات الحسابات البنكية (الفترة المحددة)"}),v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"w-full text-sm",children:[v.jsx("thead",{className:"border-b border-gray-200",children:v.jsxs("tr",{children:[v.jsx("th",{className:"text-right p-3 font-semibold",children:"التاريخ"}),v.jsx("th",{className:"text-right p-3 font-semibold",children:"الحساب"}),v.jsx("th",{className:"text-right p-3 font-semibold",children:"النوع"}),v.jsx("th",{className:"text-right p-3 font-semibold",children:"المبلغ"}),v.jsx("th",{className:"text-right p-3 font-semibold",children:"الفئة"}),v.jsx("th",{className:"text-right p-3 font-semibold",children:"الوصف"})]})}),v.jsx("tbody",{children:s.filter(x=>n.bankAccounts[x.paymentMethod]).sort((x,k)=>new Date(k.date).getTime()-new Date(x.date).getTime()).map(x=>{var Z;const k=["income","investment-withdrawal"].includes(x.type),q=k?"text-emerald-500":"text-red-500",F=o.find(te=>te.id===x.categoryId);return v.jsxs("tr",{className:"border-b border-gray-200/50",children:[v.jsx("td",{className:"p-3",children:x.date}),v.jsx("td",{className:"p-3",children:(Z=n.bankAccounts[x.paymentMethod])==null?void 0:Z.name}),v.jsx("td",{className:"p-3",children:h4(x.type,n)}),v.jsxs("td",{className:`p-3 font-semibold ${q} number-display`,children:[k?"+":"-",Cd(x.amount)]}),v.jsx("td",{className:"p-3",children:F?`${F.icon} ${F.name}`:"-"}),v.jsx("td",{className:"p-3 text-slate-500",children:x.description||"-"})]},x.id)})})]})})]}),p.isOpen&&v.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 overflow-hidden",style:{position:"fixed",top:0,left:0,right:0,bottom:0},children:v.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md animate-fade-in",onClick:x=>x.stopPropagation(),children:[v.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"💸 تحويل بين الحسابات"}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"من الحساب"}),v.jsxs("select",{value:T.fromAccount,onChange:x=>E(k=>({...k,fromAccount:x.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[v.jsx("option",{value:"",children:"اختر الحساب المصدر"}),Object.entries(n.bankAccounts).map(([x,k])=>v.jsx("option",{value:x,children:k.name},x))]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"إلى الحساب"}),v.jsxs("select",{value:T.toAccount,onChange:x=>E(k=>({...k,toAccount:x.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[v.jsx("option",{value:"",children:"اختر الحساب الهدف"}),Object.entries(n.bankAccounts).filter(([x])=>x!==T.fromAccount).map(([x,k])=>v.jsx("option",{value:x,children:k.name},x))]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"المبلغ"}),v.jsx("input",{type:"number",step:"0.01",value:T.amount,onChange:x=>E(k=>({...k,amount:parseFloat(x.target.value)||0})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"الوصف (اختياري)"}),v.jsx("input",{type:"text",value:T.description,onChange:x=>E(k=>({...k,description:x.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"مثل: تحويل للطوارئ"})]})]}),v.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[v.jsx("button",{onClick:()=>h({isOpen:!1}),className:"px-4 py-2 bg-slate-200 rounded-lg hover:bg-slate-300 transition-colors",children:"إلغاء"}),v.jsx("button",{onClick:A,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"💸 تحويل"})]})]})})]})},jm=n=>(n||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),HE=(n,e)=>{const t={cash:"💵 نقدي","tabby-bnpl":"📱 تابي","tamara-bnpl":"📱 تمارا",reconciliation:"🔄 تسوية"};return t[n]?t[n]:e.cards[n]?`💳 ${e.cards[n].name}`:e.bankAccounts[n]?`🏦 ${e.bankAccounts[n].name}`:n},g4=({state:n,setState:e,filteredTransactions:t,setModal:s})=>{const o=d=>{const p=n.installments.find(E=>E.id===d);if(!p||p.paid>=p.total)return;let h="";Object.values(n.bankAccounts).forEach(E=>{h+=`<option value="${E.id}">🏦 ${E.name}</option>`}),h+='<option value="cash">💵 نقدي</option>',Object.values(n.cards).forEach(E=>{h+=`<option value="${E.id}">💳 ${E.name}</option>`});const T=`<p class="mb-4">اختر مصدر الدفع لسداد قسط "${p.description}" بقيمة ${jm(p.installmentAmount)} ريال.</p><div><label for="installment-payment-source" class="block text-sm font-medium text-slate-600 mb-2">مصدر الدفع</label><select id="installment-payment-source" class="w-full p-3">${h}</select></div>`;s({show:!0,title:"سداد قسط",body:T,confirmText:"تأكيد الدفع",onConfirm:()=>{var q;const E=document.getElementById("installment-payment-source").value,A=n.categories.find(F=>F.name==="سداد فواتير"||F.name==="💳 سداد فواتير"),x=(A==null?void 0:A.id)||((q=n.categories.find(F=>F.name==="أخرى"))==null?void 0:q.id)||"",k={id:"trans-"+Date.now(),amount:p.installmentAmount,date:new Date().toISOString().split("T")[0],description:`سداد القسط ${p.paid+1} لـ: ${p.description}`,paymentMethod:E,type:"bnpl-payment",categoryId:x,isInstallmentPayment:!0,installmentId:d};e(F=>{const Z=F.installments.map(te=>te.id===d?{...te,paid:te.paid+1}:te);return{...F,transactions:[...F.transactions,k],installments:Z}})}})},l=n.installments.filter(d=>d.paid<d.total),c=n.transactions.filter(d=>d.isInstallmentPayment);return v.jsxs("div",{className:"animate-fade-in",children:[v.jsx("h3",{className:"text-2xl font-bold mb-4 text-slate-900",children:"📱 خطط الأقساط النشطة"}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:l.length>0?l.map(d=>{const p=d.paid/d.total*100;return v.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow",children:[v.jsxs("div",{className:"flex justify-between items-start mb-3",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:v.jsx("span",{className:"text-blue-600 text-lg",children:"📱"})}),v.jsxs("div",{children:[v.jsx("h4",{className:"font-bold text-slate-900",children:d.description}),v.jsx("p",{className:"text-sm text-slate-500",children:HE(d.provider,n)})]})]}),v.jsx("div",{className:"bg-blue-50 px-3 py-1 rounded-lg border border-blue-200",children:v.jsxs("span",{className:"font-bold text-blue-800 number-display text-sm",children:[jm(d.installmentAmount),"/شهر"]})})]}),v.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-gray-200 mb-3",children:[v.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5 mb-2 overflow-hidden",children:v.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-2.5 rounded-full transition-all duration-500",style:{width:`${p}%`}})}),v.jsxs("div",{className:"flex justify-between text-xs text-slate-600",children:[v.jsxs("span",{className:"font-medium",children:[d.paid," / ",d.total," مدفوع"]}),v.jsxs("span",{className:"font-medium",children:["متبقي: ",d.total-d.paid]})]}),v.jsx("div",{className:"text-center mt-2",children:v.jsxs("span",{className:"text-xs text-slate-500",children:[p.toFixed(1),"% مكتمل"]})})]}),v.jsx("div",{className:"text-center mt-3",children:v.jsx("button",{onClick:()=>o(d.id),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-300 text-sm w-full shadow-md font-semibold",children:"💳 دفع القسط التالي"})})]},d.id)}):v.jsx("div",{className:"md:col-span-2 text-center p-6 glass-card",children:v.jsx("p",{className:"text-slate-500",children:"🎉 لا توجد أقساط نشطة حاليًا!"})})}),v.jsxs("div",{className:"glass-card p-6 mt-8",children:[v.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-900",children:"📋 سجل دفعات الأقساط"}),v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"w-full text-sm",children:[v.jsx("thead",{className:"border-b border-gray-200",children:v.jsxs("tr",{children:[v.jsx("th",{className:"text-right p-3 font-semibold",children:"التاريخ"}),v.jsx("th",{className:"text-right p-3 font-semibold",children:"الوصف"}),v.jsx("th",{className:"text-right p-3 font-semibold",children:"المصدر"}),v.jsx("th",{className:"text-right p-3 font-semibold",children:"المبلغ"})]})}),v.jsx("tbody",{children:c.sort((d,p)=>new Date(p.date).getTime()-new Date(d.date).getTime()).map(d=>v.jsxs("tr",{className:"border-b border-gray-200/50",children:[v.jsx("td",{className:"p-3",children:d.date}),v.jsx("td",{className:"p-3 text-slate-600",children:d.description}),v.jsx("td",{className:"p-3",children:HE(d.paymentMethod,n)}),v.jsx("td",{className:"p-3 text-red-500 font-semibold number-display",children:jm(d.amount)})]},d.id))})]})})]})]})},y4=({state:n,setState:e,setModal:t,setLoading:s,onRestore:o})=>{const[l,c]=he.useState(Sa()),[d,p]=he.useState({connected:!1}),[h,T]=he.useState(!0),[E,A]=he.useState({firebase:l.hasFirebase,gemini:l.hasGemini});he.useEffect(()=>{const K=Sa();c(K),A({firebase:K.hasFirebase,gemini:K.hasGemini}),K.hasFirebase?(async()=>{try{T(!0);const Ee=await Es.getData("test","connection");p({connected:!0})}catch(Ee){p({connected:!1,error:Ee instanceof Error?Ee.message:"خطأ في الاتصال"})}finally{T(!1)}})():(p({connected:!1,error:"مفاتيح Firebase غير متوفرة"}),T(!1))},[]);const x=({isValid:K})=>K?v.jsx(Fm,{className:"w-6 h-6 text-green-500"}):v.jsx(Hm,{className:"w-6 h-6 text-red-500"}),k=()=>v.jsx(XL,{className:"w-6 h-6 text-yellow-500"}),[q,F]=he.useState({name:"",icon:""}),[Z,te]=he.useState(null),[$,z]=he.useState({name:"",icon:""}),[ae,ce]=he.useState({name:"",icon:""}),M=()=>{if(!q.name.trim()||!q.icon.trim()){t({title:"خطأ",body:"<p>يرجى إدخال اسم وأيقونة للفئة.</p>",hideCancel:!0,confirmText:"موافق"});return}const ue={id:`cat-${Date.now()}`,name:q.name.trim(),icon:q.icon.trim()};e(Ee=>({...Ee,categories:[...Ee.categories,ue]})),F({name:"",icon:""}),t({title:"نجح",body:"<p>تم إضافة الفئة بنجاح.</p>",hideCancel:!0,confirmText:"موافق"})},N=async()=>{const K=q.name.trim();if(!K){t({title:"خطأ",body:"<p>الرجاء إدخال اسم الفئة أولاً.</p>",hideCancel:!0,confirmText:"موافق"});return}s(!0,"جاري البحث عن أيقونة...");try{const{suggestCategoryIcon:ue,initializeAi:Ee}=await ps(async()=>{const{suggestCategoryIcon:O,initializeAi:ne}=await Promise.resolve().then(()=>OM);return{suggestCategoryIcon:O,initializeAi:ne}},void 0);Ee();const Me=await ue(K);Me&&Me.trim()?(F(O=>({...O,icon:Me.trim()})),t({title:"تم اقتراح أيقونة",body:`<p>تم اقتراح الأيقونة "${Me.trim()}" للفئة "${K}".</p>`,hideCancel:!0,confirmText:"موافق"})):t({title:"خطأ",body:"<p>لم أتمكن من العثور على أيقونة مناسبة.</p>",hideCancel:!0,confirmText:"موافق"})}catch(ue){console.error("Icon suggestion error:",ue),t({title:"خطأ",body:`<p>حدث خطأ أثناء اقتراح الأيقونة. تأكد من إعداد مفتاح Gemini API بشكل صحيح.</p><p>تفاصيل الخطأ: ${ue.message}</p>`,hideCancel:!0,confirmText:"موافق"})}finally{s(!1)}},R=K=>{n.transactions.some(ue=>ue.categoryId===K)?t({title:"لا يمكن الحذف",body:"<p>لا يمكن حذف هذه الفئة لأنها مستخدمة في بعض الحركات. يرجى تغيير فئة الحركات أولاً.</p>",hideCancel:!0,confirmText:"موافق"}):(e(ue=>({...ue,categories:ue.categories.filter(Ee=>Ee.id!==K)})),t({title:"نجح",body:"<p>تم حذف الفئة بنجاح.</p>",hideCancel:!0,confirmText:"موافق"}))},D=()=>{if(!$.name.trim()||!$.icon.trim()){t({title:"خطأ",body:"<p>يرجى إدخال اسم وأيقونة لنوع الحركة.</p>",hideCancel:!0,confirmText:"موافق"});return}const ue={id:`custom-type-${Date.now()}`,name:$.name.trim(),icon:$.icon.trim(),isCustom:!0};e(Ee=>({...Ee,customTransactionTypes:[...Ee.customTransactionTypes||[],ue]})),z({name:"",icon:""}),t({title:"نجح",body:"<p>تم إضافة نوع الحركة بنجاح.</p>",hideCancel:!0,confirmText:"موافق"})},V=K=>{n.transactions.some(ue=>ue.type===K)?t({title:"لا يمكن الحذف",body:"<p>لا يمكن حذف نوع الحركة هذا لأنه مستخدم في بعض الحركات. يرجى تغيير نوع الحركات أولاً.</p>",hideCancel:!0,confirmText:"موافق"}):(e(ue=>({...ue,customTransactionTypes:(ue.customTransactionTypes||[]).filter(Ee=>Ee.id!==K)})),t({title:"نجح",body:"<p>تم حذف نوع الحركة بنجاح.</p>",hideCancel:!0,confirmText:"موافق"}))},L=()=>{if(!ae.name.trim()||!ae.icon.trim()){t({title:"خطأ",body:"<p>يرجى إدخال اسم وأيقونة لوسيلة الدفع.</p>",hideCancel:!0,confirmText:"موافق"});return}const ue={id:`custom-payment-${Date.now()}`,name:ae.name.trim(),icon:ae.icon.trim(),isCustom:!0};e(Ee=>({...Ee,customPaymentMethods:[...Ee.customPaymentMethods||[],ue]})),ce({name:"",icon:""}),t({title:"نجح",body:"<p>تم إضافة وسيلة الدفع بنجاح.</p>",hideCancel:!0,confirmText:"موافق"})},P=K=>{n.transactions.some(ue=>ue.paymentMethod===K)?t({title:"لا يمكن الحذف",body:"<p>لا يمكن حذف وسيلة الدفع هذه لأنها مستخدمة في بعض الحركات. يرجى تغيير وسيلة الدفع أولاً.</p>",hideCancel:!0,confirmText:"موافق"}):(e(ue=>({...ue,customPaymentMethods:(ue.customPaymentMethods||[]).filter(Ee=>Ee.id!==K)})),t({title:"نجح",body:"<p>تم حذف وسيلة الدفع بنجاح.</p>",hideCancel:!0,confirmText:"موافق"}))},qe=()=>{try{const K=JSON.stringify(n,null,2),ue=new Blob([K],{type:"application/json"}),Ee=URL.createObjectURL(ue),Me=document.createElement("a");Me.href=Ee,Me.download=`masrof_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Me),Me.click(),document.body.removeChild(Me),URL.revokeObjectURL(Ee),t({title:"نجح",body:"<p>تم إنشاء النسخة الاحتياطية المحلية بنجاح.</p>",hideCancel:!0,confirmText:"موافق"})}catch{t({title:"خطأ",body:"<p>فشل إنشاء النسخة الاحتياطية.</p>",hideCancel:!0,confirmText:"موافق"})}},it=async()=>{s(!0,"جاري حفظ النسخة الاحتياطية في السحابة...");try{const K=await Es.saveData("backups",`backup_${new Date().toISOString().split("T")[0]}`,{...n,backupDate:new Date().toISOString(),version:"1.0.0"});if(K.success)t({title:"نجح",body:"<p>تم حفظ النسخة الاحتياطية في السحابة بنجاح.</p>",hideCancel:!0,confirmText:"موافق"});else throw new Error(K.error)}catch{t({title:"خطأ",body:"<p>فشل في حفظ النسخة الاحتياطية في السحابة.</p>",hideCancel:!0,confirmText:"موافق"})}finally{s(!1)}},W=K=>{var Me;const ue=(Me=K.target.files)==null?void 0:Me[0];if(!ue)return;const Ee=new FileReader;Ee.onload=O=>{var ne;try{const de=JSON.parse((ne=O.target)==null?void 0:ne.result);if(de!=null&&de.transactions&&(de!=null&&de.categories))o?o(de):t({show:!0,title:"استعادة نسخة احتياطية",body:"<p>هل أنت متأكد؟ سيتم الكتابة فوق جميع بياناتك الحالية.</p>",confirmText:"نعم، استعادة",onConfirm:()=>{const me={transactions:de.transactions||[],categories:de.categories||[],installments:de.installments||[],investments:de.investments||{currentValue:0},cards:de.cards||{},bankAccounts:de.bankAccounts||{}};e(me),t({title:"تم الاستعادة بنجاح",body:"<p>تم استعادة بياناتك بنجاح.</p>",confirmText:"موافق",hideCancel:!0})}});else throw new Error("Invalid backup file format.")}catch{t({show:!0,title:"خطأ",body:"<p>فشل في استعادة النسخة الاحتياطية. الملف غير صالح.</p>",confirmText:"موافق",hideCancel:!0})}},Ee.readAsText(ue),K.target.value=""};return v.jsxs("div",{className:"space-y-6 animate-fade-in",children:[v.jsx("div",{className:"flex justify-between items-center",children:v.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"⚙️ إعدادات النظام"})}),v.jsxs("div",{className:"glass-card p-6",children:[v.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"🔑 حالة مفاتيح API"}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"text-2xl",children:"🔥"}),v.jsxs("div",{children:[v.jsx("h4",{className:"font-semibold text-slate-800",children:"Firebase Configuration"}),v.jsxs("p",{className:"text-sm text-slate-600",children:["Project ID: ",Ct.firebase.projectId]})]})]}),v.jsx("div",{className:"flex items-center gap-2",children:E.firebase?d.connected?v.jsxs(v.Fragment,{children:[v.jsx(Fm,{className:"w-6 h-6 text-green-500"}),v.jsx("span",{className:"text-sm text-green-600",children:"متصل"})]}):v.jsxs(v.Fragment,{children:[v.jsx(k,{}),v.jsx("span",{className:"text-sm text-yellow-600",children:"مفاتيح موجودة لكن غير متصل"})]}):v.jsxs(v.Fragment,{children:[v.jsx(Hm,{className:"w-6 h-6 text-red-500"}),v.jsx("span",{className:"text-sm text-red-600",children:"مفاتيح غير متوفرة"})]})})]}),v.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"text-2xl",children:"🤖"}),v.jsxs("div",{children:[v.jsx("h4",{className:"font-semibold text-slate-800",children:"Gemini AI API"}),v.jsxs("p",{className:"text-sm text-slate-600",children:["Model: ",Ct.gemini.model]})]})]}),v.jsx("div",{className:"flex items-center gap-2",children:E.gemini?v.jsxs(v.Fragment,{children:[v.jsx(Fm,{className:"w-6 h-6 text-green-500"}),v.jsx("span",{className:"text-sm text-green-600",children:"مُعد"})]}):v.jsxs(v.Fragment,{children:[v.jsx(Hm,{className:"w-6 h-6 text-red-500"}),v.jsx("span",{className:"text-sm text-red-600",children:"غير مُعد"})]})})]})]}),!l.isValid&&v.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[v.jsx("h5",{className:"font-semibold text-red-800 mb-2",children:"⚠️ تحذيرات:"}),v.jsx("ul",{className:"space-y-1",children:l.errors.map((K,ue)=>v.jsxs("li",{className:"text-sm text-red-600",children:["• ",K]},ue))})]})]}),v.jsxs("div",{className:"glass-card p-6",children:[v.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"📱 معلومات المشروع"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[v.jsx("p",{className:"text-sm text-slate-600",children:"اسم التطبيق"}),v.jsx("p",{className:"font-semibold text-slate-800",children:Ct.app.name})]}),v.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[v.jsx("p",{className:"text-sm text-slate-600",children:"الإصدار"}),v.jsx("p",{className:"font-semibold text-slate-800",children:Ct.app.version})]}),v.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[v.jsx("p",{className:"text-sm text-slate-600",children:"البيئة"}),v.jsx("p",{className:"font-semibold text-slate-800",children:Ct.app.environment})]}),v.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[v.jsx("p",{className:"text-sm text-slate-600",children:"حالة النظام"}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(x,{isValid:l.isValid&&d.connected}),v.jsx("span",{className:`text-sm font-semibold ${l.isValid&&d.connected?"text-green-600":"text-red-600"}`,children:l.isValid&&d.connected?"جاهز":"يحتاج إعداد"})]})]}),v.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[v.jsx("p",{className:"text-sm text-slate-600",children:"تطوير"}),v.jsx("p",{className:"font-semibold text-slate-800",children:"Khaleel Alsani"})]})]})]}),(!l.isValid||!d.connected)&&v.jsxs("div",{className:"glass-card p-6",children:[v.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"📝 تعليمات الإعداد"}),v.jsxs("div",{className:"space-y-4",children:[!E.gemini&&v.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[v.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"🤖 إعداد Gemini API:"}),v.jsxs("ol",{className:"text-sm text-yellow-700 space-y-1 list-decimal list-inside",children:[v.jsxs("li",{children:["اذهب إلى ",v.jsx("a",{href:"https://makersuite.google.com/app/apikey",target:"_blank",className:"underline",children:"Google AI Studio"})]}),v.jsx("li",{children:"أنشئ مفتاح API جديد"}),v.jsxs("li",{children:["أضف المفتاح كـ GitHub Secret باسم ",v.jsx("code",{className:"bg-yellow-100 px-1 rounded",children:"VITE_GEMINI_API_KEY"})]}),v.jsxs("li",{children:["أو ضعه في ملف ",v.jsx("code",{className:"bg-yellow-100 px-1 rounded",children:".env.local"})," للتطوير المحلي"]})]})]}),!E.firebase&&v.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[v.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"🔥 إعداد Firebase:"}),v.jsxs("p",{className:"text-sm text-blue-700",children:["تأكد من إضافة جميع مفاتيح Firebase كـ GitHub Secrets:",v.jsx("br",{}),"• VITE_FIREBASE_API_KEY",v.jsx("br",{}),"• VITE_FIREBASE_AUTH_DOMAIN",v.jsx("br",{}),"• VITE_FIREBASE_PROJECT_ID",v.jsx("br",{}),"• VITE_FIREBASE_STORAGE_BUCKET",v.jsx("br",{}),"• VITE_FIREBASE_MESSAGING_SENDER_ID",v.jsx("br",{}),"• VITE_FIREBASE_APP_ID"]})]})]})]}),v.jsxs("div",{className:"glass-card p-6",children:[v.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"📂 إدارة الفئات"}),v.jsxs("div",{className:"mb-6 p-4 bg-slate-50 rounded-lg",children:[v.jsx("h4",{className:"font-semibold text-slate-800 mb-3",children:"➕ إضافة فئة جديدة"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[v.jsx("input",{type:"text",placeholder:"اسم الفئة",value:q.name,onChange:K=>F(ue=>({...ue,name:K.target.value})),className:"px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{type:"text",placeholder:"الأيقونة (مثل: 🍔)",value:q.icon,onChange:K=>F(ue=>({...ue,icon:K.target.value})),className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),v.jsx("button",{type:"button",onClick:N,disabled:!q.name.trim(),className:"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"اقتراح أيقونة بالذكاء الاصطناعي",children:"🤖"})]})]}),v.jsx("button",{onClick:M,className:"mt-3 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"➕ إضافة الفئة"})]}),v.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:n.categories.map(K=>v.jsxs("div",{className:"p-3 bg-white border border-slate-200 rounded-lg flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"text-lg",children:K.icon}),v.jsx("span",{className:"text-sm font-medium text-slate-800",children:K.name})]}),v.jsx("button",{onClick:()=>R(K.id),className:"text-red-500 hover:text-red-700 text-sm",title:"حذف الفئة",children:"🗑️"})]},K.id))})]}),v.jsxs("div",{className:"glass-card p-6",children:[v.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"⚙️ إدارة أنواع الحركات ووسائل الدفع"}),v.jsxs("div",{className:"mb-6 p-4 bg-slate-50 rounded-lg",children:[v.jsx("h4",{className:"font-semibold text-slate-800 mb-3",children:"📝 أنواع الحركات المخصصة"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[v.jsx("input",{type:"text",placeholder:"اسم نوع الحركة (مثل: سحب نقدي)",value:$.name,onChange:K=>z(ue=>({...ue,name:K.target.value})),className:"px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{type:"text",placeholder:"الأيقونة (مثل: 💸)",value:$.icon,onChange:K=>z(ue=>({...ue,icon:K.target.value})),className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),v.jsx("button",{onClick:D,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"➕ إضافة"})]})]}),v.jsx("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-3 gap-2",children:(n.customTransactionTypes||[]).map(K=>v.jsxs("div",{className:"p-2 bg-white border border-slate-200 rounded-lg flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"text-sm",children:K.icon}),v.jsx("span",{className:"text-xs font-medium text-slate-800",children:K.name})]}),v.jsx("button",{onClick:()=>V(K.id),className:"text-red-500 hover:text-red-700 text-xs",title:"حذف نوع الحركة",children:"🗑️"})]},K.id))})]}),v.jsxs("div",{className:"mb-6 p-4 bg-slate-50 rounded-lg",children:[v.jsx("h4",{className:"font-semibold text-slate-800 mb-3",children:"💳 وسائل الدفع المخصصة"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[v.jsx("input",{type:"text",placeholder:"اسم وسيلة الدفع (مثل: PayPal)",value:ae.name,onChange:K=>ce(ue=>({...ue,name:K.target.value})),className:"px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{type:"text",placeholder:"الأيقونة (مثل: 💳)",value:ae.icon,onChange:K=>ce(ue=>({...ue,icon:K.target.value})),className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),v.jsx("button",{onClick:L,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"➕ إضافة"})]})]}),v.jsx("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-3 gap-2",children:(n.customPaymentMethods||[]).map(K=>v.jsxs("div",{className:"p-2 bg-white border border-slate-200 rounded-lg flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"text-sm",children:K.icon}),v.jsx("span",{className:"text-xs font-medium text-slate-800",children:K.name})]}),v.jsx("button",{onClick:()=>P(K.id),className:"text-red-500 hover:text-red-700 text-xs",title:"حذف وسيلة الدفع",children:"🗑️"})]},K.id))})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[v.jsx("h4",{className:"font-semibold text-blue-800 mb-3",children:"📋 أنواع الحركات المدمجة"}),v.jsxs("div",{className:"space-y-2 text-sm",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{children:"💰 دخل"}),v.jsx("span",{className:"text-blue-600",children:"مدمج"})]}),v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{children:"💸 مصاريف"}),v.jsx("span",{className:"text-blue-600",children:"مدمج"})]}),v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{children:"📱 سداد قسط"}),v.jsx("span",{className:"text-blue-600",children:"مدمج"})]}),v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{children:"💹 إيداع استثماري"}),v.jsx("span",{className:"text-blue-600",children:"مدمج"})]}),v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{children:"💹 سحب استثماري"}),v.jsx("span",{className:"text-blue-600",children:"مدمج"})]})]})]}),v.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[v.jsx("h4",{className:"font-semibold text-green-800 mb-3",children:"💳 وسائل الدفع المدمجة"}),v.jsxs("div",{className:"space-y-2 text-sm",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{children:"💵 نقدي"}),v.jsx("span",{className:"text-green-600",children:"مدمج"})]}),v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{children:"📱 تابي"}),v.jsx("span",{className:"text-green-600",children:"مدمج"})]}),v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{children:"📱 تمارا"}),v.jsx("span",{className:"text-green-600",children:"مدمج"})]}),v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{children:"💳 سداد البطاقات"}),v.jsx("span",{className:"text-green-600",children:"مدمج"})]})]})]})]})]}),v.jsxs("div",{className:"glass-card p-6",children:[v.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"💾 النسخ الاحتياطي والاستعادة"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[v.jsxs("div",{children:[v.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"📤 نسخة احتياطية محلية"}),v.jsx("p",{className:"text-slate-600 mb-3 text-sm",children:"احفظ جميع بياناتك في ملف آمن."}),v.jsx("button",{onClick:qe,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"💾 تحميل ملف"})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"☁️ نسخة احتياطية سحابية"}),v.jsx("p",{className:"text-slate-600 mb-3 text-sm",children:"احفظ بياناتك في السحابة للوصول من أي مكان."}),v.jsx("button",{onClick:it,className:"w-full px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",children:"☁️ حفظ في السحابة"})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"📥 استعادة البيانات"}),v.jsx("p",{className:"text-slate-600 mb-3 text-sm",children:"استعد بياناتك من ملف نسخة احتياطية."}),v.jsx("input",{type:"file",id:"backup-file",accept:".json",className:"hidden",onChange:W}),v.jsx("button",{onClick:()=>{var K;return(K=document.getElementById("backup-file"))==null?void 0:K.click()},className:"w-full px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg transition-colors",children:"📥 استعادة البيانات"})]})]})]}),v.jsx("div",{className:"text-center",children:v.jsx("button",{onClick:()=>{c(Sa()),window.location.reload()},disabled:h,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:h?"جاري التحقق...":"🔄 إعادة التحقق"})})]})},_4=({onClose:n,onSave:e,initialData:t,categories:s,cards:o,bankAccounts:l})=>{var R;const[c,d]=he.useState({amount:0,date:new Date().toISOString().split("T")[0],description:"",paymentMethod:Object.keys(l)[0]||"cash",type:"expense",categoryId:((R=s.find(D=>D.name==="أخرى"))==null?void 0:R.id)||null}),[p,h]=he.useState(!1),[T,E]=he.useState(""),[A,x]=he.useState({isOpen:!1,text:""}),[k,q]=he.useState(!1),[F,Z]=he.useState(4),[te,$]=he.useState(Object.keys(l)[0]||"cash");he.useEffect(()=>{var D;t?d(t):(D=navigator.clipboard)!=null&&D.readText&&(async()=>{try{const V=await navigator.clipboard.readText();V&&V.trim().length>10&&sessionStorage.getItem("ignoredClipboardText")!==V&&x({isOpen:!0,text:V})}catch{console.info("Clipboard read access denied or not supported.")}})()},[t]);const z=D=>{const{name:V,value:L}=D.target;if(V==="paymentMethod"){const P=L.includes("bnpl");q(P),P&&d(qe=>({...qe,type:"expense"}))}d(P=>({...P,[V]:V==="amount"?parseFloat(L):L}))},ae=D=>{D.preventDefault(),k&&c.paymentMethod.includes("bnpl")?e({...c,bnplData:{installmentsCount:F,initialPaymentSource:te,installmentAmount:c.amount/F}},t==null?void 0:t.id):e(c,t==null?void 0:t.id)},ce=async D=>{if(D.trim()){h(!0),E("");try{const V=await _S(D,s,o,l),L=JSON.parse(V);L.error?E(L.error):d(P=>({...P,amount:L.amount||P.amount,date:L.date||P.date,description:L.merchant||P.description,paymentMethod:L.paymentMethod||P.paymentMethod,categoryId:L.categoryId||P.categoryId}))}catch(V){E(V instanceof Error?V.message:"فشل تحليل النص."),console.error(V)}finally{h(!1)}}},M=he.useMemo(()=>{const D=[{value:"cash",label:"💵 نقدي"}];return Object.values(l).forEach(V=>D.push({value:V.id,label:`🏦 ${V.name}`})),Object.values(o).forEach(V=>D.push({value:V.id,label:`💳 ${V.name}`})),D.push({value:"tabby-bnpl",label:"📱 تابي"}),D.push({value:"tamara-bnpl",label:"📱 تمارا"}),D},[l,o]),N=he.useMemo(()=>{const D=[{value:"expense",label:"💸 مصاريف"},{value:"income",label:"💰 دخل"},{value:"bnpl-payment",label:"📱 سداد قسط"},{value:"investment-deposit",label:"💹 إيداع استثماري"},{value:"investment-withdrawal",label:"💹 سحب استثماري"}];return Object.values(o).forEach(V=>D.push({value:`${V.id}-payment`,label:`💳 سداد ${V.name}`})),D},[o]);return v.jsxs(v.Fragment,{children:[A.isOpen&&v.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] flex items-center justify-center p-4 overflow-hidden",style:{position:"fixed",top:0,left:0,right:0,bottom:0},onClick:()=>x({isOpen:!1,text:""}),children:v.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md animate-fade-in",onClick:D=>D.stopPropagation(),children:v.jsxs("div",{className:"p-6",children:[v.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"اكتشاف نص في الحافظة"}),v.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"وجدنا نصاً في حافظة النصوص. هل تود لصقه وتحليله لتعبئة الحقول تلقائياً؟"}),v.jsx("pre",{className:"bg-slate-100 p-3 rounded-md text-xs text-slate-500 max-h-24 overflow-y-auto whitespace-pre-wrap font-sans",children:A.text}),v.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[v.jsx("button",{onClick:()=>{sessionStorage.setItem("ignoredClipboardText",A.text),x({isOpen:!1,text:""})},className:"px-4 py-2 bg-slate-200 rounded-lg",children:"تجاهل"}),v.jsx("button",{onClick:()=>{x({isOpen:!1,text:""}),ce(A.text)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"لصق وتحليل"})]})]})})}),v.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 overflow-hidden",style:{position:"fixed",top:0,left:0,right:0,bottom:0},onClick:n,children:v.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg animate-fade-in max-h-[90vh] overflow-y-auto",onClick:D=>D.stopPropagation(),children:v.jsxs("div",{className:"p-6",children:[v.jsxs("div",{className:"flex justify-between items-center mb-6",children:[v.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:t?"تعديل الحركة":"إضافة حركة جديدة"}),v.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600",children:v.jsx(vg,{})})]}),p&&v.jsxs("div",{className:"text-center p-4 mb-4 bg-blue-50 rounded-lg",children:[v.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mx-auto"}),v.jsx("p",{className:"text-blue-600 mt-2 text-sm",children:"جاري التحليل..."})]}),T&&v.jsx("p",{className:"text-red-500 text-sm mb-4 bg-red-50 p-3 rounded-lg",children:T}),v.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"amount",className:"form-label",children:"المبلغ"}),v.jsx("input",{type:"number",name:"amount",value:c.amount,onChange:z,className:"w-full",required:!0,step:"0.01"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"date",className:"form-label",children:"التاريخ"}),v.jsx("input",{type:"date",name:"date",value:c.date,onChange:z,className:"w-full",required:!0})]})]}),v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"description",className:"form-label",children:["الوصف ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsx("input",{type:"text",name:"description",value:c.description,onChange:z,className:"w-full",required:!0})]}),v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"type",className:"form-label",children:"نوع الحركة"}),v.jsx("select",{name:"type",value:c.type,onChange:z,className:"w-full",children:N.map(D=>v.jsx("option",{value:D.value,children:D.label},D.value))})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"paymentMethod",className:"form-label",children:"وسيلة الدفع"}),v.jsx("select",{name:"paymentMethod",value:c.paymentMethod,onChange:z,className:"w-full",children:M.map(D=>v.jsx("option",{value:D.value,children:D.label},D.value))})]})]}),v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"categoryId",className:"form-label",children:["الفئة ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsxs("select",{name:"categoryId",value:c.categoryId||"",onChange:z,className:"w-full",required:!0,children:[v.jsx("option",{value:"",children:"-- اختر فئة --"}),s.map(D=>v.jsxs("option",{value:D.id,children:[D.icon," ",D.name]},D.id))]})]}),k&&v.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg space-y-4",children:[v.jsx("h3",{className:"font-semibold text-blue-800",children:"📱 إعدادات التقسيط"}),v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"installmentsCount",className:"form-label",children:"عدد الأقساط"}),v.jsxs("select",{value:F,onChange:D=>Z(parseInt(D.target.value)),className:"w-full",children:[v.jsx("option",{value:2,children:"قسطين (2)"}),v.jsx("option",{value:3,children:"3 أقساط"}),v.jsx("option",{value:4,children:"4 أقساط"})]})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"initialPaymentSource",className:"form-label",children:"مصدر الدفعة الأولى"}),v.jsx("select",{value:te,onChange:D=>$(D.target.value),className:"w-full",children:M.filter(D=>!D.value.includes("bnpl")).map(D=>v.jsx("option",{value:D.value,children:D.label},D.value))})]})]}),v.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:v.jsxs("p",{className:"text-sm text-blue-700",children:[v.jsx("strong",{children:"الدفعة الأولى:"})," ",(c.amount/F).toFixed(2)," ريال",v.jsx("br",{}),v.jsx("strong",{children:"المبلغ المتبقي:"})," ",(c.amount*(F-1)/F).toFixed(2)," ريال"]})})]}),v.jsx("button",{type:"submit",className:"w-full py-3 magical-button text-white font-semibold rounded-lg mt-6",children:t?"حفظ التعديلات":"إضافة الحركة"})]})]})})})]})},v4=({onClose:n,onSave:e,initialData:t})=>{var d;const[s,o]=he.useState({name:"",limit:0,dueDay:15,statementDay:25,smsSamples:[]});he.useEffect(()=>{t&&o(t)},[t]);const l=p=>{const{name:h,value:T,type:E}=p.target;o(h==="smsSamples"?A=>({...A,smsSamples:T.split(",").map(x=>x.trim()).filter(Boolean)}):A=>({...A,[h]:E==="number"?parseFloat(T)||0:T}))},c=p=>{p.preventDefault(),e(s,t==null?void 0:t.id)};return v.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:n,children:v.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg animate-fade-in",onClick:p=>p.stopPropagation(),children:v.jsxs("div",{className:"p-6",children:[v.jsxs("div",{className:"flex justify-between items-center mb-6",children:[v.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:t?"تعديل البطاقة":"إضافة بطاقة جديدة"}),v.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600",children:v.jsx(vg,{})})]}),v.jsxs("form",{onSubmit:c,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-600 mb-1",children:"اسم البطاقة"}),v.jsx("input",{type:"text",name:"name",value:s.name,onChange:l,className:"w-full p-2",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"limit",className:"block text-sm font-medium text-slate-600 mb-1",children:"الحد الائتماني"}),v.jsx("input",{type:"number",name:"limit",value:s.limit,onChange:l,className:"w-full p-2",required:!0,step:"100"})]}),v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"statementDay",className:"block text-sm font-medium text-slate-600 mb-1",children:"يوم إصدار الكشف (شهرياً)"}),v.jsx("input",{type:"number",name:"statementDay",value:s.statementDay,onChange:l,className:"w-full p-2",required:!0,min:"1",max:"31"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"dueDay",className:"block text-sm font-medium text-slate-600 mb-1",children:"يوم الاستحقاق (شهرياً)"}),v.jsx("input",{type:"number",name:"dueDay",value:s.dueDay,onChange:l,className:"w-full p-2",required:!0,min:"1",max:"31"})]})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"smsSamples",className:"block text-sm font-medium text-slate-600 mb-1",children:"الكلمات المفتاحية للرسائل (افصل بفواصل)"}),v.jsx("input",{type:"text",name:"smsSamples",value:((d=s.smsSamples)==null?void 0:d.join(", "))||"",onChange:l,className:"w-full p-2",placeholder:"مثال: SNB, الأهلي, إئتمانية"}),v.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"كلمات فريدة من رسائل البنك للمساعدة في التعرف التلقائي عند لصق نص رسالة."})]}),v.jsx("button",{type:"submit",className:"w-full py-3 magical-button text-white font-semibold rounded-lg mt-6",children:t?"حفظ التعديلات":"إضافة البطاقة"})]})]})})})},T4=({onClose:n,onSave:e,initialData:t})=>{var d;const[s,o]=he.useState({name:"",balance:0,smsSamples:[]});he.useEffect(()=>{t&&o(t)},[t]);const l=p=>{const{name:h,value:T,type:E}=p.target;o(h==="smsSamples"?A=>({...A,smsSamples:T.split(",").map(x=>x.trim()).filter(Boolean)}):A=>({...A,[h]:E==="number"?parseFloat(T)||0:T}))},c=p=>{p.preventDefault(),e(s,t==null?void 0:t.id)};return v.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:n,children:v.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg animate-fade-in",onClick:p=>p.stopPropagation(),children:v.jsxs("div",{className:"p-6",children:[v.jsxs("div",{className:"flex justify-between items-center mb-6",children:[v.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:t?"تعديل الحساب":"إضافة حساب بنكي"}),v.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600",children:v.jsx(vg,{})})]}),v.jsxs("form",{onSubmit:c,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-600 mb-1",children:"اسم الحساب"}),v.jsx("input",{type:"text",name:"name",value:s.name,onChange:l,className:"w-full p-2",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"balance",className:"block text-sm font-medium text-slate-600 mb-1",children:"الرصيد الافتتاحي"}),v.jsx("input",{type:"number",name:"balance",value:s.balance,onChange:l,className:"w-full p-2",required:!0,step:"10"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"smsSamples",className:"block text-sm font-medium text-slate-600 mb-1",children:"الكلمات المفتاحية للرسائل (افصل بفواصل)"}),v.jsx("input",{type:"text",name:"smsSamples",value:((d=s.smsSamples)==null?void 0:d.join(", "))||"",onChange:l,className:"w-full p-2",placeholder:"مثال: Alrajhi, الراجحي, مدى"}),v.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"كلمات فريدة من رسائل البنك للمساعدة في التعرف التلقائي عند لصق نص رسالة."})]}),v.jsx("button",{type:"submit",className:"w-full py-3 magical-button text-white font-semibold rounded-lg mt-6",children:t?"حفظ التعديلات":"إضافة الحساب"})]})]})})})},E4=()=>{const[n,e]=he.useState(!1),[t,s]=he.useState(rd),[o,l]=he.useState(new Date().getFullYear()),[c,d]=he.useState(new Date().getMonth()+1),[p,h]=he.useState("summary"),[T,E]=he.useState({isLoading:!1,text:""}),[A,x]=he.useState(null),[k,q]=he.useState({isOpen:!1}),[F,Z]=he.useState({isOpen:!1}),[te,$]=he.useState({isOpen:!1}),[z,ae]=he.useState(null),[ce,M]=he.useState(!1),[N,R]=he.useState(!0);he.useEffect(()=>{(async()=>{gS();const Te=await Es.onAuthStateChanged(async ge=>{try{ge?(console.log("✅ تم تسجيل دخول المستخدم:",ge.email),ae(ge),await D(ge.uid)):(console.log("❌ لا يوجد مستخدم مسجل دخول"),ae(null),await V())}catch(be){console.error("خطأ في تحميل بيانات المستخدم:",be),await V()}finally{R(!1),e(!0)}});return()=>{typeof Te=="function"&&Te()}})()},[]);const D=async ie=>{try{const Te=await Es.getData("users",ie);if(Te.success&&Te.data){const ge=rd(),be={...ge,...Te.data,cards:{...ge.cards,...Te.data.cards||{}},bankAccounts:{...ge.bankAccounts,...Te.data.bankAccounts||{}},investments:{...ge.investments,...Te.data.investments||{}}};s(be),console.log("✅ تم تحميل بيانات المستخدم من Firebase")}}catch(Te){console.error("خطأ في تحميل بيانات المستخدم:",Te)}},V=async()=>{try{const ie=localStorage.getItem("financial_dashboard_state");if(ie){const Te=JSON.parse(ie),ge=rd(),be={...ge,...Te,cards:{...ge.cards,...Te.cards||{}},bankAccounts:{...ge.bankAccounts,...Te.bankAccounts||{}},investments:{...ge.investments,...Te.investments||{}}};s(be),console.log("✅ تم تحميل البيانات من localStorage")}}catch(ie){console.error("خطأ في تحميل البيانات المحلية:",ie)}};he.useEffect(()=>{if(n&&!N&&(localStorage.setItem("financial_dashboard_state",JSON.stringify(t)),z)){const Te=setTimeout(async()=>{try{const ge=await Es.saveData("users",z.uid,t);ge.success?console.log("✅ تم حفظ البيانات في Firebase"):console.warn("⚠️ فشل في حفظ البيانات في Firebase:",ge.error)}catch(ge){console.error("❌ خطأ في حفظ البيانات في Firebase:",ge)}},2e3);return()=>clearTimeout(Te)}},[t,n,z,N]);const L=(ie,Te="")=>E({isLoading:ie,text:Te}),P=he.useCallback(()=>t.transactions?t.transactions.filter(ie=>{const Te=new Date(ie.date),ge=Te.getFullYear()===o,be=c==="all"||Te.getMonth()+1===c;return ge&&be}):[],[t.transactions,o,c]),qe=he.useMemo(()=>P(),[P]),it=he.useMemo(()=>{const ie={},Te={},ge={},be={};t.cards&&typeof t.cards=="object"&&Object.values(t.cards).forEach(pe=>{pe&&pe.id&&(ge[pe.id]={...pe,balance:0,available:pe.limit,usagePercentage:0})}),t.bankAccounts&&typeof t.bankAccounts=="object"&&Object.values(t.bankAccounts).forEach(pe=>{pe&&pe.id&&(be[pe.id]={...pe,deposits:0,withdrawals:0})});let Ze=0,jt=0,ks=0,Ti=0;qe.forEach(pe=>{if(pe.type==="income")Ze+=pe.amount;else if(pe.type==="expense")jt+=pe.amount,pe.categoryId&&(ie[pe.categoryId]=(ie[pe.categoryId]||0)+pe.amount);else if(pe.type==="bnpl-payment")jt+=pe.amount,pe.categoryId&&(ie[pe.categoryId]=(ie[pe.categoryId]||0)+pe.amount);else if(pe.type==="investment-deposit")ks+=pe.amount,jt+=pe.amount;else if(pe.type==="investment-withdrawal")Ti+=pe.amount,Ze+=pe.amount;else if(pe.type.endsWith("-payment")){const wt=pe.type.replace("-payment","");Te[wt]?Te[wt]+=pe.amount:Te[wt]=pe.amount}}),Object.keys(t.cards).forEach(pe=>{const wt=t.cards[pe];let In=0;t.transactions.forEach(ht=>{ht.paymentMethod===pe&&ht.type==="expense"&&(In+=ht.amount),ht.type===`${pe}-payment`&&(In-=ht.amount)}),ge[pe].balance=In,ge[pe].available=wt.limit-In,ge[pe].usagePercentage=wt.limit>0?In/wt.limit*100:0}),Object.keys(t.bankAccounts).forEach(pe=>{const wt=t.bankAccounts[pe];let In=0,ht=0,wn=wt.balance;t.transactions.forEach(et=>{et.paymentMethod===pe&&(["income","investment-withdrawal"].includes(et.type)?wn+=et.amount:["expense","investment-deposit"].includes(et.type)&&(wn-=et.amount)),et.type.endsWith("-payment")&&et.paymentMethod===pe&&(wn-=et.amount),et.type==="expense"&&et.isInstallmentPayment&&et.paymentMethod===pe&&(wn-=et.amount)}),qe.forEach(et=>{et.paymentMethod===pe&&(["income","investment-withdrawal"].includes(et.type)?In+=et.amount:["expense","investment-deposit"].includes(et.type)&&(ht+=et.amount)),et.type.endsWith("-payment")&&et.paymentMethod===pe&&(ht+=et.amount),et.type==="expense"&&et.isInstallmentPayment&&et.paymentMethod===pe&&(ht+=et.amount)}),be[pe].balance=wn,be[pe].deposits=In,be[pe].withdrawals=ht});const Mr=Object.values(ge).reduce((pe,wt)=>pe+wt.balance,0),Dr=Object.values(ge).reduce((pe,wt)=>pe+wt.available,0),St=Object.values(ge).reduce((pe,wt)=>pe+wt.limit,0),It=Object.values(be).reduce((pe,wt)=>pe+wt.balance,0);return{totalIncome:Ze,totalExpenses:jt,cardDetails:ge,cardPayments:Te,bankAccountDetails:be,totalDebt:Mr,totalAvailable:Dr,totalLimits:St,totalBankBalance:It,totalInvestmentDeposits:ks,totalInvestmentWithdrawals:Ti,expensesByCategory:ie}},[qe,t.transactions,t.cards,t.bankAccounts]),W=(ie,Te)=>{s(ge=>{if(Te){const be=ge.transactions.map(Ze=>Ze.id===Te?{...Ze,...ie}:Ze);return{...ge,transactions:be}}else if(ie.bnplData&&ie.paymentMethod.includes("bnpl")){const be={id:`installment-${Date.now()}`,provider:ie.paymentMethod,description:ie.description,totalAmount:ie.amount,installmentAmount:ie.bnplData.installmentAmount,total:ie.bnplData.installmentsCount,paid:1,createdAt:ie.date},Ze={id:`trans-${Date.now()}-1`,amount:ie.bnplData.installmentAmount,date:ie.date,description:`الدفعة الأولى لـ: ${ie.description}`,paymentMethod:ie.bnplData.initialPaymentSource,type:"expense",categoryId:ie.categoryId,isInstallmentPayment:!0,installmentId:be.id};return{...ge,transactions:[...ge.transactions,Ze],installments:[...ge.installments,be]}}else{const be={id:`trans-${Date.now()}`,...ie};return{...ge,transactions:[...ge.transactions,be]}}}),q({isOpen:!1})},K=ie=>{x({title:"تأكيد الحذف",body:"<p>هل أنت متأكد من رغبتك في حذف هذه الحركة؟ لا يمكن التراجع عن هذا الإجراء.</p>",confirmText:"نعم, حذف",onConfirm:()=>{s(Te=>({...Te,transactions:Te.transactions.filter(ge=>ge.id!==ie)})),x(null)}})},ue=ie=>{const Te=t.transactions.find(ge=>ge.id===ie);Te&&q({isOpen:!0,initialData:Te})},Ee=async ie=>{ae(ie),M(!1),await D(ie.uid)},Me=async()=>{try{const ie=await Es.signOut();ie.success?(console.log("✅ تم تسجيل الخروج بنجاح"),ae(null),await V()):console.error("❌ خطأ في تسجيل الخروج:",ie.error)}catch(ie){console.error("❌ خطأ في تسجيل الخروج:",ie)}},O=(ie,Te)=>{s(ge=>{const be={...ge.cards};if(Te)be[Te]={...be[Te],...ie,id:Te};else{const Ze=`card-${Date.now()}`;be[Ze]={...ie,id:Ze}}return{...ge,cards:be}}),Z({isOpen:!1})},ne=ie=>{var Te;t.transactions.some(ge=>ge.paymentMethod===ie||ge.type===`${ie}-payment`)?x({title:"لا يمكن الحذف",body:"<p>لا يمكن حذف هذه البطاقة لأنها مستخدمة في بعض الحركات. يرجى تعديل الحركات أولاً.</p>",hideCancel:!0,confirmText:"موافق"}):x({title:"تأكيد الحذف",body:`<p>هل أنت متأكد من رغبتك في حذف بطاقة "${(Te=t.cards[ie])==null?void 0:Te.name}"؟</p>`,confirmText:"نعم, حذف",onConfirm:()=>{s(ge=>{const be={...ge.cards};return delete be[ie],{...ge,cards:be}}),x(null)}})},de=(ie,Te)=>{s(ge=>{const be={...ge.bankAccounts};if(Te)be[Te]={...be[Te],...ie,id:Te};else{const Ze=`bank-${Date.now()}`;be[Ze]={...ie,id:Ze}}return{...ge,bankAccounts:be}}),$({isOpen:!1})},me=ie=>{var Te;t.transactions.some(ge=>ge.paymentMethod===ie)?x({title:"لا يمكن الحذف",body:"<p>لا يمكن حذف هذا الحساب لأنه مستخدم في بعض الحركات. يرجى تعديل الحركات أولاً.</p>",hideCancel:!0,confirmText:"موافق"}):x({title:"تأكيد الحذف",body:`<p>هل أنت متأكد من رغبتك في حذف حساب "${(Te=t.bankAccounts[ie])==null?void 0:Te.name}"؟</p>`,confirmText:"نعم, حذف",onConfirm:()=>{s(ge=>{const be={...ge.bankAccounts};return delete be[ie],{...ge,bankAccounts:be}}),x(null)}})},Ne=ie=>{x({title:"استعادة نسخة احتياطية",body:"<p>هل أنت متأكد من استعادة هذه البيانات؟ سيتم استبدال جميع البيانات الحالية.</p>",confirmText:"استعادة",cancelText:"إلغاء",onConfirm:()=>{try{const Te=rd();if(ie.creditCards&&!ie.cards){const be={};Object.entries(ie.creditCards).forEach(([Ze,jt])=>{be[Ze]={id:Ze,name:Ze.toUpperCase(),limit:jt.creditLimit||0,balance:jt.currentBalance||0,dueDay:jt.dueDay||1,smsSamples:[],keywords:[]}}),ie.cards=be}if(ie.cards&&typeof ie.cards=="object"&&(ie.cards.snb||ie.cards.enbd)){const be={};ie.cards.snb&&(be["snb-card"]={id:"snb-card",name:"SNB الأهلي",limit:ie.cards.snb.limit||0,dueDay:ie.cards.snb.dueDay||1,statementDay:25,smsSamples:["SNB","الأهلي","إئتمانية"]}),ie.cards.enbd&&(be["enbd-card"]={id:"enbd-card",name:"ENBD الإمارات",limit:ie.cards.enbd.limit||0,dueDay:ie.cards.enbd.dueDay||1,statementDay:28,smsSamples:["ENBD","الإمارات","Visa card"]}),ie.cards=be}ie.bank&&!ie.bankAccounts&&(ie.bankAccounts={"bank-default":{id:"bank-default",name:"حساب البنك",balance:ie.bank.balance||0,smsSamples:["مدى","mada","Alrajhi","الراجحي","Inma","الإنماء","بنك"]}}),ie.transactions&&Array.isArray(ie.transactions)&&(ie.transactions=ie.transactions.map(be=>be.paymentMethod==="mada-bank"?{...be,paymentMethod:"bank-default"}:be));const ge={...Te,...ie};s(ge),z&&(async()=>{try{const Ze=await Es.saveData("users",z.uid,ge);Ze.success?console.log("✅ تم حفظ البيانات المستعادة في Firebase"):console.warn("⚠️ فشل في حفظ البيانات في Firebase:",Ze.error)}catch(Ze){console.error("❌ خطأ في حفظ البيانات في Firebase:",Ze)}})(),x({title:"تم الاستعادة بنجاح",body:"<p>تم استعادة بياناتك بنجاح وحفظها في السحابة.</p>",confirmText:"موافق",hideCancel:!0})}catch{x({title:"خطأ في الاستعادة",body:"<p>حدث خطأ أثناء استعادة البيانات. يرجى المحاولة مرة أخرى.</p>",confirmText:"موافق",hideCancel:!0})}}})},ke=ie=>Z({isOpen:!0,initialData:ie?t.cards[ie]:null}),He=ie=>$({isOpen:!0,initialData:ie?t.bankAccounts[ie]:null});if(!n||N)return v.jsx(t4,{});if(!z)return v.jsx("div",{className:"bg-slate-100 min-h-screen font-sans flex items-center justify-center",children:v.jsxs("div",{className:"w-full max-w-md px-4",children:[v.jsxs("div",{className:"text-center mb-8",children:[v.jsx("div",{className:"w-16 h-16 bg-blue-500/10 rounded-2xl flex items-center justify-center text-3xl mx-auto mb-4",children:"💰"}),v.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"لوحة التحكم المالية"}),v.jsx("p",{className:"text-slate-600 mt-2",children:"قم بتسجيل الدخول للوصول لنظام إدارة المصاريف"})]}),v.jsx(qE,{onSuccess:Ee,onClose:()=>{},hideCloseButton:!0})]})});`${o}${c==="all"?"كل الشهور":new Date(o,c-1).toLocaleString("ar-SA",{month:"long"})}`;const xt=()=>{switch(p){case"summary":return v.jsx(s4,{calculations:it,categories:t.categories});case"transactions":return v.jsx(r4,{transactions:qe,allTransactions:t.transactions,categories:t.categories,deleteTransaction:K,editTransaction:ue,state:t});case"ai-assistant":return v.jsx(a4,{calculations:it,filteredTransactions:qe});case"analysis":return v.jsx(l4,{calculations:it,categories:t.categories,allTransactions:t.transactions});case"budget":return v.jsx(u4,{state:t,setLoading:L,setModal:x});case"investment":return v.jsx(c4,{state:t,setState:s,calculations:it,setModal:x});case"cards":return v.jsx(f4,{state:t,openCardFormModal:ke,deleteCard:ne});case"bank":return v.jsx(p4,{state:t,setState:s,calculations:it,filteredTransactions:qe,categories:t.categories,setModal:x,openBankAccountFormModal:He,deleteBankAccount:me});case"installments":return v.jsx(g4,{state:t,setState:s,filteredTransactions:qe,setModal:x});case"settings":return v.jsx(y4,{state:t,setState:s,setModal:x,setLoading:L,onRestore:Ne});default:return v.jsx("div",{children:"Tab not found"})}};return v.jsxs("div",{className:"bg-slate-100 min-h-screen font-sans",children:[v.jsx(WL,{selectedYear:o,selectedMonth:c,onYearChange:l,onMonthChange:ie=>d(ie),onAddTransaction:()=>q({isOpen:!0}),currentUser:z,onSignOut:Me}),v.jsxs("main",{className:"container mx-auto px-2 sm:px-4 max-w-7xl mt-8 mb-20",children:[v.jsx(ZL,{activeTab:p,setActiveTab:h}),xt()]}),v.jsx("button",{onClick:()=>q({isOpen:!0}),className:"md:hidden fixed bottom-24 right-4 bg-blue-600 text-white w-14 h-14 rounded-full shadow-lg flex items-center justify-center z-40 text-2xl",children:"+"}),k.isOpen&&v.jsx(_4,{onClose:()=>q({isOpen:!1}),onSave:W,initialData:k.initialData,categories:t.categories,cards:t.cards,bankAccounts:t.bankAccounts}),F.isOpen&&v.jsx(v4,{onClose:()=>Z({isOpen:!1}),onSave:O,initialData:F.initialData}),te.isOpen&&v.jsx(T4,{onClose:()=>$({isOpen:!1}),onSave:de,initialData:te.initialData}),A&&v.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center overflow-hidden",style:{position:"fixed",top:0,left:0,right:0,bottom:0},onClick:()=>x(null),children:v.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-4 animate-fade-in max-h-[90vh] overflow-y-auto",onClick:ie=>ie.stopPropagation(),children:[v.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:A.title}),v.jsx("div",{className:"text-slate-600",dangerouslySetInnerHTML:{__html:A.body}}),v.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[!A.hideCancel&&v.jsx("button",{onClick:()=>x(null),className:"px-4 py-2 bg-slate-200 rounded-lg",children:"إلغاء"}),v.jsx("button",{onClick:()=>{(!A.onConfirm||A.onConfirm()!==!1)&&x(null)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:A.confirmText||"موافق"})]})]})}),T.isLoading&&v.jsxs("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex flex-col items-center justify-center overflow-hidden",style:{position:"fixed",top:0,left:0,right:0,bottom:0},children:[v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"}),v.jsx("p",{className:"text-white mt-4",children:T.text||"جاري التحميل..."})]}),ce&&z&&v.jsx(qE,{onSuccess:Ee,onClose:()=>M(!1)})]})},uC=document.getElementById("root");if(!uC)throw new Error("Could not find root element");const S4=Xx.createRoot(uC);S4.render(v.jsx(zx.StrictMode,{children:v.jsx(E4,{})}));
