(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function N0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var om={exports:{}},Ll={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rv;function hb(){if(Rv)return Ll;Rv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,l){var c=null;if(l!==void 0&&(c=""+l),o.key!==void 0&&(c=""+o.key),"key"in o){l={};for(var d in o)d!=="key"&&(l[d]=o[d])}else l=o;return o=l.ref,{$$typeof:n,type:s,key:c,ref:o!==void 0?o:null,props:l}}return Ll.Fragment=e,Ll.jsx=t,Ll.jsxs=t,Ll}var Nv;function mb(){return Nv||(Nv=1,om.exports=hb()),om.exports}var T=mb(),am={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mv;function pb(){if(Mv)return Ne;Mv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),A=Symbol.iterator;function x(D){return D===null||typeof D!="object"?null:(D=A&&D[A]||D["@@iterator"],typeof D=="function"?D:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,z={};function ee(D,K,oe){this.props=D,this.context=K,this.refs=z,this.updater=oe||L}ee.prototype.isReactComponent={},ee.prototype.setState=function(D,K){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,K,"setState")},ee.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function te(){}te.prototype=ee.prototype;function Q(D,K,oe){this.props=D,this.context=K,this.refs=z,this.updater=oe||L}var F=Q.prototype=new te;F.constructor=Q,B(F,ee.prototype),F.isPureReactComponent=!0;var ne=Array.isArray;function ae(){}var N={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function R(D,K,oe){var he=oe.ref;return{$$typeof:n,type:D,key:K,ref:he!==void 0?he:null,props:oe}}function V(D,K){return R(D.type,K,D.props)}function k(D){return typeof D=="object"&&D!==null&&D.$$typeof===n}function O(D){var K={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(oe){return K[oe]})}var P=/\/+/g;function Ye(D,K){return typeof D=="object"&&D!==null&&D.key!=null?O(""+D.key):K.toString(36)}function ke(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(ae,ae):(D.status="pending",D.then(function(K){D.status==="pending"&&(D.status="fulfilled",D.value=K)},function(K){D.status==="pending"&&(D.status="rejected",D.reason=K)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function W(D,K,oe,he,Se){var Re=typeof D;(Re==="undefined"||Re==="boolean")&&(D=null);var Oe=!1;if(D===null)Oe=!0;else switch(Re){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(D.$$typeof){case n:case e:Oe=!0;break;case v:return Oe=D._init,W(Oe(D._payload),K,oe,he,Se)}}if(Oe)return Se=Se(D),Oe=he===""?"."+Ye(D,0):he,ne(Se)?(oe="",Oe!=null&&(oe=Oe.replace(P,"$&/")+"/"),W(Se,K,oe,"",function(Hi){return Hi})):Se!=null&&(k(Se)&&(Se=V(Se,oe+(Se.key==null||D&&D.key===Se.key?"":(""+Se.key).replace(P,"$&/")+"/")+Oe)),K.push(Se)),1;Oe=0;var vt=he===""?".":he+":";if(ne(D))for(var at=0;at<D.length;at++)he=D[at],Re=vt+Ye(he,at),Oe+=W(he,K,oe,Re,Se);else if(at=x(D),typeof at=="function")for(D=at.call(D),at=0;!(he=D.next()).done;)he=he.value,Re=vt+Ye(he,at++),Oe+=W(he,K,oe,Re,Se);else if(Re==="object"){if(typeof D.then=="function")return W(ke(D),K,oe,he,Se);throw K=String(D),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function de(D,K,oe){if(D==null)return D;var he=[],Se=0;return W(D,he,"","",function(Re){return K.call(oe,Re,Se++)}),he}function Ee(D){if(D._status===-1){var K=D._result;K=K(),K.then(function(oe){(D._status===0||D._status===-1)&&(D._status=1,D._result=oe)},function(oe){(D._status===0||D._status===-1)&&(D._status=2,D._result=oe)}),D._status===-1&&(D._status=0,D._result=K)}if(D._status===1)return D._result.default;throw D._result}var ue=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},fe={map:de,forEach:function(D,K,oe){de(D,function(){K.apply(this,arguments)},oe)},count:function(D){var K=0;return de(D,function(){K++}),K},toArray:function(D){return de(D,function(K){return K})||[]},only:function(D){if(!k(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return Ne.Activity=E,Ne.Children=fe,Ne.Component=ee,Ne.Fragment=t,Ne.Profiler=o,Ne.PureComponent=Q,Ne.StrictMode=s,Ne.Suspense=p,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(D){return N.H.useMemoCache(D)}},Ne.cache=function(D){return function(){return D.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(D,K,oe){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var he=B({},D.props),Se=D.key;if(K!=null)for(Re in K.key!==void 0&&(Se=""+K.key),K)!M.call(K,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&K.ref===void 0||(he[Re]=K[Re]);var Re=arguments.length-2;if(Re===1)he.children=oe;else if(1<Re){for(var Oe=Array(Re),vt=0;vt<Re;vt++)Oe[vt]=arguments[vt+2];he.children=Oe}return R(D.type,Se,he)},Ne.createContext=function(D){return D={$$typeof:c,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:l,_context:D},D},Ne.createElement=function(D,K,oe){var he,Se={},Re=null;if(K!=null)for(he in K.key!==void 0&&(Re=""+K.key),K)M.call(K,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Se[he]=K[he]);var Oe=arguments.length-2;if(Oe===1)Se.children=oe;else if(1<Oe){for(var vt=Array(Oe),at=0;at<Oe;at++)vt[at]=arguments[at+2];Se.children=vt}if(D&&D.defaultProps)for(he in Oe=D.defaultProps,Oe)Se[he]===void 0&&(Se[he]=Oe[he]);return R(D,Re,Se)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(D){return{$$typeof:d,render:D}},Ne.isValidElement=k,Ne.lazy=function(D){return{$$typeof:v,_payload:{_status:-1,_result:D},_init:Ee}},Ne.memo=function(D,K){return{$$typeof:m,type:D,compare:K===void 0?null:K}},Ne.startTransition=function(D){var K=N.T,oe={};N.T=oe;try{var he=D(),Se=N.S;Se!==null&&Se(oe,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(ae,ue)}catch(Re){ue(Re)}finally{K!==null&&oe.types!==null&&(K.types=oe.types),N.T=K}},Ne.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Ne.use=function(D){return N.H.use(D)},Ne.useActionState=function(D,K,oe){return N.H.useActionState(D,K,oe)},Ne.useCallback=function(D,K){return N.H.useCallback(D,K)},Ne.useContext=function(D){return N.H.useContext(D)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(D,K){return N.H.useDeferredValue(D,K)},Ne.useEffect=function(D,K){return N.H.useEffect(D,K)},Ne.useEffectEvent=function(D){return N.H.useEffectEvent(D)},Ne.useId=function(){return N.H.useId()},Ne.useImperativeHandle=function(D,K,oe){return N.H.useImperativeHandle(D,K,oe)},Ne.useInsertionEffect=function(D,K){return N.H.useInsertionEffect(D,K)},Ne.useLayoutEffect=function(D,K){return N.H.useLayoutEffect(D,K)},Ne.useMemo=function(D,K){return N.H.useMemo(D,K)},Ne.useOptimistic=function(D,K){return N.H.useOptimistic(D,K)},Ne.useReducer=function(D,K,oe){return N.H.useReducer(D,K,oe)},Ne.useRef=function(D){return N.H.useRef(D)},Ne.useState=function(D){return N.H.useState(D)},Ne.useSyncExternalStore=function(D,K,oe){return N.H.useSyncExternalStore(D,K,oe)},Ne.useTransition=function(){return N.H.useTransition()},Ne.version="19.2.0",Ne}var Dv;function hp(){return Dv||(Dv=1,am.exports=pb()),am.exports}var ye=hp();const gb=N0(ye);var lm={exports:{}},Ol={},um={exports:{}},cm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pv;function yb(){return Pv||(Pv=1,(function(n){function e(W,de){var Ee=W.length;W.push(de);e:for(;0<Ee;){var ue=Ee-1>>>1,fe=W[ue];if(0<o(fe,de))W[ue]=de,W[Ee]=fe,Ee=ue;else break e}}function t(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var de=W[0],Ee=W.pop();if(Ee!==de){W[0]=Ee;e:for(var ue=0,fe=W.length,D=fe>>>1;ue<D;){var K=2*(ue+1)-1,oe=W[K],he=K+1,Se=W[he];if(0>o(oe,Ee))he<fe&&0>o(Se,oe)?(W[ue]=Se,W[he]=Ee,ue=he):(W[ue]=oe,W[K]=Ee,ue=K);else if(he<fe&&0>o(Se,Ee))W[ue]=Se,W[he]=Ee,ue=he;else break e}}return de}function o(W,de){var Ee=W.sortIndex-de.sortIndex;return Ee!==0?Ee:W.id-de.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],m=[],v=1,E=null,A=3,x=!1,L=!1,B=!1,z=!1,ee=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function F(W){for(var de=t(m);de!==null;){if(de.callback===null)s(m);else if(de.startTime<=W)s(m),de.sortIndex=de.expirationTime,e(p,de);else break;de=t(m)}}function ne(W){if(B=!1,F(W),!L)if(t(p)!==null)L=!0,ae||(ae=!0,O());else{var de=t(m);de!==null&&ke(ne,de.startTime-W)}}var ae=!1,N=-1,M=5,R=-1;function V(){return z?!0:!(n.unstable_now()-R<M)}function k(){if(z=!1,ae){var W=n.unstable_now();R=W;var de=!0;try{e:{L=!1,B&&(B=!1,te(N),N=-1),x=!0;var Ee=A;try{t:{for(F(W),E=t(p);E!==null&&!(E.expirationTime>W&&V());){var ue=E.callback;if(typeof ue=="function"){E.callback=null,A=E.priorityLevel;var fe=ue(E.expirationTime<=W);if(W=n.unstable_now(),typeof fe=="function"){E.callback=fe,F(W),de=!0;break t}E===t(p)&&s(p),F(W)}else s(p);E=t(p)}if(E!==null)de=!0;else{var D=t(m);D!==null&&ke(ne,D.startTime-W),de=!1}}break e}finally{E=null,A=Ee,x=!1}de=void 0}}finally{de?O():ae=!1}}}var O;if(typeof Q=="function")O=function(){Q(k)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,Ye=P.port2;P.port1.onmessage=k,O=function(){Ye.postMessage(null)}}else O=function(){ee(k,0)};function ke(W,de){N=ee(function(){W(n.unstable_now())},de)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return A},n.unstable_next=function(W){switch(A){case 1:case 2:case 3:var de=3;break;default:de=A}var Ee=A;A=de;try{return W()}finally{A=Ee}},n.unstable_requestPaint=function(){z=!0},n.unstable_runWithPriority=function(W,de){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Ee=A;A=W;try{return de()}finally{A=Ee}},n.unstable_scheduleCallback=function(W,de,Ee){var ue=n.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?ue+Ee:ue):Ee=ue,W){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=Ee+fe,W={id:v++,callback:de,priorityLevel:W,startTime:Ee,expirationTime:fe,sortIndex:-1},Ee>ue?(W.sortIndex=Ee,e(m,W),t(p)===null&&W===t(m)&&(B?(te(N),N=-1):B=!0,ke(ne,Ee-ue))):(W.sortIndex=fe,e(p,W),L||x||(L=!0,ae||(ae=!0,O()))),W},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(W){var de=A;return function(){var Ee=A;A=de;try{return W.apply(this,arguments)}finally{A=Ee}}}})(cm)),cm}var Vv;function _b(){return Vv||(Vv=1,um.exports=yb()),um.exports}var dm={exports:{}},rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kv;function vb(){if(kv)return rn;kv=1;var n=hp();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(p,m,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:p,containerInfo:m,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,rn.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(p,m,null,v)},rn.flushSync=function(p){var m=c.T,v=s.p;try{if(c.T=null,s.p=2,p)return p()}finally{c.T=m,s.p=v,s.d.f()}},rn.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(p,m))},rn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},rn.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,E=d(v,m.crossOrigin),A=typeof m.integrity=="string"?m.integrity:void 0,x=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:E,integrity:A,fetchPriority:x}):v==="script"&&s.d.X(p,{crossOrigin:E,integrity:A,fetchPriority:x,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},rn.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=d(m.as,m.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(p)},rn.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,E=d(v,m.crossOrigin);s.d.L(p,v,{crossOrigin:E,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},rn.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=d(m.as,m.crossOrigin);s.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(p)},rn.requestFormReset=function(p){s.d.r(p)},rn.unstable_batchedUpdates=function(p,m){return p(m)},rn.useFormState=function(p,m,v){return c.H.useFormState(p,m,v)},rn.useFormStatus=function(){return c.H.useHostTransitionStatus()},rn.version="19.2.0",rn}var Uv;function Tb(){if(Uv)return dm.exports;Uv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),dm.exports=vb(),dm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lv;function Eb(){if(Lv)return Ol;Lv=1;var n=_b(),e=hp(),t=Tb();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,a=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(a=r.return),i=r.return;while(i)}return r.tag===3?a:null}function c(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function p(i){if(l(i)!==i)throw Error(s(188))}function m(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var a=i,u=r;;){var y=a.return;if(y===null)break;var _=y.alternate;if(_===null){if(u=y.return,u!==null){a=u;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===a)return p(y),i;if(_===u)return p(y),r;_=_.sibling}throw Error(s(188))}if(a.return!==u.return)a=y,u=_;else{for(var C=!1,b=y.child;b;){if(b===a){C=!0,a=y,u=_;break}if(b===u){C=!0,u=y,a=_;break}b=b.sibling}if(!C){for(b=_.child;b;){if(b===a){C=!0,a=_,u=y;break}if(b===u){C=!0,u=_,a=y;break}b=b.sibling}if(!C)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:r}function v(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=v(i),r!==null)return r;i=i.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function O(i){return i===null||typeof i!="object"?null:(i=k&&i[k]||i["@@iterator"],typeof i=="function"?i:null)}var P=Symbol.for("react.client.reference");function Ye(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===P?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case B:return"Fragment";case ee:return"Profiler";case z:return"StrictMode";case ne:return"Suspense";case ae:return"SuspenseList";case R:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case L:return"Portal";case Q:return i.displayName||"Context";case te:return(i._context.displayName||"Context")+".Consumer";case F:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case N:return r=i.displayName||null,r!==null?r:Ye(i.type)||"Memo";case M:r=i._payload,i=i._init;try{return Ye(i(r))}catch{}}return null}var ke=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},ue=[],fe=-1;function D(i){return{current:i}}function K(i){0>fe||(i.current=ue[fe],ue[fe]=null,fe--)}function oe(i,r){fe++,ue[fe]=i.current,i.current=r}var he=D(null),Se=D(null),Re=D(null),Oe=D(null);function vt(i,r){switch(oe(Re,r),oe(Se,i),oe(he,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?W_(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=W_(r),i=Z_(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}K(he),oe(he,i)}function at(){K(he),K(Se),K(Re)}function Hi(i){i.memoizedState!==null&&oe(Oe,i);var r=he.current,a=Z_(r,i.type);r!==a&&(oe(Se,i),oe(he,a))}function ve(i){Se.current===i&&(K(he),K(Se)),Oe.current===i&&(K(Oe),Pl._currentValue=Ee)}var Tt,fi;function Qt(i){if(Tt===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Tt=r&&r[1]||"",fi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Tt+i+fi}var Ot=!1;function qt(i,r){if(!i||Ot)return"";Ot=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(X){var j=X}Reflect.construct(i,[],se)}else{try{se.call()}catch(X){j=X}i.call(se.prototype)}}else{try{throw Error()}catch(X){j=X}(se=i())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(X){if(X&&j&&typeof X.stack=="string")return[X.stack,j.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=u.DetermineComponentFrameRoot(),C=_[0],b=_[1];if(C&&b){var U=C.split(`
`),J=b.split(`
`);for(y=u=0;u<U.length&&!U[u].includes("DetermineComponentFrameRoot");)u++;for(;y<J.length&&!J[y].includes("DetermineComponentFrameRoot");)y++;if(u===U.length||y===J.length)for(u=U.length-1,y=J.length-1;1<=u&&0<=y&&U[u]!==J[y];)y--;for(;1<=u&&0<=y;u--,y--)if(U[u]!==J[y]){if(u!==1||y!==1)do if(u--,y--,0>y||U[u]!==J[y]){var Z=`
`+U[u].replace(" at new "," at ");return i.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",i.displayName)),Z}while(1<=u&&0<=y);break}}}finally{Ot=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?Qt(a):""}function Va(i,r){switch(i.tag){case 26:case 27:case 5:return Qt(i.type);case 16:return Qt("Lazy");case 13:return i.child!==r&&r!==null?Qt("Suspense Fallback"):Qt("Suspense");case 19:return Qt("SuspenseList");case 0:case 15:return qt(i.type,!1);case 11:return qt(i.type.render,!1);case 1:return qt(i.type,!0);case 31:return Qt("Activity");default:return""}}function ka(i){try{var r="",a=null;do r+=Va(i,a),a=i,i=i.return;while(i);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var bt=Object.prototype.hasOwnProperty,Bt=n.unstable_scheduleCallback,Ss=n.unstable_cancelCallback,lf=n.unstable_shouldYield,Tu=n.unstable_requestPaint,dn=n.unstable_now,Er=n.unstable_getCurrentPriorityLevel,Ua=n.unstable_ImmediatePriority,La=n.unstable_UserBlockingPriority,As=n.unstable_NormalPriority,uf=n.unstable_LowPriority,Eu=n.unstable_IdlePriority,Su=n.log,Au=n.unstable_setDisableYieldValue,Kn=null,Xt=null;function Pn(i){if(typeof Su=="function"&&Au(i),Xt&&typeof Xt.setStrictMode=="function")try{Xt.setStrictMode(Kn,i)}catch{}}var Et=Math.clz32?Math.clz32:Iu,Cu=Math.log,ho=Math.LN2;function Iu(i){return i>>>=0,i===0?32:31-(Cu(i)/ho|0)|0}var hi=256,Sr=262144,xt=4194304;function mi(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function pi(i,r,a){var u=i.pendingLanes;if(u===0)return 0;var y=0,_=i.suspendedLanes,C=i.pingedLanes;i=i.warmLanes;var b=u&134217727;return b!==0?(u=b&~_,u!==0?y=mi(u):(C&=b,C!==0?y=mi(C):a||(a=b&~i,a!==0&&(y=mi(a))))):(b=u&~_,b!==0?y=mi(b):C!==0?y=mi(C):a||(a=u&~i,a!==0&&(y=mi(a)))),y===0?0:r!==0&&r!==y&&(r&_)===0&&(_=y&-y,a=r&-r,_>=a||_===32&&(a&4194048)!==0)?r:y}function $n(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function cf(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bu(){var i=xt;return xt<<=1,(xt&62914560)===0&&(xt=4194304),i}function gi(i){for(var r=[],a=0;31>a;a++)r.push(i);return r}function Ar(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function df(i,r,a,u,y,_){var C=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var b=i.entanglements,U=i.expirationTimes,J=i.hiddenUpdates;for(a=C&~a;0<a;){var Z=31-Et(a),se=1<<Z;b[Z]=0,U[Z]=-1;var j=J[Z];if(j!==null)for(J[Z]=null,Z=0;Z<j.length;Z++){var X=j[Z];X!==null&&(X.lane&=-536870913)}a&=~se}u!==0&&Cr(i,u,0),_!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=_&~(C&~r))}function Cr(i,r,a){i.pendingLanes|=r,i.suspendedLanes&=~r;var u=31-Et(r);i.entangledLanes|=r,i.entanglements[u]=i.entanglements[u]|1073741824|a&261930}function Oa(i,r){var a=i.entangledLanes|=r;for(i=i.entanglements;a;){var u=31-Et(a),y=1<<u;y&r|i[u]&r&&(i[u]|=r),a&=~y}}function qa(i,r){var a=r&-r;return a=(a&42)!==0?1:Ir(a),(a&(i.suspendedLanes|r))!==0?0:a}function Ir(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Gi(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function xu(){var i=de.p;return i!==0?i:(i=window.event,i===void 0?32:Sv(i.type))}function Qn(i,r){var a=de.p;try{return de.p=i,r()}finally{de.p=a}}var Xn=Math.random().toString(36).slice(2),wt="__reactFiber$"+Xn,Gt="__reactProps$"+Xn,yi="__reactContainer$"+Xn,mo="__reactEvents$"+Xn,ff="__reactListeners$"+Xn,wu="__reactHandles$"+Xn,Ru="__reactResources$"+Xn,_i="__reactMarker$"+Xn;function po(i){delete i[wt],delete i[Gt],delete i[mo],delete i[ff],delete i[wu]}function vi(i){var r=i[wt];if(r)return r;for(var a=i.parentNode;a;){if(r=a[yi]||a[wt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(i=ov(i);i!==null;){if(a=i[wt])return a;i=ov(i)}return r}i=a,a=i.parentNode}return null}function Vn(i){if(i=i[wt]||i[yi]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function An(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function Ti(i){var r=i[Ru];return r||(r=i[Ru]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Rt(i){i[_i]=!0}var Ba=new Set,Fa={};function Ei(i,r){Si(i,r),Si(i+"Capture",r)}function Si(i,r){for(Fa[i]=r,i=0;i<r.length;i++)Ba.add(r[i])}var za=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ha={},Ga={};function Nu(i){return bt.call(Ga,i)?!0:bt.call(Ha,i)?!1:za.test(i)?Ga[i]=!0:(Ha[i]=!0,!1)}function go(i,r,a){if(Nu(r))if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+a)}}function Cn(i,r,a){if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+a)}}function Nt(i,r,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(r,a,""+u)}}function Yt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Cs(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ya(i,r,a){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var y=u.get,_=u.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return y.call(this)},set:function(C){a=""+C,_.call(this,C)}}),Object.defineProperty(i,r,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(C){a=""+C},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function Ze(i){if(!i._valueTracker){var r=Cs(i)?"checked":"value";i._valueTracker=Ya(i,r,""+i[r])}}function br(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var a=r.getValue(),u="";return i&&(u=Cs(i)?i.checked?"true":"false":i.value),i=u,i!==a?(r.setValue(i),!0):!1}function Ai(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var xr=/[\n"\\]/g;function pn(i){return i.replace(xr,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function yo(i,r,a,u,y,_,C,b){i.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.type=C:i.removeAttribute("type"),r!=null?C==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+Yt(r)):i.value!==""+Yt(r)&&(i.value=""+Yt(r)):C!=="submit"&&C!=="reset"||i.removeAttribute("value"),r!=null?Ja(i,C,Yt(r)):a!=null?Ja(i,C,Yt(a)):u!=null&&i.removeAttribute("value"),y==null&&_!=null&&(i.defaultChecked=!!_),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.name=""+Yt(b):i.removeAttribute("name")}function Mu(i,r,a,u,y,_,C,b){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),r!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){Ze(i);return}a=a!=null?""+Yt(a):"",r=r!=null?""+Yt(r):a,b||r===i.value||(i.value=r),i.defaultValue=r}u=u??y,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=b?i.checked:!!u,i.defaultChecked=!!u,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(i.name=C),Ze(i)}function Ja(i,r,a){r==="number"&&Ai(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function Is(i,r,a,u){if(i=i.options,r){r={};for(var y=0;y<a.length;y++)r["$"+a[y]]=!0;for(a=0;a<i.length;a++)y=r.hasOwnProperty("$"+i[a].value),i[a].selected!==y&&(i[a].selected=y),y&&u&&(i[a].defaultSelected=!0)}else{for(a=""+Yt(a),r=null,y=0;y<i.length;y++){if(i[y].value===a){i[y].selected=!0,u&&(i[y].defaultSelected=!0);return}r!==null||i[y].disabled||(r=i[y])}r!==null&&(r.selected=!0)}}function Du(i,r,a){if(r!=null&&(r=""+Yt(r),r!==i.value&&(i.value=r),a==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=a!=null?""+Yt(a):""}function bs(i,r,a,u){if(r==null){if(u!=null){if(a!=null)throw Error(s(92));if(ke(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),r=a}a=Yt(r),i.defaultValue=a,u=i.textContent,u===a&&u!==""&&u!==null&&(i.value=u),Ze(i)}function gn(i,r){if(r){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=r;return}}i.textContent=r}var Pu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ja(i,r,a){var u=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":u?i.setProperty(r,a):typeof a!="number"||a===0||Pu.has(r)?r==="float"?i.cssFloat=a:i[r]=(""+a).trim():i[r]=a+"px"}function Ka(i,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var y in r)u=r[y],r.hasOwnProperty(y)&&a[y]!==u&&ja(i,y,u)}else for(var _ in r)r.hasOwnProperty(_)&&ja(i,_,r[_])}function _o(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vo(i){return xs.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Wn(){}var $a=null;function kn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ws=null,Ci=null;function wr(i){var r=Vn(i);if(r&&(i=r.stateNode)){var a=i[Gt]||null;e:switch(i=r.stateNode,r.type){case"input":if(yo(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+pn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var u=a[r];if(u!==i&&u.form===i.form){var y=u[Gt]||null;if(!y)throw Error(s(90));yo(u,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<a.length;r++)u=a[r],u.form===i.form&&br(u)}break e;case"textarea":Du(i,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Is(i,!!a.multiple,r,!1)}}}var To=!1;function Rs(i,r,a){if(To)return i(r,a);To=!0;try{var u=i(r);return u}finally{if(To=!1,(ws!==null||Ci!==null)&&(xc(),ws&&(r=ws,i=Ci,Ci=ws=null,wr(r),i)))for(r=0;r<i.length;r++)wr(i[r])}}function Zn(i,r){var a=i.stateNode;if(a===null)return null;var u=a[Gt]||null;if(u===null)return null;a=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rr=!1;if(Un)try{var nt={};Object.defineProperty(nt,"passive",{get:function(){Rr=!0}}),window.addEventListener("test",nt,nt),window.removeEventListener("test",nt,nt)}catch{Rr=!1}var Ii=null,Qa=null,Nr=null;function Xa(){if(Nr)return Nr;var i,r=Qa,a=r.length,u,y="value"in Ii?Ii.value:Ii.textContent,_=y.length;for(i=0;i<a&&r[i]===y[i];i++);var C=a-i;for(u=1;u<=C&&r[a-u]===y[_-u];u++);return Nr=y.slice(i,1<u?1-u:void 0)}function Mr(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Yi(){return!0}function ei(){return!1}function Wt(i){function r(a,u,y,_,C){this._reactName=a,this._targetInst=y,this.type=u,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var b in i)i.hasOwnProperty(b)&&(a=i[b],this[b]=a?a(_):_[b]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Yi:ei,this.isPropagationStopped=ei,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Yi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Yi)},persist:function(){},isPersistent:Yi}),r}var Ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bi=Wt(Ji),Ns=E({},Ji,{view:0,detail:0}),Wa=Wt(Ns),Ms,Eo,xi,So=E({},Ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ds,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==xi&&(xi&&i.type==="mousemove"?(Ms=i.screenX-xi.screenX,Eo=i.screenY-xi.screenY):Eo=Ms=0,xi=i),Ms)},movementY:function(i){return"movementY"in i?i.movementY:Eo}}),Za=Wt(So),Dr=E({},So,{dataTransfer:0}),ku=Wt(Dr),Uu=E({},Ns,{relatedTarget:0}),Pr=Wt(Uu),el=E({},Ji,{animationName:0,elapsedTime:0,pseudoElement:0}),Lu=Wt(el),Ao=E({},Ji,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Ou=Wt(Ao),qu=E({},Ji,{data:0}),wi=Wt(qu),Bu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hu(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=zu[i])?!!r[i]:!1}function Ds(){return Hu}var fn=E({},Ns,{key:function(i){if(i.key){var r=Bu[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Mr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Fu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ds,charCode:function(i){return i.type==="keypress"?Mr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Mr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Gu=Wt(fn),Yu=E({},So,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ji=Wt(Yu),h=E({},Ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ds}),S=Wt(h),I=E({},Ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=Wt(I),G=E({},So,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),$=Wt(G),ce=E({},Ji,{newState:0,oldState:0}),De=Wt(ce),St=[9,13,27,32],Qe=Un&&"CompositionEvent"in window,ht=null;Un&&"documentMode"in document&&(ht=document.documentMode);var Ln=Un&&"TextEvent"in window&&!ht,Ri=Un&&(!Qe||ht&&8<ht&&11>=ht),ti=" ",ni=!1;function Vr(i,r){switch(i){case"keyup":return St.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Co(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Io=!1;function LC(i,r){switch(i){case"compositionend":return Co(r);case"keypress":return r.which!==32?null:(ni=!0,ti);case"textInput":return i=r.data,i===ti&&ni?null:i;default:return null}}function OC(i,r){if(Io)return i==="compositionend"||!Qe&&Vr(i,r)?(i=Xa(),Nr=Qa=Ii=null,Io=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ri&&r.locale!=="ko"?null:r.data;default:return null}}var qC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ug(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!qC[i.type]:r==="textarea"}function cg(i,r,a,u){ws?Ci?Ci.push(u):Ci=[u]:ws=u,r=Vc(r,"onChange"),0<r.length&&(a=new bi("onChange","change",null,a,u),i.push({event:a,listeners:r}))}var tl=null,nl=null;function BC(i){J_(i,0)}function Ju(i){var r=An(i);if(br(r))return i}function dg(i,r){if(i==="change")return r}var fg=!1;if(Un){var hf;if(Un){var mf="oninput"in document;if(!mf){var hg=document.createElement("div");hg.setAttribute("oninput","return;"),mf=typeof hg.oninput=="function"}hf=mf}else hf=!1;fg=hf&&(!document.documentMode||9<document.documentMode)}function mg(){tl&&(tl.detachEvent("onpropertychange",pg),nl=tl=null)}function pg(i){if(i.propertyName==="value"&&Ju(nl)){var r=[];cg(r,nl,i,kn(i)),Rs(BC,r)}}function FC(i,r,a){i==="focusin"?(mg(),tl=r,nl=a,tl.attachEvent("onpropertychange",pg)):i==="focusout"&&mg()}function zC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ju(nl)}function HC(i,r){if(i==="click")return Ju(r)}function GC(i,r){if(i==="input"||i==="change")return Ju(r)}function YC(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var In=typeof Object.is=="function"?Object.is:YC;function il(i,r){if(In(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var a=Object.keys(i),u=Object.keys(r);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var y=a[u];if(!bt.call(r,y)||!In(i[y],r[y]))return!1}return!0}function gg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function yg(i,r){var a=gg(i);i=0;for(var u;a;){if(a.nodeType===3){if(u=i+a.textContent.length,i<=r&&u>=r)return{node:a,offset:r-i};i=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=gg(a)}}function _g(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?_g(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function vg(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Ai(i.document);r instanceof i.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)i=r.contentWindow;else break;r=Ai(i.document)}return r}function pf(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var JC=Un&&"documentMode"in document&&11>=document.documentMode,bo=null,gf=null,sl=null,yf=!1;function Tg(i,r,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;yf||bo==null||bo!==Ai(u)||(u=bo,"selectionStart"in u&&pf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),sl&&il(sl,u)||(sl=u,u=Vc(gf,"onSelect"),0<u.length&&(r=new bi("onSelect","select",null,r,a),i.push({event:r,listeners:u}),r.target=bo)))}function kr(i,r){var a={};return a[i.toLowerCase()]=r.toLowerCase(),a["Webkit"+i]="webkit"+r,a["Moz"+i]="moz"+r,a}var xo={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionrun:kr("Transition","TransitionRun"),transitionstart:kr("Transition","TransitionStart"),transitioncancel:kr("Transition","TransitionCancel"),transitionend:kr("Transition","TransitionEnd")},_f={},Eg={};Un&&(Eg=document.createElement("div").style,"AnimationEvent"in window||(delete xo.animationend.animation,delete xo.animationiteration.animation,delete xo.animationstart.animation),"TransitionEvent"in window||delete xo.transitionend.transition);function Ur(i){if(_f[i])return _f[i];if(!xo[i])return i;var r=xo[i],a;for(a in r)if(r.hasOwnProperty(a)&&a in Eg)return _f[i]=r[a];return i}var Sg=Ur("animationend"),Ag=Ur("animationiteration"),Cg=Ur("animationstart"),jC=Ur("transitionrun"),KC=Ur("transitionstart"),$C=Ur("transitioncancel"),Ig=Ur("transitionend"),bg=new Map,vf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vf.push("scrollEnd");function ii(i,r){bg.set(i,r),Ei(r,[i])}var ju=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},On=[],wo=0,Tf=0;function Ku(){for(var i=wo,r=Tf=wo=0;r<i;){var a=On[r];On[r++]=null;var u=On[r];On[r++]=null;var y=On[r];On[r++]=null;var _=On[r];if(On[r++]=null,u!==null&&y!==null){var C=u.pending;C===null?y.next=y:(y.next=C.next,C.next=y),u.pending=y}_!==0&&xg(a,y,_)}}function $u(i,r,a,u){On[wo++]=i,On[wo++]=r,On[wo++]=a,On[wo++]=u,Tf|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Ef(i,r,a,u){return $u(i,r,a,u),Qu(i)}function Lr(i,r){return $u(i,null,null,r),Qu(i)}function xg(i,r,a){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a);for(var y=!1,_=i.return;_!==null;)_.childLanes|=a,u=_.alternate,u!==null&&(u.childLanes|=a),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(y=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,y&&r!==null&&(y=31-Et(a),i=_.hiddenUpdates,u=i[y],u===null?i[y]=[r]:u.push(r),r.lane=a|536870912),_):null}function Qu(i){if(50<bl)throw bl=0,Nh=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Ro={};function QC(i,r,a,u){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(i,r,a,u){return new QC(i,r,a,u)}function Sf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ki(i,r){var a=i.alternate;return a===null?(a=bn(i.tag,r,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=r,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,r=i.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function wg(i,r){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,r=a.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Xu(i,r,a,u,y,_){var C=0;if(u=i,typeof i=="function")Sf(i)&&(C=1);else if(typeof i=="string")C=tb(i,a,he.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case R:return i=bn(31,a,r,y),i.elementType=R,i.lanes=_,i;case B:return Or(a.children,y,_,r);case z:C=8,y|=24;break;case ee:return i=bn(12,a,r,y|2),i.elementType=ee,i.lanes=_,i;case ne:return i=bn(13,a,r,y),i.elementType=ne,i.lanes=_,i;case ae:return i=bn(19,a,r,y),i.elementType=ae,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Q:C=10;break e;case te:C=9;break e;case F:C=11;break e;case N:C=14;break e;case M:C=16,u=null;break e}C=29,a=Error(s(130,i===null?"null":typeof i,"")),u=null}return r=bn(C,a,r,y),r.elementType=i,r.type=u,r.lanes=_,r}function Or(i,r,a,u){return i=bn(7,i,u,r),i.lanes=a,i}function Af(i,r,a){return i=bn(6,i,null,r),i.lanes=a,i}function Rg(i){var r=bn(18,null,null,0);return r.stateNode=i,r}function Cf(i,r,a){return r=bn(4,i.children!==null?i.children:[],i.key,r),r.lanes=a,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var Ng=new WeakMap;function qn(i,r){if(typeof i=="object"&&i!==null){var a=Ng.get(i);return a!==void 0?a:(r={value:i,source:r,stack:ka(r)},Ng.set(i,r),r)}return{value:i,source:r,stack:ka(r)}}var No=[],Mo=0,Wu=null,rl=0,Bn=[],Fn=0,Ps=null,Ni=1,Mi="";function $i(i,r){No[Mo++]=rl,No[Mo++]=Wu,Wu=i,rl=r}function Mg(i,r,a){Bn[Fn++]=Ni,Bn[Fn++]=Mi,Bn[Fn++]=Ps,Ps=i;var u=Ni;i=Mi;var y=32-Et(u)-1;u&=~(1<<y),a+=1;var _=32-Et(r)+y;if(30<_){var C=y-y%5;_=(u&(1<<C)-1).toString(32),u>>=C,y-=C,Ni=1<<32-Et(r)+y|a<<y|u,Mi=_+i}else Ni=1<<_|a<<y|u,Mi=i}function If(i){i.return!==null&&($i(i,1),Mg(i,1,0))}function bf(i){for(;i===Wu;)Wu=No[--Mo],No[Mo]=null,rl=No[--Mo],No[Mo]=null;for(;i===Ps;)Ps=Bn[--Fn],Bn[Fn]=null,Mi=Bn[--Fn],Bn[Fn]=null,Ni=Bn[--Fn],Bn[Fn]=null}function Dg(i,r){Bn[Fn++]=Ni,Bn[Fn++]=Mi,Bn[Fn++]=Ps,Ni=r.id,Mi=r.overflow,Ps=i}var Zt=null,ut=null,Ge=!1,Vs=null,zn=!1,xf=Error(s(519));function ks(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ol(qn(r,i)),xf}function Pg(i){var r=i.stateNode,a=i.type,u=i.memoizedProps;switch(r[wt]=i,r[Gt]=u,a){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(a=0;a<wl.length;a++)Le(wl[a],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":Le("invalid",r),Mu(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Le("invalid",r);break;case"textarea":Le("invalid",r),bs(r,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||u.suppressHydrationWarning===!0||Q_(r.textContent,a)?(u.popover!=null&&(Le("beforetoggle",r),Le("toggle",r)),u.onScroll!=null&&Le("scroll",r),u.onScrollEnd!=null&&Le("scrollend",r),u.onClick!=null&&(r.onclick=Wn),r=!0):r=!1,r||ks(i,!0)}function Vg(i){for(Zt=i.return;Zt;)switch(Zt.tag){case 5:case 31:case 13:zn=!1;return;case 27:case 3:zn=!0;return;default:Zt=Zt.return}}function Do(i){if(i!==Zt)return!1;if(!Ge)return Vg(i),Ge=!0,!1;var r=i.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||Yh(i.type,i.memoizedProps)),a=!a),a&&ut&&ks(i),Vg(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));ut=rv(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));ut=rv(i)}else r===27?(r=ut,$s(i.type)?(i=Qh,Qh=null,ut=i):ut=r):ut=Zt?Gn(i.stateNode.nextSibling):null;return!0}function qr(){ut=Zt=null,Ge=!1}function wf(){var i=Vs;return i!==null&&(Tn===null?Tn=i:Tn.push.apply(Tn,i),Vs=null),i}function ol(i){Vs===null?Vs=[i]:Vs.push(i)}var Rf=D(null),Br=null,Qi=null;function Us(i,r,a){oe(Rf,r._currentValue),r._currentValue=a}function Xi(i){i._currentValue=Rf.current,K(Rf)}function Nf(i,r,a){for(;i!==null;){var u=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),i===a)break;i=i.return}}function Mf(i,r,a,u){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var _=y.dependencies;if(_!==null){var C=y.child;_=_.firstContext;e:for(;_!==null;){var b=_;_=y;for(var U=0;U<r.length;U++)if(b.context===r[U]){_.lanes|=a,b=_.alternate,b!==null&&(b.lanes|=a),Nf(_.return,a,i),u||(C=null);break e}_=b.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(s(341));C.lanes|=a,_=C.alternate,_!==null&&(_.lanes|=a),Nf(C,a,i),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===i){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function Po(i,r,a,u){i=null;for(var y=r,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(s(387));if(C=C.memoizedProps,C!==null){var b=y.type;In(y.pendingProps.value,C.value)||(i!==null?i.push(b):i=[b])}}else if(y===Oe.current){if(C=y.alternate,C===null)throw Error(s(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(Pl):i=[Pl])}y=y.return}i!==null&&Mf(r,i,a,u),r.flags|=262144}function Zu(i){for(i=i.firstContext;i!==null;){if(!In(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Fr(i){Br=i,Qi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function en(i){return kg(Br,i)}function ec(i,r){return Br===null&&Fr(i),kg(i,r)}function kg(i,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Qi===null){if(i===null)throw Error(s(308));Qi=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else Qi=Qi.next=r;return a}var XC=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(a,u){i.push(u)}};this.abort=function(){r.aborted=!0,i.forEach(function(a){return a()})}},WC=n.unstable_scheduleCallback,ZC=n.unstable_NormalPriority,Mt={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Df(){return{controller:new XC,data:new Map,refCount:0}}function al(i){i.refCount--,i.refCount===0&&WC(ZC,function(){i.controller.abort()})}var ll=null,Pf=0,Vo=0,ko=null;function eI(i,r){if(ll===null){var a=ll=[];Pf=0,Vo=Uh(),ko={status:"pending",value:void 0,then:function(u){a.push(u)}}}return Pf++,r.then(Ug,Ug),r}function Ug(){if(--Pf===0&&ll!==null){ko!==null&&(ko.status="fulfilled");var i=ll;ll=null,Vo=0,ko=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function tI(i,r){var a=[],u={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return i.then(function(){u.status="fulfilled",u.value=r;for(var y=0;y<a.length;y++)(0,a[y])(r)},function(y){for(u.status="rejected",u.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),u}var Lg=W.S;W.S=function(i,r){T_=dn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&eI(i,r),Lg!==null&&Lg(i,r)};var zr=D(null);function Vf(){var i=zr.current;return i!==null?i:ot.pooledCache}function tc(i,r){r===null?oe(zr,zr.current):oe(zr,r.pool)}function Og(){var i=Vf();return i===null?null:{parent:Mt._currentValue,pool:i}}var Uo=Error(s(460)),kf=Error(s(474)),nc=Error(s(542)),ic={then:function(){}};function qg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Bg(i,r,a){switch(a=i[a],a===void 0?i.push(r):a!==r&&(r.then(Wn,Wn),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,zg(i),i;default:if(typeof r.status=="string")r.then(Wn,Wn);else{if(i=ot,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(u){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=u}},function(u){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,zg(i),i}throw Gr=r,Uo}}function Hr(i){try{var r=i._init;return r(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Gr=a,Uo):a}}var Gr=null;function Fg(){if(Gr===null)throw Error(s(459));var i=Gr;return Gr=null,i}function zg(i){if(i===Uo||i===nc)throw Error(s(483))}var Lo=null,ul=0;function sc(i){var r=ul;return ul+=1,Lo===null&&(Lo=[]),Bg(Lo,i,r)}function cl(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function rc(i,r){throw r.$$typeof===A?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Hg(i){function r(H,q){if(i){var Y=H.deletions;Y===null?(H.deletions=[q],H.flags|=16):Y.push(q)}}function a(H,q){if(!i)return null;for(;q!==null;)r(H,q),q=q.sibling;return null}function u(H){for(var q=new Map;H!==null;)H.key!==null?q.set(H.key,H):q.set(H.index,H),H=H.sibling;return q}function y(H,q){return H=Ki(H,q),H.index=0,H.sibling=null,H}function _(H,q,Y){return H.index=Y,i?(Y=H.alternate,Y!==null?(Y=Y.index,Y<q?(H.flags|=67108866,q):Y):(H.flags|=67108866,q)):(H.flags|=1048576,q)}function C(H){return i&&H.alternate===null&&(H.flags|=67108866),H}function b(H,q,Y,ie){return q===null||q.tag!==6?(q=Af(Y,H.mode,ie),q.return=H,q):(q=y(q,Y),q.return=H,q)}function U(H,q,Y,ie){var Ae=Y.type;return Ae===B?Z(H,q,Y.props.children,ie,Y.key):q!==null&&(q.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===M&&Hr(Ae)===q.type)?(q=y(q,Y.props),cl(q,Y),q.return=H,q):(q=Xu(Y.type,Y.key,Y.props,null,H.mode,ie),cl(q,Y),q.return=H,q)}function J(H,q,Y,ie){return q===null||q.tag!==4||q.stateNode.containerInfo!==Y.containerInfo||q.stateNode.implementation!==Y.implementation?(q=Cf(Y,H.mode,ie),q.return=H,q):(q=y(q,Y.children||[]),q.return=H,q)}function Z(H,q,Y,ie,Ae){return q===null||q.tag!==7?(q=Or(Y,H.mode,ie,Ae),q.return=H,q):(q=y(q,Y),q.return=H,q)}function se(H,q,Y){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Af(""+q,H.mode,Y),q.return=H,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case x:return Y=Xu(q.type,q.key,q.props,null,H.mode,Y),cl(Y,q),Y.return=H,Y;case L:return q=Cf(q,H.mode,Y),q.return=H,q;case M:return q=Hr(q),se(H,q,Y)}if(ke(q)||O(q))return q=Or(q,H.mode,Y,null),q.return=H,q;if(typeof q.then=="function")return se(H,sc(q),Y);if(q.$$typeof===Q)return se(H,ec(H,q),Y);rc(H,q)}return null}function j(H,q,Y,ie){var Ae=q!==null?q.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Ae!==null?null:b(H,q,""+Y,ie);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case x:return Y.key===Ae?U(H,q,Y,ie):null;case L:return Y.key===Ae?J(H,q,Y,ie):null;case M:return Y=Hr(Y),j(H,q,Y,ie)}if(ke(Y)||O(Y))return Ae!==null?null:Z(H,q,Y,ie,null);if(typeof Y.then=="function")return j(H,q,sc(Y),ie);if(Y.$$typeof===Q)return j(H,q,ec(H,Y),ie);rc(H,Y)}return null}function X(H,q,Y,ie,Ae){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return H=H.get(Y)||null,b(q,H,""+ie,Ae);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case x:return H=H.get(ie.key===null?Y:ie.key)||null,U(q,H,ie,Ae);case L:return H=H.get(ie.key===null?Y:ie.key)||null,J(q,H,ie,Ae);case M:return ie=Hr(ie),X(H,q,Y,ie,Ae)}if(ke(ie)||O(ie))return H=H.get(Y)||null,Z(q,H,ie,Ae,null);if(typeof ie.then=="function")return X(H,q,Y,sc(ie),Ae);if(ie.$$typeof===Q)return X(H,q,Y,ec(q,ie),Ae);rc(q,ie)}return null}function pe(H,q,Y,ie){for(var Ae=null,je=null,Te=q,Ve=q=0,Be=null;Te!==null&&Ve<Y.length;Ve++){Te.index>Ve?(Be=Te,Te=null):Be=Te.sibling;var Ke=j(H,Te,Y[Ve],ie);if(Ke===null){Te===null&&(Te=Be);break}i&&Te&&Ke.alternate===null&&r(H,Te),q=_(Ke,q,Ve),je===null?Ae=Ke:je.sibling=Ke,je=Ke,Te=Be}if(Ve===Y.length)return a(H,Te),Ge&&$i(H,Ve),Ae;if(Te===null){for(;Ve<Y.length;Ve++)Te=se(H,Y[Ve],ie),Te!==null&&(q=_(Te,q,Ve),je===null?Ae=Te:je.sibling=Te,je=Te);return Ge&&$i(H,Ve),Ae}for(Te=u(Te);Ve<Y.length;Ve++)Be=X(Te,H,Ve,Y[Ve],ie),Be!==null&&(i&&Be.alternate!==null&&Te.delete(Be.key===null?Ve:Be.key),q=_(Be,q,Ve),je===null?Ae=Be:je.sibling=Be,je=Be);return i&&Te.forEach(function(er){return r(H,er)}),Ge&&$i(H,Ve),Ae}function Ie(H,q,Y,ie){if(Y==null)throw Error(s(151));for(var Ae=null,je=null,Te=q,Ve=q=0,Be=null,Ke=Y.next();Te!==null&&!Ke.done;Ve++,Ke=Y.next()){Te.index>Ve?(Be=Te,Te=null):Be=Te.sibling;var er=j(H,Te,Ke.value,ie);if(er===null){Te===null&&(Te=Be);break}i&&Te&&er.alternate===null&&r(H,Te),q=_(er,q,Ve),je===null?Ae=er:je.sibling=er,je=er,Te=Be}if(Ke.done)return a(H,Te),Ge&&$i(H,Ve),Ae;if(Te===null){for(;!Ke.done;Ve++,Ke=Y.next())Ke=se(H,Ke.value,ie),Ke!==null&&(q=_(Ke,q,Ve),je===null?Ae=Ke:je.sibling=Ke,je=Ke);return Ge&&$i(H,Ve),Ae}for(Te=u(Te);!Ke.done;Ve++,Ke=Y.next())Ke=X(Te,H,Ve,Ke.value,ie),Ke!==null&&(i&&Ke.alternate!==null&&Te.delete(Ke.key===null?Ve:Ke.key),q=_(Ke,q,Ve),je===null?Ae=Ke:je.sibling=Ke,je=Ke);return i&&Te.forEach(function(fb){return r(H,fb)}),Ge&&$i(H,Ve),Ae}function rt(H,q,Y,ie){if(typeof Y=="object"&&Y!==null&&Y.type===B&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case x:e:{for(var Ae=Y.key;q!==null;){if(q.key===Ae){if(Ae=Y.type,Ae===B){if(q.tag===7){a(H,q.sibling),ie=y(q,Y.props.children),ie.return=H,H=ie;break e}}else if(q.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===M&&Hr(Ae)===q.type){a(H,q.sibling),ie=y(q,Y.props),cl(ie,Y),ie.return=H,H=ie;break e}a(H,q);break}else r(H,q);q=q.sibling}Y.type===B?(ie=Or(Y.props.children,H.mode,ie,Y.key),ie.return=H,H=ie):(ie=Xu(Y.type,Y.key,Y.props,null,H.mode,ie),cl(ie,Y),ie.return=H,H=ie)}return C(H);case L:e:{for(Ae=Y.key;q!==null;){if(q.key===Ae)if(q.tag===4&&q.stateNode.containerInfo===Y.containerInfo&&q.stateNode.implementation===Y.implementation){a(H,q.sibling),ie=y(q,Y.children||[]),ie.return=H,H=ie;break e}else{a(H,q);break}else r(H,q);q=q.sibling}ie=Cf(Y,H.mode,ie),ie.return=H,H=ie}return C(H);case M:return Y=Hr(Y),rt(H,q,Y,ie)}if(ke(Y))return pe(H,q,Y,ie);if(O(Y)){if(Ae=O(Y),typeof Ae!="function")throw Error(s(150));return Y=Ae.call(Y),Ie(H,q,Y,ie)}if(typeof Y.then=="function")return rt(H,q,sc(Y),ie);if(Y.$$typeof===Q)return rt(H,q,ec(H,Y),ie);rc(H,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,q!==null&&q.tag===6?(a(H,q.sibling),ie=y(q,Y),ie.return=H,H=ie):(a(H,q),ie=Af(Y,H.mode,ie),ie.return=H,H=ie),C(H)):a(H,q)}return function(H,q,Y,ie){try{ul=0;var Ae=rt(H,q,Y,ie);return Lo=null,Ae}catch(Te){if(Te===Uo||Te===nc)throw Te;var je=bn(29,Te,null,H.mode);return je.lanes=ie,je.return=H,je}finally{}}}var Yr=Hg(!0),Gg=Hg(!1),Ls=!1;function Uf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Lf(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Os(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function qs(i,r,a){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Xe&2)!==0){var y=u.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),u.pending=r,r=Qu(i),xg(i,null,a),r}return $u(i,u,r,a),Qu(i)}function dl(i,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var u=r.lanes;u&=i.pendingLanes,a|=u,r.lanes=a,Oa(i,a)}}function Of(i,r){var a=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var y=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var C={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?y=_=C:_=_.next=C,a=a.next}while(a!==null);_===null?y=_=r:_=_.next=r}else y=_=r;a={baseState:u.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:u.shared,callbacks:u.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=r:i.next=r,a.lastBaseUpdate=r}var qf=!1;function fl(){if(qf){var i=ko;if(i!==null)throw i}}function hl(i,r,a,u){qf=!1;var y=i.updateQueue;Ls=!1;var _=y.firstBaseUpdate,C=y.lastBaseUpdate,b=y.shared.pending;if(b!==null){y.shared.pending=null;var U=b,J=U.next;U.next=null,C===null?_=J:C.next=J,C=U;var Z=i.alternate;Z!==null&&(Z=Z.updateQueue,b=Z.lastBaseUpdate,b!==C&&(b===null?Z.firstBaseUpdate=J:b.next=J,Z.lastBaseUpdate=U))}if(_!==null){var se=y.baseState;C=0,Z=J=U=null,b=_;do{var j=b.lane&-536870913,X=j!==b.lane;if(X?(qe&j)===j:(u&j)===j){j!==0&&j===Vo&&(qf=!0),Z!==null&&(Z=Z.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var pe=i,Ie=b;j=r;var rt=a;switch(Ie.tag){case 1:if(pe=Ie.payload,typeof pe=="function"){se=pe.call(rt,se,j);break e}se=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=Ie.payload,j=typeof pe=="function"?pe.call(rt,se,j):pe,j==null)break e;se=E({},se,j);break e;case 2:Ls=!0}}j=b.callback,j!==null&&(i.flags|=64,X&&(i.flags|=8192),X=y.callbacks,X===null?y.callbacks=[j]:X.push(j))}else X={lane:j,tag:b.tag,payload:b.payload,callback:b.callback,next:null},Z===null?(J=Z=X,U=se):Z=Z.next=X,C|=j;if(b=b.next,b===null){if(b=y.shared.pending,b===null)break;X=b,b=X.next,X.next=null,y.lastBaseUpdate=X,y.shared.pending=null}}while(!0);Z===null&&(U=se),y.baseState=U,y.firstBaseUpdate=J,y.lastBaseUpdate=Z,_===null&&(y.shared.lanes=0),Gs|=C,i.lanes=C,i.memoizedState=se}}function Yg(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function Jg(i,r){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)Yg(a[i],r)}var Oo=D(null),oc=D(0);function jg(i,r){i=os,oe(oc,i),oe(Oo,r),os=i|r.baseLanes}function Bf(){oe(oc,os),oe(Oo,Oo.current)}function Ff(){os=oc.current,K(Oo),K(oc)}var xn=D(null),Hn=null;function Bs(i){var r=i.alternate;oe(At,At.current&1),oe(xn,i),Hn===null&&(r===null||Oo.current!==null||r.memoizedState!==null)&&(Hn=i)}function zf(i){oe(At,At.current),oe(xn,i),Hn===null&&(Hn=i)}function Kg(i){i.tag===22?(oe(At,At.current),oe(xn,i),Hn===null&&(Hn=i)):Fs()}function Fs(){oe(At,At.current),oe(xn,xn.current)}function wn(i){K(xn),Hn===i&&(Hn=null),K(At)}var At=D(0);function ac(i){for(var r=i;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Kh(a)||$h(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Wi=0,Pe=null,it=null,Dt=null,lc=!1,qo=!1,Jr=!1,uc=0,ml=0,Bo=null,nI=0;function gt(){throw Error(s(321))}function Hf(i,r){if(r===null)return!1;for(var a=0;a<r.length&&a<i.length;a++)if(!In(i[a],r[a]))return!1;return!0}function Gf(i,r,a,u,y,_){return Wi=_,Pe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,W.H=i===null||i.memoizedState===null?My:rh,Jr=!1,_=a(u,y),Jr=!1,qo&&(_=Qg(r,a,u,y)),$g(i),_}function $g(i){W.H=yl;var r=it!==null&&it.next!==null;if(Wi=0,Dt=it=Pe=null,lc=!1,ml=0,Bo=null,r)throw Error(s(300));i===null||Pt||(i=i.dependencies,i!==null&&Zu(i)&&(Pt=!0))}function Qg(i,r,a,u){Pe=i;var y=0;do{if(qo&&(Bo=null),ml=0,qo=!1,25<=y)throw Error(s(301));if(y+=1,Dt=it=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}W.H=Dy,_=r(a,u)}while(qo);return _}function iI(){var i=W.H,r=i.useState()[0];return r=typeof r.then=="function"?pl(r):r,i=i.useState()[0],(it!==null?it.memoizedState:null)!==i&&(Pe.flags|=1024),r}function Yf(){var i=uc!==0;return uc=0,i}function Jf(i,r,a){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~a}function jf(i){if(lc){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}lc=!1}Wi=0,Dt=it=Pe=null,qo=!1,ml=uc=0,Bo=null}function hn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?Pe.memoizedState=Dt=i:Dt=Dt.next=i,Dt}function Ct(){if(it===null){var i=Pe.alternate;i=i!==null?i.memoizedState:null}else i=it.next;var r=Dt===null?Pe.memoizedState:Dt.next;if(r!==null)Dt=r,it=i;else{if(i===null)throw Pe.alternate===null?Error(s(467)):Error(s(310));it=i,i={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Dt===null?Pe.memoizedState=Dt=i:Dt=Dt.next=i}return Dt}function cc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pl(i){var r=ml;return ml+=1,Bo===null&&(Bo=[]),i=Bg(Bo,i,r),r=Pe,(Dt===null?r.memoizedState:Dt.next)===null&&(r=r.alternate,W.H=r===null||r.memoizedState===null?My:rh),i}function dc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return pl(i);if(i.$$typeof===Q)return en(i)}throw Error(s(438,String(i)))}function Kf(i){var r=null,a=Pe.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var u=Pe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=cc(),Pe.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(i),u=0;u<i;u++)a[u]=V;return r.index++,a}function Zi(i,r){return typeof r=="function"?r(i):r}function fc(i){var r=Ct();return $f(r,it,i)}function $f(i,r,a){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var y=i.baseQueue,_=u.pending;if(_!==null){if(y!==null){var C=y.next;y.next=_.next,_.next=C}r.baseQueue=y=_,u.pending=null}if(_=i.baseState,y===null)i.memoizedState=_;else{r=y.next;var b=C=null,U=null,J=r,Z=!1;do{var se=J.lane&-536870913;if(se!==J.lane?(qe&se)===se:(Wi&se)===se){var j=J.revertLane;if(j===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),se===Vo&&(Z=!0);else if((Wi&j)===j){J=J.next,j===Vo&&(Z=!0);continue}else se={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},U===null?(b=U=se,C=_):U=U.next=se,Pe.lanes|=j,Gs|=j;se=J.action,Jr&&a(_,se),_=J.hasEagerState?J.eagerState:a(_,se)}else j={lane:se,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},U===null?(b=U=j,C=_):U=U.next=j,Pe.lanes|=se,Gs|=se;J=J.next}while(J!==null&&J!==r);if(U===null?C=_:U.next=b,!In(_,i.memoizedState)&&(Pt=!0,Z&&(a=ko,a!==null)))throw a;i.memoizedState=_,i.baseState=C,i.baseQueue=U,u.lastRenderedState=_}return y===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function Qf(i){var r=Ct(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var u=a.dispatch,y=a.pending,_=r.memoizedState;if(y!==null){a.pending=null;var C=y=y.next;do _=i(_,C.action),C=C.next;while(C!==y);In(_,r.memoizedState)||(Pt=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),a.lastRenderedState=_}return[_,u]}function Xg(i,r,a){var u=Pe,y=Ct(),_=Ge;if(_){if(a===void 0)throw Error(s(407));a=a()}else a=r();var C=!In((it||y).memoizedState,a);if(C&&(y.memoizedState=a,Pt=!0),y=y.queue,Zf(ey.bind(null,u,y,i),[i]),y.getSnapshot!==r||C||Dt!==null&&Dt.memoizedState.tag&1){if(u.flags|=2048,Fo(9,{destroy:void 0},Zg.bind(null,u,y,a,r),null),ot===null)throw Error(s(349));_||(Wi&127)!==0||Wg(u,r,a)}return a}function Wg(i,r,a){i.flags|=16384,i={getSnapshot:r,value:a},r=Pe.updateQueue,r===null?(r=cc(),Pe.updateQueue=r,r.stores=[i]):(a=r.stores,a===null?r.stores=[i]:a.push(i))}function Zg(i,r,a,u){r.value=a,r.getSnapshot=u,ty(r)&&ny(i)}function ey(i,r,a){return a(function(){ty(r)&&ny(i)})}function ty(i){var r=i.getSnapshot;i=i.value;try{var a=r();return!In(i,a)}catch{return!0}}function ny(i){var r=Lr(i,2);r!==null&&En(r,i,2)}function Xf(i){var r=hn();if(typeof i=="function"){var a=i;if(i=a(),Jr){Pn(!0);try{a()}finally{Pn(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:i},r}function iy(i,r,a,u){return i.baseState=a,$f(i,it,typeof u=="function"?u:Zi)}function sI(i,r,a,u,y){if(pc(i))throw Error(s(485));if(i=r.action,i!==null){var _={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){_.listeners.push(C)}};W.T!==null?a(!0):_.isTransition=!1,u(_),a=r.pending,a===null?(_.next=r.pending=_,sy(r,_)):(_.next=a.next,r.pending=a.next=_)}}function sy(i,r){var a=r.action,u=r.payload,y=i.state;if(r.isTransition){var _=W.T,C={};W.T=C;try{var b=a(y,u),U=W.S;U!==null&&U(C,b),ry(i,r,b)}catch(J){Wf(i,r,J)}finally{_!==null&&C.types!==null&&(_.types=C.types),W.T=_}}else try{_=a(y,u),ry(i,r,_)}catch(J){Wf(i,r,J)}}function ry(i,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){oy(i,r,u)},function(u){return Wf(i,r,u)}):oy(i,r,a)}function oy(i,r,a){r.status="fulfilled",r.value=a,ay(r),i.state=a,r=i.pending,r!==null&&(a=r.next,a===r?i.pending=null:(a=a.next,r.next=a,sy(i,a)))}function Wf(i,r,a){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=a,ay(r),r=r.next;while(r!==u)}i.action=null}function ay(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function ly(i,r){return r}function uy(i,r){if(Ge){var a=ot.formState;if(a!==null){e:{var u=Pe;if(Ge){if(ut){t:{for(var y=ut,_=zn;y.nodeType!==8;){if(!_){y=null;break t}if(y=Gn(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){ut=Gn(y.nextSibling),u=y.data==="F!";break e}}ks(u)}u=!1}u&&(r=a[0])}}return a=hn(),a.memoizedState=a.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ly,lastRenderedState:r},a.queue=u,a=wy.bind(null,Pe,u),u.dispatch=a,u=Xf(!1),_=sh.bind(null,Pe,!1,u.queue),u=hn(),y={state:r,dispatch:null,action:i,pending:null},u.queue=y,a=sI.bind(null,Pe,y,_,a),y.dispatch=a,u.memoizedState=i,[r,a,!1]}function cy(i){var r=Ct();return dy(r,it,i)}function dy(i,r,a){if(r=$f(i,r,ly)[0],i=fc(Zi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=pl(r)}catch(C){throw C===Uo?nc:C}else u=r;r=Ct();var y=r.queue,_=y.dispatch;return a!==r.memoizedState&&(Pe.flags|=2048,Fo(9,{destroy:void 0},rI.bind(null,y,a),null)),[u,_,i]}function rI(i,r){i.action=r}function fy(i){var r=Ct(),a=it;if(a!==null)return dy(r,a,i);Ct(),r=r.memoizedState,a=Ct();var u=a.queue.dispatch;return a.memoizedState=i,[r,u,!1]}function Fo(i,r,a,u){return i={tag:i,create:a,deps:u,inst:r,next:null},r=Pe.updateQueue,r===null&&(r=cc(),Pe.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=i.next=i:(u=a.next,a.next=i,i.next=u,r.lastEffect=i),i}function hy(){return Ct().memoizedState}function hc(i,r,a,u){var y=hn();Pe.flags|=i,y.memoizedState=Fo(1|r,{destroy:void 0},a,u===void 0?null:u)}function mc(i,r,a,u){var y=Ct();u=u===void 0?null:u;var _=y.memoizedState.inst;it!==null&&u!==null&&Hf(u,it.memoizedState.deps)?y.memoizedState=Fo(r,_,a,u):(Pe.flags|=i,y.memoizedState=Fo(1|r,_,a,u))}function my(i,r){hc(8390656,8,i,r)}function Zf(i,r){mc(2048,8,i,r)}function oI(i){Pe.flags|=4;var r=Pe.updateQueue;if(r===null)r=cc(),Pe.updateQueue=r,r.events=[i];else{var a=r.events;a===null?r.events=[i]:a.push(i)}}function py(i){var r=Ct().memoizedState;return oI({ref:r,nextImpl:i}),function(){if((Xe&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function gy(i,r){return mc(4,2,i,r)}function yy(i,r){return mc(4,4,i,r)}function _y(i,r){if(typeof r=="function"){i=i();var a=r(i);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function vy(i,r,a){a=a!=null?a.concat([i]):null,mc(4,4,_y.bind(null,r,i),a)}function eh(){}function Ty(i,r){var a=Ct();r=r===void 0?null:r;var u=a.memoizedState;return r!==null&&Hf(r,u[1])?u[0]:(a.memoizedState=[i,r],i)}function Ey(i,r){var a=Ct();r=r===void 0?null:r;var u=a.memoizedState;if(r!==null&&Hf(r,u[1]))return u[0];if(u=i(),Jr){Pn(!0);try{i()}finally{Pn(!1)}}return a.memoizedState=[u,r],u}function th(i,r,a){return a===void 0||(Wi&1073741824)!==0&&(qe&261930)===0?i.memoizedState=r:(i.memoizedState=a,i=S_(),Pe.lanes|=i,Gs|=i,a)}function Sy(i,r,a,u){return In(a,r)?a:Oo.current!==null?(i=th(i,a,u),In(i,r)||(Pt=!0),i):(Wi&42)===0||(Wi&1073741824)!==0&&(qe&261930)===0?(Pt=!0,i.memoizedState=a):(i=S_(),Pe.lanes|=i,Gs|=i,r)}function Ay(i,r,a,u,y){var _=de.p;de.p=_!==0&&8>_?_:8;var C=W.T,b={};W.T=b,sh(i,!1,r,a);try{var U=y(),J=W.S;if(J!==null&&J(b,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var Z=tI(U,u);gl(i,r,Z,Mn(i))}else gl(i,r,u,Mn(i))}catch(se){gl(i,r,{then:function(){},status:"rejected",reason:se},Mn())}finally{de.p=_,C!==null&&b.types!==null&&(C.types=b.types),W.T=C}}function aI(){}function nh(i,r,a,u){if(i.tag!==5)throw Error(s(476));var y=Cy(i).queue;Ay(i,y,r,Ee,a===null?aI:function(){return Iy(i),a(u)})}function Cy(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:Ee},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:a},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function Iy(i){var r=Cy(i);r.next===null&&(r=i.alternate.memoizedState),gl(i,r.next.queue,{},Mn())}function ih(){return en(Pl)}function by(){return Ct().memoizedState}function xy(){return Ct().memoizedState}function lI(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var a=Mn();i=Os(a);var u=qs(r,i,a);u!==null&&(En(u,r,a),dl(u,r,a)),r={cache:Df()},i.payload=r;return}r=r.return}}function uI(i,r,a){var u=Mn();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},pc(i)?Ry(r,a):(a=Ef(i,r,a,u),a!==null&&(En(a,i,u),Ny(a,r,u)))}function wy(i,r,a){var u=Mn();gl(i,r,a,u)}function gl(i,r,a,u){var y={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(pc(i))Ry(r,y);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var C=r.lastRenderedState,b=_(C,a);if(y.hasEagerState=!0,y.eagerState=b,In(b,C))return $u(i,r,y,0),ot===null&&Ku(),!1}catch{}finally{}if(a=Ef(i,r,y,u),a!==null)return En(a,i,u),Ny(a,r,u),!0}return!1}function sh(i,r,a,u){if(u={lane:2,revertLane:Uh(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},pc(i)){if(r)throw Error(s(479))}else r=Ef(i,a,u,2),r!==null&&En(r,i,2)}function pc(i){var r=i.alternate;return i===Pe||r!==null&&r===Pe}function Ry(i,r){qo=lc=!0;var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}function Ny(i,r,a){if((a&4194048)!==0){var u=r.lanes;u&=i.pendingLanes,a|=u,r.lanes=a,Oa(i,a)}}var yl={readContext:en,use:dc,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt};yl.useEffectEvent=gt;var My={readContext:en,use:dc,useCallback:function(i,r){return hn().memoizedState=[i,r===void 0?null:r],i},useContext:en,useEffect:my,useImperativeHandle:function(i,r,a){a=a!=null?a.concat([i]):null,hc(4194308,4,_y.bind(null,r,i),a)},useLayoutEffect:function(i,r){return hc(4194308,4,i,r)},useInsertionEffect:function(i,r){hc(4,2,i,r)},useMemo:function(i,r){var a=hn();r=r===void 0?null:r;var u=i();if(Jr){Pn(!0);try{i()}finally{Pn(!1)}}return a.memoizedState=[u,r],u},useReducer:function(i,r,a){var u=hn();if(a!==void 0){var y=a(r);if(Jr){Pn(!0);try{a(r)}finally{Pn(!1)}}}else y=r;return u.memoizedState=u.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},u.queue=i,i=i.dispatch=uI.bind(null,Pe,i),[u.memoizedState,i]},useRef:function(i){var r=hn();return i={current:i},r.memoizedState=i},useState:function(i){i=Xf(i);var r=i.queue,a=wy.bind(null,Pe,r);return r.dispatch=a,[i.memoizedState,a]},useDebugValue:eh,useDeferredValue:function(i,r){var a=hn();return th(a,i,r)},useTransition:function(){var i=Xf(!1);return i=Ay.bind(null,Pe,i.queue,!0,!1),hn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,a){var u=Pe,y=hn();if(Ge){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),ot===null)throw Error(s(349));(qe&127)!==0||Wg(u,r,a)}y.memoizedState=a;var _={value:a,getSnapshot:r};return y.queue=_,my(ey.bind(null,u,_,i),[i]),u.flags|=2048,Fo(9,{destroy:void 0},Zg.bind(null,u,_,a,r),null),a},useId:function(){var i=hn(),r=ot.identifierPrefix;if(Ge){var a=Mi,u=Ni;a=(u&~(1<<32-Et(u)-1)).toString(32)+a,r="_"+r+"R_"+a,a=uc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=nI++,r="_"+r+"r_"+a.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:ih,useFormState:uy,useActionState:uy,useOptimistic:function(i){var r=hn();r.memoizedState=r.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=sh.bind(null,Pe,!0,a),a.dispatch=r,[i,r]},useMemoCache:Kf,useCacheRefresh:function(){return hn().memoizedState=lI.bind(null,Pe)},useEffectEvent:function(i){var r=hn(),a={impl:i};return r.memoizedState=a,function(){if((Xe&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},rh={readContext:en,use:dc,useCallback:Ty,useContext:en,useEffect:Zf,useImperativeHandle:vy,useInsertionEffect:gy,useLayoutEffect:yy,useMemo:Ey,useReducer:fc,useRef:hy,useState:function(){return fc(Zi)},useDebugValue:eh,useDeferredValue:function(i,r){var a=Ct();return Sy(a,it.memoizedState,i,r)},useTransition:function(){var i=fc(Zi)[0],r=Ct().memoizedState;return[typeof i=="boolean"?i:pl(i),r]},useSyncExternalStore:Xg,useId:by,useHostTransitionStatus:ih,useFormState:cy,useActionState:cy,useOptimistic:function(i,r){var a=Ct();return iy(a,it,i,r)},useMemoCache:Kf,useCacheRefresh:xy};rh.useEffectEvent=py;var Dy={readContext:en,use:dc,useCallback:Ty,useContext:en,useEffect:Zf,useImperativeHandle:vy,useInsertionEffect:gy,useLayoutEffect:yy,useMemo:Ey,useReducer:Qf,useRef:hy,useState:function(){return Qf(Zi)},useDebugValue:eh,useDeferredValue:function(i,r){var a=Ct();return it===null?th(a,i,r):Sy(a,it.memoizedState,i,r)},useTransition:function(){var i=Qf(Zi)[0],r=Ct().memoizedState;return[typeof i=="boolean"?i:pl(i),r]},useSyncExternalStore:Xg,useId:by,useHostTransitionStatus:ih,useFormState:fy,useActionState:fy,useOptimistic:function(i,r){var a=Ct();return it!==null?iy(a,it,i,r):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:Kf,useCacheRefresh:xy};Dy.useEffectEvent=py;function oh(i,r,a,u){r=i.memoizedState,a=a(u,r),a=a==null?r:E({},r,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var ah={enqueueSetState:function(i,r,a){i=i._reactInternals;var u=Mn(),y=Os(u);y.payload=r,a!=null&&(y.callback=a),r=qs(i,y,u),r!==null&&(En(r,i,u),dl(r,i,u))},enqueueReplaceState:function(i,r,a){i=i._reactInternals;var u=Mn(),y=Os(u);y.tag=1,y.payload=r,a!=null&&(y.callback=a),r=qs(i,y,u),r!==null&&(En(r,i,u),dl(r,i,u))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var a=Mn(),u=Os(a);u.tag=2,r!=null&&(u.callback=r),r=qs(i,u,a),r!==null&&(En(r,i,a),dl(r,i,a))}};function Py(i,r,a,u,y,_,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,_,C):r.prototype&&r.prototype.isPureReactComponent?!il(a,u)||!il(y,_):!0}function Vy(i,r,a,u){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,u),r.state!==i&&ah.enqueueReplaceState(r,r.state,null)}function jr(i,r){var a=r;if("ref"in r){a={};for(var u in r)u!=="ref"&&(a[u]=r[u])}if(i=i.defaultProps){a===r&&(a=E({},a));for(var y in i)a[y]===void 0&&(a[y]=i[y])}return a}function ky(i){ju(i)}function Uy(i){console.error(i)}function Ly(i){ju(i)}function gc(i,r){try{var a=i.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function Oy(i,r,a){try{var u=i.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function lh(i,r,a){return a=Os(a),a.tag=3,a.payload={element:null},a.callback=function(){gc(i,r)},a}function qy(i){return i=Os(i),i.tag=3,i}function By(i,r,a,u){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var _=u.value;i.payload=function(){return y(_)},i.callback=function(){Oy(r,a,u)}}var C=a.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(i.callback=function(){Oy(r,a,u),typeof y!="function"&&(Ys===null?Ys=new Set([this]):Ys.add(this));var b=u.stack;this.componentDidCatch(u.value,{componentStack:b!==null?b:""})})}function cI(i,r,a,u,y){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=a.alternate,r!==null&&Po(r,a,y,!0),a=xn.current,a!==null){switch(a.tag){case 31:case 13:return Hn===null?wc():a.alternate===null&&yt===0&&(yt=3),a.flags&=-257,a.flags|=65536,a.lanes=y,u===ic?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([u]):r.add(u),Ph(i,u,y)),!1;case 22:return a.flags|=65536,u===ic?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([u]):a.add(u)),Ph(i,u,y)),!1}throw Error(s(435,a.tag))}return Ph(i,u,y),wc(),!1}if(Ge)return r=xn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,u!==xf&&(i=Error(s(422),{cause:u}),ol(qn(i,a)))):(u!==xf&&(r=Error(s(423),{cause:u}),ol(qn(r,a))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,u=qn(u,a),y=lh(i.stateNode,u,y),Of(i,y),yt!==4&&(yt=2)),!1;var _=Error(s(520),{cause:u});if(_=qn(_,a),Il===null?Il=[_]:Il.push(_),yt!==4&&(yt=2),r===null)return!0;u=qn(u,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,i=y&-y,a.lanes|=i,i=lh(a.stateNode,u,i),Of(a,i),!1;case 1:if(r=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ys===null||!Ys.has(_))))return a.flags|=65536,y&=-y,a.lanes|=y,y=qy(y),By(y,i,a,u),Of(a,y),!1}a=a.return}while(a!==null);return!1}var uh=Error(s(461)),Pt=!1;function tn(i,r,a,u){r.child=i===null?Gg(r,null,a,u):Yr(r,i.child,a,u)}function Fy(i,r,a,u,y){a=a.render;var _=r.ref;if("ref"in u){var C={};for(var b in u)b!=="ref"&&(C[b]=u[b])}else C=u;return Fr(r),u=Gf(i,r,a,C,_,y),b=Yf(),i!==null&&!Pt?(Jf(i,r,y),es(i,r,y)):(Ge&&b&&If(r),r.flags|=1,tn(i,r,u,y),r.child)}function zy(i,r,a,u,y){if(i===null){var _=a.type;return typeof _=="function"&&!Sf(_)&&_.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=_,Hy(i,r,_,u,y)):(i=Xu(a.type,null,u,r,r.mode,y),i.ref=r.ref,i.return=r,r.child=i)}if(_=i.child,!yh(i,y)){var C=_.memoizedProps;if(a=a.compare,a=a!==null?a:il,a(C,u)&&i.ref===r.ref)return es(i,r,y)}return r.flags|=1,i=Ki(_,u),i.ref=r.ref,i.return=r,r.child=i}function Hy(i,r,a,u,y){if(i!==null){var _=i.memoizedProps;if(il(_,u)&&i.ref===r.ref)if(Pt=!1,r.pendingProps=u=_,yh(i,y))(i.flags&131072)!==0&&(Pt=!0);else return r.lanes=i.lanes,es(i,r,y)}return ch(i,r,a,u,y)}function Gy(i,r,a,u){var y=u.children,_=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|a:a,i!==null){for(u=r.child=i.child,y=0;u!==null;)y=y|u.lanes|u.childLanes,u=u.sibling;u=y&~_}else u=0,r.child=null;return Yy(i,r,_,a,u)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&tc(r,_!==null?_.cachePool:null),_!==null?jg(r,_):Bf(),Kg(r);else return u=r.lanes=536870912,Yy(i,r,_!==null?_.baseLanes|a:a,a,u)}else _!==null?(tc(r,_.cachePool),jg(r,_),Fs(),r.memoizedState=null):(i!==null&&tc(r,null),Bf(),Fs());return tn(i,r,y,a),r.child}function _l(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Yy(i,r,a,u,y){var _=Vf();return _=_===null?null:{parent:Mt._currentValue,pool:_},r.memoizedState={baseLanes:a,cachePool:_},i!==null&&tc(r,null),Bf(),Kg(r),i!==null&&Po(i,r,u,!0),r.childLanes=y,null}function yc(i,r){return r=vc({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function Jy(i,r,a){return Yr(r,i.child,null,a),i=yc(r,r.pendingProps),i.flags|=2,wn(r),r.memoizedState=null,i}function dI(i,r,a){var u=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(Ge){if(u.mode==="hidden")return i=yc(r,u),r.lanes=536870912,_l(null,i);if(zf(r),(i=ut)?(i=sv(i,zn),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ps!==null?{id:Ni,overflow:Mi}:null,retryLane:536870912,hydrationErrors:null},a=Rg(i),a.return=r,r.child=a,Zt=r,ut=null)):i=null,i===null)throw ks(r);return r.lanes=536870912,null}return yc(r,u)}var _=i.memoizedState;if(_!==null){var C=_.dehydrated;if(zf(r),y)if(r.flags&256)r.flags&=-257,r=Jy(i,r,a);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(Pt||Po(i,r,a,!1),y=(a&i.childLanes)!==0,Pt||y){if(u=ot,u!==null&&(C=qa(u,a),C!==0&&C!==_.retryLane))throw _.retryLane=C,Lr(i,C),En(u,i,C),uh;wc(),r=Jy(i,r,a)}else i=_.treeContext,ut=Gn(C.nextSibling),Zt=r,Ge=!0,Vs=null,zn=!1,i!==null&&Dg(r,i),r=yc(r,u),r.flags|=4096;return r}return i=Ki(i.child,{mode:u.mode,children:u.children}),i.ref=r.ref,r.child=i,i.return=r,i}function _c(i,r){var a=r.ref;if(a===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(r.flags|=4194816)}}function ch(i,r,a,u,y){return Fr(r),a=Gf(i,r,a,u,void 0,y),u=Yf(),i!==null&&!Pt?(Jf(i,r,y),es(i,r,y)):(Ge&&u&&If(r),r.flags|=1,tn(i,r,a,y),r.child)}function jy(i,r,a,u,y,_){return Fr(r),r.updateQueue=null,a=Qg(r,u,a,y),$g(i),u=Yf(),i!==null&&!Pt?(Jf(i,r,_),es(i,r,_)):(Ge&&u&&If(r),r.flags|=1,tn(i,r,a,_),r.child)}function Ky(i,r,a,u,y){if(Fr(r),r.stateNode===null){var _=Ro,C=a.contextType;typeof C=="object"&&C!==null&&(_=en(C)),_=new a(u,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=ah,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=u,_.state=r.memoizedState,_.refs={},Uf(r),C=a.contextType,_.context=typeof C=="object"&&C!==null?en(C):Ro,_.state=r.memoizedState,C=a.getDerivedStateFromProps,typeof C=="function"&&(oh(r,a,C,u),_.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(C=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),C!==_.state&&ah.enqueueReplaceState(_,_.state,null),hl(r,u,_,y),fl(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(i===null){_=r.stateNode;var b=r.memoizedProps,U=jr(a,b);_.props=U;var J=_.context,Z=a.contextType;C=Ro,typeof Z=="object"&&Z!==null&&(C=en(Z));var se=a.getDerivedStateFromProps;Z=typeof se=="function"||typeof _.getSnapshotBeforeUpdate=="function",b=r.pendingProps!==b,Z||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(b||J!==C)&&Vy(r,_,u,C),Ls=!1;var j=r.memoizedState;_.state=j,hl(r,u,_,y),fl(),J=r.memoizedState,b||j!==J||Ls?(typeof se=="function"&&(oh(r,a,se,u),J=r.memoizedState),(U=Ls||Py(r,a,U,u,j,J,C))?(Z||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=J),_.props=u,_.state=J,_.context=C,u=U):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{_=r.stateNode,Lf(i,r),C=r.memoizedProps,Z=jr(a,C),_.props=Z,se=r.pendingProps,j=_.context,J=a.contextType,U=Ro,typeof J=="object"&&J!==null&&(U=en(J)),b=a.getDerivedStateFromProps,(J=typeof b=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C!==se||j!==U)&&Vy(r,_,u,U),Ls=!1,j=r.memoizedState,_.state=j,hl(r,u,_,y),fl();var X=r.memoizedState;C!==se||j!==X||Ls||i!==null&&i.dependencies!==null&&Zu(i.dependencies)?(typeof b=="function"&&(oh(r,a,b,u),X=r.memoizedState),(Z=Ls||Py(r,a,Z,u,j,X,U)||i!==null&&i.dependencies!==null&&Zu(i.dependencies))?(J||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,X,U),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,X,U)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||C===i.memoizedProps&&j===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&j===i.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=X),_.props=u,_.state=X,_.context=U,u=Z):(typeof _.componentDidUpdate!="function"||C===i.memoizedProps&&j===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&j===i.memoizedState||(r.flags|=1024),u=!1)}return _=u,_c(i,r),u=(r.flags&128)!==0,_||u?(_=r.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,i!==null&&u?(r.child=Yr(r,i.child,null,y),r.child=Yr(r,null,a,y)):tn(i,r,a,y),r.memoizedState=_.state,i=r.child):i=es(i,r,y),i}function $y(i,r,a,u){return qr(),r.flags|=256,tn(i,r,a,u),r.child}var dh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fh(i){return{baseLanes:i,cachePool:Og()}}function hh(i,r,a){return i=i!==null?i.childLanes&~a:0,r&&(i|=Nn),i}function Qy(i,r,a){var u=r.pendingProps,y=!1,_=(r.flags&128)!==0,C;if((C=_)||(C=i!==null&&i.memoizedState===null?!1:(At.current&2)!==0),C&&(y=!0,r.flags&=-129),C=(r.flags&32)!==0,r.flags&=-33,i===null){if(Ge){if(y?Bs(r):Fs(),(i=ut)?(i=sv(i,zn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ps!==null?{id:Ni,overflow:Mi}:null,retryLane:536870912,hydrationErrors:null},a=Rg(i),a.return=r,r.child=a,Zt=r,ut=null)):i=null,i===null)throw ks(r);return $h(i)?r.lanes=32:r.lanes=536870912,null}var b=u.children;return u=u.fallback,y?(Fs(),y=r.mode,b=vc({mode:"hidden",children:b},y),u=Or(u,y,a,null),b.return=r,u.return=r,b.sibling=u,r.child=b,u=r.child,u.memoizedState=fh(a),u.childLanes=hh(i,C,a),r.memoizedState=dh,_l(null,u)):(Bs(r),mh(r,b))}var U=i.memoizedState;if(U!==null&&(b=U.dehydrated,b!==null)){if(_)r.flags&256?(Bs(r),r.flags&=-257,r=ph(i,r,a)):r.memoizedState!==null?(Fs(),r.child=i.child,r.flags|=128,r=null):(Fs(),b=u.fallback,y=r.mode,u=vc({mode:"visible",children:u.children},y),b=Or(b,y,a,null),b.flags|=2,u.return=r,b.return=r,u.sibling=b,r.child=u,Yr(r,i.child,null,a),u=r.child,u.memoizedState=fh(a),u.childLanes=hh(i,C,a),r.memoizedState=dh,r=_l(null,u));else if(Bs(r),$h(b)){if(C=b.nextSibling&&b.nextSibling.dataset,C)var J=C.dgst;C=J,u=Error(s(419)),u.stack="",u.digest=C,ol({value:u,source:null,stack:null}),r=ph(i,r,a)}else if(Pt||Po(i,r,a,!1),C=(a&i.childLanes)!==0,Pt||C){if(C=ot,C!==null&&(u=qa(C,a),u!==0&&u!==U.retryLane))throw U.retryLane=u,Lr(i,u),En(C,i,u),uh;Kh(b)||wc(),r=ph(i,r,a)}else Kh(b)?(r.flags|=192,r.child=i.child,r=null):(i=U.treeContext,ut=Gn(b.nextSibling),Zt=r,Ge=!0,Vs=null,zn=!1,i!==null&&Dg(r,i),r=mh(r,u.children),r.flags|=4096);return r}return y?(Fs(),b=u.fallback,y=r.mode,U=i.child,J=U.sibling,u=Ki(U,{mode:"hidden",children:u.children}),u.subtreeFlags=U.subtreeFlags&65011712,J!==null?b=Ki(J,b):(b=Or(b,y,a,null),b.flags|=2),b.return=r,u.return=r,u.sibling=b,r.child=u,_l(null,u),u=r.child,b=i.child.memoizedState,b===null?b=fh(a):(y=b.cachePool,y!==null?(U=Mt._currentValue,y=y.parent!==U?{parent:U,pool:U}:y):y=Og(),b={baseLanes:b.baseLanes|a,cachePool:y}),u.memoizedState=b,u.childLanes=hh(i,C,a),r.memoizedState=dh,_l(i.child,u)):(Bs(r),a=i.child,i=a.sibling,a=Ki(a,{mode:"visible",children:u.children}),a.return=r,a.sibling=null,i!==null&&(C=r.deletions,C===null?(r.deletions=[i],r.flags|=16):C.push(i)),r.child=a,r.memoizedState=null,a)}function mh(i,r){return r=vc({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function vc(i,r){return i=bn(22,i,null,r),i.lanes=0,i}function ph(i,r,a){return Yr(r,i.child,null,a),i=mh(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function Xy(i,r,a){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r),Nf(i.return,r,a)}function gh(i,r,a,u,y,_){var C=i.memoizedState;C===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:y,treeForkCount:_}:(C.isBackwards=r,C.rendering=null,C.renderingStartTime=0,C.last=u,C.tail=a,C.tailMode=y,C.treeForkCount=_)}function Wy(i,r,a){var u=r.pendingProps,y=u.revealOrder,_=u.tail;u=u.children;var C=At.current,b=(C&2)!==0;if(b?(C=C&1|2,r.flags|=128):C&=1,oe(At,C),tn(i,r,u,a),u=Ge?rl:0,!b&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Xy(i,a,r);else if(i.tag===19)Xy(i,a,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(a=r.child,y=null;a!==null;)i=a.alternate,i!==null&&ac(i)===null&&(y=a),a=a.sibling;a=y,a===null?(y=r.child,r.child=null):(y=a.sibling,a.sibling=null),gh(r,!1,y,a,_,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=r.child,r.child=null;y!==null;){if(i=y.alternate,i!==null&&ac(i)===null){r.child=y;break}i=y.sibling,y.sibling=a,a=y,y=i}gh(r,!0,a,null,_,u);break;case"together":gh(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function es(i,r,a){if(i!==null&&(r.dependencies=i.dependencies),Gs|=r.lanes,(a&r.childLanes)===0)if(i!==null){if(Po(i,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,a=Ki(i,i.pendingProps),r.child=a,a.return=r;i.sibling!==null;)i=i.sibling,a=a.sibling=Ki(i,i.pendingProps),a.return=r;a.sibling=null}return r.child}function yh(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Zu(i)))}function fI(i,r,a){switch(r.tag){case 3:vt(r,r.stateNode.containerInfo),Us(r,Mt,i.memoizedState.cache),qr();break;case 27:case 5:Hi(r);break;case 4:vt(r,r.stateNode.containerInfo);break;case 10:Us(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,zf(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Bs(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Qy(i,r,a):(Bs(r),i=es(i,r,a),i!==null?i.sibling:null);Bs(r);break;case 19:var y=(i.flags&128)!==0;if(u=(a&r.childLanes)!==0,u||(Po(i,r,a,!1),u=(a&r.childLanes)!==0),y){if(u)return Wy(i,r,a);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),oe(At,At.current),u)break;return null;case 22:return r.lanes=0,Gy(i,r,a,r.pendingProps);case 24:Us(r,Mt,i.memoizedState.cache)}return es(i,r,a)}function Zy(i,r,a){if(i!==null)if(i.memoizedProps!==r.pendingProps)Pt=!0;else{if(!yh(i,a)&&(r.flags&128)===0)return Pt=!1,fI(i,r,a);Pt=(i.flags&131072)!==0}else Pt=!1,Ge&&(r.flags&1048576)!==0&&Mg(r,rl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var u=r.pendingProps;if(i=Hr(r.elementType),r.type=i,typeof i=="function")Sf(i)?(u=jr(i,u),r.tag=1,r=Ky(null,r,i,u,a)):(r.tag=0,r=ch(null,r,i,u,a));else{if(i!=null){var y=i.$$typeof;if(y===F){r.tag=11,r=Fy(null,r,i,u,a);break e}else if(y===N){r.tag=14,r=zy(null,r,i,u,a);break e}}throw r=Ye(i)||i,Error(s(306,r,""))}}return r;case 0:return ch(i,r,r.type,r.pendingProps,a);case 1:return u=r.type,y=jr(u,r.pendingProps),Ky(i,r,u,y,a);case 3:e:{if(vt(r,r.stateNode.containerInfo),i===null)throw Error(s(387));u=r.pendingProps;var _=r.memoizedState;y=_.element,Lf(i,r),hl(r,u,null,a);var C=r.memoizedState;if(u=C.cache,Us(r,Mt,u),u!==_.cache&&Mf(r,[Mt],a,!0),fl(),u=C.element,_.isDehydrated)if(_={element:u,isDehydrated:!1,cache:C.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=$y(i,r,u,a);break e}else if(u!==y){y=qn(Error(s(424)),r),ol(y),r=$y(i,r,u,a);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ut=Gn(i.firstChild),Zt=r,Ge=!0,Vs=null,zn=!0,a=Gg(r,null,u,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(qr(),u===y){r=es(i,r,a);break e}tn(i,r,u,a)}r=r.child}return r;case 26:return _c(i,r),i===null?(a=cv(r.type,null,r.pendingProps,null))?r.memoizedState=a:Ge||(a=r.type,i=r.pendingProps,u=kc(Re.current).createElement(a),u[wt]=r,u[Gt]=i,nn(u,a,i),Rt(u),r.stateNode=u):r.memoizedState=cv(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return Hi(r),i===null&&Ge&&(u=r.stateNode=av(r.type,r.pendingProps,Re.current),Zt=r,zn=!0,y=ut,$s(r.type)?(Qh=y,ut=Gn(u.firstChild)):ut=y),tn(i,r,r.pendingProps.children,a),_c(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&Ge&&((y=u=ut)&&(u=zI(u,r.type,r.pendingProps,zn),u!==null?(r.stateNode=u,Zt=r,ut=Gn(u.firstChild),zn=!1,y=!0):y=!1),y||ks(r)),Hi(r),y=r.type,_=r.pendingProps,C=i!==null?i.memoizedProps:null,u=_.children,Yh(y,_)?u=null:C!==null&&Yh(y,C)&&(r.flags|=32),r.memoizedState!==null&&(y=Gf(i,r,iI,null,null,a),Pl._currentValue=y),_c(i,r),tn(i,r,u,a),r.child;case 6:return i===null&&Ge&&((i=a=ut)&&(a=HI(a,r.pendingProps,zn),a!==null?(r.stateNode=a,Zt=r,ut=null,i=!0):i=!1),i||ks(r)),null;case 13:return Qy(i,r,a);case 4:return vt(r,r.stateNode.containerInfo),u=r.pendingProps,i===null?r.child=Yr(r,null,u,a):tn(i,r,u,a),r.child;case 11:return Fy(i,r,r.type,r.pendingProps,a);case 7:return tn(i,r,r.pendingProps,a),r.child;case 8:return tn(i,r,r.pendingProps.children,a),r.child;case 12:return tn(i,r,r.pendingProps.children,a),r.child;case 10:return u=r.pendingProps,Us(r,r.type,u.value),tn(i,r,u.children,a),r.child;case 9:return y=r.type._context,u=r.pendingProps.children,Fr(r),y=en(y),u=u(y),r.flags|=1,tn(i,r,u,a),r.child;case 14:return zy(i,r,r.type,r.pendingProps,a);case 15:return Hy(i,r,r.type,r.pendingProps,a);case 19:return Wy(i,r,a);case 31:return dI(i,r,a);case 22:return Gy(i,r,a,r.pendingProps);case 24:return Fr(r),u=en(Mt),i===null?(y=Vf(),y===null&&(y=ot,_=Df(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=a),y=_),r.memoizedState={parent:u,cache:y},Uf(r),Us(r,Mt,y)):((i.lanes&a)!==0&&(Lf(i,r),hl(r,null,null,a),fl()),y=i.memoizedState,_=r.memoizedState,y.parent!==u?(y={parent:u,cache:u},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Us(r,Mt,u)):(u=_.cache,Us(r,Mt,u),u!==y.cache&&Mf(r,[Mt],a,!0))),tn(i,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function ts(i){i.flags|=4}function _h(i,r,a,u,y){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(b_())i.flags|=8192;else throw Gr=ic,kf}else i.flags&=-16777217}function e_(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!pv(r))if(b_())i.flags|=8192;else throw Gr=ic,kf}function Tc(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?bu():536870912,i.lanes|=r,Yo|=r)}function vl(i,r){if(!Ge)switch(i.tailMode){case"hidden":r=i.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function ct(i){var r=i.alternate!==null&&i.alternate.child===i.child,a=0,u=0;if(r)for(var y=i.child;y!==null;)a|=y.lanes|y.childLanes,u|=y.subtreeFlags&65011712,u|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)a|=y.lanes|y.childLanes,u|=y.subtreeFlags,u|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=u,i.childLanes=a,r}function hI(i,r,a){var u=r.pendingProps;switch(bf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(r),null;case 1:return ct(r),null;case 3:return a=r.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),Xi(Mt),at(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Do(r)?ts(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,wf())),ct(r),null;case 26:var y=r.type,_=r.memoizedState;return i===null?(ts(r),_!==null?(ct(r),e_(r,_)):(ct(r),_h(r,y,null,u,a))):_?_!==i.memoizedState?(ts(r),ct(r),e_(r,_)):(ct(r),r.flags&=-16777217):(i=i.memoizedProps,i!==u&&ts(r),ct(r),_h(r,y,i,u,a)),null;case 27:if(ve(r),a=Re.current,y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&ts(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return ct(r),null}i=he.current,Do(r)?Pg(r):(i=av(y,u,a),r.stateNode=i,ts(r))}return ct(r),null;case 5:if(ve(r),y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&ts(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return ct(r),null}if(_=he.current,Do(r))Pg(r);else{var C=kc(Re.current);switch(_){case 1:_=C.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=C.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=C.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof u.is=="string"?C.createElement("select",{is:u.is}):C.createElement("select"),u.multiple?_.multiple=!0:u.size&&(_.size=u.size);break;default:_=typeof u.is=="string"?C.createElement(y,{is:u.is}):C.createElement(y)}}_[wt]=r,_[Gt]=u;e:for(C=r.child;C!==null;){if(C.tag===5||C.tag===6)_.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===r)break e;for(;C.sibling===null;){if(C.return===null||C.return===r)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}r.stateNode=_;e:switch(nn(_,y,u),y){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ts(r)}}return ct(r),_h(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,a),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==u&&ts(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(s(166));if(i=Re.current,Do(r)){if(i=r.stateNode,a=r.memoizedProps,u=null,y=Zt,y!==null)switch(y.tag){case 27:case 5:u=y.memoizedProps}i[wt]=r,i=!!(i.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||Q_(i.nodeValue,a)),i||ks(r,!0)}else i=kc(i).createTextNode(u),i[wt]=r,r.stateNode=i}return ct(r),null;case 31:if(a=r.memoizedState,i===null||i.memoizedState!==null){if(u=Do(r),a!==null){if(i===null){if(!u)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[wt]=r}else qr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ct(r),i=!1}else a=wf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return r.flags&256?(wn(r),r):(wn(r),null);if((r.flags&128)!==0)throw Error(s(558))}return ct(r),null;case 13:if(u=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=Do(r),u!==null&&u.dehydrated!==null){if(i===null){if(!y)throw Error(s(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[wt]=r}else qr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ct(r),y=!1}else y=wf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(wn(r),r):(wn(r),null)}return wn(r),(r.flags&128)!==0?(r.lanes=a,r):(a=u!==null,i=i!==null&&i.memoizedState!==null,a&&(u=r.child,y=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(y=u.alternate.memoizedState.cachePool.pool),_=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==y&&(u.flags|=2048)),a!==i&&a&&(r.child.flags|=8192),Tc(r,r.updateQueue),ct(r),null);case 4:return at(),i===null&&Bh(r.stateNode.containerInfo),ct(r),null;case 10:return Xi(r.type),ct(r),null;case 19:if(K(At),u=r.memoizedState,u===null)return ct(r),null;if(y=(r.flags&128)!==0,_=u.rendering,_===null)if(y)vl(u,!1);else{if(yt!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(_=ac(i),_!==null){for(r.flags|=128,vl(u,!1),i=_.updateQueue,r.updateQueue=i,Tc(r,i),r.subtreeFlags=0,i=a,a=r.child;a!==null;)wg(a,i),a=a.sibling;return oe(At,At.current&1|2),Ge&&$i(r,u.treeForkCount),r.child}i=i.sibling}u.tail!==null&&dn()>Ic&&(r.flags|=128,y=!0,vl(u,!1),r.lanes=4194304)}else{if(!y)if(i=ac(_),i!==null){if(r.flags|=128,y=!0,i=i.updateQueue,r.updateQueue=i,Tc(r,i),vl(u,!0),u.tail===null&&u.tailMode==="hidden"&&!_.alternate&&!Ge)return ct(r),null}else 2*dn()-u.renderingStartTime>Ic&&a!==536870912&&(r.flags|=128,y=!0,vl(u,!1),r.lanes=4194304);u.isBackwards?(_.sibling=r.child,r.child=_):(i=u.last,i!==null?i.sibling=_:r.child=_,u.last=_)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=dn(),i.sibling=null,a=At.current,oe(At,y?a&1|2:a&1),Ge&&$i(r,u.treeForkCount),i):(ct(r),null);case 22:case 23:return wn(r),Ff(),u=r.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(a&536870912)!==0&&(r.flags&128)===0&&(ct(r),r.subtreeFlags&6&&(r.flags|=8192)):ct(r),a=r.updateQueue,a!==null&&Tc(r,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==a&&(r.flags|=2048),i!==null&&K(zr),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Xi(Mt),ct(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function mI(i,r){switch(bf(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Xi(Mt),at(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return ve(r),null;case 31:if(r.memoizedState!==null){if(wn(r),r.alternate===null)throw Error(s(340));qr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(wn(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));qr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return K(At),null;case 4:return at(),null;case 10:return Xi(r.type),null;case 22:case 23:return wn(r),Ff(),i!==null&&K(zr),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return Xi(Mt),null;case 25:return null;default:return null}}function t_(i,r){switch(bf(r),r.tag){case 3:Xi(Mt),at();break;case 26:case 27:case 5:ve(r);break;case 4:at();break;case 31:r.memoizedState!==null&&wn(r);break;case 13:wn(r);break;case 19:K(At);break;case 10:Xi(r.type);break;case 22:case 23:wn(r),Ff(),i!==null&&K(zr);break;case 24:Xi(Mt)}}function Tl(i,r){try{var a=r.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var y=u.next;a=y;do{if((a.tag&i)===i){u=void 0;var _=a.create,C=a.inst;u=_(),C.destroy=u}a=a.next}while(a!==y)}}catch(b){tt(r,r.return,b)}}function zs(i,r,a){try{var u=r.updateQueue,y=u!==null?u.lastEffect:null;if(y!==null){var _=y.next;u=_;do{if((u.tag&i)===i){var C=u.inst,b=C.destroy;if(b!==void 0){C.destroy=void 0,y=r;var U=a,J=b;try{J()}catch(Z){tt(y,U,Z)}}}u=u.next}while(u!==_)}}catch(Z){tt(r,r.return,Z)}}function n_(i){var r=i.updateQueue;if(r!==null){var a=i.stateNode;try{Jg(r,a)}catch(u){tt(i,i.return,u)}}}function i_(i,r,a){a.props=jr(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(u){tt(i,r,u)}}function El(i,r){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof a=="function"?i.refCleanup=a(u):a.current=u}}catch(y){tt(i,r,y)}}function Di(i,r){var a=i.ref,u=i.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(y){tt(i,r,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){tt(i,r,y)}else a.current=null}function s_(i){var r=i.type,a=i.memoizedProps,u=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(y){tt(i,i.return,y)}}function vh(i,r,a){try{var u=i.stateNode;UI(u,i.type,a,r),u[Gt]=r}catch(y){tt(i,i.return,y)}}function r_(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&$s(i.type)||i.tag===4}function Th(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||r_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&$s(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Eh(i,r,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(i),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Wn));else if(u!==4&&(u===27&&$s(i.type)&&(a=i.stateNode,r=null),i=i.child,i!==null))for(Eh(i,r,a),i=i.sibling;i!==null;)Eh(i,r,a),i=i.sibling}function Ec(i,r,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?a.insertBefore(i,r):a.appendChild(i);else if(u!==4&&(u===27&&$s(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(Ec(i,r,a),i=i.sibling;i!==null;)Ec(i,r,a),i=i.sibling}function o_(i){var r=i.stateNode,a=i.memoizedProps;try{for(var u=i.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);nn(r,u,a),r[wt]=i,r[Gt]=a}catch(_){tt(i,i.return,_)}}var ns=!1,Vt=!1,Sh=!1,a_=typeof WeakSet=="function"?WeakSet:Set,Jt=null;function pI(i,r){if(i=i.containerInfo,Hh=zc,i=vg(i),pf(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var y=u.anchorOffset,_=u.focusNode;u=u.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var C=0,b=-1,U=-1,J=0,Z=0,se=i,j=null;t:for(;;){for(var X;se!==a||y!==0&&se.nodeType!==3||(b=C+y),se!==_||u!==0&&se.nodeType!==3||(U=C+u),se.nodeType===3&&(C+=se.nodeValue.length),(X=se.firstChild)!==null;)j=se,se=X;for(;;){if(se===i)break t;if(j===a&&++J===y&&(b=C),j===_&&++Z===u&&(U=C),(X=se.nextSibling)!==null)break;se=j,j=se.parentNode}se=X}a=b===-1||U===-1?null:{start:b,end:U}}else a=null}a=a||{start:0,end:0}}else a=null;for(Gh={focusedElem:i,selectionRange:a},zc=!1,Jt=r;Jt!==null;)if(r=Jt,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Jt=i;else for(;Jt!==null;){switch(r=Jt,_=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)y=i[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,a=r,y=_.memoizedProps,_=_.memoizedState,u=a.stateNode;try{var pe=jr(a.type,y);i=u.getSnapshotBeforeUpdate(pe,_),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ie){tt(a,a.return,Ie)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,a=i.nodeType,a===9)jh(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":jh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Jt=i;break}Jt=r.return}}function l_(i,r,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:ss(i,a),u&4&&Tl(5,a);break;case 1:if(ss(i,a),u&4)if(i=a.stateNode,r===null)try{i.componentDidMount()}catch(C){tt(a,a.return,C)}else{var y=jr(a.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(y,r,i.__reactInternalSnapshotBeforeUpdate)}catch(C){tt(a,a.return,C)}}u&64&&n_(a),u&512&&El(a,a.return);break;case 3:if(ss(i,a),u&64&&(i=a.updateQueue,i!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Jg(i,r)}catch(C){tt(a,a.return,C)}}break;case 27:r===null&&u&4&&o_(a);case 26:case 5:ss(i,a),r===null&&u&4&&s_(a),u&512&&El(a,a.return);break;case 12:ss(i,a);break;case 31:ss(i,a),u&4&&d_(i,a);break;case 13:ss(i,a),u&4&&f_(i,a),u&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=CI.bind(null,a),GI(i,a))));break;case 22:if(u=a.memoizedState!==null||ns,!u){r=r!==null&&r.memoizedState!==null||Vt,y=ns;var _=Vt;ns=u,(Vt=r)&&!_?rs(i,a,(a.subtreeFlags&8772)!==0):ss(i,a),ns=y,Vt=_}break;case 30:break;default:ss(i,a)}}function u_(i){var r=i.alternate;r!==null&&(i.alternate=null,u_(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&po(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var mt=null,yn=!1;function is(i,r,a){for(a=a.child;a!==null;)c_(i,r,a),a=a.sibling}function c_(i,r,a){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(Kn,a)}catch{}switch(a.tag){case 26:Vt||Di(a,r),is(i,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Vt||Di(a,r);var u=mt,y=yn;$s(a.type)&&(mt=a.stateNode,yn=!1),is(i,r,a),Nl(a.stateNode),mt=u,yn=y;break;case 5:Vt||Di(a,r);case 6:if(u=mt,y=yn,mt=null,is(i,r,a),mt=u,yn=y,mt!==null)if(yn)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(a.stateNode)}catch(_){tt(a,r,_)}else try{mt.removeChild(a.stateNode)}catch(_){tt(a,r,_)}break;case 18:mt!==null&&(yn?(i=mt,nv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Zo(i)):nv(mt,a.stateNode));break;case 4:u=mt,y=yn,mt=a.stateNode.containerInfo,yn=!0,is(i,r,a),mt=u,yn=y;break;case 0:case 11:case 14:case 15:zs(2,a,r),Vt||zs(4,a,r),is(i,r,a);break;case 1:Vt||(Di(a,r),u=a.stateNode,typeof u.componentWillUnmount=="function"&&i_(a,r,u)),is(i,r,a);break;case 21:is(i,r,a);break;case 22:Vt=(u=Vt)||a.memoizedState!==null,is(i,r,a),Vt=u;break;default:is(i,r,a)}}function d_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Zo(i)}catch(a){tt(r,r.return,a)}}}function f_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Zo(i)}catch(a){tt(r,r.return,a)}}function gI(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new a_),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new a_),r;default:throw Error(s(435,i.tag))}}function Sc(i,r){var a=gI(i);r.forEach(function(u){if(!a.has(u)){a.add(u);var y=II.bind(null,i,u);u.then(y,y)}})}function _n(i,r){var a=r.deletions;if(a!==null)for(var u=0;u<a.length;u++){var y=a[u],_=i,C=r,b=C;e:for(;b!==null;){switch(b.tag){case 27:if($s(b.type)){mt=b.stateNode,yn=!1;break e}break;case 5:mt=b.stateNode,yn=!1;break e;case 3:case 4:mt=b.stateNode.containerInfo,yn=!0;break e}b=b.return}if(mt===null)throw Error(s(160));c_(_,C,y),mt=null,yn=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)h_(r,i),r=r.sibling}var si=null;function h_(i,r){var a=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:_n(r,i),vn(i),u&4&&(zs(3,i,i.return),Tl(3,i),zs(5,i,i.return));break;case 1:_n(r,i),vn(i),u&512&&(Vt||a===null||Di(a,a.return)),u&64&&ns&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var y=si;if(_n(r,i),vn(i),u&512&&(Vt||a===null||Di(a,a.return)),u&4){var _=a!==null?a.memoizedState:null;if(u=i.memoizedState,a===null)if(u===null)if(i.stateNode===null){e:{u=i.type,a=i.memoizedProps,y=y.ownerDocument||y;t:switch(u){case"title":_=y.getElementsByTagName("title")[0],(!_||_[_i]||_[wt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(u),y.head.insertBefore(_,y.querySelector("head > title"))),nn(_,u,a),_[wt]=i,Rt(_),u=_;break e;case"link":var C=hv("link","href",y).get(u+(a.href||""));if(C){for(var b=0;b<C.length;b++)if(_=C[b],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){C.splice(b,1);break t}}_=y.createElement(u),nn(_,u,a),y.head.appendChild(_);break;case"meta":if(C=hv("meta","content",y).get(u+(a.content||""))){for(b=0;b<C.length;b++)if(_=C[b],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){C.splice(b,1);break t}}_=y.createElement(u),nn(_,u,a),y.head.appendChild(_);break;default:throw Error(s(468,u))}_[wt]=i,Rt(_),u=_}i.stateNode=u}else mv(y,i.type,i.stateNode);else i.stateNode=fv(y,u,i.memoizedProps);else _!==u?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,u===null?mv(y,i.type,i.stateNode):fv(y,u,i.memoizedProps)):u===null&&i.stateNode!==null&&vh(i,i.memoizedProps,a.memoizedProps)}break;case 27:_n(r,i),vn(i),u&512&&(Vt||a===null||Di(a,a.return)),a!==null&&u&4&&vh(i,i.memoizedProps,a.memoizedProps);break;case 5:if(_n(r,i),vn(i),u&512&&(Vt||a===null||Di(a,a.return)),i.flags&32){y=i.stateNode;try{gn(y,"")}catch(pe){tt(i,i.return,pe)}}u&4&&i.stateNode!=null&&(y=i.memoizedProps,vh(i,y,a!==null?a.memoizedProps:y)),u&1024&&(Sh=!0);break;case 6:if(_n(r,i),vn(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,a=i.stateNode;try{a.nodeValue=u}catch(pe){tt(i,i.return,pe)}}break;case 3:if(Oc=null,y=si,si=Uc(r.containerInfo),_n(r,i),si=y,vn(i),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Zo(r.containerInfo)}catch(pe){tt(i,i.return,pe)}Sh&&(Sh=!1,m_(i));break;case 4:u=si,si=Uc(i.stateNode.containerInfo),_n(r,i),vn(i),si=u;break;case 12:_n(r,i),vn(i);break;case 31:_n(r,i),vn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Sc(i,u)));break;case 13:_n(r,i),vn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Cc=dn()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Sc(i,u)));break;case 22:y=i.memoizedState!==null;var U=a!==null&&a.memoizedState!==null,J=ns,Z=Vt;if(ns=J||y,Vt=Z||U,_n(r,i),Vt=Z,ns=J,vn(i),u&8192)e:for(r=i.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(a===null||U||ns||Vt||Kr(i)),a=null,r=i;;){if(r.tag===5||r.tag===26){if(a===null){U=a=r;try{if(_=U.stateNode,y)C=_.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{b=U.stateNode;var se=U.memoizedProps.style,j=se!=null&&se.hasOwnProperty("display")?se.display:null;b.style.display=j==null||typeof j=="boolean"?"":(""+j).trim()}}catch(pe){tt(U,U.return,pe)}}}else if(r.tag===6){if(a===null){U=r;try{U.stateNode.nodeValue=y?"":U.memoizedProps}catch(pe){tt(U,U.return,pe)}}}else if(r.tag===18){if(a===null){U=r;try{var X=U.stateNode;y?iv(X,!0):iv(U.stateNode,!1)}catch(pe){tt(U,U.return,pe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=i.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Sc(i,a))));break;case 19:_n(r,i),vn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Sc(i,u)));break;case 30:break;case 21:break;default:_n(r,i),vn(i)}}function vn(i){var r=i.flags;if(r&2){try{for(var a,u=i.return;u!==null;){if(r_(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var y=a.stateNode,_=Th(i);Ec(i,_,y);break;case 5:var C=a.stateNode;a.flags&32&&(gn(C,""),a.flags&=-33);var b=Th(i);Ec(i,b,C);break;case 3:case 4:var U=a.stateNode.containerInfo,J=Th(i);Eh(i,J,U);break;default:throw Error(s(161))}}catch(Z){tt(i,i.return,Z)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function m_(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;m_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function ss(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)l_(i,r.alternate,r),r=r.sibling}function Kr(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:zs(4,r,r.return),Kr(r);break;case 1:Di(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&i_(r,r.return,a),Kr(r);break;case 27:Nl(r.stateNode);case 26:case 5:Di(r,r.return),Kr(r);break;case 22:r.memoizedState===null&&Kr(r);break;case 30:Kr(r);break;default:Kr(r)}i=i.sibling}}function rs(i,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,y=i,_=r,C=_.flags;switch(_.tag){case 0:case 11:case 15:rs(y,_,a),Tl(4,_);break;case 1:if(rs(y,_,a),u=_,y=u.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(J){tt(u,u.return,J)}if(u=_,y=u.updateQueue,y!==null){var b=u.stateNode;try{var U=y.shared.hiddenCallbacks;if(U!==null)for(y.shared.hiddenCallbacks=null,y=0;y<U.length;y++)Yg(U[y],b)}catch(J){tt(u,u.return,J)}}a&&C&64&&n_(_),El(_,_.return);break;case 27:o_(_);case 26:case 5:rs(y,_,a),a&&u===null&&C&4&&s_(_),El(_,_.return);break;case 12:rs(y,_,a);break;case 31:rs(y,_,a),a&&C&4&&d_(y,_);break;case 13:rs(y,_,a),a&&C&4&&f_(y,_);break;case 22:_.memoizedState===null&&rs(y,_,a),El(_,_.return);break;case 30:break;default:rs(y,_,a)}r=r.sibling}}function Ah(i,r){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&al(a))}function Ch(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&al(i))}function ri(i,r,a,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)p_(i,r,a,u),r=r.sibling}function p_(i,r,a,u){var y=r.flags;switch(r.tag){case 0:case 11:case 15:ri(i,r,a,u),y&2048&&Tl(9,r);break;case 1:ri(i,r,a,u);break;case 3:ri(i,r,a,u),y&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&al(i)));break;case 12:if(y&2048){ri(i,r,a,u),i=r.stateNode;try{var _=r.memoizedProps,C=_.id,b=_.onPostCommit;typeof b=="function"&&b(C,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(U){tt(r,r.return,U)}}else ri(i,r,a,u);break;case 31:ri(i,r,a,u);break;case 13:ri(i,r,a,u);break;case 23:break;case 22:_=r.stateNode,C=r.alternate,r.memoizedState!==null?_._visibility&2?ri(i,r,a,u):Sl(i,r):_._visibility&2?ri(i,r,a,u):(_._visibility|=2,zo(i,r,a,u,(r.subtreeFlags&10256)!==0||!1)),y&2048&&Ah(C,r);break;case 24:ri(i,r,a,u),y&2048&&Ch(r.alternate,r);break;default:ri(i,r,a,u)}}function zo(i,r,a,u,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=i,C=r,b=a,U=u,J=C.flags;switch(C.tag){case 0:case 11:case 15:zo(_,C,b,U,y),Tl(8,C);break;case 23:break;case 22:var Z=C.stateNode;C.memoizedState!==null?Z._visibility&2?zo(_,C,b,U,y):Sl(_,C):(Z._visibility|=2,zo(_,C,b,U,y)),y&&J&2048&&Ah(C.alternate,C);break;case 24:zo(_,C,b,U,y),y&&J&2048&&Ch(C.alternate,C);break;default:zo(_,C,b,U,y)}r=r.sibling}}function Sl(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=i,u=r,y=u.flags;switch(u.tag){case 22:Sl(a,u),y&2048&&Ah(u.alternate,u);break;case 24:Sl(a,u),y&2048&&Ch(u.alternate,u);break;default:Sl(a,u)}r=r.sibling}}var Al=8192;function Ho(i,r,a){if(i.subtreeFlags&Al)for(i=i.child;i!==null;)g_(i,r,a),i=i.sibling}function g_(i,r,a){switch(i.tag){case 26:Ho(i,r,a),i.flags&Al&&i.memoizedState!==null&&nb(a,si,i.memoizedState,i.memoizedProps);break;case 5:Ho(i,r,a);break;case 3:case 4:var u=si;si=Uc(i.stateNode.containerInfo),Ho(i,r,a),si=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=Al,Al=16777216,Ho(i,r,a),Al=u):Ho(i,r,a));break;default:Ho(i,r,a)}}function y_(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Cl(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];Jt=u,v_(u,i)}y_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)__(i),i=i.sibling}function __(i){switch(i.tag){case 0:case 11:case 15:Cl(i),i.flags&2048&&zs(9,i,i.return);break;case 3:Cl(i);break;case 12:Cl(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Ac(i)):Cl(i);break;default:Cl(i)}}function Ac(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];Jt=u,v_(u,i)}y_(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:zs(8,r,r.return),Ac(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Ac(r));break;default:Ac(r)}i=i.sibling}}function v_(i,r){for(;Jt!==null;){var a=Jt;switch(a.tag){case 0:case 11:case 15:zs(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:al(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Jt=u;else e:for(a=i;Jt!==null;){u=Jt;var y=u.sibling,_=u.return;if(u_(u),u===a){Jt=null;break e}if(y!==null){y.return=_,Jt=y;break e}Jt=_}}}var yI={getCacheForType:function(i){var r=en(Mt),a=r.data.get(i);return a===void 0&&(a=i(),r.data.set(i,a)),a},cacheSignal:function(){return en(Mt).controller.signal}},_I=typeof WeakMap=="function"?WeakMap:Map,Xe=0,ot=null,Ue=null,qe=0,et=0,Rn=null,Hs=!1,Go=!1,Ih=!1,os=0,yt=0,Gs=0,$r=0,bh=0,Nn=0,Yo=0,Il=null,Tn=null,xh=!1,Cc=0,T_=0,Ic=1/0,bc=null,Ys=null,Ft=0,Js=null,Jo=null,as=0,wh=0,Rh=null,E_=null,bl=0,Nh=null;function Mn(){return(Xe&2)!==0&&qe!==0?qe&-qe:W.T!==null?Uh():xu()}function S_(){if(Nn===0)if((qe&536870912)===0||Ge){var i=Sr;Sr<<=1,(Sr&3932160)===0&&(Sr=262144),Nn=i}else Nn=536870912;return i=xn.current,i!==null&&(i.flags|=32),Nn}function En(i,r,a){(i===ot&&(et===2||et===9)||i.cancelPendingCommit!==null)&&(jo(i,0),js(i,qe,Nn,!1)),Ar(i,a),((Xe&2)===0||i!==ot)&&(i===ot&&((Xe&2)===0&&($r|=a),yt===4&&js(i,qe,Nn,!1)),Pi(i))}function A_(i,r,a){if((Xe&6)!==0)throw Error(s(327));var u=!a&&(r&127)===0&&(r&i.expiredLanes)===0||$n(i,r),y=u?EI(i,r):Dh(i,r,!0),_=u;do{if(y===0){Go&&!u&&js(i,r,0,!1);break}else{if(a=i.current.alternate,_&&!vI(a)){y=Dh(i,r,!1),_=!1;continue}if(y===2){if(_=r,i.errorRecoveryDisabledLanes&_)var C=0;else C=i.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){r=C;e:{var b=i;y=Il;var U=b.current.memoizedState.isDehydrated;if(U&&(jo(b,C).flags|=256),C=Dh(b,C,!1),C!==2){if(Ih&&!U){b.errorRecoveryDisabledLanes|=_,$r|=_,y=4;break e}_=Tn,Tn=y,_!==null&&(Tn===null?Tn=_:Tn.push.apply(Tn,_))}y=C}if(_=!1,y!==2)continue}}if(y===1){jo(i,0),js(i,r,0,!0);break}e:{switch(u=i,_=y,_){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:js(u,r,Nn,!Hs);break e;case 2:Tn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(y=Cc+300-dn(),10<y)){if(js(u,r,Nn,!Hs),pi(u,0,!0)!==0)break e;as=r,u.timeoutHandle=ev(C_.bind(null,u,a,Tn,bc,xh,r,Nn,$r,Yo,Hs,_,"Throttled",-0,0),y);break e}C_(u,a,Tn,bc,xh,r,Nn,$r,Yo,Hs,_,null,-0,0)}}break}while(!0);Pi(i)}function C_(i,r,a,u,y,_,C,b,U,J,Z,se,j,X){if(i.timeoutHandle=-1,se=r.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Wn},g_(r,_,se);var pe=(_&62914560)===_?Cc-dn():(_&4194048)===_?T_-dn():0;if(pe=ib(se,pe),pe!==null){as=_,i.cancelPendingCommit=pe(D_.bind(null,i,r,_,a,u,y,C,b,U,Z,se,null,j,X)),js(i,_,C,!J);return}}D_(i,r,_,a,u,y,C,b,U)}function vI(i){for(var r=i;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var y=a[u],_=y.getSnapshot;y=y.value;try{if(!In(_(),y))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function js(i,r,a,u){r&=~bh,r&=~$r,i.suspendedLanes|=r,i.pingedLanes&=~r,u&&(i.warmLanes|=r),u=i.expirationTimes;for(var y=r;0<y;){var _=31-Et(y),C=1<<_;u[_]=-1,y&=~C}a!==0&&Cr(i,a,r)}function xc(){return(Xe&6)===0?(xl(0),!1):!0}function Mh(){if(Ue!==null){if(et===0)var i=Ue.return;else i=Ue,Qi=Br=null,jf(i),Lo=null,ul=0,i=Ue;for(;i!==null;)t_(i.alternate,i),i=i.return;Ue=null}}function jo(i,r){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,qI(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),as=0,Mh(),ot=i,Ue=a=Ki(i.current,null),qe=r,et=0,Rn=null,Hs=!1,Go=$n(i,r),Ih=!1,Yo=Nn=bh=$r=Gs=yt=0,Tn=Il=null,xh=!1,(r&8)!==0&&(r|=r&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=r;0<u;){var y=31-Et(u),_=1<<y;r|=i[y],u&=~_}return os=r,Ku(),a}function I_(i,r){Pe=null,W.H=yl,r===Uo||r===nc?(r=Fg(),et=3):r===kf?(r=Fg(),et=4):et=r===uh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Rn=r,Ue===null&&(yt=1,gc(i,qn(r,i.current)))}function b_(){var i=xn.current;return i===null?!0:(qe&4194048)===qe?Hn===null:(qe&62914560)===qe||(qe&536870912)!==0?i===Hn:!1}function x_(){var i=W.H;return W.H=yl,i===null?yl:i}function w_(){var i=W.A;return W.A=yI,i}function wc(){yt=4,Hs||(qe&4194048)!==qe&&xn.current!==null||(Go=!0),(Gs&134217727)===0&&($r&134217727)===0||ot===null||js(ot,qe,Nn,!1)}function Dh(i,r,a){var u=Xe;Xe|=2;var y=x_(),_=w_();(ot!==i||qe!==r)&&(bc=null,jo(i,r)),r=!1;var C=yt;e:do try{if(et!==0&&Ue!==null){var b=Ue,U=Rn;switch(et){case 8:Mh(),C=6;break e;case 3:case 2:case 9:case 6:xn.current===null&&(r=!0);var J=et;if(et=0,Rn=null,Ko(i,b,U,J),a&&Go){C=0;break e}break;default:J=et,et=0,Rn=null,Ko(i,b,U,J)}}TI(),C=yt;break}catch(Z){I_(i,Z)}while(!0);return r&&i.shellSuspendCounter++,Qi=Br=null,Xe=u,W.H=y,W.A=_,Ue===null&&(ot=null,qe=0,Ku()),C}function TI(){for(;Ue!==null;)R_(Ue)}function EI(i,r){var a=Xe;Xe|=2;var u=x_(),y=w_();ot!==i||qe!==r?(bc=null,Ic=dn()+500,jo(i,r)):Go=$n(i,r);e:do try{if(et!==0&&Ue!==null){r=Ue;var _=Rn;t:switch(et){case 1:et=0,Rn=null,Ko(i,r,_,1);break;case 2:case 9:if(qg(_)){et=0,Rn=null,N_(r);break}r=function(){et!==2&&et!==9||ot!==i||(et=7),Pi(i)},_.then(r,r);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:qg(_)?(et=0,Rn=null,N_(r)):(et=0,Rn=null,Ko(i,r,_,7));break;case 5:var C=null;switch(Ue.tag){case 26:C=Ue.memoizedState;case 5:case 27:var b=Ue;if(C?pv(C):b.stateNode.complete){et=0,Rn=null;var U=b.sibling;if(U!==null)Ue=U;else{var J=b.return;J!==null?(Ue=J,Rc(J)):Ue=null}break t}}et=0,Rn=null,Ko(i,r,_,5);break;case 6:et=0,Rn=null,Ko(i,r,_,6);break;case 8:Mh(),yt=6;break e;default:throw Error(s(462))}}SI();break}catch(Z){I_(i,Z)}while(!0);return Qi=Br=null,W.H=u,W.A=y,Xe=a,Ue!==null?0:(ot=null,qe=0,Ku(),yt)}function SI(){for(;Ue!==null&&!lf();)R_(Ue)}function R_(i){var r=Zy(i.alternate,i,os);i.memoizedProps=i.pendingProps,r===null?Rc(i):Ue=r}function N_(i){var r=i,a=r.alternate;switch(r.tag){case 15:case 0:r=jy(a,r,r.pendingProps,r.type,void 0,qe);break;case 11:r=jy(a,r,r.pendingProps,r.type.render,r.ref,qe);break;case 5:jf(r);default:t_(a,r),r=Ue=wg(r,os),r=Zy(a,r,os)}i.memoizedProps=i.pendingProps,r===null?Rc(i):Ue=r}function Ko(i,r,a,u){Qi=Br=null,jf(r),Lo=null,ul=0;var y=r.return;try{if(cI(i,y,r,a,qe)){yt=1,gc(i,qn(a,i.current)),Ue=null;return}}catch(_){if(y!==null)throw Ue=y,_;yt=1,gc(i,qn(a,i.current)),Ue=null;return}r.flags&32768?(Ge||u===1?i=!0:Go||(qe&536870912)!==0?i=!1:(Hs=i=!0,(u===2||u===9||u===3||u===6)&&(u=xn.current,u!==null&&u.tag===13&&(u.flags|=16384))),M_(r,i)):Rc(r)}function Rc(i){var r=i;do{if((r.flags&32768)!==0){M_(r,Hs);return}i=r.return;var a=hI(r.alternate,r,os);if(a!==null){Ue=a;return}if(r=r.sibling,r!==null){Ue=r;return}Ue=r=i}while(r!==null);yt===0&&(yt=5)}function M_(i,r){do{var a=mI(i.alternate,i);if(a!==null){a.flags&=32767,Ue=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(i=i.sibling,i!==null)){Ue=i;return}Ue=i=a}while(i!==null);yt=6,Ue=null}function D_(i,r,a,u,y,_,C,b,U){i.cancelPendingCommit=null;do Nc();while(Ft!==0);if((Xe&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(_=r.lanes|r.childLanes,_|=Tf,df(i,a,_,C,b,U),i===ot&&(Ue=ot=null,qe=0),Jo=r,Js=i,as=a,wh=_,Rh=y,E_=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,bI(As,function(){return L_(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=W.T,W.T=null,y=de.p,de.p=2,C=Xe,Xe|=4;try{pI(i,r,a)}finally{Xe=C,de.p=y,W.T=u}}Ft=1,P_(),V_(),k_()}}function P_(){if(Ft===1){Ft=0;var i=Js,r=Jo,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=W.T,W.T=null;var u=de.p;de.p=2;var y=Xe;Xe|=4;try{h_(r,i);var _=Gh,C=vg(i.containerInfo),b=_.focusedElem,U=_.selectionRange;if(C!==b&&b&&b.ownerDocument&&_g(b.ownerDocument.documentElement,b)){if(U!==null&&pf(b)){var J=U.start,Z=U.end;if(Z===void 0&&(Z=J),"selectionStart"in b)b.selectionStart=J,b.selectionEnd=Math.min(Z,b.value.length);else{var se=b.ownerDocument||document,j=se&&se.defaultView||window;if(j.getSelection){var X=j.getSelection(),pe=b.textContent.length,Ie=Math.min(U.start,pe),rt=U.end===void 0?Ie:Math.min(U.end,pe);!X.extend&&Ie>rt&&(C=rt,rt=Ie,Ie=C);var H=yg(b,Ie),q=yg(b,rt);if(H&&q&&(X.rangeCount!==1||X.anchorNode!==H.node||X.anchorOffset!==H.offset||X.focusNode!==q.node||X.focusOffset!==q.offset)){var Y=se.createRange();Y.setStart(H.node,H.offset),X.removeAllRanges(),Ie>rt?(X.addRange(Y),X.extend(q.node,q.offset)):(Y.setEnd(q.node,q.offset),X.addRange(Y))}}}}for(se=[],X=b;X=X.parentNode;)X.nodeType===1&&se.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<se.length;b++){var ie=se[b];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}zc=!!Hh,Gh=Hh=null}finally{Xe=y,de.p=u,W.T=a}}i.current=r,Ft=2}}function V_(){if(Ft===2){Ft=0;var i=Js,r=Jo,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=W.T,W.T=null;var u=de.p;de.p=2;var y=Xe;Xe|=4;try{l_(i,r.alternate,r)}finally{Xe=y,de.p=u,W.T=a}}Ft=3}}function k_(){if(Ft===4||Ft===3){Ft=0,Tu();var i=Js,r=Jo,a=as,u=E_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ft=5:(Ft=0,Jo=Js=null,U_(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(Ys=null),Gi(a),r=r.stateNode,Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(Kn,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=W.T,y=de.p,de.p=2,W.T=null;try{for(var _=i.onRecoverableError,C=0;C<u.length;C++){var b=u[C];_(b.value,{componentStack:b.stack})}}finally{W.T=r,de.p=y}}(as&3)!==0&&Nc(),Pi(i),y=i.pendingLanes,(a&261930)!==0&&(y&42)!==0?i===Nh?bl++:(bl=0,Nh=i):bl=0,xl(0)}}function U_(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,al(r)))}function Nc(){return P_(),V_(),k_(),L_()}function L_(){if(Ft!==5)return!1;var i=Js,r=wh;wh=0;var a=Gi(as),u=W.T,y=de.p;try{de.p=32>a?32:a,W.T=null,a=Rh,Rh=null;var _=Js,C=as;if(Ft=0,Jo=Js=null,as=0,(Xe&6)!==0)throw Error(s(331));var b=Xe;if(Xe|=4,__(_.current),p_(_,_.current,C,a),Xe=b,xl(0,!1),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(Kn,_)}catch{}return!0}finally{de.p=y,W.T=u,U_(i,r)}}function O_(i,r,a){r=qn(a,r),r=lh(i.stateNode,r,2),i=qs(i,r,2),i!==null&&(Ar(i,2),Pi(i))}function tt(i,r,a){if(i.tag===3)O_(i,i,a);else for(;r!==null;){if(r.tag===3){O_(r,i,a);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ys===null||!Ys.has(u))){i=qn(a,i),a=qy(2),u=qs(r,a,2),u!==null&&(By(a,u,r,i),Ar(u,2),Pi(u));break}}r=r.return}}function Ph(i,r,a){var u=i.pingCache;if(u===null){u=i.pingCache=new _I;var y=new Set;u.set(r,y)}else y=u.get(r),y===void 0&&(y=new Set,u.set(r,y));y.has(a)||(Ih=!0,y.add(a),i=AI.bind(null,i,r,a),r.then(i,i))}function AI(i,r,a){var u=i.pingCache;u!==null&&u.delete(r),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,ot===i&&(qe&a)===a&&(yt===4||yt===3&&(qe&62914560)===qe&&300>dn()-Cc?(Xe&2)===0&&jo(i,0):bh|=a,Yo===qe&&(Yo=0)),Pi(i)}function q_(i,r){r===0&&(r=bu()),i=Lr(i,r),i!==null&&(Ar(i,r),Pi(i))}function CI(i){var r=i.memoizedState,a=0;r!==null&&(a=r.retryLane),q_(i,a)}function II(i,r){var a=0;switch(i.tag){case 31:case 13:var u=i.stateNode,y=i.memoizedState;y!==null&&(a=y.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(r),q_(i,a)}function bI(i,r){return Bt(i,r)}var Mc=null,$o=null,Vh=!1,Dc=!1,kh=!1,Ks=0;function Pi(i){i!==$o&&i.next===null&&($o===null?Mc=$o=i:$o=$o.next=i),Dc=!0,Vh||(Vh=!0,wI())}function xl(i,r){if(!kh&&Dc){kh=!0;do for(var a=!1,u=Mc;u!==null;){if(i!==0){var y=u.pendingLanes;if(y===0)var _=0;else{var C=u.suspendedLanes,b=u.pingedLanes;_=(1<<31-Et(42|i)+1)-1,_&=y&~(C&~b),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,H_(u,_))}else _=qe,_=pi(u,u===ot?_:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(_&3)===0||$n(u,_)||(a=!0,H_(u,_));u=u.next}while(a);kh=!1}}function xI(){B_()}function B_(){Dc=Vh=!1;var i=0;Ks!==0&&OI()&&(i=Ks);for(var r=dn(),a=null,u=Mc;u!==null;){var y=u.next,_=F_(u,r);_===0?(u.next=null,a===null?Mc=y:a.next=y,y===null&&($o=a)):(a=u,(i!==0||(_&3)!==0)&&(Dc=!0)),u=y}Ft!==0&&Ft!==5||xl(i),Ks!==0&&(Ks=0)}function F_(i,r){for(var a=i.suspendedLanes,u=i.pingedLanes,y=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var C=31-Et(_),b=1<<C,U=y[C];U===-1?((b&a)===0||(b&u)!==0)&&(y[C]=cf(b,r)):U<=r&&(i.expiredLanes|=b),_&=~b}if(r=ot,a=qe,a=pi(i,i===r?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,a===0||i===r&&(et===2||et===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&Ss(u),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||$n(i,a)){if(r=a&-a,r===i.callbackPriority)return r;switch(u!==null&&Ss(u),Gi(a)){case 2:case 8:a=La;break;case 32:a=As;break;case 268435456:a=Eu;break;default:a=As}return u=z_.bind(null,i),a=Bt(a,u),i.callbackPriority=r,i.callbackNode=a,r}return u!==null&&u!==null&&Ss(u),i.callbackPriority=2,i.callbackNode=null,2}function z_(i,r){if(Ft!==0&&Ft!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(Nc()&&i.callbackNode!==a)return null;var u=qe;return u=pi(i,i===ot?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(A_(i,u,r),F_(i,dn()),i.callbackNode!=null&&i.callbackNode===a?z_.bind(null,i):null)}function H_(i,r){if(Nc())return null;A_(i,r,!0)}function wI(){BI(function(){(Xe&6)!==0?Bt(Ua,xI):B_()})}function Uh(){if(Ks===0){var i=Vo;i===0&&(i=hi,hi<<=1,(hi&261888)===0&&(hi=256)),Ks=i}return Ks}function G_(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:vo(""+i)}function Y_(i,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,i.id&&a.setAttribute("form",i.id),r.parentNode.insertBefore(a,r),i=new FormData(i),a.parentNode.removeChild(a),i}function RI(i,r,a,u,y){if(r==="submit"&&a&&a.stateNode===y){var _=G_((y[Gt]||null).action),C=u.submitter;C&&(r=(r=C[Gt]||null)?G_(r.formAction):C.getAttribute("formAction"),r!==null&&(_=r,C=null));var b=new bi("action","action",null,u,y);i.push({event:b,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ks!==0){var U=C?Y_(y,C):new FormData(y);nh(a,{pending:!0,data:U,method:y.method,action:_},null,U)}}else typeof _=="function"&&(b.preventDefault(),U=C?Y_(y,C):new FormData(y),nh(a,{pending:!0,data:U,method:y.method,action:_},_,U))},currentTarget:y}]})}}for(var Lh=0;Lh<vf.length;Lh++){var Oh=vf[Lh],NI=Oh.toLowerCase(),MI=Oh[0].toUpperCase()+Oh.slice(1);ii(NI,"on"+MI)}ii(Sg,"onAnimationEnd"),ii(Ag,"onAnimationIteration"),ii(Cg,"onAnimationStart"),ii("dblclick","onDoubleClick"),ii("focusin","onFocus"),ii("focusout","onBlur"),ii(jC,"onTransitionRun"),ii(KC,"onTransitionStart"),ii($C,"onTransitionCancel"),ii(Ig,"onTransitionEnd"),Si("onMouseEnter",["mouseout","mouseover"]),Si("onMouseLeave",["mouseout","mouseover"]),Si("onPointerEnter",["pointerout","pointerover"]),Si("onPointerLeave",["pointerout","pointerover"]),Ei("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ei("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ei("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ei("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ei("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ei("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wl));function J_(i,r){r=(r&4)!==0;for(var a=0;a<i.length;a++){var u=i[a],y=u.event;u=u.listeners;e:{var _=void 0;if(r)for(var C=u.length-1;0<=C;C--){var b=u[C],U=b.instance,J=b.currentTarget;if(b=b.listener,U!==_&&y.isPropagationStopped())break e;_=b,y.currentTarget=J;try{_(y)}catch(Z){ju(Z)}y.currentTarget=null,_=U}else for(C=0;C<u.length;C++){if(b=u[C],U=b.instance,J=b.currentTarget,b=b.listener,U!==_&&y.isPropagationStopped())break e;_=b,y.currentTarget=J;try{_(y)}catch(Z){ju(Z)}y.currentTarget=null,_=U}}}}function Le(i,r){var a=r[mo];a===void 0&&(a=r[mo]=new Set);var u=i+"__bubble";a.has(u)||(j_(r,i,2,!1),a.add(u))}function qh(i,r,a){var u=0;r&&(u|=4),j_(a,i,u,r)}var Pc="_reactListening"+Math.random().toString(36).slice(2);function Bh(i){if(!i[Pc]){i[Pc]=!0,Ba.forEach(function(a){a!=="selectionchange"&&(DI.has(a)||qh(a,!1,i),qh(a,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Pc]||(r[Pc]=!0,qh("selectionchange",!1,r))}}function j_(i,r,a,u){switch(Sv(r)){case 2:var y=ob;break;case 8:y=ab;break;default:y=tm}a=y.bind(null,r,a,i),y=void 0,!Rr||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),u?y!==void 0?i.addEventListener(r,a,{capture:!0,passive:y}):i.addEventListener(r,a,!0):y!==void 0?i.addEventListener(r,a,{passive:y}):i.addEventListener(r,a,!1)}function Fh(i,r,a,u,y){var _=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var C=u.tag;if(C===3||C===4){var b=u.stateNode.containerInfo;if(b===y)break;if(C===4)for(C=u.return;C!==null;){var U=C.tag;if((U===3||U===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;b!==null;){if(C=vi(b),C===null)return;if(U=C.tag,U===5||U===6||U===26||U===27){u=_=C;continue e}b=b.parentNode}}u=u.return}Rs(function(){var J=_,Z=kn(a),se=[];e:{var j=bg.get(i);if(j!==void 0){var X=bi,pe=i;switch(i){case"keypress":if(Mr(a)===0)break e;case"keydown":case"keyup":X=Gu;break;case"focusin":pe="focus",X=Pr;break;case"focusout":pe="blur",X=Pr;break;case"beforeblur":case"afterblur":X=Pr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Za;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=ku;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=S;break;case Sg:case Ag:case Cg:X=Lu;break;case Ig:X=w;break;case"scroll":case"scrollend":X=Wa;break;case"wheel":X=$;break;case"copy":case"cut":case"paste":X=Ou;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=ji;break;case"toggle":case"beforetoggle":X=De}var Ie=(r&4)!==0,rt=!Ie&&(i==="scroll"||i==="scrollend"),H=Ie?j!==null?j+"Capture":null:j;Ie=[];for(var q=J,Y;q!==null;){var ie=q;if(Y=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||Y===null||H===null||(ie=Zn(q,H),ie!=null&&Ie.push(Rl(q,ie,Y))),rt)break;q=q.return}0<Ie.length&&(j=new X(j,pe,null,a,Z),se.push({event:j,listeners:Ie}))}}if((r&7)===0){e:{if(j=i==="mouseover"||i==="pointerover",X=i==="mouseout"||i==="pointerout",j&&a!==$a&&(pe=a.relatedTarget||a.fromElement)&&(vi(pe)||pe[yi]))break e;if((X||j)&&(j=Z.window===Z?Z:(j=Z.ownerDocument)?j.defaultView||j.parentWindow:window,X?(pe=a.relatedTarget||a.toElement,X=J,pe=pe?vi(pe):null,pe!==null&&(rt=l(pe),Ie=pe.tag,pe!==rt||Ie!==5&&Ie!==27&&Ie!==6)&&(pe=null)):(X=null,pe=J),X!==pe)){if(Ie=Za,ie="onMouseLeave",H="onMouseEnter",q="mouse",(i==="pointerout"||i==="pointerover")&&(Ie=ji,ie="onPointerLeave",H="onPointerEnter",q="pointer"),rt=X==null?j:An(X),Y=pe==null?j:An(pe),j=new Ie(ie,q+"leave",X,a,Z),j.target=rt,j.relatedTarget=Y,ie=null,vi(Z)===J&&(Ie=new Ie(H,q+"enter",pe,a,Z),Ie.target=Y,Ie.relatedTarget=rt,ie=Ie),rt=ie,X&&pe)t:{for(Ie=PI,H=X,q=pe,Y=0,ie=H;ie;ie=Ie(ie))Y++;ie=0;for(var Ae=q;Ae;Ae=Ie(Ae))ie++;for(;0<Y-ie;)H=Ie(H),Y--;for(;0<ie-Y;)q=Ie(q),ie--;for(;Y--;){if(H===q||q!==null&&H===q.alternate){Ie=H;break t}H=Ie(H),q=Ie(q)}Ie=null}else Ie=null;X!==null&&K_(se,j,X,Ie,!1),pe!==null&&rt!==null&&K_(se,rt,pe,Ie,!0)}}e:{if(j=J?An(J):window,X=j.nodeName&&j.nodeName.toLowerCase(),X==="select"||X==="input"&&j.type==="file")var je=dg;else if(ug(j))if(fg)je=GC;else{je=zC;var Te=FC}else X=j.nodeName,!X||X.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?J&&_o(J.elementType)&&(je=dg):je=HC;if(je&&(je=je(i,J))){cg(se,je,a,Z);break e}Te&&Te(i,j,J),i==="focusout"&&J&&j.type==="number"&&J.memoizedProps.value!=null&&Ja(j,"number",j.value)}switch(Te=J?An(J):window,i){case"focusin":(ug(Te)||Te.contentEditable==="true")&&(bo=Te,gf=J,sl=null);break;case"focusout":sl=gf=bo=null;break;case"mousedown":yf=!0;break;case"contextmenu":case"mouseup":case"dragend":yf=!1,Tg(se,a,Z);break;case"selectionchange":if(JC)break;case"keydown":case"keyup":Tg(se,a,Z)}var Ve;if(Qe)e:{switch(i){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else Io?Vr(i,a)&&(Be="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Be="onCompositionStart");Be&&(Ri&&a.locale!=="ko"&&(Io||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&Io&&(Ve=Xa()):(Ii=Z,Qa="value"in Ii?Ii.value:Ii.textContent,Io=!0)),Te=Vc(J,Be),0<Te.length&&(Be=new wi(Be,i,null,a,Z),se.push({event:Be,listeners:Te}),Ve?Be.data=Ve:(Ve=Co(a),Ve!==null&&(Be.data=Ve)))),(Ve=Ln?LC(i,a):OC(i,a))&&(Be=Vc(J,"onBeforeInput"),0<Be.length&&(Te=new wi("onBeforeInput","beforeinput",null,a,Z),se.push({event:Te,listeners:Be}),Te.data=Ve)),RI(se,i,J,a,Z)}J_(se,r)})}function Rl(i,r,a){return{instance:i,listener:r,currentTarget:a}}function Vc(i,r){for(var a=r+"Capture",u=[];i!==null;){var y=i,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=Zn(i,a),y!=null&&u.unshift(Rl(i,y,_)),y=Zn(i,r),y!=null&&u.push(Rl(i,y,_))),i.tag===3)return u;i=i.return}return[]}function PI(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function K_(i,r,a,u,y){for(var _=r._reactName,C=[];a!==null&&a!==u;){var b=a,U=b.alternate,J=b.stateNode;if(b=b.tag,U!==null&&U===u)break;b!==5&&b!==26&&b!==27||J===null||(U=J,y?(J=Zn(a,_),J!=null&&C.unshift(Rl(a,J,U))):y||(J=Zn(a,_),J!=null&&C.push(Rl(a,J,U)))),a=a.return}C.length!==0&&i.push({event:r,listeners:C})}var VI=/\r\n?/g,kI=/\u0000|\uFFFD/g;function $_(i){return(typeof i=="string"?i:""+i).replace(VI,`
`).replace(kI,"")}function Q_(i,r){return r=$_(r),$_(i)===r}function st(i,r,a,u,y,_){switch(a){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||gn(i,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&gn(i,""+u);break;case"className":Cn(i,"class",u);break;case"tabIndex":Cn(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Cn(i,a,u);break;case"style":Ka(i,u,_);break;case"data":if(r!=="object"){Cn(i,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||a!=="href")){i.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=vo(""+u),i.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(r!=="input"&&st(i,r,"name",y.name,y,null),st(i,r,"formEncType",y.formEncType,y,null),st(i,r,"formMethod",y.formMethod,y,null),st(i,r,"formTarget",y.formTarget,y,null)):(st(i,r,"encType",y.encType,y,null),st(i,r,"method",y.method,y,null),st(i,r,"target",y.target,y,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=vo(""+u),i.setAttribute(a,u);break;case"onClick":u!=null&&(i.onclick=Wn);break;case"onScroll":u!=null&&Le("scroll",i);break;case"onScrollEnd":u!=null&&Le("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}a=vo(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""+u):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":u===!0?i.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,u):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(a,u):i.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(a):i.setAttribute(a,u);break;case"popover":Le("beforetoggle",i),Le("toggle",i),go(i,"popover",u);break;case"xlinkActuate":Nt(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Nt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Nt(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Nt(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Nt(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Nt(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Nt(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Nt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Nt(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":go(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Vu.get(a)||a,go(i,a,u))}}function zh(i,r,a,u,y,_){switch(a){case"style":Ka(i,u,_);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof u=="string"?gn(i,u):(typeof u=="number"||typeof u=="bigint")&&gn(i,""+u);break;case"onScroll":u!=null&&Le("scroll",i);break;case"onScrollEnd":u!=null&&Le("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Wn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),r=a.slice(2,y?a.length-7:void 0),_=i[Gt]||null,_=_!=null?_[a]:null,typeof _=="function"&&i.removeEventListener(r,_,y),typeof u=="function")){typeof _!="function"&&_!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(r,u,y);break e}a in i?i[a]=u:u===!0?i.setAttribute(a,""):go(i,a,u)}}}function nn(i,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",i),Le("load",i);var u=!1,y=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var C=a[_];if(C!=null)switch(_){case"src":u=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:st(i,r,_,C,a,null)}}y&&st(i,r,"srcSet",a.srcSet,a,null),u&&st(i,r,"src",a.src,a,null);return;case"input":Le("invalid",i);var b=_=C=y=null,U=null,J=null;for(u in a)if(a.hasOwnProperty(u)){var Z=a[u];if(Z!=null)switch(u){case"name":y=Z;break;case"type":C=Z;break;case"checked":U=Z;break;case"defaultChecked":J=Z;break;case"value":_=Z;break;case"defaultValue":b=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,r));break;default:st(i,r,u,Z,a,null)}}Mu(i,_,b,U,J,C,y,!1);return;case"select":Le("invalid",i),u=C=_=null;for(y in a)if(a.hasOwnProperty(y)&&(b=a[y],b!=null))switch(y){case"value":_=b;break;case"defaultValue":C=b;break;case"multiple":u=b;default:st(i,r,y,b,a,null)}r=_,a=C,i.multiple=!!u,r!=null?Is(i,!!u,r,!1):a!=null&&Is(i,!!u,a,!0);return;case"textarea":Le("invalid",i),_=y=u=null;for(C in a)if(a.hasOwnProperty(C)&&(b=a[C],b!=null))switch(C){case"value":u=b;break;case"defaultValue":y=b;break;case"children":_=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:st(i,r,C,b,a,null)}bs(i,u,y,_);return;case"option":for(U in a)if(a.hasOwnProperty(U)&&(u=a[U],u!=null))switch(U){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:st(i,r,U,u,a,null)}return;case"dialog":Le("beforetoggle",i),Le("toggle",i),Le("cancel",i),Le("close",i);break;case"iframe":case"object":Le("load",i);break;case"video":case"audio":for(u=0;u<wl.length;u++)Le(wl[u],i);break;case"image":Le("error",i),Le("load",i);break;case"details":Le("toggle",i);break;case"embed":case"source":case"link":Le("error",i),Le("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in a)if(a.hasOwnProperty(J)&&(u=a[J],u!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:st(i,r,J,u,a,null)}return;default:if(_o(r)){for(Z in a)a.hasOwnProperty(Z)&&(u=a[Z],u!==void 0&&zh(i,r,Z,u,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(u=a[b],u!=null&&st(i,r,b,u,a,null))}function UI(i,r,a,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,C=null,b=null,U=null,J=null,Z=null;for(X in a){var se=a[X];if(a.hasOwnProperty(X)&&se!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":U=se;default:u.hasOwnProperty(X)||st(i,r,X,null,u,se)}}for(var j in u){var X=u[j];if(se=a[j],u.hasOwnProperty(j)&&(X!=null||se!=null))switch(j){case"type":_=X;break;case"name":y=X;break;case"checked":J=X;break;case"defaultChecked":Z=X;break;case"value":C=X;break;case"defaultValue":b=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,r));break;default:X!==se&&st(i,r,j,X,u,se)}}yo(i,C,b,U,J,Z,_,y);return;case"select":X=C=b=j=null;for(_ in a)if(U=a[_],a.hasOwnProperty(_)&&U!=null)switch(_){case"value":break;case"multiple":X=U;default:u.hasOwnProperty(_)||st(i,r,_,null,u,U)}for(y in u)if(_=u[y],U=a[y],u.hasOwnProperty(y)&&(_!=null||U!=null))switch(y){case"value":j=_;break;case"defaultValue":b=_;break;case"multiple":C=_;default:_!==U&&st(i,r,y,_,u,U)}r=b,a=C,u=X,j!=null?Is(i,!!a,j,!1):!!u!=!!a&&(r!=null?Is(i,!!a,r,!0):Is(i,!!a,a?[]:"",!1));return;case"textarea":X=j=null;for(b in a)if(y=a[b],a.hasOwnProperty(b)&&y!=null&&!u.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:st(i,r,b,null,u,y)}for(C in u)if(y=u[C],_=a[C],u.hasOwnProperty(C)&&(y!=null||_!=null))switch(C){case"value":j=y;break;case"defaultValue":X=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:y!==_&&st(i,r,C,y,u,_)}Du(i,j,X);return;case"option":for(var pe in a)if(j=a[pe],a.hasOwnProperty(pe)&&j!=null&&!u.hasOwnProperty(pe))switch(pe){case"selected":i.selected=!1;break;default:st(i,r,pe,null,u,j)}for(U in u)if(j=u[U],X=a[U],u.hasOwnProperty(U)&&j!==X&&(j!=null||X!=null))switch(U){case"selected":i.selected=j&&typeof j!="function"&&typeof j!="symbol";break;default:st(i,r,U,j,u,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in a)j=a[Ie],a.hasOwnProperty(Ie)&&j!=null&&!u.hasOwnProperty(Ie)&&st(i,r,Ie,null,u,j);for(J in u)if(j=u[J],X=a[J],u.hasOwnProperty(J)&&j!==X&&(j!=null||X!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,r));break;default:st(i,r,J,j,u,X)}return;default:if(_o(r)){for(var rt in a)j=a[rt],a.hasOwnProperty(rt)&&j!==void 0&&!u.hasOwnProperty(rt)&&zh(i,r,rt,void 0,u,j);for(Z in u)j=u[Z],X=a[Z],!u.hasOwnProperty(Z)||j===X||j===void 0&&X===void 0||zh(i,r,Z,j,u,X);return}}for(var H in a)j=a[H],a.hasOwnProperty(H)&&j!=null&&!u.hasOwnProperty(H)&&st(i,r,H,null,u,j);for(se in u)j=u[se],X=a[se],!u.hasOwnProperty(se)||j===X||j==null&&X==null||st(i,r,se,j,u,X)}function X_(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function LI(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var y=a[u],_=y.transferSize,C=y.initiatorType,b=y.duration;if(_&&b&&X_(C)){for(C=0,b=y.responseEnd,u+=1;u<a.length;u++){var U=a[u],J=U.startTime;if(J>b)break;var Z=U.transferSize,se=U.initiatorType;Z&&X_(se)&&(U=U.responseEnd,C+=Z*(U<b?1:(b-J)/(U-J)))}if(--u,r+=8*(_+C)/(y.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Hh=null,Gh=null;function kc(i){return i.nodeType===9?i:i.ownerDocument}function W_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Z_(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function Yh(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Jh=null;function OI(){var i=window.event;return i&&i.type==="popstate"?i===Jh?!1:(Jh=i,!0):(Jh=null,!1)}var ev=typeof setTimeout=="function"?setTimeout:void 0,qI=typeof clearTimeout=="function"?clearTimeout:void 0,tv=typeof Promise=="function"?Promise:void 0,BI=typeof queueMicrotask=="function"?queueMicrotask:typeof tv<"u"?function(i){return tv.resolve(null).then(i).catch(FI)}:ev;function FI(i){setTimeout(function(){throw i})}function $s(i){return i==="head"}function nv(i,r){var a=r,u=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(u===0){i.removeChild(y),Zo(r);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")Nl(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,Nl(a);for(var _=a.firstChild;_;){var C=_.nextSibling,b=_.nodeName;_[_i]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=C}}else a==="body"&&Nl(i.ownerDocument.body);a=y}while(a);Zo(r)}function iv(i,r){var a=i;i=0;do{var u=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=u}while(a)}function jh(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":jh(a),po(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function zI(i,r,a,u){for(;i.nodeType===1;){var y=a;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[_i])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Gn(i.nextSibling),i===null)break}return null}function HI(i,r,a){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Gn(i.nextSibling),i===null))return null;return i}function sv(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Gn(i.nextSibling),i===null))return null;return i}function Kh(i){return i.data==="$?"||i.data==="$~"}function $h(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function GI(i,r){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||a.readyState!=="loading")r();else{var u=function(){r(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Gn(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var Qh=null;function rv(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(r===0)return Gn(i.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}i=i.nextSibling}return null}function ov(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return i;r--}else a!=="/$"&&a!=="/&"||r++}i=i.previousSibling}return null}function av(i,r,a){switch(r=kc(a),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Nl(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);po(i)}var Yn=new Map,lv=new Set;function Uc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ls=de.d;de.d={f:YI,r:JI,D:jI,C:KI,L:$I,m:QI,X:WI,S:XI,M:ZI};function YI(){var i=ls.f(),r=xc();return i||r}function JI(i){var r=Vn(i);r!==null&&r.tag===5&&r.type==="form"?Iy(r):ls.r(i)}var Qo=typeof document>"u"?null:document;function uv(i,r,a){var u=Qo;if(u&&typeof r=="string"&&r){var y=pn(r);y='link[rel="'+i+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),lv.has(y)||(lv.add(y),i={rel:i,crossOrigin:a,href:r},u.querySelector(y)===null&&(r=u.createElement("link"),nn(r,"link",i),Rt(r),u.head.appendChild(r)))}}function jI(i){ls.D(i),uv("dns-prefetch",i,null)}function KI(i,r){ls.C(i,r),uv("preconnect",i,r)}function $I(i,r,a){ls.L(i,r,a);var u=Qo;if(u&&i&&r){var y='link[rel="preload"][as="'+pn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+pn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+pn(a.imageSizes)+'"]')):y+='[href="'+pn(i)+'"]';var _=y;switch(r){case"style":_=Xo(i);break;case"script":_=Wo(i)}Yn.has(_)||(i=E({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:i,as:r},a),Yn.set(_,i),u.querySelector(y)!==null||r==="style"&&u.querySelector(Ml(_))||r==="script"&&u.querySelector(Dl(_))||(r=u.createElement("link"),nn(r,"link",i),Rt(r),u.head.appendChild(r)))}}function QI(i,r){ls.m(i,r);var a=Qo;if(a&&i){var u=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+pn(u)+'"][href="'+pn(i)+'"]',_=y;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Wo(i)}if(!Yn.has(_)&&(i=E({rel:"modulepreload",href:i},r),Yn.set(_,i),a.querySelector(y)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Dl(_)))return}u=a.createElement("link"),nn(u,"link",i),Rt(u),a.head.appendChild(u)}}}function XI(i,r,a){ls.S(i,r,a);var u=Qo;if(u&&i){var y=Ti(u).hoistableStyles,_=Xo(i);r=r||"default";var C=y.get(_);if(!C){var b={loading:0,preload:null};if(C=u.querySelector(Ml(_)))b.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":r},a),(a=Yn.get(_))&&Xh(i,a);var U=C=u.createElement("link");Rt(U),nn(U,"link",i),U._p=new Promise(function(J,Z){U.onload=J,U.onerror=Z}),U.addEventListener("load",function(){b.loading|=1}),U.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Lc(C,r,u)}C={type:"stylesheet",instance:C,count:1,state:b},y.set(_,C)}}}function WI(i,r){ls.X(i,r);var a=Qo;if(a&&i){var u=Ti(a).hoistableScripts,y=Wo(i),_=u.get(y);_||(_=a.querySelector(Dl(y)),_||(i=E({src:i,async:!0},r),(r=Yn.get(y))&&Wh(i,r),_=a.createElement("script"),Rt(_),nn(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(y,_))}}function ZI(i,r){ls.M(i,r);var a=Qo;if(a&&i){var u=Ti(a).hoistableScripts,y=Wo(i),_=u.get(y);_||(_=a.querySelector(Dl(y)),_||(i=E({src:i,async:!0,type:"module"},r),(r=Yn.get(y))&&Wh(i,r),_=a.createElement("script"),Rt(_),nn(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(y,_))}}function cv(i,r,a,u){var y=(y=Re.current)?Uc(y):null;if(!y)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Xo(a.href),a=Ti(y).hoistableStyles,u=a.get(r),u||(u={type:"style",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=Xo(a.href);var _=Ti(y).hoistableStyles,C=_.get(i);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,C),(_=y.querySelector(Ml(i)))&&!_._p&&(C.instance=_,C.state.loading=5),Yn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Yn.set(i,a),_||eb(y,i,a,C.state))),r&&u===null)throw Error(s(528,""));return C}if(r&&u!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Wo(a),a=Ti(y).hoistableScripts,u=a.get(r),u||(u={type:"script",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Xo(i){return'href="'+pn(i)+'"'}function Ml(i){return'link[rel="stylesheet"]['+i+"]"}function dv(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function eb(i,r,a,u){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=i.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),nn(r,"link",a),Rt(r),i.head.appendChild(r))}function Wo(i){return'[src="'+pn(i)+'"]'}function Dl(i){return"script[async]"+i}function fv(i,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var u=i.querySelector('style[data-href~="'+pn(a.href)+'"]');if(u)return r.instance=u,Rt(u),u;var y=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Rt(u),nn(u,"style",y),Lc(u,a.precedence,i),r.instance=u;case"stylesheet":y=Xo(a.href);var _=i.querySelector(Ml(y));if(_)return r.state.loading|=4,r.instance=_,Rt(_),_;u=dv(a),(y=Yn.get(y))&&Xh(u,y),_=(i.ownerDocument||i).createElement("link"),Rt(_);var C=_;return C._p=new Promise(function(b,U){C.onload=b,C.onerror=U}),nn(_,"link",u),r.state.loading|=4,Lc(_,a.precedence,i),r.instance=_;case"script":return _=Wo(a.src),(y=i.querySelector(Dl(_)))?(r.instance=y,Rt(y),y):(u=a,(y=Yn.get(_))&&(u=E({},a),Wh(u,y)),i=i.ownerDocument||i,y=i.createElement("script"),Rt(y),nn(y,"link",u),i.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,Lc(u,a.precedence,i));return r.instance}function Lc(i,r,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=u.length?u[u.length-1]:null,_=y,C=0;C<u.length;C++){var b=u[C];if(b.dataset.precedence===r)_=b;else if(_!==y)break}_?_.parentNode.insertBefore(i,_.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(i,r.firstChild))}function Xh(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function Wh(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Oc=null;function hv(i,r,a){if(Oc===null){var u=new Map,y=Oc=new Map;y.set(a,u)}else y=Oc,u=y.get(a),u||(u=new Map,y.set(a,u));if(u.has(i))return u;for(u.set(i,null),a=a.getElementsByTagName(i),y=0;y<a.length;y++){var _=a[y];if(!(_[_i]||_[wt]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var C=_.getAttribute(r)||"";C=i+C;var b=u.get(C);b?b.push(_):u.set(C,[_])}}return u}function mv(i,r,a){i=i.ownerDocument||i,i.head.insertBefore(a,r==="title"?i.querySelector("head > title"):null)}function tb(i,r,a){if(a===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function pv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function nb(i,r,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=Xo(u.href),_=r.querySelector(Ml(y));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=qc.bind(i),r.then(i,i)),a.state.loading|=4,a.instance=_,Rt(_);return}_=r.ownerDocument||r,u=dv(u),(y=Yn.get(y))&&Xh(u,y),_=_.createElement("link"),Rt(_);var C=_;C._p=new Promise(function(b,U){C.onload=b,C.onerror=U}),nn(_,"link",u),a.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=qc.bind(i),r.addEventListener("load",a),r.addEventListener("error",a))}}var Zh=0;function ib(i,r){return i.stylesheets&&i.count===0&&Fc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var u=setTimeout(function(){if(i.stylesheets&&Fc(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+r);0<i.imgBytes&&Zh===0&&(Zh=62500*LI());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Fc(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>Zh?50:800)+r);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(y)}}:null}function qc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Bc=null;function Fc(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Bc=new Map,r.forEach(sb,i),Bc=null,qc.call(i))}function sb(i,r){if(!(r.state.loading&4)){var a=Bc.get(i);if(a)var u=a.get(null);else{a=new Map,Bc.set(i,a);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var C=y[_];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(a.set(C.dataset.precedence,C),u=C)}u&&a.set(null,u)}y=r.instance,C=y.getAttribute("data-precedence"),_=a.get(C)||u,_===u&&a.set(null,y),a.set(C,y),this.count++,u=qc.bind(this),y.addEventListener("load",u),y.addEventListener("error",u),_?_.parentNode.insertBefore(y,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),r.state.loading|=4}}var Pl={$$typeof:Q,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function rb(i,r,a,u,y,_,C,b,U){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gi(0),this.hiddenUpdates=gi(null),this.identifierPrefix=u,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function gv(i,r,a,u,y,_,C,b,U,J,Z,se){return i=new rb(i,r,a,C,U,J,Z,se,b),r=1,_===!0&&(r|=24),_=bn(3,null,null,r),i.current=_,_.stateNode=i,r=Df(),r.refCount++,i.pooledCache=r,r.refCount++,_.memoizedState={element:u,isDehydrated:a,cache:r},Uf(_),i}function yv(i){return i?(i=Ro,i):Ro}function _v(i,r,a,u,y,_){y=yv(y),u.context===null?u.context=y:u.pendingContext=y,u=Os(r),u.payload={element:a},_=_===void 0?null:_,_!==null&&(u.callback=_),a=qs(i,u,r),a!==null&&(En(a,i,r),dl(a,i,r))}function vv(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<r?a:r}}function em(i,r){vv(i,r),(i=i.alternate)&&vv(i,r)}function Tv(i){if(i.tag===13||i.tag===31){var r=Lr(i,67108864);r!==null&&En(r,i,67108864),em(i,67108864)}}function Ev(i){if(i.tag===13||i.tag===31){var r=Mn();r=Ir(r);var a=Lr(i,r);a!==null&&En(a,i,r),em(i,r)}}var zc=!0;function ob(i,r,a,u){var y=W.T;W.T=null;var _=de.p;try{de.p=2,tm(i,r,a,u)}finally{de.p=_,W.T=y}}function ab(i,r,a,u){var y=W.T;W.T=null;var _=de.p;try{de.p=8,tm(i,r,a,u)}finally{de.p=_,W.T=y}}function tm(i,r,a,u){if(zc){var y=nm(u);if(y===null)Fh(i,r,u,Hc,a),Av(i,u);else if(ub(y,i,r,a,u))u.stopPropagation();else if(Av(i,u),r&4&&-1<lb.indexOf(i)){for(;y!==null;){var _=Vn(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var C=mi(_.pendingLanes);if(C!==0){var b=_;for(b.pendingLanes|=2,b.entangledLanes|=2;C;){var U=1<<31-Et(C);b.entanglements[1]|=U,C&=~U}Pi(_),(Xe&6)===0&&(Ic=dn()+500,xl(0))}}break;case 31:case 13:b=Lr(_,2),b!==null&&En(b,_,2),xc(),em(_,2)}if(_=nm(u),_===null&&Fh(i,r,u,Hc,a),_===y)break;y=_}y!==null&&u.stopPropagation()}else Fh(i,r,u,null,a)}}function nm(i){return i=kn(i),im(i)}var Hc=null;function im(i){if(Hc=null,i=vi(i),i!==null){var r=l(i);if(r===null)i=null;else{var a=r.tag;if(a===13){if(i=c(r),i!==null)return i;i=null}else if(a===31){if(i=d(r),i!==null)return i;i=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Hc=i,null}function Sv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Er()){case Ua:return 2;case La:return 8;case As:case uf:return 32;case Eu:return 268435456;default:return 32}default:return 32}}var sm=!1,Qs=null,Xs=null,Ws=null,Vl=new Map,kl=new Map,Zs=[],lb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Av(i,r){switch(i){case"focusin":case"focusout":Qs=null;break;case"dragenter":case"dragleave":Xs=null;break;case"mouseover":case"mouseout":Ws=null;break;case"pointerover":case"pointerout":Vl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":kl.delete(r.pointerId)}}function Ul(i,r,a,u,y,_){return i===null||i.nativeEvent!==_?(i={blockedOn:r,domEventName:a,eventSystemFlags:u,nativeEvent:_,targetContainers:[y]},r!==null&&(r=Vn(r),r!==null&&Tv(r)),i):(i.eventSystemFlags|=u,r=i.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),i)}function ub(i,r,a,u,y){switch(r){case"focusin":return Qs=Ul(Qs,i,r,a,u,y),!0;case"dragenter":return Xs=Ul(Xs,i,r,a,u,y),!0;case"mouseover":return Ws=Ul(Ws,i,r,a,u,y),!0;case"pointerover":var _=y.pointerId;return Vl.set(_,Ul(Vl.get(_)||null,i,r,a,u,y)),!0;case"gotpointercapture":return _=y.pointerId,kl.set(_,Ul(kl.get(_)||null,i,r,a,u,y)),!0}return!1}function Cv(i){var r=vi(i.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=c(a),r!==null){i.blockedOn=r,Qn(i.priority,function(){Ev(a)});return}}else if(r===31){if(r=d(a),r!==null){i.blockedOn=r,Qn(i.priority,function(){Ev(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Gc(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var a=nm(i.nativeEvent);if(a===null){a=i.nativeEvent;var u=new a.constructor(a.type,a);$a=u,a.target.dispatchEvent(u),$a=null}else return r=Vn(a),r!==null&&Tv(r),i.blockedOn=a,!1;r.shift()}return!0}function Iv(i,r,a){Gc(i)&&a.delete(r)}function cb(){sm=!1,Qs!==null&&Gc(Qs)&&(Qs=null),Xs!==null&&Gc(Xs)&&(Xs=null),Ws!==null&&Gc(Ws)&&(Ws=null),Vl.forEach(Iv),kl.forEach(Iv)}function Yc(i,r){i.blockedOn===r&&(i.blockedOn=null,sm||(sm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,cb)))}var Jc=null;function bv(i){Jc!==i&&(Jc=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Jc===i&&(Jc=null);for(var r=0;r<i.length;r+=3){var a=i[r],u=i[r+1],y=i[r+2];if(typeof u!="function"){if(im(u||a)===null)continue;break}var _=Vn(a);_!==null&&(i.splice(r,3),r-=3,nh(_,{pending:!0,data:y,method:a.method,action:u},u,y))}}))}function Zo(i){function r(U){return Yc(U,i)}Qs!==null&&Yc(Qs,i),Xs!==null&&Yc(Xs,i),Ws!==null&&Yc(Ws,i),Vl.forEach(r),kl.forEach(r);for(var a=0;a<Zs.length;a++){var u=Zs[a];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Zs.length&&(a=Zs[0],a.blockedOn===null);)Cv(a),a.blockedOn===null&&Zs.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var y=a[u],_=a[u+1],C=y[Gt]||null;if(typeof _=="function")C||bv(a);else if(C){var b=null;if(_&&_.hasAttribute("formAction")){if(y=_,C=_[Gt]||null)b=C.formAction;else if(im(y)!==null)continue}else b=C.action;typeof b=="function"?a[u+1]=b:(a.splice(u,3),u-=3),bv(a)}}}function xv(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(C){return y=C})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function rm(i){this._internalRoot=i}jc.prototype.render=rm.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,u=Mn();_v(a,u,i,r,null,null)},jc.prototype.unmount=rm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;_v(i.current,2,null,i,null,null),xc(),r[yi]=null}};function jc(i){this._internalRoot=i}jc.prototype.unstable_scheduleHydration=function(i){if(i){var r=xu();i={blockedOn:null,target:i,priority:r};for(var a=0;a<Zs.length&&r!==0&&r<Zs[a].priority;a++);Zs.splice(a,0,i),a===0&&Cv(i)}};var wv=e.version;if(wv!=="19.2.0")throw Error(s(527,wv,"19.2.0"));de.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=m(r),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var db={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kc.isDisabled&&Kc.supportsFiber)try{Kn=Kc.inject(db),Xt=Kc}catch{}}return Ol.createRoot=function(i,r){if(!o(i))throw Error(s(299));var a=!1,u="",y=ky,_=Uy,C=Ly;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError)),r=gv(i,1,!1,null,null,a,u,null,y,_,C,xv),i[yi]=r.current,Bh(i),new rm(r)},Ol.hydrateRoot=function(i,r,a){if(!o(i))throw Error(s(299));var u=!1,y="",_=ky,C=Uy,b=Ly,U=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(C=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(U=a.formState)),r=gv(i,1,!0,r,a??null,u,y,U,_,C,b,xv),r.context=yv(null),a=r.current,u=Mn(),u=Ir(u),y=Os(u),y.callback=null,qs(a,y,u),a=u,r.current.lanes=a,Ar(r,a),Pi(r),i[yi]=r.current,Bh(i),new jc(r)},Ol.version="19.2.0",Ol}var Ov;function Sb(){if(Ov)return lm.exports;Ov=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),lm.exports=Eb(),lm.exports}var Ab=Sb();const Cb=N0(Ab),Ib="modulepreload",bb=function(n){return"/fd/"+n},qv={},or=function(e,t,s){let o=Promise.resolve();if(t&&t.length>0){let c=function(m){return Promise.all(m.map(v=>Promise.resolve(v).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));o=c(t.map(m=>{if(m=bb(m),m in qv)return;qv[m]=!0;const v=m.endsWith(".css"),E=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${E}`))return;const A=document.createElement("link");if(A.rel=v?"stylesheet":Ib,v||(A.as="script"),A.crossOrigin="",A.href=m,p&&A.setAttribute("nonce",p),document.head.appendChild(A),v)return new Promise((x,L)=>{A.addEventListener("load",x),A.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${m}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return o.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})},fm=()=>({transactions:[],categories:[{id:"cat-1",name:"بقالة",icon:"🛒"},{id:"cat-2",name:"مطاعم",icon:"🍔"},{id:"cat-3",name:"وقود",icon:"⛽"},{id:"cat-4",name:"فواتير",icon:"🧾"},{id:"cat-9",name:"سداد فواتير",icon:"💳"},{id:"cat-5",name:"تسوق",icon:"🛍️"},{id:"cat-6",name:"إيجار",icon:"🏠"},{id:"cat-8",name:"صيدلية",icon:"💊"},{id:"cat-7",name:"أخرى",icon:"💸"}],installments:[],investments:{currentValue:0},cards:{"snb-card":{id:"snb-card",name:"SNB الأهلي",limit:26e3,dueDay:15,statementDay:25,smsSamples:["SNB","الأهلي","إئتمانية"]},"enbd-card":{id:"enbd-card",name:"ENBD الإمارات",limit:1e4,dueDay:18,statementDay:28,smsSamples:["ENBD","الإمارات","Visa card"]}},bankAccounts:{"bank-default":{id:"bank-default",name:"حساب البنك",balance:0,smsSamples:["مدى","mada","Alrajhi","الراجحي","Inma","الإنماء","بنك"]}}});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let xb,wb;function Rb(){return{geminiUrl:xb,vertexUrl:wb}}function Nb(n,e,t,s){var o,l;if(!(n!=null&&n.baseUrl)){const c=Rb();return e?(o=c.vertexUrl)!==null&&o!==void 0?o:t:(l=c.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ao{}function ge(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function g(n,e,t){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const d=c.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[d])){const p=n[d];if(Array.isArray(t))for(let m=0;m<p.length;m++){const v=p[m];g(v,e.slice(l+1),t[m])}else for(const m of p)g(m,e.slice(l+1),t)}return}else if(c.endsWith("[0]")){const d=c.slice(0,-3);d in n||(n[d]=[{}]);const p=n[d];g(p[0],e.slice(l+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const s=e[e.length-1],o=n[s];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const o=e[s];if(o.endsWith("[]")){const l=o.slice(0,-2);if(l in n){const c=n[l];return Array.isArray(c)?c.map(d=>f(d,e.slice(s+1),t)):t}else return t}else n=n[o]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mp(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mb(n){const e={},t=f(n,["operationName"]);t!=null&&g(e,["operationName"],t);const s=f(n,["resourceName"]);return s!=null&&g(e,["_url","resourceName"],s),e}function Db(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&g(e,["response"],Vb(c)),e}function Pb(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["response"]);return c!=null&&g(e,["response"],kb(c)),e}function Vb(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>Ub(c))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function kb(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>Lb(c))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function Ub(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],Bb(t)),e}function Lb(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],Fb(t)),e}function Ob(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function qb(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function Bb(n){const e={},t=f(n,["video","uri"]);t!=null&&g(e,["uri"],t);const s=f(n,["video","encodedVideo"]);s!=null&&g(e,["videoBytes"],mp(s));const o=f(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function Fb(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],mp(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Bv;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Bv||(Bv={}));var Fv;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Fv||(Fv={}));var ar;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(ar||(ar={}));var zv;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(zv||(zv={}));var Hv;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Hv||(Hv={}));var Gv;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Gv||(Gv={}));var Yv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Yv||(Yv={}));var Jv;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Jv||(Jv={}));var jv;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(jv||(jv={}));var Kv;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Kv||(Kv={}));var $v;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})($v||($v={}));var Qv;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Qv||(Qv={}));var Xv;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Xv||(Xv={}));var Wv;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY"})(Wv||(Wv={}));var Zv;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Zv||(Zv={}));var md;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(md||(md={}));var eT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(eT||(eT={}));var Vm;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Vm||(Vm={}));var tT;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(tT||(tT={}));var nT;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(nT||(nT={}));var iT;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V"})(iT||(iT={}));var sT;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(sT||(sT={}));var rT;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(rT||(rT={}));var oT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(oT||(oT={}));var aT;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(aT||(aT={}));var lT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(lT||(lT={}));var uT;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(uT||(uT={}));var cT;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(cT||(cT={}));var dT;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(dT||(dT={}));var fT;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(fT||(fT={}));var hT;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(hT||(hT={}));var mT;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(mT||(mT={}));var pT;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(pT||(pT={}));var gT;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(gT||(gT={}));var yT;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(yT||(yT={}));var _T;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(_T||(_T={}));var vT;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(vT||(vT={}));var TT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(TT||(TT={}));var ET;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(ET||(ET={}));var ST;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(ST||(ST={}));var AT;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(AT||(AT={}));var CT;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(CT||(CT={}));var IT;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(IT||(IT={}));var bT;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(bT||(bT={}));var xT;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(xT||(xT={}));var wT;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(wT||(wT={}));var RT;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(RT||(RT={}));var NT;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(NT||(NT={}));var sa;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(sa||(sa={}));class km{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class ql{get text(){var e,t,s,o,l,c,d,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const E=[];for(const A of(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[x,L]of Object.entries(A))x!=="text"&&x!=="thought"&&(L!==null||L!==void 0)&&E.push(x);if(typeof A.text=="string"){if(typeof A.thought=="boolean"&&A.thought)continue;v=!0,m+=A.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,t,s,o,l,c,d,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const E of(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[A,x]of Object.entries(E))A!=="inlineData"&&(x!==null||x!==void 0)&&v.push(A);E.inlineData&&typeof E.inlineData.data=="string"&&(m+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,s,o,l,c,d,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,s,o,l,c,d,p,m;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,s,o,l,c,d,p,m;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class MT{}class DT{}class zb{}class Hb{}class Gb{}class Yb{}class PT{}class VT{}class kT{}class Jb{}class pd{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const s=new pd;let o;const l=e;return t?o=Pb(l):o=Db(l),Object.assign(s,o),s}}class UT{}class LT{}class OT{}class jb{}class Kb{}class $b{}class qT{}class Qb{get text(){var e,t,s;let o="",l=!1;const c=[];for(const d of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[p,m]of Object.entries(d))p!=="text"&&p!=="thought"&&m!==null&&c.push(p);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,o+=d.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var e,t,s;let o="";const l=[];for(const c of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[d,p]of Object.entries(c))d!=="inlineData"&&p!==null&&l.push(d);c.inlineData&&typeof c.inlineData.data=="string"&&(o+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class Xb{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $e(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function M0(n,e){const t=$e(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function D0(n){return Array.isArray(n)?n.map(e=>gd(e)):[gd(n)]}function gd(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function P0(n){const e=gd(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function V0(n){const e=gd(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function BT(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function k0(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>BT(e)):[BT(n)]}function Um(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function FT(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function zT(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function un(n){if(n==null)throw new Error("ContentUnion is required");return Um(n)?n:{role:"user",parts:k0(n)}}function pp(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=un(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=un(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>un(t)):[un(e)]}function jn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(FT(n)||zT(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[un(n)]}const e=[],t=[],s=Um(n[0]);for(const o of n){const l=Um(o);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(o);else{if(FT(o)||zT(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return s||e.push({role:"user",parts:k0(t)}),e}function Wb(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(ar).includes(t[0].toUpperCase())?t[0].toUpperCase():ar.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(ar).includes(s.toUpperCase())?s.toUpperCase():ar.TYPE_UNSPECIFIED})}}function aa(n){const e={},t=["items"],s=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&Wb(n.type,e);for(const[c,d]of Object.entries(n))if(d!=null)if(c=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(ar).includes(d.toUpperCase())?d.toUpperCase():ar.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=aa(d);else if(s.includes(c)){const p=[];for(const m of d){if(m.type=="null"){e.nullable=!0;continue}p.push(aa(m))}e[c]=p}else if(o.includes(c)){const p={};for(const[m,v]of Object.entries(d))p[m]=aa(v);e[c]=p}else{if(c==="additionalProperties")continue;e[c]=d}return e}function gp(n){return aa(n)}function yp(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function _p(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Aa(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=aa(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=aa(e.response));return n}function Ca(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function Zb(n,e,t,s=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function Ts(n,e){if(typeof e!="string")throw new Error("name must be a string");return Zb(n,e,"cachedContents")}function U0(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Tr(n){return mp(n)}function ex(n){return n!=null&&typeof n=="object"&&"name"in n}function tx(n){return n!=null&&typeof n=="object"&&"video"in n}function nx(n){return n!=null&&typeof n=="object"&&"uri"in n}function L0(n){var e;let t;if(ex(n)&&(t=n.name),!(nx(n)&&(t=n.uri,t===void 0))&&!(tx(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function O0(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function q0(n){for(const e of["models","tunedModels","publisherModels"])if(ix(n,e))return n[e];return[]}function ix(n,e){return n!==null&&typeof n=="object"&&e in n}function sx(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function rx(n,e={}){const t=[],s=new Set;for(const o of n){const l=o.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const c=sx(o,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function B0(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function ox(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function F0(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let l=!1;for(const c of o){if(typeof c!="object"||c===null)continue;const p=c.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Ia(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function z0(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ax(n){const e={},t=f(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const s=f(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Lx(c))),g(e,["inlinedResponses"],l)}const o=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["inlinedEmbedContentResponses"],l)}return e}function lx(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const s=f(n,["gcsDestination","outputUriPrefix"]);s!=null&&g(e,["gcsUri"],s);const o=f(n,["bigqueryDestination","outputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function ux(n){const e={},t=f(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const s=f(n,["gcsUri"]);s!=null&&g(e,["gcsDestination","outputUriPrefix"],s);const o=f(n,["bigqueryUri"]);if(o!=null&&g(e,["bigqueryDestination","outputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Fl(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata","displayName"]);s!=null&&g(e,["displayName"],s);const o=f(n,["metadata","state"]);o!=null&&g(e,["state"],z0(o));const l=f(n,["metadata","createTime"]);l!=null&&g(e,["createTime"],l);const c=f(n,["metadata","endTime"]);c!=null&&g(e,["endTime"],c);const d=f(n,["metadata","updateTime"]);d!=null&&g(e,["updateTime"],d);const p=f(n,["metadata","model"]);p!=null&&g(e,["model"],p);const m=f(n,["metadata","output"]);return m!=null&&g(e,["dest"],ax(F0(m))),e}function Lm(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const o=f(n,["state"]);o!=null&&g(e,["state"],z0(o));const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["createTime"]);c!=null&&g(e,["createTime"],c);const d=f(n,["startTime"]);d!=null&&g(e,["startTime"],d);const p=f(n,["endTime"]);p!=null&&g(e,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(e,["updateTime"],m);const v=f(n,["model"]);v!=null&&g(e,["model"],v);const E=f(n,["inputConfig"]);E!=null&&g(e,["src"],cx(E));const A=f(n,["outputConfig"]);return A!=null&&g(e,["dest"],lx(F0(A))),e}function cx(n){const e={},t=f(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const s=f(n,["gcsSource","uris"]);s!=null&&g(e,["gcsUri"],s);const o=f(n,["bigquerySource","inputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function dx(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&g(t,["fileName"],s);const o=f(e,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Ux(n,c))),g(t,["requests","requests"],l)}return t}function fx(n){const e={},t=f(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const s=f(n,["gcsUri"]);s!=null&&g(e,["gcsSource","uris"],s);const o=f(n,["bigqueryUri"]);if(o!=null&&g(e,["bigquerySource","inputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function hx(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&g(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function mx(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ia(n,s)),t}function px(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ia(n,s)),t}function gx(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],yx(s));const o=f(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const l=f(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const c=f(n,["urlContextMetadata"]);c!=null&&g(e,["urlContextMetadata"],c);const d=f(n,["avgLogprobs"]);d!=null&&g(e,["avgLogprobs"],d);const p=f(n,["groundingMetadata"]);p!=null&&g(e,["groundingMetadata"],p);const m=f(n,["index"]);m!=null&&g(e,["index"],m);const v=f(n,["logprobsResult"]);v!=null&&g(e,["logprobsResult"],v);const E=f(n,["safetyRatings"]);if(E!=null){let A=E;Array.isArray(A)&&(A=A.map(x=>x)),g(e,["safetyRatings"],A)}return e}function yx(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["citations"],s)}return e}function H0(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>Gx(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function _x(n,e){const t={},s=f(n,["displayName"]);if(e!==void 0&&s!=null&&g(e,["batch","displayName"],s),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function vx(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const o=f(n,["dest"]);return e!==void 0&&o!=null&&g(e,["outputConfig"],ux(ox(o))),t}function HT(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],$e(n,s));const o=f(e,["src"]);o!=null&&g(t,["batch","inputConfig"],dx(n,B0(n,o)));const l=f(e,["config"]);return l!=null&&_x(l,t),t}function Tx(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],$e(n,s));const o=f(e,["src"]);o!=null&&g(t,["inputConfig"],fx(B0(n,o)));const l=f(e,["config"]);return l!=null&&vx(l,t),t}function Ex(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["batch","displayName"],s),t}function hm(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],$e(n,s));const o=f(e,["src"]);o!=null&&g(t,["batch","inputConfig"],wx(n,o));const l=f(e,["config"]);return l!=null&&Ex(l,t),t}function Sx(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ia(n,s)),t}function Ax(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ia(n,s)),t}function Cx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);return l!=null&&g(e,["error"],l),e}function Ix(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);return l!=null&&g(e,["error"],l),e}function bx(n,e){const t={},s=f(e,["contents"]);if(s!=null){let l=pp(n,s);Array.isArray(l)&&(l=l.map(c=>c)),g(t,["requests[]","request","content"],l)}const o=f(e,["config"]);return o!=null&&g(t,["_self"],xx(o,t)),t}function xx(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function wx(n,e){const t={},s=f(e,["fileName"]);s!=null&&g(t,["file_name"],s);const o=f(e,["inlinedRequests"]);return o!=null&&g(t,["requests"],bx(n,o)),t}function Rx(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Nx(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],H0(un(o)));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&g(s,["topP"],c);const d=f(e,["topK"]);d!=null&&g(s,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&g(s,["responseLogprobs"],E);const A=f(e,["logprobs"]);A!=null&&g(s,["logprobs"],A);const x=f(e,["presencePenalty"]);x!=null&&g(s,["presencePenalty"],x);const L=f(e,["frequencyPenalty"]);L!=null&&g(s,["frequencyPenalty"],L);const B=f(e,["seed"]);B!=null&&g(s,["seed"],B);const z=f(e,["responseMimeType"]);z!=null&&g(s,["responseMimeType"],z);const ee=f(e,["responseSchema"]);ee!=null&&g(s,["responseSchema"],gp(ee));const te=f(e,["responseJsonSchema"]);if(te!=null&&g(s,["responseJsonSchema"],te),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Q=f(e,["safetySettings"]);if(t!==void 0&&Q!=null){let O=Q;Array.isArray(O)&&(O=O.map(P=>Yx(P))),g(t,["safetySettings"],O)}const F=f(e,["tools"]);if(t!==void 0&&F!=null){let O=Ca(F);Array.isArray(O)&&(O=O.map(P=>Jx(Aa(P)))),g(t,["tools"],O)}const ne=f(e,["toolConfig"]);if(t!==void 0&&ne!=null&&g(t,["toolConfig"],ne),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ae=f(e,["cachedContent"]);t!==void 0&&ae!=null&&g(t,["cachedContent"],Ts(n,ae));const N=f(e,["responseModalities"]);N!=null&&g(s,["responseModalities"],N);const M=f(e,["mediaResolution"]);M!=null&&g(s,["mediaResolution"],M);const R=f(e,["speechConfig"]);if(R!=null&&g(s,["speechConfig"],yp(R)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=f(e,["thinkingConfig"]);V!=null&&g(s,["thinkingConfig"],V);const k=f(e,["imageConfig"]);return k!=null&&g(s,["imageConfig"],k),s}function Mx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>gx(m))),g(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const l=f(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&g(e,["responseId"],c);const d=f(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function Dx(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ia(n,s)),t}function Px(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ia(n,s)),t}function Vx(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function kx(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&g(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Ux(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["request","model"],$e(n,s));const o=f(e,["contents"]);if(o!=null){let d=jn(o);Array.isArray(d)&&(d=d.map(p=>H0(p))),g(t,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&g(t,["metadata"],l);const c=f(e,["config"]);return c!=null&&g(t,["request","generationConfig"],Nx(n,c,f(t,["request"],{}))),t}function Lx(n){const e={},t=f(n,["response"]);t!=null&&g(e,["response"],Mx(t));const s=f(n,["error"]);return s!=null&&g(e,["error"],s),e}function Ox(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);if(e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function qx(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const l=f(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),t}function Bx(n){const e={},t=f(n,["config"]);return t!=null&&Ox(t,e),e}function Fx(n){const e={},t=f(n,["config"]);return t!=null&&qx(t,e),e}function zx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Fl(c))),g(e,["batchJobs"],l)}return e}function Hx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Lm(c))),g(e,["batchJobs"],l)}return e}function Gx(n){const e={},t=f(n,["videoMetadata"]);t!=null&&g(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&g(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&g(e,["inlineData"],hx(o));const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],Rx(l));const c=f(n,["thoughtSignature"]);c!=null&&g(e,["thoughtSignature"],c);const d=f(n,["functionCall"]);d!=null&&g(e,["functionCall"],d);const p=f(n,["codeExecutionResult"]);p!=null&&g(e,["codeExecutionResult"],p);const m=f(n,["executableCode"]);m!=null&&g(e,["executableCode"],m);const v=f(n,["functionResponse"]);v!=null&&g(e,["functionResponse"],v);const E=f(n,["text"]);return E!=null&&g(e,["text"],E),e}function Yx(n){const e={};if(f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=f(n,["category"]);t!=null&&g(e,["category"],t);const s=f(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function Jx(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&g(e,["googleSearch"],kx(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&g(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],Vx(l));const c=f(n,["urlContext"]);c!=null&&g(e,["urlContext"],c);const d=f(n,["computerUse"]);d!=null&&g(e,["computerUse"],d);const p=f(n,["codeExecution"]);return p!=null&&g(e,["codeExecution"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var eo;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(eo||(eo={}));class ou{constructor(e,t,s,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,o)}init(e,t,s){var o,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(o=c.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jx extends ao{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{var s,o;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(t.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(t);const d=this.createInlinedEmbedContentRequest(t),p=d.path,m=d.body,v=hm(this.apiClient,t)._query||{};return this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(A=>A.json()).then(A=>Fl(A))},this.list=async(t={})=>new ou(eo.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=HT(this.apiClient,e),s=t._url,o=ge("{model}:batchGenerateContent",s),d=t.batch.inputConfig.requests,p=d.requests,m=[];for(const v of p){const E=Object.assign({},v);if(E.systemInstruction){const A=E.systemInstruction;delete E.systemInstruction;const x=E.request;x.systemInstruction=A,E.request=x}m.push(E)}return d.requests=m,delete t.config,delete t._url,delete t._query,{path:o,body:t}}createInlinedEmbedContentRequest(e){const t=hm(this.apiClient,e),s=t._url,o=ge("{model}:asyncBatchEmbedContent",s),d=t.batch.inputConfig.requests,p=d.requests,m=[];delete d.config;for(const v of p){const E=Object.assign({},v),A=E.request;for(const x in E)x!=="request"&&(A[x]=E[x],delete E[x]);m.push(E)}return d.requests=m,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},o=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${o}`),s.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${o}`;else if(c)s.dest=`${c}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=Tx(this.apiClient,e);return d=ge("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Lm(v))}else{const m=HT(this.apiClient,e);return d=ge("{model}:batchGenerateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Fl(v))}}async createEmbeddingsInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=hm(this.apiClient,e);return l=ge("{model}:asyncBatchEmbedContent",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>Fl(p))}}async get(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=Px(this.apiClient,e);return d=ge("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Lm(v))}else{const m=Dx(this.apiClient,e);return d=ge("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Fl(v))}}async cancel(e){var t,s,o,l;let c="",d={};if(this.apiClient.isVertexAI()){const p=px(this.apiClient,e);c=ge("batchPredictionJobs/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=mx(this.apiClient,e);c=ge("batches/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=Fx(e);return d=ge("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=Hx(v),A=new qT;return Object.assign(A,E),A})}else{const m=Bx(e);return d=ge("batches",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=zx(v),A=new qT;return Object.assign(A,E),A})}}async delete(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=Ax(this.apiClient,e);return d=ge("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>Ix(v))}else{const m=Sx(this.apiClient,e);return d=ge("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>Cx(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kx(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&g(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function GT(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>pw(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function $x(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const l=f(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let v=jn(c);Array.isArray(v)&&(v=v.map(E=>GT(E))),g(e,["contents"],v)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],GT(un(d)));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let v=p;Array.isArray(v)&&(v=v.map(E=>gw(E))),g(e,["tools"],v)}const m=f(n,["toolConfig"]);if(e!==void 0&&m!=null&&g(e,["toolConfig"],m),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function Qx(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const l=f(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let E=jn(c);Array.isArray(E)&&(E=E.map(A=>A)),g(e,["contents"],E)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],un(d));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let E=p;Array.isArray(E)&&(E=E.map(A=>yw(A))),g(e,["tools"],E)}const m=f(n,["toolConfig"]);e!==void 0&&m!=null&&g(e,["toolConfig"],m);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&g(e,["encryption_spec","kmsKeyName"],v),t}function Xx(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],M0(n,s));const o=f(e,["config"]);return o!=null&&$x(o,t),t}function Wx(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],M0(n,s));const o=f(e,["config"]);return o!=null&&Qx(o,t),t}function Zx(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ts(n,s)),t}function ew(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ts(n,s)),t}function tw(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function nw(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function iw(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function sw(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&g(e,["response"],c);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function rw(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ts(n,s)),t}function ow(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ts(n,s)),t}function aw(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function lw(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&g(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function uw(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function cw(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function dw(n){const e={},t=f(n,["config"]);return t!=null&&uw(t,e),e}function fw(n){const e={},t=f(n,["config"]);return t!=null&&cw(t,e),e}function hw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["cachedContents"],l)}return e}function mw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["cachedContents"],l)}return e}function pw(n){const e={},t=f(n,["videoMetadata"]);t!=null&&g(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&g(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&g(e,["inlineData"],Kx(o));const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],iw(l));const c=f(n,["thoughtSignature"]);c!=null&&g(e,["thoughtSignature"],c);const d=f(n,["functionCall"]);d!=null&&g(e,["functionCall"],d);const p=f(n,["codeExecutionResult"]);p!=null&&g(e,["codeExecutionResult"],p);const m=f(n,["executableCode"]);m!=null&&g(e,["executableCode"],m);const v=f(n,["functionResponse"]);v!=null&&g(e,["functionResponse"],v);const E=f(n,["text"]);return E!=null&&g(e,["text"],E),e}function gw(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&g(e,["googleSearch"],lw(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&g(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],aw(l));const c=f(n,["urlContext"]);c!=null&&g(e,["urlContext"],c);const d=f(n,["computerUse"]);d!=null&&g(e,["computerUse"],d);const p=f(n,["codeExecution"]);return p!=null&&g(e,["codeExecution"],p),e}function yw(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>sw(A))),g(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const o=f(n,["googleSearch"]);o!=null&&g(e,["googleSearch"],o);const l=f(n,["googleSearchRetrieval"]);l!=null&&g(e,["googleSearchRetrieval"],l);const c=f(n,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const p=f(n,["urlContext"]);p!=null&&g(e,["urlContext"],p);const m=f(n,["computerUse"]);m!=null&&g(e,["computerUse"],m);const v=f(n,["codeExecution"]);return v!=null&&g(e,["codeExecution"],v),e}function _w(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function vw(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function Tw(n,e){const t={},s=f(e,["name"]);s!=null&&g(t,["_url","name"],Ts(n,s));const o=f(e,["config"]);return o!=null&&_w(o,t),t}function Ew(n,e){const t={},s=f(e,["name"]);s!=null&&g(t,["_url","name"],Ts(n,s));const o=f(e,["config"]);return o!=null&&vw(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sw extends ao{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ou(eo.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=Wx(this.apiClient,e);return d=ge("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=Xx(this.apiClient,e);return d=ge("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=ow(this.apiClient,e);return d=ge("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=rw(this.apiClient,e);return d=ge("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=ew(this.apiClient,e);return d=ge("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=nw(v),A=new LT;return Object.assign(A,E),A})}else{const m=Zx(this.apiClient,e);return d=ge("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=tw(v),A=new LT;return Object.assign(A,E),A})}}async update(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=Ew(this.apiClient,e);return d=ge("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=Tw(this.apiClient,e);return d=ge("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=fw(e);return d=ge("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=mw(v),A=new OT;return Object.assign(A,E),A})}else{const m=dw(e);return d=ge("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=hw(v),A=new OT;return Object.assign(A,E),A})}}}function YT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function dt(n){return this instanceof dt?(this.v=n,this):new dt(n)}function la(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(x){return function(L){return Promise.resolve(L).then(x,E)}}function d(x,L){s[x]&&(o[x]=function(B){return new Promise(function(z,ee){l.push([x,B,z,ee])>1||p(x,B)})},L&&(o[x]=L(o[x])))}function p(x,L){try{m(s[x](L))}catch(B){A(l[0][3],B)}}function m(x){x.value instanceof dt?Promise.resolve(x.value.v).then(v,E):A(l[0][2],x)}function v(x){p("next",x)}function E(x){p("throw",x)}function A(x,L){x(L),l.shift(),l.length&&p(l[0][0],l[0][1])}}function Yl(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof YT=="function"?YT(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(c){return new Promise(function(d,p){c=n[l](c),o(d,p,c.done,c.value)})}}function o(l,c,d,p){Promise.resolve(p).then(function(m){l({value:m,done:d})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Aw(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:G0(t)}function G0(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Cw(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function JT(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const o=[];let l=!0;for(;s<t&&n[s].role==="model";)o.push(n[s]),l&&!G0(n[s])&&(l=!1),s++;l?e.push(...o):e.pop()}return e}class Iw{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new bw(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class bw{constructor(e,t,s,o={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),Cw(l)}async sendMessage(e){var t;await this.sendPromise;const s=un(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,c,d;const p=await o,m=(c=(l=p.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,v=p.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let A=[];v!=null&&(A=(d=v.slice(E))!==null&&d!==void 0?d:[]);const x=m?[m]:[];this.recordHistory(s,x,A)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const s=un(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?JT(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,o;return la(this,arguments,function*(){var c,d,p,m;const v=[];try{for(var E=!0,A=Yl(e),x;x=yield dt(A.next()),c=x.done,!c;E=!0){m=x.value,E=!1;const L=m;if(Aw(L)){const B=(o=(s=L.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content;B!==void 0&&v.push(B)}yield yield dt(L)}}catch(L){d={error:L}}finally{try{!E&&!c&&(p=A.return)&&(yield dt(p.call(A)))}finally{if(d)throw d.error}}this.recordHistory(t,v)})}recordHistory(e,t,s){let o=[];t.length>0&&t.every(l=>l.role!==void 0)?o=t:o.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...JT(s)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Od extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Od.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xw(n){const e={},t=f(n,["file"]);return t!=null&&g(e,["file"],t),e}function ww(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function Rw(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],L0(t)),e}function Nw(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function Mw(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],L0(t)),e}function Dw(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function Pw(n){const e={},t=f(n,["config"]);return t!=null&&Dw(t,e),e}function Vw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kw extends ao{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ou(eo.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Pw(e);return l=ge("files",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=Vw(p),v=new jb;return Object.assign(v,m),v})}}async createInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=xw(e);return l=ge("upload/v1beta/files",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const m=ww(p),v=new Kb;return Object.assign(v,m),v})}}async get(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Mw(e);return l=ge("files/{file}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Rw(e);return l=ge("files/{file}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=Nw(p),v=new $b;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function id(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&g(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Uw(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>Xw(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function Lw(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Ow(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&g(e,["response"],c);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function qw(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=f(n,["audioTimestamp"]);s!=null&&g(e,["audioTimestamp"],s);const o=f(n,["candidateCount"]);o!=null&&g(e,["candidateCount"],o);const l=f(n,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const c=f(n,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const d=f(n,["logprobs"]);d!=null&&g(e,["logprobs"],d);const p=f(n,["maxOutputTokens"]);p!=null&&g(e,["maxOutputTokens"],p);const m=f(n,["mediaResolution"]);m!=null&&g(e,["mediaResolution"],m);const v=f(n,["presencePenalty"]);v!=null&&g(e,["presencePenalty"],v);const E=f(n,["responseJsonSchema"]);E!=null&&g(e,["responseJsonSchema"],E);const A=f(n,["responseLogprobs"]);A!=null&&g(e,["responseLogprobs"],A);const x=f(n,["responseMimeType"]);x!=null&&g(e,["responseMimeType"],x);const L=f(n,["responseModalities"]);L!=null&&g(e,["responseModalities"],L);const B=f(n,["responseSchema"]);B!=null&&g(e,["responseSchema"],B);const z=f(n,["routingConfig"]);z!=null&&g(e,["routingConfig"],z);const ee=f(n,["seed"]);ee!=null&&g(e,["seed"],ee);const te=f(n,["speechConfig"]);te!=null&&g(e,["speechConfig"],Y0(te));const Q=f(n,["stopSequences"]);Q!=null&&g(e,["stopSequences"],Q);const F=f(n,["temperature"]);F!=null&&g(e,["temperature"],F);const ne=f(n,["thinkingConfig"]);ne!=null&&g(e,["thinkingConfig"],ne);const ae=f(n,["topK"]);ae!=null&&g(e,["topK"],ae);const N=f(n,["topP"]);return N!=null&&g(e,["topP"],N),e}function Bw(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function Fw(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&g(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function zw(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],_p(E));const A=f(n,["thinkingConfig"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","thinkingConfig"],A);const x=f(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],x);const L=f(n,["systemInstruction"]);e!==void 0&&L!=null&&g(e,["setup","systemInstruction"],Uw(un(L)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let ae=Ca(B);Array.isArray(ae)&&(ae=ae.map(N=>Zw(Aa(N)))),g(e,["setup","tools"],ae)}const z=f(n,["sessionResumption"]);e!==void 0&&z!=null&&g(e,["setup","sessionResumption"],Ww(z));const ee=f(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&g(e,["setup","inputAudioTranscription"],ee);const te=f(n,["outputAudioTranscription"]);e!==void 0&&te!=null&&g(e,["setup","outputAudioTranscription"],te);const Q=f(n,["realtimeInputConfig"]);e!==void 0&&Q!=null&&g(e,["setup","realtimeInputConfig"],Q);const F=f(n,["contextWindowCompression"]);e!==void 0&&F!=null&&g(e,["setup","contextWindowCompression"],F);const ne=f(n,["proactivity"]);return e!==void 0&&ne!=null&&g(e,["setup","proactivity"],ne),t}function Hw(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],qw(s));const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],Y0(_p(E)));const A=f(n,["thinkingConfig"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","thinkingConfig"],A);const x=f(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],x);const L=f(n,["systemInstruction"]);e!==void 0&&L!=null&&g(e,["setup","systemInstruction"],un(L));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let ae=Ca(B);Array.isArray(ae)&&(ae=ae.map(N=>eR(Aa(N)))),g(e,["setup","tools"],ae)}const z=f(n,["sessionResumption"]);e!==void 0&&z!=null&&g(e,["setup","sessionResumption"],z);const ee=f(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&g(e,["setup","inputAudioTranscription"],ee);const te=f(n,["outputAudioTranscription"]);e!==void 0&&te!=null&&g(e,["setup","outputAudioTranscription"],te);const Q=f(n,["realtimeInputConfig"]);e!==void 0&&Q!=null&&g(e,["setup","realtimeInputConfig"],Q);const F=f(n,["contextWindowCompression"]);e!==void 0&&F!=null&&g(e,["setup","contextWindowCompression"],F);const ne=f(n,["proactivity"]);return e!==void 0&&ne!=null&&g(e,["setup","proactivity"],ne),t}function Gw(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],$e(n,s));const o=f(e,["config"]);return o!=null&&g(t,["config"],zw(o,t)),t}function Yw(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],$e(n,s));const o=f(e,["config"]);return o!=null&&g(t,["config"],Hw(o,t)),t}function Jw(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function jw(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["weightedPrompts"],s)}return e}function Kw(n){const e={},t=f(n,["media"]);if(t!=null){let m=D0(t);Array.isArray(m)&&(m=m.map(v=>id(v))),g(e,["mediaChunks"],m)}const s=f(n,["audio"]);s!=null&&g(e,["audio"],id(V0(s)));const o=f(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const l=f(n,["video"]);l!=null&&g(e,["video"],id(P0(l)));const c=f(n,["text"]);c!=null&&g(e,["text"],c);const d=f(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function $w(n){const e={},t=f(n,["media"]);if(t!=null){let m=D0(t);Array.isArray(m)&&(m=m.map(v=>v)),g(e,["mediaChunks"],m)}const s=f(n,["audio"]);s!=null&&g(e,["audio"],V0(s));const o=f(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const l=f(n,["video"]);l!=null&&g(e,["video"],P0(l));const c=f(n,["text"]);c!=null&&g(e,["text"],c);const d=f(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function Qw(n){const e={},t=f(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const s=f(n,["serverContent"]);s!=null&&g(e,["serverContent"],s);const o=f(n,["toolCall"]);o!=null&&g(e,["toolCall"],o);const l=f(n,["toolCallCancellation"]);l!=null&&g(e,["toolCallCancellation"],l);const c=f(n,["usageMetadata"]);c!=null&&g(e,["usageMetadata"],tR(c));const d=f(n,["goAway"]);d!=null&&g(e,["goAway"],d);const p=f(n,["sessionResumptionUpdate"]);return p!=null&&g(e,["sessionResumptionUpdate"],p),e}function Xw(n){const e={},t=f(n,["videoMetadata"]);t!=null&&g(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&g(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&g(e,["inlineData"],id(o));const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],Lw(l));const c=f(n,["thoughtSignature"]);c!=null&&g(e,["thoughtSignature"],c);const d=f(n,["functionCall"]);d!=null&&g(e,["functionCall"],d);const p=f(n,["codeExecutionResult"]);p!=null&&g(e,["codeExecutionResult"],p);const m=f(n,["executableCode"]);m!=null&&g(e,["executableCode"],m);const v=f(n,["functionResponse"]);v!=null&&g(e,["functionResponse"],v);const E=f(n,["text"]);return E!=null&&g(e,["text"],E),e}function Ww(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Y0(n){const e={},t=f(n,["voiceConfig"]);if(t!=null&&g(e,["voiceConfig"],t),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=f(n,["languageCode"]);return s!=null&&g(e,["languageCode"],s),e}function Zw(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&g(e,["googleSearch"],Fw(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&g(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],Bw(l));const c=f(n,["urlContext"]);c!=null&&g(e,["urlContext"],c);const d=f(n,["computerUse"]);d!=null&&g(e,["computerUse"],d);const p=f(n,["codeExecution"]);return p!=null&&g(e,["codeExecution"],p),e}function eR(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>Ow(A))),g(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const o=f(n,["googleSearch"]);o!=null&&g(e,["googleSearch"],o);const l=f(n,["googleSearchRetrieval"]);l!=null&&g(e,["googleSearchRetrieval"],l);const c=f(n,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const p=f(n,["urlContext"]);p!=null&&g(e,["urlContext"],p);const m=f(n,["computerUse"]);m!=null&&g(e,["computerUse"],m);const v=f(n,["codeExecution"]);return v!=null&&g(e,["codeExecution"],v),e}function tR(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const s=f(n,["cachedContentTokenCount"]);s!=null&&g(e,["cachedContentTokenCount"],s);const o=f(n,["candidatesTokenCount"]);o!=null&&g(e,["responseTokenCount"],o);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&g(e,["toolUsePromptTokenCount"],l);const c=f(n,["thoughtsTokenCount"]);c!=null&&g(e,["thoughtsTokenCount"],c);const d=f(n,["totalTokenCount"]);d!=null&&g(e,["totalTokenCount"],d);const p=f(n,["promptTokensDetails"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(L=>L)),g(e,["promptTokensDetails"],x)}const m=f(n,["cacheTokensDetails"]);if(m!=null){let x=m;Array.isArray(x)&&(x=x.map(L=>L)),g(e,["cacheTokensDetails"],x)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let x=v;Array.isArray(x)&&(x=x.map(L=>L)),g(e,["responseTokensDetails"],x)}const E=f(n,["toolUsePromptTokensDetails"]);if(E!=null){let x=E;Array.isArray(x)&&(x=x.map(L=>L)),g(e,["toolUsePromptTokensDetails"],x)}const A=f(n,["trafficType"]);return A!=null&&g(e,["trafficType"],A),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nR(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&g(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function iR(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],sR(s));const o=f(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const l=f(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const c=f(n,["urlContextMetadata"]);c!=null&&g(e,["urlContextMetadata"],c);const d=f(n,["avgLogprobs"]);d!=null&&g(e,["avgLogprobs"],d);const p=f(n,["groundingMetadata"]);p!=null&&g(e,["groundingMetadata"],p);const m=f(n,["index"]);m!=null&&g(e,["index"],m);const v=f(n,["logprobsResult"]);v!=null&&g(e,["logprobsResult"],v);const E=f(n,["safetyRatings"]);if(E!=null){let A=E;Array.isArray(A)&&(A=A.map(x=>x)),g(e,["safetyRatings"],A)}return e}function sR(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["citations"],s)}return e}function rR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],$e(n,s));const o=f(e,["contents"]);if(o!=null){let l=jn(o);Array.isArray(l)&&(l=l.map(c=>c)),g(t,["contents"],l)}return t}function oR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["tokensInfo"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),g(e,["tokensInfo"],o)}return e}function aR(n){const e={},t=f(n,["values"]);t!=null&&g(e,["values"],t);const s=f(n,["statistics"]);return s!=null&&g(e,["statistics"],lR(s)),e}function lR(n){const e={},t=f(n,["truncated"]);t!=null&&g(e,["truncated"],t);const s=f(n,["token_count"]);return s!=null&&g(e,["tokenCount"],s),e}function qd(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>hN(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function uR(n){const e={},t=f(n,["controlType"]);t!=null&&g(e,["controlType"],t);const s=f(n,["enableControlImageComputation"]);return s!=null&&g(e,["computeControl"],s),e}function cR(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function dR(n,e){const t={},s=f(n,["systemInstruction"]);e!==void 0&&s!=null&&g(e,["systemInstruction"],un(s));const o=f(n,["tools"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>Q0(d))),g(e,["tools"],c)}const l=f(n,["generationConfig"]);return e!==void 0&&l!=null&&g(e,["generationConfig"],eN(l)),t}function fR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],$e(n,s));const o=f(e,["contents"]);if(o!=null){let c=jn(o);Array.isArray(c)&&(c=c.map(d=>qd(d))),g(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&cR(l),t}function hR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],$e(n,s));const o=f(e,["contents"]);if(o!=null){let c=jn(o);Array.isArray(c)&&(c=c.map(d=>d)),g(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&dR(l,t),t}function mR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);s!=null&&g(e,["totalTokens"],s);const o=f(n,["cachedContentTokenCount"]);return o!=null&&g(e,["cachedContentTokenCount"],o),e}function pR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);return s!=null&&g(e,["totalTokens"],s),e}function gR(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],$e(n,s)),t}function yR(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],$e(n,s)),t}function _R(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function vR(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function TR(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&g(e,["parameters","aspectRatio"],c);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const A=f(n,["includeRaiReason"]);e!==void 0&&A!=null&&g(e,["parameters","includeRaiReason"],A);const x=f(n,["language"]);e!==void 0&&x!=null&&g(e,["parameters","language"],x);const L=f(n,["outputMimeType"]);e!==void 0&&L!=null&&g(e,["parameters","outputOptions","mimeType"],L);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&g(e,["parameters","outputOptions","compressionQuality"],B);const z=f(n,["addWatermark"]);e!==void 0&&z!=null&&g(e,["parameters","addWatermark"],z);const ee=f(n,["labels"]);e!==void 0&&ee!=null&&g(e,["labels"],ee);const te=f(n,["editMode"]);e!==void 0&&te!=null&&g(e,["parameters","editMode"],te);const Q=f(n,["baseSteps"]);return e!==void 0&&Q!=null&&g(e,["parameters","editConfig","baseSteps"],Q),t}function ER(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],$e(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>vN(p))),g(t,["instances[0]","referenceImages"],d)}const c=f(e,["config"]);return c!=null&&TR(c,t),t}function SR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Bd(l))),g(e,["generatedImages"],o)}return e}function AR(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function CR(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["instances[]","task_type"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["instances[]","title"],o);const l=f(n,["outputDimensionality"]);e!==void 0&&l!=null&&g(e,["parameters","outputDimensionality"],l);const c=f(n,["mimeType"]);e!==void 0&&c!=null&&g(e,["instances[]","mimeType"],c);const d=f(n,["autoTruncate"]);return e!==void 0&&d!=null&&g(e,["parameters","autoTruncate"],d),t}function IR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],$e(n,s));const o=f(e,["contents"]);if(o!=null){let d=pp(n,o);Array.isArray(d)&&(d=d.map(p=>p)),g(t,["requests[]","content"],d)}const l=f(e,["config"]);l!=null&&AR(l,t);const c=f(e,["model"]);return c!==void 0&&g(t,["requests[]","model"],$e(n,c)),t}function bR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],$e(n,s));const o=f(e,["contents"]);if(o!=null){let c=pp(n,o);Array.isArray(c)&&(c=c.map(d=>d)),g(t,["instances[]","content"],c)}const l=f(e,["config"]);return l!=null&&CR(l,t),t}function xR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["embeddings"],l)}const o=f(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function wR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>aR(c))),g(e,["embeddings"],l)}const o=f(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function RR(n){const e={},t=f(n,["endpoint"]);t!=null&&g(e,["name"],t);const s=f(n,["deployedModelId"]);return s!=null&&g(e,["deployedModelId"],s),e}function NR(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function MR(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&g(e,["response"],c);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function DR(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],qd(un(o)));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&g(s,["topP"],c);const d=f(e,["topK"]);d!=null&&g(s,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&g(s,["responseLogprobs"],E);const A=f(e,["logprobs"]);A!=null&&g(s,["logprobs"],A);const x=f(e,["presencePenalty"]);x!=null&&g(s,["presencePenalty"],x);const L=f(e,["frequencyPenalty"]);L!=null&&g(s,["frequencyPenalty"],L);const B=f(e,["seed"]);B!=null&&g(s,["seed"],B);const z=f(e,["responseMimeType"]);z!=null&&g(s,["responseMimeType"],z);const ee=f(e,["responseSchema"]);ee!=null&&g(s,["responseSchema"],gp(ee));const te=f(e,["responseJsonSchema"]);if(te!=null&&g(s,["responseJsonSchema"],te),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Q=f(e,["safetySettings"]);if(t!==void 0&&Q!=null){let O=Q;Array.isArray(O)&&(O=O.map(P=>TN(P))),g(t,["safetySettings"],O)}const F=f(e,["tools"]);if(t!==void 0&&F!=null){let O=Ca(F);Array.isArray(O)&&(O=O.map(P=>bN(Aa(P)))),g(t,["tools"],O)}const ne=f(e,["toolConfig"]);if(t!==void 0&&ne!=null&&g(t,["toolConfig"],ne),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ae=f(e,["cachedContent"]);t!==void 0&&ae!=null&&g(t,["cachedContent"],Ts(n,ae));const N=f(e,["responseModalities"]);N!=null&&g(s,["responseModalities"],N);const M=f(e,["mediaResolution"]);M!=null&&g(s,["mediaResolution"],M);const R=f(e,["speechConfig"]);if(R!=null&&g(s,["speechConfig"],yp(R)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=f(e,["thinkingConfig"]);V!=null&&g(s,["thinkingConfig"],V);const k=f(e,["imageConfig"]);return k!=null&&g(s,["imageConfig"],k),s}function PR(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],un(o));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&g(s,["topP"],c);const d=f(e,["topK"]);d!=null&&g(s,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&g(s,["responseLogprobs"],E);const A=f(e,["logprobs"]);A!=null&&g(s,["logprobs"],A);const x=f(e,["presencePenalty"]);x!=null&&g(s,["presencePenalty"],x);const L=f(e,["frequencyPenalty"]);L!=null&&g(s,["frequencyPenalty"],L);const B=f(e,["seed"]);B!=null&&g(s,["seed"],B);const z=f(e,["responseMimeType"]);z!=null&&g(s,["responseMimeType"],z);const ee=f(e,["responseSchema"]);ee!=null&&g(s,["responseSchema"],gp(ee));const te=f(e,["responseJsonSchema"]);te!=null&&g(s,["responseJsonSchema"],te);const Q=f(e,["routingConfig"]);Q!=null&&g(s,["routingConfig"],Q);const F=f(e,["modelSelectionConfig"]);F!=null&&g(s,["modelConfig"],F);const ne=f(e,["safetySettings"]);if(t!==void 0&&ne!=null){let W=ne;Array.isArray(W)&&(W=W.map(de=>de)),g(t,["safetySettings"],W)}const ae=f(e,["tools"]);if(t!==void 0&&ae!=null){let W=Ca(ae);Array.isArray(W)&&(W=W.map(de=>Q0(Aa(de)))),g(t,["tools"],W)}const N=f(e,["toolConfig"]);t!==void 0&&N!=null&&g(t,["toolConfig"],N);const M=f(e,["labels"]);t!==void 0&&M!=null&&g(t,["labels"],M);const R=f(e,["cachedContent"]);t!==void 0&&R!=null&&g(t,["cachedContent"],Ts(n,R));const V=f(e,["responseModalities"]);V!=null&&g(s,["responseModalities"],V);const k=f(e,["mediaResolution"]);k!=null&&g(s,["mediaResolution"],k);const O=f(e,["speechConfig"]);O!=null&&g(s,["speechConfig"],$0(yp(O)));const P=f(e,["audioTimestamp"]);P!=null&&g(s,["audioTimestamp"],P);const Ye=f(e,["thinkingConfig"]);Ye!=null&&g(s,["thinkingConfig"],Ye);const ke=f(e,["imageConfig"]);return ke!=null&&g(s,["imageConfig"],ke),s}function jT(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],$e(n,s));const o=f(e,["contents"]);if(o!=null){let c=jn(o);Array.isArray(c)&&(c=c.map(d=>qd(d))),g(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&g(t,["generationConfig"],DR(n,l,t)),t}function KT(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],$e(n,s));const o=f(e,["contents"]);if(o!=null){let c=jn(o);Array.isArray(c)&&(c=c.map(d=>d)),g(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&g(t,["generationConfig"],PR(n,l,t)),t}function $T(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>iR(m))),g(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const l=f(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&g(e,["responseId"],c);const d=f(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function QT(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["candidates"],m)}const o=f(n,["createTime"]);o!=null&&g(e,["createTime"],o);const l=f(n,["modelVersion"]);l!=null&&g(e,["modelVersion"],l);const c=f(n,["promptFeedback"]);c!=null&&g(e,["promptFeedback"],c);const d=f(n,["responseId"]);d!=null&&g(e,["responseId"],d);const p=f(n,["usageMetadata"]);return p!=null&&g(e,["usageMetadata"],p),e}function VR(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const o=f(n,["aspectRatio"]);e!==void 0&&o!=null&&g(e,["parameters","aspectRatio"],o);const l=f(n,["guidanceScale"]);if(e!==void 0&&l!=null&&g(e,["parameters","guidanceScale"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&g(e,["parameters","safetySetting"],c);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d);const p=f(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&g(e,["parameters","includeSafetyAttributes"],p);const m=f(n,["includeRaiReason"]);e!==void 0&&m!=null&&g(e,["parameters","includeRaiReason"],m);const v=f(n,["language"]);e!==void 0&&v!=null&&g(e,["parameters","language"],v);const E=f(n,["outputMimeType"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","mimeType"],E);const A=f(n,["outputCompressionQuality"]);if(e!==void 0&&A!=null&&g(e,["parameters","outputOptions","compressionQuality"],A),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=f(n,["imageSize"]);if(e!==void 0&&x!=null&&g(e,["parameters","sampleImageSize"],x),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function kR(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&g(e,["parameters","aspectRatio"],c);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const A=f(n,["includeRaiReason"]);e!==void 0&&A!=null&&g(e,["parameters","includeRaiReason"],A);const x=f(n,["language"]);e!==void 0&&x!=null&&g(e,["parameters","language"],x);const L=f(n,["outputMimeType"]);e!==void 0&&L!=null&&g(e,["parameters","outputOptions","mimeType"],L);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&g(e,["parameters","outputOptions","compressionQuality"],B);const z=f(n,["addWatermark"]);e!==void 0&&z!=null&&g(e,["parameters","addWatermark"],z);const ee=f(n,["labels"]);e!==void 0&&ee!=null&&g(e,["labels"],ee);const te=f(n,["imageSize"]);e!==void 0&&te!=null&&g(e,["parameters","sampleImageSize"],te);const Q=f(n,["enhancePrompt"]);return e!==void 0&&Q!=null&&g(e,["parameters","enhancePrompt"],Q),t}function UR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],$e(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["config"]);return l!=null&&VR(l,t),t}function LR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],$e(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["config"]);return l!=null&&kR(l,t),t}function OR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>QR(c))),g(e,["generatedImages"],l)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],j0(o)),e}function qR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Bd(c))),g(e,["generatedImages"],l)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],K0(o)),e}function BR(n,e){const t={},s=f(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=f(n,["durationSeconds"]);if(e!==void 0&&o!=null&&g(e,["parameters","durationSeconds"],o),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const c=f(n,["resolution"]);e!==void 0&&c!=null&&g(e,["parameters","resolution"],c);const d=f(n,["personGeneration"]);if(e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=f(n,["negativePrompt"]);e!==void 0&&p!=null&&g(e,["parameters","negativePrompt"],p);const m=f(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&g(e,["parameters","enhancePrompt"],m),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(n,["lastFrame"]);e!==void 0&&v!=null&&g(e,["instances[0]","lastFrame"],Fd(v));const E=f(n,["referenceImages"]);if(e!==void 0&&E!=null){let A=E;Array.isArray(A)&&(A=A.map(x=>qN(x))),g(e,["instances[0]","referenceImages"],A)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function FR(n,e){const t={},s=f(n,["numberOfVideos"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&g(e,["parameters","storageUri"],o);const l=f(n,["fps"]);e!==void 0&&l!=null&&g(e,["parameters","fps"],l);const c=f(n,["durationSeconds"]);e!==void 0&&c!=null&&g(e,["parameters","durationSeconds"],c);const d=f(n,["seed"]);e!==void 0&&d!=null&&g(e,["parameters","seed"],d);const p=f(n,["aspectRatio"]);e!==void 0&&p!=null&&g(e,["parameters","aspectRatio"],p);const m=f(n,["resolution"]);e!==void 0&&m!=null&&g(e,["parameters","resolution"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=f(n,["pubsubTopic"]);e!==void 0&&E!=null&&g(e,["parameters","pubsubTopic"],E);const A=f(n,["negativePrompt"]);e!==void 0&&A!=null&&g(e,["parameters","negativePrompt"],A);const x=f(n,["enhancePrompt"]);e!==void 0&&x!=null&&g(e,["parameters","enhancePrompt"],x);const L=f(n,["generateAudio"]);e!==void 0&&L!=null&&g(e,["parameters","generateAudio"],L);const B=f(n,["lastFrame"]);e!==void 0&&B!=null&&g(e,["instances[0]","lastFrame"],di(B));const z=f(n,["referenceImages"]);if(e!==void 0&&z!=null){let Q=z;Array.isArray(Q)&&(Q=Q.map(F=>BN(F))),g(e,["instances[0]","referenceImages"],Q)}const ee=f(n,["mask"]);e!==void 0&&ee!=null&&g(e,["instances[0]","mask"],ON(ee));const te=f(n,["compressionQuality"]);return e!==void 0&&te!=null&&g(e,["parameters","compressionQuality"],te),t}function zR(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&g(e,["response"],JR(c)),e}function HR(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["response"]);return c!=null&&g(e,["response"],jR(c)),e}function GR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],$e(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["image"]);l!=null&&g(t,["instances[0]","image"],Fd(l));const c=f(e,["video"]);c!=null&&g(t,["instances[0]","video"],X0(c));const d=f(e,["source"]);d!=null&&KR(d,t);const p=f(e,["config"]);return p!=null&&BR(p,t),t}function YR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],$e(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["image"]);l!=null&&g(t,["instances[0]","image"],di(l));const c=f(e,["video"]);c!=null&&g(t,["instances[0]","video"],W0(c));const d=f(e,["source"]);d!=null&&$R(d,t);const p=f(e,["config"]);return p!=null&&FR(p,t),t}function JR(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>WR(c))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function jR(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>ZR(c))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function KR(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],Fd(o));const l=f(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],X0(l)),t}function $R(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],di(o));const l=f(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],W0(l)),t}function QR(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],rN(t));const s=f(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const o=f(n,["_self"]);return o!=null&&g(e,["safetyAttributes"],j0(o)),e}function Bd(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],J0(t));const s=f(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const o=f(n,["_self"]);o!=null&&g(e,["safetyAttributes"],K0(o));const l=f(n,["prompt"]);return l!=null&&g(e,["enhancedPrompt"],l),e}function XR(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["mask"],J0(t));const s=f(n,["labels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),g(e,["labels"],o)}return e}function WR(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],UN(t)),e}function ZR(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],LN(t)),e}function eN(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=f(n,["audioTimestamp"]);s!=null&&g(e,["audioTimestamp"],s);const o=f(n,["candidateCount"]);o!=null&&g(e,["candidateCount"],o);const l=f(n,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const c=f(n,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const d=f(n,["logprobs"]);d!=null&&g(e,["logprobs"],d);const p=f(n,["maxOutputTokens"]);p!=null&&g(e,["maxOutputTokens"],p);const m=f(n,["mediaResolution"]);m!=null&&g(e,["mediaResolution"],m);const v=f(n,["presencePenalty"]);v!=null&&g(e,["presencePenalty"],v);const E=f(n,["responseJsonSchema"]);E!=null&&g(e,["responseJsonSchema"],E);const A=f(n,["responseLogprobs"]);A!=null&&g(e,["responseLogprobs"],A);const x=f(n,["responseMimeType"]);x!=null&&g(e,["responseMimeType"],x);const L=f(n,["responseModalities"]);L!=null&&g(e,["responseModalities"],L);const B=f(n,["responseSchema"]);B!=null&&g(e,["responseSchema"],B);const z=f(n,["routingConfig"]);z!=null&&g(e,["routingConfig"],z);const ee=f(n,["seed"]);ee!=null&&g(e,["seed"],ee);const te=f(n,["speechConfig"]);te!=null&&g(e,["speechConfig"],$0(te));const Q=f(n,["stopSequences"]);Q!=null&&g(e,["stopSequences"],Q);const F=f(n,["temperature"]);F!=null&&g(e,["temperature"],F);const ne=f(n,["thinkingConfig"]);ne!=null&&g(e,["thinkingConfig"],ne);const ae=f(n,["topK"]);ae!=null&&g(e,["topK"],ae);const N=f(n,["topP"]);return N!=null&&g(e,["topP"],N),e}function tN(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],$e(n,s)),t}function nN(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],$e(n,s)),t}function iN(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function sN(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&g(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function rN(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],Tr(t));const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function J0(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["imageBytes"],Tr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function Fd(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],Tr(t));const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function di(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["imageBytes"]);s!=null&&g(e,["bytesBase64Encoded"],Tr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function oN(n,e,t){const s={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&g(t,["_query","filter"],c);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],O0(n,d)),s}function aN(n,e,t){const s={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&g(t,["_query","filter"],c);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],O0(n,d)),s}function lN(n,e){const t={},s=f(e,["config"]);return s!=null&&oN(n,s,t),t}function uN(n,e){const t={},s=f(e,["config"]);return s!=null&&aN(n,s,t),t}function cN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["_self"]);if(o!=null){let l=q0(o);Array.isArray(l)&&(l=l.map(c=>Om(c))),g(e,["models"],l)}return e}function dN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["_self"]);if(o!=null){let l=q0(o);Array.isArray(l)&&(l=l.map(c=>qm(c))),g(e,["models"],l)}return e}function fN(n){const e={},t=f(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const s=f(n,["segmentationClasses"]);s!=null&&g(e,["maskClasses"],s);const o=f(n,["maskDilation"]);return o!=null&&g(e,["dilation"],o),e}function Om(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const o=f(n,["description"]);o!=null&&g(e,["description"],o);const l=f(n,["version"]);l!=null&&g(e,["version"],l);const c=f(n,["_self"]);c!=null&&g(e,["tunedModelInfo"],xN(c));const d=f(n,["inputTokenLimit"]);d!=null&&g(e,["inputTokenLimit"],d);const p=f(n,["outputTokenLimit"]);p!=null&&g(e,["outputTokenLimit"],p);const m=f(n,["supportedGenerationMethods"]);return m!=null&&g(e,["supportedActions"],m),e}function qm(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const o=f(n,["description"]);o!=null&&g(e,["description"],o);const l=f(n,["versionId"]);l!=null&&g(e,["version"],l);const c=f(n,["deployedModels"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(A=>RR(A))),g(e,["endpoints"],E)}const d=f(n,["labels"]);d!=null&&g(e,["labels"],d);const p=f(n,["_self"]);p!=null&&g(e,["tunedModelInfo"],wN(p));const m=f(n,["defaultCheckpointId"]);m!=null&&g(e,["defaultCheckpointId"],m);const v=f(n,["checkpoints"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(A=>A)),g(e,["checkpoints"],E)}return e}function hN(n){const e={},t=f(n,["videoMetadata"]);t!=null&&g(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&g(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&g(e,["inlineData"],nR(o));const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],NR(l));const c=f(n,["thoughtSignature"]);c!=null&&g(e,["thoughtSignature"],c);const d=f(n,["functionCall"]);d!=null&&g(e,["functionCall"],d);const p=f(n,["codeExecutionResult"]);p!=null&&g(e,["codeExecutionResult"],p);const m=f(n,["executableCode"]);m!=null&&g(e,["executableCode"],m);const v=f(n,["functionResponse"]);v!=null&&g(e,["functionResponse"],v);const E=f(n,["text"]);return E!=null&&g(e,["text"],E),e}function mN(n){const e={},t=f(n,["productImage"]);return t!=null&&g(e,["image"],di(t)),e}function pN(n,e){const t={},s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const o=f(n,["baseSteps"]);e!==void 0&&o!=null&&g(e,["parameters","editConfig","baseSteps"],o);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&g(e,["parameters","storageUri"],l);const c=f(n,["seed"]);e!==void 0&&c!=null&&g(e,["parameters","seed"],c);const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&g(e,["parameters","safetySetting"],d);const p=f(n,["personGeneration"]);e!==void 0&&p!=null&&g(e,["parameters","personGeneration"],p);const m=f(n,["addWatermark"]);e!==void 0&&m!=null&&g(e,["parameters","addWatermark"],m);const v=f(n,["outputMimeType"]);e!==void 0&&v!=null&&g(e,["parameters","outputOptions","mimeType"],v);const E=f(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","compressionQuality"],E);const A=f(n,["enhancePrompt"]);e!==void 0&&A!=null&&g(e,["parameters","enhancePrompt"],A);const x=f(n,["labels"]);return e!==void 0&&x!=null&&g(e,["labels"],x),t}function gN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],$e(n,s));const o=f(e,["source"]);o!=null&&_N(o,t);const l=f(e,["config"]);return l!=null&&pN(l,t),t}function yN(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>Bd(o))),g(e,["generatedImages"],s)}return e}function _N(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=f(n,["personImage"]);e!==void 0&&o!=null&&g(e,["instances[0]","personImage","image"],di(o));const l=f(n,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>mN(d))),g(e,["instances[0]","productImages"],c)}return t}function vN(n){const e={},t=f(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],di(t));const s=f(n,["referenceId"]);s!=null&&g(e,["referenceId"],s);const o=f(n,["referenceType"]);o!=null&&g(e,["referenceType"],o);const l=f(n,["maskImageConfig"]);l!=null&&g(e,["maskImageConfig"],fN(l));const c=f(n,["controlImageConfig"]);c!=null&&g(e,["controlImageConfig"],uR(c));const d=f(n,["styleImageConfig"]);d!=null&&g(e,["styleImageConfig"],d);const p=f(n,["subjectImageConfig"]);return p!=null&&g(e,["subjectImageConfig"],p),e}function j0(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const o=f(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function K0(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const o=f(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function TN(n){const e={};if(f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=f(n,["category"]);t!=null&&g(e,["category"],t);const s=f(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function EN(n){const e={},t=f(n,["image"]);return t!=null&&g(e,["image"],di(t)),e}function SN(n,e){const t={},s=f(n,["mode"]);e!==void 0&&s!=null&&g(e,["parameters","mode"],s);const o=f(n,["maxPredictions"]);e!==void 0&&o!=null&&g(e,["parameters","maxPredictions"],o);const l=f(n,["confidenceThreshold"]);e!==void 0&&l!=null&&g(e,["parameters","confidenceThreshold"],l);const c=f(n,["maskDilation"]);e!==void 0&&c!=null&&g(e,["parameters","maskDilation"],c);const d=f(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&g(e,["parameters","binaryColorThreshold"],d);const p=f(n,["labels"]);return e!==void 0&&p!=null&&g(e,["labels"],p),t}function AN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],$e(n,s));const o=f(e,["source"]);o!=null&&IN(o,t);const l=f(e,["config"]);return l!=null&&SN(l,t),t}function CN(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>XR(o))),g(e,["generatedMasks"],s)}return e}function IN(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],di(o));const l=f(n,["scribbleImage"]);return e!==void 0&&l!=null&&g(e,["instances[0]","scribble"],EN(l)),t}function $0(n){const e={},t=f(n,["voiceConfig"]);if(t!=null&&g(e,["voiceConfig"],t),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=f(n,["languageCode"]);return s!=null&&g(e,["languageCode"],s),e}function bN(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&g(e,["googleSearch"],sN(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&g(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],iN(l));const c=f(n,["urlContext"]);c!=null&&g(e,["urlContext"],c);const d=f(n,["computerUse"]);d!=null&&g(e,["computerUse"],d);const p=f(n,["codeExecution"]);return p!=null&&g(e,["codeExecution"],p),e}function Q0(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>MR(A))),g(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const o=f(n,["googleSearch"]);o!=null&&g(e,["googleSearch"],o);const l=f(n,["googleSearchRetrieval"]);l!=null&&g(e,["googleSearchRetrieval"],l);const c=f(n,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const p=f(n,["urlContext"]);p!=null&&g(e,["urlContext"],p);const m=f(n,["computerUse"]);m!=null&&g(e,["computerUse"],m);const v=f(n,["codeExecution"]);return v!=null&&g(e,["codeExecution"],v),e}function xN(n){const e={},t=f(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&g(e,["createTime"],s);const o=f(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function wN(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&g(e,["createTime"],s);const o=f(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function RN(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const o=f(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function NN(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const o=f(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function MN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","name"],$e(n,s));const o=f(e,["config"]);return o!=null&&RN(o,t),t}function DN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],$e(n,s));const o=f(e,["config"]);return o!=null&&NN(o,t),t}function PN(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const o=f(n,["includeRaiReason"]);e!==void 0&&o!=null&&g(e,["parameters","includeRaiReason"],o);const l=f(n,["outputMimeType"]);e!==void 0&&l!=null&&g(e,["parameters","outputOptions","mimeType"],l);const c=f(n,["outputCompressionQuality"]);e!==void 0&&c!=null&&g(e,["parameters","outputOptions","compressionQuality"],c);const d=f(n,["enhanceInputImage"]);e!==void 0&&d!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],d);const p=f(n,["imagePreservationFactor"]);e!==void 0&&p!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],p);const m=f(n,["labels"]);e!==void 0&&m!=null&&g(e,["labels"],m);const v=f(n,["numberOfImages"]);e!==void 0&&v!=null&&g(e,["parameters","sampleCount"],v);const E=f(n,["mode"]);return e!==void 0&&E!=null&&g(e,["parameters","mode"],E),t}function VN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],$e(n,s));const o=f(e,["image"]);o!=null&&g(t,["instances[0]","image"],di(o));const l=f(e,["upscaleFactor"]);l!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],l);const c=f(e,["config"]);return c!=null&&PN(c,t),t}function kN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Bd(l))),g(e,["generatedImages"],o)}return e}function UN(n){const e={},t=f(n,["video","uri"]);t!=null&&g(e,["uri"],t);const s=f(n,["video","encodedVideo"]);s!=null&&g(e,["videoBytes"],Tr(s));const o=f(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function LN(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],Tr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function ON(n){const e={},t=f(n,["image"]);t!=null&&g(e,["_self"],di(t));const s=f(n,["maskMode"]);return s!=null&&g(e,["maskMode"],s),e}function qN(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],Fd(t));const s=f(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function BN(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],di(t));const s=f(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function X0(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["video","uri"],t);const s=f(n,["videoBytes"]);s!=null&&g(e,["video","encodedVideo"],Tr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["encoding"],o),e}function W0(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["videoBytes"]);s!=null&&g(e,["bytesBase64Encoded"],Tr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FN="Content-Type",zN="X-Server-Timeout",HN="User-Agent",Bm="x-goog-api-client",GN="1.24.0",YN=`google-genai-sdk/${GN}`,JN="v1beta1",jN="v1beta",XT=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class KN{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:JN,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:jN,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const o=[this.getRequestUrlInternal(t)];return s&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[c,d]of Object.entries(e.queryParams))o.searchParams.append(c,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(t))typeof l=="object"?s[o]=Object.assign(Object.assign({},s[o]),l):l!==void 0&&(s[o]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s){if(t&&t.timeout||s){const o=new AbortController,l=o.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const c=setTimeout(()=>o.abort(),t.timeout);c&&typeof c.unref=="function"&&c.unref()}s&&s.addEventListener("abort",()=>{o.abort()}),e.signal=l}return t&&t.extraBody!==null&&$N(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await WT(o),new km(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await WT(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return la(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let c="";for(;;){const{done:d,value:p}=yield dt(o.read());if(d){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=l.decode(p,{stream:!0});try{const E=JSON.parse(m);if("error"in E){const A=JSON.parse(JSON.stringify(E.error)),x=A.status,L=A.code,B=`got status: ${x}. ${JSON.stringify(E)}`;if(L>=400&&L<600)throw new Od({message:B,status:L})}}catch(E){if(E.name==="ApiError")throw E}c+=m;let v=c.match(XT);for(;v;){const E=v[1];try{const A=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield dt(new km(A)),c=c.slice(v[0].length),v=c.match(XT)}catch(A){throw new Error(`exception parsing stream chunk ${E}. ${A}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=YN+" "+this.clientOptions.userAgentExtra;return e[HN]=t,e[Bm]=t,e[FN]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[s,o]of Object.entries(e.headers))t.append(s,o);e.timeout&&e.timeout>0&&t.append(zN,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var s;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);o.sizeBytes=String(c.size);const d=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:c.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const p=await this.fetchUploadUrl(o,t);return l.upload(e,p,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var s;let o={};t!=null&&t.httpOptions?o=t.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},c=await this.request({path:ge("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:o});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(s=c==null?void 0:c.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function WT(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(s);throw t>=400&&t<600?new Od({message:o,status:t}):new Error(o)}}function $N(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,c){const d=Object.assign({},l);for(const p in c)if(Object.prototype.hasOwnProperty.call(c,p)){const m=c[p],v=d[p];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?d[p]=s(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),d[p]=m)}return d}const o=s(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QN="mcp_used/unknown";let XN=!1;function Z0(n){for(const e of n)if(WN(e)||typeof e=="object"&&"inputSchema"in e)return!0;return XN}function eS(n){var e;const t=(e=n[Bm])!==null&&e!==void 0?e:"";n[Bm]=(t+` ${QN}`).trimStart()}function WN(n){return n!==null&&typeof n=="object"&&n instanceof vp}function ZN(n,e=100){return la(this,arguments,function*(){let s,o=0;for(;o<e;){const l=yield dt(n.listTools({cursor:s}));for(const c of l.tools)yield yield dt(c),o++;if(!l.nextCursor)break;s=l.nextCursor}})}class vp{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new vp(e,t)}async initialize(){var e,t,s,o;if(this.mcpTools.length>0)return;const l={},c=[];for(const v of this.mcpClients)try{for(var d=!0,p=(t=void 0,Yl(ZN(v))),m;m=await p.next(),e=m.done,!e;d=!0){o=m.value,d=!1;const E=o;c.push(E);const A=E.name;if(l[A])throw new Error(`Duplicate function name ${A} found in MCP tools. Please ensure function names are unique.`);l[A]=v}}catch(E){t={error:E}}finally{try{!d&&!e&&(s=p.return)&&await s.call(p)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),rx(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await o.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function e1(n,e,t){const s=new Xb;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(s,o),e(s)}class t1{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=s1(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),p=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let m=()=>{};const v=new Promise(Q=>{m=Q}),E=e.callbacks,A=function(){m({})},x=this.apiClient,L={onopen:A,onmessage:Q=>{e1(x,E.onmessage,Q)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(Q){},onclose:(s=E==null?void 0:E.onclose)!==null&&s!==void 0?s:function(Q){}},B=this.webSocketFactory.create(p,i1(c),L);B.connect(),await v;const te={setup:{model:$e(this.apiClient,e.model)}};return B.send(JSON.stringify(te)),new n1(B,this.apiClient)}}class n1{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=jw(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=Jw(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(sa.PLAY)}pause(){this.sendPlaybackControl(sa.PAUSE)}stop(){this.sendPlaybackControl(sa.STOP)}resetContext(){this.sendPlaybackControl(sa.RESET_CONTEXT)}close(){this.conn.close()}}function i1(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function s1(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const r1="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function o1(n,e,t){const s=new Qb;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const l=JSON.parse(o);if(n.isVertexAI()){const c=Qw(l);Object.assign(s,c)}else Object.assign(s,l);e(s)}class a1{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new t1(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,o,l,c,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&Z0(e.config.tools)&&eS(E);const A=d1(E);if(this.apiClient.isVertexAI())v=`${p}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(A);else{const R=this.apiClient.getApiKey();let V="BidiGenerateContent",k="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),V="BidiGenerateContentConstrained",k="access_token"),v=`${p}/ws/google.ai.generativelanguage.${m}.GenerativeService.${V}?${k}=${R}`}let x=()=>{};const L=new Promise(R=>{x=R}),B=e.callbacks,z=function(){var R;(R=B==null?void 0:B.onopen)===null||R===void 0||R.call(B),x({})},ee=this.apiClient,te={onopen:z,onmessage:R=>{o1(ee,B.onmessage,R)},onerror:(t=B==null?void 0:B.onerror)!==null&&t!==void 0?t:function(R){},onclose:(s=B==null?void 0:B.onclose)!==null&&s!==void 0?s:function(R){}},Q=this.webSocketFactory.create(v,c1(A),te);Q.connect(),await L;let F=$e(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&F.startsWith("publishers/")){const R=this.apiClient.getProject(),V=this.apiClient.getLocation();F=`projects/${R}/locations/${V}/`+F}let ne={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[md.AUDIO]}:e.config.responseModalities=[md.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ae=(d=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[],N=[];for(const R of ae)if(this.isCallableTool(R)){const V=R;N.push(await V.tool())}else N.push(R);N.length>0&&(e.config.tools=N);const M={model:F,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ne=Yw(this.apiClient,M):ne=Gw(this.apiClient,M),delete ne.config,Q.send(JSON.stringify(ne)),new u1(Q,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const l1={turnComplete:!0};class u1{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=jn(t.turns),e.isVertexAI()||(s=s.map(o=>qd(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(r1)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},l1),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:$w(e)}:t={realtimeInput:Kw(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function c1(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function d1(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZT=10;function eE(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const c of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(ua(c)){o=!0;break}if(!o)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function ua(n){return"callTool"in n&&typeof n.callTool=="function"}function f1(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>ua(o)))!==null&&s!==void 0?s:!1}function h1(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>!ua(o)))!==null&&s!==void 0?s:!1}function tE(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class m1 extends ao{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,o,l,c,d;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!f1(t)||eE(t.config))return await this.generateContentInternal(p);if(h1(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let m,v;const E=jn(p.contents),A=(l=(o=(s=p.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:ZT;let x=0;for(;x<A&&(m=await this.generateContentInternal(p),!(!m.functionCalls||m.functionCalls.length===0));){const L=m.candidates[0].content,B=[];for(const z of(d=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[])if(ua(z)){const te=await z.callTool(m.functionCalls);B.push(...te)}x++,v={role:"user",parts:B},p.contents=jn(p.contents),p.contents.push(L),p.contents.push(v),tE(p.config)&&(E.push(L),E.push(v))}return tE(p.config)&&(m.automaticFunctionCallingHistory=E),m},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),eE(t.config)){const s=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(s)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var o;let l;const c=[];if(s!=null&&s.generatedImages)for(const p of s.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((o=p==null?void 0:p.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=p==null?void 0:p.safetyAttributes:c.push(p);let d;return l?d={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:d={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},d}),this.list=async t=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new ou(eo.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(c),c)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,o;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const c=await Promise.all(l.map(async p=>ua(p)?await p.tool():p)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(d.config.tools=c,e.config&&e.config.tools&&Z0(e.config.tools)){const p=(o=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&o!==void 0?o:{};let m=Object.assign({},p);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),eS(m),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return d}async initAfcToolsMap(e){var t,s,o;const l=new Map;for(const c of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(ua(c)){const d=c,p=await d.tool();for(const m of(o=p.functionDeclarations)!==null&&o!==void 0?o:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,d)}}return l}async processAfcStream(e){var t,s,o;const l=(o=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:ZT;let c=!1,d=0;const p=await this.initAfcToolsMap(e);return(function(m,v,E){var A,x;return la(this,arguments,function*(){for(var L,B,z,ee;d<l;){c&&(d++,c=!1);const ne=yield dt(m.processParamsMaybeAddMcpUsage(E)),ae=yield dt(m.generateContentStreamInternal(ne)),N=[],M=[];try{for(var te=!0,Q=(B=void 0,Yl(ae)),F;F=yield dt(Q.next()),L=F.done,!L;te=!0){ee=F.value,te=!1;const R=ee;if(yield yield dt(R),R.candidates&&(!((A=R.candidates[0])===null||A===void 0)&&A.content)){M.push(R.candidates[0].content);for(const V of(x=R.candidates[0].content.parts)!==null&&x!==void 0?x:[])if(d<l&&V.functionCall){if(!V.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(V.functionCall.name)){const k=yield dt(v.get(V.functionCall.name).callTool([V.functionCall]));N.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${V.functionCall.name}`)}}}}catch(R){B={error:R}}finally{try{!te&&!L&&(z=Q.return)&&(yield dt(z.call(Q)))}finally{if(B)throw B.error}}if(N.length>0){c=!0;const R=new ql;R.candidates=[{content:{role:"user",parts:N}}],yield yield dt(R);const V=[];V.push(...M),V.push({role:"user",parts:N});const k=jn(E.contents).concat(V);E.contents=k}else break}})})(this,p,e)}async generateContentInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=KT(this.apiClient,e);return d=ge("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=QT(v),A=new ql;return Object.assign(A,E),A})}else{const m=jT(this.apiClient,e);return d=ge("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=$T(v),A=new ql;return Object.assign(A,E),A})}}async generateContentStreamInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=KT(this.apiClient,e);return d=ge("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(E){return la(this,arguments,function*(){var A,x,L,B;try{for(var z=!0,ee=Yl(E),te;te=yield dt(ee.next()),A=te.done,!A;z=!0){B=te.value,z=!1;const Q=B,F=QT(yield dt(Q.json()));F.sdkHttpResponse={headers:Q.headers};const ne=new ql;Object.assign(ne,F),yield yield dt(ne)}}catch(Q){x={error:Q}}finally{try{!z&&!A&&(L=ee.return)&&(yield dt(L.call(ee)))}finally{if(x)throw x.error}}})})}else{const m=jT(this.apiClient,e);return d=ge("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(E){return la(this,arguments,function*(){var A,x,L,B;try{for(var z=!0,ee=Yl(E),te;te=yield dt(ee.next()),A=te.done,!A;z=!0){B=te.value,z=!1;const Q=B,F=$T(yield dt(Q.json()));F.sdkHttpResponse={headers:Q.headers};const ne=new ql;Object.assign(ne,F),yield yield dt(ne)}}catch(Q){x={error:Q}}finally{try{!z&&!A&&(L=ee.return)&&(yield dt(L.call(ee)))}finally{if(x)throw x.error}}})})}}async embedContent(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=bR(this.apiClient,e);return d=ge("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=wR(v),A=new MT;return Object.assign(A,E),A})}else{const m=IR(this.apiClient,e);return d=ge("{model}:batchEmbedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=xR(v),A=new MT;return Object.assign(A,E),A})}}async generateImagesInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=LR(this.apiClient,e);return d=ge("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=qR(v),A=new DT;return Object.assign(A,E),A})}else{const m=UR(this.apiClient,e);return d=ge("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=OR(v),A=new DT;return Object.assign(A,E),A})}}async editImageInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=ER(this.apiClient,e);return l=ge("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=SR(p),v=new zb;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=VN(this.apiClient,e);return l=ge("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=kN(p),v=new Hb;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=gN(this.apiClient,e);return l=ge("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const m=yN(p),v=new Gb;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=AN(this.apiClient,e);return l=ge("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const m=CN(p),v=new Yb;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=nN(this.apiClient,e);return d=ge("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>qm(v))}else{const m=tN(this.apiClient,e);return d=ge("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Om(v))}}async listInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=uN(this.apiClient,e);return d=ge("{models_url}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=dN(v),A=new PT;return Object.assign(A,E),A})}else{const m=lN(this.apiClient,e);return d=ge("{models_url}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=cN(v),A=new PT;return Object.assign(A,E),A})}}async update(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=DN(this.apiClient,e);return d=ge("{model}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>qm(v))}else{const m=MN(this.apiClient,e);return d=ge("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Om(v))}}async delete(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=yR(this.apiClient,e);return d=ge("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=vR(v),A=new VT;return Object.assign(A,E),A})}else{const m=gR(this.apiClient,e);return d=ge("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=_R(v),A=new VT;return Object.assign(A,E),A})}}async countTokens(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=hR(this.apiClient,e);return d=ge("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=pR(v),A=new kT;return Object.assign(A,E),A})}else{const m=fR(this.apiClient,e);return d=ge("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=mR(v),A=new kT;return Object.assign(A,E),A})}}async computeTokens(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=rR(this.apiClient,e);return l=ge("{model}:computeTokens",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=oR(p),v=new Jb;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=YR(this.apiClient,e);return d=ge("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>{const E=HR(v),A=new pd;return Object.assign(A,E),A})}else{const m=GR(this.apiClient,e);return d=ge("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const E=zR(v),A=new pd;return Object.assign(A,E),A})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class p1 extends ao{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=qb(e);return d=ge("{operationName}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c}else{const m=Ob(e);return d=ge("{operationName}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Mb(e);return l=ge("{resourceName}:fetchPredictOperation",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function g1(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&g(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function y1(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>I1(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function _1(n,e,t){const s={},o=f(e,["expireTime"]);t!==void 0&&o!=null&&g(t,["expireTime"],o);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&g(t,["newSessionExpireTime"],l);const c=f(e,["uses"]);t!==void 0&&c!=null&&g(t,["uses"],c);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&g(t,["bidiGenerateContentSetup"],C1(n,d));const p=f(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&g(t,["fieldMask"],p),s}function v1(n,e){const t={},s=f(e,["config"]);return s!=null&&g(t,["config"],_1(n,s,t)),t}function T1(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function E1(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function S1(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&g(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function A1(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],_p(E));const A=f(n,["thinkingConfig"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","thinkingConfig"],A);const x=f(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],x);const L=f(n,["systemInstruction"]);e!==void 0&&L!=null&&g(e,["setup","systemInstruction"],y1(un(L)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let ae=Ca(B);Array.isArray(ae)&&(ae=ae.map(N=>x1(Aa(N)))),g(e,["setup","tools"],ae)}const z=f(n,["sessionResumption"]);e!==void 0&&z!=null&&g(e,["setup","sessionResumption"],b1(z));const ee=f(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&g(e,["setup","inputAudioTranscription"],ee);const te=f(n,["outputAudioTranscription"]);e!==void 0&&te!=null&&g(e,["setup","outputAudioTranscription"],te);const Q=f(n,["realtimeInputConfig"]);e!==void 0&&Q!=null&&g(e,["setup","realtimeInputConfig"],Q);const F=f(n,["contextWindowCompression"]);e!==void 0&&F!=null&&g(e,["setup","contextWindowCompression"],F);const ne=f(n,["proactivity"]);return e!==void 0&&ne!=null&&g(e,["setup","proactivity"],ne),t}function C1(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],$e(n,s));const o=f(e,["config"]);return o!=null&&g(t,["config"],A1(o,t)),t}function I1(n){const e={},t=f(n,["videoMetadata"]);t!=null&&g(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&g(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&g(e,["inlineData"],g1(o));const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],T1(l));const c=f(n,["thoughtSignature"]);c!=null&&g(e,["thoughtSignature"],c);const d=f(n,["functionCall"]);d!=null&&g(e,["functionCall"],d);const p=f(n,["codeExecutionResult"]);p!=null&&g(e,["codeExecutionResult"],p);const m=f(n,["executableCode"]);m!=null&&g(e,["executableCode"],m);const v=f(n,["functionResponse"]);v!=null&&g(e,["functionResponse"],v);const E=f(n,["text"]);return E!=null&&g(e,["text"],E),e}function b1(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function x1(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&g(e,["googleSearch"],S1(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&g(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],E1(l));const c=f(n,["urlContext"]);c!=null&&g(e,["urlContext"],c);const d=f(n,["computerUse"]);d!=null&&g(e,["computerUse"],d);const p=f(n,["codeExecution"]);return p!=null&&g(e,["codeExecution"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w1(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const o=Object.keys(s).map(l=>`${t}.${l}`);e.push(...o)}else e.push(t)}return e.join(",")}function R1(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const l=w1(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(m=>c.includes(m)?`generationConfig.${m}`:m));const p=[];l&&p.push(l),d.length>0&&p.push(...d),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class N1 extends ao{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=v1(this.apiClient,e);l=ge("auth_tokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const p=R1(d,e.config);return o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M1(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function D1(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function P1(n,e){const t={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=f(n,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&g(e,["displayName"],s),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=f(n,["epochCount"]);e!==void 0&&o!=null&&g(e,["tuningTask","hyperparameters","epochCount"],o);const l=f(n,["learningRateMultiplier"]);if(l!=null&&g(t,["tuningTask","hyperparameters","learningRateMultiplier"],l),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=f(n,["batchSize"]);e!==void 0&&c!=null&&g(e,["tuningTask","hyperparameters","batchSize"],c);const d=f(n,["learningRate"]);if(e!==void 0&&d!=null&&g(e,["tuningTask","hyperparameters","learningRate"],d),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return t}function V1(n,e){const t={},s=f(n,["validationDataset"]);e!==void 0&&s!=null&&g(e,["supervisedTuningSpec"],$1(s,t));const o=f(n,["tunedModelDisplayName"]);e!==void 0&&o!=null&&g(e,["tunedModelDisplayName"],o);const l=f(n,["description"]);e!==void 0&&l!=null&&g(e,["description"],l);const c=f(n,["epochCount"]);e!==void 0&&c!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],c);const d=f(n,["learningRateMultiplier"]);e!==void 0&&d!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],d);const p=f(n,["exportLastCheckpointOnly"]);e!==void 0&&p!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],p);const m=f(n,["adapterSize"]);if(e!==void 0&&m!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],m),f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const v=f(n,["labels"]);return e!==void 0&&v!=null&&g(e,["labels"],v),t}function k1(n){const e={},t=f(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["preTunedModel"]);s!=null&&g(e,["preTunedModel"],s);const o=f(n,["trainingDataset"]);o!=null&&g(e,["tuningTask","trainingData"],J1(o));const l=f(n,["config"]);return l!=null&&P1(l,e),e}function U1(n){const e={},t=f(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["preTunedModel"]);s!=null&&g(e,["preTunedModel"],s);const o=f(n,["trainingDataset"]);o!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],j1(o,e));const l=f(n,["config"]);return l!=null&&V1(l,e),e}function L1(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function O1(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function q1(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const l=f(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),t}function B1(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const l=f(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),t}function F1(n){const e={},t=f(n,["config"]);return t!=null&&q1(t,e),e}function z1(n){const e={},t=f(n,["config"]);return t!=null&&B1(t,e),e}function H1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["tunedModels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>tS(c))),g(e,["tuningJobs"],l)}return e}function G1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["tuningJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Fm(c))),g(e,["tuningJobs"],l)}return e}function Y1(n){const e={},t=f(n,["name"]);t!=null&&g(e,["model"],t);const s=f(n,["name"]);return s!=null&&g(e,["endpoint"],s),e}function J1(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const t=f(n,["examples"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["examples","examples"],s)}return e}function j1(n,e){const t={},s=f(n,["gcsUri"]);e!==void 0&&s!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],s);const o=f(n,["vertexDatasetResource"]);if(e!==void 0&&o!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],o),f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function tS(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["state"]);o!=null&&g(e,["state"],U0(o));const l=f(n,["createTime"]);l!=null&&g(e,["createTime"],l);const c=f(n,["tuningTask","startTime"]);c!=null&&g(e,["startTime"],c);const d=f(n,["tuningTask","completeTime"]);d!=null&&g(e,["endTime"],d);const p=f(n,["updateTime"]);p!=null&&g(e,["updateTime"],p);const m=f(n,["description"]);m!=null&&g(e,["description"],m);const v=f(n,["baseModel"]);v!=null&&g(e,["baseModel"],v);const E=f(n,["_self"]);E!=null&&g(e,["tunedModel"],Y1(E));const A=f(n,["customBaseModel"]);A!=null&&g(e,["customBaseModel"],A);const x=f(n,["experiment"]);x!=null&&g(e,["experiment"],x);const L=f(n,["labels"]);L!=null&&g(e,["labels"],L);const B=f(n,["outputUri"]);B!=null&&g(e,["outputUri"],B);const z=f(n,["pipelineJob"]);z!=null&&g(e,["pipelineJob"],z);const ee=f(n,["serviceAccount"]);ee!=null&&g(e,["serviceAccount"],ee);const te=f(n,["tunedModelDisplayName"]);te!=null&&g(e,["tunedModelDisplayName"],te);const Q=f(n,["veoTuningSpec"]);return Q!=null&&g(e,["veoTuningSpec"],Q),e}function Fm(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["state"]);o!=null&&g(e,["state"],U0(o));const l=f(n,["createTime"]);l!=null&&g(e,["createTime"],l);const c=f(n,["startTime"]);c!=null&&g(e,["startTime"],c);const d=f(n,["endTime"]);d!=null&&g(e,["endTime"],d);const p=f(n,["updateTime"]);p!=null&&g(e,["updateTime"],p);const m=f(n,["error"]);m!=null&&g(e,["error"],m);const v=f(n,["description"]);v!=null&&g(e,["description"],v);const E=f(n,["baseModel"]);E!=null&&g(e,["baseModel"],E);const A=f(n,["tunedModel"]);A!=null&&g(e,["tunedModel"],A);const x=f(n,["preTunedModel"]);x!=null&&g(e,["preTunedModel"],x);const L=f(n,["supervisedTuningSpec"]);L!=null&&g(e,["supervisedTuningSpec"],L);const B=f(n,["tuningDataStats"]);B!=null&&g(e,["tuningDataStats"],B);const z=f(n,["encryptionSpec"]);z!=null&&g(e,["encryptionSpec"],z);const ee=f(n,["partnerModelTuningSpec"]);ee!=null&&g(e,["partnerModelTuningSpec"],ee);const te=f(n,["customBaseModel"]);te!=null&&g(e,["customBaseModel"],te);const Q=f(n,["experiment"]);Q!=null&&g(e,["experiment"],Q);const F=f(n,["labels"]);F!=null&&g(e,["labels"],F);const ne=f(n,["outputUri"]);ne!=null&&g(e,["outputUri"],ne);const ae=f(n,["pipelineJob"]);ae!=null&&g(e,["pipelineJob"],ae);const N=f(n,["serviceAccount"]);N!=null&&g(e,["serviceAccount"],N);const M=f(n,["tunedModelDisplayName"]);M!=null&&g(e,["tunedModelDisplayName"],M);const R=f(n,["veoTuningSpec"]);return R!=null&&g(e,["veoTuningSpec"],R),e}function K1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["metadata"]);o!=null&&g(e,["metadata"],o);const l=f(n,["done"]);l!=null&&g(e,["done"],l);const c=f(n,["error"]);return c!=null&&g(e,["error"],c),e}function $1(n,e){const t={},s=f(n,["gcsUri"]);s!=null&&g(t,["validationDatasetUri"],s);const o=f(n,["vertexDatasetResource"]);return e!==void 0&&o!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Q1 extends ao{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new ou(eo.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:o});return l.baseModel=void 0,await this.tuneInternal(l)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),l=await this.tuneMldevInternal(o);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:Vm.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=O1(e);return d=ge("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>Fm(v))}else{const m=L1(e);return d=ge("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>tS(v))}}async listInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=z1(e);return d=ge("tuningJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=G1(v),A=new UT;return Object.assign(A,E),A})}else{const m=F1(e);return d=ge("tunedModels",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=H1(v),A=new UT;return Object.assign(A,E),A})}}async cancel(e){var t,s,o,l;let c="",d={};if(this.apiClient.isVertexAI()){const p=D1(e);c=ge("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=M1(e);c=ge("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=U1(e);return l=ge("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>Fm(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=k1(e);return l=ge("tunedModels",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>K1(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class X1{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const W1=1024*1024*8,Z1=3,eM=1e3,tM=2,mm="x-goog-upload-status";async function nM(n,e,t){var s,o,l;let c=0,d=0,p=new km(new Response),m="upload";for(c=n.size;d<c;){const E=Math.min(W1,c-d),A=n.slice(d,d+E);d+E>=c&&(m+=", finalize");let x=0,L=eM;for(;x<Z1&&(p=await t.request({path:"",body:A,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(d),"Content-Length":String(E)}}}),!(!((s=p==null?void 0:p.headers)===null||s===void 0)&&s[mm]));)x++,await sM(L),L=L*tM;if(d+=E,((o=p==null?void 0:p.headers)===null||o===void 0?void 0:o[mm])!=="active")break;if(c<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(p==null?void 0:p.json());if(((l=p==null?void 0:p.headers)===null||l===void 0?void 0:l[mm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function iM(n){return{size:n.size,type:n.type}}function sM(n){return new Promise(e=>setTimeout(e,n))}class rM{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await nM(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await iM(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oM{create(e,t,s){return new aM(e,t,s)}}class aM{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nE="x-goog-api-key";class lM{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(nE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(nE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uM="gl-node/";class cM{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=Nb(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const o=new lM(this.apiKey);this.apiClient=new KN({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:uM+"web",uploader:new rM,downloader:new X1}),this.models=new m1(this.apiClient),this.live=new a1(this.apiClient,o,new oM),this.batches=new jx(this.apiClient),this.chats=new Iw(this.models,this.apiClient),this.caches=new Sw(this.apiClient),this.files=new kw(this.apiClient),this.operations=new p1(this.apiClient),this.authTokens=new N1(this.apiClient),this.tunings=new Q1(this.apiClient)}}const nS={BASE_URL:"/fd/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_ENVIRONMENT:"production",VITE_FIREBASE_API_KEY:"AIzaSyBA1uXbBt5qHfOh9nTFXuI2IVN-uhWYD_g",VITE_FIREBASE_APP_ID:"1:221809737779:web:a0e2f3d1b9b6c1e1f2d3e4",VITE_FIREBASE_AUTH_DOMAIN:"expenses-140c4.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"221809737779",VITE_FIREBASE_PROJECT_ID:"expenses-140c4",VITE_FIREBASE_STORAGE_BUCKET:"expenses-140c4.appspot.com",VITE_GEMINI_API_KEY:"AIzaSyCU4hOMnyFAWpi1zuy1tRuWW9AV358_njE"},_t={firebase:{apiKey:"AIzaSyBA1uXbBt5qHfOh9nTFXuI2IVN-uhWYD_g",authDomain:"expenses-140c4.firebaseapp.com",projectId:"expenses-140c4",storageBucket:"expenses-140c4.appspot.com",messagingSenderId:"221809737779",appId:"1:221809737779:web:a0e2f3d1b9b6c1e1f2d3e4"},gemini:{apiKey:"AIzaSyCU4hOMnyFAWpi1zuy1tRuWW9AV358_njE",model:"gemini-2.5-flash"},app:{name:"لوحة التحكم المالية",version:"1.0.0",environment:"production"}};console.log("🔍 فحص متغيرات البيئة:",{environment:_t.app.environment,firebaseApiKey:_t.firebase.apiKey?"✅ موجود":"❌ مفقود",firebaseAuthDomain:_t.firebase.authDomain||"❌ مفقود",firebaseProjectId:_t.firebase.projectId||"❌ مفقود",firebaseStorageBucket:_t.firebase.storageBucket||"❌ مفقود",firebaseMessagingSenderId:_t.firebase.messagingSenderId||"❌ مفقود",firebaseAppId:_t.firebase.appId||"❌ مفقود",geminiApiKey:"✅ موجود",allEnvVars:Object.keys(nS).filter(n=>n.startsWith("VITE_"))});console.log("🔍 جميع متغيرات VITE_ في البيئة:",Object.keys(nS).filter(n=>n.startsWith("VITE_")));const ca=()=>{const n=[];return _t.firebase.apiKey||n.push("مفتاح Firebase API مفقود"),_t.firebase.authDomain||n.push("Firebase Auth Domain مفقود"),_t.firebase.projectId||n.push("معرف مشروع Firebase مفقود"),_t.firebase.storageBucket||n.push("Firebase Storage Bucket مفقود"),_t.firebase.messagingSenderId||n.push("Firebase Messaging Sender ID مفقود"),_t.firebase.appId||n.push("Firebase App ID مفقود"),{isValid:n.length===0,errors:n,hasFirebase:!!_t.firebase.apiKey,hasGemini:!0}};if(typeof window<"u"){const n=ca();n.isValid?console.log("✅ جميع الإعدادات صحيحة ومكتملة"):console.warn("⚠️ تحذير: بعض الإعدادات غير مكتملة:",n.errors)}let yd;const dM=_t.gemini.model,iS=()=>{if(yd)return;const n=ca();if(!n.isValid){console.warn("⚠️ تحذير: مفتاح Gemini API غير صحيح:",n.errors);return}try{yd=new cM({apiKey:_t.gemini.apiKey}),console.log("🤖 تم تهيئة خدمة Gemini بنجاح")}catch(e){console.error("❌ خطأ في تهيئة خدمة Gemini:",e)}},au={FINANCIAL_ANALYST:`You are an expert financial analyst assistant, "المحلل الذكي". You have full access to the user's financial data for a specific period. Your purpose is to provide detailed, insightful analysis and answer complex questions in Arabic based ONLY on the data provided for that period.
- Today's date is ${new Date().toLocaleDateString("en-CA")}.
- Analyze the user's provided financial state (transactions, card details, bank balance, investments, installments) for the specified period to answer their query.
- Be thorough. Connect different parts of their financial data to give holistic answers.
- DO NOT just state data, INTERPRET it. Provide insights, identify trends, and offer observations.
- Be friendly, professional, and act as a true financial advisor.`,INVESTMENT_COACH:`You are an educational investment coach named "المستشار الذكي". Your primary role is to educate the user about investment concepts and strategies, particularly within the context of the Saudi stock market (Tadawul).
- You MUST NOT give direct financial advice. Do not recommend buying or selling specific stocks (e.g., "Buy Aramco").
- When asked for a recommendation, you MUST politely decline and instead explain HOW the user can research and make their own informed decisions.
- Your tone should be encouraging, educational, and responsible.
- Keep your answers clear, concise, and in Arabic.`,PASTE_ANALYZER:`You are an intelligent data extraction tool for Arabic and English financial transaction SMS messages from Saudi Arabia. Your task is to analyze the provided text and respond ONLY with a valid JSON object containing the keys: "merchant", "amount", "date", "paymentMethod", and "categoryId".
- **CRITICAL RULE**: Extract data ONLY from the user's text. Do not invent or infer information. If a piece of information is not present in the text, its corresponding JSON value should be null.
- **ERROR HANDLING**: If the provided text does not seem to be a financial transaction SMS at all, you MUST respond with a JSON object containing a single key "error" with the value "النص المقدم لا يبدو كرسالة معاملة مالية.".

- **Amount Extraction**:
  - The 'amount' is the primary transaction value.
  - Look for a number after keywords like "بـ" or "Amount:".
  - You MUST ignore any numbers associated with "Remaining limit", "الصرف المتبقي", or card numbers.

- **Date Extraction**:
  - The 'date' MUST be in "YYYY-MM-DD" format.
  - If the text provides a full timestamp like "2025-09-06 15:11:57", extract only the date part "2025-09-06".
  - If the text uses "DD/MM/YY", you must convert it. Example: '01/09/25' becomes '2025-09-01'.

- **Merchant Extraction**:
  - The 'merchant' is the store or service name.
  - Look for text after keywords like "من" or "Merchant:".

{{PAYMENT_METHOD_MAPPING}}

- **Category ID**:
  - Analyze the merchant name and suggest the most relevant ID from the provided list of available categories. If unsure, use the ID for the category named 'أخرى'.

---
**EXAMPLES**

1.  **Input**: "شراء-POS\\nبـ182 SAR\\nمن Adel Inte\\nمدى-ابل*2855\\nفي 01/09/25 22:11"
    **Output**: { "merchant": "Adel Inte", "amount": 182, "date": "2025-09-01", "paymentMethod": "bank-default", "categoryId": "cat-5" }

2.  **Input**: "شراء-POS\\nبـ‬‪95.78 ‬‪SAR\\nمن ‬‪BINDAWOOD\\nإئتمانية **4278 ‬‪(Apple Pay)\\nفي ‬‪03/09/25 ‬‪14:45\\nالصرف المتبقي ‬‪12146.95 ‬‪SAR"
    **Output**: { "merchant": "BINDAWOOD", "amount": 95.78, "date": "2025-09-03", "paymentMethod": "snb-card", "categoryId": "cat-1" }

3.  **Input**: "POS Purchase (Apple Pay)\\nCard: Visa card XX8095\\nAmount: SAR 115.00\\nMerchant: AlHamra Roundabout Statio\\nIn: SAUDI ARABIA\\nRemaining limit SAR 2,502.34\\nOn: 2025-09-06 15:11:57"
    **Output**: { "merchant": "AlHamra Roundabout Statio", "amount": 115.00, "date": "2025-09-06", "paymentMethod": "enbd-card", "categoryId": "cat-3" }

4.  **Input**: "POS Purchase (Apple Pay)\\nCard: Visa card XX8095\\nAmount: SAR 10.00\\nMerchant: MKAN CO\\nIn: SAUDI ARABIA\\nRemaining limit SAR 2,782.27\\nOn: 2025-09-03 23:44:56"
    **Output**: { "merchant": "MKAN CO", "amount": 10.00, "date": "2025-09-03", "paymentMethod": "enbd-card", "categoryId": "cat-7" }
---
`,ICON_SUGGESTER:"You are an emoji expert. Your task is to suggest a single, relevant emoji for a given category name. You must respond with ONLY the emoji character and nothing else.",BUDGET_PLANNER:`You are a helpful and encouraging financial planning assistant in Arabic. Your goal is to help the user create a realistic monthly budget based on their spending history and a total budget amount they provide. Use the 50/30/20 rule (50% for Needs, 30% for Wants, 20% for Savings/Debt) as a general framework, but you MUST adapt it to the user's actual spending patterns revealed in their transaction data. Your response MUST be in Arabic and formatted using Markdown. It should contain: 1. A brief, encouraging introductory sentence. 2. A breakdown of the total budget into Needs, Wants, and Savings, with the suggested amount for each. 3. A detailed table with three columns: "الفئة", "المبلغ المقترح", and "ملاحظات". 4. In the table, allocate the "Needs" and "Wants" amounts across the user's actual spending categories. 5. The "Notes" column should provide a brief justification. 6. Conclude with a short, motivational tip.`},lu=async(n,e,t=!1)=>{if(!yd)throw new Error("لم تتم تهيئة خدمة الذكاء الاصطناعي. يرجى التأكد من صحة إعدادات الاتصال.");try{return(await yd.models.generateContent({model:dM,contents:e,config:{systemInstruction:n,...t&&{responseMimeType:"application/json"}}})).text}catch(s){console.error("Gemini API Error:",s);let o="عفواً، حدث خطأ أثناء الاتصال بالخادم. يرجى المحاولة مرة أخرى.";throw s instanceof Error&&"message"in s&&s.message.includes("403")&&(o="تم رفض الوصول (403). يرجى التحقق من قيود مفتاح API الخاص بك في Google Cloud Console."),new Error(o)}},sS=(n,e)=>lu(au.FINANCIAL_ANALYST,`User Query: "${n}"

Financial Data: ${JSON.stringify(e)}`),rS=(n,e,t,s)=>{const o=Object.keys(t),l=Object.keys(s);let c=`- **Payment Method Mapping**:
  - The 'paymentMethod' MUST be one of these exact values: [${[...l,...o].map(p=>`'${p}'`).join(", ")}].
`;Object.values(s).forEach(p=>{const m=[p.name.split(" ")[0],...p.smsSamples||[]].filter(Boolean);m.length>0&&(c+=`  - If the text is a bank/mada transaction and contains any of these: '${m.join("', '")}', use '${p.id}'.
`)}),Object.values(t).forEach(p=>{const m=[p.name.split(" ")[0],...p.smsSamples||[]].filter(Boolean);m.length>0&&(c+=`  - If the text is a credit card transaction and contains any of these: '${m.join("', '")}', use '${p.id}'.
`)}),c+="  - If no specific bank account keywords match for a bank/mada transaction, default to the first bank account ID in the list.";const d=au.PASTE_ANALYZER.replace("{{PAYMENT_METHOD_MAPPING}}",c);return lu(d,`Text to analyze: "${n}"

Available Categories: ${JSON.stringify(e)}

First bank account ID is '${l[0]}'`,!0)},oS=n=>lu(au.INVESTMENT_COACH,n),fM=n=>lu(au.ICON_SUGGESTER,`Category: ${n}`),aS=(n,e,t)=>lu(au.BUDGET_PLANNER,`Total monthly budget is: ${n} SAR. My spending categories are: ${JSON.stringify(e)}. My transactions from the last 60 days are: ${JSON.stringify(t)}`),hM=Object.freeze(Object.defineProperty({__proto__:null,analyzeFinancialData:sS,analyzePastedText:rS,generateBudgetPlan:aS,generateInvestmentAdvice:oS,initializeAi:iS,suggestCategoryIcon:fM},Symbol.toStringTag,{value:"Module"})),mM=()=>{};var iE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},pM=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],d=n[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},uS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,d=c?n[o+1]:0,p=o+2<n.length,m=p?n[o+2]:0,v=l>>2,E=(l&3)<<4|d>>4;let A=(d&15)<<2|m>>6,x=m&63;p||(x=64,c||(A=64)),s.push(t[v],t[E],t[A],t[x])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(lS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):pM(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||d==null||m==null||E==null)throw new gM;const A=l<<2|d>>4;if(s.push(A),m!==64){const x=d<<4&240|m>>2;if(s.push(x),E!==64){const L=m<<6&192|E;s.push(L)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class gM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yM=function(n){const e=lS(n);return uS.encodeByteArray(e,!0)},_d=function(n){return yM(n).replace(/\./g,"")},cS=function(n){try{return uS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _M(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM=()=>_M().__FIREBASE_DEFAULTS__,TM=()=>{if(typeof process>"u"||typeof iE>"u")return;const n=iE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},EM=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&cS(n[1]);return e&&JSON.parse(e)},zd=()=>{try{return mM()||vM()||TM()||EM()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},dS=n=>{var e,t;return(t=(e=zd())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},SM=n=>{const e=dS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},fS=()=>{var n;return(n=zd())==null?void 0:n.config},hS=n=>{var e;return(e=zd())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function mS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CM(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[_d(JSON.stringify(t)),_d(JSON.stringify(c)),""].join(".")}const Jl={};function IM(){const n={prod:[],emulator:[]};for(const e of Object.keys(Jl))Jl[e]?n.emulator.push(e):n.prod.push(e);return n}function bM(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let sE=!1;function pS(n,e){if(typeof window>"u"||typeof document>"u"||!ba(window.location.host)||Jl[n]===e||Jl[n]||sE)return;Jl[n]=e;function t(A){return`__firebase__banner__${A}`}const s="__firebase__banner",l=IM().prod.length>0;function c(){const A=document.getElementById(s);A&&A.remove()}function d(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function p(A,x){A.setAttribute("width","24"),A.setAttribute("id",x),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function m(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{sE=!0,c()},A}function v(A,x){A.setAttribute("id",x),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function E(){const A=bM(s),x=t("text"),L=document.getElementById(x)||document.createElement("span"),B=t("learnmore"),z=document.getElementById(B)||document.createElement("a"),ee=t("preprendIcon"),te=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const Q=A.element;d(Q),v(z,B);const F=m();p(te,ee),Q.append(te,L,z,F),document.body.appendChild(Q)}l?(L.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function wM(){var e;const n=(e=zd())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NM(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function MM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DM(){const n=cn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function PM(){return!wM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function VM(){try{return typeof indexedDB=="object"}catch{return!1}}function kM(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM="FirebaseError";class Es extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=UM,Object.setPrototypeOf(this,Es.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uu.prototype.create)}}class uu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?LM(l,s):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new Es(o,d,s)}}function LM(n,e){return n.replace(OM,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const OM=/\{\$([^}]+)}/g;function qM(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function to(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=n[o],c=e[o];if(rE(l)&&rE(c)){if(!to(l,c))return!1}else if(l!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function rE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function BM(n,e){const t=new FM(n,e);return t.subscribe.bind(t)}class FM{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");zM(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=pm),o.error===void 0&&(o.error=pm),o.complete===void 0&&(o.complete=pm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zM(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function pm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(n){return n&&n._delegate?n._delegate:n}class no{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new AM;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YM(e))try{this.getOrInitializeService({instanceIdentifier:Qr})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=Qr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qr){return this.instances.has(e)}getOptions(e=Qr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&c.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:GM(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Qr){return this.component?this.component.multipleInstances?e:Qr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function GM(n){return n===Qr?void 0:n}function YM(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new HM(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Fe||(Fe={}));const jM={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},KM=Fe.INFO,$M={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},QM=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=$M[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tp{constructor(e){this.name=e,this._logLevel=KM,this._logHandler=QM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const XM=(n,e)=>e.some(t=>n instanceof t);let oE,aE;function WM(){return oE||(oE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZM(){return aE||(aE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gS=new WeakMap,zm=new WeakMap,yS=new WeakMap,gm=new WeakMap,Ep=new WeakMap;function eD(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(ur(n.result)),o()},c=()=>{s(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&gS.set(t,n)}).catch(()=>{}),Ep.set(e,n),e}function tD(n){if(zm.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});zm.set(n,e)}let Hm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return zm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||yS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ur(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function nD(n){Hm=n(Hm)}function iD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(ym(this),e,...t);return yS.set(s,e.sort?e.sort():[e]),ur(s)}:ZM().includes(n)?function(...e){return n.apply(ym(this),e),ur(gS.get(this))}:function(...e){return ur(n.apply(ym(this),e))}}function sD(n){return typeof n=="function"?iD(n):(n instanceof IDBTransaction&&tD(n),XM(n,WM())?new Proxy(n,Hm):n)}function ur(n){if(n instanceof IDBRequest)return eD(n);if(gm.has(n))return gm.get(n);const e=sD(n);return e!==n&&(gm.set(n,e),Ep.set(e,n)),e}const ym=n=>Ep.get(n);function rD(n,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),d=ur(c);return s&&c.addEventListener("upgradeneeded",p=>{s(ur(c.result),p.oldVersion,p.newVersion,ur(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const oD=["get","getKey","getAll","getAllKeys","count"],aD=["put","add","delete","clear"],_m=new Map;function lE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(_m.get(e))return _m.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=aD.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||oD.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,o?"readwrite":"readonly");let m=p.store;return s&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),o&&p.done]))[0]};return _m.set(e,l),l}nD(n=>({...n,get:(e,t,s)=>lE(e,t)||n.get(e,t,s),has:(e,t)=>!!lE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(uD(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function uD(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gm="@firebase/app",uE="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new Tp("@firebase/app"),cD="@firebase/app-compat",dD="@firebase/analytics-compat",fD="@firebase/analytics",hD="@firebase/app-check-compat",mD="@firebase/app-check",pD="@firebase/auth",gD="@firebase/auth-compat",yD="@firebase/database",_D="@firebase/data-connect",vD="@firebase/database-compat",TD="@firebase/functions",ED="@firebase/functions-compat",SD="@firebase/installations",AD="@firebase/installations-compat",CD="@firebase/messaging",ID="@firebase/messaging-compat",bD="@firebase/performance",xD="@firebase/performance-compat",wD="@firebase/remote-config",RD="@firebase/remote-config-compat",ND="@firebase/storage",MD="@firebase/storage-compat",DD="@firebase/firestore",PD="@firebase/ai",VD="@firebase/firestore-compat",kD="firebase",UD="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="[DEFAULT]",LD={[Gm]:"fire-core",[cD]:"fire-core-compat",[fD]:"fire-analytics",[dD]:"fire-analytics-compat",[mD]:"fire-app-check",[hD]:"fire-app-check-compat",[pD]:"fire-auth",[gD]:"fire-auth-compat",[yD]:"fire-rtdb",[_D]:"fire-data-connect",[vD]:"fire-rtdb-compat",[TD]:"fire-fn",[ED]:"fire-fn-compat",[SD]:"fire-iid",[AD]:"fire-iid-compat",[CD]:"fire-fcm",[ID]:"fire-fcm-compat",[bD]:"fire-perf",[xD]:"fire-perf-compat",[wD]:"fire-rc",[RD]:"fire-rc-compat",[ND]:"fire-gcs",[MD]:"fire-gcs-compat",[DD]:"fire-fst",[VD]:"fire-fst-compat",[PD]:"fire-vertex","fire-js":"fire-js",[kD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd=new Map,OD=new Map,Jm=new Map;function cE(n,e){try{n.container.addComponent(e)}catch(t){ms.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function pa(n){const e=n.name;if(Jm.has(e))return ms.debug(`There were multiple attempts to register component ${e}.`),!1;Jm.set(e,n);for(const t of vd.values())cE(t,n);for(const t of OD.values())cE(t,n);return!0}function Sp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ki(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cr=new uu("app","Firebase",qD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new no("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa=UD;function _S(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:Ym,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw cr.create("bad-app-name",{appName:String(o)});if(t||(t=fS()),!t)throw cr.create("no-options");const l=vd.get(o);if(l){if(to(t,l.options)&&to(s,l.config))return l;throw cr.create("duplicate-app",{appName:o})}const c=new JM(o);for(const p of Jm.values())c.addComponent(p);const d=new BD(t,s,c);return vd.set(o,d),d}function vS(n=Ym){const e=vd.get(n);if(!e&&n===Ym&&fS())return _S();if(!e)throw cr.create("no-app",{appName:n});return e}function dr(n,e,t){let s=LD[n]??n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ms.warn(c.join(" "));return}pa(new no(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD="firebase-heartbeat-database",zD=1,Zl="firebase-heartbeat-store";let vm=null;function TS(){return vm||(vm=rD(FD,zD,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Zl)}catch(t){console.warn(t)}}}}).catch(n=>{throw cr.create("idb-open",{originalErrorMessage:n.message})})),vm}async function HD(n){try{const t=(await TS()).transaction(Zl),s=await t.objectStore(Zl).get(ES(n));return await t.done,s}catch(e){if(e instanceof Es)ms.warn(e.message);else{const t=cr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ms.warn(t.message)}}}async function dE(n,e){try{const s=(await TS()).transaction(Zl,"readwrite");await s.objectStore(Zl).put(e,ES(n)),await s.done}catch(t){if(t instanceof Es)ms.warn(t.message);else{const s=cr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ms.warn(s.message)}}}function ES(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD=1024,YD=30;class JD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new KD(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=fE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>YD){const c=$D(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ms.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=fE(),{heartbeatsToSend:s,unsentEntries:o}=jD(this._heartbeatsCache.heartbeats),l=_d(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ms.warn(t),""}}}function fE(){return new Date().toISOString().substring(0,10)}function jD(n,e=GD){const t=[];let s=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),hE(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),hE(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class KD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VM()?kM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await HD(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return dE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return dE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function hE(n){return _d(JSON.stringify({version:2,heartbeats:n})).length}function $D(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(n){pa(new no("platform-logger",e=>new lD(e),"PRIVATE")),pa(new no("heartbeat",e=>new JD(e),"PRIVATE")),dr(Gm,uE,n),dr(Gm,uE,"esm2020"),dr("fire-js","")}QD("");var XD="firebase",WD="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dr(XD,WD,"app");var mE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fr,SS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,M){function R(){}R.prototype=M.prototype,N.F=M.prototype,N.prototype=new R,N.prototype.constructor=N,N.D=function(V,k,O){for(var P=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)P[Ye-2]=arguments[Ye];return M.prototype[k].apply(V,P)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,M,R){R||(R=0);const V=Array(16);if(typeof M=="string")for(var k=0;k<16;++k)V[k]=M.charCodeAt(R++)|M.charCodeAt(R++)<<8|M.charCodeAt(R++)<<16|M.charCodeAt(R++)<<24;else for(k=0;k<16;++k)V[k]=M[R++]|M[R++]<<8|M[R++]<<16|M[R++]<<24;M=N.g[0],R=N.g[1],k=N.g[2];let O=N.g[3],P;P=M+(O^R&(k^O))+V[0]+3614090360&4294967295,M=R+(P<<7&4294967295|P>>>25),P=O+(k^M&(R^k))+V[1]+3905402710&4294967295,O=M+(P<<12&4294967295|P>>>20),P=k+(R^O&(M^R))+V[2]+606105819&4294967295,k=O+(P<<17&4294967295|P>>>15),P=R+(M^k&(O^M))+V[3]+3250441966&4294967295,R=k+(P<<22&4294967295|P>>>10),P=M+(O^R&(k^O))+V[4]+4118548399&4294967295,M=R+(P<<7&4294967295|P>>>25),P=O+(k^M&(R^k))+V[5]+1200080426&4294967295,O=M+(P<<12&4294967295|P>>>20),P=k+(R^O&(M^R))+V[6]+2821735955&4294967295,k=O+(P<<17&4294967295|P>>>15),P=R+(M^k&(O^M))+V[7]+4249261313&4294967295,R=k+(P<<22&4294967295|P>>>10),P=M+(O^R&(k^O))+V[8]+1770035416&4294967295,M=R+(P<<7&4294967295|P>>>25),P=O+(k^M&(R^k))+V[9]+2336552879&4294967295,O=M+(P<<12&4294967295|P>>>20),P=k+(R^O&(M^R))+V[10]+4294925233&4294967295,k=O+(P<<17&4294967295|P>>>15),P=R+(M^k&(O^M))+V[11]+2304563134&4294967295,R=k+(P<<22&4294967295|P>>>10),P=M+(O^R&(k^O))+V[12]+1804603682&4294967295,M=R+(P<<7&4294967295|P>>>25),P=O+(k^M&(R^k))+V[13]+4254626195&4294967295,O=M+(P<<12&4294967295|P>>>20),P=k+(R^O&(M^R))+V[14]+2792965006&4294967295,k=O+(P<<17&4294967295|P>>>15),P=R+(M^k&(O^M))+V[15]+1236535329&4294967295,R=k+(P<<22&4294967295|P>>>10),P=M+(k^O&(R^k))+V[1]+4129170786&4294967295,M=R+(P<<5&4294967295|P>>>27),P=O+(R^k&(M^R))+V[6]+3225465664&4294967295,O=M+(P<<9&4294967295|P>>>23),P=k+(M^R&(O^M))+V[11]+643717713&4294967295,k=O+(P<<14&4294967295|P>>>18),P=R+(O^M&(k^O))+V[0]+3921069994&4294967295,R=k+(P<<20&4294967295|P>>>12),P=M+(k^O&(R^k))+V[5]+3593408605&4294967295,M=R+(P<<5&4294967295|P>>>27),P=O+(R^k&(M^R))+V[10]+38016083&4294967295,O=M+(P<<9&4294967295|P>>>23),P=k+(M^R&(O^M))+V[15]+3634488961&4294967295,k=O+(P<<14&4294967295|P>>>18),P=R+(O^M&(k^O))+V[4]+3889429448&4294967295,R=k+(P<<20&4294967295|P>>>12),P=M+(k^O&(R^k))+V[9]+568446438&4294967295,M=R+(P<<5&4294967295|P>>>27),P=O+(R^k&(M^R))+V[14]+3275163606&4294967295,O=M+(P<<9&4294967295|P>>>23),P=k+(M^R&(O^M))+V[3]+4107603335&4294967295,k=O+(P<<14&4294967295|P>>>18),P=R+(O^M&(k^O))+V[8]+1163531501&4294967295,R=k+(P<<20&4294967295|P>>>12),P=M+(k^O&(R^k))+V[13]+2850285829&4294967295,M=R+(P<<5&4294967295|P>>>27),P=O+(R^k&(M^R))+V[2]+4243563512&4294967295,O=M+(P<<9&4294967295|P>>>23),P=k+(M^R&(O^M))+V[7]+1735328473&4294967295,k=O+(P<<14&4294967295|P>>>18),P=R+(O^M&(k^O))+V[12]+2368359562&4294967295,R=k+(P<<20&4294967295|P>>>12),P=M+(R^k^O)+V[5]+4294588738&4294967295,M=R+(P<<4&4294967295|P>>>28),P=O+(M^R^k)+V[8]+2272392833&4294967295,O=M+(P<<11&4294967295|P>>>21),P=k+(O^M^R)+V[11]+1839030562&4294967295,k=O+(P<<16&4294967295|P>>>16),P=R+(k^O^M)+V[14]+4259657740&4294967295,R=k+(P<<23&4294967295|P>>>9),P=M+(R^k^O)+V[1]+2763975236&4294967295,M=R+(P<<4&4294967295|P>>>28),P=O+(M^R^k)+V[4]+1272893353&4294967295,O=M+(P<<11&4294967295|P>>>21),P=k+(O^M^R)+V[7]+4139469664&4294967295,k=O+(P<<16&4294967295|P>>>16),P=R+(k^O^M)+V[10]+3200236656&4294967295,R=k+(P<<23&4294967295|P>>>9),P=M+(R^k^O)+V[13]+681279174&4294967295,M=R+(P<<4&4294967295|P>>>28),P=O+(M^R^k)+V[0]+3936430074&4294967295,O=M+(P<<11&4294967295|P>>>21),P=k+(O^M^R)+V[3]+3572445317&4294967295,k=O+(P<<16&4294967295|P>>>16),P=R+(k^O^M)+V[6]+76029189&4294967295,R=k+(P<<23&4294967295|P>>>9),P=M+(R^k^O)+V[9]+3654602809&4294967295,M=R+(P<<4&4294967295|P>>>28),P=O+(M^R^k)+V[12]+3873151461&4294967295,O=M+(P<<11&4294967295|P>>>21),P=k+(O^M^R)+V[15]+530742520&4294967295,k=O+(P<<16&4294967295|P>>>16),P=R+(k^O^M)+V[2]+3299628645&4294967295,R=k+(P<<23&4294967295|P>>>9),P=M+(k^(R|~O))+V[0]+4096336452&4294967295,M=R+(P<<6&4294967295|P>>>26),P=O+(R^(M|~k))+V[7]+1126891415&4294967295,O=M+(P<<10&4294967295|P>>>22),P=k+(M^(O|~R))+V[14]+2878612391&4294967295,k=O+(P<<15&4294967295|P>>>17),P=R+(O^(k|~M))+V[5]+4237533241&4294967295,R=k+(P<<21&4294967295|P>>>11),P=M+(k^(R|~O))+V[12]+1700485571&4294967295,M=R+(P<<6&4294967295|P>>>26),P=O+(R^(M|~k))+V[3]+2399980690&4294967295,O=M+(P<<10&4294967295|P>>>22),P=k+(M^(O|~R))+V[10]+4293915773&4294967295,k=O+(P<<15&4294967295|P>>>17),P=R+(O^(k|~M))+V[1]+2240044497&4294967295,R=k+(P<<21&4294967295|P>>>11),P=M+(k^(R|~O))+V[8]+1873313359&4294967295,M=R+(P<<6&4294967295|P>>>26),P=O+(R^(M|~k))+V[15]+4264355552&4294967295,O=M+(P<<10&4294967295|P>>>22),P=k+(M^(O|~R))+V[6]+2734768916&4294967295,k=O+(P<<15&4294967295|P>>>17),P=R+(O^(k|~M))+V[13]+1309151649&4294967295,R=k+(P<<21&4294967295|P>>>11),P=M+(k^(R|~O))+V[4]+4149444226&4294967295,M=R+(P<<6&4294967295|P>>>26),P=O+(R^(M|~k))+V[11]+3174756917&4294967295,O=M+(P<<10&4294967295|P>>>22),P=k+(M^(O|~R))+V[2]+718787259&4294967295,k=O+(P<<15&4294967295|P>>>17),P=R+(O^(k|~M))+V[9]+3951481745&4294967295,N.g[0]=N.g[0]+M&4294967295,N.g[1]=N.g[1]+(k+(P<<21&4294967295|P>>>11))&4294967295,N.g[2]=N.g[2]+k&4294967295,N.g[3]=N.g[3]+O&4294967295}s.prototype.v=function(N,M){M===void 0&&(M=N.length);const R=M-this.blockSize,V=this.C;let k=this.h,O=0;for(;O<M;){if(k==0)for(;O<=R;)o(this,N,O),O+=this.blockSize;if(typeof N=="string"){for(;O<M;)if(V[k++]=N.charCodeAt(O++),k==this.blockSize){o(this,V),k=0;break}}else for(;O<M;)if(V[k++]=N[O++],k==this.blockSize){o(this,V),k=0;break}}this.h=k,this.o+=M},s.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var M=1;M<N.length-8;++M)N[M]=0;M=this.o*8;for(var R=N.length-8;R<N.length;++R)N[R]=M&255,M/=256;for(this.v(N),N=Array(16),M=0,R=0;R<4;++R)for(let V=0;V<32;V+=8)N[M++]=this.g[R]>>>V&255;return N};function l(N,M){var R=d;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=M(N)}function c(N,M){this.h=M;const R=[];let V=!0;for(let k=N.length-1;k>=0;k--){const O=N[k]|0;V&&O==M||(R[k]=O,V=!1)}this.g=R}var d={};function p(N){return-128<=N&&N<128?l(N,function(M){return new c([M|0],M<0?-1:0)}):new c([N|0],N<0?-1:0)}function m(N){if(isNaN(N)||!isFinite(N))return E;if(N<0)return z(m(-N));const M=[];let R=1;for(let V=0;N>=R;V++)M[V]=N/R|0,R*=4294967296;return new c(M,0)}function v(N,M){if(N.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(N.charAt(0)=="-")return z(v(N.substring(1),M));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=m(Math.pow(M,8));let V=E;for(let O=0;O<N.length;O+=8){var k=Math.min(8,N.length-O);const P=parseInt(N.substring(O,O+k),M);k<8?(k=m(Math.pow(M,k)),V=V.j(k).add(m(P))):(V=V.j(R),V=V.add(m(P)))}return V}var E=p(0),A=p(1),x=p(16777216);n=c.prototype,n.m=function(){if(B(this))return-z(this).m();let N=0,M=1;for(let R=0;R<this.g.length;R++){const V=this.i(R);N+=(V>=0?V:4294967296+V)*M,M*=4294967296}return N},n.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(L(this))return"0";if(B(this))return"-"+z(this).toString(N);const M=m(Math.pow(N,6));var R=this;let V="";for(;;){const k=F(R,M).g;R=ee(R,k.j(M));let O=((R.g.length>0?R.g[0]:R.h)>>>0).toString(N);if(R=k,L(R))return O+V;for(;O.length<6;)O="0"+O;V=O+V}},n.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function L(N){if(N.h!=0)return!1;for(let M=0;M<N.g.length;M++)if(N.g[M]!=0)return!1;return!0}function B(N){return N.h==-1}n.l=function(N){return N=ee(this,N),B(N)?-1:L(N)?0:1};function z(N){const M=N.g.length,R=[];for(let V=0;V<M;V++)R[V]=~N.g[V];return new c(R,~N.h).add(A)}n.abs=function(){return B(this)?z(this):this},n.add=function(N){const M=Math.max(this.g.length,N.g.length),R=[];let V=0;for(let k=0;k<=M;k++){let O=V+(this.i(k)&65535)+(N.i(k)&65535),P=(O>>>16)+(this.i(k)>>>16)+(N.i(k)>>>16);V=P>>>16,O&=65535,P&=65535,R[k]=P<<16|O}return new c(R,R[R.length-1]&-2147483648?-1:0)};function ee(N,M){return N.add(z(M))}n.j=function(N){if(L(this)||L(N))return E;if(B(this))return B(N)?z(this).j(z(N)):z(z(this).j(N));if(B(N))return z(this.j(z(N)));if(this.l(x)<0&&N.l(x)<0)return m(this.m()*N.m());const M=this.g.length+N.g.length,R=[];for(var V=0;V<2*M;V++)R[V]=0;for(V=0;V<this.g.length;V++)for(let k=0;k<N.g.length;k++){const O=this.i(V)>>>16,P=this.i(V)&65535,Ye=N.i(k)>>>16,ke=N.i(k)&65535;R[2*V+2*k]+=P*ke,te(R,2*V+2*k),R[2*V+2*k+1]+=O*ke,te(R,2*V+2*k+1),R[2*V+2*k+1]+=P*Ye,te(R,2*V+2*k+1),R[2*V+2*k+2]+=O*Ye,te(R,2*V+2*k+2)}for(N=0;N<M;N++)R[N]=R[2*N+1]<<16|R[2*N];for(N=M;N<2*M;N++)R[N]=0;return new c(R,0)};function te(N,M){for(;(N[M]&65535)!=N[M];)N[M+1]+=N[M]>>>16,N[M]&=65535,M++}function Q(N,M){this.g=N,this.h=M}function F(N,M){if(L(M))throw Error("division by zero");if(L(N))return new Q(E,E);if(B(N))return M=F(z(N),M),new Q(z(M.g),z(M.h));if(B(M))return M=F(N,z(M)),new Q(z(M.g),M.h);if(N.g.length>30){if(B(N)||B(M))throw Error("slowDivide_ only works with positive integers.");for(var R=A,V=M;V.l(N)<=0;)R=ne(R),V=ne(V);var k=ae(R,1),O=ae(V,1);for(V=ae(V,2),R=ae(R,2);!L(V);){var P=O.add(V);P.l(N)<=0&&(k=k.add(R),O=P),V=ae(V,1),R=ae(R,1)}return M=ee(N,k.j(M)),new Q(k,M)}for(k=E;N.l(M)>=0;){for(R=Math.max(1,Math.floor(N.m()/M.m())),V=Math.ceil(Math.log(R)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),O=m(R),P=O.j(M);B(P)||P.l(N)>0;)R-=V,O=m(R),P=O.j(M);L(O)&&(O=A),k=k.add(O),N=ee(N,P)}return new Q(k,N)}n.B=function(N){return F(this,N).h},n.and=function(N){const M=Math.max(this.g.length,N.g.length),R=[];for(let V=0;V<M;V++)R[V]=this.i(V)&N.i(V);return new c(R,this.h&N.h)},n.or=function(N){const M=Math.max(this.g.length,N.g.length),R=[];for(let V=0;V<M;V++)R[V]=this.i(V)|N.i(V);return new c(R,this.h|N.h)},n.xor=function(N){const M=Math.max(this.g.length,N.g.length),R=[];for(let V=0;V<M;V++)R[V]=this.i(V)^N.i(V);return new c(R,this.h^N.h)};function ne(N){const M=N.g.length+1,R=[];for(let V=0;V<M;V++)R[V]=N.i(V)<<1|N.i(V-1)>>>31;return new c(R,N.h)}function ae(N,M){const R=M>>5;M%=32;const V=N.g.length-R,k=[];for(let O=0;O<V;O++)k[O]=M>0?N.i(O+R)>>>M|N.i(O+R+1)<<32-M:N.i(O+R);return new c(k,N.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,SS=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=v,fr=c}).apply(typeof mE<"u"?mE:typeof self<"u"?self:typeof window<"u"?window:{});var $c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var AS,zl,CS,sd,jm,IS,bS,xS;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof $c=="object"&&$c];for(var S=0;S<h.length;++S){var I=h[S];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var s=t(this);function o(h,S){if(S)e:{var I=s;h=h.split(".");for(var w=0;w<h.length-1;w++){var G=h[w];if(!(G in I))break e;I=I[G]}h=h[h.length-1],w=I[h],S=S(w),S!=w&&S!=null&&e(I,h,{configurable:!0,writable:!0,value:S})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(S){var I=[],w;for(w in S)Object.prototype.hasOwnProperty.call(S,w)&&I.push([w,S[w]]);return I}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(h){var S=typeof h;return S=="object"&&h!=null||S=="function"}function p(h,S,I){return h.call.apply(h.bind,arguments)}function m(h,S,I){return m=p,m.apply(null,arguments)}function v(h,S){var I=Array.prototype.slice.call(arguments,1);return function(){var w=I.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function E(h,S){function I(){}I.prototype=S.prototype,h.Z=S.prototype,h.prototype=new I,h.prototype.constructor=h,h.Ob=function(w,G,$){for(var ce=Array(arguments.length-2),De=2;De<arguments.length;De++)ce[De-2]=arguments[De];return S.prototype[G].apply(w,ce)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function x(h){const S=h.length;if(S>0){const I=Array(S);for(let w=0;w<S;w++)I[w]=h[w];return I}return[]}function L(h,S){for(let w=1;w<arguments.length;w++){const G=arguments[w];var I=typeof G;if(I=I!="object"?I:G?Array.isArray(G)?"array":I:"null",I=="array"||I=="object"&&typeof G.length=="number"){I=h.length||0;const $=G.length||0;h.length=I+$;for(let ce=0;ce<$;ce++)h[I+ce]=G[ce]}else h.push(G)}}class B{constructor(S,I){this.i=S,this.j=I,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function z(h){c.setTimeout(()=>{throw h},0)}function ee(){var h=N;let S=null;return h.g&&(S=h.g,h.g=h.g.next,h.g||(h.h=null),S.next=null),S}class te{constructor(){this.h=this.g=null}add(S,I){const w=Q.get();w.set(S,I),this.h?this.h.next=w:this.g=w,this.h=w}}var Q=new B(()=>new F,h=>h.reset());class F{constructor(){this.next=this.g=this.h=null}set(S,I){this.h=S,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,ae=!1,N=new te,M=()=>{const h=Promise.resolve(void 0);ne=()=>{h.then(R)}};function R(){for(var h;h=ee();){try{h.h.call(h.g)}catch(I){z(I)}var S=Q;S.j(h),S.h<100&&(S.h++,h.next=S.g,S.g=h)}ae=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(h,S){this.type=h,this.g=this.target=S,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,S=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const I=()=>{};c.addEventListener("test",I,S),c.removeEventListener("test",I,S)}catch{}return h})();function P(h){return/^[\s\xa0]*$/.test(h)}function Ye(h,S){k.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,S)}E(Ye,k),Ye.prototype.init=function(h,S){const I=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=S,S=h.relatedTarget,S||(I=="mouseover"?S=h.fromElement:I=="mouseout"&&(S=h.toElement)),this.relatedTarget=S,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ye.Z.h.call(this)},Ye.prototype.h=function(){Ye.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ke="closure_listenable_"+(Math.random()*1e6|0),W=0;function de(h,S,I,w,G){this.listener=h,this.proxy=null,this.src=S,this.type=I,this.capture=!!w,this.ha=G,this.key=++W,this.da=this.fa=!1}function Ee(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ue(h,S,I){for(const w in h)S.call(I,h[w],w,h)}function fe(h,S){for(const I in h)S.call(void 0,h[I],I,h)}function D(h){const S={};for(const I in h)S[I]=h[I];return S}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(h,S){let I,w;for(let G=1;G<arguments.length;G++){w=arguments[G];for(I in w)h[I]=w[I];for(let $=0;$<K.length;$++)I=K[$],Object.prototype.hasOwnProperty.call(w,I)&&(h[I]=w[I])}}function he(h){this.src=h,this.g={},this.h=0}he.prototype.add=function(h,S,I,w,G){const $=h.toString();h=this.g[$],h||(h=this.g[$]=[],this.h++);const ce=Re(h,S,w,G);return ce>-1?(S=h[ce],I||(S.fa=!1)):(S=new de(S,this.src,$,!!w,G),S.fa=I,h.push(S)),S};function Se(h,S){const I=S.type;if(I in h.g){var w=h.g[I],G=Array.prototype.indexOf.call(w,S,void 0),$;($=G>=0)&&Array.prototype.splice.call(w,G,1),$&&(Ee(S),h.g[I].length==0&&(delete h.g[I],h.h--))}}function Re(h,S,I,w){for(let G=0;G<h.length;++G){const $=h[G];if(!$.da&&$.listener==S&&$.capture==!!I&&$.ha==w)return G}return-1}var Oe="closure_lm_"+(Math.random()*1e6|0),vt={};function at(h,S,I,w,G){if(Array.isArray(S)){for(let $=0;$<S.length;$++)at(h,S[$],I,w,G);return null}return I=ka(I),h&&h[ke]?h.J(S,I,d(w)?!!w.capture:!1,G):Hi(h,S,I,!1,w,G)}function Hi(h,S,I,w,G,$){if(!S)throw Error("Invalid event type");const ce=d(G)?!!G.capture:!!G;let De=qt(h);if(De||(h[Oe]=De=new he(h)),I=De.add(S,I,w,ce,$),I.proxy)return I;if(w=ve(),I.proxy=w,w.src=h,w.listener=I,h.addEventListener)O||(G=ce),G===void 0&&(G=!1),h.addEventListener(S.toString(),w,G);else if(h.attachEvent)h.attachEvent(Qt(S.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return I}function ve(){function h(I){return S.call(h.src,h.listener,I)}const S=Ot;return h}function Tt(h,S,I,w,G){if(Array.isArray(S))for(var $=0;$<S.length;$++)Tt(h,S[$],I,w,G);else w=d(w)?!!w.capture:!!w,I=ka(I),h&&h[ke]?(h=h.i,$=String(S).toString(),$ in h.g&&(S=h.g[$],I=Re(S,I,w,G),I>-1&&(Ee(S[I]),Array.prototype.splice.call(S,I,1),S.length==0&&(delete h.g[$],h.h--)))):h&&(h=qt(h))&&(S=h.g[S.toString()],h=-1,S&&(h=Re(S,I,w,G)),(I=h>-1?S[h]:null)&&fi(I))}function fi(h){if(typeof h!="number"&&h&&!h.da){var S=h.src;if(S&&S[ke])Se(S.i,h);else{var I=h.type,w=h.proxy;S.removeEventListener?S.removeEventListener(I,w,h.capture):S.detachEvent?S.detachEvent(Qt(I),w):S.addListener&&S.removeListener&&S.removeListener(w),(I=qt(S))?(Se(I,h),I.h==0&&(I.src=null,S[Oe]=null)):Ee(h)}}}function Qt(h){return h in vt?vt[h]:vt[h]="on"+h}function Ot(h,S){if(h.da)h=!0;else{S=new Ye(S,this);const I=h.listener,w=h.ha||h.src;h.fa&&fi(h),h=I.call(w,S)}return h}function qt(h){return h=h[Oe],h instanceof he?h:null}var Va="__closure_events_fn_"+(Math.random()*1e9>>>0);function ka(h){return typeof h=="function"?h:(h[Va]||(h[Va]=function(S){return h.handleEvent(S)}),h[Va])}function bt(){V.call(this),this.i=new he(this),this.M=this,this.G=null}E(bt,V),bt.prototype[ke]=!0,bt.prototype.removeEventListener=function(h,S,I,w){Tt(this,h,S,I,w)};function Bt(h,S){var I,w=h.G;if(w)for(I=[];w;w=w.G)I.push(w);if(h=h.M,w=S.type||S,typeof S=="string")S=new k(S,h);else if(S instanceof k)S.target=S.target||h;else{var G=S;S=new k(w,h),oe(S,G)}G=!0;let $,ce;if(I)for(ce=I.length-1;ce>=0;ce--)$=S.g=I[ce],G=Ss($,w,!0,S)&&G;if($=S.g=h,G=Ss($,w,!0,S)&&G,G=Ss($,w,!1,S)&&G,I)for(ce=0;ce<I.length;ce++)$=S.g=I[ce],G=Ss($,w,!1,S)&&G}bt.prototype.N=function(){if(bt.Z.N.call(this),this.i){var h=this.i;for(const S in h.g){const I=h.g[S];for(let w=0;w<I.length;w++)Ee(I[w]);delete h.g[S],h.h--}}this.G=null},bt.prototype.J=function(h,S,I,w){return this.i.add(String(h),S,!1,I,w)},bt.prototype.K=function(h,S,I,w){return this.i.add(String(h),S,!0,I,w)};function Ss(h,S,I,w){if(S=h.i.g[String(S)],!S)return!0;S=S.concat();let G=!0;for(let $=0;$<S.length;++$){const ce=S[$];if(ce&&!ce.da&&ce.capture==I){const De=ce.listener,St=ce.ha||ce.src;ce.fa&&Se(h.i,ce),G=De.call(St,w)!==!1&&G}}return G&&!w.defaultPrevented}function lf(h,S){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=m(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:c.setTimeout(h,S||0)}function Tu(h){h.g=lf(()=>{h.g=null,h.i&&(h.i=!1,Tu(h))},h.l);const S=h.h;h.h=null,h.m.apply(null,S)}class dn extends V{constructor(S,I){super(),this.m=S,this.l=I,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:Tu(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Er(h){V.call(this),this.h=h,this.g={}}E(Er,V);var Ua=[];function La(h){ue(h.g,function(S,I){this.g.hasOwnProperty(I)&&fi(S)},h),h.g={}}Er.prototype.N=function(){Er.Z.N.call(this),La(this)},Er.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var As=c.JSON.stringify,uf=c.JSON.parse,Eu=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Su(){}function Au(){}var Kn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Xt(){k.call(this,"d")}E(Xt,k);function Pn(){k.call(this,"c")}E(Pn,k);var Et={},Cu=null;function ho(){return Cu=Cu||new bt}Et.Ia="serverreachability";function Iu(h){k.call(this,Et.Ia,h)}E(Iu,k);function hi(h){const S=ho();Bt(S,new Iu(S))}Et.STAT_EVENT="statevent";function Sr(h,S){k.call(this,Et.STAT_EVENT,h),this.stat=S}E(Sr,k);function xt(h){const S=ho();Bt(S,new Sr(S,h))}Et.Ja="timingevent";function mi(h,S){k.call(this,Et.Ja,h),this.size=S}E(mi,k);function pi(h,S){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},S)}function $n(){this.g=!0}$n.prototype.ua=function(){this.g=!1};function cf(h,S,I,w,G,$){h.info(function(){if(h.g)if($){var ce="",De=$.split("&");for(let Qe=0;Qe<De.length;Qe++){var St=De[Qe].split("=");if(St.length>1){const ht=St[0];St=St[1];const Ln=ht.split("_");ce=Ln.length>=2&&Ln[1]=="type"?ce+(ht+"="+St+"&"):ce+(ht+"=redacted&")}}}else ce=null;else ce=$;return"XMLHTTP REQ ("+w+") [attempt "+G+"]: "+S+`
`+I+`
`+ce})}function bu(h,S,I,w,G,$,ce){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+G+"]: "+S+`
`+I+`
`+$+" "+ce})}function gi(h,S,I,w){h.info(function(){return"XMLHTTP TEXT ("+S+"): "+df(h,I)+(w?" "+w:"")})}function Ar(h,S){h.info(function(){return"TIMEOUT: "+S})}$n.prototype.info=function(){};function df(h,S){if(!h.g)return S;if(!S)return null;try{const $=JSON.parse(S);if($){for(h=0;h<$.length;h++)if(Array.isArray($[h])){var I=$[h];if(!(I.length<2)){var w=I[1];if(Array.isArray(w)&&!(w.length<1)){var G=w[0];if(G!="noop"&&G!="stop"&&G!="close")for(let ce=1;ce<w.length;ce++)w[ce]=""}}}}return As($)}catch{return S}}var Cr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Oa={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},qa;function Ir(){}E(Ir,Su),Ir.prototype.g=function(){return new XMLHttpRequest},qa=new Ir;function Gi(h){return encodeURIComponent(String(h))}function xu(h){var S=1;h=h.split(":");const I=[];for(;S>0&&h.length;)I.push(h.shift()),S--;return h.length&&I.push(h.join(":")),I}function Qn(h,S,I,w){this.j=h,this.i=S,this.l=I,this.S=w||1,this.V=new Er(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Xn}function Xn(){this.i=null,this.g="",this.h=!1}var wt={},Gt={};function yi(h,S,I){h.M=1,h.A=br(Nt(S)),h.u=I,h.R=!0,mo(h,null)}function mo(h,S){h.F=Date.now(),_i(h),h.B=Nt(h.A);var I=h.B,w=h.S;Array.isArray(w)||(w=[String(w)]),_o(I.i,"t",w),h.C=0,I=h.j.L,h.h=new Xn,h.g=zu(h.j,I?S:null,!h.u),h.P>0&&(h.O=new dn(m(h.Y,h,h.g),h.P)),S=h.V,I=h.g,w=h.ba;var G="readystatechange";Array.isArray(G)||(G&&(Ua[0]=G.toString()),G=Ua);for(let $=0;$<G.length;$++){const ce=at(I,G[$],w||S.handleEvent,!1,S.h||S);if(!ce)break;S.g[ce.key]=ce}S=h.J?D(h.J):{},h.u?(h.v||(h.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,S)):(h.v="GET",h.g.ea(h.B,h.v,null,S)),hi(),cf(h.i,h.v,h.B,h.l,h.S,h.u)}Qn.prototype.ba=function(h){h=h.target;const S=this.O;S&&ei(h)==3?S.j():this.Y(h)},Qn.prototype.Y=function(h){try{if(h==this.g)e:{const De=ei(this.g),St=this.g.ya(),Qe=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||Wt(this.g)))){this.K||De!=4||St==7||(St==8||Qe<=0?hi(3):hi(2)),vi(this);var S=this.g.ca();this.X=S;var I=ff(this);if(this.o=S==200,bu(this.i,this.v,this.B,this.l,this.S,De,S),this.o){if(this.U&&!this.L){t:{if(this.g){var w,G=this.g;if((w=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(w)){var $=w;break t}}$=null}if(h=$)gi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ti(this,h);else{this.o=!1,this.m=3,xt(12),An(this),Vn(this);break e}}if(this.R){h=!0;let ht;for(;!this.K&&this.C<I.length;)if(ht=Ru(this,I),ht==Gt){De==4&&(this.m=4,xt(14),h=!1),gi(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==wt){this.m=4,xt(15),gi(this.i,this.l,I,"[Invalid Chunk]"),h=!1;break}else gi(this.i,this.l,ht,null),Ti(this,ht);if(wu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||I.length!=0||this.h.h||(this.m=1,xt(16),h=!1),this.o=this.o&&h,!h)gi(this.i,this.l,I,"[Invalid Chunked Response]"),An(this),Vn(this);else if(I.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),el(ce),ce.P=!0,xt(11))}}else gi(this.i,this.l,I,null),Ti(this,I);De==4&&An(this),this.o&&!this.K&&(De==4?Ou(this.j,this):(this.o=!1,_i(this)))}else Ji(this.g),S==400&&I.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),An(this),Vn(this)}}}catch{}finally{}};function ff(h){if(!wu(h))return h.g.la();const S=Wt(h.g);if(S==="")return"";let I="";const w=S.length,G=ei(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return An(h),Vn(h),"";h.h.i=new c.TextDecoder}for(let $=0;$<w;$++)h.h.h=!0,I+=h.h.i.decode(S[$],{stream:!(G&&$==w-1)});return S.length=0,h.h.g+=I,h.C=0,h.h.g}function wu(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ru(h,S){var I=h.C,w=S.indexOf(`
`,I);return w==-1?Gt:(I=Number(S.substring(I,w)),isNaN(I)?wt:(w+=1,w+I>S.length?Gt:(S=S.slice(w,w+I),h.C=w+I,S)))}Qn.prototype.cancel=function(){this.K=!0,An(this)};function _i(h){h.T=Date.now()+h.H,po(h,h.H)}function po(h,S){if(h.D!=null)throw Error("WatchDog timer not null");h.D=pi(m(h.aa,h),S)}function vi(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Qn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ar(this.i,this.B),this.M!=2&&(hi(),xt(17)),An(this),this.m=2,Vn(this)):po(this,this.T-h)};function Vn(h){h.j.I==0||h.K||Ou(h.j,h)}function An(h){vi(h);var S=h.O;S&&typeof S.dispose=="function"&&S.dispose(),h.O=null,La(h.V),h.g&&(S=h.g,h.g=null,S.abort(),S.dispose())}function Ti(h,S){try{var I=h.j;if(I.I!=0&&(I.g==h||Si(I.h,h))){if(!h.L&&Si(I.h,h)&&I.I==3){try{var w=I.Ba.g.parse(S)}catch{w=null}if(Array.isArray(w)&&w.length==3){var G=w;if(G[0]==0){e:if(!I.v){if(I.g)if(I.g.F+3e3<h.F)Ao(I),Ms(I);else break e;Pr(I),xt(18)}}else I.xa=G[1],0<I.xa-I.K&&G[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=pi(m(I.Va,I),6e3));Ei(I.h)<=1&&I.ta&&(I.ta=void 0)}else wi(I,11)}else if((h.L||I.g==h)&&Ao(I),!P(S))for(G=I.Ba.g.parse(S),S=0;S<G.length;S++){let Qe=G[S];const ht=Qe[0];if(!(ht<=I.K))if(I.K=ht,Qe=Qe[1],I.I==2)if(Qe[0]=="c"){I.M=Qe[1],I.ba=Qe[2];const Ln=Qe[3];Ln!=null&&(I.ka=Ln,I.j.info("VER="+I.ka));const Ri=Qe[4];Ri!=null&&(I.za=Ri,I.j.info("SVER="+I.za));const ti=Qe[5];ti!=null&&typeof ti=="number"&&ti>0&&(w=1.5*ti,I.O=w,I.j.info("backChannelRequestTimeoutMs_="+w)),w=I;const ni=h.g;if(ni){const Vr=ni.g?ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vr){var $=w.h;$.g||Vr.indexOf("spdy")==-1&&Vr.indexOf("quic")==-1&&Vr.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(za($,$.h),$.h=null))}if(w.G){const Co=ni.g?ni.g.getResponseHeader("X-HTTP-Session-Id"):null;Co&&(w.wa=Co,Ze(w.J,w.G,Co))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-h.F,I.j.info("Handshake RTT: "+I.T+"ms")),w=I;var ce=h;if(w.na=Fu(w,w.L?w.ba:null,w.W),ce.L){Ha(w.h,ce);var De=ce,St=w.O;St&&(De.H=St),De.D&&(vi(De),_i(De)),w.g=ce}else Uu(w);I.i.length>0&&xi(I)}else Qe[0]!="stop"&&Qe[0]!="close"||wi(I,7);else I.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?wi(I,7):Wa(I):Qe[0]!="noop"&&I.l&&I.l.qa(Qe),I.A=0)}}hi(4)}catch{}}var Rt=class{constructor(h,S){this.g=h,this.map=S}};function Ba(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Fa(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ei(h){return h.h?1:h.g?h.g.size:0}function Si(h,S){return h.h?h.h==S:h.g?h.g.has(S):!1}function za(h,S){h.g?h.g.add(S):h.h=S}function Ha(h,S){h.h&&h.h==S?h.h=null:h.g&&h.g.has(S)&&h.g.delete(S)}Ba.prototype.cancel=function(){if(this.i=Ga(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ga(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let S=h.i;for(const I of h.g.values())S=S.concat(I.G);return S}return x(h.i)}var Nu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function go(h,S){if(h){h=h.split("&");for(let I=0;I<h.length;I++){const w=h[I].indexOf("=");let G,$=null;w>=0?(G=h[I].substring(0,w),$=h[I].substring(w+1)):G=h[I],S(G,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Cn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;h instanceof Cn?(this.l=h.l,Yt(this,h.j),this.o=h.o,this.g=h.g,Cs(this,h.u),this.h=h.h,Ya(this,Vu(h.i)),this.m=h.m):h&&(S=String(h).match(Nu))?(this.l=!1,Yt(this,S[1]||"",!0),this.o=Ai(S[2]||""),this.g=Ai(S[3]||"",!0),Cs(this,S[4]),this.h=Ai(S[5]||"",!0),Ya(this,S[6]||"",!0),this.m=Ai(S[7]||"")):(this.l=!1,this.i=new bs(null,this.l))}Cn.prototype.toString=function(){const h=[];var S=this.j;S&&h.push(xr(S,yo,!0),":");var I=this.g;return(I||S=="file")&&(h.push("//"),(S=this.o)&&h.push(xr(S,yo,!0),"@"),h.push(Gi(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&h.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&h.push("/"),h.push(xr(I,I.charAt(0)=="/"?Ja:Mu,!0))),(I=this.i.toString())&&h.push("?",I),(I=this.m)&&h.push("#",xr(I,Du)),h.join("")},Cn.prototype.resolve=function(h){const S=Nt(this);let I=!!h.j;I?Yt(S,h.j):I=!!h.o,I?S.o=h.o:I=!!h.g,I?S.g=h.g:I=h.u!=null;var w=h.h;if(I)Cs(S,h.u);else if(I=!!h.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var G=S.h.lastIndexOf("/");G!=-1&&(w=S.h.slice(0,G+1)+w)}if(G=w,G==".."||G==".")w="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){w=G.lastIndexOf("/",0)==0,G=G.split("/");const $=[];for(let ce=0;ce<G.length;){const De=G[ce++];De=="."?w&&ce==G.length&&$.push(""):De==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),w&&ce==G.length&&$.push("")):($.push(De),w=!0)}w=$.join("/")}else w=G}return I?S.h=w:I=h.i.toString()!=="",I?Ya(S,Vu(h.i)):I=!!h.m,I&&(S.m=h.m),S};function Nt(h){return new Cn(h)}function Yt(h,S,I){h.j=I?Ai(S,!0):S,h.j&&(h.j=h.j.replace(/:$/,""))}function Cs(h,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);h.u=S}else h.u=null}function Ya(h,S,I){S instanceof bs?(h.i=S,vo(h.i,h.l)):(I||(S=xr(S,Is)),h.i=new bs(S,h.l))}function Ze(h,S,I){h.i.set(S,I)}function br(h){return Ze(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ai(h,S){return h?S?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function xr(h,S,I){return typeof h=="string"?(h=encodeURI(h).replace(S,pn),I&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function pn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var yo=/[#\/\?@]/g,Mu=/[#\?:]/g,Ja=/[#\?]/g,Is=/[#\?@]/g,Du=/#/g;function bs(h,S){this.h=this.g=null,this.i=h||null,this.j=!!S}function gn(h){h.g||(h.g=new Map,h.h=0,h.i&&go(h.i,function(S,I){h.add(decodeURIComponent(S.replace(/\+/g," ")),I)}))}n=bs.prototype,n.add=function(h,S){gn(this),this.i=null,h=xs(this,h);let I=this.g.get(h);return I||this.g.set(h,I=[]),I.push(S),this.h+=1,this};function Pu(h,S){gn(h),S=xs(h,S),h.g.has(S)&&(h.i=null,h.h-=h.g.get(S).length,h.g.delete(S))}function ja(h,S){return gn(h),S=xs(h,S),h.g.has(S)}n.forEach=function(h,S){gn(this),this.g.forEach(function(I,w){I.forEach(function(G){h.call(S,G,w,this)},this)},this)};function Ka(h,S){gn(h);let I=[];if(typeof S=="string")ja(h,S)&&(I=I.concat(h.g.get(xs(h,S))));else for(h=Array.from(h.g.values()),S=0;S<h.length;S++)I=I.concat(h[S]);return I}n.set=function(h,S){return gn(this),this.i=null,h=xs(this,h),ja(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[S]),this.h+=1,this},n.get=function(h,S){return h?(h=Ka(this,h),h.length>0?String(h[0]):S):S};function _o(h,S,I){Pu(h,S),I.length>0&&(h.i=null,h.g.set(xs(h,S),x(I)),h.h+=I.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],S=Array.from(this.g.keys());for(let w=0;w<S.length;w++){var I=S[w];const G=Gi(I);I=Ka(this,I);for(let $=0;$<I.length;$++){let ce=G;I[$]!==""&&(ce+="="+Gi(I[$])),h.push(ce)}}return this.i=h.join("&")};function Vu(h){const S=new bs;return S.i=h.i,h.g&&(S.g=new Map(h.g),S.h=h.h),S}function xs(h,S){return S=String(S),h.j&&(S=S.toLowerCase()),S}function vo(h,S){S&&!h.j&&(gn(h),h.i=null,h.g.forEach(function(I,w){const G=w.toLowerCase();w!=G&&(Pu(this,w),_o(this,G,I))},h)),h.j=S}function Wn(h,S){const I=new $n;if(c.Image){const w=new Image;w.onload=v(kn,I,"TestLoadImage: loaded",!0,S,w),w.onerror=v(kn,I,"TestLoadImage: error",!1,S,w),w.onabort=v(kn,I,"TestLoadImage: abort",!1,S,w),w.ontimeout=v(kn,I,"TestLoadImage: timeout",!1,S,w),c.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else S(!1)}function $a(h,S){const I=new $n,w=new AbortController,G=setTimeout(()=>{w.abort(),kn(I,"TestPingServer: timeout",!1,S)},1e4);fetch(h,{signal:w.signal}).then($=>{clearTimeout(G),$.ok?kn(I,"TestPingServer: ok",!0,S):kn(I,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(G),kn(I,"TestPingServer: error",!1,S)})}function kn(h,S,I,w,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),w(I)}catch{}}function ws(){this.g=new Eu}function Ci(h){this.i=h.Sb||null,this.h=h.ab||!1}E(Ci,Su),Ci.prototype.g=function(){return new wr(this.i,this.h)};function wr(h,S){bt.call(this),this.H=h,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(wr,bt),n=wr.prototype,n.open=function(h,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=S,this.readyState=1,Zn(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(S.body=h),(this.H||c).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Rs(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Zn(this)),this.g&&(this.readyState=3,Zn(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;To(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function To(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var S=h.value?h.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!h.done}))&&(this.response=this.responseText+=S)}h.done?Rs(this):Zn(this),this.readyState==3&&To(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,Rs(this))},n.Na=function(h){this.g&&(this.response=h,Rs(this))},n.ga=function(){this.g&&Rs(this)};function Rs(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Zn(h)}n.setRequestHeader=function(h,S){this.A.append(h,S)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],S=this.h.entries();for(var I=S.next();!I.done;)I=I.value,h.push(I[0]+": "+I[1]),I=S.next();return h.join(`\r
`)};function Zn(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(wr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Un(h){let S="";return ue(h,function(I,w){S+=w,S+=":",S+=I,S+=`\r
`}),S}function Rr(h,S,I){e:{for(w in I){var w=!1;break e}w=!0}w||(I=Un(I),typeof h=="string"?I!=null&&Gi(I):Ze(h,S,I))}function nt(h){bt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(nt,bt);var Ii=/^https?$/i,Qa=["POST","PUT"];n=nt.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,S,I,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);S=S?S.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():qa.g(),this.g.onreadystatechange=A(m(this.Ca,this));try{this.B=!0,this.g.open(S,String(h),!0),this.B=!1}catch($){Nr(this,$);return}if(h=I||"",I=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var G in w)I.set(G,w[G]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const $ of w.keys())I.set($,w.get($));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(I.keys()).find($=>$.toLowerCase()=="content-type"),G=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Qa,S,void 0)>=0)||w||G||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ce]of I)this.g.setRequestHeader($,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch($){Nr(this,$)}};function Nr(h,S){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=S,h.o=5,Xa(h),Yi(h)}function Xa(h){h.A||(h.A=!0,Bt(h,"complete"),Bt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Bt(this,"complete"),Bt(this,"abort"),Yi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yi(this,!0)),nt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Mr(this):this.Xa())},n.Xa=function(){Mr(this)};function Mr(h){if(h.h&&typeof l<"u"){if(h.v&&ei(h)==4)setTimeout(h.Ca.bind(h),0);else if(Bt(h,"readystatechange"),ei(h)==4){h.h=!1;try{const $=h.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var I;if(!(I=S)){var w;if(w=$===0){let ce=String(h.D).match(Nu)[1]||null;!ce&&c.self&&c.self.location&&(ce=c.self.location.protocol.slice(0,-1)),w=!Ii.test(ce?ce.toLowerCase():"")}I=w}if(I)Bt(h,"complete"),Bt(h,"success");else{h.o=6;try{var G=ei(h)>2?h.g.statusText:""}catch{G=""}h.l=G+" ["+h.ca()+"]",Xa(h)}}finally{Yi(h)}}}}function Yi(h,S){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const I=h.g;h.g=null,S||Bt(h,"ready");try{I.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ei(h){return h.g?h.g.readyState:0}n.ca=function(){try{return ei(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var S=this.g.responseText;return h&&S.indexOf(h)==0&&(S=S.substring(h.length)),uf(S)}};function Wt(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ji(h){const S={};h=(h.g&&ei(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(P(h[w]))continue;var I=xu(h[w]);const G=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const $=S[G]||[];S[G]=$,$.push(I)}fe(S,function(w){return w.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function bi(h,S,I){return I&&I.internalChannelParams&&I.internalChannelParams[h]||S}function Ns(h){this.za=0,this.i=[],this.j=new $n,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=bi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=bi("baseRetryDelayMs",5e3,h),this.Za=bi("retryDelaySeedMs",1e4,h),this.Ta=bi("forwardChannelMaxRetries",2,h),this.va=bi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Ba(h&&h.concurrentRequestLimit),this.Ba=new ws,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ns.prototype,n.ka=8,n.I=1,n.connect=function(h,S,I,w){xt(0),this.W=h,this.H=S||{},I&&w!==void 0&&(this.H.OSID=I,this.H.OAID=w),this.F=this.X,this.J=Fu(this,null,this.W),xi(this)};function Wa(h){if(Eo(h),h.I==3){var S=h.V++,I=Nt(h.J);if(Ze(I,"SID",h.M),Ze(I,"RID",S),Ze(I,"TYPE","terminate"),Dr(h,I),S=new Qn(h,h.j,S),S.M=2,S.A=br(Nt(I)),I=!1,c.navigator&&c.navigator.sendBeacon)try{I=c.navigator.sendBeacon(S.A.toString(),"")}catch{}!I&&c.Image&&(new Image().src=S.A,I=!0),I||(S.g=zu(S.j,null),S.g.ea(S.A)),S.F=Date.now(),_i(S)}Bu(h)}function Ms(h){h.g&&(el(h),h.g.cancel(),h.g=null)}function Eo(h){Ms(h),h.v&&(c.clearTimeout(h.v),h.v=null),Ao(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function xi(h){if(!Fa(h.h)&&!h.m){h.m=!0;var S=h.Ea;ne||M(),ae||(ne(),ae=!0),N.add(S,h),h.D=0}}function So(h,S){return Ei(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=S.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=pi(m(h.Ea,h,S),qu(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const G=new Qn(this,this.j,h);let $=this.o;if(this.U&&($?($=D($),oe($,this.U)):$=this.U),this.u!==null||this.R||(G.J=$,$=null),this.S)e:{for(var S=0,I=0;I<this.i.length;I++){t:{var w=this.i[I];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(S+=w,S>4096){S=I;break e}if(S===4096||I===this.i.length-1){S=I+1;break e}}S=1e3}else S=1e3;S=ku(this,G,S),I=Nt(this.J),Ze(I,"RID",h),Ze(I,"CVER",22),this.G&&Ze(I,"X-HTTP-Session-Id",this.G),Dr(this,I),$&&(this.R?S="headers="+Gi(Un($))+"&"+S:this.u&&Rr(I,this.u,$)),za(this.h,G),this.Ra&&Ze(I,"TYPE","init"),this.S?(Ze(I,"$req",S),Ze(I,"SID","null"),G.U=!0,yi(G,I,null)):yi(G,I,S),this.I=2}}else this.I==3&&(h?Za(this,h):this.i.length==0||Fa(this.h)||Za(this))};function Za(h,S){var I;S?I=S.l:I=h.V++;const w=Nt(h.J);Ze(w,"SID",h.M),Ze(w,"RID",I),Ze(w,"AID",h.K),Dr(h,w),h.u&&h.o&&Rr(w,h.u,h.o),I=new Qn(h,h.j,I,h.D+1),h.u===null&&(I.J=h.o),S&&(h.i=S.G.concat(h.i)),S=ku(h,I,1e3),I.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),za(h.h,I),yi(I,w,S)}function Dr(h,S){h.H&&ue(h.H,function(I,w){Ze(S,w,I)}),h.l&&ue({},function(I,w){Ze(S,w,I)})}function ku(h,S,I){I=Math.min(h.i.length,I);const w=h.l?m(h.l.Ka,h.l,h):null;e:{var G=h.i;let De=-1;for(;;){const St=["count="+I];De==-1?I>0?(De=G[0].g,St.push("ofs="+De)):De=0:St.push("ofs="+De);let Qe=!0;for(let ht=0;ht<I;ht++){var $=G[ht].g;const Ln=G[ht].map;if($-=De,$<0)De=Math.max(0,G[ht].g-100),Qe=!1;else try{$="req"+$+"_"||"";try{var ce=Ln instanceof Map?Ln:Object.entries(Ln);for(const[Ri,ti]of ce){let ni=ti;d(ti)&&(ni=As(ti)),St.push($+Ri+"="+encodeURIComponent(ni))}}catch(Ri){throw St.push($+"type="+encodeURIComponent("_badmap")),Ri}}catch{w&&w(Ln)}}if(Qe){ce=St.join("&");break e}}ce=void 0}return h=h.i.splice(0,I),S.G=h,ce}function Uu(h){if(!h.g&&!h.v){h.Y=1;var S=h.Da;ne||M(),ae||(ne(),ae=!0),N.add(S,h),h.A=0}}function Pr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=pi(m(h.Da,h),qu(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,Lu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=pi(m(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),Ms(this),Lu(this))};function el(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Lu(h){h.g=new Qn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var S=Nt(h.na);Ze(S,"RID","rpc"),Ze(S,"SID",h.M),Ze(S,"AID",h.K),Ze(S,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ze(S,"TO",h.ia),Ze(S,"TYPE","xmlhttp"),Dr(h,S),h.u&&h.o&&Rr(S,h.u,h.o),h.O&&(h.g.H=h.O);var I=h.g;h=h.ba,I.M=1,I.A=br(Nt(S)),I.u=null,I.R=!0,mo(I,h)}n.Va=function(){this.C!=null&&(this.C=null,Ms(this),Pr(this),xt(19))};function Ao(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Ou(h,S){var I=null;if(h.g==S){Ao(h),el(h),h.g=null;var w=2}else if(Si(h.h,S))I=S.G,Ha(h.h,S),w=1;else return;if(h.I!=0){if(S.o)if(w==1){I=S.u?S.u.length:0,S=Date.now()-S.F;var G=h.D;w=ho(),Bt(w,new mi(w,I)),xi(h)}else Uu(h);else if(G=S.m,G==3||G==0&&S.X>0||!(w==1&&So(h,S)||w==2&&Pr(h)))switch(I&&I.length>0&&(S=h.h,S.i=S.i.concat(I)),G){case 1:wi(h,5);break;case 4:wi(h,10);break;case 3:wi(h,6);break;default:wi(h,2)}}}function qu(h,S){let I=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(I*=2),I*S}function wi(h,S){if(h.j.info("Error code "+S),S==2){var I=m(h.bb,h),w=h.Ua;const G=!w;w=new Cn(w||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Yt(w,"https"),br(w),G?Wn(w.toString(),I):$a(w.toString(),I)}else xt(2);h.I=0,h.l&&h.l.pa(S),Bu(h),Eo(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function Bu(h){if(h.I=0,h.ja=[],h.l){const S=Ga(h.h);(S.length!=0||h.i.length!=0)&&(L(h.ja,S),L(h.ja,h.i),h.h.i.length=0,x(h.i),h.i.length=0),h.l.oa()}}function Fu(h,S,I){var w=I instanceof Cn?Nt(I):new Cn(I);if(w.g!="")S&&(w.g=S+"."+w.g),Cs(w,w.u);else{var G=c.location;w=G.protocol,S=S?S+"."+G.hostname:G.hostname,G=+G.port;const $=new Cn(null);w&&Yt($,w),S&&($.g=S),G&&Cs($,G),I&&($.h=I),w=$}return I=h.G,S=h.wa,I&&S&&Ze(w,I,S),Ze(w,"VER",h.ka),Dr(h,w),w}function zu(h,S,I){if(S&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=h.Aa&&!h.ma?new nt(new Ci({ab:I})):new nt(h.ma),S.Fa(h.L),S}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hu(){}n=Hu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ds(){}Ds.prototype.g=function(h,S){return new fn(h,S)};function fn(h,S){bt.call(this),this.g=new Ns(S),this.l=h,this.h=S&&S.messageUrlParams||null,h=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(h?h["X-WebChannel-Content-Type"]=S.messageContentType:h={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(h?h["X-WebChannel-Client-Profile"]=S.sa:h={"X-WebChannel-Client-Profile":S.sa}),this.g.U=h,(h=S&&S.Qb)&&!P(h)&&(this.g.u=h),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!P(S)&&(this.g.G=S,h=this.h,h!==null&&S in h&&(h=this.h,S in h&&delete h[S])),this.j=new ji(this)}E(fn,bt),fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Wa(this.g)},fn.prototype.o=function(h){var S=this.g;if(typeof h=="string"){var I={};I.__data__=h,h=I}else this.v&&(I={},I.__data__=As(h),h=I);S.i.push(new Rt(S.Ya++,h)),S.I==3&&xi(S)},fn.prototype.N=function(){this.g.l=null,delete this.j,Wa(this.g),delete this.g,fn.Z.N.call(this)};function Gu(h){Xt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var S=h.__sm__;if(S){e:{for(const I in S){h=I;break e}h=void 0}(this.i=h)&&(h=this.i,S=S!==null&&h in S?S[h]:void 0),this.data=S}else this.data=h}E(Gu,Xt);function Yu(){Pn.call(this),this.status=1}E(Yu,Pn);function ji(h){this.g=h}E(ji,Hu),ji.prototype.ra=function(){Bt(this.g,"a")},ji.prototype.qa=function(h){Bt(this.g,new Gu(h))},ji.prototype.pa=function(h){Bt(this.g,new Yu)},ji.prototype.oa=function(){Bt(this.g,"b")},Ds.prototype.createWebChannel=Ds.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,xS=function(){return new Ds},bS=function(){return ho()},IS=Et,jm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Cr.NO_ERROR=0,Cr.TIMEOUT=8,Cr.HTTP_ERROR=6,sd=Cr,Oa.COMPLETE="complete",CS=Oa,Au.EventType=Kn,Kn.OPEN="a",Kn.CLOSE="b",Kn.ERROR="c",Kn.MESSAGE="d",bt.prototype.listen=bt.prototype.J,zl=Au,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,AS=nt}).apply(typeof $c<"u"?$c:typeof self<"u"?self:typeof window<"u"?window:{});const pE="@firebase/firestore",gE="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wa="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=new Tp("@firebase/firestore");function ea(){return io.logLevel}function me(n,...e){if(io.logLevel<=Fe.DEBUG){const t=e.map(Ap);io.debug(`Firestore (${wa}): ${n}`,...t)}}function ps(n,...e){if(io.logLevel<=Fe.ERROR){const t=e.map(Ap);io.error(`Firestore (${wa}): ${n}`,...t)}}function so(n,...e){if(io.logLevel<=Fe.WARN){const t=e.map(Ap);io.warn(`Firestore (${wa}): ${n}`,...t)}}function Ap(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,wS(n,s,t)}function wS(n,e,t){let s=`FIRESTORE (${wa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw ps(s),new Error(s)}function We(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||wS(e,o,s)}function Me(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends Es{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(an.UNAUTHENTICATED)))}shutdown(){}}class ZD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class e2{constructor(e){this.t=e,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new fs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new fs,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new fs)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(We(typeof s.accessToken=="string",31837,{l:s}),new RS(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new an(e)}}class t2{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=an.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class n2{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new t2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(an.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class yE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class i2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ki(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){We(this.o===void 0,3512);const s=l=>{l.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,me("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new yE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(We(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new yE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=s2(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function ze(n,e){return n<e?-1:n>e?1:0}function Km(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const o=n.charAt(s),l=e.charAt(s);if(o!==l)return Tm(o)===Tm(l)?ze(o,l):Tm(o)?1:-1}return ze(n.length,e.length)}const r2=55296,o2=57343;function Tm(n){const e=n.charCodeAt(0);return e>=r2&&e<=o2}function ga(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="__name__";class Vi{constructor(e,t,s){t===void 0?t=0:t>e.length&&be(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&be(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Vi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=Vi.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return ze(e.length,t.length)}static compareSegments(e,t){const s=Vi.isNumericId(e),o=Vi.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Vi.extractNumericId(e).compare(Vi.extractNumericId(t)):Km(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fr.fromString(e.substring(4,e.length-2))}}class ft extends Vi{construct(e,t,s){return new ft(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new _e(le.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new ft(t)}static emptyPath(){return new ft([])}}const a2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kt extends Vi{construct(e,t,s){return new Kt(e,t,s)}static isValidIdentifier(e){return a2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_E}static keyField(){return new Kt([_E])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new _e(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new _e(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new _e(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(s+=d,o++):(l(),o++)}if(l(),c)throw new _e(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kt(t)}static emptyPath(){return new Kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(ft.fromString(e))}static fromName(e){return new Ce(ft.fromString(e).popFirst(5))}static empty(){return new Ce(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new ft(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(n,e,t){if(!t)throw new _e(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function DS(n,e,t,s){if(e===!0&&s===!0)throw new _e(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function vE(n){if(!Ce.isDocumentKey(n))throw new _e(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function TE(n){if(Ce.isDocumentKey(n))throw new _e(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function PS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Cp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":be(12329,{type:typeof n})}function gs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Cp(n);throw new _e(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(n,e){const t={typeString:n};return e&&(t.value=e),t}function du(n,e){if(!PS(n))throw new _e(le.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(o&&typeof c!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new _e(le.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=-62135596800,SE=1e6;class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*SE);return new lt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<EE)throw new _e(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/SE}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(du(e,lt._jsonSchema))return new lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-EE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:Ut("string",lt._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new lt(0,0))}static max(){return new we(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu=-1;function l2(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=we.fromTimestamp(s===1e9?new lt(t+1,0):new lt(t,s));return new mr(o,Ce.empty(),e)}function u2(n){return new mr(n.readTime,n.key,eu)}class mr{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new mr(we.min(),Ce.empty(),eu)}static max(){return new mr(we.max(),Ce.empty(),eu)}}function c2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ce.comparator(n.documentKey,e.documentKey),t!==0?t:ze(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class f2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ra(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==d2)throw n;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):re.reject(t)}static resolve(e){return new re(((t,s)=>{t(e)}))}static reject(e){return new re(((t,s)=>{s(e)}))}static waitFor(e){return new re(((t,s)=>{let o=0,l=0,c=!1;e.forEach((d=>{++o,d.next((()=>{++l,c&&l===o&&t()}),(p=>s(p)))})),c=!0,l===o&&t()}))}static or(e){let t=re.resolve(!1);for(const s of e)t=t.next((o=>o?re.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new re(((s,o)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const m=p;t(e[m]).next((v=>{c[m]=v,++d,d===l&&s(c)}),(v=>o(v)))}}))}static doWhile(e,t){return new re(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function h2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Na(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Gd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip=-1;function Yd(n){return n==null}function Td(n){return n===0&&1/n==-1/0}function m2(n){return typeof n=="number"&&Number.isInteger(n)&&!Td(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS="";function p2(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=AE(e)),e=g2(n.get(t),e);return AE(e)}function g2(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case VS:t+="";break;default:t+=l}}return t}function AE(n){return n+VS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function lo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function kS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,t){this.comparator=e,this.root=t||sn.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qc(this.root,e,this.comparator,!0)}}class Qc{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sn{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??sn.RED,this.left=o??sn.EMPTY,this.right=l??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new sn(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return sn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw be(27949);return e+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw be(57766)}get value(){throw be(16141)}get color(){throw be(16727)}get left(){throw be(29726)}get right(){throw be(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new IE(this.data.getIterator())}getIteratorFrom(e){return new IE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Ht)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ht(this.comparator);return t.data=e,t}}class IE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new oi([])}unionWith(e){let t=new Ht(Kt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new oi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ga(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new US("Invalid base64 string: "+l):l}})(e);return new $t(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new $t(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$t.EMPTY_BYTE_STRING=new $t("");const y2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pr(n){if(We(!!n,39018),typeof n=="string"){let e=0;const t=y2.exec(n);if(We(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:It(n.seconds),nanos:It(n.nanos)}}function It(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function gr(n){return typeof n=="string"?$t.fromBase64String(n):$t.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="server_timestamp",OS="__type__",qS="__previous_value__",BS="__local_write_time__";function bp(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[OS])==null?void 0:s.stringValue)===LS}function Jd(n){const e=n.mapValue.fields[qS];return bp(e)?Jd(e):e}function tu(n){const e=pr(n.mapValue.fields[BS].timestampValue);return new lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,t,s,o,l,c,d,p,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=v}}const Ed="(default)";class ya{constructor(e,t){this.projectId=e,this.database=t||Ed}static empty(){return new ya("","")}get isDefaultDatabase(){return this.database===Ed}isEqual(e){return e instanceof ya&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="__type__",v2="__max__",Xc={mapValue:{}},zS="__vector__",Sd="value";function yr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?bp(n)?4:E2(n)?9007199254740991:T2(n)?10:11:be(28295,{value:n})}function Fi(n,e){if(n===e)return!0;const t=yr(n);if(t!==yr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return tu(n).isEqual(tu(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=pr(o.timestampValue),d=pr(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return gr(o.bytesValue).isEqual(gr(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return It(o.geoPointValue.latitude)===It(l.geoPointValue.latitude)&&It(o.geoPointValue.longitude)===It(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return It(o.integerValue)===It(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=It(o.doubleValue),d=It(l.doubleValue);return c===d?Td(c)===Td(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return ga(n.arrayValue.values||[],e.arrayValue.values||[],Fi);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},d=l.mapValue.fields||{};if(CE(c)!==CE(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Fi(c[p],d[p])))return!1;return!0})(n,e);default:return be(52216,{left:n})}}function nu(n,e){return(n.values||[]).find((t=>Fi(t,e)))!==void 0}function _a(n,e){if(n===e)return 0;const t=yr(n),s=yr(e);if(t!==s)return ze(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=It(l.integerValue||l.doubleValue),p=It(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return bE(n.timestampValue,e.timestampValue);case 4:return bE(tu(n),tu(e));case 5:return Km(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=gr(l),p=gr(c);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let m=0;m<d.length&&m<p.length;m++){const v=ze(d[m],p[m]);if(v!==0)return v}return ze(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=ze(It(l.latitude),It(c.latitude));return d!==0?d:ze(It(l.longitude),It(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return xE(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var A,x,L,B;const d=l.fields||{},p=c.fields||{},m=(A=d[Sd])==null?void 0:A.arrayValue,v=(x=p[Sd])==null?void 0:x.arrayValue,E=ze(((L=m==null?void 0:m.values)==null?void 0:L.length)||0,((B=v==null?void 0:v.values)==null?void 0:B.length)||0);return E!==0?E:xE(m,v)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Xc.mapValue&&c===Xc.mapValue)return 0;if(l===Xc.mapValue)return 1;if(c===Xc.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),m=c.fields||{},v=Object.keys(m);p.sort(),v.sort();for(let E=0;E<p.length&&E<v.length;++E){const A=Km(p[E],v[E]);if(A!==0)return A;const x=_a(d[p[E]],m[v[E]]);if(x!==0)return x}return ze(p.length,v.length)})(n.mapValue,e.mapValue);default:throw be(23264,{he:t})}}function bE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ze(n,e);const t=pr(n),s=pr(e),o=ze(t.seconds,s.seconds);return o!==0?o:ze(t.nanos,s.nanos)}function xE(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=_a(t[o],s[o]);if(l)return l}return ze(t.length,s.length)}function va(n){return $m(n)}function $m(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=pr(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return gr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ce.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=$m(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of s)l?l=!1:o+=",",o+=`${c}:${$m(t.fields[c])}`;return o+"}"})(n.mapValue):be(61005,{value:n})}function rd(n){switch(yr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jd(n);return e?16+rd(e):16;case 5:return 2*n.stringValue.length;case 6:return gr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+rd(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let o=0;return lo(s.fields,((l,c)=>{o+=l.length+rd(c)})),o})(n.mapValue);default:throw be(13486,{value:n})}}function Qm(n){return!!n&&"integerValue"in n}function xp(n){return!!n&&"arrayValue"in n}function wE(n){return!!n&&"nullValue"in n}function RE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function od(n){return!!n&&"mapValue"in n}function T2(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[FS])==null?void 0:s.stringValue)===zS}function jl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return lo(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=jl(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=jl(n.arrayValue.values[t]);return e}return{...n}}function E2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===v2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.value=e}static empty(){return new Jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!od(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jl(t)}setAll(e){let t=Kt.emptyPath(),s={},o=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,s,o),s={},o=[],t=d.popLast()}c?s[d.lastSegment()]=jl(c):o.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());od(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];od(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){lo(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new Jn(jl(this.value))}}function HS(n){const e=[];return lo(n.fields,((t,s)=>{const o=new Kt([t]);if(od(s)){const l=HS(s.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new oi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,t,s,o,l,c,d){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new ln(e,0,we.min(),we.min(),we.min(),Jn.empty(),0)}static newFoundDocument(e,t,s,o){return new ln(e,1,t,we.min(),s,o,0)}static newNoDocument(e,t){return new ln(e,2,t,we.min(),we.min(),Jn.empty(),0)}static newUnknownDocument(e,t){return new ln(e,3,t,we.min(),we.min(),Jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,t){this.position=e,this.inclusive=t}}function NE(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?s=Ce.comparator(Ce.fromName(c.referenceValue),t.key):s=_a(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function ME(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Fi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,t="asc"){this.field=e,this.dir=t}}function S2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{}class zt extends GS{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new C2(e,t,s):t==="array-contains"?new x2(e,s):t==="in"?new w2(e,s):t==="not-in"?new R2(e,s):t==="array-contains-any"?new N2(e,s):new zt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new I2(e,s):new b2(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(_a(t,this.value)):t!==null&&yr(this.value)===yr(t)&&this.matchesComparison(_a(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zi extends GS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new zi(e,t)}matches(e){return YS(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function YS(n){return n.op==="and"}function JS(n){return A2(n)&&YS(n)}function A2(n){for(const e of n.filters)if(e instanceof zi)return!1;return!0}function Xm(n){if(n instanceof zt)return n.field.canonicalString()+n.op.toString()+va(n.value);if(JS(n))return n.filters.map((e=>Xm(e))).join(",");{const e=n.filters.map((t=>Xm(t))).join(",");return`${n.op}(${e})`}}function jS(n,e){return n instanceof zt?(function(s,o){return o instanceof zt&&s.op===o.op&&s.field.isEqual(o.field)&&Fi(s.value,o.value)})(n,e):n instanceof zi?(function(s,o){return o instanceof zi&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,c,d)=>l&&jS(c,o.filters[d])),!0):!1})(n,e):void be(19439)}function KS(n){return n instanceof zt?(function(t){return`${t.field.canonicalString()} ${t.op} ${va(t.value)}`})(n):n instanceof zi?(function(t){return t.op.toString()+" {"+t.getFilters().map(KS).join(" ,")+"}"})(n):"Filter"}class C2 extends zt{constructor(e,t,s){super(e,t,s),this.key=Ce.fromName(s.referenceValue)}matches(e){const t=Ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class I2 extends zt{constructor(e,t){super(e,"in",t),this.keys=$S("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class b2 extends zt{constructor(e,t){super(e,"not-in",t),this.keys=$S("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function $S(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Ce.fromName(s.referenceValue)))}class x2 extends zt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xp(t)&&nu(t.arrayValue,this.value)}}class w2 extends zt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&nu(this.value.arrayValue,t)}}class R2 extends zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(nu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!nu(this.value.arrayValue,t)}}class N2 extends zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>nu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e,t=null,s=[],o=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function DE(n,e=null,t=[],s=[],o=null,l=null,c=null){return new M2(n,e,t,s,o,l,c)}function wp(n){const e=Me(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Xm(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Yd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>va(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>va(s))).join(",")),e.Te=t}return e.Te}function Rp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!S2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!jS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ME(n.startAt,e.startAt)&&ME(n.endAt,e.endAt)}function Wm(n){return Ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,t=null,s=[],o=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function D2(n,e,t,s,o,l,c,d){return new jd(n,e,t,s,o,l,c,d)}function Np(n){return new jd(n)}function PE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function P2(n){return n.collectionGroup!==null}function Kl(n){const e=Me(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Ht(Kt.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Cd(l,s))})),t.has(Kt.keyField().canonicalString())||e.Ie.push(new Cd(Kt.keyField(),s))}return e.Ie}function Ui(n){const e=Me(n);return e.Ee||(e.Ee=V2(e,Kl(n))),e.Ee}function V2(n,e){if(n.limitType==="F")return DE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Cd(o.field,l)}));const t=n.endAt?new Ad(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Ad(n.startAt.position,n.startAt.inclusive):null;return DE(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Zm(n,e,t){return new jd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kd(n,e){return Rp(Ui(n),Ui(e))&&n.limitType===e.limitType}function QS(n){return`${wp(Ui(n))}|lt:${n.limitType}`}function ta(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>KS(o))).join(", ")}]`),Yd(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>va(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>va(o))).join(",")),`Target(${s})`})(Ui(n))}; limitType=${n.limitType})`}function $d(n,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ce.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,o){for(const l of Kl(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(s,o){return!(s.startAt&&!(function(c,d,p){const m=NE(c,d,p);return c.inclusive?m<=0:m<0})(s.startAt,Kl(s),o)||s.endAt&&!(function(c,d,p){const m=NE(c,d,p);return c.inclusive?m>=0:m>0})(s.endAt,Kl(s),o))})(n,e)}function k2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function XS(n){return(e,t)=>{let s=!1;for(const o of Kl(n)){const l=U2(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function U2(n,e,t){const s=n.field.isKeyField()?Ce.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),m=d.data.field(l);return p!==null&&m!==null?_a(p,m):be(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return be(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){lo(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return kS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=new pt(Ce.comparator);function ys(){return L2}const WS=new pt(Ce.comparator);function Hl(...n){let e=WS;for(const t of n)e=e.insert(t.key,t);return e}function ZS(n){let e=WS;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Xr(){return $l()}function eA(){return $l()}function $l(){return new uo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const O2=new pt(Ce.comparator),q2=new Ht(Ce.comparator);function He(...n){let e=q2;for(const t of n)e=e.add(t);return e}const B2=new Ht(ze);function F2(){return B2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Td(e)?"-0":e}}function tA(n){return{integerValue:""+n}}function z2(n,e){return m2(e)?tA(e):Mp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(){this._=void 0}}function H2(n,e,t){return n instanceof Id?(function(o,l){const c={fields:{[OS]:{stringValue:LS},[BS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&bp(l)&&(l=Jd(l)),l&&(c.fields[qS]=l),{mapValue:c}})(t,e):n instanceof iu?iA(n,e):n instanceof su?sA(n,e):(function(o,l){const c=nA(o,l),d=VE(c)+VE(o.Ae);return Qm(c)&&Qm(o.Ae)?tA(d):Mp(o.serializer,d)})(n,e)}function G2(n,e,t){return n instanceof iu?iA(n,e):n instanceof su?sA(n,e):t}function nA(n,e){return n instanceof bd?(function(s){return Qm(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Id extends Qd{}class iu extends Qd{constructor(e){super(),this.elements=e}}function iA(n,e){const t=rA(e);for(const s of n.elements)t.some((o=>Fi(o,s)))||t.push(s);return{arrayValue:{values:t}}}class su extends Qd{constructor(e){super(),this.elements=e}}function sA(n,e){let t=rA(e);for(const s of n.elements)t=t.filter((o=>!Fi(o,s)));return{arrayValue:{values:t}}}class bd extends Qd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function VE(n){return It(n.integerValue||n.doubleValue)}function rA(n){return xp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Y2(n,e){return n.field.isEqual(e.field)&&(function(s,o){return s instanceof iu&&o instanceof iu||s instanceof su&&o instanceof su?ga(s.elements,o.elements,Fi):s instanceof bd&&o instanceof bd?Fi(s.Ae,o.Ae):s instanceof Id&&o instanceof Id})(n.transform,e.transform)}class J2{constructor(e,t){this.version=e,this.transformResults=t}}class Li{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Li}static exists(e){return new Li(void 0,e)}static updateTime(e){return new Li(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ad(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Xd{}function oA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Dp(n.key,Li.none()):new fu(n.key,n.data,Li.none());{const t=n.data,s=Jn.empty();let o=new Ht(Kt.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),o=o.add(l)}return new co(n.key,s,new oi(o.toArray()),Li.none())}}function j2(n,e,t){n instanceof fu?(function(o,l,c){const d=o.value.clone(),p=UE(o.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof co?(function(o,l,c){if(!ad(o.precondition,l))return void l.convertToUnknownDocument(c.version);const d=UE(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(aA(o)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Ql(n,e,t,s){return n instanceof fu?(function(l,c,d,p){if(!ad(l.precondition,c))return d;const m=l.value.clone(),v=LE(l.fieldTransforms,p,c);return m.setAll(v),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,e,t,s):n instanceof co?(function(l,c,d,p){if(!ad(l.precondition,c))return d;const m=LE(l.fieldTransforms,p,c),v=c.data;return v.setAll(aA(l)),v.setAll(m),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,s):(function(l,c,d){return ad(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function K2(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),l=nA(s.transform,o||null);l!=null&&(t===null&&(t=Jn.empty()),t.set(s.field,l))}return t||null}function kE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&ga(s,o,((l,c)=>Y2(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class fu extends Xd{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class co extends Xd{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function aA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function UE(n,e,t){const s=new Map;We(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,d=e.data.field(l.field);s.set(l.field,G2(c,d,t[o]))}return s}function LE(n,e,t){const s=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);s.set(o.field,H2(l,c,e))}return s}class Dp extends Xd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $2 extends Xd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&j2(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Ql(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Ql(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=eA();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(o.key)?null:d;const p=oA(c,d);p!==null&&s.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(we.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),He())}isEqual(e){return this.batchId===e.batchId&&ga(this.mutations,e.mutations,((t,s)=>kE(t,s)))&&ga(this.baseMutations,e.baseMutations,((t,s)=>kE(t,s)))}}class Pp{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){We(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return O2})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,s[c].version);return new Pp(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,Je;function Z2(n){switch(n){case le.OK:return be(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return be(15467,{code:n})}}function lA(n){if(n===void 0)return ps("GRPC error has no .code"),le.UNKNOWN;switch(n){case kt.OK:return le.OK;case kt.CANCELLED:return le.CANCELLED;case kt.UNKNOWN:return le.UNKNOWN;case kt.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case kt.INTERNAL:return le.INTERNAL;case kt.UNAVAILABLE:return le.UNAVAILABLE;case kt.UNAUTHENTICATED:return le.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case kt.NOT_FOUND:return le.NOT_FOUND;case kt.ALREADY_EXISTS:return le.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return le.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case kt.ABORTED:return le.ABORTED;case kt.OUT_OF_RANGE:return le.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return le.UNIMPLEMENTED;case kt.DATA_LOSS:return le.DATA_LOSS;default:return be(39323,{code:n})}}(Je=kt||(kt={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=new fr([4294967295,4294967295],0);function OE(n){const e=eP().encode(n),t=new SS;return t.update(e),new Uint8Array(t.digest())}function qE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new fr([t,s],0),new fr([o,l],0)]}class Vp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Gl(`Invalid padding: ${t}`);if(s<0)throw new Gl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Gl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Gl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=fr.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(fr.fromNumber(s)));return o.compare(tP)===1&&(o=new fr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=OE(e),[s,o]=qE(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Vp(l,o,t);return s.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=OE(e),[s,o]=qE(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Gl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,hu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Wd(we.min(),o,new pt(ze),ys(),He())}}class hu{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new hu(s,t,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class uA{constructor(e,t){this.targetId=e,this.Ce=t}}class cA{constructor(e,t,s=$t.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class BE{constructor(){this.ve=0,this.Fe=FE(),this.Me=$t.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=He(),t=He(),s=He();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:be(38017,{changeType:l})}})),new hu(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=FE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class nP{constructor(e){this.Ge=e,this.ze=new Map,this.je=ys(),this.Je=Wc(),this.He=Wc(),this.Ye=new pt(ze)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:be(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(Wm(l))if(s===0){const c=new Ce(l.path);this.et(t,c,ln.newNoDocument(c,we.min()))}else We(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let c,d;try{c=gr(s).toUint8Array()}catch(p){if(p instanceof US)return so("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Vp(c,o,l)}catch(p){return so(p instanceof Gl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Wm(d.target)){const p=new Ce(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,ln.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let s=He();this.He.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const m=this.ot(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const o=new Wd(e,t,this.Ye,this.je,s);return this.je=ys(),this.Je=Wc(),this.He=Wc(),this.Ye=new pt(ze),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new BE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ht(ze),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ht(ze),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new BE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Wc(){return new pt(Ce.comparator)}function FE(){return new pt(Ce.comparator)}const iP={asc:"ASCENDING",desc:"DESCENDING"},sP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rP={and:"AND",or:"OR"};class oP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ep(n,e){return n.useProto3Json||Yd(e)?e:{value:e}}function xd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function aP(n,e){return xd(n,e.toTimestamp())}function Oi(n){return We(!!n,49232),we.fromTimestamp((function(t){const s=pr(t);return new lt(s.seconds,s.nanos)})(n))}function kp(n,e){return tp(n,e).canonicalString()}function tp(n,e){const t=(function(o){return new ft(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function fA(n){const e=ft.fromString(n);return We(yA(e),10190,{key:e.toString()}),e}function np(n,e){return kp(n.databaseId,e.path)}function Em(n,e){const t=fA(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ce(mA(t))}function hA(n,e){return kp(n.databaseId,e)}function lP(n){const e=fA(n);return e.length===4?ft.emptyPath():mA(e)}function ip(n){return new ft(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function mA(n){return We(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function zE(n,e,t){return{name:np(n,e),fields:t.value.mapValue.fields}}function uP(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:be(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(m,v){return m.useProto3Json?(We(v===void 0||typeof v=="string",58123),$t.fromBase64String(v||"")):(We(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),$t.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(m){const v=m.code===void 0?le.UNKNOWN:lA(m.code);return new _e(v,m.message||"")})(c);t=new cA(s,o,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Em(n,s.document.name),l=Oi(s.document.updateTime),c=s.document.createTime?Oi(s.document.createTime):we.min(),d=new Jn({mapValue:{fields:s.document.fields}}),p=ln.newFoundDocument(o,l,c,d),m=s.targetIds||[],v=s.removedTargetIds||[];t=new ld(m,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Em(n,s.document),l=s.readTime?Oi(s.readTime):we.min(),c=ln.newNoDocument(o,l),d=s.removedTargetIds||[];t=new ld([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Em(n,s.document),l=s.removedTargetIds||[];t=new ld([],l,o,null)}else{if(!("filter"in e))return be(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,c=new W2(o,l),d=s.targetId;t=new uA(d,c)}}return t}function cP(n,e){let t;if(e instanceof fu)t={update:zE(n,e.key,e.value)};else if(e instanceof Dp)t={delete:np(n,e.key)};else if(e instanceof co)t={update:zE(n,e.key,e.data),updateMask:vP(e.fieldMask)};else{if(!(e instanceof $2))return be(16599,{Vt:e.type});t={verify:np(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const d=c.transform;if(d instanceof Id)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof iu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof su)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof bd)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw be(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:aP(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:be(27497)})(n,e.precondition)),t}function dP(n,e){return n&&n.length>0?(We(e!==void 0,14353),n.map((t=>(function(o,l){let c=o.updateTime?Oi(o.updateTime):Oi(l);return c.isEqual(we.min())&&(c=Oi(l)),new J2(c,o.transformResults||[])})(t,e)))):[]}function fP(n,e){return{documents:[hA(n,e.path)]}}function hP(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=hA(n,o);const l=(function(m){if(m.length!==0)return gA(zi.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(m){if(m.length!==0)return m.map((v=>(function(A){return{field:na(A.field),direction:gP(A.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=ep(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:o}}function mP(n){let e=lP(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){We(s===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const A=pA(E);return A instanceof zi&&JS(A)?A.getFilters():[A]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((A=>(function(L){return new Cd(ia(L.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(A)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let A;return A=typeof E=="object"?E.value:E,Yd(A)?null:A})(t.limit));let p=null;t.startAt&&(p=(function(E){const A=!!E.before,x=E.values||[];return new Ad(x,A)})(t.startAt));let m=null;return t.endAt&&(m=(function(E){const A=!E.before,x=E.values||[];return new Ad(x,A)})(t.endAt)),D2(e,o,c,l,d,"F",p,m)}function pP(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function pA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=ia(t.unaryFilter.field);return zt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=ia(t.unaryFilter.field);return zt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ia(t.unaryFilter.field);return zt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ia(t.unaryFilter.field);return zt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return be(61313);default:return be(60726)}})(n):n.fieldFilter!==void 0?(function(t){return zt.create(ia(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return be(58110);default:return be(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return zi.create(t.compositeFilter.filters.map((s=>pA(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return be(1026)}})(t.compositeFilter.op))})(n):be(30097,{filter:n})}function gP(n){return iP[n]}function yP(n){return sP[n]}function _P(n){return rP[n]}function na(n){return{fieldPath:n.canonicalString()}}function ia(n){return Kt.fromServerFormat(n.fieldPath)}function gA(n){return n instanceof zt?(function(t){if(t.op==="=="){if(RE(t.value))return{unaryFilter:{field:na(t.field),op:"IS_NAN"}};if(wE(t.value))return{unaryFilter:{field:na(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(RE(t.value))return{unaryFilter:{field:na(t.field),op:"IS_NOT_NAN"}};if(wE(t.value))return{unaryFilter:{field:na(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:na(t.field),op:yP(t.op),value:t.value}}})(n):n instanceof zi?(function(t){const s=t.getFilters().map((o=>gA(o)));return s.length===1?s[0]:{compositeFilter:{op:_P(t.op),filters:s}}})(n):be(54877,{filter:n})}function vP(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function yA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,t,s,o,l=we.min(),c=we.min(),d=$t.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new lr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e){this.yt=e}}function EP(n){const e=mP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Zm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(){this.Cn=new AP}addToCollectionParentIndex(e,t){return this.Cn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(mr.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(mr.min())}updateCollectionGroup(e,t,s){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class AP{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Ht(ft.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Ht(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_A=41943040;class Sn{static withCacheSize(e){return new Sn(e,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sn.DEFAULT_COLLECTION_PERCENTILE=10,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sn.DEFAULT=new Sn(_A,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sn.DISABLED=new Sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ta(0)}static cr(){return new Ta(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE="LruGarbageCollector",CP=1048576;function YE([n,e],[t,s]){const o=ze(n,t);return o===0?ze(e,s):o}class IP{constructor(e){this.Ir=e,this.buffer=new Ht(YE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();YE(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class bP{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(GE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Na(t)?me(GE,"Ignoring IndexedDB error during garbage collection: ",t):await Ra(t)}await this.Vr(3e5)}))}}class xP{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return re.resolve(Gd.ce);const s=new IP(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(HE)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),HE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,c,d,p,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,d=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(m=Date.now(),ea()<=Fe.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${o} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(m-p)+`ms
Total Duration: ${m-v}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function wP(n,e){return new xP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(){this.changes=new uo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?re.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Ql(s.mutation,o,oi.empty(),lt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,He()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=He()){const o=Xr();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let c=Hl();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=Xr();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,He())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,s,o){let l=ys();const c=$l(),d=(function(){return $l()})();return t.forEach(((p,m)=>{const v=s.get(m.key);o.has(m.key)&&(v===void 0||v.mutation instanceof co)?l=l.insert(m.key,m):v!==void 0?(c.set(m.key,v.mutation.getFieldMask()),Ql(v.mutation,m,v.mutation.getFieldMask(),lt.now())):c.set(m.key,oi.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((m,v)=>c.set(m,v))),t.forEach(((m,v)=>d.set(m,new NP(v,c.get(m)??null)))),d)))}recalculateAndSaveOverlays(e,t){const s=$l();let o=new pt(((c,d)=>c-d)),l=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const m=t.get(p);if(m===null)return;let v=s.get(p)||oi.empty();v=d.applyToLocalView(m,v),s.set(p,v);const E=(o.get(d.batchId)||He()).add(p);o=o.insert(d.batchId,E)}))})).next((()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),m=p.key,v=p.value,E=eA();v.forEach((A=>{if(!l.has(A)){const x=oA(t.get(A),s.get(A));x!==null&&E.set(A,x),l=l.add(A)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,E))}return re.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(c){return Ce.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):P2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):re.resolve(Xr());let d=eu,p=l;return c.next((m=>re.forEach(m,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(v)?re.resolve():this.remoteDocumentCache.getEntry(e,v).next((A=>{p=p.insert(v,A)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,p,m,He()))).next((v=>({batchId:d,changes:ZS(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ce(t)).next((s=>{let o=Hl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let c=Hl();return this.indexManager.getCollectionParents(e,l).next((d=>re.forEach(d,(p=>{const m=(function(E,A){return new jd(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,s,o).next((v=>{v.forEach(((E,A)=>{c=c.insert(E,A)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((c=>{l.forEach(((p,m)=>{const v=m.getKey();c.get(v)===null&&(c=c.insert(v,ln.newInvalidDocument(v)))}));let d=Hl();return c.forEach(((p,m)=>{const v=l.get(p);v!==void 0&&Ql(v.mutation,m,oi.empty(),lt.now()),$d(t,m)&&(d=d.insert(p,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return re.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Oi(o.createTime)}})(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:EP(o.bundledQuery),readTime:Oi(o.readTime)}})(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(){this.overlays=new pt(Ce.comparator),this.qr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Xr();return re.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),re.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),re.resolve()}getOverlaysForCollection(e,t,s){const o=Xr(),l=t.length+1,c=new Ce(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&p.largestBatchId>s&&o.set(p.getKey(),p)}return re.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new pt(((m,v)=>m-v));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>s){let v=l.get(m.largestBatchId);v===null&&(v=Xr(),l=l.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=Xr(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((m,v)=>d.set(m,v))),!(d.size()>=o)););return re.resolve(d)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new X2(t,s));let l=this.qr.get(t);l===void 0&&(l=He(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(){this.sessionToken=$t.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(){this.Qr=new Ht(jt.$r),this.Ur=new Ht(jt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new jt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new jt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Ce(new ft([])),s=new jt(t,e),o=new jt(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ce(new ft([])),s=new jt(t,e),o=new jt(t,e+1);let l=He();return this.Ur.forEachInRange([s,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new jt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class jt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ce.comparator(e.key,t.key)||ze(e.Yr,t.Yr)}static Kr(e,t){return ze(e.Yr,t.Yr)||Ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ht(jt.$r)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Q2(l,t,s,o);this.mutationQueue.push(c);for(const d of o)this.Zr=this.Zr.add(new jt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return re.resolve(c)}lookupMutationBatch(e,t){return re.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return re.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?Ip:this.tr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new jt(t,0),o=new jt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(c=>{const d=this.Xr(c.Yr);l.push(d)})),re.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ht(ze);return t.forEach((o=>{const l=new jt(o,0),c=new jt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(d=>{s=s.add(d.Yr)}))})),re.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;Ce.isDocumentKey(l)||(l=l.child(""));const c=new jt(new Ce(l),0);let d=new Ht(ze);return this.Zr.forEachWhile((p=>{const m=p.key.path;return!!s.isPrefixOf(m)&&(m.length===o&&(d=d.add(p.Yr)),!0)}),c),re.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){We(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return re.forEach(t.mutations,(o=>{const l=new jt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new jt(t,0),o=this.Zr.firstAfterOrEqual(s);return re.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e){this.ri=e,this.docs=(function(){return new pt(Ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return re.resolve(s?s.document.mutableCopy():ln.newInvalidDocument(t))}getEntries(e,t){let s=ys();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():ln.newInvalidDocument(o))})),re.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=ys();const c=t.path,d=new Ce(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:m,value:{document:v}}=p.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||c2(u2(v),s)<=0||(o.has(v.key)||$d(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return re.resolve(l)}getAllFromCollectionGroup(e,t,s,o){be(9500)}ii(e,t){return re.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new LP(this)}getSize(e){return re.resolve(this.size)}}class LP extends RP{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),re.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e){this.persistence=e,this.si=new uo((t=>wp(t)),Rp),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.oi=0,this._i=new Up,this.targetCount=0,this.ai=Ta.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),re.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ta(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Pr(t),re.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),re.waitFor(l).next((()=>o))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return re.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),re.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),re.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return re.resolve(s)}containsKey(e,t){return re.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,t){this.ui={},this.overlays={},this.ci=new Gd(0),this.li=!1,this.li=!0,this.hi=new VP,this.referenceDelegate=e(this),this.Pi=new OP(this),this.indexManager=new SP,this.remoteDocumentCache=(function(o){return new UP(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new TP(t),this.Ii=new DP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new PP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new kP(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){me("MemoryPersistence","Starting transaction:",e);const o=new qP(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return re.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class qP extends f2{constructor(e){super(),this.currentSequenceNumber=e}}class Lp{constructor(e){this.persistence=e,this.Ri=new Up,this.Vi=null}static mi(e){return new Lp(e)}get fi(){if(this.Vi)return this.Vi;throw be(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),re.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),re.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.fi,(s=>{const o=Ce.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,we.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return re.or([()=>re.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class wd{constructor(e,t){this.persistence=e,this.pi=new uo((s=>p2(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=wP(this,t)}static mi(e,t){return new wd(e,t)}Ei(){}di(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return re.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?re.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((d=>{d||(s++,l.removeEntry(c,we.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),re.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=rd(e.data.value)),t}br(e,t,s){return re.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return re.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=He(),o=He();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Op(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return PM()?8:h2(cn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new BP;return this.Ss(e,t,c).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(ea()<=Fe.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",ta(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),re.resolve()):(ea()<=Fe.DEBUG&&me("QueryEngine","Query:",ta(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(ea()<=Fe.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",ta(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ui(t))):re.resolve())}ys(e,t){if(PE(t))return re.resolve(null);let s=Ui(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Zm(t,null,"F"),s=Ui(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=He(...l);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,s).next((p=>{const m=this.Ds(t,d);return this.Cs(t,m,c,p.readTime)?this.ys(e,Zm(t,null,"F")):this.vs(e,m,t,p)}))))})))))}ws(e,t,s,o){return PE(t)||o.isEqual(we.min())?re.resolve(null):this.ps.getDocuments(e,s).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,s,o)?re.resolve(null):(ea()<=Fe.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ta(t)),this.vs(e,c,t,l2(o,eu)).next((d=>d)))}))}Ds(e,t){let s=new Ht(XS(e));return t.forEach(((o,l)=>{$d(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return ea()<=Fe.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",ta(t)),this.ps.getDocumentsMatchingQuery(e,t,mr.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp="LocalStore",zP=3e8;class HP{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new pt(ze),this.xs=new uo((l=>wp(l)),Rp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function GP(n,e,t,s){return new HP(n,e,t,s)}async function TA(n,e){const t=Me(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],d=[];let p=He();for(const m of o){c.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}for(const m of l){d.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(s,p).next((m=>({Ls:m,removedBatchIds:c,addedBatchIds:d})))}))}))}function YP(n,e){const t=Me(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,p,m,v){const E=m.batch,A=E.keys();let x=re.resolve();return A.forEach((L=>{x=x.next((()=>v.getEntry(p,L))).next((B=>{const z=m.docVersions.get(L);We(z!==null,48541),B.version.compareTo(z)<0&&(E.applyToRemoteDocument(B,m),B.isValidDocument()&&(B.setReadTime(m.commitVersion),v.addEntry(B)))}))})),x.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(d){let p=He();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(p=p.add(d.batch.mutations[m].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function EA(n){const e=Me(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function JP(n,e){const t=Me(n),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const d=[];e.targetChanges.forEach(((v,E)=>{const A=o.get(E);if(!A)return;d.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,E))));let x=A.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?x=x.withResumeToken($t.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):v.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(v.resumeToken,s)),o=o.insert(E,x),(function(B,z,ee){return B.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=zP?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0})(A,x,v)&&d.push(t.Pi.updateTargetData(l,x))}));let p=ys(),m=He();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(jP(l,c,e.documentUpdates).next((v=>{p=v.ks,m=v.qs}))),!s.isEqual(we.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));d.push(v)}return re.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,m))).next((()=>p))})).then((l=>(t.Ms=o,l)))}function jP(n,e,t){let s=He(),o=He();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=ys();return t.forEach(((d,p)=>{const m=l.get(d);p.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(we.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):me(qp,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",p.version)})),{ks:c,qs:o}}))}function KP(n,e){const t=Me(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Ip),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function $P(n,e){const t=Me(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,re.resolve(o)):t.Pi.allocateTargetId(s).next((c=>(o=new lr(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function sp(n,e,t){const s=Me(n),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Na(c))throw c;me(qp,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function JE(n,e,t){const s=Me(n);let o=we.min(),l=He();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,m,v){const E=Me(p),A=E.xs.get(v);return A!==void 0?re.resolve(E.Ms.get(A)):E.Pi.getTargetData(m,v)})(s,c,Ui(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?o:we.min(),t?l:He()))).next((d=>(QP(s,k2(e),d),{documents:d,Qs:l})))))}function QP(n,e,t){let s=n.Os.get(e)||we.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class jE{constructor(){this.activeTargetIds=F2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class XP{constructor(){this.Mo=new jE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new jE,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="ConnectivityMonitor";class $E{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(KE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(KE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zc=null;function rp(){return Zc===null?Zc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Zc++,"0x"+Zc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm="RestConnection",ZP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class eV{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Ed?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const c=rp(),d=this.zo(e,t.toUriEncodedString());me(Sm,`Sending RPC '${e}' ${c}:`,d,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,l);const{host:m}=new URL(d),v=ba(m);return this.Jo(e,d,p,s,v).then((E=>(me(Sm,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw so(Sm,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",s),E}))}Ho(e,t,s,o,l,c){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+wa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=ZP[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="WebChannelConnection";class nV extends eV{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const c=rp();return new Promise(((d,p)=>{const m=new AS;m.setWithCredentials(!0),m.listenOnce(CS.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case sd.NO_ERROR:const E=m.getResponseJson();me(on,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case sd.TIMEOUT:me(on,`RPC '${e}' ${c} timed out`),p(new _e(le.DEADLINE_EXCEEDED,"Request time out"));break;case sd.HTTP_ERROR:const A=m.getStatus();if(me(on,`RPC '${e}' ${c} failed with status:`,A,"response text:",m.getResponseText()),A>0){let x=m.getResponseJson();Array.isArray(x)&&(x=x[0]);const L=x==null?void 0:x.error;if(L&&L.status&&L.message){const B=(function(ee){const te=ee.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(te)>=0?te:le.UNKNOWN})(L.status);p(new _e(B,L.message))}else p(new _e(le.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new _e(le.UNAVAILABLE,"Connection failed."));break;default:be(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{me(on,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(o);me(on,`RPC '${e}' ${c} sending request:`,o),m.send(t,"POST",v,s,15)}))}T_(e,t,s){const o=rp(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=xS(),d=bS(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const v=l.join("");me(on,`Creating RPC '${e}' stream ${o}: ${v}`,p);const E=c.createWebChannel(v,p);this.I_(E);let A=!1,x=!1;const L=new tV({Yo:z=>{x?me(on,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(A||(me(on,`Opening RPC '${e}' stream ${o} transport.`),E.open(),A=!0),me(on,`RPC '${e}' stream ${o} sending:`,z),E.send(z))},Zo:()=>E.close()}),B=(z,ee,te)=>{z.listen(ee,(Q=>{try{te(Q)}catch(F){setTimeout((()=>{throw F}),0)}}))};return B(E,zl.EventType.OPEN,(()=>{x||(me(on,`RPC '${e}' stream ${o} transport opened.`),L.o_())})),B(E,zl.EventType.CLOSE,(()=>{x||(x=!0,me(on,`RPC '${e}' stream ${o} transport closed`),L.a_(),this.E_(E))})),B(E,zl.EventType.ERROR,(z=>{x||(x=!0,so(on,`RPC '${e}' stream ${o} transport errored. Name:`,z.name,"Message:",z.message),L.a_(new _e(le.UNAVAILABLE,"The operation could not be completed")))})),B(E,zl.EventType.MESSAGE,(z=>{var ee;if(!x){const te=z.data[0];We(!!te,16349);const Q=te,F=(Q==null?void 0:Q.error)||((ee=Q[0])==null?void 0:ee.error);if(F){me(on,`RPC '${e}' stream ${o} received error:`,F);const ne=F.status;let ae=(function(R){const V=kt[R];if(V!==void 0)return lA(V)})(ne),N=F.message;ae===void 0&&(ae=le.INTERNAL,N="Unknown error status: "+ne+" with message "+F.message),x=!0,L.a_(new _e(ae,N)),E.close()}else me(on,`RPC '${e}' stream ${o} received:`,te),L.u_(te)}})),B(d,IS.STAT_EVENT,(z=>{z.stat===jm.PROXY?me(on,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===jm.NOPROXY&&me(on,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{L.__()}),0),L}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Am(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(n){return new oP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="PersistentStream";class AA{constructor(e,t,s,o,l,c,d,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new SA(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(ps(t.toString()),ps("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new _e(le.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(QE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(me(QE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class iV extends AA{constructor(e,t,s,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=uP(this.serializer,e),s=(function(l){if(!("targetChange"in l))return we.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?we.min():c.readTime?Oi(c.readTime):we.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=ip(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=Wm(p)?{documents:fP(l,p)}:{query:hP(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=dA(l,c.resumeToken);const m=ep(l,c.expectedCount);m!==null&&(d.expectedCount=m)}else if(c.snapshotVersion.compareTo(we.min())>0){d.readTime=xd(l,c.snapshotVersion.toTimestamp());const m=ep(l,c.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const s=pP(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=ip(this.serializer),t.removeTarget=e,this.q_(t)}}class sV extends AA{constructor(e,t,s,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=dP(e.writeResults,e.commitTime),s=Oi(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=ip(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>cP(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{}class oV extends rV{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new _e(le.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,tp(t,s),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new _e(le.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,tp(t,s),o,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new _e(le.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class aV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ps(t),this.aa=!1):me("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro="RemoteStore";class lV{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{fo(this)&&(me(ro,"Restarting streams for network reachability change."),await(async function(p){const m=Me(p);m.Ea.add(4),await mu(m),m.Ra.set("Unknown"),m.Ea.delete(4),await ef(m)})(this))}))})),this.Ra=new aV(s,o)}}async function ef(n){if(fo(n))for(const e of n.da)await e(!0)}async function mu(n){for(const e of n.da)await e(!1)}function CA(n,e){const t=Me(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Hp(t)?zp(t):Ma(t).O_()&&Fp(t,e))}function Bp(n,e){const t=Me(n),s=Ma(t);t.Ia.delete(e),s.O_()&&IA(t,e),t.Ia.size===0&&(s.O_()?s.L_():fo(t)&&t.Ra.set("Unknown"))}function Fp(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ma(n).Y_(e)}function IA(n,e){n.Va.Ue(e),Ma(n).Z_(e)}function zp(n){n.Va=new nP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ma(n).start(),n.Ra.ua()}function Hp(n){return fo(n)&&!Ma(n).x_()&&n.Ia.size>0}function fo(n){return Me(n).Ea.size===0}function bA(n){n.Va=void 0}async function uV(n){n.Ra.set("Online")}async function cV(n){n.Ia.forEach(((e,t)=>{Fp(n,e)}))}async function dV(n,e){bA(n),Hp(n)?(n.Ra.ha(e),zp(n)):n.Ra.set("Unknown")}async function fV(n,e,t){if(n.Ra.set("Online"),e instanceof cA&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const d of l.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o.Ia.delete(d),o.Va.removeTarget(d))})(n,e)}catch(s){me(ro,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Rd(n,s)}else if(e instanceof ld?n.Va.Ze(e):e instanceof uA?n.Va.st(e):n.Va.tt(e),!t.isEqual(we.min()))try{const s=await EA(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach(((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ia.get(m);v&&l.Ia.set(m,v.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,m)=>{const v=l.Ia.get(p);if(!v)return;l.Ia.set(p,v.withResumeToken($t.EMPTY_BYTE_STRING,v.snapshotVersion)),IA(l,p);const E=new lr(v.target,p,m,v.sequenceNumber);Fp(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(s){me(ro,"Failed to raise snapshot:",s),await Rd(n,s)}}async function Rd(n,e,t){if(!Na(e))throw e;n.Ea.add(1),await mu(n),n.Ra.set("Offline"),t||(t=()=>EA(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{me(ro,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await ef(n)}))}function xA(n,e){return e().catch((t=>Rd(n,t,e)))}async function tf(n){const e=Me(n),t=_r(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ip;for(;hV(e);)try{const o=await KP(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,mV(e,o)}catch(o){await Rd(e,o)}wA(e)&&RA(e)}function hV(n){return fo(n)&&n.Ta.length<10}function mV(n,e){n.Ta.push(e);const t=_r(n);t.O_()&&t.X_&&t.ea(e.mutations)}function wA(n){return fo(n)&&!_r(n).x_()&&n.Ta.length>0}function RA(n){_r(n).start()}async function pV(n){_r(n).ra()}async function gV(n){const e=_r(n);for(const t of n.Ta)e.ea(t.mutations)}async function yV(n,e,t){const s=n.Ta.shift(),o=Pp.from(s,e,t);await xA(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await tf(n)}async function _V(n,e){e&&_r(n).X_&&await(async function(s,o){if((function(c){return Z2(c)&&c!==le.ABORTED})(o.code)){const l=s.Ta.shift();_r(s).B_(),await xA(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await tf(s)}})(n,e),wA(n)&&RA(n)}async function XE(n,e){const t=Me(n);t.asyncQueue.verifyOperationInProgress(),me(ro,"RemoteStore received new credentials");const s=fo(t);t.Ea.add(3),await mu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ef(t)}async function vV(n,e){const t=Me(n);e?(t.Ea.delete(2),await ef(t)):e||(t.Ea.add(2),await mu(t),t.Ra.set("Unknown"))}function Ma(n){return n.ma||(n.ma=(function(t,s,o){const l=Me(t);return l.sa(),new iV(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:uV.bind(null,n),t_:cV.bind(null,n),r_:dV.bind(null,n),H_:fV.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Hp(n)?zp(n):n.Ra.set("Unknown")):(await n.ma.stop(),bA(n))}))),n.ma}function _r(n){return n.fa||(n.fa=(function(t,s,o){const l=Me(t);return l.sa(),new sV(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:pV.bind(null,n),r_:_V.bind(null,n),ta:gV.bind(null,n),na:yV.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await tf(n)):(await n.fa.stop(),n.Ta.length>0&&(me(ro,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new fs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const c=Date.now()+s,d=new Gp(e,t,c,o,l);return d.start(s),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yp(n,e){if(ps("AsyncQueue",`${e}: ${n}`),Na(n))return new _e(le.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{static emptySet(e){return new da(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ce.comparator(t.key,s.key):(t,s)=>Ce.comparator(t.key,s.key),this.keyedMap=Hl(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof da)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new da;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(){this.ga=new pt(Ce.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):be(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Ea{constructor(e,t,s,o,l,c,d,p,m){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,s,o,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Ea(e,t,da.emptySet(t),c,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class EV{constructor(){this.queries=ZE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Me(t),l=o.queries;o.queries=ZE(),l.forEach(((c,d)=>{for(const p of d.Sa)p.onError(s)}))})(this,new _e(le.ABORTED,"Firestore shutting down"))}}function ZE(){return new uo((n=>QS(n)),Kd)}async function NA(n,e){const t=Me(n);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new TV,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const d=Yp(c,`Initialization of query '${ta(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Jp(t)}async function MA(n,e){const t=Me(n),s=e.query;let o=3;const l=t.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function SV(n,e){const t=Me(n);let s=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(o)&&(s=!0);c.wa=o}}s&&Jp(t)}function AV(n,e,t){const s=Me(n),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function Jp(n){n.Ca.forEach((e=>{e.next()}))}var op,e0;(e0=op||(op={})).Ma="default",e0.Cache="cache";class DA{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Ea(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ea.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==op.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e){this.key=e}}class VA{constructor(e){this.key=e}}class CV{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=He(),this.mutatedKeys=He(),this.eu=XS(e),this.tu=new da(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new WE,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const A=o.get(v),x=$d(this.query,E)?E:null,L=!!A&&this.mutatedKeys.has(A.key),B=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let z=!1;A&&x?A.data.isEqual(x.data)?L!==B&&(s.track({type:3,doc:x}),z=!0):this.su(A,x)||(s.track({type:2,doc:x}),z=!0,(p&&this.eu(x,p)>0||m&&this.eu(x,m)<0)&&(d=!0)):!A&&x?(s.track({type:0,doc:x}),z=!0):A&&!x&&(s.track({type:1,doc:A}),z=!0,(p||m)&&(d=!0)),z&&(x?(c=c.add(x),l=B?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{tu:c,iu:s,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,E)=>(function(x,L){const B=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be(20277,{Rt:z})}};return B(x)-B(L)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(s),o=o??!1;const d=t&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,m=p!==this.Za;return this.Za=p,c.length!==0||m?{snapshot:new Ea(this.query,e.tu,l,c,e.mutatedKeys,p===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new WE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=He(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new VA(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new PA(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=He();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ea.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const jp="SyncEngine";class IV{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class bV{constructor(e){this.key=e,this.hu=!1}}class xV{constructor(e,t,s,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new uo((d=>QS(d)),Kd),this.Iu=new Map,this.Eu=new Set,this.du=new pt(Ce.comparator),this.Au=new Map,this.Ru=new Up,this.Vu={},this.mu=new Map,this.fu=Ta.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function wV(n,e,t=!0){const s=BA(n);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await kA(s,e,t,!0),o}async function RV(n,e){const t=BA(n);await kA(t,e,!0,!1)}async function kA(n,e,t,s){const o=await $P(n.localStore,Ui(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return s&&(d=await NV(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&CA(n.remoteStore,o),d}async function NV(n,e,t,s,o){n.pu=(E,A,x)=>(async function(B,z,ee,te){let Q=z.view.ru(ee);Q.Cs&&(Q=await JE(B.localStore,z.query,!1).then((({documents:N})=>z.view.ru(N,Q))));const F=te&&te.targetChanges.get(z.targetId),ne=te&&te.targetMismatches.get(z.targetId)!=null,ae=z.view.applyChanges(Q,B.isPrimaryClient,F,ne);return n0(B,z.targetId,ae.au),ae.snapshot})(n,E,A,x);const l=await JE(n.localStore,e,!0),c=new CV(e,l.Qs),d=c.ru(l.documents),p=hu.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),m=c.applyChanges(d,n.isPrimaryClient,p);n0(n,t,m.au);const v=new IV(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function MV(n,e,t){const s=Me(n),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((c=>!Kd(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await sp(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Bp(s.remoteStore,o.targetId),ap(s,o.targetId)})).catch(Ra)):(ap(s,o.targetId),await sp(s.localStore,o.targetId,!0))}async function DV(n,e){const t=Me(n),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Bp(t.remoteStore,s.targetId))}async function PV(n,e,t){const s=BV(n);try{const o=await(function(c,d){const p=Me(c),m=lt.now(),v=d.reduce(((x,L)=>x.add(L.key)),He());let E,A;return p.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let L=ys(),B=He();return p.Ns.getEntries(x,v).next((z=>{L=z,L.forEach(((ee,te)=>{te.isValidDocument()||(B=B.add(ee))}))})).next((()=>p.localDocuments.getOverlayedDocuments(x,L))).next((z=>{E=z;const ee=[];for(const te of d){const Q=K2(te,E.get(te.key).overlayedDocument);Q!=null&&ee.push(new co(te.key,Q,HS(Q.value.mapValue),Li.exists(!0)))}return p.mutationQueue.addMutationBatch(x,m,ee,d)})).next((z=>{A=z;const ee=z.applyToLocalDocumentSet(E,B);return p.documentOverlayCache.saveOverlays(x,z.batchId,ee)}))})).then((()=>({batchId:A.batchId,changes:ZS(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(c,d,p){let m=c.Vu[c.currentUser.toKey()];m||(m=new pt(ze)),m=m.insert(d,p),c.Vu[c.currentUser.toKey()]=m})(s,o.batchId,t),await pu(s,o.changes),await tf(s.remoteStore)}catch(o){const l=Yp(o,"Failed to persist write");t.reject(l)}}async function UA(n,e){const t=Me(n);try{const s=await JP(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Au.get(l);c&&(We(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?We(c.hu,14607):o.removedDocuments.size>0&&(We(c.hu,42227),c.hu=!1))})),await pu(t,s,e)}catch(s){await Ra(s)}}function t0(n,e,t){const s=Me(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(c,d){const p=Me(c);p.onlineState=d;let m=!1;p.queries.forEach(((v,E)=>{for(const A of E.Sa)A.va(d)&&(m=!0)})),m&&Jp(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function VV(n,e,t){const s=Me(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let c=new pt(Ce.comparator);c=c.insert(l,ln.newNoDocument(l,we.min()));const d=He().add(l),p=new Wd(we.min(),new Map,new pt(ze),c,d);await UA(s,p),s.du=s.du.remove(l),s.Au.delete(e),Kp(s)}else await sp(s.localStore,e,!1).then((()=>ap(s,e,t))).catch(Ra)}async function kV(n,e){const t=Me(n),s=e.batch.batchId;try{const o=await YP(t.localStore,e);OA(t,s,null),LA(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await pu(t,o)}catch(o){await Ra(o)}}async function UV(n,e,t){const s=Me(n);try{const o=await(function(c,d){const p=Me(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return p.mutationQueue.lookupMutationBatch(m,d).next((E=>(We(E!==null,37113),v=E.keys(),p.mutationQueue.removeMutationBatch(m,E)))).next((()=>p.mutationQueue.performConsistencyCheck(m))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(m,v,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>p.localDocuments.getDocuments(m,v)))}))})(s.localStore,e);OA(s,e,t),LA(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await pu(s,o)}catch(o){await Ra(o)}}function LA(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function OA(n,e,t){const s=Me(n);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function ap(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||qA(n,s)}))}function qA(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Bp(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Kp(n))}function n0(n,e,t){for(const s of t)s instanceof PA?(n.Ru.addReference(s.key,e),LV(n,s)):s instanceof VA?(me(jp,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||qA(n,s.key)):be(19791,{wu:s})}function LV(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(me(jp,"New document in limbo: "+t),n.Eu.add(s),Kp(n))}function Kp(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ce(ft.fromString(e)),s=n.fu.next();n.Au.set(s,new bV(t)),n.du=n.du.insert(t,s),CA(n.remoteStore,new lr(Ui(Np(t.path)),s,"TargetPurposeLimboResolution",Gd.ce))}}async function pu(n,e,t){const s=Me(n),o=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((d,p)=>{c.push(s.pu(p,e,t).then((m=>{var v;if((m||t)&&s.isPrimaryClient){const E=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:v.current;s.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(m){o.push(m);const E=Op.As(p.targetId,m);l.push(E)}})))})),await Promise.all(c),s.Pu.H_(o),await(async function(p,m){const v=Me(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>re.forEach(m,(A=>re.forEach(A.Es,(x=>v.persistence.referenceDelegate.addReference(E,A.targetId,x))).next((()=>re.forEach(A.ds,(x=>v.persistence.referenceDelegate.removeReference(E,A.targetId,x)))))))))}catch(E){if(!Na(E))throw E;me(qp,"Failed to update sequence numbers: "+E)}for(const E of m){const A=E.targetId;if(!E.fromCache){const x=v.Ms.get(A),L=x.snapshotVersion,B=x.withLastLimboFreeSnapshotVersion(L);v.Ms=v.Ms.insert(A,B)}}})(s.localStore,l))}async function OV(n,e){const t=Me(n);if(!t.currentUser.isEqual(e)){me(jp,"User change. New user:",e.toKey());const s=await TA(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((p=>{p.reject(new _e(le.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await pu(t,s.Ls)}}function qV(n,e){const t=Me(n),s=t.Au.get(e);if(s&&s.hu)return He().add(s.key);{let o=He();const l=t.Iu.get(e);if(!l)return o;for(const c of l){const d=t.Tu.get(c);o=o.unionWith(d.view.nu)}return o}}function BA(n){const e=Me(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=UA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VV.bind(null,e),e.Pu.H_=SV.bind(null,e.eventManager),e.Pu.yu=AV.bind(null,e.eventManager),e}function BV(n){const e=Me(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UV.bind(null,e),e}class Nd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return GP(this.persistence,new FP,e.initialUser,this.serializer)}Cu(e){return new vA(Lp.mi,this.serializer)}Du(e){return new XP}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nd.provider={build:()=>new Nd};class FV extends Nd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){We(this.persistence.referenceDelegate instanceof wd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new bP(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new vA((s=>wd.mi(s,t)),this.serializer)}}class lp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>t0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=OV.bind(null,this.syncEngine),await vV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new EV})()}createDatastore(e){const t=Zd(e.databaseInfo.databaseId),s=(function(l){return new nV(l)})(e.databaseInfo);return(function(l,c,d,p){return new oV(l,c,d,p)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,c,d){return new lV(s,o,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>t0(this.syncEngine,t,0)),(function(){return $E.v()?new $E:new WP})())}createSyncEngine(e,t){return(function(o,l,c,d,p,m,v){const E=new xV(o,l,c,d,p,m);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Me(o);me(ro,"RemoteStore shutting down."),l.Ea.add(5),await mu(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}lp.provider={build:()=>new lp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ps("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr="FirestoreClient";class zV{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=an.UNAUTHENTICATED,this.clientId=Hd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{me(vr,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(me(vr,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Yp(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Cm(n,e){n.asyncQueue.verifyOperationInProgress(),me(vr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await TA(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function i0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await HV(n);me(vr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>XE(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>XE(e.remoteStore,o))),n._onlineComponents=e}async function HV(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){me(vr,"Using user provided OfflineComponentProvider");try{await Cm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===le.FAILED_PRECONDITION||o.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;so("Error using user provided cache. Falling back to memory cache: "+t),await Cm(n,new Nd)}}else me(vr,"Using default OfflineComponentProvider"),await Cm(n,new FV(void 0));return n._offlineComponents}async function zA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(me(vr,"Using user provided OnlineComponentProvider"),await i0(n,n._uninitializedComponentsProvider._online)):(me(vr,"Using default OnlineComponentProvider"),await i0(n,new lp))),n._onlineComponents}function GV(n){return zA(n).then((e=>e.syncEngine))}async function HA(n){const e=await zA(n),t=e.eventManager;return t.onListen=wV.bind(null,e.syncEngine),t.onUnlisten=MV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=RV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=DV.bind(null,e.syncEngine),t}function YV(n,e,t={}){const s=new fs;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,m){const v=new FA({next:A=>{v.Nu(),c.enqueueAndForget((()=>MA(l,E)));const x=A.docs.has(d);!x&&A.fromCache?m.reject(new _e(le.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&A.fromCache&&p&&p.source==="server"?m.reject(new _e(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(A)},error:A=>m.reject(A)}),E=new DA(Np(d.path),v,{includeMetadataChanges:!0,qa:!0});return NA(l,E)})(await HA(n),n.asyncQueue,e,t,s))),s.promise}function JV(n,e,t={}){const s=new fs;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,m){const v=new FA({next:A=>{v.Nu(),c.enqueueAndForget((()=>MA(l,E))),A.fromCache&&p.source==="server"?m.reject(new _e(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(A)},error:A=>m.reject(A)}),E=new DA(d,v,{includeMetadataChanges:!0,qa:!0});return NA(l,E)})(await HA(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="firestore.googleapis.com",r0=!0;class o0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new _e(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=YA,this.ssl=r0}else this.host=e.host,this.ssl=e.ssl??r0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_A;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CP)throw new _e(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GA(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new _e(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new _e(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new _e(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nf{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new o0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new o0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new NS;switch(s.type){case"firstParty":return new n2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new _e(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=s0.get(t);s&&(me("ComponentProvider","Removing Datastore"),s0.delete(t),s.terminate())})(this),Promise.resolve()}}function JA(n,e,t,s={}){var m;n=gs(n,nf);const o=ba(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;o&&(mS(`https://${d}`),pS("Firestore",!0)),l.host!==YA&&l.host!==d&&so("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:d,ssl:o,emulatorOptions:s};if(!to(p,c)&&(n._setSettings(p),s.mockUserToken)){let v,E;if(typeof s.mockUserToken=="string")v=s.mockUserToken,E=an.MOCK_USER;else{v=CM(s.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new _e(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new an(A)}n._authCredentials=new ZD(new RS(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new gu(this.firestore,e,this._query)}}class Lt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Lt(this.firestore,e,this._key)}toJSON(){return{type:Lt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(du(t,Lt._jsonSchema))return new Lt(e,s||null,new Ce(ft.fromString(t.referencePath)))}}Lt._jsonSchemaVersion="firestore/documentReference/1.0",Lt._jsonSchema={type:Ut("string",Lt._jsonSchemaVersion),referencePath:Ut("string")};class hs extends gu{constructor(e,t,s){super(e,t,Np(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Lt(this.firestore,null,new Ce(e))}withConverter(e){return new hs(this.firestore,e,this._path)}}function jV(n,e,...t){if(n=ci(n),MS("collection","path",e),n instanceof nf){const s=ft.fromString(e,...t);return TE(s),new hs(n,null,s)}{if(!(n instanceof Lt||n instanceof hs))throw new _e(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(ft.fromString(e,...t));return TE(s),new hs(n.firestore,null,s)}}function KV(n,e,...t){if(n=ci(n),arguments.length===1&&(e=Hd.newId()),MS("doc","path",e),n instanceof nf){const s=ft.fromString(e,...t);return vE(s),new Lt(n,null,new Ce(s))}{if(!(n instanceof Lt||n instanceof hs))throw new _e(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(ft.fromString(e,...t));return vE(s),new Lt(n.firestore,n instanceof hs?n.converter:null,new Ce(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="AsyncQueue";class l0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new SA(this,"async_queue_retry"),this._c=()=>{const s=Am();s&&me(a0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Am();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Am();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new fs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Na(e))throw e;me(a0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,ps("INTERNAL UNHANDLED ERROR: ",u0(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Gp.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&be(47125,{Pc:u0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function u0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Da extends nf{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new l0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new l0(e),this._firestoreClient=void 0,await e}}}function jA(n,e){const t=typeof n=="object"?n:vS(),s=typeof n=="string"?n:Ed,o=Sp(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=SM("firestore");l&&JA(o,...l)}return o}function sf(n){if(n._terminated)throw new _e(le.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||$V(n),n._firestoreClient}function $V(n){var s,o,l;const e=n._freezeSettings(),t=(function(d,p,m,v){return new _2(d,p,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,GA(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new zV(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dn($t.fromBase64String(e))}catch(t){throw new _e(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Dn($t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Dn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(du(e,Dn._jsonSchema))return Dn.fromBase64String(e.bytes)}}Dn._jsonSchemaVersion="firestore/bytes/1.0",Dn._jsonSchema={type:Ut("string",Dn._jsonSchemaVersion),bytes:Ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:li._jsonSchemaVersion}}static fromJSON(e){if(du(e,li._jsonSchema))return new li(e.latitude,e.longitude)}}li._jsonSchemaVersion="firestore/geoPoint/1.0",li._jsonSchema={type:Ut("string",li._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ui._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(du(e,ui._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ui(e.vectorValues);throw new _e(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ui._jsonSchemaVersion="firestore/vectorValue/1.0",ui._jsonSchema={type:Ut("string",ui._jsonSchemaVersion),vectorValues:Ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV=/^__.*__$/;class XV{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new co(e,this.data,this.fieldMask,t,this.fieldTransforms):new fu(e,this.data,t,this.fieldTransforms)}}function KA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be(40011,{Ac:n})}}class Qp{constructor(e,t,s,o,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Qp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Md(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(KA(this.Ac)&&QV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class WV{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Zd(e)}Cc(e,t,s,o=!1){return new Qp({Ac:e,methodName:t,Dc:s,path:Kt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ZV(n){const e=n._freezeSettings(),t=Zd(n._databaseId);return new WV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ek(n,e,t,s,o,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,o);WA("Data must be an object, but it was:",c,s);const d=QA(s,c);let p,m;if(l.merge)p=new oi(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const A=tk(e,E,t);if(!c.contains(A))throw new _e(le.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);ik(v,A)||v.push(A)}p=new oi(v),m=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,m=c.fieldTransforms;return new XV(new Jn(d),p,m)}function $A(n,e){if(XA(n=ci(n)))return WA("Unsupported field value:",e,n),QA(n,e);if(n instanceof $p)return(function(s,o){if(!KA(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let c=0;for(const d of s){let p=$A(d,o.wc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,o){if((s=ci(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return z2(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=lt.fromDate(s);return{timestampValue:xd(o.serializer,l)}}if(s instanceof lt){const l=new lt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:xd(o.serializer,l)}}if(s instanceof li)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Dn)return{bytesValue:dA(o.serializer,s._byteString)};if(s instanceof Lt){const l=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:kp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof ui)return(function(c,d){return{mapValue:{fields:{[FS]:{stringValue:zS},[Sd]:{arrayValue:{values:c.toArray().map((m=>{if(typeof m!="number")throw d.Sc("VectorValues must only contain numeric values.");return Mp(d.serializer,m)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Cp(s)}`)})(n,e)}function QA(n,e){const t={};return kS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lo(n,((s,o)=>{const l=$A(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function XA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof lt||n instanceof li||n instanceof Dn||n instanceof Lt||n instanceof $p||n instanceof ui)}function WA(n,e,t){if(!XA(t)||!PS(t)){const s=Cp(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function tk(n,e,t){if((e=ci(e))instanceof rf)return e._internalPath;if(typeof e=="string")return ZA(n,e);throw Md("Field path arguments must be of type string or ",n,!1,void 0,t)}const nk=new RegExp("[~\\*/\\[\\]]");function ZA(n,e,t){if(e.search(nk)>=0)throw Md(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new rf(...e.split("."))._internalPath}catch{throw Md(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Md(n,e,t,s,o){const l=s&&!s.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${s}`),c&&(p+=` in document ${o}`),p+=")"),new _e(le.INVALID_ARGUMENT,d+n+p)}function ik(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(tC("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class sk extends eC{data(){return super.data()}}function tC(n,e){return typeof e=="string"?ZA(n,e):e instanceof rf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new _e(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nC{convertValue(e,t="none"){switch(yr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw be(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return lo(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,o,l;const t=(l=(o=(s=e.fields)==null?void 0:s[Sd].arrayValue)==null?void 0:o.values)==null?void 0:l.map((c=>It(c.doubleValue)));return new ui(t)}convertGeoPoint(e){return new li(It(e.latitude),It(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Jd(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(tu(e));default:return null}}convertTimestamp(e){const t=pr(e);return new lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=ft.fromString(e);We(yA(s),9688,{name:e});const o=new ya(s.get(1),s.get(3)),l=new Ce(s.popFirst(5));return o.isEqual(t)||ps(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class ra{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hr extends eC{constructor(e,t,s,o,l,c){super(e,t,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Xl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(tC("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=hr._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}hr._jsonSchemaVersion="firestore/documentSnapshot/1.0",hr._jsonSchema={type:Ut("string",hr._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class Xl extends hr{data(e={}){return super.data(e)}}class Wr{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ra(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Xl(this._firestore,this._userDataWriter,s.key,s,new ra(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((d=>{const p=new Xl(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ra(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new Xl(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ra(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,v=-1;return d.type!==0&&(m=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:ak(d.type),doc:p,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Wr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Hd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ak(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(n){n=gs(n,Lt);const e=gs(n.firestore,Da);return YV(sf(e),n._key).then((t=>fk(e,n,t)))}Wr._jsonSchemaVersion="firestore/querySnapshot/1.0",Wr._jsonSchema={type:Ut("string",Wr._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class iC extends nC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Lt(this.firestore,null,t)}}function uk(n){n=gs(n,gu);const e=gs(n.firestore,Da),t=sf(e),s=new iC(e);return rk(n._query),JV(t,n._query).then((o=>new Wr(e,s,n,o)))}function ck(n,e,t){n=gs(n,Lt);const s=gs(n.firestore,Da),o=ok(n.converter,e,t);return Xp(s,[ek(ZV(s),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Li.none())])}function dk(n){return Xp(gs(n.firestore,Da),[new Dp(n._key,Li.none())])}function Xp(n,e){return(function(s,o){const l=new fs;return s.asyncQueue.enqueueAndForget((async()=>PV(await GV(s),o,l))),l.promise})(sf(n),e)}function fk(n,e,t){const s=t.docs.get(e._key),o=new iC(n);return new hr(n,o,e._key,s,new ra(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){wa=o})(xa),pa(new no("firestore",((s,{instanceIdentifier:o,options:l})=>{const c=s.getProvider("app").getImmediate(),d=new Da(new e2(s.getProvider("auth-internal")),new i2(c,s.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new _e(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ya(m.options.projectId,v)})(c,o),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),dr(pE,gE,e),dr(pE,gE,"esm2020")})();const ed=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:nC,Bytes:Dn,CollectionReference:hs,DocumentReference:Lt,DocumentSnapshot:hr,FieldPath:rf,FieldValue:$p,Firestore:Da,FirestoreError:_e,GeoPoint:li,Query:gu,QueryDocumentSnapshot:Xl,QuerySnapshot:Wr,SnapshotMetadata:ra,Timestamp:lt,VectorValue:ui,_AutoId:Hd,_ByteString:$t,_DatabaseId:ya,_DocumentKey:Ce,_EmptyAuthCredentialsProvider:NS,_FieldPath:Kt,_cast:gs,_logWarn:so,_validateIsNotUsedTogether:DS,collection:jV,connectFirestoreEmulator:JA,deleteDoc:dk,doc:KV,ensureFirestoreConfigured:sf,executeWrite:Xp,getDoc:lk,getDocs:uk,getFirestore:jA,setDoc:ck},Symbol.toStringTag,{value:"Module"}));function sC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hk=sC,rC=new uu("auth","Firebase",sC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd=new Tp("@firebase/auth");function mk(n,...e){Dd.logLevel<=Fe.WARN&&Dd.warn(`Auth (${xa}): ${n}`,...e)}function ud(n,...e){Dd.logLevel<=Fe.ERROR&&Dd.error(`Auth (${xa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(n,...e){throw Wp(n,...e)}function qi(n,...e){return Wp(n,...e)}function oC(n,e,t){const s={...hk(),[e]:t};return new uu("auth","Firebase",s).create(e,{appName:n.name})}function Zr(n){return oC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Wp(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return rC.create(n,...e)}function xe(n,e,...t){if(!n)throw Wp(e,...t)}function cs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ud(e),new Error(e)}function vs(n,e){n||cs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function pk(){return c0()==="http:"||c0()==="https:"}function c0(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pk()||NM()||"connection"in navigator)?navigator.onLine:!0}function yk(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,t){this.shortDelay=e,this.longDelay=t,vs(t>e,"Short delay should be less than long delay!"),this.isMobile=xM()||MM()}get(){return gk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(n,e){vs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Tk=new yu(3e4,6e4);function eg(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Pa(n,e,t,s,o={}){return lC(n,o,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const d=cu({key:n.config.apiKey,...c}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:p,...l};return RM()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&ba(n.emulatorConfig.host)&&(m.credentials="include"),aC.fetch()(await uC(n,n.config.apiHost,t,d),m)})}async function lC(n,e,t){n._canInitEmulator=!1;const s={..._k,...e};try{const o=new Sk(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw td(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,m]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw td(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw td(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw td(n,"user-disabled",c);const v=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw oC(n,v,m);_s(n,v)}}catch(o){if(o instanceof Es)throw o;_s(n,"network-request-failed",{message:String(o)})}}async function Ek(n,e,t,s,o={}){const l=await Pa(n,e,t,s,o);return"mfaPendingCredential"in l&&_s(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function uC(n,e,t,s){const o=`${e}${t}?${s}`,l=n,c=l.config.emulator?Zp(n.config,o):`${n.config.apiScheme}://${o}`;return vk.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class Sk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(qi(this.auth,"network-request-failed")),Tk.get())})}}function td(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=qi(n,e,s);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ak(n,e){return Pa(n,"POST","/v1/accounts:delete",e)}async function Pd(n,e){return Pa(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Ck(n,e=!1){const t=ci(n),s=await t.getIdToken(e),o=tg(s);xe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:Wl(Im(o.auth_time)),issuedAtTime:Wl(Im(o.iat)),expirationTime:Wl(Im(o.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Im(n){return Number(n)*1e3}function tg(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return ud("JWT malformed, contained fewer than 3 sections"),null;try{const o=cS(t);return o?JSON.parse(o):(ud("Failed to decode base64 JWT payload"),null)}catch(o){return ud("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function d0(n){const e=tg(n);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ru(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Es&&Ik(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function Ik({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wl(this.lastLoginAt),this.creationTime=Wl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vd(n){var E;const e=n.auth,t=await n.getIdToken(),s=await ru(n,Pd(e,{idToken:t}));xe(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=(E=o.providerUserInfo)!=null&&E.length?cC(o.providerUserInfo):[],c=wk(n.providerData,l),d=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(c!=null&&c.length),m=d?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new cp(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(n,v)}async function xk(n){const e=ci(n);await Vd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wk(n,e){return[...n.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function cC(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rk(n,e){const t=await lC(n,{},async()=>{const s=cu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=await uC(n,o,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:s};return n.emulatorConfig&&ba(n.emulatorConfig.host)&&(p.credentials="include"),aC.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Nk(n,e){return Pa(n,"POST","/v2/accounts:revokeToken",eg(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):d0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const t=d0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await Rk(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,c=new fa;return s&&(xe(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(xe(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(xe(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fa,this.toJSON())}_performRefresh(){return cs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(n,e){xe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ai{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new bk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new cp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await ru(this,this.stsTokenManager.getToken(this.auth,e));return xe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Ck(this,e)}reload(){return xk(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ai({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Vd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ki(this.auth.app))return Promise.reject(Zr(this.auth));const e=await this.getIdToken();return await ru(this,Ak(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,m=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:A,isAnonymous:x,providerData:L,stsTokenManager:B}=t;xe(E&&B,e,"internal-error");const z=fa.fromJSON(this.name,B);xe(typeof E=="string",e,"internal-error"),tr(s,e.name),tr(o,e.name),xe(typeof A=="boolean",e,"internal-error"),xe(typeof x=="boolean",e,"internal-error"),tr(l,e.name),tr(c,e.name),tr(d,e.name),tr(p,e.name),tr(m,e.name),tr(v,e.name);const ee=new ai({uid:E,auth:e,email:o,emailVerified:A,displayName:s,isAnonymous:x,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:z,createdAt:m,lastLoginAt:v});return L&&Array.isArray(L)&&(ee.providerData=L.map(te=>({...te}))),p&&(ee._redirectEventId=p),ee}static async _fromIdTokenResponse(e,t,s=!1){const o=new fa;o.updateFromServerResponse(t);const l=new ai({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Vd(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];xe(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?cC(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),d=new fa;d.updateFromIdToken(s);const p=new ai({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:c}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new cp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=new Map;function ds(n){vs(n instanceof Function,"Expected a class definition");let e=f0.get(n);return e?(vs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,f0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}dC.type="NONE";const h0=dC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(n,e,t){return`firebase:${n}:${e}:${t}`}class ha{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=cd(this.userKey,o.apiKey,l),this.fullPersistenceKey=cd("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Pd(this.auth,{idToken:e}).catch(()=>{});return t?ai._fromGetAccountInfoResponse(this.auth,t,e):null}return ai._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new ha(ds(h0),e,s);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=o[0]||ds(h0);const c=cd(s,e.config.apiKey,e.name);let d=null;for(const m of t)try{const v=await m._get(c);if(v){let E;if(typeof v=="string"){const A=await Pd(e,{idToken:v}).catch(()=>{});if(!A)break;E=await ai._fromGetAccountInfoResponse(e,A,v)}else E=ai._fromJSON(e,v);m!==l&&(d=E),l=m;break}}catch{}const p=o.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new ha(l,e,s):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==l)try{await m._remove(c)}catch{}})),new ha(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yC(e))return"Blackberry";if(_C(e))return"Webos";if(hC(e))return"Safari";if((e.includes("chrome/")||mC(e))&&!e.includes("edge/"))return"Chrome";if(gC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function fC(n=cn()){return/firefox\//i.test(n)}function hC(n=cn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mC(n=cn()){return/crios\//i.test(n)}function pC(n=cn()){return/iemobile/i.test(n)}function gC(n=cn()){return/android/i.test(n)}function yC(n=cn()){return/blackberry/i.test(n)}function _C(n=cn()){return/webos/i.test(n)}function ng(n=cn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Mk(n=cn()){var e;return ng(n)&&!!((e=window.navigator)!=null&&e.standalone)}function Dk(){return DM()&&document.documentMode===10}function vC(n=cn()){return ng(n)||gC(n)||_C(n)||yC(n)||/windows phone/i.test(n)||pC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(n,e=[]){let t;switch(n){case"Browser":t=m0(cn());break;case"Worker":t=`${m0(cn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${xa}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vk(n,e={}){return Pa(n,"GET","/v2/passwordPolicy",eg(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=6;class Uk{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??kk,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new p0(this),this.idTokenSubscription=new p0(this),this.beforeStateQueue=new Pk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ds(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await ha.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Pd(this,{idToken:e}),s=await ai._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(ki(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=s==null?void 0:s._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(s=p.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Vd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ki(this.app))return Promise.reject(Zr(this));const t=e?ci(e):null;return t&&xe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ki(this.app)?Promise.reject(Zr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ki(this.app)?Promise.reject(Zr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Vk(this),t=new Uk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new uu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await Nk(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ds(e)||this._popupRedirectResolver;xe(t,this,"argument-error"),this.redirectPersistenceManager=await ha.create(this,[ds(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(ki(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&mk(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ig(n){return ci(n)}class p0{constructor(e){this.auth=e,this.observer=null,this.addObserver=BM(t=>this.observer=t)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ok(n){sg=n}function qk(n){return sg.loadJS(n)}function Bk(){return sg.gapiScript}function Fk(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(n,e){const t=Sp(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(to(l,e??{}))return o;_s(o,"already-initialized")}return t.initialize({options:e})}function Hk(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(ds);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function Gk(n,e,t){const s=ig(n);xe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=EC(e),{host:c,port:d}=Yk(e),p=d===null?"":`:${d}`,m={url:`${l}//${c}${p}/`},v=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){xe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),xe(to(m,s.config.emulator)&&to(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,ba(c)?(mS(`${l}//${c}${p}`),pS("Auth",!0)):Jk()}function EC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Yk(n){const e=EC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:g0(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:g0(c)}}}function g0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Jk(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return cs("not implemented")}_getIdTokenResponse(e){return cs("not implemented")}_linkToIdToken(e,t){return cs("not implemented")}_getReauthenticationResolver(e){return cs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ma(n,e){return Ek(n,"POST","/v1/accounts:signInWithIdp",eg(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk="http://localhost";class oo extends SC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new oo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):_s("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const c=new oo(s,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ma(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,ma(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ma(e,t)}buildRequest(){const e={requestUri:jk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=cu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u extends AC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends _u{constructor(){super("facebook.com")}static credential(e){return oo._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.FACEBOOK_SIGN_IN_METHOD="facebook.com";nr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends _u{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return oo._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return ir.credential(t,s)}catch{return null}}}ir.GOOGLE_SIGN_IN_METHOD="google.com";ir.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends _u{constructor(){super("github.com")}static credential(e){return oo._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sr.credential(e.oauthAccessToken)}catch{return null}}}sr.GITHUB_SIGN_IN_METHOD="github.com";sr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends _u{constructor(){super("twitter.com")}static credential(e,t){return oo._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return rr.credential(t,s)}catch{return null}}}rr.TWITTER_SIGN_IN_METHOD="twitter.com";rr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await ai._fromIdTokenResponse(e,s,o),c=y0(s);return new Sa({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=y0(s);return new Sa({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function y0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd extends Es{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,kd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new kd(e,t,s,o)}}function CC(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?kd._fromErrorAndOperation(n,l,e,s):l})}async function Kk(n,e,t=!1){const s=await ru(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Sa._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $k(n,e,t=!1){const{auth:s}=n;if(ki(s.app))return Promise.reject(Zr(s));const o="reauthenticate";try{const l=await ru(n,CC(s,o,e,n),t);xe(l.idToken,s,"internal-error");const c=tg(l.idToken);xe(c,s,"internal-error");const{sub:d}=c;return xe(n.uid===d,s,"user-mismatch"),Sa._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&_s(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qk(n,e,t=!1){if(ki(n.app))return Promise.reject(Zr(n));const s="signIn",o=await CC(n,s,e),l=await Sa._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(l.user),l}function Xk(n,e,t,s){return ci(n).onIdTokenChanged(e,t,s)}function Wk(n,e,t){return ci(n).beforeAuthStateChanged(e,t)}const Ud="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ud,"1"),this.storage.removeItem(Ud),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk=1e3,eU=10;class bC extends IC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);Dk()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,eU):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},Zk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}bC.type="LOCAL";const tU=bC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC extends IC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}xC.type="SESSION";const wC=xC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nU(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new of(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const d=Array.from(c).map(async m=>m(t.origin,l)),p=await nU(d);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}of.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const m=rg("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(E){const A=E;if(A.data.eventId===m)switch(A.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(A.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(){return window}function sU(n){Bi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(){return typeof Bi().WorkerGlobalScope<"u"&&typeof Bi().importScripts=="function"}async function rU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oU(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function aU(){return RC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC="firebaseLocalStorageDb",lU=1,Ld="firebaseLocalStorage",MC="fbase_key";class vu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function af(n,e){return n.transaction([Ld],e?"readwrite":"readonly").objectStore(Ld)}function uU(){const n=indexedDB.deleteDatabase(NC);return new vu(n).toPromise()}function dp(){const n=indexedDB.open(NC,lU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Ld,{keyPath:MC})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Ld)?e(s):(s.close(),await uU(),e(await dp()))})})}async function _0(n,e,t){const s=af(n,!0).put({[MC]:e,value:t});return new vu(s).toPromise()}async function cU(n,e){const t=af(n,!1).get(e),s=await new vu(t).toPromise();return s===void 0?null:s.value}function v0(n,e){const t=af(n,!0).delete(e);return new vu(t).toPromise()}const dU=800,fU=3;class DC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>fU)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return RC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=of._getInstance(aU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await rU(),!this.activeServiceWorker)return;this.sender=new iU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dp();return await _0(e,Ud,"1"),await v0(e,Ud),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>_0(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>cU(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>v0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=af(o,!1).getAll();return new vu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}DC.type="LOCAL";const hU=DC;new yu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mU(n,e){return e?ds(e):(xe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og extends SC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ma(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ma(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ma(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function pU(n){return Qk(n.auth,new og(n),n.bypassAuthState)}function gU(n){const{auth:e,user:t}=n;return xe(t,e,"internal-error"),$k(t,new og(n),n.bypassAuthState)}async function yU(n){const{auth:e,user:t}=n;return xe(t,e,"internal-error"),Kk(t,new og(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pU;case"linkViaPopup":case"linkViaRedirect":return yU;case"reauthViaPopup":case"reauthViaRedirect":return gU;default:_s(this.auth,"internal-error")}}resolve(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U=new yu(2e3,1e4);class oa extends PC{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,oa.currentPopupAction&&oa.currentPopupAction.cancel(),oa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){vs(this.filter.length===1,"Popup operations only handle one event");const e=rg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(qi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(qi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_U.get())};e()}}oa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vU="pendingRedirect",dd=new Map;class TU extends PC{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=dd.get(this.auth._key());if(!e){try{const s=await EU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}dd.set(this.auth._key(),e)}return this.bypassAuthState||dd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function EU(n,e){const t=CU(e),s=AU(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function SU(n,e){dd.set(n._key(),e)}function AU(n){return ds(n._redirectPersistence)}function CU(n){return cd(vU,n.config.apiKey,n.name)}async function IU(n,e,t=!1){if(ki(n.app))return Promise.reject(Zr(n));const s=ig(n),o=mU(s,e),c=await new TU(s,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bU=600*1e3;class xU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wU(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!VC(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(qi(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bU&&this.cachedEventUids.clear(),this.cachedEventUids.has(T0(e))}saveEventToCache(e){this.cachedEventUids.add(T0(e)),this.lastProcessedEventTime=Date.now()}}function T0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function VC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wU(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return VC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RU(n,e={}){return Pa(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MU=/^https?/;async function DU(n){if(n.config.emulator)return;const{authorizedDomains:e}=await RU(n);for(const t of e)try{if(PU(t))return}catch{}_s(n,"unauthorized-domain")}function PU(n){const e=up(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!MU.test(t))return!1;if(NU.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VU=new yu(3e4,6e4);function E0(){const n=Bi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function kU(n){return new Promise((e,t)=>{var o,l,c;function s(){E0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{E0(),t(qi(n,"network-request-failed"))},timeout:VU.get()})}if((l=(o=Bi().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Bi().gapi)!=null&&c.load)s();else{const d=Fk("iframefcb");return Bi()[d]=()=>{gapi.load?s():t(qi(n,"network-request-failed"))},qk(`${Bk()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw fd=null,e})}let fd=null;function UU(n){return fd=fd||kU(n),fd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU=new yu(5e3,15e3),OU="__/auth/iframe",qU="emulator/auth/iframe",BU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zU(n){const e=n.config;xe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Zp(e,qU):`https://${n.config.authDomain}/${OU}`,s={apiKey:e.apiKey,appName:n.name,v:xa},o=FU.get(n.config.apiHost);o&&(s.eid=o);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${cu(s).slice(1)}`}async function HU(n){const e=await UU(n),t=Bi().gapi;return xe(t,n,"internal-error"),e.open({where:document.body,url:zU(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BU,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const c=qi(n,"network-request-failed"),d=Bi().setTimeout(()=>{l(c)},LU.get());function p(){Bi().clearTimeout(d),o(s)}s.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},YU=500,JU=600,jU="_blank",KU="http://localhost";class S0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $U(n,e,t,s=YU,o=JU){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const p={...GU,width:s.toString(),height:o.toString(),top:l,left:c},m=cn().toLowerCase();t&&(d=mC(m)?jU:t),fC(m)&&(e=e||KU,p.scrollbars="yes");const v=Object.entries(p).reduce((A,[x,L])=>`${A}${x}=${L},`,"");if(Mk(m)&&d!=="_self")return QU(e||"",d),new S0(null);const E=window.open(e||"",d,v);xe(E,n,"popup-blocked");try{E.focus()}catch{}return new S0(E)}function QU(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XU="__/auth/handler",WU="emulator/auth/handler",ZU=encodeURIComponent("fac");async function A0(n,e,t,s,o,l){xe(n.config.authDomain,n,"auth-domain-config-required"),xe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:xa,eventId:o};if(e instanceof AC){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",qM(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof _u){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await n._getAppCheckToken(),m=p?`#${ZU}=${encodeURIComponent(p)}`:"";return`${eL(n)}?${cu(d).slice(1)}${m}`}function eL({config:n}){return n.emulator?Zp(n,WU):`https://${n.authDomain}/${XU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="webStorageSupport";class tL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wC,this._completeRedirectFn=IU,this._overrideRedirectResult=SU}async _openPopup(e,t,s,o){var c;vs((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await A0(e,t,s,up(),o);return $U(e,l,rg())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await A0(e,t,s,up(),o);return sU(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(vs(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await HU(e),s=new xU(e);return t.register("authEvent",o=>(xe(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(bm,{type:bm},o=>{var c;const l=(c=o==null?void 0:o[0])==null?void 0:c[bm];l!==void 0&&t(!!l),_s(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=DU(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return vC()||hC()||ng()}}const nL=tL;var C0="@firebase/auth",I0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rL(n){pa(new no("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=s.options;xe(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TC(n)},m=new Lk(s,o,l,p);return Hk(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),pa(new no("auth-internal",e=>{const t=ig(e.getProvider("auth").getImmediate());return(s=>new iL(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),dr(C0,I0,sL(n)),dr(C0,I0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL=300,aL=hS("authIdTokenMaxAge")||oL;let b0=null;const lL=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>aL)return;const o=t==null?void 0:t.token;b0!==o&&(b0=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function uL(n=vS()){const e=Sp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=zk(n,{popupRedirectResolver:nL,persistence:[hU,tU,wC]}),s=hS("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=lL(l.toString());Wk(t,c,()=>c(t.currentUser)),Xk(t,d=>c(d))}}const o=dS("auth");return o&&Gk(t,`http://${o}`),t}function cL(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}Ok({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const l=qi("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",cL().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rL("Browser");let xm=null,us=null,dL=null;const fL=()=>{try{return ca().hasFirebase?(xm=_S(_t.firebase),us=jA(xm),dL=uL(xm),console.log("🔥 تم تهيئة Firebase بنجاح"),{success:!0}):(console.warn("⚠️ تحذير: مفاتيح Firebase API غير متوفرة. لن يتم تهيئة Firebase."),{success:!1,error:"مفاتيح Firebase غير متوفرة"})}catch(n){return console.error("❌ خطأ في تهيئة Firebase:",n),{success:!1,error:n instanceof Error?n.message:"خطأ غير معروف"}}};fL();const fp={async saveData(n,e,t){if(!us)return{success:!1,error:"Firebase غير مهيأ"};try{const{doc:s,setDoc:o}=await or(async()=>{const{doc:c,setDoc:d}=await Promise.resolve().then(()=>ed);return{doc:c,setDoc:d}},void 0),l=s(us,n,e);return await o(l,{...t,lastUpdated:new Date().toISOString()}),{success:!0,id:e}}catch(s){return console.error("خطأ في حفظ البيانات:",s),{success:!1,error:s instanceof Error?s.message:"خطأ غير معروف"}}},async getData(n,e){if(!us)return{success:!1,error:"Firebase غير مهيأ"};try{const{doc:t,getDoc:s}=await or(async()=>{const{doc:c,getDoc:d}=await Promise.resolve().then(()=>ed);return{doc:c,getDoc:d}},void 0),o=t(us,n,e),l=await s(o);return l.exists()?{success:!0,data:l.data()}:{success:!1,error:"المستند غير موجود"}}catch(t){return console.error("خطأ في جلب البيانات:",t),{success:!1,error:t instanceof Error?t.message:"خطأ غير معروف"}}},async getAllDocuments(n){if(!us)return{success:!1,error:"Firebase غير مهيأ"};try{const{collection:e,getDocs:t}=await or(async()=>{const{collection:l,getDocs:c}=await Promise.resolve().then(()=>ed);return{collection:l,getDocs:c}},void 0),s=await t(e(us,n)),o=[];return s.forEach(l=>{o.push({id:l.id,...l.data()})}),{success:!0,data:o}}catch(e){return console.error("خطأ في جلب المستندات:",e),{success:!1,error:e instanceof Error?e.message:"خطأ غير معروف"}}},async deleteDocument(n,e){if(!us)return{success:!1,error:"Firebase غير مهيأ"};try{const{doc:t,deleteDoc:s}=await or(async()=>{const{doc:l,deleteDoc:c}=await Promise.resolve().then(()=>ed);return{doc:l,deleteDoc:c}},void 0),o=t(us,n,e);return await s(o),{success:!0}}catch(t){return console.error("خطأ في حذف المستند:",t),{success:!1,error:t instanceof Error?t.message:"خطأ غير معروف"}}},async syncLocalDataToFirebase(n,e){try{return await this.saveData("users",n,{financialData:e,syncTimestamp:new Date().toISOString()})}catch(t){return console.error("خطأ في مزامنة البيانات:",t),{success:!1,error:t instanceof Error?t.message:"خطأ غير معروف"}}},async getDataFromFirebase(n){var e;try{const t=await this.getData("users",n);return t.success&&((e=t.data)!=null&&e.financialData)?{success:!0,data:t.data.financialData}:{success:!1,error:"لا توجد بيانات محفوظة"}}catch(t){return console.error("خطأ في جلب البيانات من Firebase:",t),{success:!1,error:t instanceof Error?t.message:"خطأ غير معروف"}}}},wm=Object.freeze(Object.defineProperty({__proto__:null,firebaseService:fp},Symbol.toStringTag,{value:"Module"})),kC=()=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),T.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),ag=()=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:[T.jsx("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),T.jsx("path",{fillRule:"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"})]}),hL=({className:n})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-6 w-6 ${n}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),mL=({className:n})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-6 w-6 ${n}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),pL=({className:n})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-6 w-6 ${n}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h7"})}),gL=({className:n})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-6 w-6 ${n}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h.01M12 12h.01M19 12h.01M5 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"})}),yL=({className:n})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-8 w-8 ${n}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),lg=({className:n})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),Rm=({className:n})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Nm=({className:n})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),_L=({className:n})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})}),vL=({selectedYear:n,selectedMonth:e,onYearChange:t,onMonthChange:s,onAddTransaction:o})=>{const l=ye.useMemo(()=>{const d=new Date().getFullYear(),p=[];for(let m=d+1;m>=2020;m--)p.push(m);return p},[]),c=ye.useMemo(()=>[{value:"all",label:"كل الشهور"},{value:1,label:"يناير"},{value:2,label:"فبراير"},{value:3,label:"مارس"},{value:4,label:"أبريل"},{value:5,label:"مايو"},{value:6,label:"يونيو"},{value:7,label:"يوليو"},{value:8,label:"أغسطس"},{value:9,label:"سبتمبر"},{value:10,label:"أكتوبر"},{value:11,label:"نوفمبر"},{value:12,label:"ديسمبر"}],[]);return T.jsx("header",{className:"bg-slate-50/80 backdrop-blur-lg sticky top-0 z-50 border-b border-slate-200 py-3",children:T.jsx("div",{className:"container mx-auto px-4",children:T.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center text-center sm:text-right gap-4",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center text-xl",children:"💰"}),T.jsxs("div",{children:[T.jsx("h1",{className:"text-xl font-bold text-slate-900 tracking-wide",children:"لوحة التحكم المالية"}),T.jsx("p",{className:"text-xs text-slate-500",children:"Developed by K.A Team"})]})]}),T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsxs("div",{className:"flex items-center gap-2 bg-slate-200 p-1.5 rounded-lg",children:[T.jsx("select",{value:n,onChange:d=>t(parseInt(d.target.value)),className:"bg-slate-200 text-slate-800 font-semibold border-0 focus:ring-0 appearance-none p-2 rounded-md",children:l.map(d=>T.jsx("option",{value:d,children:d},d))}),T.jsx("select",{value:e,onChange:d=>s(d.target.value==="all"?"all":parseInt(d.target.value)),className:"bg-slate-200 text-slate-800 font-semibold border-0 focus:ring-0 appearance-none p-2 rounded-md",children:c.map(d=>T.jsx("option",{value:d.value,children:d.label},d.value))})]}),T.jsxs("button",{onClick:o,className:"hidden md:flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-2.5 rounded-lg transition-all duration-300",children:[T.jsx(yL,{className:"w-5 h-5"}),T.jsx("span",{children:"إضافة حركة"})]})]})]})})})},Mm=[{id:"summary",label:"📊 الملخص",icon:hL},{id:"analysis",label:"📈 التحليل",icon:mL},{id:"transactions",label:"💳 الحركات",icon:pL},{id:"budget",label:"✨ الميزانية"},{id:"investment",label:"💹 الاستثمار"},{id:"ai-assistant",label:"🤖 المحلل الذكي"},{id:"cards",label:"💳 إدارة البطاقات"},{id:"bank",label:"🏦 البنك"},{id:"installments",label:"📱 الأقساط"},{id:"settings",label:"⚙️ الإعدادات"}],x0=["summary","analysis","transactions"],TL=({activeTab:n,setActiveTab:e})=>{const[t,s]=ye.useState(!1),o=d=>{e(d),s(!1)},l=Mm.filter(d=>x0.includes(d.id)),c=Mm.filter(d=>!x0.includes(d.id));return T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"hidden md:flex flex-wrap justify-center mb-8 tab-bar rounded-xl p-2",children:Mm.map(d=>T.jsx("button",{onClick:()=>o(d.id),className:`tab-btn px-4 py-2 mx-1 mb-1 rounded-lg font-semibold text-sm flex items-center gap-2 ${n===d.id?"active":""}`,children:d.label},d.id))}),T.jsxs("div",{className:"md:hidden fixed bottom-0 left-0 right-0 h-20 bg-white/80 backdrop-blur-lg border-t border-slate-200 z-40 flex justify-around items-center",children:[l.map(d=>{const p=d.icon;return T.jsxs("button",{onClick:()=>o(d.id),className:`flex flex-col items-center justify-center gap-1 transition-colors w-full h-full ${n===d.id?"text-blue-600":"text-slate-500 hover:text-slate-900"}`,children:[p&&T.jsx(p,{}),T.jsx("span",{className:"text-xs",children:d.label.split(" ")[1]})]},d.id)}),T.jsxs("button",{onClick:()=>s(!t),className:`flex flex-col items-center justify-center gap-1 transition-colors w-full h-full ${t?"text-blue-600":"text-slate-500 hover:text-slate-900"}`,children:[T.jsx(gL,{}),T.jsx("span",{className:"text-xs",children:"المزيد"})]})]}),t&&T.jsx("div",{className:"md:hidden fixed inset-0 bg-gray-900/50 backdrop-blur-sm z-50 flex justify-center items-end",onClick:()=>s(!1),children:T.jsxs("div",{className:"bg-white w-full rounded-t-2xl p-4 border-t border-slate-200 animate-fade-in",onClick:d=>d.stopPropagation(),children:[T.jsx("div",{className:"w-16 h-1 bg-slate-300 rounded-full mx-auto mb-4"}),T.jsx("div",{className:"grid grid-cols-3 gap-4 text-center",children:c.map(d=>T.jsxs("button",{onClick:()=>o(d.id),className:`p-3 rounded-lg flex flex-col items-center gap-2 ${n===d.id?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:[T.jsx("span",{className:"text-2xl",children:d.label.split(" ")[0]}),T.jsx("span",{className:"text-xs font-semibold",children:d.label.split(" ")[1]})]},d.id))})]})})]})},EL=({className:n})=>T.jsx("div",{className:`absolute inset-0 -translate-x-full animate-[shimmer_2s_infinite] bg-gradient-to-r from-transparent via-slate-200/80 to-transparent ${n}`}),Dm=()=>T.jsxs("div",{className:"glass-card p-6 h-96 relative overflow-hidden",children:[T.jsx("div",{className:"h-6 w-1/2 bg-slate-200 rounded mb-6"}),T.jsxs("div",{className:"space-y-4",children:[T.jsx("div",{className:"h-4 w-full bg-slate-200 rounded"}),T.jsx("div",{className:"h-4 w-5/6 bg-slate-200 rounded"}),T.jsx("div",{className:"h-4 w-full bg-slate-200 rounded"}),T.jsx("div",{className:"h-4 w-3/4 bg-slate-200 rounded"})]}),T.jsx(EL,{})]}),SL=()=>T.jsxs("div",{className:"container mx-auto px-2 sm:px-4 max-w-7xl mt-8 mb-20",children:[T.jsx("div",{className:"h-16 mb-3"}),T.jsx("div",{className:"flex flex-wrap justify-center mb-8 bg-slate-100 rounded-xl p-2 h-14"}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-fade-in",children:[T.jsx(Dm,{}),T.jsx(Dm,{}),T.jsx(Dm,{})]})]}),mn=n=>(n||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),AL=({title:n,details:e,barColor:t})=>T.jsxs("div",{className:"bg-slate-100 p-4 rounded-lg",children:[T.jsx("h4",{className:"font-bold text-md text-slate-800",children:n}),T.jsxs("div",{className:"flex justify-between text-sm mt-2",children:[T.jsx("span",{className:"text-slate-500",children:"المستحق:"}),T.jsxs("span",{className:"font-bold number-display text-slate-800",children:[mn(e.balance)," ريال"]})]}),T.jsxs("div",{className:"flex justify-between text-sm",children:[T.jsx("span",{className:"text-slate-500",children:"المتبقي:"}),T.jsxs("span",{className:"font-bold number-display text-emerald-500",children:[mn(e.available)," ريال"]})]}),T.jsx("div",{className:"mt-3 bg-slate-200 rounded-full h-2",children:T.jsx("div",{className:`${t} rounded-full h-2`,style:{width:`${Math.min(100,e.usagePercentage)}%`}})})]}),CL=({calculations:n,categories:e})=>{const t=Object.values(n.expensesByCategory).reduce((o,l)=>o+Number(l),0);if(t===0)return T.jsx("p",{className:"text-slate-500 text-center p-4 text-sm",children:"لا توجد مصاريف في هذه الفترة."});const s=Object.entries(n.expensesByCategory).sort(([,o],[,l])=>l-o);return T.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto pr-2",children:s.map(([o,l])=>{const c=e.find(m=>m.id===o),d=c?`${c.icon} ${c.name}`:"غير مصنف",p=Number(l)/t*100;return T.jsxs("div",{className:"flex items-center justify-between text-sm py-1",children:[T.jsx("span",{className:"w-28 truncate text-slate-600",title:c==null?void 0:c.name,children:d}),T.jsx("div",{className:"flex-1 bg-slate-200 rounded-full h-2.5 mx-2",children:T.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${p.toFixed(1)}%`}})}),T.jsxs("span",{className:"font-bold text-slate-800 number-display w-24 text-left",children:[mn(l)," ريال"]})]},o)})})},IL=({calculations:n,categories:e})=>{const{totalIncome:t,totalExpenses:s,cardDetails:o,cardPayments:l,bankAccountDetails:c,totalDebt:d,totalAvailable:p,totalLimits:m,totalBankBalance:v}=n,E=t-s,A=["bg-blue-500","bg-red-500","bg-green-500","bg-purple-500","bg-yellow-500"];return T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 animate-fade-in",children:[T.jsxs("div",{className:"glass-card p-6 xl:col-span-1",children:[T.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"💳 ملخص ديون البطاقات"}),T.jsx("div",{className:"space-y-4",children:Object.values(o).map((x,L)=>T.jsx(AL,{title:x.name,details:x,barColor:A[L%A.length]},x.id))}),T.jsx("div",{className:"mt-4 p-3 bg-slate-100 rounded-lg",children:T.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[T.jsxs("div",{children:[T.jsx("p",{className:"text-slate-500 text-xs",children:"إجمالي الديون"}),T.jsx("p",{className:"text-lg font-bold text-red-500 number-display",children:mn(d)})]}),T.jsxs("div",{children:[T.jsx("p",{className:"text-slate-500 text-xs",children:"إجمالي المتاح"}),T.jsx("p",{className:"text-lg font-bold text-emerald-500 number-display",children:mn(p)})]}),T.jsxs("div",{children:[T.jsx("p",{className:"text-slate-500 text-xs",children:"إجمالي الحدود"}),T.jsx("p",{className:"text-lg font-bold text-sky-500 number-display",children:mn(m)})]})]})})]}),T.jsxs("div",{className:"glass-card p-6 xl:col-span-1",children:[T.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"🏦 ملخص الحسابات البنكية"}),T.jsx("div",{className:"space-y-3",children:Object.values(c).map(x=>T.jsxs("div",{className:"bg-slate-100 p-3 rounded-lg",children:[T.jsx("p",{className:"font-bold text-slate-800",children:x.name}),T.jsx("p",{className:"font-bold text-xl text-blue-600 number-display",children:mn(x.balance)}),T.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[T.jsxs("span",{className:"text-emerald-500",children:["+",mn(x.deposits)]}),T.jsxs("span",{className:"text-red-500",children:["-",mn(x.withdrawals)]})]})]},x.id))}),T.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg text-center",children:[T.jsx("p",{className:"text-slate-500 text-sm",children:"إجمالي الأرصدة البنكية"}),T.jsx("p",{className:"text-2xl font-bold text-blue-800 number-display",children:mn(v)})]})]}),T.jsxs("div",{className:"glass-card p-6 xl:col-span-1",children:[T.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"📈 تقرير مالي شامل"}),T.jsxs("div",{className:"space-y-2 text-sm",children:[T.jsxs("div",{className:"flex justify-between",children:[T.jsx("span",{children:"إجمالي الدخل:"}),T.jsx("span",{className:"font-bold text-emerald-500 number-display",children:mn(t)})]}),T.jsxs("div",{className:"flex justify-between",children:[T.jsx("span",{children:"إجمالي المصاريف:"}),T.jsx("span",{className:"font-bold text-red-500 number-display",children:mn(s)})]}),T.jsx("hr",{className:"my-2 border-slate-200"}),Object.values(o).map((x,L)=>T.jsxs("div",{className:"flex justify-between text-xs",children:[T.jsxs("span",{className:"text-slate-500",children:["مصاريف ",x.name,":"]}),T.jsx("span",{className:`font-semibold ${A[L%A.length].replace("bg-","text-")} number-display`,children:mn(x.balance+(l[x.id]||0))})]},x.id)),T.jsx("hr",{className:"my-2 border-slate-200 border-dashed"}),Object.entries(l).map(([x,L])=>{var B;return T.jsxs("div",{className:"flex justify-between text-xs",children:[T.jsxs("span",{className:"text-slate-500",children:["إجمالي سداد ",(B=o[x])==null?void 0:B.name,":"]}),T.jsx("span",{className:"font-semibold text-emerald-500 number-display",children:mn(L)})]},x)}),T.jsx("hr",{className:"my-2 border-slate-200"}),T.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[T.jsx("span",{children:"الصافي:"}),T.jsx("span",{className:`number-display ${E>=0?"text-emerald-500":"text-red-500"}`,children:mn(E)})]})]})]}),T.jsxs("div",{className:"glass-card p-6 xl:col-span-1",children:[T.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"📊 ملخص الفئات"}),T.jsx(CL,{calculations:n,categories:e})]})]})},nd=n=>(n||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),bL=({transactions:n,allTransactions:e,categories:t,deleteTransaction:s,editTransaction:o,state:l})=>{const[c,d]=ye.useState(""),[p,m]=ye.useState(""),[v,E]=ye.useState(""),[A,x]=ye.useState(""),[L,B]=ye.useState(""),z=F=>{const ne={cash:"💵 نقدي","tabby-bnpl":"📱 تابي (BNPL)","tamara-bnpl":"📱 تمارا (BNPL)"};return ne[F]?ne[F]:l.cards[F]?`💳 ${l.cards[F].name}`:l.bankAccounts[F]?`🏦 ${l.bankAccounts[F].name}`:F},ee=F=>{const ne={income:"💰 دخل",expense:"💸 مصاريف","bnpl-payment":"📱 سداد قسط","investment-deposit":"💹 إيداع استثماري","investment-withdrawal":"💹 سحب استثماري"};if(ne[F])return ne[F];if(F.endsWith("-payment")){const ae=F.replace("-payment","");if(l.cards[ae])return`💳 سداد ${l.cards[ae].name}`}return F},te=ye.useMemo(()=>{let F=n;if(A&&L){const ne=new Date(A),ae=new Date(L);ae.setHours(23,59,59,999),F=e.filter(N=>{const M=new Date(N.date);return M>=ne&&M<=ae})}return F.filter(ne=>{const ae=c.toLowerCase(),N=t.find(k=>k.id===ne.categoryId),M=ne.description.toLowerCase().includes(ae)||(N==null?void 0:N.name.toLowerCase().includes(ae)),R=!p||ne.paymentMethod===p,V=!v||ne.categoryId===v;return M&&R&&V}).sort((ne,ae)=>new Date(ae.date).getTime()-new Date(ne.date).getTime())},[n,e,c,p,v,A,L,t]),Q=ye.useMemo(()=>te.reduce((F,ne)=>(ne.type==="income"||ne.type.toString().includes("payment")||ne.type==="investment-withdrawal"?F.positive+=ne.amount:F.negative+=ne.amount,F),{positive:0,negative:0}),[te]);return T.jsx("div",{className:"space-y-6 animate-fade-in",children:T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-lg sm:text-xl font-bold text-slate-900 mb-4",children:"📋 سجل المعاملات والتقارير"}),T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 items-end p-4 bg-slate-100 rounded-lg mb-6",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"dateFrom",className:"block text-sm font-medium text-slate-600 mb-1",children:"من تاريخ"}),T.jsx("input",{type:"date",id:"dateFrom",value:A,onChange:F=>x(F.target.value),className:"w-full p-2"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"dateTo",className:"block text-sm font-medium text-slate-600 mb-1",children:"إلى تاريخ"}),T.jsx("input",{type:"date",id:"dateTo",value:L,onChange:F=>B(F.target.value),className:"w-full p-2"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"filterMethod",className:"block text-sm font-medium text-slate-600 mb-1",children:"وسيلة الدفع"}),T.jsxs("select",{id:"filterMethod",value:p,onChange:F=>m(F.target.value),className:"p-2 w-full",children:[T.jsx("option",{value:"",children:"كل الوسائل"}),Object.values(l.bankAccounts).map(F=>T.jsxs("option",{value:F.id,children:["🏦 ",F.name]},F.id)),T.jsx("option",{value:"cash",children:"💵 نقدي"}),Object.values(l.cards).map(F=>T.jsxs("option",{value:F.id,children:["💳 ",F.name]},F.id)),T.jsx("option",{value:"tabby-bnpl",children:"📱 تابي"}),T.jsx("option",{value:"tamara-bnpl",children:"📱 تمارا"})]})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"filterCategory",className:"block text-sm font-medium text-slate-600 mb-1",children:"الفئة"}),T.jsxs("select",{id:"filterCategory",value:v,onChange:F=>E(F.target.value),className:"p-2 w-full",children:[T.jsx("option",{value:"",children:"كل الفئات"}),t.map(F=>T.jsx("option",{value:F.id,children:F.name},F.id))]})]}),T.jsxs("div",{className:"sm:col-span-2 lg:col-span-4",children:[T.jsx("label",{htmlFor:"searchTerm",className:"block text-sm font-medium text-slate-600 mb-1",children:"بحث بالوصف"}),T.jsx("input",{type:"text",id:"searchTerm",placeholder:"🔍...",value:c,onChange:F=>d(F.target.value),className:"p-2 w-full"})]})]}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center mb-4",children:[T.jsxs("div",{className:"bg-emerald-50 p-3 rounded-lg",children:[T.jsx("p",{className:"text-sm text-emerald-700",children:"إجمالي الإيجابي"}),T.jsx("p",{className:"font-bold text-xl text-emerald-600 number-display",children:nd(Q.positive)})]}),T.jsxs("div",{className:"bg-red-50 p-3 rounded-lg",children:[T.jsx("p",{className:"text-sm text-red-700",children:"إجمالي السلبي"}),T.jsx("p",{className:"font-bold text-xl text-red-600 number-display",children:nd(Q.negative)})]}),T.jsxs("div",{className:"bg-sky-50 p-3 rounded-lg",children:[T.jsx("p",{className:"text-sm text-sky-700",children:"الصافي"}),T.jsx("p",{className:"font-bold text-xl text-sky-600 number-display",children:nd(Q.positive-Q.negative)})]})]}),T.jsxs("div",{className:"overflow-x-auto",children:[T.jsxs("table",{className:"w-full text-sm",children:[T.jsx("thead",{className:"border-b border-gray-200",children:T.jsxs("tr",{children:[T.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:"التاريخ"}),T.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:"الوسيلة"}),T.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:"النوع"}),T.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:"المبلغ"}),T.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:"الفئة"}),T.jsx("th",{className:"text-right py-3 px-4 font-semibold hidden sm:table-cell",children:"الوصف"}),T.jsx("th",{className:"text-center py-3 px-4 font-semibold"})]})}),T.jsx("tbody",{children:te.map(F=>{const ne=t.find(N=>N.id===F.categoryId),ae=F.type==="income"||F.type.toString().includes("payment")||F.type==="investment-withdrawal";return T.jsxs("tr",{className:"border-b border-gray-200/50 hover:bg-gray-50",children:[T.jsx("td",{className:"p-3",children:F.date}),T.jsx("td",{className:"p-3",children:z(F.paymentMethod)}),T.jsx("td",{className:"p-3",children:ee(F.type)}),T.jsxs("td",{className:`p-3 font-semibold number-display ${ae?"text-emerald-500":"text-red-500"}`,children:[ae?"+":"-"," ",nd(F.amount)]}),T.jsx("td",{className:"p-3",children:ne?`${ne.icon} ${ne.name}`:"غير محدد"}),T.jsx("td",{className:"p-3 text-slate-500 hidden sm:table-cell",children:F.description||"-"}),T.jsx("td",{className:"p-3 text-center",children:T.jsxs("div",{className:"flex gap-2 justify-center",children:[T.jsx("button",{onClick:()=>o(F.id),className:"text-slate-400 hover:text-blue-500 p-1 transition-colors",title:"تعديل الحركة",children:"✏️"}),T.jsx("button",{onClick:()=>s(F.id),className:"text-slate-400 hover:text-red-500 p-1 transition-colors",title:"حذف الحركة",children:T.jsx(ag,{})})]})})]},F.id)})})]}),te.length===0&&T.jsxs("div",{className:"text-center p-8 text-slate-500",children:[T.jsx("p",{children:"لا توجد معاملات تطابق الفلاتر المحددة."}),T.jsx("p",{className:"text-xs mt-1",children:"جرب توسيع النطاق الزمني أو تعديل الفلاتر الأخرى."})]})]})]})})},xL=()=>T.jsxs("div",{className:"ai-bubble chat-bubble typing-indicator flex items-center space-x-1 p-3 self-start",children:[T.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.3s]"}),T.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.15s]"}),T.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse"})]}),wL=({calculations:n,filteredTransactions:e})=>{const[t,s]=ye.useState([{id:"1",text:'أهلاً بك! أنا مساعدك المالي الشامل. يمكنك أن تسألني أسئلة تفصيلية عن وضعك المالي، مثل "ما هو إجمالي ديوني؟" أو "هل إنفاقي هذا الشهر يتوافق مع أهدافي؟"',sender:"ai"}]),[o,l]=ye.useState(""),[c,d]=ye.useState(!1),p=ye.useRef(null);ye.useEffect(()=>{var v;(v=p.current)==null||v.scrollTo(0,p.current.scrollHeight)},[t,c]);const m=async v=>{v.preventDefault();const E=o.trim();if(!E||c)return;const A={id:Date.now().toString(),text:E,sender:"user"};s(x=>[...x,A]),l(""),d(!0);try{const L=await sS(E,{periodSummary:n,transactions:e}),B={id:(Date.now()+1).toString(),text:L,sender:"ai"};s(z=>[...z,B])}catch(x){const L={id:(Date.now()+1).toString(),text:x instanceof Error?x.message:"عذراً، حدث خطأ ما. يرجى المحاولة مرة أخرى.",sender:"ai"};s(B=>[...B,L])}finally{d(!1)}};return T.jsxs("div",{className:"glass-card overflow-hidden flex flex-col",style:{height:"70vh"},children:[T.jsxs("div",{className:"p-4 bg-gray-100 text-center flex-shrink-0",children:[T.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"🤖 المحلل المالي الذكي"}),T.jsx("p",{className:"text-sm text-slate-500",children:"اسأل أي شيء عن بياناتك المالية للشهر المحدد"})]}),T.jsxs("div",{ref:p,className:"p-4 flex-grow overflow-y-auto flex flex-col gap-4",children:[t.map(v=>T.jsx("div",{className:`chat-bubble ${v.sender==="user"?"user-bubble":"ai-bubble"}`,children:T.jsx("p",{dangerouslySetInnerHTML:{__html:v.text.replace(/\n/g,"<br />")}})},v.id)),c&&T.jsx(xL,{})]}),T.jsx("div",{className:"p-4 border-t border-gray-200 flex-shrink-0",children:T.jsxs("form",{onSubmit:m,className:"flex gap-2",children:[T.jsx("input",{type:"text",value:o,onChange:v=>l(v.target.value),className:"w-full p-3",placeholder:"اكتب سؤالك هنا...",required:!0,autoComplete:"off",disabled:c}),T.jsx("button",{type:"submit",disabled:c,className:"p-3 magical-button text-white rounded-lg flex-shrink-0 disabled:opacity-50",children:T.jsx(kC,{})})]})})]})},RL=({calculations:n,categories:e,allTransactions:t})=>{const s=ye.useRef(null),o=ye.useRef(null),l=ye.useRef({}),c=ye.useMemo(()=>Object.entries(n.expensesByCategory).map(([p,m])=>{const v=e.find(E=>E.id===p);return{name:v?`${v.icon} ${v.name}`:"غير محدد",value:m}}).sort((p,m)=>m.value-p.value),[n.expensesByCategory,e]),d=ye.useMemo(()=>{const p={},m=new Date;for(let v=5;v>=0;v--){const A=new Date(m.getFullYear(),m.getMonth()-v,1).toLocaleString("ar-SA",{month:"short",year:"numeric"});p[A]={income:0,expenses:0}}return t.forEach(v=>{const A=new Date(v.date).toLocaleString("ar-SA",{month:"short",year:"numeric"});p[A]&&(v.type==="income"&&(p[A].income+=v.amount),(v.type==="expense"||v.type==="bnpl-payment")&&(p[A].expenses+=v.amount))}),{labels:Object.keys(p),incomeData:Object.values(p).map(v=>v.income),expensesData:Object.values(p).map(v=>v.expenses)}},[t]);return ye.useEffect(()=>{var m,v;const p=window.Chart;if(p){if((m=l.current.pie)==null||m.destroy(),(v=l.current.bar)==null||v.destroy(),s.current&&c.length>0){const E=s.current.getContext("2d");E&&(l.current.pie=new p(E,{type:"doughnut",data:{labels:c.map(A=>A.name),datasets:[{data:c.map(A=>A.value),backgroundColor:["#3b82f6","#60a5fa","#93c5fd","#bfdbfe","#d1d5db","#9ca3af","#6b7280"],borderColor:"#ffffff",borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{color:"#475569",font:{family:"Cairo"}}}}}}))}if(o.current&&d.labels.length>0){const E=o.current.getContext("2d");E&&(l.current.bar=new p(E,{type:"bar",data:{labels:d.labels,datasets:[{label:"الدخل",data:d.incomeData,backgroundColor:"#10b981",borderRadius:4},{label:"المصاريف",data:d.expensesData,backgroundColor:"#ef4444",borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{ticks:{color:"#64748b"},grid:{color:"#e2e8f0"}},x:{ticks:{color:"#64748b"},grid:{display:!1}}},plugins:{legend:{labels:{color:"#475569",font:{family:"Cairo"}}}}}}))}return()=>{var E,A;(E=l.current.pie)==null||E.destroy(),(A=l.current.bar)==null||A.destroy()}}},[c,d]),T.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 animate-fade-in",children:[T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-900",children:"📊 توزيع مصاريف الفترة"}),T.jsx("div",{className:"h-80",children:c.length>0?T.jsx("canvas",{ref:s}):T.jsx("p",{className:"text-center text-slate-500 mt-10",children:"لا توجد مصاريف لعرضها."})})]}),T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-900",children:"📈 الدخل مقابل المصاريف (آخر 6 أشهر)"}),T.jsx("div",{className:"h-80",children:T.jsx("canvas",{ref:o})})]})]})},NL=({state:n,setLoading:e,setModal:t})=>{const[s,o]=ye.useState(""),[l,c]=ye.useState(""),d=async()=>{const p=parseFloat(s);if(isNaN(p)||p<=0){t({title:"خطأ",body:"<p>الرجاء إدخال مبلغ ميزانية صحيح.</p>",confirmText:"موافق",hideCancel:!0});return}e(!0,"جاري إنشاء خطة الميزانية..."),c("");try{const m=new Date;m.setDate(m.getDate()-60);const v=n.transactions.filter(A=>new Date(A.date)>=m&&A.type==="expense");if(v.length<5)throw new Error("لا توجد بيانات كافية عن إنفاقك لإنشاء خطة دقيقة. يرجى إضافة 5 معاملات على الأقل.");const E=await aS(p,n.categories,v);c(E)}catch(m){const v=m instanceof Error?m.message:"حدث خطأ غير متوقع.";t({title:"خطأ في إنشاء الميزانية",body:`<p>${v}</p>`,confirmText:"موافق",hideCancel:!0})}finally{e(!1)}};return T.jsxs("div",{className:"glass-card p-6 animate-fade-in",children:[T.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-900",children:"✨ الميزانية الشهرية الذكية"}),T.jsxs("div",{className:"flex flex-col sm:flex-row items-end gap-4 mb-6 p-4 bg-slate-100 rounded-lg",children:[T.jsxs("div",{className:"flex-grow",children:[T.jsx("label",{htmlFor:"monthly-budget-input",className:"block text-sm font-medium text-slate-600 mb-1",children:"أدخل إجمالي ميزانيتك الشهرية (ريال)"}),T.jsx("input",{type:"number",id:"monthly-budget-input",className:"w-full p-2",placeholder:"5000",value:s,onChange:p=>o(p.target.value)})]}),T.jsx("button",{onClick:d,className:"w-full sm:w-auto px-6 py-2 magical-button text-white rounded-lg font-semibold flex-shrink-0",children:"✨ إنشاء خطة الميزانية"})]}),T.jsx("div",{className:"prose max-w-none",children:l?T.jsx("div",{dangerouslySetInnerHTML:{__html:l.replace(/### (.*)/g,'<h4 class="text-lg font-bold text-slate-900 mt-3 mb-2">$1</h4>').replace(/\n/g,"<br />")}}):T.jsx("p",{className:"text-center text-slate-500",children:"أدخل ميزانيتك أعلاه للحصول على خطة مخصصة بناءً على إنفاقك."})})]})},ML=({state:n,setState:e,calculations:t,setModal:s})=>{const[o,l]=ye.useState([{id:"1",text:'أهلاً بك! أنا مرشدك لفهم عالم الاستثمار. يمكنك سؤالي عن استراتيجيات، أو مفاهيم مثل "ما هو الاستثمار طويل الأجل؟". تذكر، أنا لا أقدم نصائح مباشرة لشراء أسهم معينة.',sender:"ai"}]),[c,d]=ye.useState(""),[p,m]=ye.useState(!1),v=ye.useRef(null);ye.useEffect(()=>{var L;(L=v.current)==null||L.scrollTo(0,v.current.scrollHeight)},[o,p]);const E=L=>{L.preventDefault();const B=L.target,z=parseFloat(B.elements.namedItem("investment-amount").value),ee=B.elements.namedItem("investment-type").value,te=B.elements.namedItem("payment-method").value;if(isNaN(z)||z<=0){s({title:"خطأ",body:"<p>الرجاء إدخال مبلغ صحيح.</p>"});return}const Q={amount:z,date:new Date().toISOString().split("T")[0],description:ee==="deposit"?"إيداع في المحفظة الاستثمارية":"سحب من المحفظة الاستثمارية",paymentMethod:te,type:ee==="deposit"?"investment-deposit":"investment-withdrawal",categoryId:null};e(F=>({...F,transactions:[...F.transactions,{...Q,id:`trans-${Date.now()}`}]})),B.reset()},A=async L=>{L.preventDefault();const B=c.trim();if(!(!B||p)){l(z=>[...z,{id:Date.now().toString(),text:B,sender:"user"}]),d(""),m(!0);try{const z=await oS(B);l(ee=>[...ee,{id:(Date.now()+1).toString(),text:z,sender:"ai"}])}catch(z){l(ee=>[...ee,{id:(Date.now()+1).toString(),text:z instanceof Error?z.message:"عذراً، حدث خطأ.",sender:"ai"}])}finally{m(!1)}}},x=()=>{const L=`<div><label class="block text-sm font-medium text-slate-600 mb-1">القيمة الحالية للمحفظة (ريال)</label><input type="number" id="edit-investment-value" class="w-full p-2" value="${n.investments.currentValue}"><p class="text-xs text-slate-500 mt-2">أدخل القيمة السوقية الحالية لجميع استثماراتك.</p></div>`;s({show:!0,title:"تحديث قيمة المحفظة",body:L,confirmText:"حفظ",onConfirm:()=>{const B=parseFloat(document.getElementById("edit-investment-value").value);if(isNaN(B)||B<0)return alert("الرجاء إدخال قيمة صحيحة."),!1;e(z=>({...z,investments:{...z.investments,currentValue:B}}))}})};return T.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 animate-fade-in",children:[T.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[T.jsxs("div",{className:"glass-card p-6 text-center",children:[T.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"💰 القيمة الحالية للمحفظة"}),T.jsx("p",{className:"text-4xl font-bold text-emerald-500 number-display",children:w0(n.investments.currentValue)}),T.jsxs("p",{className:"text-sm text-slate-500 mt-2",children:["إجمالي المستثمر: ",T.jsx("span",{className:"font-semibold number-display text-slate-600",children:w0(t.totalInvestmentDeposits)})]}),T.jsx("button",{onClick:x,className:"mt-4 w-full px-4 py-2 bg-slate-200 text-slate-800 rounded-lg hover:bg-slate-300 transition-colors text-sm",children:"✏️ تحديث القيمة الحالية"})]}),T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"💸 إضافة حركة استثمارية"}),T.jsxs("form",{onSubmit:E,className:"space-y-4",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"investment-amount",className:"block text-sm font-medium text-slate-600",children:"المبلغ"}),T.jsx("input",{type:"number",id:"investment-amount",name:"investment-amount",className:"mt-1 w-full p-2",required:!0})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"investment-type",className:"block text-sm font-medium text-slate-600",children:"نوع الحركة"}),T.jsxs("select",{id:"investment-type",name:"investment-type",className:"mt-1 w-full p-2",children:[T.jsx("option",{value:"deposit",children:"إيداع للمحفظة"}),T.jsx("option",{value:"withdrawal",children:"سحب من المحفظة"})]})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"payment-method",className:"block text-sm font-medium text-slate-600",children:"الحساب البنكي"}),T.jsx("select",{id:"payment-method",name:"payment-method",className:"mt-1 w-full p-2",children:Object.values(n.bankAccounts).map(L=>T.jsxs("option",{value:L.id,children:["🏦 ",L.name]},L.id))})]}),T.jsx("button",{type:"submit",className:"w-full magical-button text-white font-semibold py-2 rounded-lg",children:"تنفيذ الحركة"})]})]})]}),T.jsxs("div",{className:"lg:col-span-2 glass-card overflow-hidden flex flex-col",style:{height:"75vh"},children:[T.jsxs("div",{className:"p-4 bg-gray-100 text-center flex-shrink-0",children:[T.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"🤖 مستشارك الاستثماري الذكي"}),T.jsx("p",{className:"text-sm text-slate-500",children:"اسأل عن المفاهيم والاستراتيجيات لاتخاذ قرارات أفضل"})]}),T.jsxs("div",{ref:v,className:"p-4 flex-grow overflow-y-auto flex flex-col gap-4",children:[o.map(L=>T.jsx("div",{className:`chat-bubble ${L.sender==="user"?"user-bubble":"ai-bubble"}`,dangerouslySetInnerHTML:{__html:L.text.replace(/\n/g,"<br/>")}},L.id)),p&&T.jsxs("div",{className:"ai-bubble chat-bubble typing-indicator flex items-center space-x-1 p-3 self-start",children:[T.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.3s]"}),T.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.15s]"}),T.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse"})]})]}),T.jsx("div",{className:"p-4 border-t border-gray-200 flex-shrink-0",children:T.jsxs("form",{onSubmit:A,className:"flex gap-2",children:[T.jsx("input",{type:"text",value:c,onChange:L=>d(L.target.value),className:"w-full p-3",placeholder:"اسأل عن الاستثمار...",required:!0,autoComplete:"off",disabled:p}),T.jsx("button",{type:"submit",className:"p-3 magical-button text-white rounded-lg flex-shrink-0",disabled:p,children:T.jsx(kC,{})})]})})]})]})},w0=n=>(n||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),Bl=n=>(n||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),DL=({card:n,statementDetails:e,openCardFormModal:t,deleteCard:s})=>{const o=l=>!l||l.length===0?'<tr><td colspan="3" class="text-center text-slate-500 py-3">لا توجد حركات</td></tr>':l.map(c=>`
            <tr class="hover:bg-slate-50">
                <td class="p-2">${c.postingDate||c.date}</td>
                <td class="p-2 truncate" title="${c.description}">${c.description}</td>
                <td class="p-2 number-display text-red-500">${Bl(c.amount)}</td>
            </tr>
        `).join("");return T.jsxs("div",{className:"glass-card p-6 flex flex-col",children:[T.jsxs("div",{className:"flex items-start justify-between mb-4",children:[T.jsxs("h3",{className:"text-xl font-bold text-slate-900",children:["💳 ",n.name]}),T.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[T.jsx("button",{onClick:()=>t(n.id),className:"text-sm bg-slate-100 hover:bg-slate-200 w-8 h-8 rounded-full flex items-center justify-center transition-colors","aria-label":`تعديل بطاقة ${n.name}`,children:"✏️"}),T.jsx("button",{onClick:()=>s(n.id),className:"text-sm bg-red-100 hover:bg-red-200 w-8 h-8 rounded-full flex items-center justify-center transition-colors","aria-label":`حذف بطاقة ${n.name}`,children:T.jsx(ag,{})})]})]}),T.jsxs("div",{className:"space-y-3",children:[T.jsxs("div",{className:"bg-slate-100 p-3 rounded-lg",children:[T.jsxs("div",{className:"flex justify-between items-center",children:[T.jsx("span",{className:"text-slate-500 text-sm",children:"المبلغ المستحق للكشف الحالي"}),T.jsxs("span",{className:"font-bold text-2xl text-amber-500 number-display",children:[Bl(e.statementDueAmount)," ريال"]})]}),T.jsxs("div",{className:"flex justify-between items-center text-xs mt-1",children:[T.jsx("span",{className:"text-slate-400",children:"تاريخ الاستحقاق:"}),T.jsx("span",{className:"font-semibold text-slate-600",children:e.dueDate.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})})]})]}),T.jsxs("div",{className:"flex justify-between text-sm",children:[T.jsx("span",{children:"الرصيد الإجمالي المستحق:"}),T.jsxs("span",{className:"font-bold text-red-600 number-display",children:[Bl(n.balance)," ريال"]})]}),T.jsxs("div",{className:"flex justify-between text-sm",children:[T.jsx("span",{children:"الحد الائتماني:"}),T.jsxs("span",{className:"font-bold number-display",children:[Bl(n.limit)," ريال"]})]}),T.jsxs("div",{className:"flex justify-between text-sm",children:[T.jsx("span",{children:"الرصيد المتاح:"}),T.jsxs("span",{className:"font-bold text-green-600 number-display",children:[Bl(n.available)," ريال"]})]}),T.jsxs("div",{className:"flex justify-between text-sm",children:[T.jsx("span",{children:"نسبة الاستخدام:"}),T.jsxs("span",{className:`font-bold ${n.usagePercentage>80?"text-red-600":n.usagePercentage>60?"text-yellow-600":"text-green-600"}`,children:[n.usagePercentage.toFixed(1),"%"]})]})]}),T.jsxs("div",{className:"mt-4 flex-grow flex flex-col",children:[T.jsxs("h4",{className:"font-semibold text-slate-600 mb-2 border-b border-slate-200 pb-1",children:["المعاملات القادمة (",e.upcomingTransactions.length,")"]}),T.jsx("div",{className:"flex-grow max-h-32 overflow-y-auto",children:T.jsx("table",{className:"w-full text-xs",dangerouslySetInnerHTML:{__html:`<tbody>${o(e.upcomingTransactions)}</tbody>`}})})]})]})},PL=({state:n,openCardFormModal:e,deleteCard:t})=>{const s=ye.useMemo(()=>{const l={};return Object.values(n.cards).forEach(c=>{const d=new Date,p=d.getDate(),m=d.getMonth(),v=d.getFullYear();let E,A,x;p>c.statementDay?E=new Date(v,m,c.statementDay):E=new Date(v,m-1,c.statementDay),A=new Date(E.getFullYear(),E.getMonth()-1,c.statementDay+1);let L=E.getMonth()+1,B=E.getFullYear();L>11&&(L=0,B+=1),x=new Date(B,L,c.dueDay);const z=n.transactions.filter(Q=>{const F=new Date(Q.postingDate||Q.date);return Q.paymentMethod===c.id&&(Q.type==="expense"||Q.type==="bnpl-payment")&&F>=A&&F<=E}),ee=n.transactions.filter(Q=>{const F=new Date(Q.postingDate||Q.date);return Q.paymentMethod===c.id&&(Q.type==="expense"||Q.type==="bnpl-payment")&&F>E}),te=z.reduce((Q,F)=>Q+F.amount,0);l[c.id]={statementDueAmount:te,dueDate:x,totalOutstanding:0,upcomingTransactions:ee}}),l},[n.transactions,n.cards]),o=Object.values(n.cards);return T.jsxs("div",{className:"space-y-6 animate-fade-in",children:[T.jsxs("div",{className:"flex justify-between items-center",children:[T.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"إدارة البطاقات"}),T.jsx("button",{onClick:()=>e(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:"+ إضافة بطاقة"})]}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:o.map(l=>{const c=n.transactions.filter(p=>p.paymentMethod===l.id&&(p.type==="expense"||p.type==="bnpl-payment")).reduce((p,m)=>p+m.amount,0)-n.transactions.filter(p=>p.type===`${l.id}-payment`).reduce((p,m)=>p+m.amount,0),d={...l,balance:c,available:l.limit-c,usagePercentage:l.limit>0?c/l.limit*100:0};return T.jsx(DL,{card:d,statementDetails:s[d.id],openCardFormModal:e,deleteCard:t},d.id)})})]})},hd=n=>(n||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),VL=(n,e)=>{const t={income:"💰 دخل",expense:"💸 مصاريف","bnpl-payment":"📱 سداد قسط","investment-deposit":"💹 إيداع استثماري","investment-withdrawal":"💹 سحب استثماري"};if(t[n])return t[n];if(n.endsWith("-payment")){const s=n.replace("-payment","");if(e.cards[s])return`💳 سداد ${e.cards[s].name}`}return n},kL=({account:n,openBankAccountFormModal:e,deleteBankAccount:t})=>T.jsxs("div",{className:"glass-card p-6",children:[T.jsxs("div",{className:"flex justify-between items-start mb-4",children:[T.jsxs("h4",{className:"text-xl font-bold text-slate-900",children:["🏦 ",n.name]}),T.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[T.jsx("button",{onClick:()=>e(n.id),className:"text-sm bg-slate-100 hover:bg-slate-200 w-8 h-8 rounded-full flex items-center justify-center transition-colors","aria-label":`تعديل حساب ${n.name}`,children:"✏️"}),T.jsx("button",{onClick:()=>t(n.id),className:"text-sm bg-red-100 hover:bg-red-200 w-8 h-8 rounded-full flex items-center justify-center transition-colors","aria-label":`حذف حساب ${n.name}`,children:T.jsx(ag,{})})]})]}),T.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg border border-blue-200",children:[T.jsx("p",{className:"text-blue-600 font-semibold",children:"الرصيد الحالي"}),T.jsx("p",{className:"text-3xl font-bold text-blue-800 number-display",children:hd(n.balance)})]}),T.jsxs("div",{className:"flex justify-between mt-4",children:[T.jsxs("div",{className:"text-center",children:[T.jsx("p",{className:"text-emerald-600 font-semibold",children:"إيداعات الفترة"}),T.jsx("p",{className:"text-lg font-bold text-emerald-800 number-display",children:hd(n.deposits)})]}),T.jsxs("div",{className:"text-center",children:[T.jsx("p",{className:"text-red-600 font-semibold",children:"سحوبات الفترة"}),T.jsx("p",{className:"text-lg font-bold text-red-800 number-display",children:hd(n.withdrawals)})]})]})]}),UL=({state:n,setState:e,calculations:t,filteredTransactions:s,categories:o,setModal:l,openBankAccountFormModal:c,deleteBankAccount:d})=>T.jsxs("div",{className:"space-y-6 animate-fade-in",children:[T.jsxs("div",{className:"flex justify-between items-center",children:[T.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"إدارة الحسابات البنكية"}),T.jsx("button",{onClick:()=>c(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:"+ إضافة حساب"})]}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.values(t.bankAccountDetails).map(p=>T.jsx(kL,{account:p,openBankAccountFormModal:c,deleteBankAccount:d},p.id))}),T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-900",children:"📋 معاملات الحسابات البنكية (الفترة المحددة)"}),T.jsx("div",{className:"overflow-x-auto",children:T.jsxs("table",{className:"w-full text-sm",children:[T.jsx("thead",{className:"border-b border-gray-200",children:T.jsxs("tr",{children:[T.jsx("th",{className:"text-right p-3 font-semibold",children:"التاريخ"}),T.jsx("th",{className:"text-right p-3 font-semibold",children:"الحساب"}),T.jsx("th",{className:"text-right p-3 font-semibold",children:"النوع"}),T.jsx("th",{className:"text-right p-3 font-semibold",children:"المبلغ"}),T.jsx("th",{className:"text-right p-3 font-semibold",children:"الفئة"}),T.jsx("th",{className:"text-right p-3 font-semibold",children:"الوصف"})]})}),T.jsx("tbody",{children:s.filter(p=>n.bankAccounts[p.paymentMethod]).sort((p,m)=>new Date(m.date).getTime()-new Date(p.date).getTime()).map(p=>{var A;const m=["income","investment-withdrawal"].includes(p.type),v=m?"text-emerald-500":"text-red-500",E=o.find(x=>x.id===p.categoryId);return T.jsxs("tr",{className:"border-b border-gray-200/50",children:[T.jsx("td",{className:"p-3",children:p.date}),T.jsx("td",{className:"p-3",children:(A=n.bankAccounts[p.paymentMethod])==null?void 0:A.name}),T.jsx("td",{className:"p-3",children:VL(p.type,n)}),T.jsxs("td",{className:`p-3 font-semibold ${v} number-display`,children:[m?"+":"-",hd(p.amount)]}),T.jsx("td",{className:"p-3",children:E?`${E.icon} ${E.name}`:"-"}),T.jsx("td",{className:"p-3 text-slate-500",children:p.description||"-"})]},p.id)})})]})})]})]}),Pm=n=>(n||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),R0=(n,e)=>{const t={cash:"💵 نقدي","tabby-bnpl":"📱 تابي","tamara-bnpl":"📱 تمارا",reconciliation:"🔄 تسوية"};return t[n]?t[n]:e.cards[n]?`💳 ${e.cards[n].name}`:e.bankAccounts[n]?`🏦 ${e.bankAccounts[n].name}`:n},LL=({state:n,setState:e,filteredTransactions:t,setModal:s})=>{const o=d=>{const p=n.installments.find(E=>E.id===d);if(!p||p.paid>=p.total)return;let m="";Object.values(n.bankAccounts).forEach(E=>{m+=`<option value="${E.id}">🏦 ${E.name}</option>`}),m+='<option value="cash">💵 نقدي</option>',Object.values(n.cards).forEach(E=>{m+=`<option value="${E.id}">💳 ${E.name}</option>`});const v=`<p class="mb-4">اختر مصدر الدفع لسداد قسط "${p.description}" بقيمة ${Pm(p.installmentAmount)} ريال.</p><div><label for="installment-payment-source" class="block text-sm font-medium text-slate-600 mb-2">مصدر الدفع</label><select id="installment-payment-source" class="w-full p-3">${m}</select></div>`;s({show:!0,title:"سداد قسط",body:v,confirmText:"تأكيد الدفع",onConfirm:()=>{var B;const E=document.getElementById("installment-payment-source").value,A=n.categories.find(z=>z.name==="سداد فواتير"||z.name==="💳 سداد فواتير"),x=(A==null?void 0:A.id)||((B=n.categories.find(z=>z.name==="أخرى"))==null?void 0:B.id)||"",L={id:"trans-"+Date.now(),amount:p.installmentAmount,date:new Date().toISOString().split("T")[0],description:`سداد القسط ${p.paid+1} لـ: ${p.description}`,paymentMethod:E,type:"bnpl-payment",categoryId:x,isInstallmentPayment:!0,installmentId:d};e(z=>{const ee=z.installments.map(te=>te.id===d?{...te,paid:te.paid+1}:te);return{...z,transactions:[...z.transactions,L],installments:ee}})}})},l=n.installments.filter(d=>d.paid<d.total),c=n.transactions.filter(d=>d.isInstallmentPayment);return T.jsxs("div",{className:"animate-fade-in",children:[T.jsx("h3",{className:"text-2xl font-bold mb-4 text-slate-900",children:"📱 خطط الأقساط النشطة"}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:l.length>0?l.map(d=>{const p=d.paid/d.total*100;return T.jsxs("div",{className:"glass-card p-4",children:[T.jsxs("div",{className:"flex justify-between items-start mb-2",children:[T.jsxs("div",{children:[T.jsx("h4",{className:"font-bold text-slate-900",children:d.description}),T.jsx("p",{className:"text-sm text-slate-500",children:R0(d.provider,n)})]}),T.jsxs("span",{className:"font-bold text-blue-600 number-display",children:[Pm(d.installmentAmount),"/شهر"]})]}),T.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5 mb-1",children:T.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${p}%`}})}),T.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[T.jsxs("span",{children:[d.paid," / ",d.total," مدفوع"]}),T.jsxs("span",{children:["متبقي: ",d.total-d.paid]})]}),T.jsx("div",{className:"text-center mt-4",children:T.jsx("button",{onClick:()=>o(d.id),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm w-full sm:w-auto",children:"دفع القسط التالي"})})]},d.id)}):T.jsx("div",{className:"md:col-span-2 text-center p-6 glass-card",children:T.jsx("p",{className:"text-slate-500",children:"🎉 لا توجد أقساط نشطة حاليًا!"})})}),T.jsxs("div",{className:"glass-card p-6 mt-8",children:[T.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-900",children:"📋 سجل دفعات الأقساط"}),T.jsx("div",{className:"overflow-x-auto",children:T.jsxs("table",{className:"w-full text-sm",children:[T.jsx("thead",{className:"border-b border-gray-200",children:T.jsxs("tr",{children:[T.jsx("th",{className:"text-right p-3 font-semibold",children:"التاريخ"}),T.jsx("th",{className:"text-right p-3 font-semibold",children:"الوصف"}),T.jsx("th",{className:"text-right p-3 font-semibold",children:"المصدر"}),T.jsx("th",{className:"text-right p-3 font-semibold",children:"المبلغ"})]})}),T.jsx("tbody",{children:c.sort((d,p)=>new Date(p.date).getTime()-new Date(d.date).getTime()).map(d=>T.jsxs("tr",{className:"border-b border-gray-200/50",children:[T.jsx("td",{className:"p-3",children:d.date}),T.jsx("td",{className:"p-3 text-slate-600",children:d.description}),T.jsx("td",{className:"p-3",children:R0(d.paymentMethod,n)}),T.jsx("td",{className:"p-3 text-red-500 font-semibold number-display",children:Pm(d.amount)})]},d.id))})]})})]})]})},OL=({state:n,setState:e,setModal:t,setLoading:s,onRestore:o})=>{const[l,c]=ye.useState(ca()),[d,p]=ye.useState({connected:!1}),[m,v]=ye.useState(!0),[E,A]=ye.useState({firebase:l.hasFirebase,gemini:l.hasGemini});ye.useEffect(()=>{const R=ca();c(R),A({firebase:R.hasFirebase,gemini:R.hasGemini}),R.hasFirebase?(async()=>{try{v(!0);const k=await fp.getData("test","connection");p({connected:!0})}catch(k){p({connected:!1,error:k instanceof Error?k.message:"خطأ في الاتصال"})}finally{v(!1)}})():(p({connected:!1,error:"مفاتيح Firebase غير متوفرة"}),v(!1))},[]);const x=({isValid:R})=>R?T.jsx(Rm,{className:"w-6 h-6 text-green-500"}):T.jsx(Nm,{className:"w-6 h-6 text-red-500"}),L=()=>T.jsx(_L,{className:"w-6 h-6 text-yellow-500"}),[B,z]=ye.useState({name:"",icon:""}),[ee,te]=ye.useState(null),Q=()=>{if(!B.name.trim()||!B.icon.trim()){t({title:"خطأ",body:"<p>يرجى إدخال اسم وأيقونة للفئة.</p>",hideCancel:!0,confirmText:"موافق"});return}const V={id:`cat-${Date.now()}`,name:B.name.trim(),icon:B.icon.trim()};e(k=>({...k,categories:[...k.categories,V]})),z({name:"",icon:""}),t({title:"نجح",body:"<p>تم إضافة الفئة بنجاح.</p>",hideCancel:!0,confirmText:"موافق"})},F=async()=>{const R=B.name.trim();if(!R){t({title:"خطأ",body:"<p>الرجاء إدخال اسم الفئة أولاً.</p>",hideCancel:!0,confirmText:"موافق"});return}s(!0,"جاري البحث عن أيقونة...");try{const{suggestCategoryIcon:V,initializeAi:k}=await or(async()=>{const{suggestCategoryIcon:P,initializeAi:Ye}=await Promise.resolve().then(()=>hM);return{suggestCategoryIcon:P,initializeAi:Ye}},void 0);k();const O=await V(R);O&&O.trim()?(z(P=>({...P,icon:O.trim()})),t({title:"تم اقتراح أيقونة",body:`<p>تم اقتراح الأيقونة "${O.trim()}" للفئة "${R}".</p>`,hideCancel:!0,confirmText:"موافق"})):t({title:"خطأ",body:"<p>لم أتمكن من العثور على أيقونة مناسبة.</p>",hideCancel:!0,confirmText:"موافق"})}catch(V){console.error("Icon suggestion error:",V),t({title:"خطأ",body:`<p>حدث خطأ أثناء اقتراح الأيقونة. تأكد من إعداد مفتاح Gemini API بشكل صحيح.</p><p>تفاصيل الخطأ: ${V.message}</p>`,hideCancel:!0,confirmText:"موافق"})}finally{s(!1)}},ne=R=>{n.transactions.some(V=>V.categoryId===R)?t({title:"لا يمكن الحذف",body:"<p>لا يمكن حذف هذه الفئة لأنها مستخدمة في بعض الحركات. يرجى تغيير فئة الحركات أولاً.</p>",hideCancel:!0,confirmText:"موافق"}):(e(V=>({...V,categories:V.categories.filter(k=>k.id!==R)})),t({title:"نجح",body:"<p>تم حذف الفئة بنجاح.</p>",hideCancel:!0,confirmText:"موافق"}))},ae=()=>{try{const R=JSON.stringify(n,null,2),V=new Blob([R],{type:"application/json"}),k=URL.createObjectURL(V),O=document.createElement("a");O.href=k,O.download=`masrof_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(O),O.click(),document.body.removeChild(O),URL.revokeObjectURL(k),t({title:"نجح",body:"<p>تم إنشاء النسخة الاحتياطية المحلية بنجاح.</p>",hideCancel:!0,confirmText:"موافق"})}catch{t({title:"خطأ",body:"<p>فشل إنشاء النسخة الاحتياطية.</p>",hideCancel:!0,confirmText:"موافق"})}},N=async()=>{s(!0,"جاري حفظ النسخة الاحتياطية في السحابة...");try{const R=await fp.saveData("backups",`backup_${new Date().toISOString().split("T")[0]}`,{...n,backupDate:new Date().toISOString(),version:"1.0.0"});if(R.success)t({title:"نجح",body:"<p>تم حفظ النسخة الاحتياطية في السحابة بنجاح.</p>",hideCancel:!0,confirmText:"موافق"});else throw new Error(R.error)}catch{t({title:"خطأ",body:"<p>فشل في حفظ النسخة الاحتياطية في السحابة.</p>",hideCancel:!0,confirmText:"موافق"})}finally{s(!1)}},M=R=>{var O;const V=(O=R.target.files)==null?void 0:O[0];if(!V)return;const k=new FileReader;k.onload=P=>{var Ye;try{const ke=JSON.parse((Ye=P.target)==null?void 0:Ye.result);if(ke!=null&&ke.transactions&&(ke!=null&&ke.categories))o?o(ke):t({show:!0,title:"استعادة نسخة احتياطية",body:"<p>هل أنت متأكد؟ سيتم الكتابة فوق جميع بياناتك الحالية.</p>",confirmText:"نعم، استعادة",onConfirm:()=>{const W={transactions:ke.transactions||[],categories:ke.categories||[],installments:ke.installments||[],investments:ke.investments||{currentValue:0},cards:ke.cards||{},bankAccounts:ke.bankAccounts||{}};e(W),t({title:"تم الاستعادة بنجاح",body:"<p>تم استعادة بياناتك بنجاح.</p>",confirmText:"موافق",hideCancel:!0})}});else throw new Error("Invalid backup file format.")}catch{t({show:!0,title:"خطأ",body:"<p>فشل في استعادة النسخة الاحتياطية. الملف غير صالح.</p>",confirmText:"موافق",hideCancel:!0})}},k.readAsText(V),R.target.value=""};return T.jsxs("div",{className:"space-y-6 animate-fade-in",children:[T.jsx("div",{className:"flex justify-between items-center",children:T.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"⚙️ إعدادات النظام"})}),T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"🔑 حالة مفاتيح API"}),T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"text-2xl",children:"🔥"}),T.jsxs("div",{children:[T.jsx("h4",{className:"font-semibold text-slate-800",children:"Firebase Configuration"}),T.jsxs("p",{className:"text-sm text-slate-600",children:["Project ID: ",_t.firebase.projectId]})]})]}),T.jsx("div",{className:"flex items-center gap-2",children:E.firebase?d.connected?T.jsxs(T.Fragment,{children:[T.jsx(Rm,{className:"w-6 h-6 text-green-500"}),T.jsx("span",{className:"text-sm text-green-600",children:"متصل"})]}):T.jsxs(T.Fragment,{children:[T.jsx(L,{}),T.jsx("span",{className:"text-sm text-yellow-600",children:"مفاتيح موجودة لكن غير متصل"})]}):T.jsxs(T.Fragment,{children:[T.jsx(Nm,{className:"w-6 h-6 text-red-500"}),T.jsx("span",{className:"text-sm text-red-600",children:"مفاتيح غير متوفرة"})]})})]}),T.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"text-2xl",children:"🤖"}),T.jsxs("div",{children:[T.jsx("h4",{className:"font-semibold text-slate-800",children:"Gemini AI API"}),T.jsxs("p",{className:"text-sm text-slate-600",children:["Model: ",_t.gemini.model]})]})]}),T.jsx("div",{className:"flex items-center gap-2",children:E.gemini?T.jsxs(T.Fragment,{children:[T.jsx(Rm,{className:"w-6 h-6 text-green-500"}),T.jsx("span",{className:"text-sm text-green-600",children:"مُعد"})]}):T.jsxs(T.Fragment,{children:[T.jsx(Nm,{className:"w-6 h-6 text-red-500"}),T.jsx("span",{className:"text-sm text-red-600",children:"غير مُعد"})]})})]})]}),!l.isValid&&T.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[T.jsx("h5",{className:"font-semibold text-red-800 mb-2",children:"⚠️ تحذيرات:"}),T.jsx("ul",{className:"space-y-1",children:l.errors.map((R,V)=>T.jsxs("li",{className:"text-sm text-red-600",children:["• ",R]},V))})]})]}),T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"📱 معلومات المشروع"}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[T.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[T.jsx("p",{className:"text-sm text-slate-600",children:"اسم التطبيق"}),T.jsx("p",{className:"font-semibold text-slate-800",children:_t.app.name})]}),T.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[T.jsx("p",{className:"text-sm text-slate-600",children:"الإصدار"}),T.jsx("p",{className:"font-semibold text-slate-800",children:_t.app.version})]}),T.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[T.jsx("p",{className:"text-sm text-slate-600",children:"البيئة"}),T.jsx("p",{className:"font-semibold text-slate-800",children:_t.app.environment})]}),T.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[T.jsx("p",{className:"text-sm text-slate-600",children:"حالة النظام"}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(x,{isValid:l.isValid&&d.connected}),T.jsx("span",{className:`text-sm font-semibold ${l.isValid&&d.connected?"text-green-600":"text-red-600"}`,children:l.isValid&&d.connected?"جاهز":"يحتاج إعداد"})]})]}),T.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[T.jsx("p",{className:"text-sm text-slate-600",children:"تطوير"}),T.jsx("p",{className:"font-semibold text-slate-800",children:"Khaleel Alsani"})]})]})]}),(!l.isValid||!d.connected)&&T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"📝 تعليمات الإعداد"}),T.jsxs("div",{className:"space-y-4",children:[!E.gemini&&T.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[T.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"🤖 إعداد Gemini API:"}),T.jsxs("ol",{className:"text-sm text-yellow-700 space-y-1 list-decimal list-inside",children:[T.jsxs("li",{children:["اذهب إلى ",T.jsx("a",{href:"https://makersuite.google.com/app/apikey",target:"_blank",className:"underline",children:"Google AI Studio"})]}),T.jsx("li",{children:"أنشئ مفتاح API جديد"}),T.jsxs("li",{children:["أضف المفتاح كـ GitHub Secret باسم ",T.jsx("code",{className:"bg-yellow-100 px-1 rounded",children:"VITE_GEMINI_API_KEY"})]}),T.jsxs("li",{children:["أو ضعه في ملف ",T.jsx("code",{className:"bg-yellow-100 px-1 rounded",children:".env.local"})," للتطوير المحلي"]})]})]}),!E.firebase&&T.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[T.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"🔥 إعداد Firebase:"}),T.jsxs("p",{className:"text-sm text-blue-700",children:["تأكد من إضافة جميع مفاتيح Firebase كـ GitHub Secrets:",T.jsx("br",{}),"• VITE_FIREBASE_API_KEY",T.jsx("br",{}),"• VITE_FIREBASE_AUTH_DOMAIN",T.jsx("br",{}),"• VITE_FIREBASE_PROJECT_ID",T.jsx("br",{}),"• VITE_FIREBASE_STORAGE_BUCKET",T.jsx("br",{}),"• VITE_FIREBASE_MESSAGING_SENDER_ID",T.jsx("br",{}),"• VITE_FIREBASE_APP_ID"]})]})]})]}),T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"📂 إدارة الفئات"}),T.jsxs("div",{className:"mb-6 p-4 bg-slate-50 rounded-lg",children:[T.jsx("h4",{className:"font-semibold text-slate-800 mb-3",children:"➕ إضافة فئة جديدة"}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[T.jsx("input",{type:"text",placeholder:"اسم الفئة",value:B.name,onChange:R=>z(V=>({...V,name:R.target.value})),className:"px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("input",{type:"text",placeholder:"الأيقونة (مثل: 🍔)",value:B.icon,onChange:R=>z(V=>({...V,icon:R.target.value})),className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),T.jsx("button",{type:"button",onClick:F,disabled:!B.name.trim(),className:"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"اقتراح أيقونة بالذكاء الاصطناعي",children:"🤖"})]})]}),T.jsx("button",{onClick:Q,className:"mt-3 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"➕ إضافة الفئة"})]}),T.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:n.categories.map(R=>T.jsxs("div",{className:"p-3 bg-white border border-slate-200 rounded-lg flex items-center justify-between",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("span",{className:"text-lg",children:R.icon}),T.jsx("span",{className:"text-sm font-medium text-slate-800",children:R.name})]}),T.jsx("button",{onClick:()=>ne(R.id),className:"text-red-500 hover:text-red-700 text-sm",title:"حذف الفئة",children:"🗑️"})]},R.id))})]}),T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"💾 النسخ الاحتياطي والاستعادة"}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[T.jsxs("div",{children:[T.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"📤 نسخة احتياطية محلية"}),T.jsx("p",{className:"text-slate-600 mb-3 text-sm",children:"احفظ جميع بياناتك في ملف آمن."}),T.jsx("button",{onClick:ae,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"💾 تحميل ملف"})]}),T.jsxs("div",{children:[T.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"☁️ نسخة احتياطية سحابية"}),T.jsx("p",{className:"text-slate-600 mb-3 text-sm",children:"احفظ بياناتك في السحابة للوصول من أي مكان."}),T.jsx("button",{onClick:N,className:"w-full px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",children:"☁️ حفظ في السحابة"})]}),T.jsxs("div",{children:[T.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"📥 استعادة البيانات"}),T.jsx("p",{className:"text-slate-600 mb-3 text-sm",children:"استعد بياناتك من ملف نسخة احتياطية."}),T.jsx("input",{type:"file",id:"backup-file",accept:".json",className:"hidden",onChange:M}),T.jsx("button",{onClick:()=>{var R;return(R=document.getElementById("backup-file"))==null?void 0:R.click()},className:"w-full px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg transition-colors",children:"📥 استعادة البيانات"})]})]})]}),T.jsx("div",{className:"text-center",children:T.jsx("button",{onClick:()=>{c(ca()),window.location.reload()},disabled:m,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:m?"جاري التحقق...":"🔄 إعادة التحقق"})})]})},qL=({onClose:n,onSave:e,initialData:t,categories:s,cards:o,bankAccounts:l})=>{var Q;const[c,d]=ye.useState({amount:0,date:new Date().toISOString().split("T")[0],description:"",paymentMethod:Object.keys(l)[0]||"cash",type:"expense",categoryId:((Q=s.find(F=>F.name==="أخرى"))==null?void 0:Q.id)||null}),[p,m]=ye.useState(!1),[v,E]=ye.useState(""),[A,x]=ye.useState({isOpen:!1,text:""});ye.useEffect(()=>{var F;t?d(t):(F=navigator.clipboard)!=null&&F.readText&&(async()=>{try{const ne=await navigator.clipboard.readText();ne&&ne.trim().length>10&&sessionStorage.getItem("ignoredClipboardText")!==ne&&x({isOpen:!0,text:ne})}catch{console.info("Clipboard read access denied or not supported.")}})()},[t]);const L=F=>{const{name:ne,value:ae}=F.target;d(N=>({...N,[ne]:ne==="amount"?parseFloat(ae):ae}))},B=F=>{F.preventDefault(),e(c,t==null?void 0:t.id)},z=async F=>{if(F.trim()){m(!0),E("");try{const ne=await rS(F,s,o,l),ae=JSON.parse(ne);ae.error?E(ae.error):d(N=>({...N,amount:ae.amount||N.amount,date:ae.date||N.date,description:ae.merchant||N.description,paymentMethod:ae.paymentMethod||N.paymentMethod,categoryId:ae.categoryId||N.categoryId}))}catch(ne){E(ne instanceof Error?ne.message:"فشل تحليل النص."),console.error(ne)}finally{m(!1)}}},ee=ye.useMemo(()=>{const F=[{value:"cash",label:"💵 نقدي"}];return Object.values(l).forEach(ne=>F.push({value:ne.id,label:`🏦 ${ne.name}`})),Object.values(o).forEach(ne=>F.push({value:ne.id,label:`💳 ${ne.name}`})),F.push({value:"tabby-bnpl",label:"📱 تابي"}),F.push({value:"tamara-bnpl",label:"📱 تمارا"}),F},[l,o]),te=ye.useMemo(()=>{const F=[{value:"expense",label:"💸 مصاريف"},{value:"income",label:"💰 دخل"},{value:"bnpl-payment",label:"📱 سداد قسط"},{value:"investment-deposit",label:"💹 إيداع استثماري"},{value:"investment-withdrawal",label:"💹 سحب استثماري"}];return Object.values(o).forEach(ne=>F.push({value:`${ne.id}-payment`,label:`💳 سداد ${ne.name}`})),F},[o]);return T.jsxs(T.Fragment,{children:[A.isOpen&&T.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] flex items-center justify-center p-4",onClick:()=>x({isOpen:!1,text:""}),children:T.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md animate-fade-in",onClick:F=>F.stopPropagation(),children:T.jsxs("div",{className:"p-6",children:[T.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"اكتشاف نص في الحافظة"}),T.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"وجدنا نصاً في حافظة النصوص. هل تود لصقه وتحليله لتعبئة الحقول تلقائياً؟"}),T.jsx("pre",{className:"bg-slate-100 p-3 rounded-md text-xs text-slate-500 max-h-24 overflow-y-auto whitespace-pre-wrap font-sans",children:A.text}),T.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[T.jsx("button",{onClick:()=>{sessionStorage.setItem("ignoredClipboardText",A.text),x({isOpen:!1,text:""})},className:"px-4 py-2 bg-slate-200 rounded-lg",children:"تجاهل"}),T.jsx("button",{onClick:()=>{x({isOpen:!1,text:""}),z(A.text)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"لصق وتحليل"})]})]})})}),T.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:n,children:T.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg animate-fade-in max-h-[90vh] overflow-y-auto",onClick:F=>F.stopPropagation(),children:T.jsxs("div",{className:"p-6",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:t?"تعديل الحركة":"إضافة حركة جديدة"}),T.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600",children:T.jsx(lg,{})})]}),p&&T.jsxs("div",{className:"text-center p-4 mb-4 bg-blue-50 rounded-lg",children:[T.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mx-auto"}),T.jsx("p",{className:"text-blue-600 mt-2 text-sm",children:"جاري التحليل..."})]}),v&&T.jsx("p",{className:"text-red-500 text-sm mb-4 bg-red-50 p-3 rounded-lg",children:v}),T.jsxs("form",{onSubmit:B,className:"space-y-4",children:[T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"amount",className:"form-label",children:"المبلغ"}),T.jsx("input",{type:"number",name:"amount",value:c.amount,onChange:L,className:"w-full",required:!0,step:"0.01"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"date",className:"form-label",children:"التاريخ"}),T.jsx("input",{type:"date",name:"date",value:c.date,onChange:L,className:"w-full",required:!0})]})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"description",className:"form-label",children:"الوصف"}),T.jsx("input",{type:"text",name:"description",value:c.description,onChange:L,className:"w-full",required:!0})]}),T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"type",className:"form-label",children:"نوع الحركة"}),T.jsx("select",{name:"type",value:c.type,onChange:L,className:"w-full",children:te.map(F=>T.jsx("option",{value:F.value,children:F.label},F.value))})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"paymentMethod",className:"form-label",children:"وسيلة الدفع"}),T.jsx("select",{name:"paymentMethod",value:c.paymentMethod,onChange:L,className:"w-full",children:ee.map(F=>T.jsx("option",{value:F.value,children:F.label},F.value))})]})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"categoryId",className:"form-label",children:"الفئة"}),T.jsxs("select",{name:"categoryId",value:c.categoryId||"",onChange:L,className:"w-full",children:[T.jsx("option",{value:"",children:"-- اختر فئة --"}),s.map(F=>T.jsxs("option",{value:F.id,children:[F.icon," ",F.name]},F.id))]})]}),T.jsx("button",{type:"submit",className:"w-full py-3 magical-button text-white font-semibold rounded-lg mt-6",children:t?"حفظ التعديلات":"إضافة الحركة"})]})]})})})]})},BL=({onClose:n,onSave:e,initialData:t})=>{var d;const[s,o]=ye.useState({name:"",limit:0,dueDay:15,statementDay:25,smsSamples:[]});ye.useEffect(()=>{t&&o(t)},[t]);const l=p=>{const{name:m,value:v,type:E}=p.target;o(m==="smsSamples"?A=>({...A,smsSamples:v.split(",").map(x=>x.trim()).filter(Boolean)}):A=>({...A,[m]:E==="number"?parseFloat(v)||0:v}))},c=p=>{p.preventDefault(),e(s,t==null?void 0:t.id)};return T.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:n,children:T.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg animate-fade-in",onClick:p=>p.stopPropagation(),children:T.jsxs("div",{className:"p-6",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:t?"تعديل البطاقة":"إضافة بطاقة جديدة"}),T.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600",children:T.jsx(lg,{})})]}),T.jsxs("form",{onSubmit:c,className:"space-y-4",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-600 mb-1",children:"اسم البطاقة"}),T.jsx("input",{type:"text",name:"name",value:s.name,onChange:l,className:"w-full p-2",required:!0})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"limit",className:"block text-sm font-medium text-slate-600 mb-1",children:"الحد الائتماني"}),T.jsx("input",{type:"number",name:"limit",value:s.limit,onChange:l,className:"w-full p-2",required:!0,step:"100"})]}),T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"statementDay",className:"block text-sm font-medium text-slate-600 mb-1",children:"يوم إصدار الكشف (شهرياً)"}),T.jsx("input",{type:"number",name:"statementDay",value:s.statementDay,onChange:l,className:"w-full p-2",required:!0,min:"1",max:"31"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"dueDay",className:"block text-sm font-medium text-slate-600 mb-1",children:"يوم الاستحقاق (شهرياً)"}),T.jsx("input",{type:"number",name:"dueDay",value:s.dueDay,onChange:l,className:"w-full p-2",required:!0,min:"1",max:"31"})]})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"smsSamples",className:"block text-sm font-medium text-slate-600 mb-1",children:"الكلمات المفتاحية للرسائل (افصل بفواصل)"}),T.jsx("input",{type:"text",name:"smsSamples",value:((d=s.smsSamples)==null?void 0:d.join(", "))||"",onChange:l,className:"w-full p-2",placeholder:"مثال: SNB, الأهلي, إئتمانية"}),T.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"كلمات فريدة من رسائل البنك للمساعدة في التعرف التلقائي عند لصق نص رسالة."})]}),T.jsx("button",{type:"submit",className:"w-full py-3 magical-button text-white font-semibold rounded-lg mt-6",children:t?"حفظ التعديلات":"إضافة البطاقة"})]})]})})})},FL=({onClose:n,onSave:e,initialData:t})=>{var d;const[s,o]=ye.useState({name:"",balance:0,smsSamples:[]});ye.useEffect(()=>{t&&o(t)},[t]);const l=p=>{const{name:m,value:v,type:E}=p.target;o(m==="smsSamples"?A=>({...A,smsSamples:v.split(",").map(x=>x.trim()).filter(Boolean)}):A=>({...A,[m]:E==="number"?parseFloat(v)||0:v}))},c=p=>{p.preventDefault(),e(s,t==null?void 0:t.id)};return T.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:n,children:T.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg animate-fade-in",onClick:p=>p.stopPropagation(),children:T.jsxs("div",{className:"p-6",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:t?"تعديل الحساب":"إضافة حساب بنكي"}),T.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600",children:T.jsx(lg,{})})]}),T.jsxs("form",{onSubmit:c,className:"space-y-4",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-600 mb-1",children:"اسم الحساب"}),T.jsx("input",{type:"text",name:"name",value:s.name,onChange:l,className:"w-full p-2",required:!0})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"balance",className:"block text-sm font-medium text-slate-600 mb-1",children:"الرصيد الافتتاحي"}),T.jsx("input",{type:"number",name:"balance",value:s.balance,onChange:l,className:"w-full p-2",required:!0,step:"10"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"smsSamples",className:"block text-sm font-medium text-slate-600 mb-1",children:"الكلمات المفتاحية للرسائل (افصل بفواصل)"}),T.jsx("input",{type:"text",name:"smsSamples",value:((d=s.smsSamples)==null?void 0:d.join(", "))||"",onChange:l,className:"w-full p-2",placeholder:"مثال: Alrajhi, الراجحي, مدى"}),T.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"كلمات فريدة من رسائل البنك للمساعدة في التعرف التلقائي عند لصق نص رسالة."})]}),T.jsx("button",{type:"submit",className:"w-full py-3 magical-button text-white font-semibold rounded-lg mt-6",children:t?"حفظ التعديلات":"إضافة الحساب"})]})]})})})},zL=()=>{const[n,e]=ye.useState(!1),[t,s]=ye.useState(fm),[o,l]=ye.useState(new Date().getFullYear()),[c,d]=ye.useState(new Date().getMonth()+1),[p,m]=ye.useState("summary"),[v,E]=ye.useState({isLoading:!1,text:""}),[A,x]=ye.useState(null),[L,B]=ye.useState({isOpen:!1}),[z,ee]=ye.useState({isOpen:!1}),[te,Q]=ye.useState({isOpen:!1});ye.useEffect(()=>{(async()=>{try{let fe=null;try{const{firebaseService:D}=await or(async()=>{const{firebaseService:oe}=await Promise.resolve().then(()=>wm);return{firebaseService:oe}},void 0),K=await D.getData("users","main_user");K.success&&K.data&&(fe=K.data,console.log("✅ تم تحميل البيانات من Firebase"))}catch{console.log("ℹ️ لم يتم العثور على بيانات في Firebase، سيتم استخدام localStorage")}if(!fe){const D=localStorage.getItem("financial_dashboard_state");D&&(fe=JSON.parse(D),console.log("✅ تم تحميل البيانات من localStorage"))}if(fe){const D=fm(),K={...D,...fe,cards:{...D.cards,...fe.cards||{}},bankAccounts:{...D.bankAccounts,...fe.bankAccounts||{}},investments:{...D.investments,...fe.investments||{}}};s(K)}}catch(fe){console.error("Failed to load state",fe)}finally{e(!0)}})(),iS()},[]),ye.useEffect(()=>{if(n){localStorage.setItem("financial_dashboard_state",JSON.stringify(t));const fe=setTimeout(async()=>{try{const{firebaseService:D}=await or(async()=>{const{firebaseService:oe}=await Promise.resolve().then(()=>wm);return{firebaseService:oe}},void 0),K=await D.saveData("users","main_user",t);K.success?console.log("✅ تم حفظ البيانات في Firebase"):console.warn("⚠️ فشل في حفظ البيانات في Firebase:",K.error)}catch(D){console.error("❌ خطأ في حفظ البيانات في Firebase:",D)}},2e3);return()=>clearTimeout(fe)}},[t,n]);const F=(ue,fe="")=>E({isLoading:ue,text:fe}),ne=ye.useCallback(()=>t.transactions?t.transactions.filter(ue=>{const fe=new Date(ue.date),D=fe.getFullYear()===o,K=c==="all"||fe.getMonth()+1===c;return D&&K}):[],[t.transactions,o,c]),ae=ye.useMemo(()=>ne(),[ne]),N=ye.useMemo(()=>{const ue={},fe={},D={},K={};t.cards&&typeof t.cards=="object"&&Object.values(t.cards).forEach(ve=>{ve&&ve.id&&(D[ve.id]={...ve,balance:0,available:ve.limit,usagePercentage:0})}),t.bankAccounts&&typeof t.bankAccounts=="object"&&Object.values(t.bankAccounts).forEach(ve=>{ve&&ve.id&&(K[ve.id]={...ve,deposits:0,withdrawals:0})});let oe=0,he=0,Se=0,Re=0;ae.forEach(ve=>{if(ve.type==="income")oe+=ve.amount;else if(ve.type==="expense"||ve.type==="bnpl-payment")he+=ve.amount,ve.categoryId&&(ue[ve.categoryId]=(ue[ve.categoryId]||0)+ve.amount);else if(ve.type==="investment-deposit")Se+=ve.amount,he+=ve.amount;else if(ve.type==="investment-withdrawal")Re+=ve.amount,oe+=ve.amount;else if(ve.type.endsWith("-payment")){const Tt=ve.type.replace("-payment","");fe[Tt]?fe[Tt]+=ve.amount:fe[Tt]=ve.amount}}),Object.keys(t.cards).forEach(ve=>{const Tt=t.transactions.filter(Ot=>Ot.paymentMethod===ve&&(Ot.type==="expense"||Ot.type==="bnpl-payment")).reduce((Ot,qt)=>Ot+qt.amount,0),fi=t.transactions.filter(Ot=>Ot.type===`${ve}-payment`).reduce((Ot,qt)=>Ot+qt.amount,0),Qt=Tt-fi;D[ve].balance=Qt,D[ve].available=D[ve].limit-Qt,D[ve].usagePercentage=D[ve].limit>0?Qt/D[ve].limit*100:0}),Object.keys(t.bankAccounts).forEach(ve=>{let fi=t.bankAccounts[ve].balance,Qt=0,Ot=0;ae.forEach(qt=>{qt.paymentMethod===ve&&(["income","investment-withdrawal"].includes(qt.type)?Qt+=qt.amount:Ot+=qt.amount),qt.type.endsWith("-payment")&&qt.paymentMethod===ve&&(Ot+=qt.amount)}),K[ve].balance=fi,K[ve].deposits=Qt,K[ve].withdrawals=Ot});const Oe=Object.values(D).reduce((ve,Tt)=>ve+Tt.balance,0),vt=Object.values(D).reduce((ve,Tt)=>ve+Tt.available,0),at=Object.values(D).reduce((ve,Tt)=>ve+Tt.limit,0),Hi=Object.values(K).reduce((ve,Tt)=>ve+Tt.balance,0);return{totalIncome:oe,totalExpenses:he,cardDetails:D,cardPayments:fe,bankAccountDetails:K,totalDebt:Oe,totalAvailable:vt,totalLimits:at,totalBankBalance:Hi,totalInvestmentDeposits:Se,totalInvestmentWithdrawals:Re,expensesByCategory:ue}},[ae,t.transactions,t.cards,t.bankAccounts]),M=(ue,fe)=>{s(D=>{const K=fe?D.transactions.map(oe=>oe.id===fe?{...oe,...ue}:oe):[...D.transactions,{...ue,id:`trans-${Date.now()}`}];return{...D,transactions:K}}),B({isOpen:!1})},R=ue=>{x({title:"تأكيد الحذف",body:"<p>هل أنت متأكد من رغبتك في حذف هذه الحركة؟ لا يمكن التراجع عن هذا الإجراء.</p>",confirmText:"نعم, حذف",onConfirm:()=>{s(fe=>({...fe,transactions:fe.transactions.filter(D=>D.id!==ue)})),x(null)}})},V=ue=>{const fe=t.transactions.find(D=>D.id===ue);fe&&B({isOpen:!0,initialData:fe})},k=(ue,fe)=>{s(D=>{const K={...D.cards};if(fe)K[fe]={...K[fe],...ue,id:fe};else{const oe=`card-${Date.now()}`;K[oe]={...ue,id:oe}}return{...D,cards:K}}),ee({isOpen:!1})},O=ue=>{var fe;t.transactions.some(D=>D.paymentMethod===ue||D.type===`${ue}-payment`)?x({title:"لا يمكن الحذف",body:"<p>لا يمكن حذف هذه البطاقة لأنها مستخدمة في بعض الحركات. يرجى تعديل الحركات أولاً.</p>",hideCancel:!0,confirmText:"موافق"}):x({title:"تأكيد الحذف",body:`<p>هل أنت متأكد من رغبتك في حذف بطاقة "${(fe=t.cards[ue])==null?void 0:fe.name}"؟</p>`,confirmText:"نعم, حذف",onConfirm:()=>{s(D=>{const K={...D.cards};return delete K[ue],{...D,cards:K}}),x(null)}})},P=(ue,fe)=>{s(D=>{const K={...D.bankAccounts};if(fe)K[fe]={...K[fe],...ue,id:fe};else{const oe=`bank-${Date.now()}`;K[oe]={...ue,id:oe}}return{...D,bankAccounts:K}}),Q({isOpen:!1})},Ye=ue=>{var fe;t.transactions.some(D=>D.paymentMethod===ue)?x({title:"لا يمكن الحذف",body:"<p>لا يمكن حذف هذا الحساب لأنه مستخدم في بعض الحركات. يرجى تعديل الحركات أولاً.</p>",hideCancel:!0,confirmText:"موافق"}):x({title:"تأكيد الحذف",body:`<p>هل أنت متأكد من رغبتك في حذف حساب "${(fe=t.bankAccounts[ue])==null?void 0:fe.name}"؟</p>`,confirmText:"نعم, حذف",onConfirm:()=>{s(D=>{const K={...D.bankAccounts};return delete K[ue],{...D,bankAccounts:K}}),x(null)}})},ke=ue=>{x({title:"استعادة نسخة احتياطية",body:"<p>هل أنت متأكد من استعادة هذه البيانات؟ سيتم استبدال جميع البيانات الحالية.</p>",confirmText:"استعادة",cancelText:"إلغاء",onConfirm:()=>{try{const fe=fm();if(ue.creditCards&&!ue.cards){const oe={};Object.entries(ue.creditCards).forEach(([he,Se])=>{oe[he]={id:he,name:he.toUpperCase(),limit:Se.creditLimit||0,balance:Se.currentBalance||0,dueDay:Se.dueDay||1,smsSamples:[],keywords:[]}}),ue.cards=oe}if(ue.cards&&typeof ue.cards=="object"&&(ue.cards.snb||ue.cards.enbd)){const oe={};ue.cards.snb&&(oe["snb-card"]={id:"snb-card",name:"SNB الأهلي",limit:ue.cards.snb.limit||0,dueDay:ue.cards.snb.dueDay||1,statementDay:25,smsSamples:["SNB","الأهلي","إئتمانية"]}),ue.cards.enbd&&(oe["enbd-card"]={id:"enbd-card",name:"ENBD الإمارات",limit:ue.cards.enbd.limit||0,dueDay:ue.cards.enbd.dueDay||1,statementDay:28,smsSamples:["ENBD","الإمارات","Visa card"]}),ue.cards=oe}ue.bank&&!ue.bankAccounts&&(ue.bankAccounts={"bank-default":{id:"bank-default",name:"حساب البنك",balance:ue.bank.balance||0,smsSamples:["مدى","mada","Alrajhi","الراجحي","Inma","الإنماء","بنك"]}}),ue.transactions&&Array.isArray(ue.transactions)&&(ue.transactions=ue.transactions.map(oe=>oe.paymentMethod==="mada-bank"?{...oe,paymentMethod:"bank-default"}:oe));const D={...fe,...ue};s(D),(async()=>{try{const{firebaseService:oe}=await or(async()=>{const{firebaseService:Se}=await Promise.resolve().then(()=>wm);return{firebaseService:Se}},void 0),he=await oe.saveData("users","main_user",D);he.success?console.log("✅ تم حفظ البيانات المستعادة في Firebase"):console.warn("⚠️ فشل في حفظ البيانات في Firebase:",he.error)}catch(oe){console.error("❌ خطأ في حفظ البيانات في Firebase:",oe)}})(),x({title:"تم الاستعادة بنجاح",body:"<p>تم استعادة بياناتك بنجاح وحفظها في السحابة.</p>",confirmText:"موافق",hideCancel:!0})}catch{x({title:"خطأ في الاستعادة",body:"<p>حدث خطأ أثناء استعادة البيانات. يرجى المحاولة مرة أخرى.</p>",confirmText:"موافق",hideCancel:!0})}}})},W=ue=>ee({isOpen:!0,initialData:ue?t.cards[ue]:null}),de=ue=>Q({isOpen:!0,initialData:ue?t.bankAccounts[ue]:null});if(!n)return T.jsx(SL,{});`${o}${c==="all"?"كل الشهور":new Date(o,c-1).toLocaleString("ar-SA",{month:"long"})}`;const Ee=()=>{switch(p){case"summary":return T.jsx(IL,{calculations:N,categories:t.categories});case"transactions":return T.jsx(bL,{transactions:ae,allTransactions:t.transactions,categories:t.categories,deleteTransaction:R,editTransaction:V,state:t});case"ai-assistant":return T.jsx(wL,{calculations:N,filteredTransactions:ae});case"analysis":return T.jsx(RL,{calculations:N,categories:t.categories,allTransactions:t.transactions});case"budget":return T.jsx(NL,{state:t,setLoading:F,setModal:x});case"investment":return T.jsx(ML,{state:t,setState:s,calculations:N,setModal:x});case"cards":return T.jsx(PL,{state:t,openCardFormModal:W,deleteCard:O});case"bank":return T.jsx(UL,{state:t,setState:s,calculations:N,filteredTransactions:ae,categories:t.categories,setModal:x,openBankAccountFormModal:de,deleteBankAccount:Ye});case"installments":return T.jsx(LL,{state:t,setState:s,filteredTransactions:ae,setModal:x});case"settings":return T.jsx(OL,{state:t,setState:s,setModal:x,setLoading:F,onRestore:ke});default:return T.jsx("div",{children:"Tab not found"})}};return T.jsxs("div",{className:"bg-slate-100 min-h-screen font-sans",children:[T.jsx(vL,{selectedYear:o,selectedMonth:c,onYearChange:l,onMonthChange:ue=>d(ue),onAddTransaction:()=>B({isOpen:!0})}),T.jsxs("main",{className:"container mx-auto px-2 sm:px-4 max-w-7xl mt-8 mb-20",children:[T.jsx(TL,{activeTab:p,setActiveTab:m}),Ee()]}),T.jsx("button",{onClick:()=>B({isOpen:!0}),className:"md:hidden fixed bottom-24 right-4 bg-blue-600 text-white w-14 h-14 rounded-full shadow-lg flex items-center justify-center z-40 text-2xl",children:"+"}),L.isOpen&&T.jsx(qL,{onClose:()=>B({isOpen:!1}),onSave:M,initialData:L.initialData,categories:t.categories,cards:t.cards,bankAccounts:t.bankAccounts}),z.isOpen&&T.jsx(BL,{onClose:()=>ee({isOpen:!1}),onSave:k,initialData:z.initialData}),te.isOpen&&T.jsx(FL,{onClose:()=>Q({isOpen:!1}),onSave:P,initialData:te.initialData}),A&&T.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center",onClick:()=>x(null),children:T.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-4 animate-fade-in",onClick:ue=>ue.stopPropagation(),children:[T.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:A.title}),T.jsx("div",{className:"text-slate-600",dangerouslySetInnerHTML:{__html:A.body}}),T.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[!A.hideCancel&&T.jsx("button",{onClick:()=>x(null),className:"px-4 py-2 bg-slate-200 rounded-lg",children:"إلغاء"}),T.jsx("button",{onClick:()=>{(!A.onConfirm||A.onConfirm()!==!1)&&x(null)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:A.confirmText||"موافق"})]})]})}),v.isLoading&&T.jsxs("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex flex-col items-center justify-center",children:[T.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"}),T.jsx("p",{className:"text-white mt-4",children:v.text||"جاري التحميل..."})]})]})},UC=document.getElementById("root");if(!UC)throw new Error("Could not find root element");const HL=Cb.createRoot(UC);HL.render(T.jsx(gb.StrictMode,{children:T.jsx(zL,{})}));
