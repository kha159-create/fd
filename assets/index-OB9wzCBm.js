(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function w0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var om={exports:{}},Ul={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bv;function ob(){if(bv)return Ul;bv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,l){var c=null;if(l!==void 0&&(c=""+l),o.key!==void 0&&(c=""+o.key),"key"in o){l={};for(var d in o)d!=="key"&&(l[d]=o[d])}else l=o;return o=l.ref,{$$typeof:n,type:s,key:c,ref:o!==void 0?o:null,props:l}}return Ul.Fragment=e,Ul.jsx=t,Ul.jsxs=t,Ul}var xv;function ab(){return xv||(xv=1,om.exports=ob()),om.exports}var T=ab(),am={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wv;function lb(){if(wv)return Re;wv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),A=Symbol.iterator;function x(P){return P===null||typeof P!="object"?null:(P=A&&P[A]||P["@@iterator"],typeof P=="function"?P:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,z={};function ee(P,W,de){this.props=P,this.context=W,this.refs=z,this.updater=de||U}ee.prototype.isReactComponent={},ee.prototype.setState=function(P,W){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,W,"setState")},ee.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function te(){}te.prototype=ee.prototype;function $(P,W,de){this.props=P,this.context=W,this.refs=z,this.updater=de||U}var F=$.prototype=new te;F.constructor=$,B(F,ee.prototype),F.isPureReactComponent=!0;var ne=Array.isArray;function oe(){}var R={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function N(P,W,de){var me=de.ref;return{$$typeof:n,type:P,key:W,ref:me!==void 0?me:null,props:de}}function k(P,W){return N(P.type,W,P.props)}function L(P){return typeof P=="object"&&P!==null&&P.$$typeof===n}function q(P){var W={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(de){return W[de]})}var D=/\/+/g;function je(P,W){return typeof P=="object"&&P!==null&&P.key!=null?q(""+P.key):W.toString(36)}function ft(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(oe,oe):(P.status="pending",P.then(function(W){P.status==="pending"&&(P.status="fulfilled",P.value=W)},function(W){P.status==="pending"&&(P.status="rejected",P.reason=W)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function X(P,W,de,me,Ie){var Me=typeof P;(Me==="undefined"||Me==="boolean")&&(P=null);var Le=!1;if(P===null)Le=!0;else switch(Me){case"bigint":case"string":case"number":Le=!0;break;case"object":switch(P.$$typeof){case n:case e:Le=!0;break;case v:return Le=P._init,X(Le(P._payload),W,de,me,Ie)}}if(Le)return Ie=Ie(P),Le=me===""?"."+je(P,0):me,ne(Ie)?(de="",Le!=null&&(de=Le.replace(D,"$&/")+"/"),X(Ie,W,de,"",function(Ee){return Ee})):Ie!=null&&(L(Ie)&&(Ie=k(Ie,de+(Ie.key==null||P&&P.key===Ie.key?"":(""+Ie.key).replace(D,"$&/")+"/")+Le)),W.push(Ie)),1;Le=0;var Tt=me===""?".":me+":";if(ne(P))for(var ot=0;ot<P.length;ot++)me=P[ot],Me=Tt+je(me,ot),Le+=X(me,W,de,Me,Ie);else if(ot=x(P),typeof ot=="function")for(P=ot.call(P),ot=0;!(me=P.next()).done;)me=me.value,Me=Tt+je(me,ot++),Le+=X(me,W,de,Me,Ie);else if(Me==="object"){if(typeof P.then=="function")return X(ft(P),W,de,me,Ie);throw W=String(P),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Le}function ce(P,W,de){if(P==null)return P;var me=[],Ie=0;return X(P,me,"","",function(Me){return W.call(de,Me,Ie++)}),me}function ae(P){if(P._status===-1){var W=P._result;W=W(),W.then(function(de){(P._status===0||P._status===-1)&&(P._status=1,P._result=de)},function(de){(P._status===0||P._status===-1)&&(P._status=2,P._result=de)}),P._status===-1&&(P._status=0,P._result=W)}if(P._status===1)return P._result.default;throw P._result}var fe=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},he={map:ce,forEach:function(P,W,de){ce(P,function(){W.apply(this,arguments)},de)},count:function(P){var W=0;return ce(P,function(){W++}),W},toArray:function(P){return ce(P,function(W){return W})||[]},only:function(P){if(!L(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Re.Activity=E,Re.Children=he,Re.Component=ee,Re.Fragment=t,Re.Profiler=o,Re.PureComponent=$,Re.StrictMode=s,Re.Suspense=p,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Re.__COMPILER_RUNTIME={__proto__:null,c:function(P){return R.H.useMemoCache(P)}},Re.cache=function(P){return function(){return P.apply(null,arguments)}},Re.cacheSignal=function(){return null},Re.cloneElement=function(P,W,de){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var me=B({},P.props),Ie=P.key;if(W!=null)for(Me in W.key!==void 0&&(Ie=""+W.key),W)!M.call(W,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&W.ref===void 0||(me[Me]=W[Me]);var Me=arguments.length-2;if(Me===1)me.children=de;else if(1<Me){for(var Le=Array(Me),Tt=0;Tt<Me;Tt++)Le[Tt]=arguments[Tt+2];me.children=Le}return N(P.type,Ie,me)},Re.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:l,_context:P},P},Re.createElement=function(P,W,de){var me,Ie={},Me=null;if(W!=null)for(me in W.key!==void 0&&(Me=""+W.key),W)M.call(W,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(Ie[me]=W[me]);var Le=arguments.length-2;if(Le===1)Ie.children=de;else if(1<Le){for(var Tt=Array(Le),ot=0;ot<Le;ot++)Tt[ot]=arguments[ot+2];Ie.children=Tt}if(P&&P.defaultProps)for(me in Le=P.defaultProps,Le)Ie[me]===void 0&&(Ie[me]=Le[me]);return N(P,Me,Ie)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(P){return{$$typeof:d,render:P}},Re.isValidElement=L,Re.lazy=function(P){return{$$typeof:v,_payload:{_status:-1,_result:P},_init:ae}},Re.memo=function(P,W){return{$$typeof:m,type:P,compare:W===void 0?null:W}},Re.startTransition=function(P){var W=R.T,de={};R.T=de;try{var me=P(),Ie=R.S;Ie!==null&&Ie(de,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(oe,fe)}catch(Me){fe(Me)}finally{W!==null&&de.types!==null&&(W.types=de.types),R.T=W}},Re.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Re.use=function(P){return R.H.use(P)},Re.useActionState=function(P,W,de){return R.H.useActionState(P,W,de)},Re.useCallback=function(P,W){return R.H.useCallback(P,W)},Re.useContext=function(P){return R.H.useContext(P)},Re.useDebugValue=function(){},Re.useDeferredValue=function(P,W){return R.H.useDeferredValue(P,W)},Re.useEffect=function(P,W){return R.H.useEffect(P,W)},Re.useEffectEvent=function(P){return R.H.useEffectEvent(P)},Re.useId=function(){return R.H.useId()},Re.useImperativeHandle=function(P,W,de){return R.H.useImperativeHandle(P,W,de)},Re.useInsertionEffect=function(P,W){return R.H.useInsertionEffect(P,W)},Re.useLayoutEffect=function(P,W){return R.H.useLayoutEffect(P,W)},Re.useMemo=function(P,W){return R.H.useMemo(P,W)},Re.useOptimistic=function(P,W){return R.H.useOptimistic(P,W)},Re.useReducer=function(P,W,de){return R.H.useReducer(P,W,de)},Re.useRef=function(P){return R.H.useRef(P)},Re.useState=function(P){return R.H.useState(P)},Re.useSyncExternalStore=function(P,W,de){return R.H.useSyncExternalStore(P,W,de)},Re.useTransition=function(){return R.H.useTransition()},Re.version="19.2.0",Re}var Rv;function cp(){return Rv||(Rv=1,am.exports=lb()),am.exports}var _e=cp();const ub=w0(_e);var lm={exports:{}},Ll={},um={exports:{}},cm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nv;function cb(){return Nv||(Nv=1,(function(n){function e(X,ce){var ae=X.length;X.push(ce);e:for(;0<ae;){var fe=ae-1>>>1,he=X[fe];if(0<o(he,ce))X[fe]=ce,X[ae]=he,ae=fe;else break e}}function t(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var ce=X[0],ae=X.pop();if(ae!==ce){X[0]=ae;e:for(var fe=0,he=X.length,P=he>>>1;fe<P;){var W=2*(fe+1)-1,de=X[W],me=W+1,Ie=X[me];if(0>o(de,ae))me<he&&0>o(Ie,de)?(X[fe]=Ie,X[me]=ae,fe=me):(X[fe]=de,X[W]=ae,fe=W);else if(me<he&&0>o(Ie,ae))X[fe]=Ie,X[me]=ae,fe=me;else break e}}return ce}function o(X,ce){var ae=X.sortIndex-ce.sortIndex;return ae!==0?ae:X.id-ce.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],m=[],v=1,E=null,A=3,x=!1,U=!1,B=!1,z=!1,ee=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function F(X){for(var ce=t(m);ce!==null;){if(ce.callback===null)s(m);else if(ce.startTime<=X)s(m),ce.sortIndex=ce.expirationTime,e(p,ce);else break;ce=t(m)}}function ne(X){if(B=!1,F(X),!U)if(t(p)!==null)U=!0,oe||(oe=!0,q());else{var ce=t(m);ce!==null&&ft(ne,ce.startTime-X)}}var oe=!1,R=-1,M=5,N=-1;function k(){return z?!0:!(n.unstable_now()-N<M)}function L(){if(z=!1,oe){var X=n.unstable_now();N=X;var ce=!0;try{e:{U=!1,B&&(B=!1,te(R),R=-1),x=!0;var ae=A;try{t:{for(F(X),E=t(p);E!==null&&!(E.expirationTime>X&&k());){var fe=E.callback;if(typeof fe=="function"){E.callback=null,A=E.priorityLevel;var he=fe(E.expirationTime<=X);if(X=n.unstable_now(),typeof he=="function"){E.callback=he,F(X),ce=!0;break t}E===t(p)&&s(p),F(X)}else s(p);E=t(p)}if(E!==null)ce=!0;else{var P=t(m);P!==null&&ft(ne,P.startTime-X),ce=!1}}break e}finally{E=null,A=ae,x=!1}ce=void 0}}finally{ce?q():oe=!1}}}var q;if(typeof $=="function")q=function(){$(L)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,je=D.port2;D.port1.onmessage=L,q=function(){je.postMessage(null)}}else q=function(){ee(L,0)};function ft(X,ce){R=ee(function(){X(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return A},n.unstable_next=function(X){switch(A){case 1:case 2:case 3:var ce=3;break;default:ce=A}var ae=A;A=ce;try{return X()}finally{A=ae}},n.unstable_requestPaint=function(){z=!0},n.unstable_runWithPriority=function(X,ce){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ae=A;A=X;try{return ce()}finally{A=ae}},n.unstable_scheduleCallback=function(X,ce,ae){var fe=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?fe+ae:fe):ae=fe,X){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=ae+he,X={id:v++,callback:ce,priorityLevel:X,startTime:ae,expirationTime:he,sortIndex:-1},ae>fe?(X.sortIndex=ae,e(m,X),t(p)===null&&X===t(m)&&(B?(te(R),R=-1):B=!0,ft(ne,ae-fe))):(X.sortIndex=he,e(p,X),U||x||(U=!0,oe||(oe=!0,q()))),X},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(X){var ce=A;return function(){var ae=A;A=ce;try{return X.apply(this,arguments)}finally{A=ae}}}})(cm)),cm}var Mv;function db(){return Mv||(Mv=1,um.exports=cb()),um.exports}var dm={exports:{}},nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dv;function fb(){if(Dv)return nn;Dv=1;var n=cp();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(p,m,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:p,containerInfo:m,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,nn.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(p,m,null,v)},nn.flushSync=function(p){var m=c.T,v=s.p;try{if(c.T=null,s.p=2,p)return p()}finally{c.T=m,s.p=v,s.d.f()}},nn.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(p,m))},nn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},nn.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,E=d(v,m.crossOrigin),A=typeof m.integrity=="string"?m.integrity:void 0,x=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:E,integrity:A,fetchPriority:x}):v==="script"&&s.d.X(p,{crossOrigin:E,integrity:A,fetchPriority:x,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},nn.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=d(m.as,m.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(p)},nn.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,E=d(v,m.crossOrigin);s.d.L(p,v,{crossOrigin:E,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},nn.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=d(m.as,m.crossOrigin);s.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(p)},nn.requestFormReset=function(p){s.d.r(p)},nn.unstable_batchedUpdates=function(p,m){return p(m)},nn.useFormState=function(p,m,v){return c.H.useFormState(p,m,v)},nn.useFormStatus=function(){return c.H.useHostTransitionStatus()},nn.version="19.2.0",nn}var Pv;function hb(){if(Pv)return dm.exports;Pv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),dm.exports=fb(),dm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function mb(){if(Vv)return Ll;Vv=1;var n=db(),e=cp(),t=hb();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,a=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(a=r.return),i=r.return;while(i)}return r.tag===3?a:null}function c(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function p(i){if(l(i)!==i)throw Error(s(188))}function m(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var a=i,u=r;;){var y=a.return;if(y===null)break;var _=y.alternate;if(_===null){if(u=y.return,u!==null){a=u;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===a)return p(y),i;if(_===u)return p(y),r;_=_.sibling}throw Error(s(188))}if(a.return!==u.return)a=y,u=_;else{for(var C=!1,b=y.child;b;){if(b===a){C=!0,a=y,u=_;break}if(b===u){C=!0,u=y,a=_;break}b=b.sibling}if(!C){for(b=_.child;b;){if(b===a){C=!0,a=_,u=y;break}if(b===u){C=!0,u=_,a=y;break}b=b.sibling}if(!C)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:r}function v(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=v(i),r!==null)return r;i=i.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),$=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function q(i){return i===null||typeof i!="object"?null:(i=L&&i[L]||i["@@iterator"],typeof i=="function"?i:null)}var D=Symbol.for("react.client.reference");function je(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===D?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case B:return"Fragment";case ee:return"Profiler";case z:return"StrictMode";case ne:return"Suspense";case oe:return"SuspenseList";case N:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case U:return"Portal";case $:return i.displayName||"Context";case te:return(i._context.displayName||"Context")+".Consumer";case F:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case R:return r=i.displayName||null,r!==null?r:je(i.type)||"Memo";case M:r=i._payload,i=i._init;try{return je(i(r))}catch{}}return null}var ft=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},fe=[],he=-1;function P(i){return{current:i}}function W(i){0>he||(i.current=fe[he],fe[he]=null,he--)}function de(i,r){he++,fe[he]=i.current,i.current=r}var me=P(null),Ie=P(null),Me=P(null),Le=P(null);function Tt(i,r){switch(de(Me,r),de(Ie,i),de(me,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?$_(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=$_(r),i=Q_(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}W(me),de(me,i)}function ot(){W(me),W(Ie),W(Me)}function Ee(i){i.memoizedState!==null&&de(Le,i);var r=me.current,a=Q_(r,i.type);r!==a&&(de(Ie,i),de(me,a))}function Et(i){Ie.current===i&&(W(me),W(Ie)),Le.current===i&&(W(Le),Dl._currentValue=ae)}var fi,Sn;function pt(i){if(fi===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);fi=r&&r[1]||"",Sn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fi+i+Sn}var hn=!1;function vr(i,r){if(!i||hn)return"";hn=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(Q){var K=Q}Reflect.construct(i,[],se)}else{try{se.call()}catch(Q){K=Q}i.call(se.prototype)}}else{try{throw Error()}catch(Q){K=Q}(se=i())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(Q){if(Q&&K&&typeof Q.stack=="string")return[Q.stack,K.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=u.DetermineComponentFrameRoot(),C=_[0],b=_[1];if(C&&b){var V=C.split(`
`),J=b.split(`
`);for(y=u=0;u<V.length&&!V[u].includes("DetermineComponentFrameRoot");)u++;for(;y<J.length&&!J[y].includes("DetermineComponentFrameRoot");)y++;if(u===V.length||y===J.length)for(u=V.length-1,y=J.length-1;1<=u&&0<=y&&V[u]!==J[y];)y--;for(;1<=u&&0<=y;u--,y--)if(V[u]!==J[y]){if(u!==1||y!==1)do if(u--,y--,0>y||V[u]!==J[y]){var Z=`
`+V[u].replace(" at new "," at ");return i.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",i.displayName)),Z}while(1<=u&&0<=y);break}}}finally{hn=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?pt(a):""}function Pa(i,r){switch(i.tag){case 26:case 27:case 5:return pt(i.type);case 16:return pt("Lazy");case 13:return i.child!==r&&r!==null?pt("Suspense Fallback"):pt("Suspense");case 19:return pt("SuspenseList");case 0:case 15:return vr(i.type,!1);case 11:return vr(i.type.render,!1);case 1:return vr(i.type,!0);case 31:return pt("Activity");default:return""}}function Va(i){try{var r="",a=null;do r+=Pa(i,a),a=i,i=i.return;while(i);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var xt=Object.prototype.hasOwnProperty,qt=n.unstable_scheduleCallback,Es=n.unstable_cancelCallback,lf=n.unstable_shouldYield,gu=n.unstable_requestPaint,un=n.unstable_now,Tr=n.unstable_getCurrentPriorityLevel,ka=n.unstable_ImmediatePriority,Ua=n.unstable_UserBlockingPriority,Ss=n.unstable_NormalPriority,uf=n.unstable_LowPriority,yu=n.unstable_IdlePriority,_u=n.log,vu=n.unstable_setDisableYieldValue,jn=null,$t=null;function Pn(i){if(typeof _u=="function"&&vu(i),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(jn,i)}catch{}}var St=Math.clz32?Math.clz32:Eu,Tu=Math.log,fo=Math.LN2;function Eu(i){return i>>>=0,i===0?32:31-(Tu(i)/fo|0)|0}var hi=256,Er=262144,wt=4194304;function mi(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function pi(i,r,a){var u=i.pendingLanes;if(u===0)return 0;var y=0,_=i.suspendedLanes,C=i.pingedLanes;i=i.warmLanes;var b=u&134217727;return b!==0?(u=b&~_,u!==0?y=mi(u):(C&=b,C!==0?y=mi(C):a||(a=b&~i,a!==0&&(y=mi(a))))):(b=u&~_,b!==0?y=mi(b):C!==0?y=mi(C):a||(a=u&~i,a!==0&&(y=mi(a)))),y===0?0:r!==0&&r!==y&&(r&_)===0&&(_=y&-y,a=r&-r,_>=a||_===32&&(a&4194048)!==0)?r:y}function $n(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function cf(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Su(){var i=wt;return wt<<=1,(wt&62914560)===0&&(wt=4194304),i}function gi(i){for(var r=[],a=0;31>a;a++)r.push(i);return r}function Sr(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function df(i,r,a,u,y,_){var C=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var b=i.entanglements,V=i.expirationTimes,J=i.hiddenUpdates;for(a=C&~a;0<a;){var Z=31-St(a),se=1<<Z;b[Z]=0,V[Z]=-1;var K=J[Z];if(K!==null)for(J[Z]=null,Z=0;Z<K.length;Z++){var Q=K[Z];Q!==null&&(Q.lane&=-536870913)}a&=~se}u!==0&&Ar(i,u,0),_!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=_&~(C&~r))}function Ar(i,r,a){i.pendingLanes|=r,i.suspendedLanes&=~r;var u=31-St(r);i.entangledLanes|=r,i.entanglements[u]=i.entanglements[u]|1073741824|a&261930}function La(i,r){var a=i.entangledLanes|=r;for(i=i.entanglements;a;){var u=31-St(a),y=1<<u;y&r|i[u]&r&&(i[u]|=r),a&=~y}}function Oa(i,r){var a=r&-r;return a=(a&42)!==0?1:Cr(a),(a&(i.suspendedLanes|r))!==0?0:a}function Cr(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Hi(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Au(){var i=ce.p;return i!==0?i:(i=window.event,i===void 0?32:vv(i.type))}function Qn(i,r){var a=ce.p;try{return ce.p=i,r()}finally{ce.p=a}}var Xn=Math.random().toString(36).slice(2),Rt="__reactFiber$"+Xn,Ht="__reactProps$"+Xn,yi="__reactContainer$"+Xn,ho="__reactEvents$"+Xn,ff="__reactListeners$"+Xn,Cu="__reactHandles$"+Xn,Iu="__reactResources$"+Xn,_i="__reactMarker$"+Xn;function mo(i){delete i[Rt],delete i[Ht],delete i[ho],delete i[ff],delete i[Cu]}function vi(i){var r=i[Rt];if(r)return r;for(var a=i.parentNode;a;){if(r=a[yi]||a[Rt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(i=iv(i);i!==null;){if(a=i[Rt])return a;i=iv(i)}return r}i=a,a=i.parentNode}return null}function Vn(i){if(i=i[Rt]||i[yi]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function An(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function Ti(i){var r=i[Iu];return r||(r=i[Iu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Nt(i){i[_i]=!0}var qa=new Set,Ba={};function Ei(i,r){Si(i,r),Si(i+"Capture",r)}function Si(i,r){for(Ba[i]=r,i=0;i<r.length;i++)qa.add(r[i])}var Fa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),za={},Ha={};function bu(i){return xt.call(Ha,i)?!0:xt.call(za,i)?!1:Fa.test(i)?Ha[i]=!0:(za[i]=!0,!1)}function po(i,r,a){if(bu(r))if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+a)}}function Cn(i,r,a){if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+a)}}function Mt(i,r,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(r,a,""+u)}}function Gt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function As(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ga(i,r,a){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var y=u.get,_=u.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return y.call(this)},set:function(C){a=""+C,_.call(this,C)}}),Object.defineProperty(i,r,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(C){a=""+C},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function We(i){if(!i._valueTracker){var r=As(i)?"checked":"value";i._valueTracker=Ga(i,r,""+i[r])}}function Ir(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var a=r.getValue(),u="";return i&&(u=As(i)?i.checked?"true":"false":i.value),i=u,i!==a?(r.setValue(i),!0):!1}function Ai(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var br=/[\n"\\]/g;function mn(i){return i.replace(br,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function go(i,r,a,u,y,_,C,b){i.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.type=C:i.removeAttribute("type"),r!=null?C==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+Gt(r)):i.value!==""+Gt(r)&&(i.value=""+Gt(r)):C!=="submit"&&C!=="reset"||i.removeAttribute("value"),r!=null?Ya(i,C,Gt(r)):a!=null?Ya(i,C,Gt(a)):u!=null&&i.removeAttribute("value"),y==null&&_!=null&&(i.defaultChecked=!!_),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.name=""+Gt(b):i.removeAttribute("name")}function xu(i,r,a,u,y,_,C,b){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),r!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){We(i);return}a=a!=null?""+Gt(a):"",r=r!=null?""+Gt(r):a,b||r===i.value||(i.value=r),i.defaultValue=r}u=u??y,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=b?i.checked:!!u,i.defaultChecked=!!u,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(i.name=C),We(i)}function Ya(i,r,a){r==="number"&&Ai(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function Cs(i,r,a,u){if(i=i.options,r){r={};for(var y=0;y<a.length;y++)r["$"+a[y]]=!0;for(a=0;a<i.length;a++)y=r.hasOwnProperty("$"+i[a].value),i[a].selected!==y&&(i[a].selected=y),y&&u&&(i[a].defaultSelected=!0)}else{for(a=""+Gt(a),r=null,y=0;y<i.length;y++){if(i[y].value===a){i[y].selected=!0,u&&(i[y].defaultSelected=!0);return}r!==null||i[y].disabled||(r=i[y])}r!==null&&(r.selected=!0)}}function wu(i,r,a){if(r!=null&&(r=""+Gt(r),r!==i.value&&(i.value=r),a==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=a!=null?""+Gt(a):""}function Is(i,r,a,u){if(r==null){if(u!=null){if(a!=null)throw Error(s(92));if(ft(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),r=a}a=Gt(r),i.defaultValue=a,u=i.textContent,u===a&&u!==""&&u!==null&&(i.value=u),We(i)}function pn(i,r){if(r){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=r;return}}i.textContent=r}var Ru=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ja(i,r,a){var u=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":u?i.setProperty(r,a):typeof a!="number"||a===0||Ru.has(r)?r==="float"?i.cssFloat=a:i[r]=(""+a).trim():i[r]=a+"px"}function Ka(i,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var y in r)u=r[y],r.hasOwnProperty(y)&&a[y]!==u&&Ja(i,y,u)}else for(var _ in r)r.hasOwnProperty(_)&&Ja(i,_,r[_])}function yo(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _o(i){return bs.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Wn(){}var ja=null;function kn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var xs=null,Ci=null;function xr(i){var r=Vn(i);if(r&&(i=r.stateNode)){var a=i[Ht]||null;e:switch(i=r.stateNode,r.type){case"input":if(go(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+mn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var u=a[r];if(u!==i&&u.form===i.form){var y=u[Ht]||null;if(!y)throw Error(s(90));go(u,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<a.length;r++)u=a[r],u.form===i.form&&Ir(u)}break e;case"textarea":wu(i,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Cs(i,!!a.multiple,r,!1)}}}var vo=!1;function ws(i,r,a){if(vo)return i(r,a);vo=!0;try{var u=i(r);return u}finally{if(vo=!1,(xs!==null||Ci!==null)&&(Ac(),xs&&(r=xs,i=Ci,Ci=xs=null,xr(r),i)))for(r=0;r<i.length;r++)xr(i[r])}}function Zn(i,r){var a=i.stateNode;if(a===null)return null;var u=a[Ht]||null;if(u===null)return null;a=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wr=!1;if(Un)try{var tt={};Object.defineProperty(tt,"passive",{get:function(){wr=!0}}),window.addEventListener("test",tt,tt),window.removeEventListener("test",tt,tt)}catch{wr=!1}var Ii=null,$a=null,Rr=null;function Qa(){if(Rr)return Rr;var i,r=$a,a=r.length,u,y="value"in Ii?Ii.value:Ii.textContent,_=y.length;for(i=0;i<a&&r[i]===y[i];i++);var C=a-i;for(u=1;u<=C&&r[a-u]===y[_-u];u++);return Rr=y.slice(i,1<u?1-u:void 0)}function Nr(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Gi(){return!0}function ei(){return!1}function Qt(i){function r(a,u,y,_,C){this._reactName=a,this._targetInst=y,this.type=u,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var b in i)i.hasOwnProperty(b)&&(a=i[b],this[b]=a?a(_):_[b]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Gi:ei,this.isPropagationStopped=ei,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Gi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Gi)},persist:function(){},isPersistent:Gi}),r}var Yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bi=Qt(Yi),Rs=E({},Yi,{view:0,detail:0}),Xa=Qt(Rs),Ns,To,xi,Eo=E({},Rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ms,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==xi&&(xi&&i.type==="mousemove"?(Ns=i.screenX-xi.screenX,To=i.screenY-xi.screenY):To=Ns=0,xi=i),Ns)},movementY:function(i){return"movementY"in i?i.movementY:To}}),Wa=Qt(Eo),Mr=E({},Eo,{dataTransfer:0}),Mu=Qt(Mr),Du=E({},Rs,{relatedTarget:0}),Dr=Qt(Du),Za=E({},Yi,{animationName:0,elapsedTime:0,pseudoElement:0}),Pu=Qt(Za),So=E({},Yi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Vu=Qt(So),ku=E({},Yi,{data:0}),wi=Qt(ku),Uu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ou={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qu(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=Ou[i])?!!r[i]:!1}function Ms(){return qu}var cn=E({},Rs,{key:function(i){if(i.key){var r=Uu[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Nr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Lu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ms,charCode:function(i){return i.type==="keypress"?Nr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Nr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Bu=Qt(cn),Fu=E({},Eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ji=Qt(Fu),h=E({},Rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ms}),S=Qt(h),I=E({},Yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=Qt(I),G=E({},Eo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),j=Qt(G),ue=E({},Yi,{newState:0,oldState:0}),De=Qt(ue),At=[9,13,27,32],$e=Un&&"CompositionEvent"in window,ht=null;Un&&"documentMode"in document&&(ht=document.documentMode);var Ln=Un&&"TextEvent"in window&&!ht,Ri=Un&&(!$e||ht&&8<ht&&11>=ht),ti=" ",ni=!1;function Pr(i,r){switch(i){case"keyup":return At.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ao(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Co=!1;function NC(i,r){switch(i){case"compositionend":return Ao(r);case"keypress":return r.which!==32?null:(ni=!0,ti);case"textInput":return i=r.data,i===ti&&ni?null:i;default:return null}}function MC(i,r){if(Co)return i==="compositionend"||!$e&&Pr(i,r)?(i=Qa(),Rr=$a=Ii=null,Co=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ri&&r.locale!=="ko"?null:r.data;default:return null}}var DC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function og(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!DC[i.type]:r==="textarea"}function ag(i,r,a,u){xs?Ci?Ci.push(u):Ci=[u]:xs=u,r=Nc(r,"onChange"),0<r.length&&(a=new bi("onChange","change",null,a,u),i.push({event:a,listeners:r}))}var el=null,tl=null;function PC(i){H_(i,0)}function zu(i){var r=An(i);if(Ir(r))return i}function lg(i,r){if(i==="change")return r}var ug=!1;if(Un){var hf;if(Un){var mf="oninput"in document;if(!mf){var cg=document.createElement("div");cg.setAttribute("oninput","return;"),mf=typeof cg.oninput=="function"}hf=mf}else hf=!1;ug=hf&&(!document.documentMode||9<document.documentMode)}function dg(){el&&(el.detachEvent("onpropertychange",fg),tl=el=null)}function fg(i){if(i.propertyName==="value"&&zu(tl)){var r=[];ag(r,tl,i,kn(i)),ws(PC,r)}}function VC(i,r,a){i==="focusin"?(dg(),el=r,tl=a,el.attachEvent("onpropertychange",fg)):i==="focusout"&&dg()}function kC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return zu(tl)}function UC(i,r){if(i==="click")return zu(r)}function LC(i,r){if(i==="input"||i==="change")return zu(r)}function OC(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var In=typeof Object.is=="function"?Object.is:OC;function nl(i,r){if(In(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var a=Object.keys(i),u=Object.keys(r);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var y=a[u];if(!xt.call(r,y)||!In(i[y],r[y]))return!1}return!0}function hg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function mg(i,r){var a=hg(i);i=0;for(var u;a;){if(a.nodeType===3){if(u=i+a.textContent.length,i<=r&&u>=r)return{node:a,offset:r-i};i=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=hg(a)}}function pg(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?pg(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function gg(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Ai(i.document);r instanceof i.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)i=r.contentWindow;else break;r=Ai(i.document)}return r}function pf(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var qC=Un&&"documentMode"in document&&11>=document.documentMode,Io=null,gf=null,il=null,yf=!1;function yg(i,r,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;yf||Io==null||Io!==Ai(u)||(u=Io,"selectionStart"in u&&pf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),il&&nl(il,u)||(il=u,u=Nc(gf,"onSelect"),0<u.length&&(r=new bi("onSelect","select",null,r,a),i.push({event:r,listeners:u}),r.target=Io)))}function Vr(i,r){var a={};return a[i.toLowerCase()]=r.toLowerCase(),a["Webkit"+i]="webkit"+r,a["Moz"+i]="moz"+r,a}var bo={animationend:Vr("Animation","AnimationEnd"),animationiteration:Vr("Animation","AnimationIteration"),animationstart:Vr("Animation","AnimationStart"),transitionrun:Vr("Transition","TransitionRun"),transitionstart:Vr("Transition","TransitionStart"),transitioncancel:Vr("Transition","TransitionCancel"),transitionend:Vr("Transition","TransitionEnd")},_f={},_g={};Un&&(_g=document.createElement("div").style,"AnimationEvent"in window||(delete bo.animationend.animation,delete bo.animationiteration.animation,delete bo.animationstart.animation),"TransitionEvent"in window||delete bo.transitionend.transition);function kr(i){if(_f[i])return _f[i];if(!bo[i])return i;var r=bo[i],a;for(a in r)if(r.hasOwnProperty(a)&&a in _g)return _f[i]=r[a];return i}var vg=kr("animationend"),Tg=kr("animationiteration"),Eg=kr("animationstart"),BC=kr("transitionrun"),FC=kr("transitionstart"),zC=kr("transitioncancel"),Sg=kr("transitionend"),Ag=new Map,vf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vf.push("scrollEnd");function ii(i,r){Ag.set(i,r),Ei(r,[i])}var Hu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},On=[],xo=0,Tf=0;function Gu(){for(var i=xo,r=Tf=xo=0;r<i;){var a=On[r];On[r++]=null;var u=On[r];On[r++]=null;var y=On[r];On[r++]=null;var _=On[r];if(On[r++]=null,u!==null&&y!==null){var C=u.pending;C===null?y.next=y:(y.next=C.next,C.next=y),u.pending=y}_!==0&&Cg(a,y,_)}}function Yu(i,r,a,u){On[xo++]=i,On[xo++]=r,On[xo++]=a,On[xo++]=u,Tf|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Ef(i,r,a,u){return Yu(i,r,a,u),Ju(i)}function Ur(i,r){return Yu(i,null,null,r),Ju(i)}function Cg(i,r,a){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a);for(var y=!1,_=i.return;_!==null;)_.childLanes|=a,u=_.alternate,u!==null&&(u.childLanes|=a),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(y=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,y&&r!==null&&(y=31-St(a),i=_.hiddenUpdates,u=i[y],u===null?i[y]=[r]:u.push(r),r.lane=a|536870912),_):null}function Ju(i){if(50<Il)throw Il=0,Nh=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var wo={};function HC(i,r,a,u){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(i,r,a,u){return new HC(i,r,a,u)}function Sf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ki(i,r){var a=i.alternate;return a===null?(a=bn(i.tag,r,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=r,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,r=i.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Ig(i,r){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,r=a.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Ku(i,r,a,u,y,_){var C=0;if(u=i,typeof i=="function")Sf(i)&&(C=1);else if(typeof i=="string")C=jI(i,a,me.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case N:return i=bn(31,a,r,y),i.elementType=N,i.lanes=_,i;case B:return Lr(a.children,y,_,r);case z:C=8,y|=24;break;case ee:return i=bn(12,a,r,y|2),i.elementType=ee,i.lanes=_,i;case ne:return i=bn(13,a,r,y),i.elementType=ne,i.lanes=_,i;case oe:return i=bn(19,a,r,y),i.elementType=oe,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case $:C=10;break e;case te:C=9;break e;case F:C=11;break e;case R:C=14;break e;case M:C=16,u=null;break e}C=29,a=Error(s(130,i===null?"null":typeof i,"")),u=null}return r=bn(C,a,r,y),r.elementType=i,r.type=u,r.lanes=_,r}function Lr(i,r,a,u){return i=bn(7,i,u,r),i.lanes=a,i}function Af(i,r,a){return i=bn(6,i,null,r),i.lanes=a,i}function bg(i){var r=bn(18,null,null,0);return r.stateNode=i,r}function Cf(i,r,a){return r=bn(4,i.children!==null?i.children:[],i.key,r),r.lanes=a,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var xg=new WeakMap;function qn(i,r){if(typeof i=="object"&&i!==null){var a=xg.get(i);return a!==void 0?a:(r={value:i,source:r,stack:Va(r)},xg.set(i,r),r)}return{value:i,source:r,stack:Va(r)}}var Ro=[],No=0,ju=null,sl=0,Bn=[],Fn=0,Ds=null,Ni=1,Mi="";function ji(i,r){Ro[No++]=sl,Ro[No++]=ju,ju=i,sl=r}function wg(i,r,a){Bn[Fn++]=Ni,Bn[Fn++]=Mi,Bn[Fn++]=Ds,Ds=i;var u=Ni;i=Mi;var y=32-St(u)-1;u&=~(1<<y),a+=1;var _=32-St(r)+y;if(30<_){var C=y-y%5;_=(u&(1<<C)-1).toString(32),u>>=C,y-=C,Ni=1<<32-St(r)+y|a<<y|u,Mi=_+i}else Ni=1<<_|a<<y|u,Mi=i}function If(i){i.return!==null&&(ji(i,1),wg(i,1,0))}function bf(i){for(;i===ju;)ju=Ro[--No],Ro[No]=null,sl=Ro[--No],Ro[No]=null;for(;i===Ds;)Ds=Bn[--Fn],Bn[Fn]=null,Mi=Bn[--Fn],Bn[Fn]=null,Ni=Bn[--Fn],Bn[Fn]=null}function Rg(i,r){Bn[Fn++]=Ni,Bn[Fn++]=Mi,Bn[Fn++]=Ds,Ni=r.id,Mi=r.overflow,Ds=i}var Xt=null,lt=null,He=!1,Ps=null,zn=!1,xf=Error(s(519));function Vs(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw rl(qn(r,i)),xf}function Ng(i){var r=i.stateNode,a=i.type,u=i.memoizedProps;switch(r[Rt]=i,r[Ht]=u,a){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(a=0;a<xl.length;a++)Ue(xl[a],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":Ue("invalid",r),xu(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ue("invalid",r);break;case"textarea":Ue("invalid",r),Is(r,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||u.suppressHydrationWarning===!0||K_(r.textContent,a)?(u.popover!=null&&(Ue("beforetoggle",r),Ue("toggle",r)),u.onScroll!=null&&Ue("scroll",r),u.onScrollEnd!=null&&Ue("scrollend",r),u.onClick!=null&&(r.onclick=Wn),r=!0):r=!1,r||Vs(i,!0)}function Mg(i){for(Xt=i.return;Xt;)switch(Xt.tag){case 5:case 31:case 13:zn=!1;return;case 27:case 3:zn=!0;return;default:Xt=Xt.return}}function Mo(i){if(i!==Xt)return!1;if(!He)return Mg(i),He=!0,!1;var r=i.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||Yh(i.type,i.memoizedProps)),a=!a),a&&lt&&Vs(i),Mg(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));lt=nv(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));lt=nv(i)}else r===27?(r=lt,js(i.type)?(i=Qh,Qh=null,lt=i):lt=r):lt=Xt?Gn(i.stateNode.nextSibling):null;return!0}function Or(){lt=Xt=null,He=!1}function wf(){var i=Ps;return i!==null&&(vn===null?vn=i:vn.push.apply(vn,i),Ps=null),i}function rl(i){Ps===null?Ps=[i]:Ps.push(i)}var Rf=P(null),qr=null,$i=null;function ks(i,r,a){de(Rf,r._currentValue),r._currentValue=a}function Qi(i){i._currentValue=Rf.current,W(Rf)}function Nf(i,r,a){for(;i!==null;){var u=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),i===a)break;i=i.return}}function Mf(i,r,a,u){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var _=y.dependencies;if(_!==null){var C=y.child;_=_.firstContext;e:for(;_!==null;){var b=_;_=y;for(var V=0;V<r.length;V++)if(b.context===r[V]){_.lanes|=a,b=_.alternate,b!==null&&(b.lanes|=a),Nf(_.return,a,i),u||(C=null);break e}_=b.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(s(341));C.lanes|=a,_=C.alternate,_!==null&&(_.lanes|=a),Nf(C,a,i),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===i){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function Do(i,r,a,u){i=null;for(var y=r,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(s(387));if(C=C.memoizedProps,C!==null){var b=y.type;In(y.pendingProps.value,C.value)||(i!==null?i.push(b):i=[b])}}else if(y===Le.current){if(C=y.alternate,C===null)throw Error(s(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(Dl):i=[Dl])}y=y.return}i!==null&&Mf(r,i,a,u),r.flags|=262144}function $u(i){for(i=i.firstContext;i!==null;){if(!In(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Br(i){qr=i,$i=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Wt(i){return Dg(qr,i)}function Qu(i,r){return qr===null&&Br(i),Dg(i,r)}function Dg(i,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},$i===null){if(i===null)throw Error(s(308));$i=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else $i=$i.next=r;return a}var GC=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(a,u){i.push(u)}};this.abort=function(){r.aborted=!0,i.forEach(function(a){return a()})}},YC=n.unstable_scheduleCallback,JC=n.unstable_NormalPriority,Dt={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Df(){return{controller:new GC,data:new Map,refCount:0}}function ol(i){i.refCount--,i.refCount===0&&YC(JC,function(){i.controller.abort()})}var al=null,Pf=0,Po=0,Vo=null;function KC(i,r){if(al===null){var a=al=[];Pf=0,Po=Uh(),Vo={status:"pending",value:void 0,then:function(u){a.push(u)}}}return Pf++,r.then(Pg,Pg),r}function Pg(){if(--Pf===0&&al!==null){Vo!==null&&(Vo.status="fulfilled");var i=al;al=null,Po=0,Vo=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function jC(i,r){var a=[],u={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return i.then(function(){u.status="fulfilled",u.value=r;for(var y=0;y<a.length;y++)(0,a[y])(r)},function(y){for(u.status="rejected",u.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),u}var Vg=X.S;X.S=function(i,r){y_=un(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&KC(i,r),Vg!==null&&Vg(i,r)};var Fr=P(null);function Vf(){var i=Fr.current;return i!==null?i:rt.pooledCache}function Xu(i,r){r===null?de(Fr,Fr.current):de(Fr,r.pool)}function kg(){var i=Vf();return i===null?null:{parent:Dt._currentValue,pool:i}}var ko=Error(s(460)),kf=Error(s(474)),Wu=Error(s(542)),Zu={then:function(){}};function Ug(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Lg(i,r,a){switch(a=i[a],a===void 0?i.push(r):a!==r&&(r.then(Wn,Wn),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,qg(i),i;default:if(typeof r.status=="string")r.then(Wn,Wn);else{if(i=rt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(u){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=u}},function(u){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,qg(i),i}throw Hr=r,ko}}function zr(i){try{var r=i._init;return r(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Hr=a,ko):a}}var Hr=null;function Og(){if(Hr===null)throw Error(s(459));var i=Hr;return Hr=null,i}function qg(i){if(i===ko||i===Wu)throw Error(s(483))}var Uo=null,ll=0;function ec(i){var r=ll;return ll+=1,Uo===null&&(Uo=[]),Lg(Uo,i,r)}function ul(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function tc(i,r){throw r.$$typeof===A?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Bg(i){function r(H,O){if(i){var Y=H.deletions;Y===null?(H.deletions=[O],H.flags|=16):Y.push(O)}}function a(H,O){if(!i)return null;for(;O!==null;)r(H,O),O=O.sibling;return null}function u(H){for(var O=new Map;H!==null;)H.key!==null?O.set(H.key,H):O.set(H.index,H),H=H.sibling;return O}function y(H,O){return H=Ki(H,O),H.index=0,H.sibling=null,H}function _(H,O,Y){return H.index=Y,i?(Y=H.alternate,Y!==null?(Y=Y.index,Y<O?(H.flags|=67108866,O):Y):(H.flags|=67108866,O)):(H.flags|=1048576,O)}function C(H){return i&&H.alternate===null&&(H.flags|=67108866),H}function b(H,O,Y,ie){return O===null||O.tag!==6?(O=Af(Y,H.mode,ie),O.return=H,O):(O=y(O,Y),O.return=H,O)}function V(H,O,Y,ie){var Se=Y.type;return Se===B?Z(H,O,Y.props.children,ie,Y.key):O!==null&&(O.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===M&&zr(Se)===O.type)?(O=y(O,Y.props),ul(O,Y),O.return=H,O):(O=Ku(Y.type,Y.key,Y.props,null,H.mode,ie),ul(O,Y),O.return=H,O)}function J(H,O,Y,ie){return O===null||O.tag!==4||O.stateNode.containerInfo!==Y.containerInfo||O.stateNode.implementation!==Y.implementation?(O=Cf(Y,H.mode,ie),O.return=H,O):(O=y(O,Y.children||[]),O.return=H,O)}function Z(H,O,Y,ie,Se){return O===null||O.tag!==7?(O=Lr(Y,H.mode,ie,Se),O.return=H,O):(O=y(O,Y),O.return=H,O)}function se(H,O,Y){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Af(""+O,H.mode,Y),O.return=H,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case x:return Y=Ku(O.type,O.key,O.props,null,H.mode,Y),ul(Y,O),Y.return=H,Y;case U:return O=Cf(O,H.mode,Y),O.return=H,O;case M:return O=zr(O),se(H,O,Y)}if(ft(O)||q(O))return O=Lr(O,H.mode,Y,null),O.return=H,O;if(typeof O.then=="function")return se(H,ec(O),Y);if(O.$$typeof===$)return se(H,Qu(H,O),Y);tc(H,O)}return null}function K(H,O,Y,ie){var Se=O!==null?O.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Se!==null?null:b(H,O,""+Y,ie);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case x:return Y.key===Se?V(H,O,Y,ie):null;case U:return Y.key===Se?J(H,O,Y,ie):null;case M:return Y=zr(Y),K(H,O,Y,ie)}if(ft(Y)||q(Y))return Se!==null?null:Z(H,O,Y,ie,null);if(typeof Y.then=="function")return K(H,O,ec(Y),ie);if(Y.$$typeof===$)return K(H,O,Qu(H,Y),ie);tc(H,Y)}return null}function Q(H,O,Y,ie,Se){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return H=H.get(Y)||null,b(O,H,""+ie,Se);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case x:return H=H.get(ie.key===null?Y:ie.key)||null,V(O,H,ie,Se);case U:return H=H.get(ie.key===null?Y:ie.key)||null,J(O,H,ie,Se);case M:return ie=zr(ie),Q(H,O,Y,ie,Se)}if(ft(ie)||q(ie))return H=H.get(Y)||null,Z(O,H,ie,Se,null);if(typeof ie.then=="function")return Q(H,O,Y,ec(ie),Se);if(ie.$$typeof===$)return Q(H,O,Y,Qu(O,ie),Se);tc(O,ie)}return null}function ge(H,O,Y,ie){for(var Se=null,Ye=null,Te=O,Ve=O=0,qe=null;Te!==null&&Ve<Y.length;Ve++){Te.index>Ve?(qe=Te,Te=null):qe=Te.sibling;var Je=K(H,Te,Y[Ve],ie);if(Je===null){Te===null&&(Te=qe);break}i&&Te&&Je.alternate===null&&r(H,Te),O=_(Je,O,Ve),Ye===null?Se=Je:Ye.sibling=Je,Ye=Je,Te=qe}if(Ve===Y.length)return a(H,Te),He&&ji(H,Ve),Se;if(Te===null){for(;Ve<Y.length;Ve++)Te=se(H,Y[Ve],ie),Te!==null&&(O=_(Te,O,Ve),Ye===null?Se=Te:Ye.sibling=Te,Ye=Te);return He&&ji(H,Ve),Se}for(Te=u(Te);Ve<Y.length;Ve++)qe=Q(Te,H,Ve,Y[Ve],ie),qe!==null&&(i&&qe.alternate!==null&&Te.delete(qe.key===null?Ve:qe.key),O=_(qe,O,Ve),Ye===null?Se=qe:Ye.sibling=qe,Ye=qe);return i&&Te.forEach(function(Zs){return r(H,Zs)}),He&&ji(H,Ve),Se}function Ce(H,O,Y,ie){if(Y==null)throw Error(s(151));for(var Se=null,Ye=null,Te=O,Ve=O=0,qe=null,Je=Y.next();Te!==null&&!Je.done;Ve++,Je=Y.next()){Te.index>Ve?(qe=Te,Te=null):qe=Te.sibling;var Zs=K(H,Te,Je.value,ie);if(Zs===null){Te===null&&(Te=qe);break}i&&Te&&Zs.alternate===null&&r(H,Te),O=_(Zs,O,Ve),Ye===null?Se=Zs:Ye.sibling=Zs,Ye=Zs,Te=qe}if(Je.done)return a(H,Te),He&&ji(H,Ve),Se;if(Te===null){for(;!Je.done;Ve++,Je=Y.next())Je=se(H,Je.value,ie),Je!==null&&(O=_(Je,O,Ve),Ye===null?Se=Je:Ye.sibling=Je,Ye=Je);return He&&ji(H,Ve),Se}for(Te=u(Te);!Je.done;Ve++,Je=Y.next())Je=Q(Te,H,Ve,Je.value,ie),Je!==null&&(i&&Je.alternate!==null&&Te.delete(Je.key===null?Ve:Je.key),O=_(Je,O,Ve),Ye===null?Se=Je:Ye.sibling=Je,Ye=Je);return i&&Te.forEach(function(rb){return r(H,rb)}),He&&ji(H,Ve),Se}function st(H,O,Y,ie){if(typeof Y=="object"&&Y!==null&&Y.type===B&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case x:e:{for(var Se=Y.key;O!==null;){if(O.key===Se){if(Se=Y.type,Se===B){if(O.tag===7){a(H,O.sibling),ie=y(O,Y.props.children),ie.return=H,H=ie;break e}}else if(O.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===M&&zr(Se)===O.type){a(H,O.sibling),ie=y(O,Y.props),ul(ie,Y),ie.return=H,H=ie;break e}a(H,O);break}else r(H,O);O=O.sibling}Y.type===B?(ie=Lr(Y.props.children,H.mode,ie,Y.key),ie.return=H,H=ie):(ie=Ku(Y.type,Y.key,Y.props,null,H.mode,ie),ul(ie,Y),ie.return=H,H=ie)}return C(H);case U:e:{for(Se=Y.key;O!==null;){if(O.key===Se)if(O.tag===4&&O.stateNode.containerInfo===Y.containerInfo&&O.stateNode.implementation===Y.implementation){a(H,O.sibling),ie=y(O,Y.children||[]),ie.return=H,H=ie;break e}else{a(H,O);break}else r(H,O);O=O.sibling}ie=Cf(Y,H.mode,ie),ie.return=H,H=ie}return C(H);case M:return Y=zr(Y),st(H,O,Y,ie)}if(ft(Y))return ge(H,O,Y,ie);if(q(Y)){if(Se=q(Y),typeof Se!="function")throw Error(s(150));return Y=Se.call(Y),Ce(H,O,Y,ie)}if(typeof Y.then=="function")return st(H,O,ec(Y),ie);if(Y.$$typeof===$)return st(H,O,Qu(H,Y),ie);tc(H,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,O!==null&&O.tag===6?(a(H,O.sibling),ie=y(O,Y),ie.return=H,H=ie):(a(H,O),ie=Af(Y,H.mode,ie),ie.return=H,H=ie),C(H)):a(H,O)}return function(H,O,Y,ie){try{ll=0;var Se=st(H,O,Y,ie);return Uo=null,Se}catch(Te){if(Te===ko||Te===Wu)throw Te;var Ye=bn(29,Te,null,H.mode);return Ye.lanes=ie,Ye.return=H,Ye}finally{}}}var Gr=Bg(!0),Fg=Bg(!1),Us=!1;function Uf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Lf(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ls(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Os(i,r,a){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Qe&2)!==0){var y=u.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),u.pending=r,r=Ju(i),Cg(i,null,a),r}return Yu(i,u,r,a),Ju(i)}function cl(i,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var u=r.lanes;u&=i.pendingLanes,a|=u,r.lanes=a,La(i,a)}}function Of(i,r){var a=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var y=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var C={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?y=_=C:_=_.next=C,a=a.next}while(a!==null);_===null?y=_=r:_=_.next=r}else y=_=r;a={baseState:u.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:u.shared,callbacks:u.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=r:i.next=r,a.lastBaseUpdate=r}var qf=!1;function dl(){if(qf){var i=Vo;if(i!==null)throw i}}function fl(i,r,a,u){qf=!1;var y=i.updateQueue;Us=!1;var _=y.firstBaseUpdate,C=y.lastBaseUpdate,b=y.shared.pending;if(b!==null){y.shared.pending=null;var V=b,J=V.next;V.next=null,C===null?_=J:C.next=J,C=V;var Z=i.alternate;Z!==null&&(Z=Z.updateQueue,b=Z.lastBaseUpdate,b!==C&&(b===null?Z.firstBaseUpdate=J:b.next=J,Z.lastBaseUpdate=V))}if(_!==null){var se=y.baseState;C=0,Z=J=V=null,b=_;do{var K=b.lane&-536870913,Q=K!==b.lane;if(Q?(Oe&K)===K:(u&K)===K){K!==0&&K===Po&&(qf=!0),Z!==null&&(Z=Z.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ge=i,Ce=b;K=r;var st=a;switch(Ce.tag){case 1:if(ge=Ce.payload,typeof ge=="function"){se=ge.call(st,se,K);break e}se=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Ce.payload,K=typeof ge=="function"?ge.call(st,se,K):ge,K==null)break e;se=E({},se,K);break e;case 2:Us=!0}}K=b.callback,K!==null&&(i.flags|=64,Q&&(i.flags|=8192),Q=y.callbacks,Q===null?y.callbacks=[K]:Q.push(K))}else Q={lane:K,tag:b.tag,payload:b.payload,callback:b.callback,next:null},Z===null?(J=Z=Q,V=se):Z=Z.next=Q,C|=K;if(b=b.next,b===null){if(b=y.shared.pending,b===null)break;Q=b,b=Q.next,Q.next=null,y.lastBaseUpdate=Q,y.shared.pending=null}}while(!0);Z===null&&(V=se),y.baseState=V,y.firstBaseUpdate=J,y.lastBaseUpdate=Z,_===null&&(y.shared.lanes=0),Hs|=C,i.lanes=C,i.memoizedState=se}}function zg(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function Hg(i,r){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)zg(a[i],r)}var Lo=P(null),nc=P(0);function Gg(i,r){i=rs,de(nc,i),de(Lo,r),rs=i|r.baseLanes}function Bf(){de(nc,rs),de(Lo,Lo.current)}function Ff(){rs=nc.current,W(Lo),W(nc)}var xn=P(null),Hn=null;function qs(i){var r=i.alternate;de(Ct,Ct.current&1),de(xn,i),Hn===null&&(r===null||Lo.current!==null||r.memoizedState!==null)&&(Hn=i)}function zf(i){de(Ct,Ct.current),de(xn,i),Hn===null&&(Hn=i)}function Yg(i){i.tag===22?(de(Ct,Ct.current),de(xn,i),Hn===null&&(Hn=i)):Bs()}function Bs(){de(Ct,Ct.current),de(xn,xn.current)}function wn(i){W(xn),Hn===i&&(Hn=null),W(Ct)}var Ct=P(0);function ic(i){for(var r=i;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||jh(a)||$h(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Xi=0,Pe=null,nt=null,Pt=null,sc=!1,Oo=!1,Yr=!1,rc=0,hl=0,qo=null,$C=0;function yt(){throw Error(s(321))}function Hf(i,r){if(r===null)return!1;for(var a=0;a<r.length&&a<i.length;a++)if(!In(i[a],r[a]))return!1;return!0}function Gf(i,r,a,u,y,_){return Xi=_,Pe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,X.H=i===null||i.memoizedState===null?wy:rh,Yr=!1,_=a(u,y),Yr=!1,Oo&&(_=Kg(r,a,u,y)),Jg(i),_}function Jg(i){X.H=gl;var r=nt!==null&&nt.next!==null;if(Xi=0,Pt=nt=Pe=null,sc=!1,hl=0,qo=null,r)throw Error(s(300));i===null||Vt||(i=i.dependencies,i!==null&&$u(i)&&(Vt=!0))}function Kg(i,r,a,u){Pe=i;var y=0;do{if(Oo&&(qo=null),hl=0,Oo=!1,25<=y)throw Error(s(301));if(y+=1,Pt=nt=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}X.H=Ry,_=r(a,u)}while(Oo);return _}function QC(){var i=X.H,r=i.useState()[0];return r=typeof r.then=="function"?ml(r):r,i=i.useState()[0],(nt!==null?nt.memoizedState:null)!==i&&(Pe.flags|=1024),r}function Yf(){var i=rc!==0;return rc=0,i}function Jf(i,r,a){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~a}function Kf(i){if(sc){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}sc=!1}Xi=0,Pt=nt=Pe=null,Oo=!1,hl=rc=0,qo=null}function dn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?Pe.memoizedState=Pt=i:Pt=Pt.next=i,Pt}function It(){if(nt===null){var i=Pe.alternate;i=i!==null?i.memoizedState:null}else i=nt.next;var r=Pt===null?Pe.memoizedState:Pt.next;if(r!==null)Pt=r,nt=i;else{if(i===null)throw Pe.alternate===null?Error(s(467)):Error(s(310));nt=i,i={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},Pt===null?Pe.memoizedState=Pt=i:Pt=Pt.next=i}return Pt}function oc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ml(i){var r=hl;return hl+=1,qo===null&&(qo=[]),i=Lg(qo,i,r),r=Pe,(Pt===null?r.memoizedState:Pt.next)===null&&(r=r.alternate,X.H=r===null||r.memoizedState===null?wy:rh),i}function ac(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ml(i);if(i.$$typeof===$)return Wt(i)}throw Error(s(438,String(i)))}function jf(i){var r=null,a=Pe.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var u=Pe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=oc(),Pe.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(i),u=0;u<i;u++)a[u]=k;return r.index++,a}function Wi(i,r){return typeof r=="function"?r(i):r}function lc(i){var r=It();return $f(r,nt,i)}function $f(i,r,a){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var y=i.baseQueue,_=u.pending;if(_!==null){if(y!==null){var C=y.next;y.next=_.next,_.next=C}r.baseQueue=y=_,u.pending=null}if(_=i.baseState,y===null)i.memoizedState=_;else{r=y.next;var b=C=null,V=null,J=r,Z=!1;do{var se=J.lane&-536870913;if(se!==J.lane?(Oe&se)===se:(Xi&se)===se){var K=J.revertLane;if(K===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),se===Po&&(Z=!0);else if((Xi&K)===K){J=J.next,K===Po&&(Z=!0);continue}else se={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},V===null?(b=V=se,C=_):V=V.next=se,Pe.lanes|=K,Hs|=K;se=J.action,Yr&&a(_,se),_=J.hasEagerState?J.eagerState:a(_,se)}else K={lane:se,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},V===null?(b=V=K,C=_):V=V.next=K,Pe.lanes|=se,Hs|=se;J=J.next}while(J!==null&&J!==r);if(V===null?C=_:V.next=b,!In(_,i.memoizedState)&&(Vt=!0,Z&&(a=Vo,a!==null)))throw a;i.memoizedState=_,i.baseState=C,i.baseQueue=V,u.lastRenderedState=_}return y===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function Qf(i){var r=It(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var u=a.dispatch,y=a.pending,_=r.memoizedState;if(y!==null){a.pending=null;var C=y=y.next;do _=i(_,C.action),C=C.next;while(C!==y);In(_,r.memoizedState)||(Vt=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),a.lastRenderedState=_}return[_,u]}function jg(i,r,a){var u=Pe,y=It(),_=He;if(_){if(a===void 0)throw Error(s(407));a=a()}else a=r();var C=!In((nt||y).memoizedState,a);if(C&&(y.memoizedState=a,Vt=!0),y=y.queue,Zf(Xg.bind(null,u,y,i),[i]),y.getSnapshot!==r||C||Pt!==null&&Pt.memoizedState.tag&1){if(u.flags|=2048,Bo(9,{destroy:void 0},Qg.bind(null,u,y,a,r),null),rt===null)throw Error(s(349));_||(Xi&127)!==0||$g(u,r,a)}return a}function $g(i,r,a){i.flags|=16384,i={getSnapshot:r,value:a},r=Pe.updateQueue,r===null?(r=oc(),Pe.updateQueue=r,r.stores=[i]):(a=r.stores,a===null?r.stores=[i]:a.push(i))}function Qg(i,r,a,u){r.value=a,r.getSnapshot=u,Wg(r)&&Zg(i)}function Xg(i,r,a){return a(function(){Wg(r)&&Zg(i)})}function Wg(i){var r=i.getSnapshot;i=i.value;try{var a=r();return!In(i,a)}catch{return!0}}function Zg(i){var r=Ur(i,2);r!==null&&Tn(r,i,2)}function Xf(i){var r=dn();if(typeof i=="function"){var a=i;if(i=a(),Yr){Pn(!0);try{a()}finally{Pn(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:i},r}function ey(i,r,a,u){return i.baseState=a,$f(i,nt,typeof u=="function"?u:Wi)}function XC(i,r,a,u,y){if(dc(i))throw Error(s(485));if(i=r.action,i!==null){var _={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){_.listeners.push(C)}};X.T!==null?a(!0):_.isTransition=!1,u(_),a=r.pending,a===null?(_.next=r.pending=_,ty(r,_)):(_.next=a.next,r.pending=a.next=_)}}function ty(i,r){var a=r.action,u=r.payload,y=i.state;if(r.isTransition){var _=X.T,C={};X.T=C;try{var b=a(y,u),V=X.S;V!==null&&V(C,b),ny(i,r,b)}catch(J){Wf(i,r,J)}finally{_!==null&&C.types!==null&&(_.types=C.types),X.T=_}}else try{_=a(y,u),ny(i,r,_)}catch(J){Wf(i,r,J)}}function ny(i,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){iy(i,r,u)},function(u){return Wf(i,r,u)}):iy(i,r,a)}function iy(i,r,a){r.status="fulfilled",r.value=a,sy(r),i.state=a,r=i.pending,r!==null&&(a=r.next,a===r?i.pending=null:(a=a.next,r.next=a,ty(i,a)))}function Wf(i,r,a){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=a,sy(r),r=r.next;while(r!==u)}i.action=null}function sy(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function ry(i,r){return r}function oy(i,r){if(He){var a=rt.formState;if(a!==null){e:{var u=Pe;if(He){if(lt){t:{for(var y=lt,_=zn;y.nodeType!==8;){if(!_){y=null;break t}if(y=Gn(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){lt=Gn(y.nextSibling),u=y.data==="F!";break e}}Vs(u)}u=!1}u&&(r=a[0])}}return a=dn(),a.memoizedState=a.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ry,lastRenderedState:r},a.queue=u,a=Iy.bind(null,Pe,u),u.dispatch=a,u=Xf(!1),_=sh.bind(null,Pe,!1,u.queue),u=dn(),y={state:r,dispatch:null,action:i,pending:null},u.queue=y,a=XC.bind(null,Pe,y,_,a),y.dispatch=a,u.memoizedState=i,[r,a,!1]}function ay(i){var r=It();return ly(r,nt,i)}function ly(i,r,a){if(r=$f(i,r,ry)[0],i=lc(Wi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=ml(r)}catch(C){throw C===ko?Wu:C}else u=r;r=It();var y=r.queue,_=y.dispatch;return a!==r.memoizedState&&(Pe.flags|=2048,Bo(9,{destroy:void 0},WC.bind(null,y,a),null)),[u,_,i]}function WC(i,r){i.action=r}function uy(i){var r=It(),a=nt;if(a!==null)return ly(r,a,i);It(),r=r.memoizedState,a=It();var u=a.queue.dispatch;return a.memoizedState=i,[r,u,!1]}function Bo(i,r,a,u){return i={tag:i,create:a,deps:u,inst:r,next:null},r=Pe.updateQueue,r===null&&(r=oc(),Pe.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=i.next=i:(u=a.next,a.next=i,i.next=u,r.lastEffect=i),i}function cy(){return It().memoizedState}function uc(i,r,a,u){var y=dn();Pe.flags|=i,y.memoizedState=Bo(1|r,{destroy:void 0},a,u===void 0?null:u)}function cc(i,r,a,u){var y=It();u=u===void 0?null:u;var _=y.memoizedState.inst;nt!==null&&u!==null&&Hf(u,nt.memoizedState.deps)?y.memoizedState=Bo(r,_,a,u):(Pe.flags|=i,y.memoizedState=Bo(1|r,_,a,u))}function dy(i,r){uc(8390656,8,i,r)}function Zf(i,r){cc(2048,8,i,r)}function ZC(i){Pe.flags|=4;var r=Pe.updateQueue;if(r===null)r=oc(),Pe.updateQueue=r,r.events=[i];else{var a=r.events;a===null?r.events=[i]:a.push(i)}}function fy(i){var r=It().memoizedState;return ZC({ref:r,nextImpl:i}),function(){if((Qe&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function hy(i,r){return cc(4,2,i,r)}function my(i,r){return cc(4,4,i,r)}function py(i,r){if(typeof r=="function"){i=i();var a=r(i);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function gy(i,r,a){a=a!=null?a.concat([i]):null,cc(4,4,py.bind(null,r,i),a)}function eh(){}function yy(i,r){var a=It();r=r===void 0?null:r;var u=a.memoizedState;return r!==null&&Hf(r,u[1])?u[0]:(a.memoizedState=[i,r],i)}function _y(i,r){var a=It();r=r===void 0?null:r;var u=a.memoizedState;if(r!==null&&Hf(r,u[1]))return u[0];if(u=i(),Yr){Pn(!0);try{i()}finally{Pn(!1)}}return a.memoizedState=[u,r],u}function th(i,r,a){return a===void 0||(Xi&1073741824)!==0&&(Oe&261930)===0?i.memoizedState=r:(i.memoizedState=a,i=v_(),Pe.lanes|=i,Hs|=i,a)}function vy(i,r,a,u){return In(a,r)?a:Lo.current!==null?(i=th(i,a,u),In(i,r)||(Vt=!0),i):(Xi&42)===0||(Xi&1073741824)!==0&&(Oe&261930)===0?(Vt=!0,i.memoizedState=a):(i=v_(),Pe.lanes|=i,Hs|=i,r)}function Ty(i,r,a,u,y){var _=ce.p;ce.p=_!==0&&8>_?_:8;var C=X.T,b={};X.T=b,sh(i,!1,r,a);try{var V=y(),J=X.S;if(J!==null&&J(b,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var Z=jC(V,u);pl(i,r,Z,Mn(i))}else pl(i,r,u,Mn(i))}catch(se){pl(i,r,{then:function(){},status:"rejected",reason:se},Mn())}finally{ce.p=_,C!==null&&b.types!==null&&(C.types=b.types),X.T=C}}function eI(){}function nh(i,r,a,u){if(i.tag!==5)throw Error(s(476));var y=Ey(i).queue;Ty(i,y,r,ae,a===null?eI:function(){return Sy(i),a(u)})}function Ey(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:ae},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:a},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function Sy(i){var r=Ey(i);r.next===null&&(r=i.alternate.memoizedState),pl(i,r.next.queue,{},Mn())}function ih(){return Wt(Dl)}function Ay(){return It().memoizedState}function Cy(){return It().memoizedState}function tI(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var a=Mn();i=Ls(a);var u=Os(r,i,a);u!==null&&(Tn(u,r,a),cl(u,r,a)),r={cache:Df()},i.payload=r;return}r=r.return}}function nI(i,r,a){var u=Mn();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},dc(i)?by(r,a):(a=Ef(i,r,a,u),a!==null&&(Tn(a,i,u),xy(a,r,u)))}function Iy(i,r,a){var u=Mn();pl(i,r,a,u)}function pl(i,r,a,u){var y={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(dc(i))by(r,y);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var C=r.lastRenderedState,b=_(C,a);if(y.hasEagerState=!0,y.eagerState=b,In(b,C))return Yu(i,r,y,0),rt===null&&Gu(),!1}catch{}finally{}if(a=Ef(i,r,y,u),a!==null)return Tn(a,i,u),xy(a,r,u),!0}return!1}function sh(i,r,a,u){if(u={lane:2,revertLane:Uh(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},dc(i)){if(r)throw Error(s(479))}else r=Ef(i,a,u,2),r!==null&&Tn(r,i,2)}function dc(i){var r=i.alternate;return i===Pe||r!==null&&r===Pe}function by(i,r){Oo=sc=!0;var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}function xy(i,r,a){if((a&4194048)!==0){var u=r.lanes;u&=i.pendingLanes,a|=u,r.lanes=a,La(i,a)}}var gl={readContext:Wt,use:ac,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt};gl.useEffectEvent=yt;var wy={readContext:Wt,use:ac,useCallback:function(i,r){return dn().memoizedState=[i,r===void 0?null:r],i},useContext:Wt,useEffect:dy,useImperativeHandle:function(i,r,a){a=a!=null?a.concat([i]):null,uc(4194308,4,py.bind(null,r,i),a)},useLayoutEffect:function(i,r){return uc(4194308,4,i,r)},useInsertionEffect:function(i,r){uc(4,2,i,r)},useMemo:function(i,r){var a=dn();r=r===void 0?null:r;var u=i();if(Yr){Pn(!0);try{i()}finally{Pn(!1)}}return a.memoizedState=[u,r],u},useReducer:function(i,r,a){var u=dn();if(a!==void 0){var y=a(r);if(Yr){Pn(!0);try{a(r)}finally{Pn(!1)}}}else y=r;return u.memoizedState=u.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},u.queue=i,i=i.dispatch=nI.bind(null,Pe,i),[u.memoizedState,i]},useRef:function(i){var r=dn();return i={current:i},r.memoizedState=i},useState:function(i){i=Xf(i);var r=i.queue,a=Iy.bind(null,Pe,r);return r.dispatch=a,[i.memoizedState,a]},useDebugValue:eh,useDeferredValue:function(i,r){var a=dn();return th(a,i,r)},useTransition:function(){var i=Xf(!1);return i=Ty.bind(null,Pe,i.queue,!0,!1),dn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,a){var u=Pe,y=dn();if(He){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),rt===null)throw Error(s(349));(Oe&127)!==0||$g(u,r,a)}y.memoizedState=a;var _={value:a,getSnapshot:r};return y.queue=_,dy(Xg.bind(null,u,_,i),[i]),u.flags|=2048,Bo(9,{destroy:void 0},Qg.bind(null,u,_,a,r),null),a},useId:function(){var i=dn(),r=rt.identifierPrefix;if(He){var a=Mi,u=Ni;a=(u&~(1<<32-St(u)-1)).toString(32)+a,r="_"+r+"R_"+a,a=rc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=$C++,r="_"+r+"r_"+a.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:ih,useFormState:oy,useActionState:oy,useOptimistic:function(i){var r=dn();r.memoizedState=r.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=sh.bind(null,Pe,!0,a),a.dispatch=r,[i,r]},useMemoCache:jf,useCacheRefresh:function(){return dn().memoizedState=tI.bind(null,Pe)},useEffectEvent:function(i){var r=dn(),a={impl:i};return r.memoizedState=a,function(){if((Qe&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},rh={readContext:Wt,use:ac,useCallback:yy,useContext:Wt,useEffect:Zf,useImperativeHandle:gy,useInsertionEffect:hy,useLayoutEffect:my,useMemo:_y,useReducer:lc,useRef:cy,useState:function(){return lc(Wi)},useDebugValue:eh,useDeferredValue:function(i,r){var a=It();return vy(a,nt.memoizedState,i,r)},useTransition:function(){var i=lc(Wi)[0],r=It().memoizedState;return[typeof i=="boolean"?i:ml(i),r]},useSyncExternalStore:jg,useId:Ay,useHostTransitionStatus:ih,useFormState:ay,useActionState:ay,useOptimistic:function(i,r){var a=It();return ey(a,nt,i,r)},useMemoCache:jf,useCacheRefresh:Cy};rh.useEffectEvent=fy;var Ry={readContext:Wt,use:ac,useCallback:yy,useContext:Wt,useEffect:Zf,useImperativeHandle:gy,useInsertionEffect:hy,useLayoutEffect:my,useMemo:_y,useReducer:Qf,useRef:cy,useState:function(){return Qf(Wi)},useDebugValue:eh,useDeferredValue:function(i,r){var a=It();return nt===null?th(a,i,r):vy(a,nt.memoizedState,i,r)},useTransition:function(){var i=Qf(Wi)[0],r=It().memoizedState;return[typeof i=="boolean"?i:ml(i),r]},useSyncExternalStore:jg,useId:Ay,useHostTransitionStatus:ih,useFormState:uy,useActionState:uy,useOptimistic:function(i,r){var a=It();return nt!==null?ey(a,nt,i,r):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:jf,useCacheRefresh:Cy};Ry.useEffectEvent=fy;function oh(i,r,a,u){r=i.memoizedState,a=a(u,r),a=a==null?r:E({},r,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var ah={enqueueSetState:function(i,r,a){i=i._reactInternals;var u=Mn(),y=Ls(u);y.payload=r,a!=null&&(y.callback=a),r=Os(i,y,u),r!==null&&(Tn(r,i,u),cl(r,i,u))},enqueueReplaceState:function(i,r,a){i=i._reactInternals;var u=Mn(),y=Ls(u);y.tag=1,y.payload=r,a!=null&&(y.callback=a),r=Os(i,y,u),r!==null&&(Tn(r,i,u),cl(r,i,u))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var a=Mn(),u=Ls(a);u.tag=2,r!=null&&(u.callback=r),r=Os(i,u,a),r!==null&&(Tn(r,i,a),cl(r,i,a))}};function Ny(i,r,a,u,y,_,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,_,C):r.prototype&&r.prototype.isPureReactComponent?!nl(a,u)||!nl(y,_):!0}function My(i,r,a,u){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,u),r.state!==i&&ah.enqueueReplaceState(r,r.state,null)}function Jr(i,r){var a=r;if("ref"in r){a={};for(var u in r)u!=="ref"&&(a[u]=r[u])}if(i=i.defaultProps){a===r&&(a=E({},a));for(var y in i)a[y]===void 0&&(a[y]=i[y])}return a}function Dy(i){Hu(i)}function Py(i){console.error(i)}function Vy(i){Hu(i)}function fc(i,r){try{var a=i.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function ky(i,r,a){try{var u=i.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function lh(i,r,a){return a=Ls(a),a.tag=3,a.payload={element:null},a.callback=function(){fc(i,r)},a}function Uy(i){return i=Ls(i),i.tag=3,i}function Ly(i,r,a,u){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var _=u.value;i.payload=function(){return y(_)},i.callback=function(){ky(r,a,u)}}var C=a.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(i.callback=function(){ky(r,a,u),typeof y!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var b=u.stack;this.componentDidCatch(u.value,{componentStack:b!==null?b:""})})}function iI(i,r,a,u,y){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=a.alternate,r!==null&&Do(r,a,y,!0),a=xn.current,a!==null){switch(a.tag){case 31:case 13:return Hn===null?Cc():a.alternate===null&&_t===0&&(_t=3),a.flags&=-257,a.flags|=65536,a.lanes=y,u===Zu?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([u]):r.add(u),Ph(i,u,y)),!1;case 22:return a.flags|=65536,u===Zu?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([u]):a.add(u)),Ph(i,u,y)),!1}throw Error(s(435,a.tag))}return Ph(i,u,y),Cc(),!1}if(He)return r=xn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,u!==xf&&(i=Error(s(422),{cause:u}),rl(qn(i,a)))):(u!==xf&&(r=Error(s(423),{cause:u}),rl(qn(r,a))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,u=qn(u,a),y=lh(i.stateNode,u,y),Of(i,y),_t!==4&&(_t=2)),!1;var _=Error(s(520),{cause:u});if(_=qn(_,a),Cl===null?Cl=[_]:Cl.push(_),_t!==4&&(_t=2),r===null)return!0;u=qn(u,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,i=y&-y,a.lanes|=i,i=lh(a.stateNode,u,i),Of(a,i),!1;case 1:if(r=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Gs===null||!Gs.has(_))))return a.flags|=65536,y&=-y,a.lanes|=y,y=Uy(y),Ly(y,i,a,u),Of(a,y),!1}a=a.return}while(a!==null);return!1}var uh=Error(s(461)),Vt=!1;function Zt(i,r,a,u){r.child=i===null?Fg(r,null,a,u):Gr(r,i.child,a,u)}function Oy(i,r,a,u,y){a=a.render;var _=r.ref;if("ref"in u){var C={};for(var b in u)b!=="ref"&&(C[b]=u[b])}else C=u;return Br(r),u=Gf(i,r,a,C,_,y),b=Yf(),i!==null&&!Vt?(Jf(i,r,y),Zi(i,r,y)):(He&&b&&If(r),r.flags|=1,Zt(i,r,u,y),r.child)}function qy(i,r,a,u,y){if(i===null){var _=a.type;return typeof _=="function"&&!Sf(_)&&_.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=_,By(i,r,_,u,y)):(i=Ku(a.type,null,u,r,r.mode,y),i.ref=r.ref,i.return=r,r.child=i)}if(_=i.child,!yh(i,y)){var C=_.memoizedProps;if(a=a.compare,a=a!==null?a:nl,a(C,u)&&i.ref===r.ref)return Zi(i,r,y)}return r.flags|=1,i=Ki(_,u),i.ref=r.ref,i.return=r,r.child=i}function By(i,r,a,u,y){if(i!==null){var _=i.memoizedProps;if(nl(_,u)&&i.ref===r.ref)if(Vt=!1,r.pendingProps=u=_,yh(i,y))(i.flags&131072)!==0&&(Vt=!0);else return r.lanes=i.lanes,Zi(i,r,y)}return ch(i,r,a,u,y)}function Fy(i,r,a,u){var y=u.children,_=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|a:a,i!==null){for(u=r.child=i.child,y=0;u!==null;)y=y|u.lanes|u.childLanes,u=u.sibling;u=y&~_}else u=0,r.child=null;return zy(i,r,_,a,u)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&Xu(r,_!==null?_.cachePool:null),_!==null?Gg(r,_):Bf(),Yg(r);else return u=r.lanes=536870912,zy(i,r,_!==null?_.baseLanes|a:a,a,u)}else _!==null?(Xu(r,_.cachePool),Gg(r,_),Bs(),r.memoizedState=null):(i!==null&&Xu(r,null),Bf(),Bs());return Zt(i,r,y,a),r.child}function yl(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function zy(i,r,a,u,y){var _=Vf();return _=_===null?null:{parent:Dt._currentValue,pool:_},r.memoizedState={baseLanes:a,cachePool:_},i!==null&&Xu(r,null),Bf(),Yg(r),i!==null&&Do(i,r,u,!0),r.childLanes=y,null}function hc(i,r){return r=pc({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function Hy(i,r,a){return Gr(r,i.child,null,a),i=hc(r,r.pendingProps),i.flags|=2,wn(r),r.memoizedState=null,i}function sI(i,r,a){var u=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(He){if(u.mode==="hidden")return i=hc(r,u),r.lanes=536870912,yl(null,i);if(zf(r),(i=lt)?(i=tv(i,zn),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ds!==null?{id:Ni,overflow:Mi}:null,retryLane:536870912,hydrationErrors:null},a=bg(i),a.return=r,r.child=a,Xt=r,lt=null)):i=null,i===null)throw Vs(r);return r.lanes=536870912,null}return hc(r,u)}var _=i.memoizedState;if(_!==null){var C=_.dehydrated;if(zf(r),y)if(r.flags&256)r.flags&=-257,r=Hy(i,r,a);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(Vt||Do(i,r,a,!1),y=(a&i.childLanes)!==0,Vt||y){if(u=rt,u!==null&&(C=Oa(u,a),C!==0&&C!==_.retryLane))throw _.retryLane=C,Ur(i,C),Tn(u,i,C),uh;Cc(),r=Hy(i,r,a)}else i=_.treeContext,lt=Gn(C.nextSibling),Xt=r,He=!0,Ps=null,zn=!1,i!==null&&Rg(r,i),r=hc(r,u),r.flags|=4096;return r}return i=Ki(i.child,{mode:u.mode,children:u.children}),i.ref=r.ref,r.child=i,i.return=r,i}function mc(i,r){var a=r.ref;if(a===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(r.flags|=4194816)}}function ch(i,r,a,u,y){return Br(r),a=Gf(i,r,a,u,void 0,y),u=Yf(),i!==null&&!Vt?(Jf(i,r,y),Zi(i,r,y)):(He&&u&&If(r),r.flags|=1,Zt(i,r,a,y),r.child)}function Gy(i,r,a,u,y,_){return Br(r),r.updateQueue=null,a=Kg(r,u,a,y),Jg(i),u=Yf(),i!==null&&!Vt?(Jf(i,r,_),Zi(i,r,_)):(He&&u&&If(r),r.flags|=1,Zt(i,r,a,_),r.child)}function Yy(i,r,a,u,y){if(Br(r),r.stateNode===null){var _=wo,C=a.contextType;typeof C=="object"&&C!==null&&(_=Wt(C)),_=new a(u,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=ah,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=u,_.state=r.memoizedState,_.refs={},Uf(r),C=a.contextType,_.context=typeof C=="object"&&C!==null?Wt(C):wo,_.state=r.memoizedState,C=a.getDerivedStateFromProps,typeof C=="function"&&(oh(r,a,C,u),_.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(C=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),C!==_.state&&ah.enqueueReplaceState(_,_.state,null),fl(r,u,_,y),dl(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(i===null){_=r.stateNode;var b=r.memoizedProps,V=Jr(a,b);_.props=V;var J=_.context,Z=a.contextType;C=wo,typeof Z=="object"&&Z!==null&&(C=Wt(Z));var se=a.getDerivedStateFromProps;Z=typeof se=="function"||typeof _.getSnapshotBeforeUpdate=="function",b=r.pendingProps!==b,Z||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(b||J!==C)&&My(r,_,u,C),Us=!1;var K=r.memoizedState;_.state=K,fl(r,u,_,y),dl(),J=r.memoizedState,b||K!==J||Us?(typeof se=="function"&&(oh(r,a,se,u),J=r.memoizedState),(V=Us||Ny(r,a,V,u,K,J,C))?(Z||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=J),_.props=u,_.state=J,_.context=C,u=V):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{_=r.stateNode,Lf(i,r),C=r.memoizedProps,Z=Jr(a,C),_.props=Z,se=r.pendingProps,K=_.context,J=a.contextType,V=wo,typeof J=="object"&&J!==null&&(V=Wt(J)),b=a.getDerivedStateFromProps,(J=typeof b=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C!==se||K!==V)&&My(r,_,u,V),Us=!1,K=r.memoizedState,_.state=K,fl(r,u,_,y),dl();var Q=r.memoizedState;C!==se||K!==Q||Us||i!==null&&i.dependencies!==null&&$u(i.dependencies)?(typeof b=="function"&&(oh(r,a,b,u),Q=r.memoizedState),(Z=Us||Ny(r,a,Z,u,K,Q,V)||i!==null&&i.dependencies!==null&&$u(i.dependencies))?(J||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,Q,V),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,Q,V)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||C===i.memoizedProps&&K===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&K===i.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=Q),_.props=u,_.state=Q,_.context=V,u=Z):(typeof _.componentDidUpdate!="function"||C===i.memoizedProps&&K===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&K===i.memoizedState||(r.flags|=1024),u=!1)}return _=u,mc(i,r),u=(r.flags&128)!==0,_||u?(_=r.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,i!==null&&u?(r.child=Gr(r,i.child,null,y),r.child=Gr(r,null,a,y)):Zt(i,r,a,y),r.memoizedState=_.state,i=r.child):i=Zi(i,r,y),i}function Jy(i,r,a,u){return Or(),r.flags|=256,Zt(i,r,a,u),r.child}var dh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fh(i){return{baseLanes:i,cachePool:kg()}}function hh(i,r,a){return i=i!==null?i.childLanes&~a:0,r&&(i|=Nn),i}function Ky(i,r,a){var u=r.pendingProps,y=!1,_=(r.flags&128)!==0,C;if((C=_)||(C=i!==null&&i.memoizedState===null?!1:(Ct.current&2)!==0),C&&(y=!0,r.flags&=-129),C=(r.flags&32)!==0,r.flags&=-33,i===null){if(He){if(y?qs(r):Bs(),(i=lt)?(i=tv(i,zn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ds!==null?{id:Ni,overflow:Mi}:null,retryLane:536870912,hydrationErrors:null},a=bg(i),a.return=r,r.child=a,Xt=r,lt=null)):i=null,i===null)throw Vs(r);return $h(i)?r.lanes=32:r.lanes=536870912,null}var b=u.children;return u=u.fallback,y?(Bs(),y=r.mode,b=pc({mode:"hidden",children:b},y),u=Lr(u,y,a,null),b.return=r,u.return=r,b.sibling=u,r.child=b,u=r.child,u.memoizedState=fh(a),u.childLanes=hh(i,C,a),r.memoizedState=dh,yl(null,u)):(qs(r),mh(r,b))}var V=i.memoizedState;if(V!==null&&(b=V.dehydrated,b!==null)){if(_)r.flags&256?(qs(r),r.flags&=-257,r=ph(i,r,a)):r.memoizedState!==null?(Bs(),r.child=i.child,r.flags|=128,r=null):(Bs(),b=u.fallback,y=r.mode,u=pc({mode:"visible",children:u.children},y),b=Lr(b,y,a,null),b.flags|=2,u.return=r,b.return=r,u.sibling=b,r.child=u,Gr(r,i.child,null,a),u=r.child,u.memoizedState=fh(a),u.childLanes=hh(i,C,a),r.memoizedState=dh,r=yl(null,u));else if(qs(r),$h(b)){if(C=b.nextSibling&&b.nextSibling.dataset,C)var J=C.dgst;C=J,u=Error(s(419)),u.stack="",u.digest=C,rl({value:u,source:null,stack:null}),r=ph(i,r,a)}else if(Vt||Do(i,r,a,!1),C=(a&i.childLanes)!==0,Vt||C){if(C=rt,C!==null&&(u=Oa(C,a),u!==0&&u!==V.retryLane))throw V.retryLane=u,Ur(i,u),Tn(C,i,u),uh;jh(b)||Cc(),r=ph(i,r,a)}else jh(b)?(r.flags|=192,r.child=i.child,r=null):(i=V.treeContext,lt=Gn(b.nextSibling),Xt=r,He=!0,Ps=null,zn=!1,i!==null&&Rg(r,i),r=mh(r,u.children),r.flags|=4096);return r}return y?(Bs(),b=u.fallback,y=r.mode,V=i.child,J=V.sibling,u=Ki(V,{mode:"hidden",children:u.children}),u.subtreeFlags=V.subtreeFlags&65011712,J!==null?b=Ki(J,b):(b=Lr(b,y,a,null),b.flags|=2),b.return=r,u.return=r,u.sibling=b,r.child=u,yl(null,u),u=r.child,b=i.child.memoizedState,b===null?b=fh(a):(y=b.cachePool,y!==null?(V=Dt._currentValue,y=y.parent!==V?{parent:V,pool:V}:y):y=kg(),b={baseLanes:b.baseLanes|a,cachePool:y}),u.memoizedState=b,u.childLanes=hh(i,C,a),r.memoizedState=dh,yl(i.child,u)):(qs(r),a=i.child,i=a.sibling,a=Ki(a,{mode:"visible",children:u.children}),a.return=r,a.sibling=null,i!==null&&(C=r.deletions,C===null?(r.deletions=[i],r.flags|=16):C.push(i)),r.child=a,r.memoizedState=null,a)}function mh(i,r){return r=pc({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function pc(i,r){return i=bn(22,i,null,r),i.lanes=0,i}function ph(i,r,a){return Gr(r,i.child,null,a),i=mh(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function jy(i,r,a){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r),Nf(i.return,r,a)}function gh(i,r,a,u,y,_){var C=i.memoizedState;C===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:y,treeForkCount:_}:(C.isBackwards=r,C.rendering=null,C.renderingStartTime=0,C.last=u,C.tail=a,C.tailMode=y,C.treeForkCount=_)}function $y(i,r,a){var u=r.pendingProps,y=u.revealOrder,_=u.tail;u=u.children;var C=Ct.current,b=(C&2)!==0;if(b?(C=C&1|2,r.flags|=128):C&=1,de(Ct,C),Zt(i,r,u,a),u=He?sl:0,!b&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&jy(i,a,r);else if(i.tag===19)jy(i,a,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(a=r.child,y=null;a!==null;)i=a.alternate,i!==null&&ic(i)===null&&(y=a),a=a.sibling;a=y,a===null?(y=r.child,r.child=null):(y=a.sibling,a.sibling=null),gh(r,!1,y,a,_,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=r.child,r.child=null;y!==null;){if(i=y.alternate,i!==null&&ic(i)===null){r.child=y;break}i=y.sibling,y.sibling=a,a=y,y=i}gh(r,!0,a,null,_,u);break;case"together":gh(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function Zi(i,r,a){if(i!==null&&(r.dependencies=i.dependencies),Hs|=r.lanes,(a&r.childLanes)===0)if(i!==null){if(Do(i,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,a=Ki(i,i.pendingProps),r.child=a,a.return=r;i.sibling!==null;)i=i.sibling,a=a.sibling=Ki(i,i.pendingProps),a.return=r;a.sibling=null}return r.child}function yh(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&$u(i)))}function rI(i,r,a){switch(r.tag){case 3:Tt(r,r.stateNode.containerInfo),ks(r,Dt,i.memoizedState.cache),Or();break;case 27:case 5:Ee(r);break;case 4:Tt(r,r.stateNode.containerInfo);break;case 10:ks(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,zf(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(qs(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Ky(i,r,a):(qs(r),i=Zi(i,r,a),i!==null?i.sibling:null);qs(r);break;case 19:var y=(i.flags&128)!==0;if(u=(a&r.childLanes)!==0,u||(Do(i,r,a,!1),u=(a&r.childLanes)!==0),y){if(u)return $y(i,r,a);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),de(Ct,Ct.current),u)break;return null;case 22:return r.lanes=0,Fy(i,r,a,r.pendingProps);case 24:ks(r,Dt,i.memoizedState.cache)}return Zi(i,r,a)}function Qy(i,r,a){if(i!==null)if(i.memoizedProps!==r.pendingProps)Vt=!0;else{if(!yh(i,a)&&(r.flags&128)===0)return Vt=!1,rI(i,r,a);Vt=(i.flags&131072)!==0}else Vt=!1,He&&(r.flags&1048576)!==0&&wg(r,sl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var u=r.pendingProps;if(i=zr(r.elementType),r.type=i,typeof i=="function")Sf(i)?(u=Jr(i,u),r.tag=1,r=Yy(null,r,i,u,a)):(r.tag=0,r=ch(null,r,i,u,a));else{if(i!=null){var y=i.$$typeof;if(y===F){r.tag=11,r=Oy(null,r,i,u,a);break e}else if(y===R){r.tag=14,r=qy(null,r,i,u,a);break e}}throw r=je(i)||i,Error(s(306,r,""))}}return r;case 0:return ch(i,r,r.type,r.pendingProps,a);case 1:return u=r.type,y=Jr(u,r.pendingProps),Yy(i,r,u,y,a);case 3:e:{if(Tt(r,r.stateNode.containerInfo),i===null)throw Error(s(387));u=r.pendingProps;var _=r.memoizedState;y=_.element,Lf(i,r),fl(r,u,null,a);var C=r.memoizedState;if(u=C.cache,ks(r,Dt,u),u!==_.cache&&Mf(r,[Dt],a,!0),dl(),u=C.element,_.isDehydrated)if(_={element:u,isDehydrated:!1,cache:C.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=Jy(i,r,u,a);break e}else if(u!==y){y=qn(Error(s(424)),r),rl(y),r=Jy(i,r,u,a);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(lt=Gn(i.firstChild),Xt=r,He=!0,Ps=null,zn=!0,a=Fg(r,null,u,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Or(),u===y){r=Zi(i,r,a);break e}Zt(i,r,u,a)}r=r.child}return r;case 26:return mc(i,r),i===null?(a=av(r.type,null,r.pendingProps,null))?r.memoizedState=a:He||(a=r.type,i=r.pendingProps,u=Mc(Me.current).createElement(a),u[Rt]=r,u[Ht]=i,en(u,a,i),Nt(u),r.stateNode=u):r.memoizedState=av(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return Ee(r),i===null&&He&&(u=r.stateNode=sv(r.type,r.pendingProps,Me.current),Xt=r,zn=!0,y=lt,js(r.type)?(Qh=y,lt=Gn(u.firstChild)):lt=y),Zt(i,r,r.pendingProps.children,a),mc(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&He&&((y=u=lt)&&(u=kI(u,r.type,r.pendingProps,zn),u!==null?(r.stateNode=u,Xt=r,lt=Gn(u.firstChild),zn=!1,y=!0):y=!1),y||Vs(r)),Ee(r),y=r.type,_=r.pendingProps,C=i!==null?i.memoizedProps:null,u=_.children,Yh(y,_)?u=null:C!==null&&Yh(y,C)&&(r.flags|=32),r.memoizedState!==null&&(y=Gf(i,r,QC,null,null,a),Dl._currentValue=y),mc(i,r),Zt(i,r,u,a),r.child;case 6:return i===null&&He&&((i=a=lt)&&(a=UI(a,r.pendingProps,zn),a!==null?(r.stateNode=a,Xt=r,lt=null,i=!0):i=!1),i||Vs(r)),null;case 13:return Ky(i,r,a);case 4:return Tt(r,r.stateNode.containerInfo),u=r.pendingProps,i===null?r.child=Gr(r,null,u,a):Zt(i,r,u,a),r.child;case 11:return Oy(i,r,r.type,r.pendingProps,a);case 7:return Zt(i,r,r.pendingProps,a),r.child;case 8:return Zt(i,r,r.pendingProps.children,a),r.child;case 12:return Zt(i,r,r.pendingProps.children,a),r.child;case 10:return u=r.pendingProps,ks(r,r.type,u.value),Zt(i,r,u.children,a),r.child;case 9:return y=r.type._context,u=r.pendingProps.children,Br(r),y=Wt(y),u=u(y),r.flags|=1,Zt(i,r,u,a),r.child;case 14:return qy(i,r,r.type,r.pendingProps,a);case 15:return By(i,r,r.type,r.pendingProps,a);case 19:return $y(i,r,a);case 31:return sI(i,r,a);case 22:return Fy(i,r,a,r.pendingProps);case 24:return Br(r),u=Wt(Dt),i===null?(y=Vf(),y===null&&(y=rt,_=Df(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=a),y=_),r.memoizedState={parent:u,cache:y},Uf(r),ks(r,Dt,y)):((i.lanes&a)!==0&&(Lf(i,r),fl(r,null,null,a),dl()),y=i.memoizedState,_=r.memoizedState,y.parent!==u?(y={parent:u,cache:u},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),ks(r,Dt,u)):(u=_.cache,ks(r,Dt,u),u!==y.cache&&Mf(r,[Dt],a,!0))),Zt(i,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function es(i){i.flags|=4}function _h(i,r,a,u,y){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(A_())i.flags|=8192;else throw Hr=Zu,kf}else i.flags&=-16777217}function Xy(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!fv(r))if(A_())i.flags|=8192;else throw Hr=Zu,kf}function gc(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Su():536870912,i.lanes|=r,Go|=r)}function _l(i,r){if(!He)switch(i.tailMode){case"hidden":r=i.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function ut(i){var r=i.alternate!==null&&i.alternate.child===i.child,a=0,u=0;if(r)for(var y=i.child;y!==null;)a|=y.lanes|y.childLanes,u|=y.subtreeFlags&65011712,u|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)a|=y.lanes|y.childLanes,u|=y.subtreeFlags,u|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=u,i.childLanes=a,r}function oI(i,r,a){var u=r.pendingProps;switch(bf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(r),null;case 1:return ut(r),null;case 3:return a=r.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),Qi(Dt),ot(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Mo(r)?es(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,wf())),ut(r),null;case 26:var y=r.type,_=r.memoizedState;return i===null?(es(r),_!==null?(ut(r),Xy(r,_)):(ut(r),_h(r,y,null,u,a))):_?_!==i.memoizedState?(es(r),ut(r),Xy(r,_)):(ut(r),r.flags&=-16777217):(i=i.memoizedProps,i!==u&&es(r),ut(r),_h(r,y,i,u,a)),null;case 27:if(Et(r),a=Me.current,y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&es(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return ut(r),null}i=me.current,Mo(r)?Ng(r):(i=sv(y,u,a),r.stateNode=i,es(r))}return ut(r),null;case 5:if(Et(r),y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&es(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return ut(r),null}if(_=me.current,Mo(r))Ng(r);else{var C=Mc(Me.current);switch(_){case 1:_=C.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=C.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=C.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof u.is=="string"?C.createElement("select",{is:u.is}):C.createElement("select"),u.multiple?_.multiple=!0:u.size&&(_.size=u.size);break;default:_=typeof u.is=="string"?C.createElement(y,{is:u.is}):C.createElement(y)}}_[Rt]=r,_[Ht]=u;e:for(C=r.child;C!==null;){if(C.tag===5||C.tag===6)_.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===r)break e;for(;C.sibling===null;){if(C.return===null||C.return===r)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}r.stateNode=_;e:switch(en(_,y,u),y){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&es(r)}}return ut(r),_h(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,a),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==u&&es(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(s(166));if(i=Me.current,Mo(r)){if(i=r.stateNode,a=r.memoizedProps,u=null,y=Xt,y!==null)switch(y.tag){case 27:case 5:u=y.memoizedProps}i[Rt]=r,i=!!(i.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||K_(i.nodeValue,a)),i||Vs(r,!0)}else i=Mc(i).createTextNode(u),i[Rt]=r,r.stateNode=i}return ut(r),null;case 31:if(a=r.memoizedState,i===null||i.memoizedState!==null){if(u=Mo(r),a!==null){if(i===null){if(!u)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[Rt]=r}else Or(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ut(r),i=!1}else a=wf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return r.flags&256?(wn(r),r):(wn(r),null);if((r.flags&128)!==0)throw Error(s(558))}return ut(r),null;case 13:if(u=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=Mo(r),u!==null&&u.dehydrated!==null){if(i===null){if(!y)throw Error(s(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[Rt]=r}else Or(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ut(r),y=!1}else y=wf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(wn(r),r):(wn(r),null)}return wn(r),(r.flags&128)!==0?(r.lanes=a,r):(a=u!==null,i=i!==null&&i.memoizedState!==null,a&&(u=r.child,y=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(y=u.alternate.memoizedState.cachePool.pool),_=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==y&&(u.flags|=2048)),a!==i&&a&&(r.child.flags|=8192),gc(r,r.updateQueue),ut(r),null);case 4:return ot(),i===null&&Bh(r.stateNode.containerInfo),ut(r),null;case 10:return Qi(r.type),ut(r),null;case 19:if(W(Ct),u=r.memoizedState,u===null)return ut(r),null;if(y=(r.flags&128)!==0,_=u.rendering,_===null)if(y)_l(u,!1);else{if(_t!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(_=ic(i),_!==null){for(r.flags|=128,_l(u,!1),i=_.updateQueue,r.updateQueue=i,gc(r,i),r.subtreeFlags=0,i=a,a=r.child;a!==null;)Ig(a,i),a=a.sibling;return de(Ct,Ct.current&1|2),He&&ji(r,u.treeForkCount),r.child}i=i.sibling}u.tail!==null&&un()>Ec&&(r.flags|=128,y=!0,_l(u,!1),r.lanes=4194304)}else{if(!y)if(i=ic(_),i!==null){if(r.flags|=128,y=!0,i=i.updateQueue,r.updateQueue=i,gc(r,i),_l(u,!0),u.tail===null&&u.tailMode==="hidden"&&!_.alternate&&!He)return ut(r),null}else 2*un()-u.renderingStartTime>Ec&&a!==536870912&&(r.flags|=128,y=!0,_l(u,!1),r.lanes=4194304);u.isBackwards?(_.sibling=r.child,r.child=_):(i=u.last,i!==null?i.sibling=_:r.child=_,u.last=_)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=un(),i.sibling=null,a=Ct.current,de(Ct,y?a&1|2:a&1),He&&ji(r,u.treeForkCount),i):(ut(r),null);case 22:case 23:return wn(r),Ff(),u=r.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(a&536870912)!==0&&(r.flags&128)===0&&(ut(r),r.subtreeFlags&6&&(r.flags|=8192)):ut(r),a=r.updateQueue,a!==null&&gc(r,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==a&&(r.flags|=2048),i!==null&&W(Fr),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Qi(Dt),ut(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function aI(i,r){switch(bf(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Qi(Dt),ot(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return Et(r),null;case 31:if(r.memoizedState!==null){if(wn(r),r.alternate===null)throw Error(s(340));Or()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(wn(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Or()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return W(Ct),null;case 4:return ot(),null;case 10:return Qi(r.type),null;case 22:case 23:return wn(r),Ff(),i!==null&&W(Fr),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return Qi(Dt),null;case 25:return null;default:return null}}function Wy(i,r){switch(bf(r),r.tag){case 3:Qi(Dt),ot();break;case 26:case 27:case 5:Et(r);break;case 4:ot();break;case 31:r.memoizedState!==null&&wn(r);break;case 13:wn(r);break;case 19:W(Ct);break;case 10:Qi(r.type);break;case 22:case 23:wn(r),Ff(),i!==null&&W(Fr);break;case 24:Qi(Dt)}}function vl(i,r){try{var a=r.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var y=u.next;a=y;do{if((a.tag&i)===i){u=void 0;var _=a.create,C=a.inst;u=_(),C.destroy=u}a=a.next}while(a!==y)}}catch(b){et(r,r.return,b)}}function Fs(i,r,a){try{var u=r.updateQueue,y=u!==null?u.lastEffect:null;if(y!==null){var _=y.next;u=_;do{if((u.tag&i)===i){var C=u.inst,b=C.destroy;if(b!==void 0){C.destroy=void 0,y=r;var V=a,J=b;try{J()}catch(Z){et(y,V,Z)}}}u=u.next}while(u!==_)}}catch(Z){et(r,r.return,Z)}}function Zy(i){var r=i.updateQueue;if(r!==null){var a=i.stateNode;try{Hg(r,a)}catch(u){et(i,i.return,u)}}}function e_(i,r,a){a.props=Jr(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(u){et(i,r,u)}}function Tl(i,r){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof a=="function"?i.refCleanup=a(u):a.current=u}}catch(y){et(i,r,y)}}function Di(i,r){var a=i.ref,u=i.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(y){et(i,r,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){et(i,r,y)}else a.current=null}function t_(i){var r=i.type,a=i.memoizedProps,u=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(y){et(i,i.return,y)}}function vh(i,r,a){try{var u=i.stateNode;RI(u,i.type,a,r),u[Ht]=r}catch(y){et(i,i.return,y)}}function n_(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&js(i.type)||i.tag===4}function Th(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||n_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&js(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Eh(i,r,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(i),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Wn));else if(u!==4&&(u===27&&js(i.type)&&(a=i.stateNode,r=null),i=i.child,i!==null))for(Eh(i,r,a),i=i.sibling;i!==null;)Eh(i,r,a),i=i.sibling}function yc(i,r,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?a.insertBefore(i,r):a.appendChild(i);else if(u!==4&&(u===27&&js(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(yc(i,r,a),i=i.sibling;i!==null;)yc(i,r,a),i=i.sibling}function i_(i){var r=i.stateNode,a=i.memoizedProps;try{for(var u=i.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);en(r,u,a),r[Rt]=i,r[Ht]=a}catch(_){et(i,i.return,_)}}var ts=!1,kt=!1,Sh=!1,s_=typeof WeakSet=="function"?WeakSet:Set,Yt=null;function lI(i,r){if(i=i.containerInfo,Hh=Oc,i=gg(i),pf(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var y=u.anchorOffset,_=u.focusNode;u=u.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var C=0,b=-1,V=-1,J=0,Z=0,se=i,K=null;t:for(;;){for(var Q;se!==a||y!==0&&se.nodeType!==3||(b=C+y),se!==_||u!==0&&se.nodeType!==3||(V=C+u),se.nodeType===3&&(C+=se.nodeValue.length),(Q=se.firstChild)!==null;)K=se,se=Q;for(;;){if(se===i)break t;if(K===a&&++J===y&&(b=C),K===_&&++Z===u&&(V=C),(Q=se.nextSibling)!==null)break;se=K,K=se.parentNode}se=Q}a=b===-1||V===-1?null:{start:b,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(Gh={focusedElem:i,selectionRange:a},Oc=!1,Yt=r;Yt!==null;)if(r=Yt,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Yt=i;else for(;Yt!==null;){switch(r=Yt,_=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)y=i[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,a=r,y=_.memoizedProps,_=_.memoizedState,u=a.stateNode;try{var ge=Jr(a.type,y);i=u.getSnapshotBeforeUpdate(ge,_),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ce){et(a,a.return,Ce)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,a=i.nodeType,a===9)Kh(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Kh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Yt=i;break}Yt=r.return}}function r_(i,r,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:is(i,a),u&4&&vl(5,a);break;case 1:if(is(i,a),u&4)if(i=a.stateNode,r===null)try{i.componentDidMount()}catch(C){et(a,a.return,C)}else{var y=Jr(a.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(y,r,i.__reactInternalSnapshotBeforeUpdate)}catch(C){et(a,a.return,C)}}u&64&&Zy(a),u&512&&Tl(a,a.return);break;case 3:if(is(i,a),u&64&&(i=a.updateQueue,i!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Hg(i,r)}catch(C){et(a,a.return,C)}}break;case 27:r===null&&u&4&&i_(a);case 26:case 5:is(i,a),r===null&&u&4&&t_(a),u&512&&Tl(a,a.return);break;case 12:is(i,a);break;case 31:is(i,a),u&4&&l_(i,a);break;case 13:is(i,a),u&4&&u_(i,a),u&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=yI.bind(null,a),LI(i,a))));break;case 22:if(u=a.memoizedState!==null||ts,!u){r=r!==null&&r.memoizedState!==null||kt,y=ts;var _=kt;ts=u,(kt=r)&&!_?ss(i,a,(a.subtreeFlags&8772)!==0):is(i,a),ts=y,kt=_}break;case 30:break;default:is(i,a)}}function o_(i){var r=i.alternate;r!==null&&(i.alternate=null,o_(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&mo(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var mt=null,gn=!1;function ns(i,r,a){for(a=a.child;a!==null;)a_(i,r,a),a=a.sibling}function a_(i,r,a){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(jn,a)}catch{}switch(a.tag){case 26:kt||Di(a,r),ns(i,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:kt||Di(a,r);var u=mt,y=gn;js(a.type)&&(mt=a.stateNode,gn=!1),ns(i,r,a),Rl(a.stateNode),mt=u,gn=y;break;case 5:kt||Di(a,r);case 6:if(u=mt,y=gn,mt=null,ns(i,r,a),mt=u,gn=y,mt!==null)if(gn)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(a.stateNode)}catch(_){et(a,r,_)}else try{mt.removeChild(a.stateNode)}catch(_){et(a,r,_)}break;case 18:mt!==null&&(gn?(i=mt,Z_(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Wo(i)):Z_(mt,a.stateNode));break;case 4:u=mt,y=gn,mt=a.stateNode.containerInfo,gn=!0,ns(i,r,a),mt=u,gn=y;break;case 0:case 11:case 14:case 15:Fs(2,a,r),kt||Fs(4,a,r),ns(i,r,a);break;case 1:kt||(Di(a,r),u=a.stateNode,typeof u.componentWillUnmount=="function"&&e_(a,r,u)),ns(i,r,a);break;case 21:ns(i,r,a);break;case 22:kt=(u=kt)||a.memoizedState!==null,ns(i,r,a),kt=u;break;default:ns(i,r,a)}}function l_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Wo(i)}catch(a){et(r,r.return,a)}}}function u_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Wo(i)}catch(a){et(r,r.return,a)}}function uI(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new s_),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new s_),r;default:throw Error(s(435,i.tag))}}function _c(i,r){var a=uI(i);r.forEach(function(u){if(!a.has(u)){a.add(u);var y=_I.bind(null,i,u);u.then(y,y)}})}function yn(i,r){var a=r.deletions;if(a!==null)for(var u=0;u<a.length;u++){var y=a[u],_=i,C=r,b=C;e:for(;b!==null;){switch(b.tag){case 27:if(js(b.type)){mt=b.stateNode,gn=!1;break e}break;case 5:mt=b.stateNode,gn=!1;break e;case 3:case 4:mt=b.stateNode.containerInfo,gn=!0;break e}b=b.return}if(mt===null)throw Error(s(160));a_(_,C,y),mt=null,gn=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)c_(r,i),r=r.sibling}var si=null;function c_(i,r){var a=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:yn(r,i),_n(i),u&4&&(Fs(3,i,i.return),vl(3,i),Fs(5,i,i.return));break;case 1:yn(r,i),_n(i),u&512&&(kt||a===null||Di(a,a.return)),u&64&&ts&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var y=si;if(yn(r,i),_n(i),u&512&&(kt||a===null||Di(a,a.return)),u&4){var _=a!==null?a.memoizedState:null;if(u=i.memoizedState,a===null)if(u===null)if(i.stateNode===null){e:{u=i.type,a=i.memoizedProps,y=y.ownerDocument||y;t:switch(u){case"title":_=y.getElementsByTagName("title")[0],(!_||_[_i]||_[Rt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(u),y.head.insertBefore(_,y.querySelector("head > title"))),en(_,u,a),_[Rt]=i,Nt(_),u=_;break e;case"link":var C=cv("link","href",y).get(u+(a.href||""));if(C){for(var b=0;b<C.length;b++)if(_=C[b],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){C.splice(b,1);break t}}_=y.createElement(u),en(_,u,a),y.head.appendChild(_);break;case"meta":if(C=cv("meta","content",y).get(u+(a.content||""))){for(b=0;b<C.length;b++)if(_=C[b],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){C.splice(b,1);break t}}_=y.createElement(u),en(_,u,a),y.head.appendChild(_);break;default:throw Error(s(468,u))}_[Rt]=i,Nt(_),u=_}i.stateNode=u}else dv(y,i.type,i.stateNode);else i.stateNode=uv(y,u,i.memoizedProps);else _!==u?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,u===null?dv(y,i.type,i.stateNode):uv(y,u,i.memoizedProps)):u===null&&i.stateNode!==null&&vh(i,i.memoizedProps,a.memoizedProps)}break;case 27:yn(r,i),_n(i),u&512&&(kt||a===null||Di(a,a.return)),a!==null&&u&4&&vh(i,i.memoizedProps,a.memoizedProps);break;case 5:if(yn(r,i),_n(i),u&512&&(kt||a===null||Di(a,a.return)),i.flags&32){y=i.stateNode;try{pn(y,"")}catch(ge){et(i,i.return,ge)}}u&4&&i.stateNode!=null&&(y=i.memoizedProps,vh(i,y,a!==null?a.memoizedProps:y)),u&1024&&(Sh=!0);break;case 6:if(yn(r,i),_n(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,a=i.stateNode;try{a.nodeValue=u}catch(ge){et(i,i.return,ge)}}break;case 3:if(Vc=null,y=si,si=Dc(r.containerInfo),yn(r,i),si=y,_n(i),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Wo(r.containerInfo)}catch(ge){et(i,i.return,ge)}Sh&&(Sh=!1,d_(i));break;case 4:u=si,si=Dc(i.stateNode.containerInfo),yn(r,i),_n(i),si=u;break;case 12:yn(r,i),_n(i);break;case 31:yn(r,i),_n(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,_c(i,u)));break;case 13:yn(r,i),_n(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Tc=un()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,_c(i,u)));break;case 22:y=i.memoizedState!==null;var V=a!==null&&a.memoizedState!==null,J=ts,Z=kt;if(ts=J||y,kt=Z||V,yn(r,i),kt=Z,ts=J,_n(i),u&8192)e:for(r=i.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(a===null||V||ts||kt||Kr(i)),a=null,r=i;;){if(r.tag===5||r.tag===26){if(a===null){V=a=r;try{if(_=V.stateNode,y)C=_.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{b=V.stateNode;var se=V.memoizedProps.style,K=se!=null&&se.hasOwnProperty("display")?se.display:null;b.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(ge){et(V,V.return,ge)}}}else if(r.tag===6){if(a===null){V=r;try{V.stateNode.nodeValue=y?"":V.memoizedProps}catch(ge){et(V,V.return,ge)}}}else if(r.tag===18){if(a===null){V=r;try{var Q=V.stateNode;y?ev(Q,!0):ev(V.stateNode,!1)}catch(ge){et(V,V.return,ge)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=i.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,_c(i,a))));break;case 19:yn(r,i),_n(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,_c(i,u)));break;case 30:break;case 21:break;default:yn(r,i),_n(i)}}function _n(i){var r=i.flags;if(r&2){try{for(var a,u=i.return;u!==null;){if(n_(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var y=a.stateNode,_=Th(i);yc(i,_,y);break;case 5:var C=a.stateNode;a.flags&32&&(pn(C,""),a.flags&=-33);var b=Th(i);yc(i,b,C);break;case 3:case 4:var V=a.stateNode.containerInfo,J=Th(i);Eh(i,J,V);break;default:throw Error(s(161))}}catch(Z){et(i,i.return,Z)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function d_(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;d_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function is(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)r_(i,r.alternate,r),r=r.sibling}function Kr(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:Fs(4,r,r.return),Kr(r);break;case 1:Di(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&e_(r,r.return,a),Kr(r);break;case 27:Rl(r.stateNode);case 26:case 5:Di(r,r.return),Kr(r);break;case 22:r.memoizedState===null&&Kr(r);break;case 30:Kr(r);break;default:Kr(r)}i=i.sibling}}function ss(i,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,y=i,_=r,C=_.flags;switch(_.tag){case 0:case 11:case 15:ss(y,_,a),vl(4,_);break;case 1:if(ss(y,_,a),u=_,y=u.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(J){et(u,u.return,J)}if(u=_,y=u.updateQueue,y!==null){var b=u.stateNode;try{var V=y.shared.hiddenCallbacks;if(V!==null)for(y.shared.hiddenCallbacks=null,y=0;y<V.length;y++)zg(V[y],b)}catch(J){et(u,u.return,J)}}a&&C&64&&Zy(_),Tl(_,_.return);break;case 27:i_(_);case 26:case 5:ss(y,_,a),a&&u===null&&C&4&&t_(_),Tl(_,_.return);break;case 12:ss(y,_,a);break;case 31:ss(y,_,a),a&&C&4&&l_(y,_);break;case 13:ss(y,_,a),a&&C&4&&u_(y,_);break;case 22:_.memoizedState===null&&ss(y,_,a),Tl(_,_.return);break;case 30:break;default:ss(y,_,a)}r=r.sibling}}function Ah(i,r){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&ol(a))}function Ch(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&ol(i))}function ri(i,r,a,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)f_(i,r,a,u),r=r.sibling}function f_(i,r,a,u){var y=r.flags;switch(r.tag){case 0:case 11:case 15:ri(i,r,a,u),y&2048&&vl(9,r);break;case 1:ri(i,r,a,u);break;case 3:ri(i,r,a,u),y&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&ol(i)));break;case 12:if(y&2048){ri(i,r,a,u),i=r.stateNode;try{var _=r.memoizedProps,C=_.id,b=_.onPostCommit;typeof b=="function"&&b(C,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(V){et(r,r.return,V)}}else ri(i,r,a,u);break;case 31:ri(i,r,a,u);break;case 13:ri(i,r,a,u);break;case 23:break;case 22:_=r.stateNode,C=r.alternate,r.memoizedState!==null?_._visibility&2?ri(i,r,a,u):El(i,r):_._visibility&2?ri(i,r,a,u):(_._visibility|=2,Fo(i,r,a,u,(r.subtreeFlags&10256)!==0||!1)),y&2048&&Ah(C,r);break;case 24:ri(i,r,a,u),y&2048&&Ch(r.alternate,r);break;default:ri(i,r,a,u)}}function Fo(i,r,a,u,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=i,C=r,b=a,V=u,J=C.flags;switch(C.tag){case 0:case 11:case 15:Fo(_,C,b,V,y),vl(8,C);break;case 23:break;case 22:var Z=C.stateNode;C.memoizedState!==null?Z._visibility&2?Fo(_,C,b,V,y):El(_,C):(Z._visibility|=2,Fo(_,C,b,V,y)),y&&J&2048&&Ah(C.alternate,C);break;case 24:Fo(_,C,b,V,y),y&&J&2048&&Ch(C.alternate,C);break;default:Fo(_,C,b,V,y)}r=r.sibling}}function El(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=i,u=r,y=u.flags;switch(u.tag){case 22:El(a,u),y&2048&&Ah(u.alternate,u);break;case 24:El(a,u),y&2048&&Ch(u.alternate,u);break;default:El(a,u)}r=r.sibling}}var Sl=8192;function zo(i,r,a){if(i.subtreeFlags&Sl)for(i=i.child;i!==null;)h_(i,r,a),i=i.sibling}function h_(i,r,a){switch(i.tag){case 26:zo(i,r,a),i.flags&Sl&&i.memoizedState!==null&&$I(a,si,i.memoizedState,i.memoizedProps);break;case 5:zo(i,r,a);break;case 3:case 4:var u=si;si=Dc(i.stateNode.containerInfo),zo(i,r,a),si=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=Sl,Sl=16777216,zo(i,r,a),Sl=u):zo(i,r,a));break;default:zo(i,r,a)}}function m_(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Al(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];Yt=u,g_(u,i)}m_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)p_(i),i=i.sibling}function p_(i){switch(i.tag){case 0:case 11:case 15:Al(i),i.flags&2048&&Fs(9,i,i.return);break;case 3:Al(i);break;case 12:Al(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,vc(i)):Al(i);break;default:Al(i)}}function vc(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];Yt=u,g_(u,i)}m_(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:Fs(8,r,r.return),vc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,vc(r));break;default:vc(r)}i=i.sibling}}function g_(i,r){for(;Yt!==null;){var a=Yt;switch(a.tag){case 0:case 11:case 15:Fs(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:ol(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Yt=u;else e:for(a=i;Yt!==null;){u=Yt;var y=u.sibling,_=u.return;if(o_(u),u===a){Yt=null;break e}if(y!==null){y.return=_,Yt=y;break e}Yt=_}}}var cI={getCacheForType:function(i){var r=Wt(Dt),a=r.data.get(i);return a===void 0&&(a=i(),r.data.set(i,a)),a},cacheSignal:function(){return Wt(Dt).controller.signal}},dI=typeof WeakMap=="function"?WeakMap:Map,Qe=0,rt=null,ke=null,Oe=0,Ze=0,Rn=null,zs=!1,Ho=!1,Ih=!1,rs=0,_t=0,Hs=0,jr=0,bh=0,Nn=0,Go=0,Cl=null,vn=null,xh=!1,Tc=0,y_=0,Ec=1/0,Sc=null,Gs=null,Bt=0,Ys=null,Yo=null,os=0,wh=0,Rh=null,__=null,Il=0,Nh=null;function Mn(){return(Qe&2)!==0&&Oe!==0?Oe&-Oe:X.T!==null?Uh():Au()}function v_(){if(Nn===0)if((Oe&536870912)===0||He){var i=Er;Er<<=1,(Er&3932160)===0&&(Er=262144),Nn=i}else Nn=536870912;return i=xn.current,i!==null&&(i.flags|=32),Nn}function Tn(i,r,a){(i===rt&&(Ze===2||Ze===9)||i.cancelPendingCommit!==null)&&(Jo(i,0),Js(i,Oe,Nn,!1)),Sr(i,a),((Qe&2)===0||i!==rt)&&(i===rt&&((Qe&2)===0&&(jr|=a),_t===4&&Js(i,Oe,Nn,!1)),Pi(i))}function T_(i,r,a){if((Qe&6)!==0)throw Error(s(327));var u=!a&&(r&127)===0&&(r&i.expiredLanes)===0||$n(i,r),y=u?mI(i,r):Dh(i,r,!0),_=u;do{if(y===0){Ho&&!u&&Js(i,r,0,!1);break}else{if(a=i.current.alternate,_&&!fI(a)){y=Dh(i,r,!1),_=!1;continue}if(y===2){if(_=r,i.errorRecoveryDisabledLanes&_)var C=0;else C=i.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){r=C;e:{var b=i;y=Cl;var V=b.current.memoizedState.isDehydrated;if(V&&(Jo(b,C).flags|=256),C=Dh(b,C,!1),C!==2){if(Ih&&!V){b.errorRecoveryDisabledLanes|=_,jr|=_,y=4;break e}_=vn,vn=y,_!==null&&(vn===null?vn=_:vn.push.apply(vn,_))}y=C}if(_=!1,y!==2)continue}}if(y===1){Jo(i,0),Js(i,r,0,!0);break}e:{switch(u=i,_=y,_){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Js(u,r,Nn,!zs);break e;case 2:vn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(y=Tc+300-un(),10<y)){if(Js(u,r,Nn,!zs),pi(u,0,!0)!==0)break e;os=r,u.timeoutHandle=X_(E_.bind(null,u,a,vn,Sc,xh,r,Nn,jr,Go,zs,_,"Throttled",-0,0),y);break e}E_(u,a,vn,Sc,xh,r,Nn,jr,Go,zs,_,null,-0,0)}}break}while(!0);Pi(i)}function E_(i,r,a,u,y,_,C,b,V,J,Z,se,K,Q){if(i.timeoutHandle=-1,se=r.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Wn},h_(r,_,se);var ge=(_&62914560)===_?Tc-un():(_&4194048)===_?y_-un():0;if(ge=QI(se,ge),ge!==null){os=_,i.cancelPendingCommit=ge(R_.bind(null,i,r,_,a,u,y,C,b,V,Z,se,null,K,Q)),Js(i,_,C,!J);return}}R_(i,r,_,a,u,y,C,b,V)}function fI(i){for(var r=i;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var y=a[u],_=y.getSnapshot;y=y.value;try{if(!In(_(),y))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Js(i,r,a,u){r&=~bh,r&=~jr,i.suspendedLanes|=r,i.pingedLanes&=~r,u&&(i.warmLanes|=r),u=i.expirationTimes;for(var y=r;0<y;){var _=31-St(y),C=1<<_;u[_]=-1,y&=~C}a!==0&&Ar(i,a,r)}function Ac(){return(Qe&6)===0?(bl(0),!1):!0}function Mh(){if(ke!==null){if(Ze===0)var i=ke.return;else i=ke,$i=qr=null,Kf(i),Uo=null,ll=0,i=ke;for(;i!==null;)Wy(i.alternate,i),i=i.return;ke=null}}function Jo(i,r){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,DI(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),os=0,Mh(),rt=i,ke=a=Ki(i.current,null),Oe=r,Ze=0,Rn=null,zs=!1,Ho=$n(i,r),Ih=!1,Go=Nn=bh=jr=Hs=_t=0,vn=Cl=null,xh=!1,(r&8)!==0&&(r|=r&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=r;0<u;){var y=31-St(u),_=1<<y;r|=i[y],u&=~_}return rs=r,Gu(),a}function S_(i,r){Pe=null,X.H=gl,r===ko||r===Wu?(r=Og(),Ze=3):r===kf?(r=Og(),Ze=4):Ze=r===uh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Rn=r,ke===null&&(_t=1,fc(i,qn(r,i.current)))}function A_(){var i=xn.current;return i===null?!0:(Oe&4194048)===Oe?Hn===null:(Oe&62914560)===Oe||(Oe&536870912)!==0?i===Hn:!1}function C_(){var i=X.H;return X.H=gl,i===null?gl:i}function I_(){var i=X.A;return X.A=cI,i}function Cc(){_t=4,zs||(Oe&4194048)!==Oe&&xn.current!==null||(Ho=!0),(Hs&134217727)===0&&(jr&134217727)===0||rt===null||Js(rt,Oe,Nn,!1)}function Dh(i,r,a){var u=Qe;Qe|=2;var y=C_(),_=I_();(rt!==i||Oe!==r)&&(Sc=null,Jo(i,r)),r=!1;var C=_t;e:do try{if(Ze!==0&&ke!==null){var b=ke,V=Rn;switch(Ze){case 8:Mh(),C=6;break e;case 3:case 2:case 9:case 6:xn.current===null&&(r=!0);var J=Ze;if(Ze=0,Rn=null,Ko(i,b,V,J),a&&Ho){C=0;break e}break;default:J=Ze,Ze=0,Rn=null,Ko(i,b,V,J)}}hI(),C=_t;break}catch(Z){S_(i,Z)}while(!0);return r&&i.shellSuspendCounter++,$i=qr=null,Qe=u,X.H=y,X.A=_,ke===null&&(rt=null,Oe=0,Gu()),C}function hI(){for(;ke!==null;)b_(ke)}function mI(i,r){var a=Qe;Qe|=2;var u=C_(),y=I_();rt!==i||Oe!==r?(Sc=null,Ec=un()+500,Jo(i,r)):Ho=$n(i,r);e:do try{if(Ze!==0&&ke!==null){r=ke;var _=Rn;t:switch(Ze){case 1:Ze=0,Rn=null,Ko(i,r,_,1);break;case 2:case 9:if(Ug(_)){Ze=0,Rn=null,x_(r);break}r=function(){Ze!==2&&Ze!==9||rt!==i||(Ze=7),Pi(i)},_.then(r,r);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:Ug(_)?(Ze=0,Rn=null,x_(r)):(Ze=0,Rn=null,Ko(i,r,_,7));break;case 5:var C=null;switch(ke.tag){case 26:C=ke.memoizedState;case 5:case 27:var b=ke;if(C?fv(C):b.stateNode.complete){Ze=0,Rn=null;var V=b.sibling;if(V!==null)ke=V;else{var J=b.return;J!==null?(ke=J,Ic(J)):ke=null}break t}}Ze=0,Rn=null,Ko(i,r,_,5);break;case 6:Ze=0,Rn=null,Ko(i,r,_,6);break;case 8:Mh(),_t=6;break e;default:throw Error(s(462))}}pI();break}catch(Z){S_(i,Z)}while(!0);return $i=qr=null,X.H=u,X.A=y,Qe=a,ke!==null?0:(rt=null,Oe=0,Gu(),_t)}function pI(){for(;ke!==null&&!lf();)b_(ke)}function b_(i){var r=Qy(i.alternate,i,rs);i.memoizedProps=i.pendingProps,r===null?Ic(i):ke=r}function x_(i){var r=i,a=r.alternate;switch(r.tag){case 15:case 0:r=Gy(a,r,r.pendingProps,r.type,void 0,Oe);break;case 11:r=Gy(a,r,r.pendingProps,r.type.render,r.ref,Oe);break;case 5:Kf(r);default:Wy(a,r),r=ke=Ig(r,rs),r=Qy(a,r,rs)}i.memoizedProps=i.pendingProps,r===null?Ic(i):ke=r}function Ko(i,r,a,u){$i=qr=null,Kf(r),Uo=null,ll=0;var y=r.return;try{if(iI(i,y,r,a,Oe)){_t=1,fc(i,qn(a,i.current)),ke=null;return}}catch(_){if(y!==null)throw ke=y,_;_t=1,fc(i,qn(a,i.current)),ke=null;return}r.flags&32768?(He||u===1?i=!0:Ho||(Oe&536870912)!==0?i=!1:(zs=i=!0,(u===2||u===9||u===3||u===6)&&(u=xn.current,u!==null&&u.tag===13&&(u.flags|=16384))),w_(r,i)):Ic(r)}function Ic(i){var r=i;do{if((r.flags&32768)!==0){w_(r,zs);return}i=r.return;var a=oI(r.alternate,r,rs);if(a!==null){ke=a;return}if(r=r.sibling,r!==null){ke=r;return}ke=r=i}while(r!==null);_t===0&&(_t=5)}function w_(i,r){do{var a=aI(i.alternate,i);if(a!==null){a.flags&=32767,ke=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(i=i.sibling,i!==null)){ke=i;return}ke=i=a}while(i!==null);_t=6,ke=null}function R_(i,r,a,u,y,_,C,b,V){i.cancelPendingCommit=null;do bc();while(Bt!==0);if((Qe&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(_=r.lanes|r.childLanes,_|=Tf,df(i,a,_,C,b,V),i===rt&&(ke=rt=null,Oe=0),Yo=r,Ys=i,os=a,wh=_,Rh=y,__=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,vI(Ss,function(){return V_(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=X.T,X.T=null,y=ce.p,ce.p=2,C=Qe,Qe|=4;try{lI(i,r,a)}finally{Qe=C,ce.p=y,X.T=u}}Bt=1,N_(),M_(),D_()}}function N_(){if(Bt===1){Bt=0;var i=Ys,r=Yo,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=X.T,X.T=null;var u=ce.p;ce.p=2;var y=Qe;Qe|=4;try{c_(r,i);var _=Gh,C=gg(i.containerInfo),b=_.focusedElem,V=_.selectionRange;if(C!==b&&b&&b.ownerDocument&&pg(b.ownerDocument.documentElement,b)){if(V!==null&&pf(b)){var J=V.start,Z=V.end;if(Z===void 0&&(Z=J),"selectionStart"in b)b.selectionStart=J,b.selectionEnd=Math.min(Z,b.value.length);else{var se=b.ownerDocument||document,K=se&&se.defaultView||window;if(K.getSelection){var Q=K.getSelection(),ge=b.textContent.length,Ce=Math.min(V.start,ge),st=V.end===void 0?Ce:Math.min(V.end,ge);!Q.extend&&Ce>st&&(C=st,st=Ce,Ce=C);var H=mg(b,Ce),O=mg(b,st);if(H&&O&&(Q.rangeCount!==1||Q.anchorNode!==H.node||Q.anchorOffset!==H.offset||Q.focusNode!==O.node||Q.focusOffset!==O.offset)){var Y=se.createRange();Y.setStart(H.node,H.offset),Q.removeAllRanges(),Ce>st?(Q.addRange(Y),Q.extend(O.node,O.offset)):(Y.setEnd(O.node,O.offset),Q.addRange(Y))}}}}for(se=[],Q=b;Q=Q.parentNode;)Q.nodeType===1&&se.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<se.length;b++){var ie=se[b];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Oc=!!Hh,Gh=Hh=null}finally{Qe=y,ce.p=u,X.T=a}}i.current=r,Bt=2}}function M_(){if(Bt===2){Bt=0;var i=Ys,r=Yo,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=X.T,X.T=null;var u=ce.p;ce.p=2;var y=Qe;Qe|=4;try{r_(i,r.alternate,r)}finally{Qe=y,ce.p=u,X.T=a}}Bt=3}}function D_(){if(Bt===4||Bt===3){Bt=0,gu();var i=Ys,r=Yo,a=os,u=__;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Bt=5:(Bt=0,Yo=Ys=null,P_(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(Gs=null),Hi(a),r=r.stateNode,$t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(jn,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=X.T,y=ce.p,ce.p=2,X.T=null;try{for(var _=i.onRecoverableError,C=0;C<u.length;C++){var b=u[C];_(b.value,{componentStack:b.stack})}}finally{X.T=r,ce.p=y}}(os&3)!==0&&bc(),Pi(i),y=i.pendingLanes,(a&261930)!==0&&(y&42)!==0?i===Nh?Il++:(Il=0,Nh=i):Il=0,bl(0)}}function P_(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,ol(r)))}function bc(){return N_(),M_(),D_(),V_()}function V_(){if(Bt!==5)return!1;var i=Ys,r=wh;wh=0;var a=Hi(os),u=X.T,y=ce.p;try{ce.p=32>a?32:a,X.T=null,a=Rh,Rh=null;var _=Ys,C=os;if(Bt=0,Yo=Ys=null,os=0,(Qe&6)!==0)throw Error(s(331));var b=Qe;if(Qe|=4,p_(_.current),f_(_,_.current,C,a),Qe=b,bl(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(jn,_)}catch{}return!0}finally{ce.p=y,X.T=u,P_(i,r)}}function k_(i,r,a){r=qn(a,r),r=lh(i.stateNode,r,2),i=Os(i,r,2),i!==null&&(Sr(i,2),Pi(i))}function et(i,r,a){if(i.tag===3)k_(i,i,a);else for(;r!==null;){if(r.tag===3){k_(r,i,a);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Gs===null||!Gs.has(u))){i=qn(a,i),a=Uy(2),u=Os(r,a,2),u!==null&&(Ly(a,u,r,i),Sr(u,2),Pi(u));break}}r=r.return}}function Ph(i,r,a){var u=i.pingCache;if(u===null){u=i.pingCache=new dI;var y=new Set;u.set(r,y)}else y=u.get(r),y===void 0&&(y=new Set,u.set(r,y));y.has(a)||(Ih=!0,y.add(a),i=gI.bind(null,i,r,a),r.then(i,i))}function gI(i,r,a){var u=i.pingCache;u!==null&&u.delete(r),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,rt===i&&(Oe&a)===a&&(_t===4||_t===3&&(Oe&62914560)===Oe&&300>un()-Tc?(Qe&2)===0&&Jo(i,0):bh|=a,Go===Oe&&(Go=0)),Pi(i)}function U_(i,r){r===0&&(r=Su()),i=Ur(i,r),i!==null&&(Sr(i,r),Pi(i))}function yI(i){var r=i.memoizedState,a=0;r!==null&&(a=r.retryLane),U_(i,a)}function _I(i,r){var a=0;switch(i.tag){case 31:case 13:var u=i.stateNode,y=i.memoizedState;y!==null&&(a=y.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(r),U_(i,a)}function vI(i,r){return qt(i,r)}var xc=null,jo=null,Vh=!1,wc=!1,kh=!1,Ks=0;function Pi(i){i!==jo&&i.next===null&&(jo===null?xc=jo=i:jo=jo.next=i),wc=!0,Vh||(Vh=!0,EI())}function bl(i,r){if(!kh&&wc){kh=!0;do for(var a=!1,u=xc;u!==null;){if(i!==0){var y=u.pendingLanes;if(y===0)var _=0;else{var C=u.suspendedLanes,b=u.pingedLanes;_=(1<<31-St(42|i)+1)-1,_&=y&~(C&~b),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,B_(u,_))}else _=Oe,_=pi(u,u===rt?_:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(_&3)===0||$n(u,_)||(a=!0,B_(u,_));u=u.next}while(a);kh=!1}}function TI(){L_()}function L_(){wc=Vh=!1;var i=0;Ks!==0&&MI()&&(i=Ks);for(var r=un(),a=null,u=xc;u!==null;){var y=u.next,_=O_(u,r);_===0?(u.next=null,a===null?xc=y:a.next=y,y===null&&(jo=a)):(a=u,(i!==0||(_&3)!==0)&&(wc=!0)),u=y}Bt!==0&&Bt!==5||bl(i),Ks!==0&&(Ks=0)}function O_(i,r){for(var a=i.suspendedLanes,u=i.pingedLanes,y=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var C=31-St(_),b=1<<C,V=y[C];V===-1?((b&a)===0||(b&u)!==0)&&(y[C]=cf(b,r)):V<=r&&(i.expiredLanes|=b),_&=~b}if(r=rt,a=Oe,a=pi(i,i===r?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,a===0||i===r&&(Ze===2||Ze===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&Es(u),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||$n(i,a)){if(r=a&-a,r===i.callbackPriority)return r;switch(u!==null&&Es(u),Hi(a)){case 2:case 8:a=Ua;break;case 32:a=Ss;break;case 268435456:a=yu;break;default:a=Ss}return u=q_.bind(null,i),a=qt(a,u),i.callbackPriority=r,i.callbackNode=a,r}return u!==null&&u!==null&&Es(u),i.callbackPriority=2,i.callbackNode=null,2}function q_(i,r){if(Bt!==0&&Bt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(bc()&&i.callbackNode!==a)return null;var u=Oe;return u=pi(i,i===rt?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(T_(i,u,r),O_(i,un()),i.callbackNode!=null&&i.callbackNode===a?q_.bind(null,i):null)}function B_(i,r){if(bc())return null;T_(i,r,!0)}function EI(){PI(function(){(Qe&6)!==0?qt(ka,TI):L_()})}function Uh(){if(Ks===0){var i=Po;i===0&&(i=hi,hi<<=1,(hi&261888)===0&&(hi=256)),Ks=i}return Ks}function F_(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:_o(""+i)}function z_(i,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,i.id&&a.setAttribute("form",i.id),r.parentNode.insertBefore(a,r),i=new FormData(i),a.parentNode.removeChild(a),i}function SI(i,r,a,u,y){if(r==="submit"&&a&&a.stateNode===y){var _=F_((y[Ht]||null).action),C=u.submitter;C&&(r=(r=C[Ht]||null)?F_(r.formAction):C.getAttribute("formAction"),r!==null&&(_=r,C=null));var b=new bi("action","action",null,u,y);i.push({event:b,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ks!==0){var V=C?z_(y,C):new FormData(y);nh(a,{pending:!0,data:V,method:y.method,action:_},null,V)}}else typeof _=="function"&&(b.preventDefault(),V=C?z_(y,C):new FormData(y),nh(a,{pending:!0,data:V,method:y.method,action:_},_,V))},currentTarget:y}]})}}for(var Lh=0;Lh<vf.length;Lh++){var Oh=vf[Lh],AI=Oh.toLowerCase(),CI=Oh[0].toUpperCase()+Oh.slice(1);ii(AI,"on"+CI)}ii(vg,"onAnimationEnd"),ii(Tg,"onAnimationIteration"),ii(Eg,"onAnimationStart"),ii("dblclick","onDoubleClick"),ii("focusin","onFocus"),ii("focusout","onBlur"),ii(BC,"onTransitionRun"),ii(FC,"onTransitionStart"),ii(zC,"onTransitionCancel"),ii(Sg,"onTransitionEnd"),Si("onMouseEnter",["mouseout","mouseover"]),Si("onMouseLeave",["mouseout","mouseover"]),Si("onPointerEnter",["pointerout","pointerover"]),Si("onPointerLeave",["pointerout","pointerover"]),Ei("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ei("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ei("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ei("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ei("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ei("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),II=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xl));function H_(i,r){r=(r&4)!==0;for(var a=0;a<i.length;a++){var u=i[a],y=u.event;u=u.listeners;e:{var _=void 0;if(r)for(var C=u.length-1;0<=C;C--){var b=u[C],V=b.instance,J=b.currentTarget;if(b=b.listener,V!==_&&y.isPropagationStopped())break e;_=b,y.currentTarget=J;try{_(y)}catch(Z){Hu(Z)}y.currentTarget=null,_=V}else for(C=0;C<u.length;C++){if(b=u[C],V=b.instance,J=b.currentTarget,b=b.listener,V!==_&&y.isPropagationStopped())break e;_=b,y.currentTarget=J;try{_(y)}catch(Z){Hu(Z)}y.currentTarget=null,_=V}}}}function Ue(i,r){var a=r[ho];a===void 0&&(a=r[ho]=new Set);var u=i+"__bubble";a.has(u)||(G_(r,i,2,!1),a.add(u))}function qh(i,r,a){var u=0;r&&(u|=4),G_(a,i,u,r)}var Rc="_reactListening"+Math.random().toString(36).slice(2);function Bh(i){if(!i[Rc]){i[Rc]=!0,qa.forEach(function(a){a!=="selectionchange"&&(II.has(a)||qh(a,!1,i),qh(a,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Rc]||(r[Rc]=!0,qh("selectionchange",!1,r))}}function G_(i,r,a,u){switch(vv(r)){case 2:var y=ZI;break;case 8:y=eb;break;default:y=tm}a=y.bind(null,r,a,i),y=void 0,!wr||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),u?y!==void 0?i.addEventListener(r,a,{capture:!0,passive:y}):i.addEventListener(r,a,!0):y!==void 0?i.addEventListener(r,a,{passive:y}):i.addEventListener(r,a,!1)}function Fh(i,r,a,u,y){var _=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var C=u.tag;if(C===3||C===4){var b=u.stateNode.containerInfo;if(b===y)break;if(C===4)for(C=u.return;C!==null;){var V=C.tag;if((V===3||V===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;b!==null;){if(C=vi(b),C===null)return;if(V=C.tag,V===5||V===6||V===26||V===27){u=_=C;continue e}b=b.parentNode}}u=u.return}ws(function(){var J=_,Z=kn(a),se=[];e:{var K=Ag.get(i);if(K!==void 0){var Q=bi,ge=i;switch(i){case"keypress":if(Nr(a)===0)break e;case"keydown":case"keyup":Q=Bu;break;case"focusin":ge="focus",Q=Dr;break;case"focusout":ge="blur",Q=Dr;break;case"beforeblur":case"afterblur":Q=Dr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Wa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Mu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=S;break;case vg:case Tg:case Eg:Q=Pu;break;case Sg:Q=w;break;case"scroll":case"scrollend":Q=Xa;break;case"wheel":Q=j;break;case"copy":case"cut":case"paste":Q=Vu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=Ji;break;case"toggle":case"beforetoggle":Q=De}var Ce=(r&4)!==0,st=!Ce&&(i==="scroll"||i==="scrollend"),H=Ce?K!==null?K+"Capture":null:K;Ce=[];for(var O=J,Y;O!==null;){var ie=O;if(Y=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||Y===null||H===null||(ie=Zn(O,H),ie!=null&&Ce.push(wl(O,ie,Y))),st)break;O=O.return}0<Ce.length&&(K=new Q(K,ge,null,a,Z),se.push({event:K,listeners:Ce}))}}if((r&7)===0){e:{if(K=i==="mouseover"||i==="pointerover",Q=i==="mouseout"||i==="pointerout",K&&a!==ja&&(ge=a.relatedTarget||a.fromElement)&&(vi(ge)||ge[yi]))break e;if((Q||K)&&(K=Z.window===Z?Z:(K=Z.ownerDocument)?K.defaultView||K.parentWindow:window,Q?(ge=a.relatedTarget||a.toElement,Q=J,ge=ge?vi(ge):null,ge!==null&&(st=l(ge),Ce=ge.tag,ge!==st||Ce!==5&&Ce!==27&&Ce!==6)&&(ge=null)):(Q=null,ge=J),Q!==ge)){if(Ce=Wa,ie="onMouseLeave",H="onMouseEnter",O="mouse",(i==="pointerout"||i==="pointerover")&&(Ce=Ji,ie="onPointerLeave",H="onPointerEnter",O="pointer"),st=Q==null?K:An(Q),Y=ge==null?K:An(ge),K=new Ce(ie,O+"leave",Q,a,Z),K.target=st,K.relatedTarget=Y,ie=null,vi(Z)===J&&(Ce=new Ce(H,O+"enter",ge,a,Z),Ce.target=Y,Ce.relatedTarget=st,ie=Ce),st=ie,Q&&ge)t:{for(Ce=bI,H=Q,O=ge,Y=0,ie=H;ie;ie=Ce(ie))Y++;ie=0;for(var Se=O;Se;Se=Ce(Se))ie++;for(;0<Y-ie;)H=Ce(H),Y--;for(;0<ie-Y;)O=Ce(O),ie--;for(;Y--;){if(H===O||O!==null&&H===O.alternate){Ce=H;break t}H=Ce(H),O=Ce(O)}Ce=null}else Ce=null;Q!==null&&Y_(se,K,Q,Ce,!1),ge!==null&&st!==null&&Y_(se,st,ge,Ce,!0)}}e:{if(K=J?An(J):window,Q=K.nodeName&&K.nodeName.toLowerCase(),Q==="select"||Q==="input"&&K.type==="file")var Ye=lg;else if(og(K))if(ug)Ye=LC;else{Ye=kC;var Te=VC}else Q=K.nodeName,!Q||Q.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?J&&yo(J.elementType)&&(Ye=lg):Ye=UC;if(Ye&&(Ye=Ye(i,J))){ag(se,Ye,a,Z);break e}Te&&Te(i,K,J),i==="focusout"&&J&&K.type==="number"&&J.memoizedProps.value!=null&&Ya(K,"number",K.value)}switch(Te=J?An(J):window,i){case"focusin":(og(Te)||Te.contentEditable==="true")&&(Io=Te,gf=J,il=null);break;case"focusout":il=gf=Io=null;break;case"mousedown":yf=!0;break;case"contextmenu":case"mouseup":case"dragend":yf=!1,yg(se,a,Z);break;case"selectionchange":if(qC)break;case"keydown":case"keyup":yg(se,a,Z)}var Ve;if($e)e:{switch(i){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else Co?Pr(i,a)&&(qe="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(qe="onCompositionStart");qe&&(Ri&&a.locale!=="ko"&&(Co||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&Co&&(Ve=Qa()):(Ii=Z,$a="value"in Ii?Ii.value:Ii.textContent,Co=!0)),Te=Nc(J,qe),0<Te.length&&(qe=new wi(qe,i,null,a,Z),se.push({event:qe,listeners:Te}),Ve?qe.data=Ve:(Ve=Ao(a),Ve!==null&&(qe.data=Ve)))),(Ve=Ln?NC(i,a):MC(i,a))&&(qe=Nc(J,"onBeforeInput"),0<qe.length&&(Te=new wi("onBeforeInput","beforeinput",null,a,Z),se.push({event:Te,listeners:qe}),Te.data=Ve)),SI(se,i,J,a,Z)}H_(se,r)})}function wl(i,r,a){return{instance:i,listener:r,currentTarget:a}}function Nc(i,r){for(var a=r+"Capture",u=[];i!==null;){var y=i,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=Zn(i,a),y!=null&&u.unshift(wl(i,y,_)),y=Zn(i,r),y!=null&&u.push(wl(i,y,_))),i.tag===3)return u;i=i.return}return[]}function bI(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Y_(i,r,a,u,y){for(var _=r._reactName,C=[];a!==null&&a!==u;){var b=a,V=b.alternate,J=b.stateNode;if(b=b.tag,V!==null&&V===u)break;b!==5&&b!==26&&b!==27||J===null||(V=J,y?(J=Zn(a,_),J!=null&&C.unshift(wl(a,J,V))):y||(J=Zn(a,_),J!=null&&C.push(wl(a,J,V)))),a=a.return}C.length!==0&&i.push({event:r,listeners:C})}var xI=/\r\n?/g,wI=/\u0000|\uFFFD/g;function J_(i){return(typeof i=="string"?i:""+i).replace(xI,`
`).replace(wI,"")}function K_(i,r){return r=J_(r),J_(i)===r}function it(i,r,a,u,y,_){switch(a){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||pn(i,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&pn(i,""+u);break;case"className":Cn(i,"class",u);break;case"tabIndex":Cn(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Cn(i,a,u);break;case"style":Ka(i,u,_);break;case"data":if(r!=="object"){Cn(i,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||a!=="href")){i.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=_o(""+u),i.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(r!=="input"&&it(i,r,"name",y.name,y,null),it(i,r,"formEncType",y.formEncType,y,null),it(i,r,"formMethod",y.formMethod,y,null),it(i,r,"formTarget",y.formTarget,y,null)):(it(i,r,"encType",y.encType,y,null),it(i,r,"method",y.method,y,null),it(i,r,"target",y.target,y,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=_o(""+u),i.setAttribute(a,u);break;case"onClick":u!=null&&(i.onclick=Wn);break;case"onScroll":u!=null&&Ue("scroll",i);break;case"onScrollEnd":u!=null&&Ue("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}a=_o(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""+u):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":u===!0?i.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,u):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(a,u):i.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(a):i.setAttribute(a,u);break;case"popover":Ue("beforetoggle",i),Ue("toggle",i),po(i,"popover",u);break;case"xlinkActuate":Mt(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Mt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Mt(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Mt(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Mt(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Mt(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Mt(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Mt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Mt(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":po(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Nu.get(a)||a,po(i,a,u))}}function zh(i,r,a,u,y,_){switch(a){case"style":Ka(i,u,_);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof u=="string"?pn(i,u):(typeof u=="number"||typeof u=="bigint")&&pn(i,""+u);break;case"onScroll":u!=null&&Ue("scroll",i);break;case"onScrollEnd":u!=null&&Ue("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Wn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ba.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),r=a.slice(2,y?a.length-7:void 0),_=i[Ht]||null,_=_!=null?_[a]:null,typeof _=="function"&&i.removeEventListener(r,_,y),typeof u=="function")){typeof _!="function"&&_!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(r,u,y);break e}a in i?i[a]=u:u===!0?i.setAttribute(a,""):po(i,a,u)}}}function en(i,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",i),Ue("load",i);var u=!1,y=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var C=a[_];if(C!=null)switch(_){case"src":u=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:it(i,r,_,C,a,null)}}y&&it(i,r,"srcSet",a.srcSet,a,null),u&&it(i,r,"src",a.src,a,null);return;case"input":Ue("invalid",i);var b=_=C=y=null,V=null,J=null;for(u in a)if(a.hasOwnProperty(u)){var Z=a[u];if(Z!=null)switch(u){case"name":y=Z;break;case"type":C=Z;break;case"checked":V=Z;break;case"defaultChecked":J=Z;break;case"value":_=Z;break;case"defaultValue":b=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,r));break;default:it(i,r,u,Z,a,null)}}xu(i,_,b,V,J,C,y,!1);return;case"select":Ue("invalid",i),u=C=_=null;for(y in a)if(a.hasOwnProperty(y)&&(b=a[y],b!=null))switch(y){case"value":_=b;break;case"defaultValue":C=b;break;case"multiple":u=b;default:it(i,r,y,b,a,null)}r=_,a=C,i.multiple=!!u,r!=null?Cs(i,!!u,r,!1):a!=null&&Cs(i,!!u,a,!0);return;case"textarea":Ue("invalid",i),_=y=u=null;for(C in a)if(a.hasOwnProperty(C)&&(b=a[C],b!=null))switch(C){case"value":u=b;break;case"defaultValue":y=b;break;case"children":_=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:it(i,r,C,b,a,null)}Is(i,u,y,_);return;case"option":for(V in a)if(a.hasOwnProperty(V)&&(u=a[V],u!=null))switch(V){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:it(i,r,V,u,a,null)}return;case"dialog":Ue("beforetoggle",i),Ue("toggle",i),Ue("cancel",i),Ue("close",i);break;case"iframe":case"object":Ue("load",i);break;case"video":case"audio":for(u=0;u<xl.length;u++)Ue(xl[u],i);break;case"image":Ue("error",i),Ue("load",i);break;case"details":Ue("toggle",i);break;case"embed":case"source":case"link":Ue("error",i),Ue("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in a)if(a.hasOwnProperty(J)&&(u=a[J],u!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:it(i,r,J,u,a,null)}return;default:if(yo(r)){for(Z in a)a.hasOwnProperty(Z)&&(u=a[Z],u!==void 0&&zh(i,r,Z,u,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(u=a[b],u!=null&&it(i,r,b,u,a,null))}function RI(i,r,a,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,C=null,b=null,V=null,J=null,Z=null;for(Q in a){var se=a[Q];if(a.hasOwnProperty(Q)&&se!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":V=se;default:u.hasOwnProperty(Q)||it(i,r,Q,null,u,se)}}for(var K in u){var Q=u[K];if(se=a[K],u.hasOwnProperty(K)&&(Q!=null||se!=null))switch(K){case"type":_=Q;break;case"name":y=Q;break;case"checked":J=Q;break;case"defaultChecked":Z=Q;break;case"value":C=Q;break;case"defaultValue":b=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,r));break;default:Q!==se&&it(i,r,K,Q,u,se)}}go(i,C,b,V,J,Z,_,y);return;case"select":Q=C=b=K=null;for(_ in a)if(V=a[_],a.hasOwnProperty(_)&&V!=null)switch(_){case"value":break;case"multiple":Q=V;default:u.hasOwnProperty(_)||it(i,r,_,null,u,V)}for(y in u)if(_=u[y],V=a[y],u.hasOwnProperty(y)&&(_!=null||V!=null))switch(y){case"value":K=_;break;case"defaultValue":b=_;break;case"multiple":C=_;default:_!==V&&it(i,r,y,_,u,V)}r=b,a=C,u=Q,K!=null?Cs(i,!!a,K,!1):!!u!=!!a&&(r!=null?Cs(i,!!a,r,!0):Cs(i,!!a,a?[]:"",!1));return;case"textarea":Q=K=null;for(b in a)if(y=a[b],a.hasOwnProperty(b)&&y!=null&&!u.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:it(i,r,b,null,u,y)}for(C in u)if(y=u[C],_=a[C],u.hasOwnProperty(C)&&(y!=null||_!=null))switch(C){case"value":K=y;break;case"defaultValue":Q=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:y!==_&&it(i,r,C,y,u,_)}wu(i,K,Q);return;case"option":for(var ge in a)if(K=a[ge],a.hasOwnProperty(ge)&&K!=null&&!u.hasOwnProperty(ge))switch(ge){case"selected":i.selected=!1;break;default:it(i,r,ge,null,u,K)}for(V in u)if(K=u[V],Q=a[V],u.hasOwnProperty(V)&&K!==Q&&(K!=null||Q!=null))switch(V){case"selected":i.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:it(i,r,V,K,u,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in a)K=a[Ce],a.hasOwnProperty(Ce)&&K!=null&&!u.hasOwnProperty(Ce)&&it(i,r,Ce,null,u,K);for(J in u)if(K=u[J],Q=a[J],u.hasOwnProperty(J)&&K!==Q&&(K!=null||Q!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,r));break;default:it(i,r,J,K,u,Q)}return;default:if(yo(r)){for(var st in a)K=a[st],a.hasOwnProperty(st)&&K!==void 0&&!u.hasOwnProperty(st)&&zh(i,r,st,void 0,u,K);for(Z in u)K=u[Z],Q=a[Z],!u.hasOwnProperty(Z)||K===Q||K===void 0&&Q===void 0||zh(i,r,Z,K,u,Q);return}}for(var H in a)K=a[H],a.hasOwnProperty(H)&&K!=null&&!u.hasOwnProperty(H)&&it(i,r,H,null,u,K);for(se in u)K=u[se],Q=a[se],!u.hasOwnProperty(se)||K===Q||K==null&&Q==null||it(i,r,se,K,u,Q)}function j_(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function NI(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var y=a[u],_=y.transferSize,C=y.initiatorType,b=y.duration;if(_&&b&&j_(C)){for(C=0,b=y.responseEnd,u+=1;u<a.length;u++){var V=a[u],J=V.startTime;if(J>b)break;var Z=V.transferSize,se=V.initiatorType;Z&&j_(se)&&(V=V.responseEnd,C+=Z*(V<b?1:(b-J)/(V-J)))}if(--u,r+=8*(_+C)/(y.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Hh=null,Gh=null;function Mc(i){return i.nodeType===9?i:i.ownerDocument}function $_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Q_(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function Yh(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Jh=null;function MI(){var i=window.event;return i&&i.type==="popstate"?i===Jh?!1:(Jh=i,!0):(Jh=null,!1)}var X_=typeof setTimeout=="function"?setTimeout:void 0,DI=typeof clearTimeout=="function"?clearTimeout:void 0,W_=typeof Promise=="function"?Promise:void 0,PI=typeof queueMicrotask=="function"?queueMicrotask:typeof W_<"u"?function(i){return W_.resolve(null).then(i).catch(VI)}:X_;function VI(i){setTimeout(function(){throw i})}function js(i){return i==="head"}function Z_(i,r){var a=r,u=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(u===0){i.removeChild(y),Wo(r);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")Rl(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,Rl(a);for(var _=a.firstChild;_;){var C=_.nextSibling,b=_.nodeName;_[_i]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=C}}else a==="body"&&Rl(i.ownerDocument.body);a=y}while(a);Wo(r)}function ev(i,r){var a=i;i=0;do{var u=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=u}while(a)}function Kh(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Kh(a),mo(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function kI(i,r,a,u){for(;i.nodeType===1;){var y=a;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[_i])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Gn(i.nextSibling),i===null)break}return null}function UI(i,r,a){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Gn(i.nextSibling),i===null))return null;return i}function tv(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Gn(i.nextSibling),i===null))return null;return i}function jh(i){return i.data==="$?"||i.data==="$~"}function $h(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function LI(i,r){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||a.readyState!=="loading")r();else{var u=function(){r(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Gn(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var Qh=null;function nv(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(r===0)return Gn(i.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}i=i.nextSibling}return null}function iv(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return i;r--}else a!=="/$"&&a!=="/&"||r++}i=i.previousSibling}return null}function sv(i,r,a){switch(r=Mc(a),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Rl(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);mo(i)}var Yn=new Map,rv=new Set;function Dc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var as=ce.d;ce.d={f:OI,r:qI,D:BI,C:FI,L:zI,m:HI,X:YI,S:GI,M:JI};function OI(){var i=as.f(),r=Ac();return i||r}function qI(i){var r=Vn(i);r!==null&&r.tag===5&&r.type==="form"?Sy(r):as.r(i)}var $o=typeof document>"u"?null:document;function ov(i,r,a){var u=$o;if(u&&typeof r=="string"&&r){var y=mn(r);y='link[rel="'+i+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),rv.has(y)||(rv.add(y),i={rel:i,crossOrigin:a,href:r},u.querySelector(y)===null&&(r=u.createElement("link"),en(r,"link",i),Nt(r),u.head.appendChild(r)))}}function BI(i){as.D(i),ov("dns-prefetch",i,null)}function FI(i,r){as.C(i,r),ov("preconnect",i,r)}function zI(i,r,a){as.L(i,r,a);var u=$o;if(u&&i&&r){var y='link[rel="preload"][as="'+mn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+mn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+mn(a.imageSizes)+'"]')):y+='[href="'+mn(i)+'"]';var _=y;switch(r){case"style":_=Qo(i);break;case"script":_=Xo(i)}Yn.has(_)||(i=E({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:i,as:r},a),Yn.set(_,i),u.querySelector(y)!==null||r==="style"&&u.querySelector(Nl(_))||r==="script"&&u.querySelector(Ml(_))||(r=u.createElement("link"),en(r,"link",i),Nt(r),u.head.appendChild(r)))}}function HI(i,r){as.m(i,r);var a=$o;if(a&&i){var u=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+mn(u)+'"][href="'+mn(i)+'"]',_=y;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Xo(i)}if(!Yn.has(_)&&(i=E({rel:"modulepreload",href:i},r),Yn.set(_,i),a.querySelector(y)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ml(_)))return}u=a.createElement("link"),en(u,"link",i),Nt(u),a.head.appendChild(u)}}}function GI(i,r,a){as.S(i,r,a);var u=$o;if(u&&i){var y=Ti(u).hoistableStyles,_=Qo(i);r=r||"default";var C=y.get(_);if(!C){var b={loading:0,preload:null};if(C=u.querySelector(Nl(_)))b.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":r},a),(a=Yn.get(_))&&Xh(i,a);var V=C=u.createElement("link");Nt(V),en(V,"link",i),V._p=new Promise(function(J,Z){V.onload=J,V.onerror=Z}),V.addEventListener("load",function(){b.loading|=1}),V.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Pc(C,r,u)}C={type:"stylesheet",instance:C,count:1,state:b},y.set(_,C)}}}function YI(i,r){as.X(i,r);var a=$o;if(a&&i){var u=Ti(a).hoistableScripts,y=Xo(i),_=u.get(y);_||(_=a.querySelector(Ml(y)),_||(i=E({src:i,async:!0},r),(r=Yn.get(y))&&Wh(i,r),_=a.createElement("script"),Nt(_),en(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(y,_))}}function JI(i,r){as.M(i,r);var a=$o;if(a&&i){var u=Ti(a).hoistableScripts,y=Xo(i),_=u.get(y);_||(_=a.querySelector(Ml(y)),_||(i=E({src:i,async:!0,type:"module"},r),(r=Yn.get(y))&&Wh(i,r),_=a.createElement("script"),Nt(_),en(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(y,_))}}function av(i,r,a,u){var y=(y=Me.current)?Dc(y):null;if(!y)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Qo(a.href),a=Ti(y).hoistableStyles,u=a.get(r),u||(u={type:"style",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=Qo(a.href);var _=Ti(y).hoistableStyles,C=_.get(i);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,C),(_=y.querySelector(Nl(i)))&&!_._p&&(C.instance=_,C.state.loading=5),Yn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Yn.set(i,a),_||KI(y,i,a,C.state))),r&&u===null)throw Error(s(528,""));return C}if(r&&u!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Xo(a),a=Ti(y).hoistableScripts,u=a.get(r),u||(u={type:"script",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Qo(i){return'href="'+mn(i)+'"'}function Nl(i){return'link[rel="stylesheet"]['+i+"]"}function lv(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function KI(i,r,a,u){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=i.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),en(r,"link",a),Nt(r),i.head.appendChild(r))}function Xo(i){return'[src="'+mn(i)+'"]'}function Ml(i){return"script[async]"+i}function uv(i,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var u=i.querySelector('style[data-href~="'+mn(a.href)+'"]');if(u)return r.instance=u,Nt(u),u;var y=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Nt(u),en(u,"style",y),Pc(u,a.precedence,i),r.instance=u;case"stylesheet":y=Qo(a.href);var _=i.querySelector(Nl(y));if(_)return r.state.loading|=4,r.instance=_,Nt(_),_;u=lv(a),(y=Yn.get(y))&&Xh(u,y),_=(i.ownerDocument||i).createElement("link"),Nt(_);var C=_;return C._p=new Promise(function(b,V){C.onload=b,C.onerror=V}),en(_,"link",u),r.state.loading|=4,Pc(_,a.precedence,i),r.instance=_;case"script":return _=Xo(a.src),(y=i.querySelector(Ml(_)))?(r.instance=y,Nt(y),y):(u=a,(y=Yn.get(_))&&(u=E({},a),Wh(u,y)),i=i.ownerDocument||i,y=i.createElement("script"),Nt(y),en(y,"link",u),i.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,Pc(u,a.precedence,i));return r.instance}function Pc(i,r,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=u.length?u[u.length-1]:null,_=y,C=0;C<u.length;C++){var b=u[C];if(b.dataset.precedence===r)_=b;else if(_!==y)break}_?_.parentNode.insertBefore(i,_.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(i,r.firstChild))}function Xh(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function Wh(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Vc=null;function cv(i,r,a){if(Vc===null){var u=new Map,y=Vc=new Map;y.set(a,u)}else y=Vc,u=y.get(a),u||(u=new Map,y.set(a,u));if(u.has(i))return u;for(u.set(i,null),a=a.getElementsByTagName(i),y=0;y<a.length;y++){var _=a[y];if(!(_[_i]||_[Rt]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var C=_.getAttribute(r)||"";C=i+C;var b=u.get(C);b?b.push(_):u.set(C,[_])}}return u}function dv(i,r,a){i=i.ownerDocument||i,i.head.insertBefore(a,r==="title"?i.querySelector("head > title"):null)}function jI(i,r,a){if(a===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function fv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function $I(i,r,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=Qo(u.href),_=r.querySelector(Nl(y));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=kc.bind(i),r.then(i,i)),a.state.loading|=4,a.instance=_,Nt(_);return}_=r.ownerDocument||r,u=lv(u),(y=Yn.get(y))&&Xh(u,y),_=_.createElement("link"),Nt(_);var C=_;C._p=new Promise(function(b,V){C.onload=b,C.onerror=V}),en(_,"link",u),a.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=kc.bind(i),r.addEventListener("load",a),r.addEventListener("error",a))}}var Zh=0;function QI(i,r){return i.stylesheets&&i.count===0&&Lc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var u=setTimeout(function(){if(i.stylesheets&&Lc(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+r);0<i.imgBytes&&Zh===0&&(Zh=62500*NI());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Lc(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>Zh?50:800)+r);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(y)}}:null}function kc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Lc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Uc=null;function Lc(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Uc=new Map,r.forEach(XI,i),Uc=null,kc.call(i))}function XI(i,r){if(!(r.state.loading&4)){var a=Uc.get(i);if(a)var u=a.get(null);else{a=new Map,Uc.set(i,a);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var C=y[_];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(a.set(C.dataset.precedence,C),u=C)}u&&a.set(null,u)}y=r.instance,C=y.getAttribute("data-precedence"),_=a.get(C)||u,_===u&&a.set(null,y),a.set(C,y),this.count++,u=kc.bind(this),y.addEventListener("load",u),y.addEventListener("error",u),_?_.parentNode.insertBefore(y,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),r.state.loading|=4}}var Dl={$$typeof:$,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function WI(i,r,a,u,y,_,C,b,V){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gi(0),this.hiddenUpdates=gi(null),this.identifierPrefix=u,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function hv(i,r,a,u,y,_,C,b,V,J,Z,se){return i=new WI(i,r,a,C,V,J,Z,se,b),r=1,_===!0&&(r|=24),_=bn(3,null,null,r),i.current=_,_.stateNode=i,r=Df(),r.refCount++,i.pooledCache=r,r.refCount++,_.memoizedState={element:u,isDehydrated:a,cache:r},Uf(_),i}function mv(i){return i?(i=wo,i):wo}function pv(i,r,a,u,y,_){y=mv(y),u.context===null?u.context=y:u.pendingContext=y,u=Ls(r),u.payload={element:a},_=_===void 0?null:_,_!==null&&(u.callback=_),a=Os(i,u,r),a!==null&&(Tn(a,i,r),cl(a,i,r))}function gv(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<r?a:r}}function em(i,r){gv(i,r),(i=i.alternate)&&gv(i,r)}function yv(i){if(i.tag===13||i.tag===31){var r=Ur(i,67108864);r!==null&&Tn(r,i,67108864),em(i,67108864)}}function _v(i){if(i.tag===13||i.tag===31){var r=Mn();r=Cr(r);var a=Ur(i,r);a!==null&&Tn(a,i,r),em(i,r)}}var Oc=!0;function ZI(i,r,a,u){var y=X.T;X.T=null;var _=ce.p;try{ce.p=2,tm(i,r,a,u)}finally{ce.p=_,X.T=y}}function eb(i,r,a,u){var y=X.T;X.T=null;var _=ce.p;try{ce.p=8,tm(i,r,a,u)}finally{ce.p=_,X.T=y}}function tm(i,r,a,u){if(Oc){var y=nm(u);if(y===null)Fh(i,r,u,qc,a),Tv(i,u);else if(nb(y,i,r,a,u))u.stopPropagation();else if(Tv(i,u),r&4&&-1<tb.indexOf(i)){for(;y!==null;){var _=Vn(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var C=mi(_.pendingLanes);if(C!==0){var b=_;for(b.pendingLanes|=2,b.entangledLanes|=2;C;){var V=1<<31-St(C);b.entanglements[1]|=V,C&=~V}Pi(_),(Qe&6)===0&&(Ec=un()+500,bl(0))}}break;case 31:case 13:b=Ur(_,2),b!==null&&Tn(b,_,2),Ac(),em(_,2)}if(_=nm(u),_===null&&Fh(i,r,u,qc,a),_===y)break;y=_}y!==null&&u.stopPropagation()}else Fh(i,r,u,null,a)}}function nm(i){return i=kn(i),im(i)}var qc=null;function im(i){if(qc=null,i=vi(i),i!==null){var r=l(i);if(r===null)i=null;else{var a=r.tag;if(a===13){if(i=c(r),i!==null)return i;i=null}else if(a===31){if(i=d(r),i!==null)return i;i=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return qc=i,null}function vv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Tr()){case ka:return 2;case Ua:return 8;case Ss:case uf:return 32;case yu:return 268435456;default:return 32}default:return 32}}var sm=!1,$s=null,Qs=null,Xs=null,Pl=new Map,Vl=new Map,Ws=[],tb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tv(i,r){switch(i){case"focusin":case"focusout":$s=null;break;case"dragenter":case"dragleave":Qs=null;break;case"mouseover":case"mouseout":Xs=null;break;case"pointerover":case"pointerout":Pl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vl.delete(r.pointerId)}}function kl(i,r,a,u,y,_){return i===null||i.nativeEvent!==_?(i={blockedOn:r,domEventName:a,eventSystemFlags:u,nativeEvent:_,targetContainers:[y]},r!==null&&(r=Vn(r),r!==null&&yv(r)),i):(i.eventSystemFlags|=u,r=i.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),i)}function nb(i,r,a,u,y){switch(r){case"focusin":return $s=kl($s,i,r,a,u,y),!0;case"dragenter":return Qs=kl(Qs,i,r,a,u,y),!0;case"mouseover":return Xs=kl(Xs,i,r,a,u,y),!0;case"pointerover":var _=y.pointerId;return Pl.set(_,kl(Pl.get(_)||null,i,r,a,u,y)),!0;case"gotpointercapture":return _=y.pointerId,Vl.set(_,kl(Vl.get(_)||null,i,r,a,u,y)),!0}return!1}function Ev(i){var r=vi(i.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=c(a),r!==null){i.blockedOn=r,Qn(i.priority,function(){_v(a)});return}}else if(r===31){if(r=d(a),r!==null){i.blockedOn=r,Qn(i.priority,function(){_v(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Bc(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var a=nm(i.nativeEvent);if(a===null){a=i.nativeEvent;var u=new a.constructor(a.type,a);ja=u,a.target.dispatchEvent(u),ja=null}else return r=Vn(a),r!==null&&yv(r),i.blockedOn=a,!1;r.shift()}return!0}function Sv(i,r,a){Bc(i)&&a.delete(r)}function ib(){sm=!1,$s!==null&&Bc($s)&&($s=null),Qs!==null&&Bc(Qs)&&(Qs=null),Xs!==null&&Bc(Xs)&&(Xs=null),Pl.forEach(Sv),Vl.forEach(Sv)}function Fc(i,r){i.blockedOn===r&&(i.blockedOn=null,sm||(sm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,ib)))}var zc=null;function Av(i){zc!==i&&(zc=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){zc===i&&(zc=null);for(var r=0;r<i.length;r+=3){var a=i[r],u=i[r+1],y=i[r+2];if(typeof u!="function"){if(im(u||a)===null)continue;break}var _=Vn(a);_!==null&&(i.splice(r,3),r-=3,nh(_,{pending:!0,data:y,method:a.method,action:u},u,y))}}))}function Wo(i){function r(V){return Fc(V,i)}$s!==null&&Fc($s,i),Qs!==null&&Fc(Qs,i),Xs!==null&&Fc(Xs,i),Pl.forEach(r),Vl.forEach(r);for(var a=0;a<Ws.length;a++){var u=Ws[a];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Ws.length&&(a=Ws[0],a.blockedOn===null);)Ev(a),a.blockedOn===null&&Ws.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var y=a[u],_=a[u+1],C=y[Ht]||null;if(typeof _=="function")C||Av(a);else if(C){var b=null;if(_&&_.hasAttribute("formAction")){if(y=_,C=_[Ht]||null)b=C.formAction;else if(im(y)!==null)continue}else b=C.action;typeof b=="function"?a[u+1]=b:(a.splice(u,3),u-=3),Av(a)}}}function Cv(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(C){return y=C})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function rm(i){this._internalRoot=i}Hc.prototype.render=rm.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,u=Mn();pv(a,u,i,r,null,null)},Hc.prototype.unmount=rm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;pv(i.current,2,null,i,null,null),Ac(),r[yi]=null}};function Hc(i){this._internalRoot=i}Hc.prototype.unstable_scheduleHydration=function(i){if(i){var r=Au();i={blockedOn:null,target:i,priority:r};for(var a=0;a<Ws.length&&r!==0&&r<Ws[a].priority;a++);Ws.splice(a,0,i),a===0&&Ev(i)}};var Iv=e.version;if(Iv!=="19.2.0")throw Error(s(527,Iv,"19.2.0"));ce.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=m(r),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var sb={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gc.isDisabled&&Gc.supportsFiber)try{jn=Gc.inject(sb),$t=Gc}catch{}}return Ll.createRoot=function(i,r){if(!o(i))throw Error(s(299));var a=!1,u="",y=Dy,_=Py,C=Vy;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError)),r=hv(i,1,!1,null,null,a,u,null,y,_,C,Cv),i[yi]=r.current,Bh(i),new rm(r)},Ll.hydrateRoot=function(i,r,a){if(!o(i))throw Error(s(299));var u=!1,y="",_=Dy,C=Py,b=Vy,V=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(C=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(V=a.formState)),r=hv(i,1,!0,r,a??null,u,y,V,_,C,b,Cv),r.context=mv(null),a=r.current,u=Mn(),u=Cr(u),y=Ls(u),y.callback=null,Os(a,y,u),a=u,r.current.lanes=a,Sr(r,a),Pi(r),i[yi]=r.current,Bh(i),new Hc(r)},Ll.version="19.2.0",Ll}var kv;function pb(){if(kv)return lm.exports;kv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),lm.exports=mb(),lm.exports}var gb=pb();const yb=w0(gb),Uv=()=>({transactions:[],categories:[{id:"cat-1",name:"بقالة",icon:"🛒"},{id:"cat-2",name:"مطاعم",icon:"🍔"},{id:"cat-3",name:"وقود",icon:"⛽"},{id:"cat-4",name:"فواتير",icon:"🧾"},{id:"cat-9",name:"سداد فواتير",icon:"💳"},{id:"cat-5",name:"تسوق",icon:"🛍️"},{id:"cat-6",name:"إيجار",icon:"🏠"},{id:"cat-8",name:"صيدلية",icon:"💊"},{id:"cat-7",name:"أخرى",icon:"💸"}],installments:[],investments:{currentValue:0},cards:{"snb-card":{id:"snb-card",name:"SNB الأهلي",limit:26e3,dueDay:15,statementDay:25,smsSamples:["SNB","الأهلي","إئتمانية"]},"enbd-card":{id:"enbd-card",name:"ENBD الإمارات",limit:1e4,dueDay:18,statementDay:28,smsSamples:["ENBD","الإمارات","Visa card"]}},bankAccounts:{"bank-default":{id:"bank-default",name:"الحساب الجاري",balance:0,smsSamples:["مدى","mada","Alrajhi","الراجحي","Inma","الإنماء","بنك"]}}});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let _b,vb;function Tb(){return{geminiUrl:_b,vertexUrl:vb}}function Eb(n,e,t,s){var o,l;if(!(n!=null&&n.baseUrl)){const c=Tb();return e?(o=c.vertexUrl)!==null&&o!==void 0?o:t:(l=c.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oo{}function ye(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function g(n,e,t){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const d=c.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[d])){const p=n[d];if(Array.isArray(t))for(let m=0;m<p.length;m++){const v=p[m];g(v,e.slice(l+1),t[m])}else for(const m of p)g(m,e.slice(l+1),t)}return}else if(c.endsWith("[0]")){const d=c.slice(0,-3);d in n||(n[d]=[{}]);const p=n[d];g(p[0],e.slice(l+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const s=e[e.length-1],o=n[s];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const o=e[s];if(o.endsWith("[]")){const l=o.slice(0,-2);if(l in n){const c=n[l];return Array.isArray(c)?c.map(d=>f(d,e.slice(s+1),t)):t}else return t}else n=n[o]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dp(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sb(n){const e={},t=f(n,["operationName"]);t!=null&&g(e,["operationName"],t);const s=f(n,["resourceName"]);return s!=null&&g(e,["_url","resourceName"],s),e}function Ab(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&g(e,["response"],Ib(c)),e}function Cb(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["response"]);return c!=null&&g(e,["response"],bb(c)),e}function Ib(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>xb(c))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function bb(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>wb(c))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function xb(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],Mb(t)),e}function wb(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],Db(t)),e}function Rb(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function Nb(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function Mb(n){const e={},t=f(n,["video","uri"]);t!=null&&g(e,["uri"],t);const s=f(n,["video","encodedVideo"]);s!=null&&g(e,["videoBytes"],dp(s));const o=f(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function Db(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],dp(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Lv;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Lv||(Lv={}));var Ov;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Ov||(Ov={}));var rr;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(rr||(rr={}));var qv;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(qv||(qv={}));var Bv;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Bv||(Bv={}));var Fv;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Fv||(Fv={}));var zv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(zv||(zv={}));var Hv;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Hv||(Hv={}));var Gv;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Gv||(Gv={}));var Yv;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Yv||(Yv={}));var Jv;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(Jv||(Jv={}));var Kv;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Kv||(Kv={}));var jv;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(jv||(jv={}));var $v;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY"})($v||($v={}));var Qv;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Qv||(Qv={}));var fd;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(fd||(fd={}));var Xv;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Xv||(Xv={}));var Dm;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Dm||(Dm={}));var Wv;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Wv||(Wv={}));var Zv;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Zv||(Zv={}));var eT;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V"})(eT||(eT={}));var tT;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(tT||(tT={}));var nT;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(nT||(nT={}));var iT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(iT||(iT={}));var sT;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(sT||(sT={}));var rT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(rT||(rT={}));var oT;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(oT||(oT={}));var aT;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(aT||(aT={}));var lT;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(lT||(lT={}));var uT;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(uT||(uT={}));var cT;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(cT||(cT={}));var dT;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(dT||(dT={}));var fT;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(fT||(fT={}));var hT;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(hT||(hT={}));var mT;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(mT||(mT={}));var pT;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(pT||(pT={}));var gT;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(gT||(gT={}));var yT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(yT||(yT={}));var _T;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(_T||(_T={}));var vT;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(vT||(vT={}));var TT;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(TT||(TT={}));var ET;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(ET||(ET={}));var ST;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(ST||(ST={}));var AT;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(AT||(AT={}));var CT;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(CT||(CT={}));var IT;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(IT||(IT={}));var bT;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(bT||(bT={}));var xT;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(xT||(xT={}));var ia;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(ia||(ia={}));class Pm{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ol{get text(){var e,t,s,o,l,c,d,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const E=[];for(const A of(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[x,U]of Object.entries(A))x!=="text"&&x!=="thought"&&(U!==null||U!==void 0)&&E.push(x);if(typeof A.text=="string"){if(typeof A.thought=="boolean"&&A.thought)continue;v=!0,m+=A.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,t,s,o,l,c,d,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const E of(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[A,x]of Object.entries(E))A!=="inlineData"&&(x!==null||x!==void 0)&&v.push(A);E.inlineData&&typeof E.inlineData.data=="string"&&(m+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,s,o,l,c,d,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,s,o,l,c,d,p,m;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,s,o,l,c,d,p,m;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class wT{}class RT{}class Pb{}class Vb{}class kb{}class Ub{}class NT{}class MT{}class DT{}class Lb{}class hd{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const s=new hd;let o;const l=e;return t?o=Cb(l):o=Ab(l),Object.assign(s,o),s}}class PT{}class VT{}class kT{}class Ob{}class qb{}class Bb{}class UT{}class Fb{get text(){var e,t,s;let o="",l=!1;const c=[];for(const d of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[p,m]of Object.entries(d))p!=="text"&&p!=="thought"&&m!==null&&c.push(p);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,o+=d.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var e,t,s;let o="";const l=[];for(const c of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[d,p]of Object.entries(c))d!=="inlineData"&&p!==null&&l.push(d);c.inlineData&&typeof c.inlineData.data=="string"&&(o+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class zb{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ke(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function R0(n,e){const t=Ke(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function N0(n){return Array.isArray(n)?n.map(e=>md(e)):[md(n)]}function md(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function M0(n){const e=md(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function D0(n){const e=md(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function LT(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function P0(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>LT(e)):[LT(n)]}function Vm(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function OT(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function qT(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function an(n){if(n==null)throw new Error("ContentUnion is required");return Vm(n)?n:{role:"user",parts:P0(n)}}function fp(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=an(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=an(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>an(t)):[an(e)]}function Kn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(OT(n)||qT(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[an(n)]}const e=[],t=[],s=Vm(n[0]);for(const o of n){const l=Vm(o);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(o);else{if(OT(o)||qT(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return s||e.push({role:"user",parts:P0(t)}),e}function Hb(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(rr).includes(t[0].toUpperCase())?t[0].toUpperCase():rr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(rr).includes(s.toUpperCase())?s.toUpperCase():rr.TYPE_UNSPECIFIED})}}function oa(n){const e={},t=["items"],s=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&Hb(n.type,e);for(const[c,d]of Object.entries(n))if(d!=null)if(c=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(rr).includes(d.toUpperCase())?d.toUpperCase():rr.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=oa(d);else if(s.includes(c)){const p=[];for(const m of d){if(m.type=="null"){e.nullable=!0;continue}p.push(oa(m))}e[c]=p}else if(o.includes(c)){const p={};for(const[m,v]of Object.entries(d))p[m]=oa(v);e[c]=p}else{if(c==="additionalProperties")continue;e[c]=d}return e}function hp(n){return oa(n)}function mp(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function pp(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Sa(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=oa(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=oa(e.response));return n}function Aa(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function Gb(n,e,t,s=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function vs(n,e){if(typeof e!="string")throw new Error("name must be a string");return Gb(n,e,"cachedContents")}function V0(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function _r(n){return dp(n)}function Yb(n){return n!=null&&typeof n=="object"&&"name"in n}function Jb(n){return n!=null&&typeof n=="object"&&"video"in n}function Kb(n){return n!=null&&typeof n=="object"&&"uri"in n}function k0(n){var e;let t;if(Yb(n)&&(t=n.name),!(Kb(n)&&(t=n.uri,t===void 0))&&!(Jb(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function U0(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function L0(n){for(const e of["models","tunedModels","publisherModels"])if(jb(n,e))return n[e];return[]}function jb(n,e){return n!==null&&typeof n=="object"&&e in n}function $b(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function Qb(n,e={}){const t=[],s=new Set;for(const o of n){const l=o.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const c=$b(o,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function O0(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function Xb(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function q0(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let l=!1;for(const c of o){if(typeof c!="object"||c===null)continue;const p=c.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Ca(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function B0(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wb(n){const e={},t=f(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const s=f(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>wx(c))),g(e,["inlinedResponses"],l)}const o=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["inlinedEmbedContentResponses"],l)}return e}function Zb(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const s=f(n,["gcsDestination","outputUriPrefix"]);s!=null&&g(e,["gcsUri"],s);const o=f(n,["bigqueryDestination","outputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function ex(n){const e={},t=f(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const s=f(n,["gcsUri"]);s!=null&&g(e,["gcsDestination","outputUriPrefix"],s);const o=f(n,["bigqueryUri"]);if(o!=null&&g(e,["bigqueryDestination","outputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ql(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata","displayName"]);s!=null&&g(e,["displayName"],s);const o=f(n,["metadata","state"]);o!=null&&g(e,["state"],B0(o));const l=f(n,["metadata","createTime"]);l!=null&&g(e,["createTime"],l);const c=f(n,["metadata","endTime"]);c!=null&&g(e,["endTime"],c);const d=f(n,["metadata","updateTime"]);d!=null&&g(e,["updateTime"],d);const p=f(n,["metadata","model"]);p!=null&&g(e,["model"],p);const m=f(n,["metadata","output"]);return m!=null&&g(e,["dest"],Wb(q0(m))),e}function km(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const o=f(n,["state"]);o!=null&&g(e,["state"],B0(o));const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["createTime"]);c!=null&&g(e,["createTime"],c);const d=f(n,["startTime"]);d!=null&&g(e,["startTime"],d);const p=f(n,["endTime"]);p!=null&&g(e,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(e,["updateTime"],m);const v=f(n,["model"]);v!=null&&g(e,["model"],v);const E=f(n,["inputConfig"]);E!=null&&g(e,["src"],tx(E));const A=f(n,["outputConfig"]);return A!=null&&g(e,["dest"],Zb(q0(A))),e}function tx(n){const e={},t=f(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const s=f(n,["gcsSource","uris"]);s!=null&&g(e,["gcsUri"],s);const o=f(n,["bigquerySource","inputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function nx(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&g(t,["fileName"],s);const o=f(e,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>xx(n,c))),g(t,["requests","requests"],l)}return t}function ix(n){const e={},t=f(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const s=f(n,["gcsUri"]);s!=null&&g(e,["gcsSource","uris"],s);const o=f(n,["bigqueryUri"]);if(o!=null&&g(e,["bigquerySource","inputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function sx(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&g(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function rx(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ca(n,s)),t}function ox(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ca(n,s)),t}function ax(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],lx(s));const o=f(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const l=f(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const c=f(n,["urlContextMetadata"]);c!=null&&g(e,["urlContextMetadata"],c);const d=f(n,["avgLogprobs"]);d!=null&&g(e,["avgLogprobs"],d);const p=f(n,["groundingMetadata"]);p!=null&&g(e,["groundingMetadata"],p);const m=f(n,["index"]);m!=null&&g(e,["index"],m);const v=f(n,["logprobsResult"]);v!=null&&g(e,["logprobsResult"],v);const E=f(n,["safetyRatings"]);if(E!=null){let A=E;Array.isArray(A)&&(A=A.map(x=>x)),g(e,["safetyRatings"],A)}return e}function lx(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["citations"],s)}return e}function F0(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>kx(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function ux(n,e){const t={},s=f(n,["displayName"]);if(e!==void 0&&s!=null&&g(e,["batch","displayName"],s),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function cx(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const o=f(n,["dest"]);return e!==void 0&&o!=null&&g(e,["outputConfig"],ex(Xb(o))),t}function BT(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["src"]);o!=null&&g(t,["batch","inputConfig"],nx(n,O0(n,o)));const l=f(e,["config"]);return l!=null&&ux(l,t),t}function dx(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],Ke(n,s));const o=f(e,["src"]);o!=null&&g(t,["inputConfig"],ix(O0(n,o)));const l=f(e,["config"]);return l!=null&&cx(l,t),t}function fx(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["batch","displayName"],s),t}function fm(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["src"]);o!=null&&g(t,["batch","inputConfig"],vx(n,o));const l=f(e,["config"]);return l!=null&&fx(l,t),t}function hx(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ca(n,s)),t}function mx(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ca(n,s)),t}function px(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);return l!=null&&g(e,["error"],l),e}function gx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);return l!=null&&g(e,["error"],l),e}function yx(n,e){const t={},s=f(e,["contents"]);if(s!=null){let l=fp(n,s);Array.isArray(l)&&(l=l.map(c=>c)),g(t,["requests[]","request","content"],l)}const o=f(e,["config"]);return o!=null&&g(t,["_self"],_x(o,t)),t}function _x(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function vx(n,e){const t={},s=f(e,["fileName"]);s!=null&&g(t,["file_name"],s);const o=f(e,["inlinedRequests"]);return o!=null&&g(t,["requests"],yx(n,o)),t}function Tx(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Ex(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],F0(an(o)));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&g(s,["topP"],c);const d=f(e,["topK"]);d!=null&&g(s,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&g(s,["responseLogprobs"],E);const A=f(e,["logprobs"]);A!=null&&g(s,["logprobs"],A);const x=f(e,["presencePenalty"]);x!=null&&g(s,["presencePenalty"],x);const U=f(e,["frequencyPenalty"]);U!=null&&g(s,["frequencyPenalty"],U);const B=f(e,["seed"]);B!=null&&g(s,["seed"],B);const z=f(e,["responseMimeType"]);z!=null&&g(s,["responseMimeType"],z);const ee=f(e,["responseSchema"]);ee!=null&&g(s,["responseSchema"],hp(ee));const te=f(e,["responseJsonSchema"]);if(te!=null&&g(s,["responseJsonSchema"],te),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const $=f(e,["safetySettings"]);if(t!==void 0&&$!=null){let q=$;Array.isArray(q)&&(q=q.map(D=>Ux(D))),g(t,["safetySettings"],q)}const F=f(e,["tools"]);if(t!==void 0&&F!=null){let q=Aa(F);Array.isArray(q)&&(q=q.map(D=>Lx(Sa(D)))),g(t,["tools"],q)}const ne=f(e,["toolConfig"]);if(t!==void 0&&ne!=null&&g(t,["toolConfig"],ne),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const oe=f(e,["cachedContent"]);t!==void 0&&oe!=null&&g(t,["cachedContent"],vs(n,oe));const R=f(e,["responseModalities"]);R!=null&&g(s,["responseModalities"],R);const M=f(e,["mediaResolution"]);M!=null&&g(s,["mediaResolution"],M);const N=f(e,["speechConfig"]);if(N!=null&&g(s,["speechConfig"],mp(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=f(e,["thinkingConfig"]);k!=null&&g(s,["thinkingConfig"],k);const L=f(e,["imageConfig"]);return L!=null&&g(s,["imageConfig"],L),s}function Sx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>ax(m))),g(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const l=f(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&g(e,["responseId"],c);const d=f(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function Ax(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ca(n,s)),t}function Cx(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ca(n,s)),t}function Ix(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function bx(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&g(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function xx(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["request","model"],Ke(n,s));const o=f(e,["contents"]);if(o!=null){let d=Kn(o);Array.isArray(d)&&(d=d.map(p=>F0(p))),g(t,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&g(t,["metadata"],l);const c=f(e,["config"]);return c!=null&&g(t,["request","generationConfig"],Ex(n,c,f(t,["request"],{}))),t}function wx(n){const e={},t=f(n,["response"]);t!=null&&g(e,["response"],Sx(t));const s=f(n,["error"]);return s!=null&&g(e,["error"],s),e}function Rx(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);if(e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function Nx(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const l=f(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),t}function Mx(n){const e={},t=f(n,["config"]);return t!=null&&Rx(t,e),e}function Dx(n){const e={},t=f(n,["config"]);return t!=null&&Nx(t,e),e}function Px(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>ql(c))),g(e,["batchJobs"],l)}return e}function Vx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>km(c))),g(e,["batchJobs"],l)}return e}function kx(n){const e={},t=f(n,["videoMetadata"]);t!=null&&g(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&g(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&g(e,["inlineData"],sx(o));const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],Tx(l));const c=f(n,["thoughtSignature"]);c!=null&&g(e,["thoughtSignature"],c);const d=f(n,["functionCall"]);d!=null&&g(e,["functionCall"],d);const p=f(n,["codeExecutionResult"]);p!=null&&g(e,["codeExecutionResult"],p);const m=f(n,["executableCode"]);m!=null&&g(e,["executableCode"],m);const v=f(n,["functionResponse"]);v!=null&&g(e,["functionResponse"],v);const E=f(n,["text"]);return E!=null&&g(e,["text"],E),e}function Ux(n){const e={};if(f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=f(n,["category"]);t!=null&&g(e,["category"],t);const s=f(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function Lx(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&g(e,["googleSearch"],bx(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&g(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],Ix(l));const c=f(n,["urlContext"]);c!=null&&g(e,["urlContext"],c);const d=f(n,["computerUse"]);d!=null&&g(e,["computerUse"],d);const p=f(n,["codeExecution"]);return p!=null&&g(e,["codeExecution"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Zr;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Zr||(Zr={}));class su{constructor(e,t,s,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,o)}init(e,t,s){var o,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(o=c.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ox extends oo{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{var s,o;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(t.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(t);const d=this.createInlinedEmbedContentRequest(t),p=d.path,m=d.body,v=fm(this.apiClient,t)._query||{};return this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(A=>A.json()).then(A=>ql(A))},this.list=async(t={})=>new su(Zr.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=BT(this.apiClient,e),s=t._url,o=ye("{model}:batchGenerateContent",s),d=t.batch.inputConfig.requests,p=d.requests,m=[];for(const v of p){const E=Object.assign({},v);if(E.systemInstruction){const A=E.systemInstruction;delete E.systemInstruction;const x=E.request;x.systemInstruction=A,E.request=x}m.push(E)}return d.requests=m,delete t.config,delete t._url,delete t._query,{path:o,body:t}}createInlinedEmbedContentRequest(e){const t=fm(this.apiClient,e),s=t._url,o=ye("{model}:asyncBatchEmbedContent",s),d=t.batch.inputConfig.requests,p=d.requests,m=[];delete d.config;for(const v of p){const E=Object.assign({},v),A=E.request;for(const x in E)x!=="request"&&(A[x]=E[x],delete E[x]);m.push(E)}return d.requests=m,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},o=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${o}`),s.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${o}`;else if(c)s.dest=`${c}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=dx(this.apiClient,e);return d=ye("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>km(v))}else{const m=BT(this.apiClient,e);return d=ye("{model}:batchGenerateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>ql(v))}}async createEmbeddingsInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=fm(this.apiClient,e);return l=ye("{model}:asyncBatchEmbedContent",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>ql(p))}}async get(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=Cx(this.apiClient,e);return d=ye("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>km(v))}else{const m=Ax(this.apiClient,e);return d=ye("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>ql(v))}}async cancel(e){var t,s,o,l;let c="",d={};if(this.apiClient.isVertexAI()){const p=ox(this.apiClient,e);c=ye("batchPredictionJobs/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=rx(this.apiClient,e);c=ye("batches/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=Dx(e);return d=ye("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=Vx(v),A=new UT;return Object.assign(A,E),A})}else{const m=Mx(e);return d=ye("batches",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=Px(v),A=new UT;return Object.assign(A,E),A})}}async delete(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=mx(this.apiClient,e);return d=ye("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>gx(v))}else{const m=hx(this.apiClient,e);return d=ye("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>px(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qx(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&g(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function FT(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>ow(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function Bx(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const l=f(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let v=Kn(c);Array.isArray(v)&&(v=v.map(E=>FT(E))),g(e,["contents"],v)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],FT(an(d)));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let v=p;Array.isArray(v)&&(v=v.map(E=>aw(E))),g(e,["tools"],v)}const m=f(n,["toolConfig"]);if(e!==void 0&&m!=null&&g(e,["toolConfig"],m),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function Fx(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const l=f(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let E=Kn(c);Array.isArray(E)&&(E=E.map(A=>A)),g(e,["contents"],E)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],an(d));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let E=p;Array.isArray(E)&&(E=E.map(A=>lw(A))),g(e,["tools"],E)}const m=f(n,["toolConfig"]);e!==void 0&&m!=null&&g(e,["toolConfig"],m);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&g(e,["encryption_spec","kmsKeyName"],v),t}function zx(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],R0(n,s));const o=f(e,["config"]);return o!=null&&Bx(o,t),t}function Hx(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],R0(n,s));const o=f(e,["config"]);return o!=null&&Fx(o,t),t}function Gx(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],vs(n,s)),t}function Yx(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],vs(n,s)),t}function Jx(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function Kx(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function jx(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function $x(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&g(e,["response"],c);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function Qx(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],vs(n,s)),t}function Xx(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],vs(n,s)),t}function Wx(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function Zx(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&g(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function ew(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function tw(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function nw(n){const e={},t=f(n,["config"]);return t!=null&&ew(t,e),e}function iw(n){const e={},t=f(n,["config"]);return t!=null&&tw(t,e),e}function sw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["cachedContents"],l)}return e}function rw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["cachedContents"],l)}return e}function ow(n){const e={},t=f(n,["videoMetadata"]);t!=null&&g(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&g(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&g(e,["inlineData"],qx(o));const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],jx(l));const c=f(n,["thoughtSignature"]);c!=null&&g(e,["thoughtSignature"],c);const d=f(n,["functionCall"]);d!=null&&g(e,["functionCall"],d);const p=f(n,["codeExecutionResult"]);p!=null&&g(e,["codeExecutionResult"],p);const m=f(n,["executableCode"]);m!=null&&g(e,["executableCode"],m);const v=f(n,["functionResponse"]);v!=null&&g(e,["functionResponse"],v);const E=f(n,["text"]);return E!=null&&g(e,["text"],E),e}function aw(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&g(e,["googleSearch"],Zx(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&g(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],Wx(l));const c=f(n,["urlContext"]);c!=null&&g(e,["urlContext"],c);const d=f(n,["computerUse"]);d!=null&&g(e,["computerUse"],d);const p=f(n,["codeExecution"]);return p!=null&&g(e,["codeExecution"],p),e}function lw(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>$x(A))),g(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const o=f(n,["googleSearch"]);o!=null&&g(e,["googleSearch"],o);const l=f(n,["googleSearchRetrieval"]);l!=null&&g(e,["googleSearchRetrieval"],l);const c=f(n,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const p=f(n,["urlContext"]);p!=null&&g(e,["urlContext"],p);const m=f(n,["computerUse"]);m!=null&&g(e,["computerUse"],m);const v=f(n,["codeExecution"]);return v!=null&&g(e,["codeExecution"],v),e}function uw(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function cw(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function dw(n,e){const t={},s=f(e,["name"]);s!=null&&g(t,["_url","name"],vs(n,s));const o=f(e,["config"]);return o!=null&&uw(o,t),t}function fw(n,e){const t={},s=f(e,["name"]);s!=null&&g(t,["_url","name"],vs(n,s));const o=f(e,["config"]);return o!=null&&cw(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hw extends oo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new su(Zr.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=Hx(this.apiClient,e);return d=ye("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=zx(this.apiClient,e);return d=ye("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=Xx(this.apiClient,e);return d=ye("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=Qx(this.apiClient,e);return d=ye("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=Yx(this.apiClient,e);return d=ye("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=Kx(v),A=new VT;return Object.assign(A,E),A})}else{const m=Gx(this.apiClient,e);return d=ye("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=Jx(v),A=new VT;return Object.assign(A,E),A})}}async update(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=fw(this.apiClient,e);return d=ye("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=dw(this.apiClient,e);return d=ye("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=iw(e);return d=ye("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=rw(v),A=new kT;return Object.assign(A,E),A})}else{const m=nw(e);return d=ye("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=sw(v),A=new kT;return Object.assign(A,E),A})}}}function zT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ct(n){return this instanceof ct?(this.v=n,this):new ct(n)}function aa(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(x){return function(U){return Promise.resolve(U).then(x,E)}}function d(x,U){s[x]&&(o[x]=function(B){return new Promise(function(z,ee){l.push([x,B,z,ee])>1||p(x,B)})},U&&(o[x]=U(o[x])))}function p(x,U){try{m(s[x](U))}catch(B){A(l[0][3],B)}}function m(x){x.value instanceof ct?Promise.resolve(x.value.v).then(v,E):A(l[0][2],x)}function v(x){p("next",x)}function E(x){p("throw",x)}function A(x,U){x(U),l.shift(),l.length&&p(l[0][0],l[0][1])}}function Hl(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof zT=="function"?zT(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(c){return new Promise(function(d,p){c=n[l](c),o(d,p,c.done,c.value)})}}function o(l,c,d,p){Promise.resolve(p).then(function(m){l({value:m,done:d})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mw(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:z0(t)}function z0(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function pw(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function HT(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const o=[];let l=!0;for(;s<t&&n[s].role==="model";)o.push(n[s]),l&&!z0(n[s])&&(l=!1),s++;l?e.push(...o):e.pop()}return e}class gw{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new yw(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class yw{constructor(e,t,s,o={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),pw(l)}async sendMessage(e){var t;await this.sendPromise;const s=an(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,c,d;const p=await o,m=(c=(l=p.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,v=p.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let A=[];v!=null&&(A=(d=v.slice(E))!==null&&d!==void 0?d:[]);const x=m?[m]:[];this.recordHistory(s,x,A)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const s=an(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?HT(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,o;return aa(this,arguments,function*(){var c,d,p,m;const v=[];try{for(var E=!0,A=Hl(e),x;x=yield ct(A.next()),c=x.done,!c;E=!0){m=x.value,E=!1;const U=m;if(mw(U)){const B=(o=(s=U.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content;B!==void 0&&v.push(B)}yield yield ct(U)}}catch(U){d={error:U}}finally{try{!E&&!c&&(p=A.return)&&(yield ct(p.call(A)))}finally{if(d)throw d.error}}this.recordHistory(t,v)})}recordHistory(e,t,s){let o=[];t.length>0&&t.every(l=>l.role!==void 0)?o=t:o.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...HT(s)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ud extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ud.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _w(n){const e={},t=f(n,["file"]);return t!=null&&g(e,["file"],t),e}function vw(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function Tw(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],k0(t)),e}function Ew(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function Sw(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],k0(t)),e}function Aw(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function Cw(n){const e={},t=f(n,["config"]);return t!=null&&Aw(t,e),e}function Iw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bw extends oo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new su(Zr.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Cw(e);return l=ye("files",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=Iw(p),v=new Ob;return Object.assign(v,m),v})}}async createInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=_w(e);return l=ye("upload/v1beta/files",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const m=vw(p),v=new qb;return Object.assign(v,m),v})}}async get(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Sw(e);return l=ye("files/{file}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Tw(e);return l=ye("files/{file}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=Ew(p),v=new Bb;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function td(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&g(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function xw(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>zw(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function ww(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Rw(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&g(e,["response"],c);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function Nw(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=f(n,["audioTimestamp"]);s!=null&&g(e,["audioTimestamp"],s);const o=f(n,["candidateCount"]);o!=null&&g(e,["candidateCount"],o);const l=f(n,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const c=f(n,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const d=f(n,["logprobs"]);d!=null&&g(e,["logprobs"],d);const p=f(n,["maxOutputTokens"]);p!=null&&g(e,["maxOutputTokens"],p);const m=f(n,["mediaResolution"]);m!=null&&g(e,["mediaResolution"],m);const v=f(n,["presencePenalty"]);v!=null&&g(e,["presencePenalty"],v);const E=f(n,["responseJsonSchema"]);E!=null&&g(e,["responseJsonSchema"],E);const A=f(n,["responseLogprobs"]);A!=null&&g(e,["responseLogprobs"],A);const x=f(n,["responseMimeType"]);x!=null&&g(e,["responseMimeType"],x);const U=f(n,["responseModalities"]);U!=null&&g(e,["responseModalities"],U);const B=f(n,["responseSchema"]);B!=null&&g(e,["responseSchema"],B);const z=f(n,["routingConfig"]);z!=null&&g(e,["routingConfig"],z);const ee=f(n,["seed"]);ee!=null&&g(e,["seed"],ee);const te=f(n,["speechConfig"]);te!=null&&g(e,["speechConfig"],H0(te));const $=f(n,["stopSequences"]);$!=null&&g(e,["stopSequences"],$);const F=f(n,["temperature"]);F!=null&&g(e,["temperature"],F);const ne=f(n,["thinkingConfig"]);ne!=null&&g(e,["thinkingConfig"],ne);const oe=f(n,["topK"]);oe!=null&&g(e,["topK"],oe);const R=f(n,["topP"]);return R!=null&&g(e,["topP"],R),e}function Mw(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function Dw(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&g(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Pw(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],pp(E));const A=f(n,["thinkingConfig"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","thinkingConfig"],A);const x=f(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],x);const U=f(n,["systemInstruction"]);e!==void 0&&U!=null&&g(e,["setup","systemInstruction"],xw(an(U)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let oe=Aa(B);Array.isArray(oe)&&(oe=oe.map(R=>Gw(Sa(R)))),g(e,["setup","tools"],oe)}const z=f(n,["sessionResumption"]);e!==void 0&&z!=null&&g(e,["setup","sessionResumption"],Hw(z));const ee=f(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&g(e,["setup","inputAudioTranscription"],ee);const te=f(n,["outputAudioTranscription"]);e!==void 0&&te!=null&&g(e,["setup","outputAudioTranscription"],te);const $=f(n,["realtimeInputConfig"]);e!==void 0&&$!=null&&g(e,["setup","realtimeInputConfig"],$);const F=f(n,["contextWindowCompression"]);e!==void 0&&F!=null&&g(e,["setup","contextWindowCompression"],F);const ne=f(n,["proactivity"]);return e!==void 0&&ne!=null&&g(e,["setup","proactivity"],ne),t}function Vw(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],Nw(s));const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],H0(pp(E)));const A=f(n,["thinkingConfig"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","thinkingConfig"],A);const x=f(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],x);const U=f(n,["systemInstruction"]);e!==void 0&&U!=null&&g(e,["setup","systemInstruction"],an(U));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let oe=Aa(B);Array.isArray(oe)&&(oe=oe.map(R=>Yw(Sa(R)))),g(e,["setup","tools"],oe)}const z=f(n,["sessionResumption"]);e!==void 0&&z!=null&&g(e,["setup","sessionResumption"],z);const ee=f(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&g(e,["setup","inputAudioTranscription"],ee);const te=f(n,["outputAudioTranscription"]);e!==void 0&&te!=null&&g(e,["setup","outputAudioTranscription"],te);const $=f(n,["realtimeInputConfig"]);e!==void 0&&$!=null&&g(e,["setup","realtimeInputConfig"],$);const F=f(n,["contextWindowCompression"]);e!==void 0&&F!=null&&g(e,["setup","contextWindowCompression"],F);const ne=f(n,["proactivity"]);return e!==void 0&&ne!=null&&g(e,["setup","proactivity"],ne),t}function kw(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],Ke(n,s));const o=f(e,["config"]);return o!=null&&g(t,["config"],Pw(o,t)),t}function Uw(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],Ke(n,s));const o=f(e,["config"]);return o!=null&&g(t,["config"],Vw(o,t)),t}function Lw(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function Ow(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["weightedPrompts"],s)}return e}function qw(n){const e={},t=f(n,["media"]);if(t!=null){let m=N0(t);Array.isArray(m)&&(m=m.map(v=>td(v))),g(e,["mediaChunks"],m)}const s=f(n,["audio"]);s!=null&&g(e,["audio"],td(D0(s)));const o=f(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const l=f(n,["video"]);l!=null&&g(e,["video"],td(M0(l)));const c=f(n,["text"]);c!=null&&g(e,["text"],c);const d=f(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function Bw(n){const e={},t=f(n,["media"]);if(t!=null){let m=N0(t);Array.isArray(m)&&(m=m.map(v=>v)),g(e,["mediaChunks"],m)}const s=f(n,["audio"]);s!=null&&g(e,["audio"],D0(s));const o=f(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const l=f(n,["video"]);l!=null&&g(e,["video"],M0(l));const c=f(n,["text"]);c!=null&&g(e,["text"],c);const d=f(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function Fw(n){const e={},t=f(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const s=f(n,["serverContent"]);s!=null&&g(e,["serverContent"],s);const o=f(n,["toolCall"]);o!=null&&g(e,["toolCall"],o);const l=f(n,["toolCallCancellation"]);l!=null&&g(e,["toolCallCancellation"],l);const c=f(n,["usageMetadata"]);c!=null&&g(e,["usageMetadata"],Jw(c));const d=f(n,["goAway"]);d!=null&&g(e,["goAway"],d);const p=f(n,["sessionResumptionUpdate"]);return p!=null&&g(e,["sessionResumptionUpdate"],p),e}function zw(n){const e={},t=f(n,["videoMetadata"]);t!=null&&g(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&g(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&g(e,["inlineData"],td(o));const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],ww(l));const c=f(n,["thoughtSignature"]);c!=null&&g(e,["thoughtSignature"],c);const d=f(n,["functionCall"]);d!=null&&g(e,["functionCall"],d);const p=f(n,["codeExecutionResult"]);p!=null&&g(e,["codeExecutionResult"],p);const m=f(n,["executableCode"]);m!=null&&g(e,["executableCode"],m);const v=f(n,["functionResponse"]);v!=null&&g(e,["functionResponse"],v);const E=f(n,["text"]);return E!=null&&g(e,["text"],E),e}function Hw(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function H0(n){const e={},t=f(n,["voiceConfig"]);if(t!=null&&g(e,["voiceConfig"],t),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=f(n,["languageCode"]);return s!=null&&g(e,["languageCode"],s),e}function Gw(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&g(e,["googleSearch"],Dw(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&g(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],Mw(l));const c=f(n,["urlContext"]);c!=null&&g(e,["urlContext"],c);const d=f(n,["computerUse"]);d!=null&&g(e,["computerUse"],d);const p=f(n,["codeExecution"]);return p!=null&&g(e,["codeExecution"],p),e}function Yw(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>Rw(A))),g(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const o=f(n,["googleSearch"]);o!=null&&g(e,["googleSearch"],o);const l=f(n,["googleSearchRetrieval"]);l!=null&&g(e,["googleSearchRetrieval"],l);const c=f(n,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const p=f(n,["urlContext"]);p!=null&&g(e,["urlContext"],p);const m=f(n,["computerUse"]);m!=null&&g(e,["computerUse"],m);const v=f(n,["codeExecution"]);return v!=null&&g(e,["codeExecution"],v),e}function Jw(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const s=f(n,["cachedContentTokenCount"]);s!=null&&g(e,["cachedContentTokenCount"],s);const o=f(n,["candidatesTokenCount"]);o!=null&&g(e,["responseTokenCount"],o);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&g(e,["toolUsePromptTokenCount"],l);const c=f(n,["thoughtsTokenCount"]);c!=null&&g(e,["thoughtsTokenCount"],c);const d=f(n,["totalTokenCount"]);d!=null&&g(e,["totalTokenCount"],d);const p=f(n,["promptTokensDetails"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(U=>U)),g(e,["promptTokensDetails"],x)}const m=f(n,["cacheTokensDetails"]);if(m!=null){let x=m;Array.isArray(x)&&(x=x.map(U=>U)),g(e,["cacheTokensDetails"],x)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let x=v;Array.isArray(x)&&(x=x.map(U=>U)),g(e,["responseTokensDetails"],x)}const E=f(n,["toolUsePromptTokensDetails"]);if(E!=null){let x=E;Array.isArray(x)&&(x=x.map(U=>U)),g(e,["toolUsePromptTokensDetails"],x)}const A=f(n,["trafficType"]);return A!=null&&g(e,["trafficType"],A),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kw(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&g(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function jw(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],$w(s));const o=f(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const l=f(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const c=f(n,["urlContextMetadata"]);c!=null&&g(e,["urlContextMetadata"],c);const d=f(n,["avgLogprobs"]);d!=null&&g(e,["avgLogprobs"],d);const p=f(n,["groundingMetadata"]);p!=null&&g(e,["groundingMetadata"],p);const m=f(n,["index"]);m!=null&&g(e,["index"],m);const v=f(n,["logprobsResult"]);v!=null&&g(e,["logprobsResult"],v);const E=f(n,["safetyRatings"]);if(E!=null){let A=E;Array.isArray(A)&&(A=A.map(x=>x)),g(e,["safetyRatings"],A)}return e}function $w(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["citations"],s)}return e}function Qw(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["contents"]);if(o!=null){let l=Kn(o);Array.isArray(l)&&(l=l.map(c=>c)),g(t,["contents"],l)}return t}function Xw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["tokensInfo"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),g(e,["tokensInfo"],o)}return e}function Ww(n){const e={},t=f(n,["values"]);t!=null&&g(e,["values"],t);const s=f(n,["statistics"]);return s!=null&&g(e,["statistics"],Zw(s)),e}function Zw(n){const e={},t=f(n,["truncated"]);t!=null&&g(e,["truncated"],t);const s=f(n,["token_count"]);return s!=null&&g(e,["tokenCount"],s),e}function Ld(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>sN(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function eR(n){const e={},t=f(n,["controlType"]);t!=null&&g(e,["controlType"],t);const s=f(n,["enableControlImageComputation"]);return s!=null&&g(e,["computeControl"],s),e}function tR(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function nR(n,e){const t={},s=f(n,["systemInstruction"]);e!==void 0&&s!=null&&g(e,["systemInstruction"],an(s));const o=f(n,["tools"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>j0(d))),g(e,["tools"],c)}const l=f(n,["generationConfig"]);return e!==void 0&&l!=null&&g(e,["generationConfig"],YR(l)),t}function iR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["contents"]);if(o!=null){let c=Kn(o);Array.isArray(c)&&(c=c.map(d=>Ld(d))),g(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&tR(l),t}function sR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["contents"]);if(o!=null){let c=Kn(o);Array.isArray(c)&&(c=c.map(d=>d)),g(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&nR(l,t),t}function rR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);s!=null&&g(e,["totalTokens"],s);const o=f(n,["cachedContentTokenCount"]);return o!=null&&g(e,["cachedContentTokenCount"],o),e}function oR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);return s!=null&&g(e,["totalTokens"],s),e}function aR(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],Ke(n,s)),t}function lR(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],Ke(n,s)),t}function uR(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function cR(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function dR(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&g(e,["parameters","aspectRatio"],c);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const A=f(n,["includeRaiReason"]);e!==void 0&&A!=null&&g(e,["parameters","includeRaiReason"],A);const x=f(n,["language"]);e!==void 0&&x!=null&&g(e,["parameters","language"],x);const U=f(n,["outputMimeType"]);e!==void 0&&U!=null&&g(e,["parameters","outputOptions","mimeType"],U);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&g(e,["parameters","outputOptions","compressionQuality"],B);const z=f(n,["addWatermark"]);e!==void 0&&z!=null&&g(e,["parameters","addWatermark"],z);const ee=f(n,["labels"]);e!==void 0&&ee!=null&&g(e,["labels"],ee);const te=f(n,["editMode"]);e!==void 0&&te!=null&&g(e,["parameters","editMode"],te);const $=f(n,["baseSteps"]);return e!==void 0&&$!=null&&g(e,["parameters","editConfig","baseSteps"],$),t}function fR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>cN(p))),g(t,["instances[0]","referenceImages"],d)}const c=f(e,["config"]);return c!=null&&dR(c,t),t}function hR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Od(l))),g(e,["generatedImages"],o)}return e}function mR(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function pR(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["instances[]","task_type"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["instances[]","title"],o);const l=f(n,["outputDimensionality"]);e!==void 0&&l!=null&&g(e,["parameters","outputDimensionality"],l);const c=f(n,["mimeType"]);e!==void 0&&c!=null&&g(e,["instances[]","mimeType"],c);const d=f(n,["autoTruncate"]);return e!==void 0&&d!=null&&g(e,["parameters","autoTruncate"],d),t}function gR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["contents"]);if(o!=null){let d=fp(n,o);Array.isArray(d)&&(d=d.map(p=>p)),g(t,["requests[]","content"],d)}const l=f(e,["config"]);l!=null&&mR(l,t);const c=f(e,["model"]);return c!==void 0&&g(t,["requests[]","model"],Ke(n,c)),t}function yR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["contents"]);if(o!=null){let c=fp(n,o);Array.isArray(c)&&(c=c.map(d=>d)),g(t,["instances[]","content"],c)}const l=f(e,["config"]);return l!=null&&pR(l,t),t}function _R(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["embeddings"],l)}const o=f(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function vR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Ww(c))),g(e,["embeddings"],l)}const o=f(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function TR(n){const e={},t=f(n,["endpoint"]);t!=null&&g(e,["name"],t);const s=f(n,["deployedModelId"]);return s!=null&&g(e,["deployedModelId"],s),e}function ER(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function SR(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&g(e,["response"],c);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function AR(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],Ld(an(o)));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&g(s,["topP"],c);const d=f(e,["topK"]);d!=null&&g(s,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&g(s,["responseLogprobs"],E);const A=f(e,["logprobs"]);A!=null&&g(s,["logprobs"],A);const x=f(e,["presencePenalty"]);x!=null&&g(s,["presencePenalty"],x);const U=f(e,["frequencyPenalty"]);U!=null&&g(s,["frequencyPenalty"],U);const B=f(e,["seed"]);B!=null&&g(s,["seed"],B);const z=f(e,["responseMimeType"]);z!=null&&g(s,["responseMimeType"],z);const ee=f(e,["responseSchema"]);ee!=null&&g(s,["responseSchema"],hp(ee));const te=f(e,["responseJsonSchema"]);if(te!=null&&g(s,["responseJsonSchema"],te),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const $=f(e,["safetySettings"]);if(t!==void 0&&$!=null){let q=$;Array.isArray(q)&&(q=q.map(D=>dN(D))),g(t,["safetySettings"],q)}const F=f(e,["tools"]);if(t!==void 0&&F!=null){let q=Aa(F);Array.isArray(q)&&(q=q.map(D=>yN(Sa(D)))),g(t,["tools"],q)}const ne=f(e,["toolConfig"]);if(t!==void 0&&ne!=null&&g(t,["toolConfig"],ne),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const oe=f(e,["cachedContent"]);t!==void 0&&oe!=null&&g(t,["cachedContent"],vs(n,oe));const R=f(e,["responseModalities"]);R!=null&&g(s,["responseModalities"],R);const M=f(e,["mediaResolution"]);M!=null&&g(s,["mediaResolution"],M);const N=f(e,["speechConfig"]);if(N!=null&&g(s,["speechConfig"],mp(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=f(e,["thinkingConfig"]);k!=null&&g(s,["thinkingConfig"],k);const L=f(e,["imageConfig"]);return L!=null&&g(s,["imageConfig"],L),s}function CR(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],an(o));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&g(s,["topP"],c);const d=f(e,["topK"]);d!=null&&g(s,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&g(s,["responseLogprobs"],E);const A=f(e,["logprobs"]);A!=null&&g(s,["logprobs"],A);const x=f(e,["presencePenalty"]);x!=null&&g(s,["presencePenalty"],x);const U=f(e,["frequencyPenalty"]);U!=null&&g(s,["frequencyPenalty"],U);const B=f(e,["seed"]);B!=null&&g(s,["seed"],B);const z=f(e,["responseMimeType"]);z!=null&&g(s,["responseMimeType"],z);const ee=f(e,["responseSchema"]);ee!=null&&g(s,["responseSchema"],hp(ee));const te=f(e,["responseJsonSchema"]);te!=null&&g(s,["responseJsonSchema"],te);const $=f(e,["routingConfig"]);$!=null&&g(s,["routingConfig"],$);const F=f(e,["modelSelectionConfig"]);F!=null&&g(s,["modelConfig"],F);const ne=f(e,["safetySettings"]);if(t!==void 0&&ne!=null){let X=ne;Array.isArray(X)&&(X=X.map(ce=>ce)),g(t,["safetySettings"],X)}const oe=f(e,["tools"]);if(t!==void 0&&oe!=null){let X=Aa(oe);Array.isArray(X)&&(X=X.map(ce=>j0(Sa(ce)))),g(t,["tools"],X)}const R=f(e,["toolConfig"]);t!==void 0&&R!=null&&g(t,["toolConfig"],R);const M=f(e,["labels"]);t!==void 0&&M!=null&&g(t,["labels"],M);const N=f(e,["cachedContent"]);t!==void 0&&N!=null&&g(t,["cachedContent"],vs(n,N));const k=f(e,["responseModalities"]);k!=null&&g(s,["responseModalities"],k);const L=f(e,["mediaResolution"]);L!=null&&g(s,["mediaResolution"],L);const q=f(e,["speechConfig"]);q!=null&&g(s,["speechConfig"],K0(mp(q)));const D=f(e,["audioTimestamp"]);D!=null&&g(s,["audioTimestamp"],D);const je=f(e,["thinkingConfig"]);je!=null&&g(s,["thinkingConfig"],je);const ft=f(e,["imageConfig"]);return ft!=null&&g(s,["imageConfig"],ft),s}function GT(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["contents"]);if(o!=null){let c=Kn(o);Array.isArray(c)&&(c=c.map(d=>Ld(d))),g(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&g(t,["generationConfig"],AR(n,l,t)),t}function YT(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["contents"]);if(o!=null){let c=Kn(o);Array.isArray(c)&&(c=c.map(d=>d)),g(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&g(t,["generationConfig"],CR(n,l,t)),t}function JT(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>jw(m))),g(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const l=f(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&g(e,["responseId"],c);const d=f(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function KT(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["candidates"],m)}const o=f(n,["createTime"]);o!=null&&g(e,["createTime"],o);const l=f(n,["modelVersion"]);l!=null&&g(e,["modelVersion"],l);const c=f(n,["promptFeedback"]);c!=null&&g(e,["promptFeedback"],c);const d=f(n,["responseId"]);d!=null&&g(e,["responseId"],d);const p=f(n,["usageMetadata"]);return p!=null&&g(e,["usageMetadata"],p),e}function IR(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const o=f(n,["aspectRatio"]);e!==void 0&&o!=null&&g(e,["parameters","aspectRatio"],o);const l=f(n,["guidanceScale"]);if(e!==void 0&&l!=null&&g(e,["parameters","guidanceScale"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&g(e,["parameters","safetySetting"],c);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d);const p=f(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&g(e,["parameters","includeSafetyAttributes"],p);const m=f(n,["includeRaiReason"]);e!==void 0&&m!=null&&g(e,["parameters","includeRaiReason"],m);const v=f(n,["language"]);e!==void 0&&v!=null&&g(e,["parameters","language"],v);const E=f(n,["outputMimeType"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","mimeType"],E);const A=f(n,["outputCompressionQuality"]);if(e!==void 0&&A!=null&&g(e,["parameters","outputOptions","compressionQuality"],A),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=f(n,["imageSize"]);if(e!==void 0&&x!=null&&g(e,["parameters","sampleImageSize"],x),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function bR(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&g(e,["parameters","aspectRatio"],c);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const A=f(n,["includeRaiReason"]);e!==void 0&&A!=null&&g(e,["parameters","includeRaiReason"],A);const x=f(n,["language"]);e!==void 0&&x!=null&&g(e,["parameters","language"],x);const U=f(n,["outputMimeType"]);e!==void 0&&U!=null&&g(e,["parameters","outputOptions","mimeType"],U);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&g(e,["parameters","outputOptions","compressionQuality"],B);const z=f(n,["addWatermark"]);e!==void 0&&z!=null&&g(e,["parameters","addWatermark"],z);const ee=f(n,["labels"]);e!==void 0&&ee!=null&&g(e,["labels"],ee);const te=f(n,["imageSize"]);e!==void 0&&te!=null&&g(e,["parameters","sampleImageSize"],te);const $=f(n,["enhancePrompt"]);return e!==void 0&&$!=null&&g(e,["parameters","enhancePrompt"],$),t}function xR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["config"]);return l!=null&&IR(l,t),t}function wR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["config"]);return l!=null&&bR(l,t),t}function RR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>FR(c))),g(e,["generatedImages"],l)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],Y0(o)),e}function NR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Od(c))),g(e,["generatedImages"],l)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],J0(o)),e}function MR(n,e){const t={},s=f(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=f(n,["durationSeconds"]);if(e!==void 0&&o!=null&&g(e,["parameters","durationSeconds"],o),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const c=f(n,["resolution"]);e!==void 0&&c!=null&&g(e,["parameters","resolution"],c);const d=f(n,["personGeneration"]);if(e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=f(n,["negativePrompt"]);e!==void 0&&p!=null&&g(e,["parameters","negativePrompt"],p);const m=f(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&g(e,["parameters","enhancePrompt"],m),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(n,["lastFrame"]);e!==void 0&&v!=null&&g(e,["instances[0]","lastFrame"],qd(v));const E=f(n,["referenceImages"]);if(e!==void 0&&E!=null){let A=E;Array.isArray(A)&&(A=A.map(x=>NN(x))),g(e,["instances[0]","referenceImages"],A)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function DR(n,e){const t={},s=f(n,["numberOfVideos"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&g(e,["parameters","storageUri"],o);const l=f(n,["fps"]);e!==void 0&&l!=null&&g(e,["parameters","fps"],l);const c=f(n,["durationSeconds"]);e!==void 0&&c!=null&&g(e,["parameters","durationSeconds"],c);const d=f(n,["seed"]);e!==void 0&&d!=null&&g(e,["parameters","seed"],d);const p=f(n,["aspectRatio"]);e!==void 0&&p!=null&&g(e,["parameters","aspectRatio"],p);const m=f(n,["resolution"]);e!==void 0&&m!=null&&g(e,["parameters","resolution"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=f(n,["pubsubTopic"]);e!==void 0&&E!=null&&g(e,["parameters","pubsubTopic"],E);const A=f(n,["negativePrompt"]);e!==void 0&&A!=null&&g(e,["parameters","negativePrompt"],A);const x=f(n,["enhancePrompt"]);e!==void 0&&x!=null&&g(e,["parameters","enhancePrompt"],x);const U=f(n,["generateAudio"]);e!==void 0&&U!=null&&g(e,["parameters","generateAudio"],U);const B=f(n,["lastFrame"]);e!==void 0&&B!=null&&g(e,["instances[0]","lastFrame"],di(B));const z=f(n,["referenceImages"]);if(e!==void 0&&z!=null){let $=z;Array.isArray($)&&($=$.map(F=>MN(F))),g(e,["instances[0]","referenceImages"],$)}const ee=f(n,["mask"]);e!==void 0&&ee!=null&&g(e,["instances[0]","mask"],RN(ee));const te=f(n,["compressionQuality"]);return e!==void 0&&te!=null&&g(e,["parameters","compressionQuality"],te),t}function PR(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&g(e,["response"],LR(c)),e}function VR(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["response"]);return c!=null&&g(e,["response"],OR(c)),e}function kR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["image"]);l!=null&&g(t,["instances[0]","image"],qd(l));const c=f(e,["video"]);c!=null&&g(t,["instances[0]","video"],$0(c));const d=f(e,["source"]);d!=null&&qR(d,t);const p=f(e,["config"]);return p!=null&&MR(p,t),t}function UR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["image"]);l!=null&&g(t,["instances[0]","image"],di(l));const c=f(e,["video"]);c!=null&&g(t,["instances[0]","video"],Q0(c));const d=f(e,["source"]);d!=null&&BR(d,t);const p=f(e,["config"]);return p!=null&&DR(p,t),t}function LR(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>HR(c))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function OR(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>GR(c))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function qR(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],qd(o));const l=f(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],$0(l)),t}function BR(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],di(o));const l=f(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],Q0(l)),t}function FR(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],QR(t));const s=f(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const o=f(n,["_self"]);return o!=null&&g(e,["safetyAttributes"],Y0(o)),e}function Od(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],G0(t));const s=f(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const o=f(n,["_self"]);o!=null&&g(e,["safetyAttributes"],J0(o));const l=f(n,["prompt"]);return l!=null&&g(e,["enhancedPrompt"],l),e}function zR(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["mask"],G0(t));const s=f(n,["labels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),g(e,["labels"],o)}return e}function HR(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],xN(t)),e}function GR(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],wN(t)),e}function YR(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=f(n,["audioTimestamp"]);s!=null&&g(e,["audioTimestamp"],s);const o=f(n,["candidateCount"]);o!=null&&g(e,["candidateCount"],o);const l=f(n,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const c=f(n,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const d=f(n,["logprobs"]);d!=null&&g(e,["logprobs"],d);const p=f(n,["maxOutputTokens"]);p!=null&&g(e,["maxOutputTokens"],p);const m=f(n,["mediaResolution"]);m!=null&&g(e,["mediaResolution"],m);const v=f(n,["presencePenalty"]);v!=null&&g(e,["presencePenalty"],v);const E=f(n,["responseJsonSchema"]);E!=null&&g(e,["responseJsonSchema"],E);const A=f(n,["responseLogprobs"]);A!=null&&g(e,["responseLogprobs"],A);const x=f(n,["responseMimeType"]);x!=null&&g(e,["responseMimeType"],x);const U=f(n,["responseModalities"]);U!=null&&g(e,["responseModalities"],U);const B=f(n,["responseSchema"]);B!=null&&g(e,["responseSchema"],B);const z=f(n,["routingConfig"]);z!=null&&g(e,["routingConfig"],z);const ee=f(n,["seed"]);ee!=null&&g(e,["seed"],ee);const te=f(n,["speechConfig"]);te!=null&&g(e,["speechConfig"],K0(te));const $=f(n,["stopSequences"]);$!=null&&g(e,["stopSequences"],$);const F=f(n,["temperature"]);F!=null&&g(e,["temperature"],F);const ne=f(n,["thinkingConfig"]);ne!=null&&g(e,["thinkingConfig"],ne);const oe=f(n,["topK"]);oe!=null&&g(e,["topK"],oe);const R=f(n,["topP"]);return R!=null&&g(e,["topP"],R),e}function JR(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],Ke(n,s)),t}function KR(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],Ke(n,s)),t}function jR(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function $R(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&g(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function QR(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],_r(t));const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function G0(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["imageBytes"],_r(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function qd(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],_r(t));const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function di(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["imageBytes"]);s!=null&&g(e,["bytesBase64Encoded"],_r(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function XR(n,e,t){const s={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&g(t,["_query","filter"],c);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],U0(n,d)),s}function WR(n,e,t){const s={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&g(t,["_query","filter"],c);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],U0(n,d)),s}function ZR(n,e){const t={},s=f(e,["config"]);return s!=null&&XR(n,s,t),t}function eN(n,e){const t={},s=f(e,["config"]);return s!=null&&WR(n,s,t),t}function tN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["_self"]);if(o!=null){let l=L0(o);Array.isArray(l)&&(l=l.map(c=>Um(c))),g(e,["models"],l)}return e}function nN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["_self"]);if(o!=null){let l=L0(o);Array.isArray(l)&&(l=l.map(c=>Lm(c))),g(e,["models"],l)}return e}function iN(n){const e={},t=f(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const s=f(n,["segmentationClasses"]);s!=null&&g(e,["maskClasses"],s);const o=f(n,["maskDilation"]);return o!=null&&g(e,["dilation"],o),e}function Um(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const o=f(n,["description"]);o!=null&&g(e,["description"],o);const l=f(n,["version"]);l!=null&&g(e,["version"],l);const c=f(n,["_self"]);c!=null&&g(e,["tunedModelInfo"],_N(c));const d=f(n,["inputTokenLimit"]);d!=null&&g(e,["inputTokenLimit"],d);const p=f(n,["outputTokenLimit"]);p!=null&&g(e,["outputTokenLimit"],p);const m=f(n,["supportedGenerationMethods"]);return m!=null&&g(e,["supportedActions"],m),e}function Lm(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const o=f(n,["description"]);o!=null&&g(e,["description"],o);const l=f(n,["versionId"]);l!=null&&g(e,["version"],l);const c=f(n,["deployedModels"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(A=>TR(A))),g(e,["endpoints"],E)}const d=f(n,["labels"]);d!=null&&g(e,["labels"],d);const p=f(n,["_self"]);p!=null&&g(e,["tunedModelInfo"],vN(p));const m=f(n,["defaultCheckpointId"]);m!=null&&g(e,["defaultCheckpointId"],m);const v=f(n,["checkpoints"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(A=>A)),g(e,["checkpoints"],E)}return e}function sN(n){const e={},t=f(n,["videoMetadata"]);t!=null&&g(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&g(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&g(e,["inlineData"],Kw(o));const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],ER(l));const c=f(n,["thoughtSignature"]);c!=null&&g(e,["thoughtSignature"],c);const d=f(n,["functionCall"]);d!=null&&g(e,["functionCall"],d);const p=f(n,["codeExecutionResult"]);p!=null&&g(e,["codeExecutionResult"],p);const m=f(n,["executableCode"]);m!=null&&g(e,["executableCode"],m);const v=f(n,["functionResponse"]);v!=null&&g(e,["functionResponse"],v);const E=f(n,["text"]);return E!=null&&g(e,["text"],E),e}function rN(n){const e={},t=f(n,["productImage"]);return t!=null&&g(e,["image"],di(t)),e}function oN(n,e){const t={},s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const o=f(n,["baseSteps"]);e!==void 0&&o!=null&&g(e,["parameters","editConfig","baseSteps"],o);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&g(e,["parameters","storageUri"],l);const c=f(n,["seed"]);e!==void 0&&c!=null&&g(e,["parameters","seed"],c);const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&g(e,["parameters","safetySetting"],d);const p=f(n,["personGeneration"]);e!==void 0&&p!=null&&g(e,["parameters","personGeneration"],p);const m=f(n,["addWatermark"]);e!==void 0&&m!=null&&g(e,["parameters","addWatermark"],m);const v=f(n,["outputMimeType"]);e!==void 0&&v!=null&&g(e,["parameters","outputOptions","mimeType"],v);const E=f(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","compressionQuality"],E);const A=f(n,["enhancePrompt"]);e!==void 0&&A!=null&&g(e,["parameters","enhancePrompt"],A);const x=f(n,["labels"]);return e!==void 0&&x!=null&&g(e,["labels"],x),t}function aN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["source"]);o!=null&&uN(o,t);const l=f(e,["config"]);return l!=null&&oN(l,t),t}function lN(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>Od(o))),g(e,["generatedImages"],s)}return e}function uN(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=f(n,["personImage"]);e!==void 0&&o!=null&&g(e,["instances[0]","personImage","image"],di(o));const l=f(n,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>rN(d))),g(e,["instances[0]","productImages"],c)}return t}function cN(n){const e={},t=f(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],di(t));const s=f(n,["referenceId"]);s!=null&&g(e,["referenceId"],s);const o=f(n,["referenceType"]);o!=null&&g(e,["referenceType"],o);const l=f(n,["maskImageConfig"]);l!=null&&g(e,["maskImageConfig"],iN(l));const c=f(n,["controlImageConfig"]);c!=null&&g(e,["controlImageConfig"],eR(c));const d=f(n,["styleImageConfig"]);d!=null&&g(e,["styleImageConfig"],d);const p=f(n,["subjectImageConfig"]);return p!=null&&g(e,["subjectImageConfig"],p),e}function Y0(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const o=f(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function J0(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const o=f(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function dN(n){const e={};if(f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=f(n,["category"]);t!=null&&g(e,["category"],t);const s=f(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function fN(n){const e={},t=f(n,["image"]);return t!=null&&g(e,["image"],di(t)),e}function hN(n,e){const t={},s=f(n,["mode"]);e!==void 0&&s!=null&&g(e,["parameters","mode"],s);const o=f(n,["maxPredictions"]);e!==void 0&&o!=null&&g(e,["parameters","maxPredictions"],o);const l=f(n,["confidenceThreshold"]);e!==void 0&&l!=null&&g(e,["parameters","confidenceThreshold"],l);const c=f(n,["maskDilation"]);e!==void 0&&c!=null&&g(e,["parameters","maskDilation"],c);const d=f(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&g(e,["parameters","binaryColorThreshold"],d);const p=f(n,["labels"]);return e!==void 0&&p!=null&&g(e,["labels"],p),t}function mN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["source"]);o!=null&&gN(o,t);const l=f(e,["config"]);return l!=null&&hN(l,t),t}function pN(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>zR(o))),g(e,["generatedMasks"],s)}return e}function gN(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],di(o));const l=f(n,["scribbleImage"]);return e!==void 0&&l!=null&&g(e,["instances[0]","scribble"],fN(l)),t}function K0(n){const e={},t=f(n,["voiceConfig"]);if(t!=null&&g(e,["voiceConfig"],t),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=f(n,["languageCode"]);return s!=null&&g(e,["languageCode"],s),e}function yN(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&g(e,["googleSearch"],$R(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&g(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],jR(l));const c=f(n,["urlContext"]);c!=null&&g(e,["urlContext"],c);const d=f(n,["computerUse"]);d!=null&&g(e,["computerUse"],d);const p=f(n,["codeExecution"]);return p!=null&&g(e,["codeExecution"],p),e}function j0(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>SR(A))),g(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const o=f(n,["googleSearch"]);o!=null&&g(e,["googleSearch"],o);const l=f(n,["googleSearchRetrieval"]);l!=null&&g(e,["googleSearchRetrieval"],l);const c=f(n,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const p=f(n,["urlContext"]);p!=null&&g(e,["urlContext"],p);const m=f(n,["computerUse"]);m!=null&&g(e,["computerUse"],m);const v=f(n,["codeExecution"]);return v!=null&&g(e,["codeExecution"],v),e}function _N(n){const e={},t=f(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&g(e,["createTime"],s);const o=f(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function vN(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&g(e,["createTime"],s);const o=f(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function TN(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const o=f(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function EN(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const o=f(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function SN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","name"],Ke(n,s));const o=f(e,["config"]);return o!=null&&TN(o,t),t}function AN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["config"]);return o!=null&&EN(o,t),t}function CN(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const o=f(n,["includeRaiReason"]);e!==void 0&&o!=null&&g(e,["parameters","includeRaiReason"],o);const l=f(n,["outputMimeType"]);e!==void 0&&l!=null&&g(e,["parameters","outputOptions","mimeType"],l);const c=f(n,["outputCompressionQuality"]);e!==void 0&&c!=null&&g(e,["parameters","outputOptions","compressionQuality"],c);const d=f(n,["enhanceInputImage"]);e!==void 0&&d!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],d);const p=f(n,["imagePreservationFactor"]);e!==void 0&&p!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],p);const m=f(n,["labels"]);e!==void 0&&m!=null&&g(e,["labels"],m);const v=f(n,["numberOfImages"]);e!==void 0&&v!=null&&g(e,["parameters","sampleCount"],v);const E=f(n,["mode"]);return e!==void 0&&E!=null&&g(e,["parameters","mode"],E),t}function IN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["image"]);o!=null&&g(t,["instances[0]","image"],di(o));const l=f(e,["upscaleFactor"]);l!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],l);const c=f(e,["config"]);return c!=null&&CN(c,t),t}function bN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Od(l))),g(e,["generatedImages"],o)}return e}function xN(n){const e={},t=f(n,["video","uri"]);t!=null&&g(e,["uri"],t);const s=f(n,["video","encodedVideo"]);s!=null&&g(e,["videoBytes"],_r(s));const o=f(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function wN(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],_r(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function RN(n){const e={},t=f(n,["image"]);t!=null&&g(e,["_self"],di(t));const s=f(n,["maskMode"]);return s!=null&&g(e,["maskMode"],s),e}function NN(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],qd(t));const s=f(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function MN(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],di(t));const s=f(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function $0(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["video","uri"],t);const s=f(n,["videoBytes"]);s!=null&&g(e,["video","encodedVideo"],_r(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["encoding"],o),e}function Q0(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["videoBytes"]);s!=null&&g(e,["bytesBase64Encoded"],_r(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DN="Content-Type",PN="X-Server-Timeout",VN="User-Agent",Om="x-goog-api-client",kN="1.24.0",UN=`google-genai-sdk/${kN}`,LN="v1beta1",ON="v1beta",jT=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class qN{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:LN,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:ON,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const o=[this.getRequestUrlInternal(t)];return s&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[c,d]of Object.entries(e.queryParams))o.searchParams.append(c,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(t))typeof l=="object"?s[o]=Object.assign(Object.assign({},s[o]),l):l!==void 0&&(s[o]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s){if(t&&t.timeout||s){const o=new AbortController,l=o.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const c=setTimeout(()=>o.abort(),t.timeout);c&&typeof c.unref=="function"&&c.unref()}s&&s.addEventListener("abort",()=>{o.abort()}),e.signal=l}return t&&t.extraBody!==null&&BN(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await $T(o),new Pm(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await $T(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return aa(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let c="";for(;;){const{done:d,value:p}=yield ct(o.read());if(d){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=l.decode(p,{stream:!0});try{const E=JSON.parse(m);if("error"in E){const A=JSON.parse(JSON.stringify(E.error)),x=A.status,U=A.code,B=`got status: ${x}. ${JSON.stringify(E)}`;if(U>=400&&U<600)throw new Ud({message:B,status:U})}}catch(E){if(E.name==="ApiError")throw E}c+=m;let v=c.match(jT);for(;v;){const E=v[1];try{const A=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ct(new Pm(A)),c=c.slice(v[0].length),v=c.match(jT)}catch(A){throw new Error(`exception parsing stream chunk ${E}. ${A}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=UN+" "+this.clientOptions.userAgentExtra;return e[VN]=t,e[Om]=t,e[DN]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[s,o]of Object.entries(e.headers))t.append(s,o);e.timeout&&e.timeout>0&&t.append(PN,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var s;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);o.sizeBytes=String(c.size);const d=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:c.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const p=await this.fetchUploadUrl(o,t);return l.upload(e,p,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var s;let o={};t!=null&&t.httpOptions?o=t.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},c=await this.request({path:ye("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:o});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(s=c==null?void 0:c.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function $T(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(s);throw t>=400&&t<600?new Ud({message:o,status:t}):new Error(o)}}function BN(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,c){const d=Object.assign({},l);for(const p in c)if(Object.prototype.hasOwnProperty.call(c,p)){const m=c[p],v=d[p];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?d[p]=s(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),d[p]=m)}return d}const o=s(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FN="mcp_used/unknown";let zN=!1;function X0(n){for(const e of n)if(HN(e)||typeof e=="object"&&"inputSchema"in e)return!0;return zN}function W0(n){var e;const t=(e=n[Om])!==null&&e!==void 0?e:"";n[Om]=(t+` ${FN}`).trimStart()}function HN(n){return n!==null&&typeof n=="object"&&n instanceof gp}function GN(n,e=100){return aa(this,arguments,function*(){let s,o=0;for(;o<e;){const l=yield ct(n.listTools({cursor:s}));for(const c of l.tools)yield yield ct(c),o++;if(!l.nextCursor)break;s=l.nextCursor}})}class gp{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new gp(e,t)}async initialize(){var e,t,s,o;if(this.mcpTools.length>0)return;const l={},c=[];for(const v of this.mcpClients)try{for(var d=!0,p=(t=void 0,Hl(GN(v))),m;m=await p.next(),e=m.done,!e;d=!0){o=m.value,d=!1;const E=o;c.push(E);const A=E.name;if(l[A])throw new Error(`Duplicate function name ${A} found in MCP tools. Please ensure function names are unique.`);l[A]=v}}catch(E){t={error:E}}finally{try{!d&&!e&&(s=p.return)&&await s.call(p)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),Qb(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await o.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function YN(n,e,t){const s=new zb;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(s,o),e(s)}class JN{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=$N(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),p=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let m=()=>{};const v=new Promise($=>{m=$}),E=e.callbacks,A=function(){m({})},x=this.apiClient,U={onopen:A,onmessage:$=>{YN(x,E.onmessage,$)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function($){},onclose:(s=E==null?void 0:E.onclose)!==null&&s!==void 0?s:function($){}},B=this.webSocketFactory.create(p,jN(c),U);B.connect(),await v;const te={setup:{model:Ke(this.apiClient,e.model)}};return B.send(JSON.stringify(te)),new KN(B,this.apiClient)}}class KN{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=Ow(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=Lw(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ia.PLAY)}pause(){this.sendPlaybackControl(ia.PAUSE)}stop(){this.sendPlaybackControl(ia.STOP)}resetContext(){this.sendPlaybackControl(ia.RESET_CONTEXT)}close(){this.conn.close()}}function jN(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function $N(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function XN(n,e,t){const s=new Fb;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const l=JSON.parse(o);if(n.isVertexAI()){const c=Fw(l);Object.assign(s,c)}else Object.assign(s,l);e(s)}class WN{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new JN(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,o,l,c,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&X0(e.config.tools)&&W0(E);const A=n1(E);if(this.apiClient.isVertexAI())v=`${p}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(A);else{const N=this.apiClient.getApiKey();let k="BidiGenerateContent",L="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),k="BidiGenerateContentConstrained",L="access_token"),v=`${p}/ws/google.ai.generativelanguage.${m}.GenerativeService.${k}?${L}=${N}`}let x=()=>{};const U=new Promise(N=>{x=N}),B=e.callbacks,z=function(){var N;(N=B==null?void 0:B.onopen)===null||N===void 0||N.call(B),x({})},ee=this.apiClient,te={onopen:z,onmessage:N=>{XN(ee,B.onmessage,N)},onerror:(t=B==null?void 0:B.onerror)!==null&&t!==void 0?t:function(N){},onclose:(s=B==null?void 0:B.onclose)!==null&&s!==void 0?s:function(N){}},$=this.webSocketFactory.create(v,t1(A),te);$.connect(),await U;let F=Ke(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&F.startsWith("publishers/")){const N=this.apiClient.getProject(),k=this.apiClient.getLocation();F=`projects/${N}/locations/${k}/`+F}let ne={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[fd.AUDIO]}:e.config.responseModalities=[fd.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const oe=(d=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[],R=[];for(const N of oe)if(this.isCallableTool(N)){const k=N;R.push(await k.tool())}else R.push(N);R.length>0&&(e.config.tools=R);const M={model:F,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ne=Uw(this.apiClient,M):ne=kw(this.apiClient,M),delete ne.config,$.send(JSON.stringify(ne)),new e1($,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const ZN={turnComplete:!0};class e1{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=Kn(t.turns),e.isVertexAI()||(s=s.map(o=>Ld(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(QN)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},ZN),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:Bw(e)}:t={realtimeInput:qw(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function t1(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function n1(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QT=10;function XT(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const c of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(la(c)){o=!0;break}if(!o)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function la(n){return"callTool"in n&&typeof n.callTool=="function"}function i1(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>la(o)))!==null&&s!==void 0?s:!1}function s1(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>!la(o)))!==null&&s!==void 0?s:!1}function WT(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class r1 extends oo{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,o,l,c,d;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!i1(t)||XT(t.config))return await this.generateContentInternal(p);if(s1(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let m,v;const E=Kn(p.contents),A=(l=(o=(s=p.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:QT;let x=0;for(;x<A&&(m=await this.generateContentInternal(p),!(!m.functionCalls||m.functionCalls.length===0));){const U=m.candidates[0].content,B=[];for(const z of(d=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[])if(la(z)){const te=await z.callTool(m.functionCalls);B.push(...te)}x++,v={role:"user",parts:B},p.contents=Kn(p.contents),p.contents.push(U),p.contents.push(v),WT(p.config)&&(E.push(U),E.push(v))}return WT(p.config)&&(m.automaticFunctionCallingHistory=E),m},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),XT(t.config)){const s=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(s)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var o;let l;const c=[];if(s!=null&&s.generatedImages)for(const p of s.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((o=p==null?void 0:p.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=p==null?void 0:p.safetyAttributes:c.push(p);let d;return l?d={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:d={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},d}),this.list=async t=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new su(Zr.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(c),c)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,o;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const c=await Promise.all(l.map(async p=>la(p)?await p.tool():p)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(d.config.tools=c,e.config&&e.config.tools&&X0(e.config.tools)){const p=(o=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&o!==void 0?o:{};let m=Object.assign({},p);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),W0(m),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return d}async initAfcToolsMap(e){var t,s,o;const l=new Map;for(const c of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(la(c)){const d=c,p=await d.tool();for(const m of(o=p.functionDeclarations)!==null&&o!==void 0?o:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,d)}}return l}async processAfcStream(e){var t,s,o;const l=(o=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:QT;let c=!1,d=0;const p=await this.initAfcToolsMap(e);return(function(m,v,E){var A,x;return aa(this,arguments,function*(){for(var U,B,z,ee;d<l;){c&&(d++,c=!1);const ne=yield ct(m.processParamsMaybeAddMcpUsage(E)),oe=yield ct(m.generateContentStreamInternal(ne)),R=[],M=[];try{for(var te=!0,$=(B=void 0,Hl(oe)),F;F=yield ct($.next()),U=F.done,!U;te=!0){ee=F.value,te=!1;const N=ee;if(yield yield ct(N),N.candidates&&(!((A=N.candidates[0])===null||A===void 0)&&A.content)){M.push(N.candidates[0].content);for(const k of(x=N.candidates[0].content.parts)!==null&&x!==void 0?x:[])if(d<l&&k.functionCall){if(!k.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(k.functionCall.name)){const L=yield ct(v.get(k.functionCall.name).callTool([k.functionCall]));R.push(...L)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${k.functionCall.name}`)}}}}catch(N){B={error:N}}finally{try{!te&&!U&&(z=$.return)&&(yield ct(z.call($)))}finally{if(B)throw B.error}}if(R.length>0){c=!0;const N=new Ol;N.candidates=[{content:{role:"user",parts:R}}],yield yield ct(N);const k=[];k.push(...M),k.push({role:"user",parts:R});const L=Kn(E.contents).concat(k);E.contents=L}else break}})})(this,p,e)}async generateContentInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=YT(this.apiClient,e);return d=ye("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=KT(v),A=new Ol;return Object.assign(A,E),A})}else{const m=GT(this.apiClient,e);return d=ye("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=JT(v),A=new Ol;return Object.assign(A,E),A})}}async generateContentStreamInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=YT(this.apiClient,e);return d=ye("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(E){return aa(this,arguments,function*(){var A,x,U,B;try{for(var z=!0,ee=Hl(E),te;te=yield ct(ee.next()),A=te.done,!A;z=!0){B=te.value,z=!1;const $=B,F=KT(yield ct($.json()));F.sdkHttpResponse={headers:$.headers};const ne=new Ol;Object.assign(ne,F),yield yield ct(ne)}}catch($){x={error:$}}finally{try{!z&&!A&&(U=ee.return)&&(yield ct(U.call(ee)))}finally{if(x)throw x.error}}})})}else{const m=GT(this.apiClient,e);return d=ye("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(E){return aa(this,arguments,function*(){var A,x,U,B;try{for(var z=!0,ee=Hl(E),te;te=yield ct(ee.next()),A=te.done,!A;z=!0){B=te.value,z=!1;const $=B,F=JT(yield ct($.json()));F.sdkHttpResponse={headers:$.headers};const ne=new Ol;Object.assign(ne,F),yield yield ct(ne)}}catch($){x={error:$}}finally{try{!z&&!A&&(U=ee.return)&&(yield ct(U.call(ee)))}finally{if(x)throw x.error}}})})}}async embedContent(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=yR(this.apiClient,e);return d=ye("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=vR(v),A=new wT;return Object.assign(A,E),A})}else{const m=gR(this.apiClient,e);return d=ye("{model}:batchEmbedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=_R(v),A=new wT;return Object.assign(A,E),A})}}async generateImagesInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=wR(this.apiClient,e);return d=ye("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=NR(v),A=new RT;return Object.assign(A,E),A})}else{const m=xR(this.apiClient,e);return d=ye("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=RR(v),A=new RT;return Object.assign(A,E),A})}}async editImageInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=fR(this.apiClient,e);return l=ye("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=hR(p),v=new Pb;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=IN(this.apiClient,e);return l=ye("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=bN(p),v=new Vb;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=aN(this.apiClient,e);return l=ye("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const m=lN(p),v=new kb;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=mN(this.apiClient,e);return l=ye("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const m=pN(p),v=new Ub;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=KR(this.apiClient,e);return d=ye("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Lm(v))}else{const m=JR(this.apiClient,e);return d=ye("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Um(v))}}async listInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=eN(this.apiClient,e);return d=ye("{models_url}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=nN(v),A=new NT;return Object.assign(A,E),A})}else{const m=ZR(this.apiClient,e);return d=ye("{models_url}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=tN(v),A=new NT;return Object.assign(A,E),A})}}async update(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=AN(this.apiClient,e);return d=ye("{model}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Lm(v))}else{const m=SN(this.apiClient,e);return d=ye("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Um(v))}}async delete(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=lR(this.apiClient,e);return d=ye("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=cR(v),A=new MT;return Object.assign(A,E),A})}else{const m=aR(this.apiClient,e);return d=ye("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=uR(v),A=new MT;return Object.assign(A,E),A})}}async countTokens(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=sR(this.apiClient,e);return d=ye("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=oR(v),A=new DT;return Object.assign(A,E),A})}else{const m=iR(this.apiClient,e);return d=ye("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=rR(v),A=new DT;return Object.assign(A,E),A})}}async computeTokens(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Qw(this.apiClient,e);return l=ye("{model}:computeTokens",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=Xw(p),v=new Lb;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=UR(this.apiClient,e);return d=ye("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>{const E=VR(v),A=new hd;return Object.assign(A,E),A})}else{const m=kR(this.apiClient,e);return d=ye("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const E=PR(v),A=new hd;return Object.assign(A,E),A})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class o1 extends oo{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=Nb(e);return d=ye("{operationName}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c}else{const m=Rb(e);return d=ye("{operationName}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Sb(e);return l=ye("{resourceName}:fetchPredictOperation",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function a1(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&g(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function l1(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>g1(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function u1(n,e,t){const s={},o=f(e,["expireTime"]);t!==void 0&&o!=null&&g(t,["expireTime"],o);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&g(t,["newSessionExpireTime"],l);const c=f(e,["uses"]);t!==void 0&&c!=null&&g(t,["uses"],c);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&g(t,["bidiGenerateContentSetup"],p1(n,d));const p=f(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&g(t,["fieldMask"],p),s}function c1(n,e){const t={},s=f(e,["config"]);return s!=null&&g(t,["config"],u1(n,s,t)),t}function d1(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function f1(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function h1(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&g(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function m1(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],pp(E));const A=f(n,["thinkingConfig"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","thinkingConfig"],A);const x=f(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],x);const U=f(n,["systemInstruction"]);e!==void 0&&U!=null&&g(e,["setup","systemInstruction"],l1(an(U)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let oe=Aa(B);Array.isArray(oe)&&(oe=oe.map(R=>_1(Sa(R)))),g(e,["setup","tools"],oe)}const z=f(n,["sessionResumption"]);e!==void 0&&z!=null&&g(e,["setup","sessionResumption"],y1(z));const ee=f(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&g(e,["setup","inputAudioTranscription"],ee);const te=f(n,["outputAudioTranscription"]);e!==void 0&&te!=null&&g(e,["setup","outputAudioTranscription"],te);const $=f(n,["realtimeInputConfig"]);e!==void 0&&$!=null&&g(e,["setup","realtimeInputConfig"],$);const F=f(n,["contextWindowCompression"]);e!==void 0&&F!=null&&g(e,["setup","contextWindowCompression"],F);const ne=f(n,["proactivity"]);return e!==void 0&&ne!=null&&g(e,["setup","proactivity"],ne),t}function p1(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],Ke(n,s));const o=f(e,["config"]);return o!=null&&g(t,["config"],m1(o,t)),t}function g1(n){const e={},t=f(n,["videoMetadata"]);t!=null&&g(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&g(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&g(e,["inlineData"],a1(o));const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],d1(l));const c=f(n,["thoughtSignature"]);c!=null&&g(e,["thoughtSignature"],c);const d=f(n,["functionCall"]);d!=null&&g(e,["functionCall"],d);const p=f(n,["codeExecutionResult"]);p!=null&&g(e,["codeExecutionResult"],p);const m=f(n,["executableCode"]);m!=null&&g(e,["executableCode"],m);const v=f(n,["functionResponse"]);v!=null&&g(e,["functionResponse"],v);const E=f(n,["text"]);return E!=null&&g(e,["text"],E),e}function y1(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function _1(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&g(e,["googleSearch"],h1(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&g(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],f1(l));const c=f(n,["urlContext"]);c!=null&&g(e,["urlContext"],c);const d=f(n,["computerUse"]);d!=null&&g(e,["computerUse"],d);const p=f(n,["codeExecution"]);return p!=null&&g(e,["codeExecution"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function v1(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const o=Object.keys(s).map(l=>`${t}.${l}`);e.push(...o)}else e.push(t)}return e.join(",")}function T1(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const l=v1(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(m=>c.includes(m)?`generationConfig.${m}`:m));const p=[];l&&p.push(l),d.length>0&&p.push(...d),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class E1 extends oo{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=c1(this.apiClient,e);l=ye("auth_tokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const p=T1(d,e.config);return o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function S1(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function A1(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function C1(n,e){const t={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=f(n,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&g(e,["displayName"],s),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=f(n,["epochCount"]);e!==void 0&&o!=null&&g(e,["tuningTask","hyperparameters","epochCount"],o);const l=f(n,["learningRateMultiplier"]);if(l!=null&&g(t,["tuningTask","hyperparameters","learningRateMultiplier"],l),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=f(n,["batchSize"]);e!==void 0&&c!=null&&g(e,["tuningTask","hyperparameters","batchSize"],c);const d=f(n,["learningRate"]);if(e!==void 0&&d!=null&&g(e,["tuningTask","hyperparameters","learningRate"],d),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return t}function I1(n,e){const t={},s=f(n,["validationDataset"]);e!==void 0&&s!=null&&g(e,["supervisedTuningSpec"],B1(s,t));const o=f(n,["tunedModelDisplayName"]);e!==void 0&&o!=null&&g(e,["tunedModelDisplayName"],o);const l=f(n,["description"]);e!==void 0&&l!=null&&g(e,["description"],l);const c=f(n,["epochCount"]);e!==void 0&&c!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],c);const d=f(n,["learningRateMultiplier"]);e!==void 0&&d!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],d);const p=f(n,["exportLastCheckpointOnly"]);e!==void 0&&p!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],p);const m=f(n,["adapterSize"]);if(e!==void 0&&m!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],m),f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const v=f(n,["labels"]);return e!==void 0&&v!=null&&g(e,["labels"],v),t}function b1(n){const e={},t=f(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["preTunedModel"]);s!=null&&g(e,["preTunedModel"],s);const o=f(n,["trainingDataset"]);o!=null&&g(e,["tuningTask","trainingData"],L1(o));const l=f(n,["config"]);return l!=null&&C1(l,e),e}function x1(n){const e={},t=f(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["preTunedModel"]);s!=null&&g(e,["preTunedModel"],s);const o=f(n,["trainingDataset"]);o!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],O1(o,e));const l=f(n,["config"]);return l!=null&&I1(l,e),e}function w1(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function R1(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function N1(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const l=f(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),t}function M1(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const l=f(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),t}function D1(n){const e={},t=f(n,["config"]);return t!=null&&N1(t,e),e}function P1(n){const e={},t=f(n,["config"]);return t!=null&&M1(t,e),e}function V1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["tunedModels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Z0(c))),g(e,["tuningJobs"],l)}return e}function k1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["tuningJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>qm(c))),g(e,["tuningJobs"],l)}return e}function U1(n){const e={},t=f(n,["name"]);t!=null&&g(e,["model"],t);const s=f(n,["name"]);return s!=null&&g(e,["endpoint"],s),e}function L1(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const t=f(n,["examples"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["examples","examples"],s)}return e}function O1(n,e){const t={},s=f(n,["gcsUri"]);e!==void 0&&s!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],s);const o=f(n,["vertexDatasetResource"]);if(e!==void 0&&o!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],o),f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function Z0(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["state"]);o!=null&&g(e,["state"],V0(o));const l=f(n,["createTime"]);l!=null&&g(e,["createTime"],l);const c=f(n,["tuningTask","startTime"]);c!=null&&g(e,["startTime"],c);const d=f(n,["tuningTask","completeTime"]);d!=null&&g(e,["endTime"],d);const p=f(n,["updateTime"]);p!=null&&g(e,["updateTime"],p);const m=f(n,["description"]);m!=null&&g(e,["description"],m);const v=f(n,["baseModel"]);v!=null&&g(e,["baseModel"],v);const E=f(n,["_self"]);E!=null&&g(e,["tunedModel"],U1(E));const A=f(n,["customBaseModel"]);A!=null&&g(e,["customBaseModel"],A);const x=f(n,["experiment"]);x!=null&&g(e,["experiment"],x);const U=f(n,["labels"]);U!=null&&g(e,["labels"],U);const B=f(n,["outputUri"]);B!=null&&g(e,["outputUri"],B);const z=f(n,["pipelineJob"]);z!=null&&g(e,["pipelineJob"],z);const ee=f(n,["serviceAccount"]);ee!=null&&g(e,["serviceAccount"],ee);const te=f(n,["tunedModelDisplayName"]);te!=null&&g(e,["tunedModelDisplayName"],te);const $=f(n,["veoTuningSpec"]);return $!=null&&g(e,["veoTuningSpec"],$),e}function qm(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["state"]);o!=null&&g(e,["state"],V0(o));const l=f(n,["createTime"]);l!=null&&g(e,["createTime"],l);const c=f(n,["startTime"]);c!=null&&g(e,["startTime"],c);const d=f(n,["endTime"]);d!=null&&g(e,["endTime"],d);const p=f(n,["updateTime"]);p!=null&&g(e,["updateTime"],p);const m=f(n,["error"]);m!=null&&g(e,["error"],m);const v=f(n,["description"]);v!=null&&g(e,["description"],v);const E=f(n,["baseModel"]);E!=null&&g(e,["baseModel"],E);const A=f(n,["tunedModel"]);A!=null&&g(e,["tunedModel"],A);const x=f(n,["preTunedModel"]);x!=null&&g(e,["preTunedModel"],x);const U=f(n,["supervisedTuningSpec"]);U!=null&&g(e,["supervisedTuningSpec"],U);const B=f(n,["tuningDataStats"]);B!=null&&g(e,["tuningDataStats"],B);const z=f(n,["encryptionSpec"]);z!=null&&g(e,["encryptionSpec"],z);const ee=f(n,["partnerModelTuningSpec"]);ee!=null&&g(e,["partnerModelTuningSpec"],ee);const te=f(n,["customBaseModel"]);te!=null&&g(e,["customBaseModel"],te);const $=f(n,["experiment"]);$!=null&&g(e,["experiment"],$);const F=f(n,["labels"]);F!=null&&g(e,["labels"],F);const ne=f(n,["outputUri"]);ne!=null&&g(e,["outputUri"],ne);const oe=f(n,["pipelineJob"]);oe!=null&&g(e,["pipelineJob"],oe);const R=f(n,["serviceAccount"]);R!=null&&g(e,["serviceAccount"],R);const M=f(n,["tunedModelDisplayName"]);M!=null&&g(e,["tunedModelDisplayName"],M);const N=f(n,["veoTuningSpec"]);return N!=null&&g(e,["veoTuningSpec"],N),e}function q1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["metadata"]);o!=null&&g(e,["metadata"],o);const l=f(n,["done"]);l!=null&&g(e,["done"],l);const c=f(n,["error"]);return c!=null&&g(e,["error"],c),e}function B1(n,e){const t={},s=f(n,["gcsUri"]);s!=null&&g(t,["validationDatasetUri"],s);const o=f(n,["vertexDatasetResource"]);return e!==void 0&&o!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class F1 extends oo{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new su(Zr.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:o});return l.baseModel=void 0,await this.tuneInternal(l)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),l=await this.tuneMldevInternal(o);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:Dm.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=R1(e);return d=ye("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>qm(v))}else{const m=w1(e);return d=ye("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>Z0(v))}}async listInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=P1(e);return d=ye("tuningJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=k1(v),A=new PT;return Object.assign(A,E),A})}else{const m=D1(e);return d=ye("tunedModels",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=V1(v),A=new PT;return Object.assign(A,E),A})}}async cancel(e){var t,s,o,l;let c="",d={};if(this.apiClient.isVertexAI()){const p=A1(e);c=ye("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=S1(e);c=ye("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=x1(e);return l=ye("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>qm(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=b1(e);return l=ye("tunedModels",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>q1(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class z1{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const H1=1024*1024*8,G1=3,Y1=1e3,J1=2,hm="x-goog-upload-status";async function K1(n,e,t){var s,o,l;let c=0,d=0,p=new Pm(new Response),m="upload";for(c=n.size;d<c;){const E=Math.min(H1,c-d),A=n.slice(d,d+E);d+E>=c&&(m+=", finalize");let x=0,U=Y1;for(;x<G1&&(p=await t.request({path:"",body:A,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(d),"Content-Length":String(E)}}}),!(!((s=p==null?void 0:p.headers)===null||s===void 0)&&s[hm]));)x++,await $1(U),U=U*J1;if(d+=E,((o=p==null?void 0:p.headers)===null||o===void 0?void 0:o[hm])!=="active")break;if(c<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(p==null?void 0:p.json());if(((l=p==null?void 0:p.headers)===null||l===void 0?void 0:l[hm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function j1(n){return{size:n.size,type:n.type}}function $1(n){return new Promise(e=>setTimeout(e,n))}class Q1{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await K1(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await j1(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class X1{create(e,t,s){return new W1(e,t,s)}}class W1{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZT="x-goog-api-key";class Z1{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(ZT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(ZT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eM="gl-node/";class tM{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=Eb(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const o=new Z1(this.apiKey);this.apiClient=new qN({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:eM+"web",uploader:new Q1,downloader:new z1}),this.models=new r1(this.apiClient),this.live=new WN(this.apiClient,o,new X1),this.batches=new Ox(this.apiClient),this.chats=new gw(this.models,this.apiClient),this.caches=new hw(this.apiClient),this.files=new bw(this.apiClient),this.operations=new o1(this.apiClient),this.authTokens=new E1(this.apiClient),this.tunings=new F1(this.apiClient)}}const eS={BASE_URL:"/fd/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_ENVIRONMENT:"production",VITE_FIREBASE_API_KEY:"AIzaSyBA1uXbBt5qHfOh9nTFXuI2IVN-uhWYD_g",VITE_FIREBASE_APP_ID:"1:221809737779:web:a0e2f3d1b9b6c1e1f2d3e4",VITE_FIREBASE_AUTH_DOMAIN:"expenses-140c4.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"221809737779",VITE_FIREBASE_PROJECT_ID:"expenses-140c4",VITE_FIREBASE_STORAGE_BUCKET:"expenses-140c4.appspot.com",VITE_GEMINI_API_KEY:"AIzaSyCU4hOMnyFAWpi1zuy1tRuWW9AV358_njE"},vt={firebase:{apiKey:"AIzaSyBA1uXbBt5qHfOh9nTFXuI2IVN-uhWYD_g",authDomain:"expenses-140c4.firebaseapp.com",projectId:"expenses-140c4",storageBucket:"expenses-140c4.appspot.com",messagingSenderId:"221809737779",appId:"1:221809737779:web:a0e2f3d1b9b6c1e1f2d3e4"},gemini:{apiKey:"AIzaSyCU4hOMnyFAWpi1zuy1tRuWW9AV358_njE",model:"gemini-2.5-flash"},app:{name:"لوحة التحكم المالية",version:"1.0.0",environment:"production"}};console.log("🔍 فحص متغيرات البيئة:",{environment:vt.app.environment,firebaseApiKey:vt.firebase.apiKey?"✅ موجود":"❌ مفقود",firebaseAuthDomain:vt.firebase.authDomain||"❌ مفقود",firebaseProjectId:vt.firebase.projectId||"❌ مفقود",firebaseStorageBucket:vt.firebase.storageBucket||"❌ مفقود",firebaseMessagingSenderId:vt.firebase.messagingSenderId||"❌ مفقود",firebaseAppId:vt.firebase.appId||"❌ مفقود",geminiApiKey:"✅ موجود",allEnvVars:Object.keys(eS).filter(n=>n.startsWith("VITE_"))});console.log("🔍 جميع متغيرات VITE_ في البيئة:",Object.keys(eS).filter(n=>n.startsWith("VITE_")));const ua=()=>{const n=[];return vt.firebase.apiKey||n.push("مفتاح Firebase API مفقود"),vt.firebase.authDomain||n.push("Firebase Auth Domain مفقود"),vt.firebase.projectId||n.push("معرف مشروع Firebase مفقود"),vt.firebase.storageBucket||n.push("Firebase Storage Bucket مفقود"),vt.firebase.messagingSenderId||n.push("Firebase Messaging Sender ID مفقود"),vt.firebase.appId||n.push("Firebase App ID مفقود"),{isValid:n.length===0,errors:n,hasFirebase:!!vt.firebase.apiKey,hasGemini:!0}};if(typeof window<"u"){const n=ua();n.isValid?console.log("✅ جميع الإعدادات صحيحة ومكتملة"):console.warn("⚠️ تحذير: بعض الإعدادات غير مكتملة:",n.errors)}let pd;const nM=vt.gemini.model,iM=()=>{if(pd)return;const n=ua();if(!n.isValid){console.warn("⚠️ تحذير: مفتاح Gemini API غير صحيح:",n.errors);return}try{pd=new tM({apiKey:vt.gemini.apiKey}),console.log("🤖 تم تهيئة خدمة Gemini بنجاح")}catch(e){console.error("❌ خطأ في تهيئة خدمة Gemini:",e)}},Bd={FINANCIAL_ANALYST:`You are an expert financial analyst assistant, "المحلل الذكي". You have full access to the user's financial data for a specific period. Your purpose is to provide detailed, insightful analysis and answer complex questions in Arabic based ONLY on the data provided for that period.
- Today's date is ${new Date().toLocaleDateString("en-CA")}.
- Analyze the user's provided financial state (transactions, card details, bank balance, investments, installments) for the specified period to answer their query.
- Be thorough. Connect different parts of their financial data to give holistic answers.
- DO NOT just state data, INTERPRET it. Provide insights, identify trends, and offer observations.
- Be friendly, professional, and act as a true financial advisor.`,INVESTMENT_COACH:`You are an educational investment coach named "المستشار الذكي". Your primary role is to educate the user about investment concepts and strategies, particularly within the context of the Saudi stock market (Tadawul).
- You MUST NOT give direct financial advice. Do not recommend buying or selling specific stocks (e.g., "Buy Aramco").
- When asked for a recommendation, you MUST politely decline and instead explain HOW the user can research and make their own informed decisions.
- Your tone should be encouraging, educational, and responsible.
- Keep your answers clear, concise, and in Arabic.`,PASTE_ANALYZER:`You are an intelligent data extraction tool for Arabic and English financial transaction SMS messages from Saudi Arabia. Your task is to analyze the provided text and respond ONLY with a valid JSON object containing the keys: "merchant", "amount", "date", "paymentMethod", and "categoryId".
- **CRITICAL RULE**: Extract data ONLY from the user's text. Do not invent or infer information. If a piece of information is not present in the text, its corresponding JSON value should be null.
- **ERROR HANDLING**: If the provided text does not seem to be a financial transaction SMS at all, you MUST respond with a JSON object containing a single key "error" with the value "النص المقدم لا يبدو كرسالة معاملة مالية.".

- **Amount Extraction**:
  - The 'amount' is the primary transaction value.
  - Look for a number after keywords like "بـ" or "Amount:".
  - You MUST ignore any numbers associated with "Remaining limit", "الصرف المتبقي", or card numbers.

- **Date Extraction**:
  - The 'date' MUST be in "YYYY-MM-DD" format.
  - If the text provides a full timestamp like "2025-09-06 15:11:57", extract only the date part "2025-09-06".
  - If the text uses "DD/MM/YY", you must convert it. Example: '01/09/25' becomes '2025-09-01'.

- **Merchant Extraction**:
  - The 'merchant' is the store or service name.
  - Look for text after keywords like "من" or "Merchant:".

{{PAYMENT_METHOD_MAPPING}}

- **Category ID**:
  - Analyze the merchant name and suggest the most relevant ID from the provided list of available categories. If unsure, use the ID for the category named 'أخرى'.

---
**EXAMPLES**

1.  **Input**: "شراء-POS\\nبـ182 SAR\\nمن Adel Inte\\nمدى-ابل*2855\\nفي 01/09/25 22:11"
    **Output**: { "merchant": "Adel Inte", "amount": 182, "date": "2025-09-01", "paymentMethod": "bank-default", "categoryId": "cat-5" }

2.  **Input**: "شراء-POS\\nبـ‬‪95.78 ‬‪SAR\\nمن ‬‪BINDAWOOD\\nإئتمانية **4278 ‬‪(Apple Pay)\\nفي ‬‪03/09/25 ‬‪14:45\\nالصرف المتبقي ‬‪12146.95 ‬‪SAR"
    **Output**: { "merchant": "BINDAWOOD", "amount": 95.78, "date": "2025-09-03", "paymentMethod": "snb-card", "categoryId": "cat-1" }

3.  **Input**: "POS Purchase (Apple Pay)\\nCard: Visa card XX8095\\nAmount: SAR 115.00\\nMerchant: AlHamra Roundabout Statio\\nIn: SAUDI ARABIA\\nRemaining limit SAR 2,502.34\\nOn: 2025-09-06 15:11:57"
    **Output**: { "merchant": "AlHamra Roundabout Statio", "amount": 115.00, "date": "2025-09-06", "paymentMethod": "enbd-card", "categoryId": "cat-3" }

4.  **Input**: "POS Purchase (Apple Pay)\\nCard: Visa card XX8095\\nAmount: SAR 10.00\\nMerchant: MKAN CO\\nIn: SAUDI ARABIA\\nRemaining limit SAR 2,782.27\\nOn: 2025-09-03 23:44:56"
    **Output**: { "merchant": "MKAN CO", "amount": 10.00, "date": "2025-09-03", "paymentMethod": "enbd-card", "categoryId": "cat-7" }
---
`,BUDGET_PLANNER:`You are a helpful and encouraging financial planning assistant in Arabic. Your goal is to help the user create a realistic monthly budget based on their spending history and a total budget amount they provide. Use the 50/30/20 rule (50% for Needs, 30% for Wants, 20% for Savings/Debt) as a general framework, but you MUST adapt it to the user's actual spending patterns revealed in their transaction data. Your response MUST be in Arabic and formatted using Markdown. It should contain: 1. A brief, encouraging introductory sentence. 2. A breakdown of the total budget into Needs, Wants, and Savings, with the suggested amount for each. 3. A detailed table with three columns: "الفئة", "المبلغ المقترح", and "ملاحظات". 4. In the table, allocate the "Needs" and "Wants" amounts across the user's actual spending categories. 5. The "Notes" column should provide a brief justification. 6. Conclude with a short, motivational tip.`},Fd=async(n,e,t=!1)=>{if(!pd)throw new Error("لم تتم تهيئة خدمة الذكاء الاصطناعي. يرجى التأكد من صحة إعدادات الاتصال.");try{return(await pd.models.generateContent({model:nM,contents:e,config:{systemInstruction:n,...t&&{responseMimeType:"application/json"}}})).text}catch(s){console.error("Gemini API Error:",s);let o="عفواً، حدث خطأ أثناء الاتصال بالخادم. يرجى المحاولة مرة أخرى.";throw s instanceof Error&&"message"in s&&s.message.includes("403")&&(o="تم رفض الوصول (403). يرجى التحقق من قيود مفتاح API الخاص بك في Google Cloud Console."),new Error(o)}},sM=(n,e)=>Fd(Bd.FINANCIAL_ANALYST,`User Query: "${n}"

Financial Data: ${JSON.stringify(e)}`),rM=(n,e,t,s)=>{const o=Object.keys(t),l=Object.keys(s);let c=`- **Payment Method Mapping**:
  - The 'paymentMethod' MUST be one of these exact values: [${[...l,...o].map(p=>`'${p}'`).join(", ")}].
`;Object.values(s).forEach(p=>{const m=[p.name.split(" ")[0],...p.smsSamples||[]].filter(Boolean);m.length>0&&(c+=`  - If the text is a bank/mada transaction and contains any of these: '${m.join("', '")}', use '${p.id}'.
`)}),Object.values(t).forEach(p=>{const m=[p.name.split(" ")[0],...p.smsSamples||[]].filter(Boolean);m.length>0&&(c+=`  - If the text is a credit card transaction and contains any of these: '${m.join("', '")}', use '${p.id}'.
`)}),c+="  - If no specific bank account keywords match for a bank/mada transaction, default to the first bank account ID in the list.";const d=Bd.PASTE_ANALYZER.replace("{{PAYMENT_METHOD_MAPPING}}",c);return Fd(d,`Text to analyze: "${n}"

Available Categories: ${JSON.stringify(e)}

First bank account ID is '${l[0]}'`,!0)},oM=n=>Fd(Bd.INVESTMENT_COACH,n),aM=(n,e,t)=>Fd(Bd.BUDGET_PLANNER,`Total monthly budget is: ${n} SAR. My spending categories are: ${JSON.stringify(e)}. My transactions from the last 60 days are: ${JSON.stringify(t)}`),lM="modulepreload",uM=function(n){return"/fd/"+n},eE={},Yc=function(e,t,s){let o=Promise.resolve();if(t&&t.length>0){let c=function(m){return Promise.all(m.map(v=>Promise.resolve(v).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));o=c(t.map(m=>{if(m=uM(m),m in eE)return;eE[m]=!0;const v=m.endsWith(".css"),E=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${E}`))return;const A=document.createElement("link");if(A.rel=v?"stylesheet":lM,v||(A.as="script"),A.crossOrigin="",A.href=m,p&&A.setAttribute("nonce",p),document.head.appendChild(A),v)return new Promise((x,U)=>{A.addEventListener("load",x),A.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${m}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return o.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})},cM=()=>{};var tE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},dM=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],d=n[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},nS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,d=c?n[o+1]:0,p=o+2<n.length,m=p?n[o+2]:0,v=l>>2,E=(l&3)<<4|d>>4;let A=(d&15)<<2|m>>6,x=m&63;p||(x=64,c||(A=64)),s.push(t[v],t[E],t[A],t[x])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(tS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):dM(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||d==null||m==null||E==null)throw new fM;const A=l<<2|d>>4;if(s.push(A),m!==64){const x=d<<4&240|m>>2;if(s.push(x),E!==64){const U=m<<6&192|E;s.push(U)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class fM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hM=function(n){const e=tS(n);return nS.encodeByteArray(e,!0)},gd=function(n){return hM(n).replace(/\./g,"")},iS=function(n){try{return nS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM=()=>mM().__FIREBASE_DEFAULTS__,gM=()=>{if(typeof process>"u"||typeof tE>"u")return;const n=tE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},yM=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&iS(n[1]);return e&&JSON.parse(e)},zd=()=>{try{return cM()||pM()||gM()||yM()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},sS=n=>{var e,t;return(t=(e=zd())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},_M=n=>{const e=sS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},rS=()=>{var n;return(n=zd())==null?void 0:n.config},oS=n=>{var e;return(e=zd())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function aS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TM(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[gd(JSON.stringify(t)),gd(JSON.stringify(c)),""].join(".")}const Gl={};function EM(){const n={prod:[],emulator:[]};for(const e of Object.keys(Gl))Gl[e]?n.emulator.push(e):n.prod.push(e);return n}function SM(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let nE=!1;function lS(n,e){if(typeof window>"u"||typeof document>"u"||!Ia(window.location.host)||Gl[n]===e||Gl[n]||nE)return;Gl[n]=e;function t(A){return`__firebase__banner__${A}`}const s="__firebase__banner",l=EM().prod.length>0;function c(){const A=document.getElementById(s);A&&A.remove()}function d(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function p(A,x){A.setAttribute("width","24"),A.setAttribute("id",x),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function m(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{nE=!0,c()},A}function v(A,x){A.setAttribute("id",x),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function E(){const A=SM(s),x=t("text"),U=document.getElementById(x)||document.createElement("span"),B=t("learnmore"),z=document.getElementById(B)||document.createElement("a"),ee=t("preprendIcon"),te=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const $=A.element;d($),v(z,B);const F=m();p(te,ee),$.append(te,U,z,F),document.body.appendChild($)}l?(U.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function CM(){var e;const n=(e=zd())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function IM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bM(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function xM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wM(){const n=ln();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function RM(){return!CM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NM(){try{return typeof indexedDB=="object"}catch{return!1}}function MM(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM="FirebaseError";class Ts extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=DM,Object.setPrototypeOf(this,Ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ru.prototype.create)}}class ru{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?PM(l,s):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new Ts(o,d,s)}}function PM(n,e){return n.replace(VM,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const VM=/\{\$([^}]+)}/g;function kM(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function eo(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=n[o],c=e[o];if(iE(l)&&iE(c)){if(!eo(l,c))return!1}else if(l!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function iE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function UM(n,e){const t=new LM(n,e);return t.subscribe.bind(t)}class LM{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");OM(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=mm),o.error===void 0&&(o.error=mm),o.complete===void 0&&(o.complete=mm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function OM(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function mm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(n){return n&&n._delegate?n._delegate:n}class to{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new vM;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(FM(e))try{this.getOrInitializeService({instanceIdentifier:$r})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=$r){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$r){return this.instances.has(e)}getOptions(e=$r){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&c.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:BM(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=$r){return this.component?this.component.multipleInstances?e:$r:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function BM(n){return n===$r?void 0:n}function FM(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new qM(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Be||(Be={}));const HM={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},GM=Be.INFO,YM={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},JM=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=YM[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yp{constructor(e){this.name=e,this._logLevel=GM,this._logHandler=JM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const KM=(n,e)=>e.some(t=>n instanceof t);let sE,rE;function jM(){return sE||(sE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $M(){return rE||(rE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uS=new WeakMap,Bm=new WeakMap,cS=new WeakMap,pm=new WeakMap,_p=new WeakMap;function QM(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(ar(n.result)),o()},c=()=>{s(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&uS.set(t,n)}).catch(()=>{}),_p.set(e,n),e}function XM(n){if(Bm.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Bm.set(n,e)}let Fm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Bm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||cS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ar(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function WM(n){Fm=n(Fm)}function ZM(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(gm(this),e,...t);return cS.set(s,e.sort?e.sort():[e]),ar(s)}:$M().includes(n)?function(...e){return n.apply(gm(this),e),ar(uS.get(this))}:function(...e){return ar(n.apply(gm(this),e))}}function eD(n){return typeof n=="function"?ZM(n):(n instanceof IDBTransaction&&XM(n),KM(n,jM())?new Proxy(n,Fm):n)}function ar(n){if(n instanceof IDBRequest)return QM(n);if(pm.has(n))return pm.get(n);const e=eD(n);return e!==n&&(pm.set(n,e),_p.set(e,n)),e}const gm=n=>_p.get(n);function tD(n,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),d=ar(c);return s&&c.addEventListener("upgradeneeded",p=>{s(ar(c.result),p.oldVersion,p.newVersion,ar(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const nD=["get","getKey","getAll","getAllKeys","count"],iD=["put","add","delete","clear"],ym=new Map;function oE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ym.get(e))return ym.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=iD.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||nD.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,o?"readwrite":"readonly");let m=p.store;return s&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),o&&p.done]))[0]};return ym.set(e,l),l}WM(n=>({...n,get:(e,t,s)=>oE(e,t)||n.get(e,t,s),has:(e,t)=>!!oE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(rD(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function rD(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zm="@firebase/app",aE="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs=new yp("@firebase/app"),oD="@firebase/app-compat",aD="@firebase/analytics-compat",lD="@firebase/analytics",uD="@firebase/app-check-compat",cD="@firebase/app-check",dD="@firebase/auth",fD="@firebase/auth-compat",hD="@firebase/database",mD="@firebase/data-connect",pD="@firebase/database-compat",gD="@firebase/functions",yD="@firebase/functions-compat",_D="@firebase/installations",vD="@firebase/installations-compat",TD="@firebase/messaging",ED="@firebase/messaging-compat",SD="@firebase/performance",AD="@firebase/performance-compat",CD="@firebase/remote-config",ID="@firebase/remote-config-compat",bD="@firebase/storage",xD="@firebase/storage-compat",wD="@firebase/firestore",RD="@firebase/ai",ND="@firebase/firestore-compat",MD="firebase",DD="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="[DEFAULT]",PD={[zm]:"fire-core",[oD]:"fire-core-compat",[lD]:"fire-analytics",[aD]:"fire-analytics-compat",[cD]:"fire-app-check",[uD]:"fire-app-check-compat",[dD]:"fire-auth",[fD]:"fire-auth-compat",[hD]:"fire-rtdb",[mD]:"fire-data-connect",[pD]:"fire-rtdb-compat",[gD]:"fire-fn",[yD]:"fire-fn-compat",[_D]:"fire-iid",[vD]:"fire-iid-compat",[TD]:"fire-fcm",[ED]:"fire-fcm-compat",[SD]:"fire-perf",[AD]:"fire-perf-compat",[CD]:"fire-rc",[ID]:"fire-rc-compat",[bD]:"fire-gcs",[xD]:"fire-gcs-compat",[wD]:"fire-fst",[ND]:"fire-fst-compat",[RD]:"fire-vertex","fire-js":"fire-js",[MD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=new Map,VD=new Map,Gm=new Map;function lE(n,e){try{n.container.addComponent(e)}catch(t){hs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ma(n){const e=n.name;if(Gm.has(e))return hs.debug(`There were multiple attempts to register component ${e}.`),!1;Gm.set(e,n);for(const t of yd.values())lE(t,n);for(const t of VD.values())lE(t,n);return!0}function vp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ki(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},lr=new ru("app","Firebase",kD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new to("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw lr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba=DD;function dS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:Hm,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw lr.create("bad-app-name",{appName:String(o)});if(t||(t=rS()),!t)throw lr.create("no-options");const l=yd.get(o);if(l){if(eo(t,l.options)&&eo(s,l.config))return l;throw lr.create("duplicate-app",{appName:o})}const c=new zM(o);for(const p of Gm.values())c.addComponent(p);const d=new UD(t,s,c);return yd.set(o,d),d}function fS(n=Hm){const e=yd.get(n);if(!e&&n===Hm&&rS())return dS();if(!e)throw lr.create("no-app",{appName:n});return e}function ur(n,e,t){let s=PD[n]??n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hs.warn(c.join(" "));return}ma(new to(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD="firebase-heartbeat-database",OD=1,Xl="firebase-heartbeat-store";let _m=null;function hS(){return _m||(_m=tD(LD,OD,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Xl)}catch(t){console.warn(t)}}}}).catch(n=>{throw lr.create("idb-open",{originalErrorMessage:n.message})})),_m}async function qD(n){try{const t=(await hS()).transaction(Xl),s=await t.objectStore(Xl).get(mS(n));return await t.done,s}catch(e){if(e instanceof Ts)hs.warn(e.message);else{const t=lr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hs.warn(t.message)}}}async function uE(n,e){try{const s=(await hS()).transaction(Xl,"readwrite");await s.objectStore(Xl).put(e,mS(n)),await s.done}catch(t){if(t instanceof Ts)hs.warn(t.message);else{const s=lr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});hs.warn(s.message)}}}function mS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD=1024,FD=30;class zD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new GD(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=cE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>FD){const c=YD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){hs.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=cE(),{heartbeatsToSend:s,unsentEntries:o}=HD(this._heartbeatsCache.heartbeats),l=gd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return hs.warn(t),""}}}function cE(){return new Date().toISOString().substring(0,10)}function HD(n,e=BD){const t=[];let s=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),dE(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),dE(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class GD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NM()?MM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await qD(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return uE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return uE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function dE(n){return gd(JSON.stringify({version:2,heartbeats:n})).length}function YD(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(n){ma(new to("platform-logger",e=>new sD(e),"PRIVATE")),ma(new to("heartbeat",e=>new zD(e),"PRIVATE")),ur(zm,aE,n),ur(zm,aE,"esm2020"),ur("fire-js","")}JD("");var KD="firebase",jD="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ur(KD,jD,"app");var fE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cr,pS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,M){function N(){}N.prototype=M.prototype,R.F=M.prototype,R.prototype=new N,R.prototype.constructor=R,R.D=function(k,L,q){for(var D=Array(arguments.length-2),je=2;je<arguments.length;je++)D[je-2]=arguments[je];return M.prototype[L].apply(k,D)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,M,N){N||(N=0);const k=Array(16);if(typeof M=="string")for(var L=0;L<16;++L)k[L]=M.charCodeAt(N++)|M.charCodeAt(N++)<<8|M.charCodeAt(N++)<<16|M.charCodeAt(N++)<<24;else for(L=0;L<16;++L)k[L]=M[N++]|M[N++]<<8|M[N++]<<16|M[N++]<<24;M=R.g[0],N=R.g[1],L=R.g[2];let q=R.g[3],D;D=M+(q^N&(L^q))+k[0]+3614090360&4294967295,M=N+(D<<7&4294967295|D>>>25),D=q+(L^M&(N^L))+k[1]+3905402710&4294967295,q=M+(D<<12&4294967295|D>>>20),D=L+(N^q&(M^N))+k[2]+606105819&4294967295,L=q+(D<<17&4294967295|D>>>15),D=N+(M^L&(q^M))+k[3]+3250441966&4294967295,N=L+(D<<22&4294967295|D>>>10),D=M+(q^N&(L^q))+k[4]+4118548399&4294967295,M=N+(D<<7&4294967295|D>>>25),D=q+(L^M&(N^L))+k[5]+1200080426&4294967295,q=M+(D<<12&4294967295|D>>>20),D=L+(N^q&(M^N))+k[6]+2821735955&4294967295,L=q+(D<<17&4294967295|D>>>15),D=N+(M^L&(q^M))+k[7]+4249261313&4294967295,N=L+(D<<22&4294967295|D>>>10),D=M+(q^N&(L^q))+k[8]+1770035416&4294967295,M=N+(D<<7&4294967295|D>>>25),D=q+(L^M&(N^L))+k[9]+2336552879&4294967295,q=M+(D<<12&4294967295|D>>>20),D=L+(N^q&(M^N))+k[10]+4294925233&4294967295,L=q+(D<<17&4294967295|D>>>15),D=N+(M^L&(q^M))+k[11]+2304563134&4294967295,N=L+(D<<22&4294967295|D>>>10),D=M+(q^N&(L^q))+k[12]+1804603682&4294967295,M=N+(D<<7&4294967295|D>>>25),D=q+(L^M&(N^L))+k[13]+4254626195&4294967295,q=M+(D<<12&4294967295|D>>>20),D=L+(N^q&(M^N))+k[14]+2792965006&4294967295,L=q+(D<<17&4294967295|D>>>15),D=N+(M^L&(q^M))+k[15]+1236535329&4294967295,N=L+(D<<22&4294967295|D>>>10),D=M+(L^q&(N^L))+k[1]+4129170786&4294967295,M=N+(D<<5&4294967295|D>>>27),D=q+(N^L&(M^N))+k[6]+3225465664&4294967295,q=M+(D<<9&4294967295|D>>>23),D=L+(M^N&(q^M))+k[11]+643717713&4294967295,L=q+(D<<14&4294967295|D>>>18),D=N+(q^M&(L^q))+k[0]+3921069994&4294967295,N=L+(D<<20&4294967295|D>>>12),D=M+(L^q&(N^L))+k[5]+3593408605&4294967295,M=N+(D<<5&4294967295|D>>>27),D=q+(N^L&(M^N))+k[10]+38016083&4294967295,q=M+(D<<9&4294967295|D>>>23),D=L+(M^N&(q^M))+k[15]+3634488961&4294967295,L=q+(D<<14&4294967295|D>>>18),D=N+(q^M&(L^q))+k[4]+3889429448&4294967295,N=L+(D<<20&4294967295|D>>>12),D=M+(L^q&(N^L))+k[9]+568446438&4294967295,M=N+(D<<5&4294967295|D>>>27),D=q+(N^L&(M^N))+k[14]+3275163606&4294967295,q=M+(D<<9&4294967295|D>>>23),D=L+(M^N&(q^M))+k[3]+4107603335&4294967295,L=q+(D<<14&4294967295|D>>>18),D=N+(q^M&(L^q))+k[8]+1163531501&4294967295,N=L+(D<<20&4294967295|D>>>12),D=M+(L^q&(N^L))+k[13]+2850285829&4294967295,M=N+(D<<5&4294967295|D>>>27),D=q+(N^L&(M^N))+k[2]+4243563512&4294967295,q=M+(D<<9&4294967295|D>>>23),D=L+(M^N&(q^M))+k[7]+1735328473&4294967295,L=q+(D<<14&4294967295|D>>>18),D=N+(q^M&(L^q))+k[12]+2368359562&4294967295,N=L+(D<<20&4294967295|D>>>12),D=M+(N^L^q)+k[5]+4294588738&4294967295,M=N+(D<<4&4294967295|D>>>28),D=q+(M^N^L)+k[8]+2272392833&4294967295,q=M+(D<<11&4294967295|D>>>21),D=L+(q^M^N)+k[11]+1839030562&4294967295,L=q+(D<<16&4294967295|D>>>16),D=N+(L^q^M)+k[14]+4259657740&4294967295,N=L+(D<<23&4294967295|D>>>9),D=M+(N^L^q)+k[1]+2763975236&4294967295,M=N+(D<<4&4294967295|D>>>28),D=q+(M^N^L)+k[4]+1272893353&4294967295,q=M+(D<<11&4294967295|D>>>21),D=L+(q^M^N)+k[7]+4139469664&4294967295,L=q+(D<<16&4294967295|D>>>16),D=N+(L^q^M)+k[10]+3200236656&4294967295,N=L+(D<<23&4294967295|D>>>9),D=M+(N^L^q)+k[13]+681279174&4294967295,M=N+(D<<4&4294967295|D>>>28),D=q+(M^N^L)+k[0]+3936430074&4294967295,q=M+(D<<11&4294967295|D>>>21),D=L+(q^M^N)+k[3]+3572445317&4294967295,L=q+(D<<16&4294967295|D>>>16),D=N+(L^q^M)+k[6]+76029189&4294967295,N=L+(D<<23&4294967295|D>>>9),D=M+(N^L^q)+k[9]+3654602809&4294967295,M=N+(D<<4&4294967295|D>>>28),D=q+(M^N^L)+k[12]+3873151461&4294967295,q=M+(D<<11&4294967295|D>>>21),D=L+(q^M^N)+k[15]+530742520&4294967295,L=q+(D<<16&4294967295|D>>>16),D=N+(L^q^M)+k[2]+3299628645&4294967295,N=L+(D<<23&4294967295|D>>>9),D=M+(L^(N|~q))+k[0]+4096336452&4294967295,M=N+(D<<6&4294967295|D>>>26),D=q+(N^(M|~L))+k[7]+1126891415&4294967295,q=M+(D<<10&4294967295|D>>>22),D=L+(M^(q|~N))+k[14]+2878612391&4294967295,L=q+(D<<15&4294967295|D>>>17),D=N+(q^(L|~M))+k[5]+4237533241&4294967295,N=L+(D<<21&4294967295|D>>>11),D=M+(L^(N|~q))+k[12]+1700485571&4294967295,M=N+(D<<6&4294967295|D>>>26),D=q+(N^(M|~L))+k[3]+2399980690&4294967295,q=M+(D<<10&4294967295|D>>>22),D=L+(M^(q|~N))+k[10]+4293915773&4294967295,L=q+(D<<15&4294967295|D>>>17),D=N+(q^(L|~M))+k[1]+2240044497&4294967295,N=L+(D<<21&4294967295|D>>>11),D=M+(L^(N|~q))+k[8]+1873313359&4294967295,M=N+(D<<6&4294967295|D>>>26),D=q+(N^(M|~L))+k[15]+4264355552&4294967295,q=M+(D<<10&4294967295|D>>>22),D=L+(M^(q|~N))+k[6]+2734768916&4294967295,L=q+(D<<15&4294967295|D>>>17),D=N+(q^(L|~M))+k[13]+1309151649&4294967295,N=L+(D<<21&4294967295|D>>>11),D=M+(L^(N|~q))+k[4]+4149444226&4294967295,M=N+(D<<6&4294967295|D>>>26),D=q+(N^(M|~L))+k[11]+3174756917&4294967295,q=M+(D<<10&4294967295|D>>>22),D=L+(M^(q|~N))+k[2]+718787259&4294967295,L=q+(D<<15&4294967295|D>>>17),D=N+(q^(L|~M))+k[9]+3951481745&4294967295,R.g[0]=R.g[0]+M&4294967295,R.g[1]=R.g[1]+(L+(D<<21&4294967295|D>>>11))&4294967295,R.g[2]=R.g[2]+L&4294967295,R.g[3]=R.g[3]+q&4294967295}s.prototype.v=function(R,M){M===void 0&&(M=R.length);const N=M-this.blockSize,k=this.C;let L=this.h,q=0;for(;q<M;){if(L==0)for(;q<=N;)o(this,R,q),q+=this.blockSize;if(typeof R=="string"){for(;q<M;)if(k[L++]=R.charCodeAt(q++),L==this.blockSize){o(this,k),L=0;break}}else for(;q<M;)if(k[L++]=R[q++],L==this.blockSize){o(this,k),L=0;break}}this.h=L,this.o+=M},s.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var M=1;M<R.length-8;++M)R[M]=0;M=this.o*8;for(var N=R.length-8;N<R.length;++N)R[N]=M&255,M/=256;for(this.v(R),R=Array(16),M=0,N=0;N<4;++N)for(let k=0;k<32;k+=8)R[M++]=this.g[N]>>>k&255;return R};function l(R,M){var N=d;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=M(R)}function c(R,M){this.h=M;const N=[];let k=!0;for(let L=R.length-1;L>=0;L--){const q=R[L]|0;k&&q==M||(N[L]=q,k=!1)}this.g=N}var d={};function p(R){return-128<=R&&R<128?l(R,function(M){return new c([M|0],M<0?-1:0)}):new c([R|0],R<0?-1:0)}function m(R){if(isNaN(R)||!isFinite(R))return E;if(R<0)return z(m(-R));const M=[];let N=1;for(let k=0;R>=N;k++)M[k]=R/N|0,N*=4294967296;return new c(M,0)}function v(R,M){if(R.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(R.charAt(0)=="-")return z(v(R.substring(1),M));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=m(Math.pow(M,8));let k=E;for(let q=0;q<R.length;q+=8){var L=Math.min(8,R.length-q);const D=parseInt(R.substring(q,q+L),M);L<8?(L=m(Math.pow(M,L)),k=k.j(L).add(m(D))):(k=k.j(N),k=k.add(m(D)))}return k}var E=p(0),A=p(1),x=p(16777216);n=c.prototype,n.m=function(){if(B(this))return-z(this).m();let R=0,M=1;for(let N=0;N<this.g.length;N++){const k=this.i(N);R+=(k>=0?k:4294967296+k)*M,M*=4294967296}return R},n.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(U(this))return"0";if(B(this))return"-"+z(this).toString(R);const M=m(Math.pow(R,6));var N=this;let k="";for(;;){const L=F(N,M).g;N=ee(N,L.j(M));let q=((N.g.length>0?N.g[0]:N.h)>>>0).toString(R);if(N=L,U(N))return q+k;for(;q.length<6;)q="0"+q;k=q+k}},n.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function U(R){if(R.h!=0)return!1;for(let M=0;M<R.g.length;M++)if(R.g[M]!=0)return!1;return!0}function B(R){return R.h==-1}n.l=function(R){return R=ee(this,R),B(R)?-1:U(R)?0:1};function z(R){const M=R.g.length,N=[];for(let k=0;k<M;k++)N[k]=~R.g[k];return new c(N,~R.h).add(A)}n.abs=function(){return B(this)?z(this):this},n.add=function(R){const M=Math.max(this.g.length,R.g.length),N=[];let k=0;for(let L=0;L<=M;L++){let q=k+(this.i(L)&65535)+(R.i(L)&65535),D=(q>>>16)+(this.i(L)>>>16)+(R.i(L)>>>16);k=D>>>16,q&=65535,D&=65535,N[L]=D<<16|q}return new c(N,N[N.length-1]&-2147483648?-1:0)};function ee(R,M){return R.add(z(M))}n.j=function(R){if(U(this)||U(R))return E;if(B(this))return B(R)?z(this).j(z(R)):z(z(this).j(R));if(B(R))return z(this.j(z(R)));if(this.l(x)<0&&R.l(x)<0)return m(this.m()*R.m());const M=this.g.length+R.g.length,N=[];for(var k=0;k<2*M;k++)N[k]=0;for(k=0;k<this.g.length;k++)for(let L=0;L<R.g.length;L++){const q=this.i(k)>>>16,D=this.i(k)&65535,je=R.i(L)>>>16,ft=R.i(L)&65535;N[2*k+2*L]+=D*ft,te(N,2*k+2*L),N[2*k+2*L+1]+=q*ft,te(N,2*k+2*L+1),N[2*k+2*L+1]+=D*je,te(N,2*k+2*L+1),N[2*k+2*L+2]+=q*je,te(N,2*k+2*L+2)}for(R=0;R<M;R++)N[R]=N[2*R+1]<<16|N[2*R];for(R=M;R<2*M;R++)N[R]=0;return new c(N,0)};function te(R,M){for(;(R[M]&65535)!=R[M];)R[M+1]+=R[M]>>>16,R[M]&=65535,M++}function $(R,M){this.g=R,this.h=M}function F(R,M){if(U(M))throw Error("division by zero");if(U(R))return new $(E,E);if(B(R))return M=F(z(R),M),new $(z(M.g),z(M.h));if(B(M))return M=F(R,z(M)),new $(z(M.g),M.h);if(R.g.length>30){if(B(R)||B(M))throw Error("slowDivide_ only works with positive integers.");for(var N=A,k=M;k.l(R)<=0;)N=ne(N),k=ne(k);var L=oe(N,1),q=oe(k,1);for(k=oe(k,2),N=oe(N,2);!U(k);){var D=q.add(k);D.l(R)<=0&&(L=L.add(N),q=D),k=oe(k,1),N=oe(N,1)}return M=ee(R,L.j(M)),new $(L,M)}for(L=E;R.l(M)>=0;){for(N=Math.max(1,Math.floor(R.m()/M.m())),k=Math.ceil(Math.log(N)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),q=m(N),D=q.j(M);B(D)||D.l(R)>0;)N-=k,q=m(N),D=q.j(M);U(q)&&(q=A),L=L.add(q),R=ee(R,D)}return new $(L,R)}n.B=function(R){return F(this,R).h},n.and=function(R){const M=Math.max(this.g.length,R.g.length),N=[];for(let k=0;k<M;k++)N[k]=this.i(k)&R.i(k);return new c(N,this.h&R.h)},n.or=function(R){const M=Math.max(this.g.length,R.g.length),N=[];for(let k=0;k<M;k++)N[k]=this.i(k)|R.i(k);return new c(N,this.h|R.h)},n.xor=function(R){const M=Math.max(this.g.length,R.g.length),N=[];for(let k=0;k<M;k++)N[k]=this.i(k)^R.i(k);return new c(N,this.h^R.h)};function ne(R){const M=R.g.length+1,N=[];for(let k=0;k<M;k++)N[k]=R.i(k)<<1|R.i(k-1)>>>31;return new c(N,R.h)}function oe(R,M){const N=M>>5;M%=32;const k=R.g.length-N,L=[];for(let q=0;q<k;q++)L[q]=M>0?R.i(q+N)>>>M|R.i(q+N+1)<<32-M:R.i(q+N);return new c(L,R.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,pS=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=v,cr=c}).apply(typeof fE<"u"?fE:typeof self<"u"?self:typeof window<"u"?window:{});var Jc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gS,Bl,yS,nd,Ym,_S,vS,TS;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jc=="object"&&Jc];for(var S=0;S<h.length;++S){var I=h[S];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var s=t(this);function o(h,S){if(S)e:{var I=s;h=h.split(".");for(var w=0;w<h.length-1;w++){var G=h[w];if(!(G in I))break e;I=I[G]}h=h[h.length-1],w=I[h],S=S(w),S!=w&&S!=null&&e(I,h,{configurable:!0,writable:!0,value:S})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(S){var I=[],w;for(w in S)Object.prototype.hasOwnProperty.call(S,w)&&I.push([w,S[w]]);return I}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(h){var S=typeof h;return S=="object"&&h!=null||S=="function"}function p(h,S,I){return h.call.apply(h.bind,arguments)}function m(h,S,I){return m=p,m.apply(null,arguments)}function v(h,S){var I=Array.prototype.slice.call(arguments,1);return function(){var w=I.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function E(h,S){function I(){}I.prototype=S.prototype,h.Z=S.prototype,h.prototype=new I,h.prototype.constructor=h,h.Ob=function(w,G,j){for(var ue=Array(arguments.length-2),De=2;De<arguments.length;De++)ue[De-2]=arguments[De];return S.prototype[G].apply(w,ue)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function x(h){const S=h.length;if(S>0){const I=Array(S);for(let w=0;w<S;w++)I[w]=h[w];return I}return[]}function U(h,S){for(let w=1;w<arguments.length;w++){const G=arguments[w];var I=typeof G;if(I=I!="object"?I:G?Array.isArray(G)?"array":I:"null",I=="array"||I=="object"&&typeof G.length=="number"){I=h.length||0;const j=G.length||0;h.length=I+j;for(let ue=0;ue<j;ue++)h[I+ue]=G[ue]}else h.push(G)}}class B{constructor(S,I){this.i=S,this.j=I,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function z(h){c.setTimeout(()=>{throw h},0)}function ee(){var h=R;let S=null;return h.g&&(S=h.g,h.g=h.g.next,h.g||(h.h=null),S.next=null),S}class te{constructor(){this.h=this.g=null}add(S,I){const w=$.get();w.set(S,I),this.h?this.h.next=w:this.g=w,this.h=w}}var $=new B(()=>new F,h=>h.reset());class F{constructor(){this.next=this.g=this.h=null}set(S,I){this.h=S,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,oe=!1,R=new te,M=()=>{const h=Promise.resolve(void 0);ne=()=>{h.then(N)}};function N(){for(var h;h=ee();){try{h.h.call(h.g)}catch(I){z(I)}var S=$;S.j(h),S.h<100&&(S.h++,h.next=S.g,S.g=h)}oe=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(h,S){this.type=h,this.g=this.target=S,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,S=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const I=()=>{};c.addEventListener("test",I,S),c.removeEventListener("test",I,S)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function je(h,S){L.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,S)}E(je,L),je.prototype.init=function(h,S){const I=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=S,S=h.relatedTarget,S||(I=="mouseover"?S=h.fromElement:I=="mouseout"&&(S=h.toElement)),this.relatedTarget=S,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&je.Z.h.call(this)},je.prototype.h=function(){je.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ft="closure_listenable_"+(Math.random()*1e6|0),X=0;function ce(h,S,I,w,G){this.listener=h,this.proxy=null,this.src=S,this.type=I,this.capture=!!w,this.ha=G,this.key=++X,this.da=this.fa=!1}function ae(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function fe(h,S,I){for(const w in h)S.call(I,h[w],w,h)}function he(h,S){for(const I in h)S.call(void 0,h[I],I,h)}function P(h){const S={};for(const I in h)S[I]=h[I];return S}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(h,S){let I,w;for(let G=1;G<arguments.length;G++){w=arguments[G];for(I in w)h[I]=w[I];for(let j=0;j<W.length;j++)I=W[j],Object.prototype.hasOwnProperty.call(w,I)&&(h[I]=w[I])}}function me(h){this.src=h,this.g={},this.h=0}me.prototype.add=function(h,S,I,w,G){const j=h.toString();h=this.g[j],h||(h=this.g[j]=[],this.h++);const ue=Me(h,S,w,G);return ue>-1?(S=h[ue],I||(S.fa=!1)):(S=new ce(S,this.src,j,!!w,G),S.fa=I,h.push(S)),S};function Ie(h,S){const I=S.type;if(I in h.g){var w=h.g[I],G=Array.prototype.indexOf.call(w,S,void 0),j;(j=G>=0)&&Array.prototype.splice.call(w,G,1),j&&(ae(S),h.g[I].length==0&&(delete h.g[I],h.h--))}}function Me(h,S,I,w){for(let G=0;G<h.length;++G){const j=h[G];if(!j.da&&j.listener==S&&j.capture==!!I&&j.ha==w)return G}return-1}var Le="closure_lm_"+(Math.random()*1e6|0),Tt={};function ot(h,S,I,w,G){if(Array.isArray(S)){for(let j=0;j<S.length;j++)ot(h,S[j],I,w,G);return null}return I=Va(I),h&&h[ft]?h.J(S,I,d(w)?!!w.capture:!1,G):Ee(h,S,I,!1,w,G)}function Ee(h,S,I,w,G,j){if(!S)throw Error("Invalid event type");const ue=d(G)?!!G.capture:!!G;let De=vr(h);if(De||(h[Le]=De=new me(h)),I=De.add(S,I,w,ue,j),I.proxy)return I;if(w=Et(),I.proxy=w,w.src=h,w.listener=I,h.addEventListener)q||(G=ue),G===void 0&&(G=!1),h.addEventListener(S.toString(),w,G);else if(h.attachEvent)h.attachEvent(pt(S.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return I}function Et(){function h(I){return S.call(h.src,h.listener,I)}const S=hn;return h}function fi(h,S,I,w,G){if(Array.isArray(S))for(var j=0;j<S.length;j++)fi(h,S[j],I,w,G);else w=d(w)?!!w.capture:!!w,I=Va(I),h&&h[ft]?(h=h.i,j=String(S).toString(),j in h.g&&(S=h.g[j],I=Me(S,I,w,G),I>-1&&(ae(S[I]),Array.prototype.splice.call(S,I,1),S.length==0&&(delete h.g[j],h.h--)))):h&&(h=vr(h))&&(S=h.g[S.toString()],h=-1,S&&(h=Me(S,I,w,G)),(I=h>-1?S[h]:null)&&Sn(I))}function Sn(h){if(typeof h!="number"&&h&&!h.da){var S=h.src;if(S&&S[ft])Ie(S.i,h);else{var I=h.type,w=h.proxy;S.removeEventListener?S.removeEventListener(I,w,h.capture):S.detachEvent?S.detachEvent(pt(I),w):S.addListener&&S.removeListener&&S.removeListener(w),(I=vr(S))?(Ie(I,h),I.h==0&&(I.src=null,S[Le]=null)):ae(h)}}}function pt(h){return h in Tt?Tt[h]:Tt[h]="on"+h}function hn(h,S){if(h.da)h=!0;else{S=new je(S,this);const I=h.listener,w=h.ha||h.src;h.fa&&Sn(h),h=I.call(w,S)}return h}function vr(h){return h=h[Le],h instanceof me?h:null}var Pa="__closure_events_fn_"+(Math.random()*1e9>>>0);function Va(h){return typeof h=="function"?h:(h[Pa]||(h[Pa]=function(S){return h.handleEvent(S)}),h[Pa])}function xt(){k.call(this),this.i=new me(this),this.M=this,this.G=null}E(xt,k),xt.prototype[ft]=!0,xt.prototype.removeEventListener=function(h,S,I,w){fi(this,h,S,I,w)};function qt(h,S){var I,w=h.G;if(w)for(I=[];w;w=w.G)I.push(w);if(h=h.M,w=S.type||S,typeof S=="string")S=new L(S,h);else if(S instanceof L)S.target=S.target||h;else{var G=S;S=new L(w,h),de(S,G)}G=!0;let j,ue;if(I)for(ue=I.length-1;ue>=0;ue--)j=S.g=I[ue],G=Es(j,w,!0,S)&&G;if(j=S.g=h,G=Es(j,w,!0,S)&&G,G=Es(j,w,!1,S)&&G,I)for(ue=0;ue<I.length;ue++)j=S.g=I[ue],G=Es(j,w,!1,S)&&G}xt.prototype.N=function(){if(xt.Z.N.call(this),this.i){var h=this.i;for(const S in h.g){const I=h.g[S];for(let w=0;w<I.length;w++)ae(I[w]);delete h.g[S],h.h--}}this.G=null},xt.prototype.J=function(h,S,I,w){return this.i.add(String(h),S,!1,I,w)},xt.prototype.K=function(h,S,I,w){return this.i.add(String(h),S,!0,I,w)};function Es(h,S,I,w){if(S=h.i.g[String(S)],!S)return!0;S=S.concat();let G=!0;for(let j=0;j<S.length;++j){const ue=S[j];if(ue&&!ue.da&&ue.capture==I){const De=ue.listener,At=ue.ha||ue.src;ue.fa&&Ie(h.i,ue),G=De.call(At,w)!==!1&&G}}return G&&!w.defaultPrevented}function lf(h,S){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=m(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:c.setTimeout(h,S||0)}function gu(h){h.g=lf(()=>{h.g=null,h.i&&(h.i=!1,gu(h))},h.l);const S=h.h;h.h=null,h.m.apply(null,S)}class un extends k{constructor(S,I){super(),this.m=S,this.l=I,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:gu(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tr(h){k.call(this),this.h=h,this.g={}}E(Tr,k);var ka=[];function Ua(h){fe(h.g,function(S,I){this.g.hasOwnProperty(I)&&Sn(S)},h),h.g={}}Tr.prototype.N=function(){Tr.Z.N.call(this),Ua(this)},Tr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ss=c.JSON.stringify,uf=c.JSON.parse,yu=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function _u(){}function vu(){}var jn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $t(){L.call(this,"d")}E($t,L);function Pn(){L.call(this,"c")}E(Pn,L);var St={},Tu=null;function fo(){return Tu=Tu||new xt}St.Ia="serverreachability";function Eu(h){L.call(this,St.Ia,h)}E(Eu,L);function hi(h){const S=fo();qt(S,new Eu(S))}St.STAT_EVENT="statevent";function Er(h,S){L.call(this,St.STAT_EVENT,h),this.stat=S}E(Er,L);function wt(h){const S=fo();qt(S,new Er(S,h))}St.Ja="timingevent";function mi(h,S){L.call(this,St.Ja,h),this.size=S}E(mi,L);function pi(h,S){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},S)}function $n(){this.g=!0}$n.prototype.ua=function(){this.g=!1};function cf(h,S,I,w,G,j){h.info(function(){if(h.g)if(j){var ue="",De=j.split("&");for(let $e=0;$e<De.length;$e++){var At=De[$e].split("=");if(At.length>1){const ht=At[0];At=At[1];const Ln=ht.split("_");ue=Ln.length>=2&&Ln[1]=="type"?ue+(ht+"="+At+"&"):ue+(ht+"=redacted&")}}}else ue=null;else ue=j;return"XMLHTTP REQ ("+w+") [attempt "+G+"]: "+S+`
`+I+`
`+ue})}function Su(h,S,I,w,G,j,ue){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+G+"]: "+S+`
`+I+`
`+j+" "+ue})}function gi(h,S,I,w){h.info(function(){return"XMLHTTP TEXT ("+S+"): "+df(h,I)+(w?" "+w:"")})}function Sr(h,S){h.info(function(){return"TIMEOUT: "+S})}$n.prototype.info=function(){};function df(h,S){if(!h.g)return S;if(!S)return null;try{const j=JSON.parse(S);if(j){for(h=0;h<j.length;h++)if(Array.isArray(j[h])){var I=j[h];if(!(I.length<2)){var w=I[1];if(Array.isArray(w)&&!(w.length<1)){var G=w[0];if(G!="noop"&&G!="stop"&&G!="close")for(let ue=1;ue<w.length;ue++)w[ue]=""}}}}return Ss(j)}catch{return S}}var Ar={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},La={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Oa;function Cr(){}E(Cr,_u),Cr.prototype.g=function(){return new XMLHttpRequest},Oa=new Cr;function Hi(h){return encodeURIComponent(String(h))}function Au(h){var S=1;h=h.split(":");const I=[];for(;S>0&&h.length;)I.push(h.shift()),S--;return h.length&&I.push(h.join(":")),I}function Qn(h,S,I,w){this.j=h,this.i=S,this.l=I,this.S=w||1,this.V=new Tr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Xn}function Xn(){this.i=null,this.g="",this.h=!1}var Rt={},Ht={};function yi(h,S,I){h.M=1,h.A=Ir(Mt(S)),h.u=I,h.R=!0,ho(h,null)}function ho(h,S){h.F=Date.now(),_i(h),h.B=Mt(h.A);var I=h.B,w=h.S;Array.isArray(w)||(w=[String(w)]),yo(I.i,"t",w),h.C=0,I=h.j.L,h.h=new Xn,h.g=Ou(h.j,I?S:null,!h.u),h.P>0&&(h.O=new un(m(h.Y,h,h.g),h.P)),S=h.V,I=h.g,w=h.ba;var G="readystatechange";Array.isArray(G)||(G&&(ka[0]=G.toString()),G=ka);for(let j=0;j<G.length;j++){const ue=ot(I,G[j],w||S.handleEvent,!1,S.h||S);if(!ue)break;S.g[ue.key]=ue}S=h.J?P(h.J):{},h.u?(h.v||(h.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,S)):(h.v="GET",h.g.ea(h.B,h.v,null,S)),hi(),cf(h.i,h.v,h.B,h.l,h.S,h.u)}Qn.prototype.ba=function(h){h=h.target;const S=this.O;S&&ei(h)==3?S.j():this.Y(h)},Qn.prototype.Y=function(h){try{if(h==this.g)e:{const De=ei(this.g),At=this.g.ya(),$e=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||Qt(this.g)))){this.K||De!=4||At==7||(At==8||$e<=0?hi(3):hi(2)),vi(this);var S=this.g.ca();this.X=S;var I=ff(this);if(this.o=S==200,Su(this.i,this.v,this.B,this.l,this.S,De,S),this.o){if(this.U&&!this.L){t:{if(this.g){var w,G=this.g;if((w=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(w)){var j=w;break t}}j=null}if(h=j)gi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ti(this,h);else{this.o=!1,this.m=3,wt(12),An(this),Vn(this);break e}}if(this.R){h=!0;let ht;for(;!this.K&&this.C<I.length;)if(ht=Iu(this,I),ht==Ht){De==4&&(this.m=4,wt(14),h=!1),gi(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==Rt){this.m=4,wt(15),gi(this.i,this.l,I,"[Invalid Chunk]"),h=!1;break}else gi(this.i,this.l,ht,null),Ti(this,ht);if(Cu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||I.length!=0||this.h.h||(this.m=1,wt(16),h=!1),this.o=this.o&&h,!h)gi(this.i,this.l,I,"[Invalid Chunked Response]"),An(this),Vn(this);else if(I.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),Za(ue),ue.P=!0,wt(11))}}else gi(this.i,this.l,I,null),Ti(this,I);De==4&&An(this),this.o&&!this.K&&(De==4?Vu(this.j,this):(this.o=!1,_i(this)))}else Yi(this.g),S==400&&I.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),An(this),Vn(this)}}}catch{}finally{}};function ff(h){if(!Cu(h))return h.g.la();const S=Qt(h.g);if(S==="")return"";let I="";const w=S.length,G=ei(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return An(h),Vn(h),"";h.h.i=new c.TextDecoder}for(let j=0;j<w;j++)h.h.h=!0,I+=h.h.i.decode(S[j],{stream:!(G&&j==w-1)});return S.length=0,h.h.g+=I,h.C=0,h.h.g}function Cu(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Iu(h,S){var I=h.C,w=S.indexOf(`
`,I);return w==-1?Ht:(I=Number(S.substring(I,w)),isNaN(I)?Rt:(w+=1,w+I>S.length?Ht:(S=S.slice(w,w+I),h.C=w+I,S)))}Qn.prototype.cancel=function(){this.K=!0,An(this)};function _i(h){h.T=Date.now()+h.H,mo(h,h.H)}function mo(h,S){if(h.D!=null)throw Error("WatchDog timer not null");h.D=pi(m(h.aa,h),S)}function vi(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Qn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Sr(this.i,this.B),this.M!=2&&(hi(),wt(17)),An(this),this.m=2,Vn(this)):mo(this,this.T-h)};function Vn(h){h.j.I==0||h.K||Vu(h.j,h)}function An(h){vi(h);var S=h.O;S&&typeof S.dispose=="function"&&S.dispose(),h.O=null,Ua(h.V),h.g&&(S=h.g,h.g=null,S.abort(),S.dispose())}function Ti(h,S){try{var I=h.j;if(I.I!=0&&(I.g==h||Si(I.h,h))){if(!h.L&&Si(I.h,h)&&I.I==3){try{var w=I.Ba.g.parse(S)}catch{w=null}if(Array.isArray(w)&&w.length==3){var G=w;if(G[0]==0){e:if(!I.v){if(I.g)if(I.g.F+3e3<h.F)So(I),Ns(I);else break e;Dr(I),wt(18)}}else I.xa=G[1],0<I.xa-I.K&&G[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=pi(m(I.Va,I),6e3));Ei(I.h)<=1&&I.ta&&(I.ta=void 0)}else wi(I,11)}else if((h.L||I.g==h)&&So(I),!D(S))for(G=I.Ba.g.parse(S),S=0;S<G.length;S++){let $e=G[S];const ht=$e[0];if(!(ht<=I.K))if(I.K=ht,$e=$e[1],I.I==2)if($e[0]=="c"){I.M=$e[1],I.ba=$e[2];const Ln=$e[3];Ln!=null&&(I.ka=Ln,I.j.info("VER="+I.ka));const Ri=$e[4];Ri!=null&&(I.za=Ri,I.j.info("SVER="+I.za));const ti=$e[5];ti!=null&&typeof ti=="number"&&ti>0&&(w=1.5*ti,I.O=w,I.j.info("backChannelRequestTimeoutMs_="+w)),w=I;const ni=h.g;if(ni){const Pr=ni.g?ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pr){var j=w.h;j.g||Pr.indexOf("spdy")==-1&&Pr.indexOf("quic")==-1&&Pr.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Fa(j,j.h),j.h=null))}if(w.G){const Ao=ni.g?ni.g.getResponseHeader("X-HTTP-Session-Id"):null;Ao&&(w.wa=Ao,We(w.J,w.G,Ao))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-h.F,I.j.info("Handshake RTT: "+I.T+"ms")),w=I;var ue=h;if(w.na=Lu(w,w.L?w.ba:null,w.W),ue.L){za(w.h,ue);var De=ue,At=w.O;At&&(De.H=At),De.D&&(vi(De),_i(De)),w.g=ue}else Du(w);I.i.length>0&&xi(I)}else $e[0]!="stop"&&$e[0]!="close"||wi(I,7);else I.I==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?wi(I,7):Xa(I):$e[0]!="noop"&&I.l&&I.l.qa($e),I.A=0)}}hi(4)}catch{}}var Nt=class{constructor(h,S){this.g=h,this.map=S}};function qa(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ba(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ei(h){return h.h?1:h.g?h.g.size:0}function Si(h,S){return h.h?h.h==S:h.g?h.g.has(S):!1}function Fa(h,S){h.g?h.g.add(S):h.h=S}function za(h,S){h.h&&h.h==S?h.h=null:h.g&&h.g.has(S)&&h.g.delete(S)}qa.prototype.cancel=function(){if(this.i=Ha(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ha(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let S=h.i;for(const I of h.g.values())S=S.concat(I.G);return S}return x(h.i)}var bu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function po(h,S){if(h){h=h.split("&");for(let I=0;I<h.length;I++){const w=h[I].indexOf("=");let G,j=null;w>=0?(G=h[I].substring(0,w),j=h[I].substring(w+1)):G=h[I],S(G,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Cn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;h instanceof Cn?(this.l=h.l,Gt(this,h.j),this.o=h.o,this.g=h.g,As(this,h.u),this.h=h.h,Ga(this,Nu(h.i)),this.m=h.m):h&&(S=String(h).match(bu))?(this.l=!1,Gt(this,S[1]||"",!0),this.o=Ai(S[2]||""),this.g=Ai(S[3]||"",!0),As(this,S[4]),this.h=Ai(S[5]||"",!0),Ga(this,S[6]||"",!0),this.m=Ai(S[7]||"")):(this.l=!1,this.i=new Is(null,this.l))}Cn.prototype.toString=function(){const h=[];var S=this.j;S&&h.push(br(S,go,!0),":");var I=this.g;return(I||S=="file")&&(h.push("//"),(S=this.o)&&h.push(br(S,go,!0),"@"),h.push(Hi(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&h.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&h.push("/"),h.push(br(I,I.charAt(0)=="/"?Ya:xu,!0))),(I=this.i.toString())&&h.push("?",I),(I=this.m)&&h.push("#",br(I,wu)),h.join("")},Cn.prototype.resolve=function(h){const S=Mt(this);let I=!!h.j;I?Gt(S,h.j):I=!!h.o,I?S.o=h.o:I=!!h.g,I?S.g=h.g:I=h.u!=null;var w=h.h;if(I)As(S,h.u);else if(I=!!h.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var G=S.h.lastIndexOf("/");G!=-1&&(w=S.h.slice(0,G+1)+w)}if(G=w,G==".."||G==".")w="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){w=G.lastIndexOf("/",0)==0,G=G.split("/");const j=[];for(let ue=0;ue<G.length;){const De=G[ue++];De=="."?w&&ue==G.length&&j.push(""):De==".."?((j.length>1||j.length==1&&j[0]!="")&&j.pop(),w&&ue==G.length&&j.push("")):(j.push(De),w=!0)}w=j.join("/")}else w=G}return I?S.h=w:I=h.i.toString()!=="",I?Ga(S,Nu(h.i)):I=!!h.m,I&&(S.m=h.m),S};function Mt(h){return new Cn(h)}function Gt(h,S,I){h.j=I?Ai(S,!0):S,h.j&&(h.j=h.j.replace(/:$/,""))}function As(h,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);h.u=S}else h.u=null}function Ga(h,S,I){S instanceof Is?(h.i=S,_o(h.i,h.l)):(I||(S=br(S,Cs)),h.i=new Is(S,h.l))}function We(h,S,I){h.i.set(S,I)}function Ir(h){return We(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ai(h,S){return h?S?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function br(h,S,I){return typeof h=="string"?(h=encodeURI(h).replace(S,mn),I&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function mn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var go=/[#\/\?@]/g,xu=/[#\?:]/g,Ya=/[#\?]/g,Cs=/[#\?@]/g,wu=/#/g;function Is(h,S){this.h=this.g=null,this.i=h||null,this.j=!!S}function pn(h){h.g||(h.g=new Map,h.h=0,h.i&&po(h.i,function(S,I){h.add(decodeURIComponent(S.replace(/\+/g," ")),I)}))}n=Is.prototype,n.add=function(h,S){pn(this),this.i=null,h=bs(this,h);let I=this.g.get(h);return I||this.g.set(h,I=[]),I.push(S),this.h+=1,this};function Ru(h,S){pn(h),S=bs(h,S),h.g.has(S)&&(h.i=null,h.h-=h.g.get(S).length,h.g.delete(S))}function Ja(h,S){return pn(h),S=bs(h,S),h.g.has(S)}n.forEach=function(h,S){pn(this),this.g.forEach(function(I,w){I.forEach(function(G){h.call(S,G,w,this)},this)},this)};function Ka(h,S){pn(h);let I=[];if(typeof S=="string")Ja(h,S)&&(I=I.concat(h.g.get(bs(h,S))));else for(h=Array.from(h.g.values()),S=0;S<h.length;S++)I=I.concat(h[S]);return I}n.set=function(h,S){return pn(this),this.i=null,h=bs(this,h),Ja(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[S]),this.h+=1,this},n.get=function(h,S){return h?(h=Ka(this,h),h.length>0?String(h[0]):S):S};function yo(h,S,I){Ru(h,S),I.length>0&&(h.i=null,h.g.set(bs(h,S),x(I)),h.h+=I.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],S=Array.from(this.g.keys());for(let w=0;w<S.length;w++){var I=S[w];const G=Hi(I);I=Ka(this,I);for(let j=0;j<I.length;j++){let ue=G;I[j]!==""&&(ue+="="+Hi(I[j])),h.push(ue)}}return this.i=h.join("&")};function Nu(h){const S=new Is;return S.i=h.i,h.g&&(S.g=new Map(h.g),S.h=h.h),S}function bs(h,S){return S=String(S),h.j&&(S=S.toLowerCase()),S}function _o(h,S){S&&!h.j&&(pn(h),h.i=null,h.g.forEach(function(I,w){const G=w.toLowerCase();w!=G&&(Ru(this,w),yo(this,G,I))},h)),h.j=S}function Wn(h,S){const I=new $n;if(c.Image){const w=new Image;w.onload=v(kn,I,"TestLoadImage: loaded",!0,S,w),w.onerror=v(kn,I,"TestLoadImage: error",!1,S,w),w.onabort=v(kn,I,"TestLoadImage: abort",!1,S,w),w.ontimeout=v(kn,I,"TestLoadImage: timeout",!1,S,w),c.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else S(!1)}function ja(h,S){const I=new $n,w=new AbortController,G=setTimeout(()=>{w.abort(),kn(I,"TestPingServer: timeout",!1,S)},1e4);fetch(h,{signal:w.signal}).then(j=>{clearTimeout(G),j.ok?kn(I,"TestPingServer: ok",!0,S):kn(I,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(G),kn(I,"TestPingServer: error",!1,S)})}function kn(h,S,I,w,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),w(I)}catch{}}function xs(){this.g=new yu}function Ci(h){this.i=h.Sb||null,this.h=h.ab||!1}E(Ci,_u),Ci.prototype.g=function(){return new xr(this.i,this.h)};function xr(h,S){xt.call(this),this.H=h,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(xr,xt),n=xr.prototype,n.open=function(h,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=S,this.readyState=1,Zn(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(S.body=h),(this.H||c).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ws(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Zn(this)),this.g&&(this.readyState=3,Zn(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;vo(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function vo(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var S=h.value?h.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!h.done}))&&(this.response=this.responseText+=S)}h.done?ws(this):Zn(this),this.readyState==3&&vo(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,ws(this))},n.Na=function(h){this.g&&(this.response=h,ws(this))},n.ga=function(){this.g&&ws(this)};function ws(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Zn(h)}n.setRequestHeader=function(h,S){this.A.append(h,S)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],S=this.h.entries();for(var I=S.next();!I.done;)I=I.value,h.push(I[0]+": "+I[1]),I=S.next();return h.join(`\r
`)};function Zn(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(xr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Un(h){let S="";return fe(h,function(I,w){S+=w,S+=":",S+=I,S+=`\r
`}),S}function wr(h,S,I){e:{for(w in I){var w=!1;break e}w=!0}w||(I=Un(I),typeof h=="string"?I!=null&&Hi(I):We(h,S,I))}function tt(h){xt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(tt,xt);var Ii=/^https?$/i,$a=["POST","PUT"];n=tt.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,S,I,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);S=S?S.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Oa.g(),this.g.onreadystatechange=A(m(this.Ca,this));try{this.B=!0,this.g.open(S,String(h),!0),this.B=!1}catch(j){Rr(this,j);return}if(h=I||"",I=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var G in w)I.set(G,w[G]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const j of w.keys())I.set(j,w.get(j));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(I.keys()).find(j=>j.toLowerCase()=="content-type"),G=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call($a,S,void 0)>=0)||w||G||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,ue]of I)this.g.setRequestHeader(j,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(j){Rr(this,j)}};function Rr(h,S){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=S,h.o=5,Qa(h),Gi(h)}function Qa(h){h.A||(h.A=!0,qt(h,"complete"),qt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,qt(this,"complete"),qt(this,"abort"),Gi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gi(this,!0)),tt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Nr(this):this.Xa())},n.Xa=function(){Nr(this)};function Nr(h){if(h.h&&typeof l<"u"){if(h.v&&ei(h)==4)setTimeout(h.Ca.bind(h),0);else if(qt(h,"readystatechange"),ei(h)==4){h.h=!1;try{const j=h.ca();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var I;if(!(I=S)){var w;if(w=j===0){let ue=String(h.D).match(bu)[1]||null;!ue&&c.self&&c.self.location&&(ue=c.self.location.protocol.slice(0,-1)),w=!Ii.test(ue?ue.toLowerCase():"")}I=w}if(I)qt(h,"complete"),qt(h,"success");else{h.o=6;try{var G=ei(h)>2?h.g.statusText:""}catch{G=""}h.l=G+" ["+h.ca()+"]",Qa(h)}}finally{Gi(h)}}}}function Gi(h,S){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const I=h.g;h.g=null,S||qt(h,"ready");try{I.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ei(h){return h.g?h.g.readyState:0}n.ca=function(){try{return ei(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var S=this.g.responseText;return h&&S.indexOf(h)==0&&(S=S.substring(h.length)),uf(S)}};function Qt(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Yi(h){const S={};h=(h.g&&ei(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(D(h[w]))continue;var I=Au(h[w]);const G=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const j=S[G]||[];S[G]=j,j.push(I)}he(S,function(w){return w.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function bi(h,S,I){return I&&I.internalChannelParams&&I.internalChannelParams[h]||S}function Rs(h){this.za=0,this.i=[],this.j=new $n,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=bi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=bi("baseRetryDelayMs",5e3,h),this.Za=bi("retryDelaySeedMs",1e4,h),this.Ta=bi("forwardChannelMaxRetries",2,h),this.va=bi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new qa(h&&h.concurrentRequestLimit),this.Ba=new xs,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Rs.prototype,n.ka=8,n.I=1,n.connect=function(h,S,I,w){wt(0),this.W=h,this.H=S||{},I&&w!==void 0&&(this.H.OSID=I,this.H.OAID=w),this.F=this.X,this.J=Lu(this,null,this.W),xi(this)};function Xa(h){if(To(h),h.I==3){var S=h.V++,I=Mt(h.J);if(We(I,"SID",h.M),We(I,"RID",S),We(I,"TYPE","terminate"),Mr(h,I),S=new Qn(h,h.j,S),S.M=2,S.A=Ir(Mt(I)),I=!1,c.navigator&&c.navigator.sendBeacon)try{I=c.navigator.sendBeacon(S.A.toString(),"")}catch{}!I&&c.Image&&(new Image().src=S.A,I=!0),I||(S.g=Ou(S.j,null),S.g.ea(S.A)),S.F=Date.now(),_i(S)}Uu(h)}function Ns(h){h.g&&(Za(h),h.g.cancel(),h.g=null)}function To(h){Ns(h),h.v&&(c.clearTimeout(h.v),h.v=null),So(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function xi(h){if(!Ba(h.h)&&!h.m){h.m=!0;var S=h.Ea;ne||M(),oe||(ne(),oe=!0),R.add(S,h),h.D=0}}function Eo(h,S){return Ei(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=S.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=pi(m(h.Ea,h,S),ku(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const G=new Qn(this,this.j,h);let j=this.o;if(this.U&&(j?(j=P(j),de(j,this.U)):j=this.U),this.u!==null||this.R||(G.J=j,j=null),this.S)e:{for(var S=0,I=0;I<this.i.length;I++){t:{var w=this.i[I];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(S+=w,S>4096){S=I;break e}if(S===4096||I===this.i.length-1){S=I+1;break e}}S=1e3}else S=1e3;S=Mu(this,G,S),I=Mt(this.J),We(I,"RID",h),We(I,"CVER",22),this.G&&We(I,"X-HTTP-Session-Id",this.G),Mr(this,I),j&&(this.R?S="headers="+Hi(Un(j))+"&"+S:this.u&&wr(I,this.u,j)),Fa(this.h,G),this.Ra&&We(I,"TYPE","init"),this.S?(We(I,"$req",S),We(I,"SID","null"),G.U=!0,yi(G,I,null)):yi(G,I,S),this.I=2}}else this.I==3&&(h?Wa(this,h):this.i.length==0||Ba(this.h)||Wa(this))};function Wa(h,S){var I;S?I=S.l:I=h.V++;const w=Mt(h.J);We(w,"SID",h.M),We(w,"RID",I),We(w,"AID",h.K),Mr(h,w),h.u&&h.o&&wr(w,h.u,h.o),I=new Qn(h,h.j,I,h.D+1),h.u===null&&(I.J=h.o),S&&(h.i=S.G.concat(h.i)),S=Mu(h,I,1e3),I.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Fa(h.h,I),yi(I,w,S)}function Mr(h,S){h.H&&fe(h.H,function(I,w){We(S,w,I)}),h.l&&fe({},function(I,w){We(S,w,I)})}function Mu(h,S,I){I=Math.min(h.i.length,I);const w=h.l?m(h.l.Ka,h.l,h):null;e:{var G=h.i;let De=-1;for(;;){const At=["count="+I];De==-1?I>0?(De=G[0].g,At.push("ofs="+De)):De=0:At.push("ofs="+De);let $e=!0;for(let ht=0;ht<I;ht++){var j=G[ht].g;const Ln=G[ht].map;if(j-=De,j<0)De=Math.max(0,G[ht].g-100),$e=!1;else try{j="req"+j+"_"||"";try{var ue=Ln instanceof Map?Ln:Object.entries(Ln);for(const[Ri,ti]of ue){let ni=ti;d(ti)&&(ni=Ss(ti)),At.push(j+Ri+"="+encodeURIComponent(ni))}}catch(Ri){throw At.push(j+"type="+encodeURIComponent("_badmap")),Ri}}catch{w&&w(Ln)}}if($e){ue=At.join("&");break e}}ue=void 0}return h=h.i.splice(0,I),S.G=h,ue}function Du(h){if(!h.g&&!h.v){h.Y=1;var S=h.Da;ne||M(),oe||(ne(),oe=!0),R.add(S,h),h.A=0}}function Dr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=pi(m(h.Da,h),ku(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,Pu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=pi(m(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),Ns(this),Pu(this))};function Za(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Pu(h){h.g=new Qn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var S=Mt(h.na);We(S,"RID","rpc"),We(S,"SID",h.M),We(S,"AID",h.K),We(S,"CI",h.F?"0":"1"),!h.F&&h.ia&&We(S,"TO",h.ia),We(S,"TYPE","xmlhttp"),Mr(h,S),h.u&&h.o&&wr(S,h.u,h.o),h.O&&(h.g.H=h.O);var I=h.g;h=h.ba,I.M=1,I.A=Ir(Mt(S)),I.u=null,I.R=!0,ho(I,h)}n.Va=function(){this.C!=null&&(this.C=null,Ns(this),Dr(this),wt(19))};function So(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Vu(h,S){var I=null;if(h.g==S){So(h),Za(h),h.g=null;var w=2}else if(Si(h.h,S))I=S.G,za(h.h,S),w=1;else return;if(h.I!=0){if(S.o)if(w==1){I=S.u?S.u.length:0,S=Date.now()-S.F;var G=h.D;w=fo(),qt(w,new mi(w,I)),xi(h)}else Du(h);else if(G=S.m,G==3||G==0&&S.X>0||!(w==1&&Eo(h,S)||w==2&&Dr(h)))switch(I&&I.length>0&&(S=h.h,S.i=S.i.concat(I)),G){case 1:wi(h,5);break;case 4:wi(h,10);break;case 3:wi(h,6);break;default:wi(h,2)}}}function ku(h,S){let I=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(I*=2),I*S}function wi(h,S){if(h.j.info("Error code "+S),S==2){var I=m(h.bb,h),w=h.Ua;const G=!w;w=new Cn(w||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Gt(w,"https"),Ir(w),G?Wn(w.toString(),I):ja(w.toString(),I)}else wt(2);h.I=0,h.l&&h.l.pa(S),Uu(h),To(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Uu(h){if(h.I=0,h.ja=[],h.l){const S=Ha(h.h);(S.length!=0||h.i.length!=0)&&(U(h.ja,S),U(h.ja,h.i),h.h.i.length=0,x(h.i),h.i.length=0),h.l.oa()}}function Lu(h,S,I){var w=I instanceof Cn?Mt(I):new Cn(I);if(w.g!="")S&&(w.g=S+"."+w.g),As(w,w.u);else{var G=c.location;w=G.protocol,S=S?S+"."+G.hostname:G.hostname,G=+G.port;const j=new Cn(null);w&&Gt(j,w),S&&(j.g=S),G&&As(j,G),I&&(j.h=I),w=j}return I=h.G,S=h.wa,I&&S&&We(w,I,S),We(w,"VER",h.ka),Mr(h,w),w}function Ou(h,S,I){if(S&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=h.Aa&&!h.ma?new tt(new Ci({ab:I})):new tt(h.ma),S.Fa(h.L),S}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function qu(){}n=qu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ms(){}Ms.prototype.g=function(h,S){return new cn(h,S)};function cn(h,S){xt.call(this),this.g=new Rs(S),this.l=h,this.h=S&&S.messageUrlParams||null,h=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(h?h["X-WebChannel-Content-Type"]=S.messageContentType:h={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(h?h["X-WebChannel-Client-Profile"]=S.sa:h={"X-WebChannel-Client-Profile":S.sa}),this.g.U=h,(h=S&&S.Qb)&&!D(h)&&(this.g.u=h),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!D(S)&&(this.g.G=S,h=this.h,h!==null&&S in h&&(h=this.h,S in h&&delete h[S])),this.j=new Ji(this)}E(cn,xt),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){Xa(this.g)},cn.prototype.o=function(h){var S=this.g;if(typeof h=="string"){var I={};I.__data__=h,h=I}else this.v&&(I={},I.__data__=Ss(h),h=I);S.i.push(new Nt(S.Ya++,h)),S.I==3&&xi(S)},cn.prototype.N=function(){this.g.l=null,delete this.j,Xa(this.g),delete this.g,cn.Z.N.call(this)};function Bu(h){$t.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var S=h.__sm__;if(S){e:{for(const I in S){h=I;break e}h=void 0}(this.i=h)&&(h=this.i,S=S!==null&&h in S?S[h]:void 0),this.data=S}else this.data=h}E(Bu,$t);function Fu(){Pn.call(this),this.status=1}E(Fu,Pn);function Ji(h){this.g=h}E(Ji,qu),Ji.prototype.ra=function(){qt(this.g,"a")},Ji.prototype.qa=function(h){qt(this.g,new Bu(h))},Ji.prototype.pa=function(h){qt(this.g,new Fu)},Ji.prototype.oa=function(){qt(this.g,"b")},Ms.prototype.createWebChannel=Ms.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,TS=function(){return new Ms},vS=function(){return fo()},_S=St,Ym={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ar.NO_ERROR=0,Ar.TIMEOUT=8,Ar.HTTP_ERROR=6,nd=Ar,La.COMPLETE="complete",yS=La,vu.EventType=jn,jn.OPEN="a",jn.CLOSE="b",jn.ERROR="c",jn.MESSAGE="d",xt.prototype.listen=xt.prototype.J,Bl=vu,tt.prototype.listenOnce=tt.prototype.K,tt.prototype.getLastError=tt.prototype.Ha,tt.prototype.getLastErrorCode=tt.prototype.ya,tt.prototype.getStatus=tt.prototype.ca,tt.prototype.getResponseJson=tt.prototype.La,tt.prototype.getResponseText=tt.prototype.la,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Fa,gS=tt}).apply(typeof Jc<"u"?Jc:typeof self<"u"?self:typeof window<"u"?window:{});const hE="@firebase/firestore",mE="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xa="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=new yp("@firebase/firestore");function Zo(){return no.logLevel}function pe(n,...e){if(no.logLevel<=Be.DEBUG){const t=e.map(Tp);no.debug(`Firestore (${xa}): ${n}`,...t)}}function ms(n,...e){if(no.logLevel<=Be.ERROR){const t=e.map(Tp);no.error(`Firestore (${xa}): ${n}`,...t)}}function io(n,...e){if(no.logLevel<=Be.WARN){const t=e.map(Tp);no.warn(`Firestore (${xa}): ${n}`,...t)}}function Tp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,ES(n,s,t)}function ES(n,e,t){let s=`FIRESTORE (${xa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw ms(s),new Error(s)}function Xe(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||ES(e,o,s)}function Ne(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Ts{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class AS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(rn.UNAUTHENTICATED)))}shutdown(){}}class $D{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class QD{constructor(e){this.t=e,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Xe(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new ds;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ds,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ds)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Xe(typeof s.accessToken=="string",31837,{l:s}),new SS(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new rn(e)}}class XD{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class WD{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new XD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(rn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class pE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ki(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Xe(this.o===void 0,3512);const s=l=>{l.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,pe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new pE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Xe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new pE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=e2(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Fe(n,e){return n<e?-1:n>e?1:0}function Jm(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const o=n.charAt(s),l=e.charAt(s);if(o!==l)return vm(o)===vm(l)?Fe(o,l):vm(o)?1:-1}return Fe(n.length,e.length)}const t2=55296,n2=57343;function vm(n){const e=n.charCodeAt(0);return e>=t2&&e<=n2}function pa(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="__name__";class Vi{constructor(e,t,s){t===void 0?t=0:t>e.length&&be(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&be(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Vi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=Vi.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Fe(e.length,t.length)}static compareSegments(e,t){const s=Vi.isNumericId(e),o=Vi.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Vi.extractNumericId(e).compare(Vi.extractNumericId(t)):Jm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return cr.fromString(e.substring(4,e.length-2))}}class dt extends Vi{construct(e,t,s){return new dt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ve(le.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new dt(t)}static emptyPath(){return new dt([])}}const i2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kt extends Vi{construct(e,t,s){return new Kt(e,t,s)}static isValidIdentifier(e){return i2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gE}static keyField(){return new Kt([gE])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new ve(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ve(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ve(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(s+=d,o++):(l(),o++)}if(l(),c)throw new ve(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kt(t)}static emptyPath(){return new Kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(dt.fromString(e))}static fromName(e){return new Ae(dt.fromString(e).popFirst(5))}static empty(){return new Ae(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new dt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(n,e,t){if(!t)throw new ve(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function IS(n,e,t,s){if(e===!0&&s===!0)throw new ve(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function yE(n){if(!Ae.isDocumentKey(n))throw new ve(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function _E(n){if(Ae.isDocumentKey(n))throw new ve(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function bS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Ep(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":be(12329,{type:typeof n})}function ps(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ve(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ep(n);throw new ve(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(n,e){const t={typeString:n};return e&&(t.value=e),t}function au(n,e){if(!bS(n))throw new ve(le.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(o&&typeof c!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ve(le.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE=-62135596800,TE=1e6;class at{static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*TE);return new at(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<vE)throw new ve(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/TE}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:at._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(au(e,at._jsonSchema))return new at(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-vE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}at._jsonSchemaVersion="firestore/timestamp/1.0",at._jsonSchema={type:Lt("string",at._jsonSchemaVersion),seconds:Lt("number"),nanoseconds:Lt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new at(0,0))}static max(){return new we(new at(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl=-1;function s2(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=we.fromTimestamp(s===1e9?new at(t+1,0):new at(t,s));return new fr(o,Ae.empty(),e)}function r2(n){return new fr(n.readTime,n.key,Wl)}class fr{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new fr(we.min(),Ae.empty(),Wl)}static max(){return new fr(we.max(),Ae.empty(),Wl)}}function o2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ae.comparator(n.documentKey,e.documentKey),t!==0?t:Fe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class l2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wa(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==a2)throw n;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):re.reject(t)}static resolve(e){return new re(((t,s)=>{t(e)}))}static reject(e){return new re(((t,s)=>{s(e)}))}static waitFor(e){return new re(((t,s)=>{let o=0,l=0,c=!1;e.forEach((d=>{++o,d.next((()=>{++l,c&&l===o&&t()}),(p=>s(p)))})),c=!0,l===o&&t()}))}static or(e){let t=re.resolve(!1);for(const s of e)t=t.next((o=>o?re.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new re(((s,o)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const m=p;t(e[m]).next((v=>{c[m]=v,++d,d===l&&s(c)}),(v=>o(v)))}}))}static doWhile(e,t){return new re(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function u2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ra(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Gd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp=-1;function Yd(n){return n==null}function _d(n){return n===0&&1/n==-1/0}function c2(n){return typeof n=="number"&&Number.isInteger(n)&&!_d(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="";function d2(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=EE(e)),e=f2(n.get(t),e);return EE(e)}function f2(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case xS:t+="";break;default:t+=l}}return t}function EE(n){return n+xS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ao(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function wS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,t){this.comparator=e,this.root=t||tn.EMPTY}insert(e,t){return new gt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kc(this.root,e,this.comparator,!0)}}class Kc{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??tn.RED,this.left=o??tn.EMPTY,this.right=l??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new tn(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return tn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw be(27949);return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw be(57766)}get value(){throw be(16141)}get color(){throw be(16727)}get left(){throw be(29726)}get right(){throw be(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new tn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new AE(this.data.getIterator())}getIteratorFrom(e){return new AE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new zt(this.comparator);return t.data=e,t}}class AE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new oi([])}unionWith(e){let t=new zt(Kt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new oi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return pa(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new RS("Invalid base64 string: "+l):l}})(e);return new jt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new jt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const h2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hr(n){if(Xe(!!n,39018),typeof n=="string"){let e=0;const t=h2.exec(n);if(Xe(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:bt(n.seconds),nanos:bt(n.nanos)}}function bt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function mr(n){return typeof n=="string"?jt.fromBase64String(n):jt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS="server_timestamp",MS="__type__",DS="__previous_value__",PS="__local_write_time__";function Ap(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[MS])==null?void 0:s.stringValue)===NS}function Jd(n){const e=n.mapValue.fields[DS];return Ap(e)?Jd(e):e}function Zl(n){const e=hr(n.mapValue.fields[PS].timestampValue);return new at(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,t,s,o,l,c,d,p,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=v}}const vd="(default)";class ga{constructor(e,t){this.projectId=e,this.database=t||vd}static empty(){return new ga("","")}get isDefaultDatabase(){return this.database===vd}isEqual(e){return e instanceof ga&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS="__type__",p2="__max__",jc={mapValue:{}},kS="__vector__",Td="value";function pr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ap(n)?4:y2(n)?9007199254740991:g2(n)?10:11:be(28295,{value:n})}function Fi(n,e){if(n===e)return!0;const t=pr(n);if(t!==pr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Zl(n).isEqual(Zl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=hr(o.timestampValue),d=hr(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return mr(o.bytesValue).isEqual(mr(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return bt(o.geoPointValue.latitude)===bt(l.geoPointValue.latitude)&&bt(o.geoPointValue.longitude)===bt(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return bt(o.integerValue)===bt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=bt(o.doubleValue),d=bt(l.doubleValue);return c===d?_d(c)===_d(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return pa(n.arrayValue.values||[],e.arrayValue.values||[],Fi);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},d=l.mapValue.fields||{};if(SE(c)!==SE(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Fi(c[p],d[p])))return!1;return!0})(n,e);default:return be(52216,{left:n})}}function eu(n,e){return(n.values||[]).find((t=>Fi(t,e)))!==void 0}function ya(n,e){if(n===e)return 0;const t=pr(n),s=pr(e);if(t!==s)return Fe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Fe(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=bt(l.integerValue||l.doubleValue),p=bt(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return CE(n.timestampValue,e.timestampValue);case 4:return CE(Zl(n),Zl(e));case 5:return Jm(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=mr(l),p=mr(c);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let m=0;m<d.length&&m<p.length;m++){const v=Fe(d[m],p[m]);if(v!==0)return v}return Fe(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Fe(bt(l.latitude),bt(c.latitude));return d!==0?d:Fe(bt(l.longitude),bt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return IE(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var A,x,U,B;const d=l.fields||{},p=c.fields||{},m=(A=d[Td])==null?void 0:A.arrayValue,v=(x=p[Td])==null?void 0:x.arrayValue,E=Fe(((U=m==null?void 0:m.values)==null?void 0:U.length)||0,((B=v==null?void 0:v.values)==null?void 0:B.length)||0);return E!==0?E:IE(m,v)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===jc.mapValue&&c===jc.mapValue)return 0;if(l===jc.mapValue)return 1;if(c===jc.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),m=c.fields||{},v=Object.keys(m);p.sort(),v.sort();for(let E=0;E<p.length&&E<v.length;++E){const A=Jm(p[E],v[E]);if(A!==0)return A;const x=ya(d[p[E]],m[v[E]]);if(x!==0)return x}return Fe(p.length,v.length)})(n.mapValue,e.mapValue);default:throw be(23264,{he:t})}}function CE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Fe(n,e);const t=hr(n),s=hr(e),o=Fe(t.seconds,s.seconds);return o!==0?o:Fe(t.nanos,s.nanos)}function IE(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=ya(t[o],s[o]);if(l)return l}return Fe(t.length,s.length)}function _a(n){return Km(n)}function Km(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=hr(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return mr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ae.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=Km(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of s)l?l=!1:o+=",",o+=`${c}:${Km(t.fields[c])}`;return o+"}"})(n.mapValue):be(61005,{value:n})}function id(n){switch(pr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jd(n);return e?16+id(e):16;case 5:return 2*n.stringValue.length;case 6:return mr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+id(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let o=0;return ao(s.fields,((l,c)=>{o+=l.length+id(c)})),o})(n.mapValue);default:throw be(13486,{value:n})}}function jm(n){return!!n&&"integerValue"in n}function Cp(n){return!!n&&"arrayValue"in n}function bE(n){return!!n&&"nullValue"in n}function xE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function sd(n){return!!n&&"mapValue"in n}function g2(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[VS])==null?void 0:s.stringValue)===kS}function Yl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ao(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Yl(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Yl(n.arrayValue.values[t]);return e}return{...n}}function y2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===p2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.value=e}static empty(){return new Jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!sd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yl(t)}setAll(e){let t=Kt.emptyPath(),s={},o=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,s,o),s={},o=[],t=d.popLast()}c?s[d.lastSegment()]=Yl(c):o.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());sd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];sd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){ao(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new Jn(Yl(this.value))}}function US(n){const e=[];return ao(n.fields,((t,s)=>{const o=new Kt([t]);if(sd(s)){const l=US(s.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new oi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,t,s,o,l,c,d){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new on(e,0,we.min(),we.min(),we.min(),Jn.empty(),0)}static newFoundDocument(e,t,s,o){return new on(e,1,t,we.min(),s,o,0)}static newNoDocument(e,t){return new on(e,2,t,we.min(),we.min(),Jn.empty(),0)}static newUnknownDocument(e,t){return new on(e,3,t,we.min(),we.min(),Jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,t){this.position=e,this.inclusive=t}}function wE(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?s=Ae.comparator(Ae.fromName(c.referenceValue),t.key):s=ya(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function RE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Fi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,t="asc"){this.field=e,this.dir=t}}function _2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{}class Ft extends LS{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new T2(e,t,s):t==="array-contains"?new A2(e,s):t==="in"?new C2(e,s):t==="not-in"?new I2(e,s):t==="array-contains-any"?new b2(e,s):new Ft(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new E2(e,s):new S2(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ya(t,this.value)):t!==null&&pr(this.value)===pr(t)&&this.matchesComparison(ya(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zi extends LS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new zi(e,t)}matches(e){return OS(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function OS(n){return n.op==="and"}function qS(n){return v2(n)&&OS(n)}function v2(n){for(const e of n.filters)if(e instanceof zi)return!1;return!0}function $m(n){if(n instanceof Ft)return n.field.canonicalString()+n.op.toString()+_a(n.value);if(qS(n))return n.filters.map((e=>$m(e))).join(",");{const e=n.filters.map((t=>$m(t))).join(",");return`${n.op}(${e})`}}function BS(n,e){return n instanceof Ft?(function(s,o){return o instanceof Ft&&s.op===o.op&&s.field.isEqual(o.field)&&Fi(s.value,o.value)})(n,e):n instanceof zi?(function(s,o){return o instanceof zi&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,c,d)=>l&&BS(c,o.filters[d])),!0):!1})(n,e):void be(19439)}function FS(n){return n instanceof Ft?(function(t){return`${t.field.canonicalString()} ${t.op} ${_a(t.value)}`})(n):n instanceof zi?(function(t){return t.op.toString()+" {"+t.getFilters().map(FS).join(" ,")+"}"})(n):"Filter"}class T2 extends Ft{constructor(e,t,s){super(e,t,s),this.key=Ae.fromName(s.referenceValue)}matches(e){const t=Ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class E2 extends Ft{constructor(e,t){super(e,"in",t),this.keys=zS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class S2 extends Ft{constructor(e,t){super(e,"not-in",t),this.keys=zS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function zS(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Ae.fromName(s.referenceValue)))}class A2 extends Ft{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cp(t)&&eu(t.arrayValue,this.value)}}class C2 extends Ft{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&eu(this.value.arrayValue,t)}}class I2 extends Ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!eu(this.value.arrayValue,t)}}class b2 extends Ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>eu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,t=null,s=[],o=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function NE(n,e=null,t=[],s=[],o=null,l=null,c=null){return new x2(n,e,t,s,o,l,c)}function Ip(n){const e=Ne(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>$m(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Yd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>_a(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>_a(s))).join(",")),e.Te=t}return e.Te}function bp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!_2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!BS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!RE(n.startAt,e.startAt)&&RE(n.endAt,e.endAt)}function Qm(n){return Ae.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,t=null,s=[],o=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function w2(n,e,t,s,o,l,c,d){return new Kd(n,e,t,s,o,l,c,d)}function xp(n){return new Kd(n)}function ME(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function R2(n){return n.collectionGroup!==null}function Jl(n){const e=Ne(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new zt(Kt.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Sd(l,s))})),t.has(Kt.keyField().canonicalString())||e.Ie.push(new Sd(Kt.keyField(),s))}return e.Ie}function Ui(n){const e=Ne(n);return e.Ee||(e.Ee=N2(e,Jl(n))),e.Ee}function N2(n,e){if(n.limitType==="F")return NE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Sd(o.field,l)}));const t=n.endAt?new Ed(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Ed(n.startAt.position,n.startAt.inclusive):null;return NE(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Xm(n,e,t){return new Kd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jd(n,e){return bp(Ui(n),Ui(e))&&n.limitType===e.limitType}function HS(n){return`${Ip(Ui(n))}|lt:${n.limitType}`}function ea(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>FS(o))).join(", ")}]`),Yd(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>_a(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>_a(o))).join(",")),`Target(${s})`})(Ui(n))}; limitType=${n.limitType})`}function $d(n,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ae.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,o){for(const l of Jl(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(s,o){return!(s.startAt&&!(function(c,d,p){const m=wE(c,d,p);return c.inclusive?m<=0:m<0})(s.startAt,Jl(s),o)||s.endAt&&!(function(c,d,p){const m=wE(c,d,p);return c.inclusive?m>=0:m>0})(s.endAt,Jl(s),o))})(n,e)}function M2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function GS(n){return(e,t)=>{let s=!1;for(const o of Jl(n)){const l=D2(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function D2(n,e,t){const s=n.field.isKeyField()?Ae.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),m=d.data.field(l);return p!==null&&m!==null?ya(p,m):be(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return be(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ao(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return wS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2=new gt(Ae.comparator);function gs(){return P2}const YS=new gt(Ae.comparator);function Fl(...n){let e=YS;for(const t of n)e=e.insert(t.key,t);return e}function JS(n){let e=YS;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Qr(){return Kl()}function KS(){return Kl()}function Kl(){return new lo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const V2=new gt(Ae.comparator),k2=new zt(Ae.comparator);function ze(...n){let e=k2;for(const t of n)e=e.add(t);return e}const U2=new zt(Fe);function L2(){return U2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_d(e)?"-0":e}}function jS(n){return{integerValue:""+n}}function O2(n,e){return c2(e)?jS(e):wp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(){this._=void 0}}function q2(n,e,t){return n instanceof Ad?(function(o,l){const c={fields:{[MS]:{stringValue:NS},[PS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Ap(l)&&(l=Jd(l)),l&&(c.fields[DS]=l),{mapValue:c}})(t,e):n instanceof tu?QS(n,e):n instanceof nu?XS(n,e):(function(o,l){const c=$S(o,l),d=DE(c)+DE(o.Ae);return jm(c)&&jm(o.Ae)?jS(d):wp(o.serializer,d)})(n,e)}function B2(n,e,t){return n instanceof tu?QS(n,e):n instanceof nu?XS(n,e):t}function $S(n,e){return n instanceof Cd?(function(s){return jm(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Ad extends Qd{}class tu extends Qd{constructor(e){super(),this.elements=e}}function QS(n,e){const t=WS(e);for(const s of n.elements)t.some((o=>Fi(o,s)))||t.push(s);return{arrayValue:{values:t}}}class nu extends Qd{constructor(e){super(),this.elements=e}}function XS(n,e){let t=WS(e);for(const s of n.elements)t=t.filter((o=>!Fi(o,s)));return{arrayValue:{values:t}}}class Cd extends Qd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function DE(n){return bt(n.integerValue||n.doubleValue)}function WS(n){return Cp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function F2(n,e){return n.field.isEqual(e.field)&&(function(s,o){return s instanceof tu&&o instanceof tu||s instanceof nu&&o instanceof nu?pa(s.elements,o.elements,Fi):s instanceof Cd&&o instanceof Cd?Fi(s.Ae,o.Ae):s instanceof Ad&&o instanceof Ad})(n.transform,e.transform)}class z2{constructor(e,t){this.version=e,this.transformResults=t}}class Li{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Li}static exists(e){return new Li(void 0,e)}static updateTime(e){return new Li(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Xd{}function ZS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Rp(n.key,Li.none()):new lu(n.key,n.data,Li.none());{const t=n.data,s=Jn.empty();let o=new zt(Kt.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),o=o.add(l)}return new uo(n.key,s,new oi(o.toArray()),Li.none())}}function H2(n,e,t){n instanceof lu?(function(o,l,c){const d=o.value.clone(),p=VE(o.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof uo?(function(o,l,c){if(!rd(o.precondition,l))return void l.convertToUnknownDocument(c.version);const d=VE(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(eA(o)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function jl(n,e,t,s){return n instanceof lu?(function(l,c,d,p){if(!rd(l.precondition,c))return d;const m=l.value.clone(),v=kE(l.fieldTransforms,p,c);return m.setAll(v),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,e,t,s):n instanceof uo?(function(l,c,d,p){if(!rd(l.precondition,c))return d;const m=kE(l.fieldTransforms,p,c),v=c.data;return v.setAll(eA(l)),v.setAll(m),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,s):(function(l,c,d){return rd(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function G2(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),l=$S(s.transform,o||null);l!=null&&(t===null&&(t=Jn.empty()),t.set(s.field,l))}return t||null}function PE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&pa(s,o,((l,c)=>F2(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class lu extends Xd{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class uo extends Xd{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function eA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function VE(n,e,t){const s=new Map;Xe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,d=e.data.field(l.field);s.set(l.field,B2(c,d,t[o]))}return s}function kE(n,e,t){const s=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);s.set(o.field,q2(l,c,e))}return s}class Rp extends Xd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Y2 extends Xd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&H2(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=jl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=jl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=KS();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(o.key)?null:d;const p=ZS(c,d);p!==null&&s.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(we.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ze())}isEqual(e){return this.batchId===e.batchId&&pa(this.mutations,e.mutations,((t,s)=>PE(t,s)))&&pa(this.baseMutations,e.baseMutations,((t,s)=>PE(t,s)))}}class Np{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Xe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return V2})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,s[c].version);return new Np(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ut,Ge;function $2(n){switch(n){case le.OK:return be(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return be(15467,{code:n})}}function tA(n){if(n===void 0)return ms("GRPC error has no .code"),le.UNKNOWN;switch(n){case Ut.OK:return le.OK;case Ut.CANCELLED:return le.CANCELLED;case Ut.UNKNOWN:return le.UNKNOWN;case Ut.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Ut.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Ut.INTERNAL:return le.INTERNAL;case Ut.UNAVAILABLE:return le.UNAVAILABLE;case Ut.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Ut.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Ut.NOT_FOUND:return le.NOT_FOUND;case Ut.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Ut.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Ut.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Ut.ABORTED:return le.ABORTED;case Ut.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Ut.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Ut.DATA_LOSS:return le.DATA_LOSS;default:return be(39323,{code:n})}}(Ge=Ut||(Ut={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=new cr([4294967295,4294967295],0);function UE(n){const e=Q2().encode(n),t=new pS;return t.update(e),new Uint8Array(t.digest())}function LE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new cr([t,s],0),new cr([o,l],0)]}class Mp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new zl(`Invalid padding: ${t}`);if(s<0)throw new zl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new zl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new zl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=cr.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(cr.fromNumber(s)));return o.compare(X2)===1&&(o=new cr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=UE(e),[s,o]=LE(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Mp(l,o,t);return s.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=UE(e),[s,o]=LE(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,uu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Wd(we.min(),o,new gt(Fe),gs(),ze())}}class uu{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new uu(s,t,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class nA{constructor(e,t){this.targetId=e,this.Ce=t}}class iA{constructor(e,t,s=jt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class OE{constructor(){this.ve=0,this.Fe=qE(),this.Me=jt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),t=ze(),s=ze();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:be(38017,{changeType:l})}})),new uu(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=qE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Xe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class W2{constructor(e){this.Ge=e,this.ze=new Map,this.je=gs(),this.Je=$c(),this.He=$c(),this.Ye=new gt(Fe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:be(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(Qm(l))if(s===0){const c=new Ae(l.path);this.et(t,c,on.newNoDocument(c,we.min()))}else Xe(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let c,d;try{c=mr(s).toUint8Array()}catch(p){if(p instanceof RS)return io("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Mp(c,o,l)}catch(p){return io(p instanceof zl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Qm(d.target)){const p=new Ae(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,on.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let s=ze();this.He.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const m=this.ot(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const o=new Wd(e,t,this.Ye,this.je,s);return this.je=gs(),this.Je=$c(),this.He=$c(),this.Ye=new gt(Fe),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new OE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new zt(Fe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new zt(Fe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new OE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function $c(){return new gt(Ae.comparator)}function qE(){return new gt(Ae.comparator)}const Z2={asc:"ASCENDING",desc:"DESCENDING"},eP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tP={and:"AND",or:"OR"};class nP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Wm(n,e){return n.useProto3Json||Yd(e)?e:{value:e}}function Id(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function iP(n,e){return Id(n,e.toTimestamp())}function Oi(n){return Xe(!!n,49232),we.fromTimestamp((function(t){const s=hr(t);return new at(s.seconds,s.nanos)})(n))}function Dp(n,e){return Zm(n,e).canonicalString()}function Zm(n,e){const t=(function(o){return new dt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function rA(n){const e=dt.fromString(n);return Xe(cA(e),10190,{key:e.toString()}),e}function ep(n,e){return Dp(n.databaseId,e.path)}function Tm(n,e){const t=rA(e);if(t.get(1)!==n.databaseId.projectId)throw new ve(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ve(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ae(aA(t))}function oA(n,e){return Dp(n.databaseId,e)}function sP(n){const e=rA(n);return e.length===4?dt.emptyPath():aA(e)}function tp(n){return new dt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function aA(n){return Xe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function BE(n,e,t){return{name:ep(n,e),fields:t.value.mapValue.fields}}function rP(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:be(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(m,v){return m.useProto3Json?(Xe(v===void 0||typeof v=="string",58123),jt.fromBase64String(v||"")):(Xe(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),jt.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(m){const v=m.code===void 0?le.UNKNOWN:tA(m.code);return new ve(v,m.message||"")})(c);t=new iA(s,o,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Tm(n,s.document.name),l=Oi(s.document.updateTime),c=s.document.createTime?Oi(s.document.createTime):we.min(),d=new Jn({mapValue:{fields:s.document.fields}}),p=on.newFoundDocument(o,l,c,d),m=s.targetIds||[],v=s.removedTargetIds||[];t=new od(m,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Tm(n,s.document),l=s.readTime?Oi(s.readTime):we.min(),c=on.newNoDocument(o,l),d=s.removedTargetIds||[];t=new od([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Tm(n,s.document),l=s.removedTargetIds||[];t=new od([],l,o,null)}else{if(!("filter"in e))return be(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,c=new j2(o,l),d=s.targetId;t=new nA(d,c)}}return t}function oP(n,e){let t;if(e instanceof lu)t={update:BE(n,e.key,e.value)};else if(e instanceof Rp)t={delete:ep(n,e.key)};else if(e instanceof uo)t={update:BE(n,e.key,e.data),updateMask:pP(e.fieldMask)};else{if(!(e instanceof Y2))return be(16599,{Vt:e.type});t={verify:ep(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const d=c.transform;if(d instanceof Ad)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof tu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof nu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Cd)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw be(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:iP(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:be(27497)})(n,e.precondition)),t}function aP(n,e){return n&&n.length>0?(Xe(e!==void 0,14353),n.map((t=>(function(o,l){let c=o.updateTime?Oi(o.updateTime):Oi(l);return c.isEqual(we.min())&&(c=Oi(l)),new z2(c,o.transformResults||[])})(t,e)))):[]}function lP(n,e){return{documents:[oA(n,e.path)]}}function uP(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=oA(n,o);const l=(function(m){if(m.length!==0)return uA(zi.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(m){if(m.length!==0)return m.map((v=>(function(A){return{field:ta(A.field),direction:fP(A.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Wm(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:o}}function cP(n){let e=sP(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Xe(s===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const A=lA(E);return A instanceof zi&&qS(A)?A.getFilters():[A]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((A=>(function(U){return new Sd(na(U.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(A)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let A;return A=typeof E=="object"?E.value:E,Yd(A)?null:A})(t.limit));let p=null;t.startAt&&(p=(function(E){const A=!!E.before,x=E.values||[];return new Ed(x,A)})(t.startAt));let m=null;return t.endAt&&(m=(function(E){const A=!E.before,x=E.values||[];return new Ed(x,A)})(t.endAt)),w2(e,o,c,l,d,"F",p,m)}function dP(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function lA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=na(t.unaryFilter.field);return Ft.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=na(t.unaryFilter.field);return Ft.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=na(t.unaryFilter.field);return Ft.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=na(t.unaryFilter.field);return Ft.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return be(61313);default:return be(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ft.create(na(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return be(58110);default:return be(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return zi.create(t.compositeFilter.filters.map((s=>lA(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return be(1026)}})(t.compositeFilter.op))})(n):be(30097,{filter:n})}function fP(n){return Z2[n]}function hP(n){return eP[n]}function mP(n){return tP[n]}function ta(n){return{fieldPath:n.canonicalString()}}function na(n){return Kt.fromServerFormat(n.fieldPath)}function uA(n){return n instanceof Ft?(function(t){if(t.op==="=="){if(xE(t.value))return{unaryFilter:{field:ta(t.field),op:"IS_NAN"}};if(bE(t.value))return{unaryFilter:{field:ta(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(xE(t.value))return{unaryFilter:{field:ta(t.field),op:"IS_NOT_NAN"}};if(bE(t.value))return{unaryFilter:{field:ta(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ta(t.field),op:hP(t.op),value:t.value}}})(n):n instanceof zi?(function(t){const s=t.getFilters().map((o=>uA(o)));return s.length===1?s[0]:{compositeFilter:{op:mP(t.op),filters:s}}})(n):be(54877,{filter:n})}function pP(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function cA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,t,s,o,l=we.min(),c=we.min(),d=jt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new or(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new or(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.yt=e}}function yP(n){const e=cP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Xm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(){this.Cn=new vP}addToCollectionParentIndex(e,t){return this.Cn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(fr.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(fr.min())}updateCollectionGroup(e,t,s){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class vP{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new zt(dt.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new zt(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dA=41943040;class En{static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(dA,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new va(0)}static cr(){return new va(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE="LruGarbageCollector",TP=1048576;function HE([n,e],[t,s]){const o=Fe(n,t);return o===0?Fe(e,s):o}class EP{constructor(e){this.Ir=e,this.buffer=new zt(HE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();HE(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class SP{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){pe(zE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ra(t)?pe(zE,"Ignoring IndexedDB error during garbage collection: ",t):await wa(t)}await this.Vr(3e5)}))}}class AP{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return re.resolve(Gd.ce);const s=new EP(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(FE)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),FE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,c,d,p,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,d=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(m=Date.now(),Zo()<=Be.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${o} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(m-p)+`ms
Total Duration: ${m-v}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function CP(n,e){return new AP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(){this.changes=new lo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?re.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&jl(s.mutation,o,oi.empty(),at.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,ze()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=ze()){const o=Qr();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let c=Fl();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=Qr();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,ze())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,s,o){let l=gs();const c=Kl(),d=(function(){return Kl()})();return t.forEach(((p,m)=>{const v=s.get(m.key);o.has(m.key)&&(v===void 0||v.mutation instanceof uo)?l=l.insert(m.key,m):v!==void 0?(c.set(m.key,v.mutation.getFieldMask()),jl(v.mutation,m,v.mutation.getFieldMask(),at.now())):c.set(m.key,oi.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((m,v)=>c.set(m,v))),t.forEach(((m,v)=>d.set(m,new bP(v,c.get(m)??null)))),d)))}recalculateAndSaveOverlays(e,t){const s=Kl();let o=new gt(((c,d)=>c-d)),l=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const m=t.get(p);if(m===null)return;let v=s.get(p)||oi.empty();v=d.applyToLocalView(m,v),s.set(p,v);const E=(o.get(d.batchId)||ze()).add(p);o=o.insert(d.batchId,E)}))})).next((()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),m=p.key,v=p.value,E=KS();v.forEach((A=>{if(!l.has(A)){const x=ZS(t.get(A),s.get(A));x!==null&&E.set(A,x),l=l.add(A)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,E))}return re.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(c){return Ae.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):R2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):re.resolve(Qr());let d=Wl,p=l;return c.next((m=>re.forEach(m,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(v)?re.resolve():this.remoteDocumentCache.getEntry(e,v).next((A=>{p=p.insert(v,A)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,p,m,ze()))).next((v=>({batchId:d,changes:JS(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ae(t)).next((s=>{let o=Fl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let c=Fl();return this.indexManager.getCollectionParents(e,l).next((d=>re.forEach(d,(p=>{const m=(function(E,A){return new Kd(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,s,o).next((v=>{v.forEach(((E,A)=>{c=c.insert(E,A)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((c=>{l.forEach(((p,m)=>{const v=m.getKey();c.get(v)===null&&(c=c.insert(v,on.newInvalidDocument(v)))}));let d=Fl();return c.forEach(((p,m)=>{const v=l.get(p);v!==void 0&&jl(v.mutation,m,oi.empty(),at.now()),$d(t,m)&&(d=d.insert(p,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return re.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Oi(o.createTime)}})(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:yP(o.bundledQuery),readTime:Oi(o.readTime)}})(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(){this.overlays=new gt(Ae.comparator),this.qr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Qr();return re.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),re.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),re.resolve()}getOverlaysForCollection(e,t,s){const o=Qr(),l=t.length+1,c=new Ae(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&p.largestBatchId>s&&o.set(p.getKey(),p)}return re.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new gt(((m,v)=>m-v));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>s){let v=l.get(m.largestBatchId);v===null&&(v=Qr(),l=l.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=Qr(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((m,v)=>d.set(m,v))),!(d.size()>=o)););return re.resolve(d)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new K2(t,s));let l=this.qr.get(t);l===void 0&&(l=ze(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(){this.Qr=new zt(Jt.$r),this.Ur=new zt(Jt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Jt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Jt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Ae(new dt([])),s=new Jt(t,e),o=new Jt(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ae(new dt([])),s=new Jt(t,e),o=new Jt(t,e+1);let l=ze();return this.Ur.forEachInRange([s,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Jt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Jt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ae.comparator(e.key,t.key)||Fe(e.Yr,t.Yr)}static Kr(e,t){return Fe(e.Yr,t.Yr)||Ae.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new zt(Jt.$r)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new J2(l,t,s,o);this.mutationQueue.push(c);for(const d of o)this.Zr=this.Zr.add(new Jt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return re.resolve(c)}lookupMutationBatch(e,t){return re.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return re.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?Sp:this.tr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Jt(t,0),o=new Jt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(c=>{const d=this.Xr(c.Yr);l.push(d)})),re.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new zt(Fe);return t.forEach((o=>{const l=new Jt(o,0),c=new Jt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(d=>{s=s.add(d.Yr)}))})),re.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;Ae.isDocumentKey(l)||(l=l.child(""));const c=new Jt(new Ae(l),0);let d=new zt(Fe);return this.Zr.forEachWhile((p=>{const m=p.key.path;return!!s.isPrefixOf(m)&&(m.length===o&&(d=d.add(p.Yr)),!0)}),c),re.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Xe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return re.forEach(t.mutations,(o=>{const l=new Jt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Jt(t,0),o=this.Zr.firstAfterOrEqual(s);return re.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e){this.ri=e,this.docs=(function(){return new gt(Ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return re.resolve(s?s.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let s=gs();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():on.newInvalidDocument(o))})),re.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=gs();const c=t.path,d=new Ae(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:m,value:{document:v}}=p.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||o2(r2(v),s)<=0||(o.has(v.key)||$d(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return re.resolve(l)}getAllFromCollectionGroup(e,t,s,o){be(9500)}ii(e,t){return re.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new PP(this)}getSize(e){return re.resolve(this.size)}}class PP extends IP{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),re.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e){this.persistence=e,this.si=new lo((t=>Ip(t)),bp),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.oi=0,this._i=new Pp,this.targetCount=0,this.ai=va.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),re.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new va(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Pr(t),re.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),re.waitFor(l).next((()=>o))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return re.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),re.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),re.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return re.resolve(s)}containsKey(e,t){return re.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,t){this.ui={},this.overlays={},this.ci=new Gd(0),this.li=!1,this.li=!0,this.hi=new NP,this.referenceDelegate=e(this),this.Pi=new VP(this),this.indexManager=new _P,this.remoteDocumentCache=(function(o){return new DP(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new gP(t),this.Ii=new wP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new RP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new MP(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){pe("MemoryPersistence","Starting transaction:",e);const o=new kP(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return re.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class kP extends l2{constructor(e){super(),this.currentSequenceNumber=e}}class Vp{constructor(e){this.persistence=e,this.Ri=new Pp,this.Vi=null}static mi(e){return new Vp(e)}get fi(){if(this.Vi)return this.Vi;throw be(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),re.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),re.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.fi,(s=>{const o=Ae.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,we.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return re.or([()=>re.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class bd{constructor(e,t){this.persistence=e,this.pi=new lo((s=>d2(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=CP(this,t)}static mi(e,t){return new bd(e,t)}Ei(){}di(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return re.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?re.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((d=>{d||(s++,l.removeEntry(c,we.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),re.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=id(e.data.value)),t}br(e,t,s){return re.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return re.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=ze(),o=ze();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new kp(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return RM()?8:u2(ln())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new UP;return this.Ss(e,t,c).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(Zo()<=Be.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",ea(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),re.resolve()):(Zo()<=Be.DEBUG&&pe("QueryEngine","Query:",ea(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Zo()<=Be.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",ea(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ui(t))):re.resolve())}ys(e,t){if(ME(t))return re.resolve(null);let s=Ui(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Xm(t,null,"F"),s=Ui(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=ze(...l);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,s).next((p=>{const m=this.Ds(t,d);return this.Cs(t,m,c,p.readTime)?this.ys(e,Xm(t,null,"F")):this.vs(e,m,t,p)}))))})))))}ws(e,t,s,o){return ME(t)||o.isEqual(we.min())?re.resolve(null):this.ps.getDocuments(e,s).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,s,o)?re.resolve(null):(Zo()<=Be.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ea(t)),this.vs(e,c,t,s2(o,Wl)).next((d=>d)))}))}Ds(e,t){let s=new zt(GS(e));return t.forEach(((o,l)=>{$d(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return Zo()<=Be.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",ea(t)),this.ps.getDocumentsMatchingQuery(e,t,fr.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="LocalStore",OP=3e8;class qP{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new gt(Fe),this.xs=new lo((l=>Ip(l)),bp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function BP(n,e,t,s){return new qP(n,e,t,s)}async function hA(n,e){const t=Ne(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],d=[];let p=ze();for(const m of o){c.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}for(const m of l){d.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(s,p).next((m=>({Ls:m,removedBatchIds:c,addedBatchIds:d})))}))}))}function FP(n,e){const t=Ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,p,m,v){const E=m.batch,A=E.keys();let x=re.resolve();return A.forEach((U=>{x=x.next((()=>v.getEntry(p,U))).next((B=>{const z=m.docVersions.get(U);Xe(z!==null,48541),B.version.compareTo(z)<0&&(E.applyToRemoteDocument(B,m),B.isValidDocument()&&(B.setReadTime(m.commitVersion),v.addEntry(B)))}))})),x.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(d){let p=ze();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(p=p.add(d.batch.mutations[m].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function mA(n){const e=Ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function zP(n,e){const t=Ne(n),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const d=[];e.targetChanges.forEach(((v,E)=>{const A=o.get(E);if(!A)return;d.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,E))));let x=A.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?x=x.withResumeToken(jt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):v.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(v.resumeToken,s)),o=o.insert(E,x),(function(B,z,ee){return B.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=OP?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0})(A,x,v)&&d.push(t.Pi.updateTargetData(l,x))}));let p=gs(),m=ze();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(HP(l,c,e.documentUpdates).next((v=>{p=v.ks,m=v.qs}))),!s.isEqual(we.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));d.push(v)}return re.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,m))).next((()=>p))})).then((l=>(t.Ms=o,l)))}function HP(n,e,t){let s=ze(),o=ze();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=gs();return t.forEach(((d,p)=>{const m=l.get(d);p.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(we.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):pe(Up,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",p.version)})),{ks:c,qs:o}}))}function GP(n,e){const t=Ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Sp),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function YP(n,e){const t=Ne(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,re.resolve(o)):t.Pi.allocateTargetId(s).next((c=>(o=new or(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function np(n,e,t){const s=Ne(n),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Ra(c))throw c;pe(Up,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function GE(n,e,t){const s=Ne(n);let o=we.min(),l=ze();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,m,v){const E=Ne(p),A=E.xs.get(v);return A!==void 0?re.resolve(E.Ms.get(A)):E.Pi.getTargetData(m,v)})(s,c,Ui(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?o:we.min(),t?l:ze()))).next((d=>(JP(s,M2(e),d),{documents:d,Qs:l})))))}function JP(n,e,t){let s=n.Os.get(e)||we.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class YE{constructor(){this.activeTargetIds=L2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KP{constructor(){this.Mo=new YE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new YE,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="ConnectivityMonitor";class KE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){pe(JE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){pe(JE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qc=null;function ip(){return Qc===null?Qc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qc++,"0x"+Qc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em="RestConnection",$P={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class QP{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===vd?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const c=ip(),d=this.zo(e,t.toUriEncodedString());pe(Em,`Sending RPC '${e}' ${c}:`,d,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,l);const{host:m}=new URL(d),v=Ia(m);return this.Jo(e,d,p,s,v).then((E=>(pe(Em,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw io(Em,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",s),E}))}Ho(e,t,s,o,l,c){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+xa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=$P[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn="WebChannelConnection";class WP extends QP{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const c=ip();return new Promise(((d,p)=>{const m=new gS;m.setWithCredentials(!0),m.listenOnce(yS.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case nd.NO_ERROR:const E=m.getResponseJson();pe(sn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case nd.TIMEOUT:pe(sn,`RPC '${e}' ${c} timed out`),p(new ve(le.DEADLINE_EXCEEDED,"Request time out"));break;case nd.HTTP_ERROR:const A=m.getStatus();if(pe(sn,`RPC '${e}' ${c} failed with status:`,A,"response text:",m.getResponseText()),A>0){let x=m.getResponseJson();Array.isArray(x)&&(x=x[0]);const U=x==null?void 0:x.error;if(U&&U.status&&U.message){const B=(function(ee){const te=ee.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(te)>=0?te:le.UNKNOWN})(U.status);p(new ve(B,U.message))}else p(new ve(le.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new ve(le.UNAVAILABLE,"Connection failed."));break;default:be(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{pe(sn,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(o);pe(sn,`RPC '${e}' ${c} sending request:`,o),m.send(t,"POST",v,s,15)}))}T_(e,t,s){const o=ip(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=TS(),d=vS(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const v=l.join("");pe(sn,`Creating RPC '${e}' stream ${o}: ${v}`,p);const E=c.createWebChannel(v,p);this.I_(E);let A=!1,x=!1;const U=new XP({Yo:z=>{x?pe(sn,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(A||(pe(sn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),A=!0),pe(sn,`RPC '${e}' stream ${o} sending:`,z),E.send(z))},Zo:()=>E.close()}),B=(z,ee,te)=>{z.listen(ee,($=>{try{te($)}catch(F){setTimeout((()=>{throw F}),0)}}))};return B(E,Bl.EventType.OPEN,(()=>{x||(pe(sn,`RPC '${e}' stream ${o} transport opened.`),U.o_())})),B(E,Bl.EventType.CLOSE,(()=>{x||(x=!0,pe(sn,`RPC '${e}' stream ${o} transport closed`),U.a_(),this.E_(E))})),B(E,Bl.EventType.ERROR,(z=>{x||(x=!0,io(sn,`RPC '${e}' stream ${o} transport errored. Name:`,z.name,"Message:",z.message),U.a_(new ve(le.UNAVAILABLE,"The operation could not be completed")))})),B(E,Bl.EventType.MESSAGE,(z=>{var ee;if(!x){const te=z.data[0];Xe(!!te,16349);const $=te,F=($==null?void 0:$.error)||((ee=$[0])==null?void 0:ee.error);if(F){pe(sn,`RPC '${e}' stream ${o} received error:`,F);const ne=F.status;let oe=(function(N){const k=Ut[N];if(k!==void 0)return tA(k)})(ne),R=F.message;oe===void 0&&(oe=le.INTERNAL,R="Unknown error status: "+ne+" with message "+F.message),x=!0,U.a_(new ve(oe,R)),E.close()}else pe(sn,`RPC '${e}' stream ${o} received:`,te),U.u_(te)}})),B(d,_S.STAT_EVENT,(z=>{z.stat===Ym.PROXY?pe(sn,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===Ym.NOPROXY&&pe(sn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{U.__()}),0),U}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Sm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(n){return new nP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE="PersistentStream";class gA{constructor(e,t,s,o,l,c,d,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new pA(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(ms(t.toString()),ms("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new ve(le.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return pe(jE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(pe(jE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ZP extends gA{constructor(e,t,s,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=rP(this.serializer,e),s=(function(l){if(!("targetChange"in l))return we.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?we.min():c.readTime?Oi(c.readTime):we.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=tp(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=Qm(p)?{documents:lP(l,p)}:{query:uP(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=sA(l,c.resumeToken);const m=Wm(l,c.expectedCount);m!==null&&(d.expectedCount=m)}else if(c.snapshotVersion.compareTo(we.min())>0){d.readTime=Id(l,c.snapshotVersion.toTimestamp());const m=Wm(l,c.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const s=dP(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=tp(this.serializer),t.removeTarget=e,this.q_(t)}}class eV extends gA{constructor(e,t,s,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=aP(e.writeResults,e.commitTime),s=Oi(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=tp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>oP(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{}class nV extends tV{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ve(le.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Zm(t,s),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ve(le.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,Zm(t,s),o,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ve(le.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class iV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ms(t),this.aa=!1):pe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so="RemoteStore";class sV{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{co(this)&&(pe(so,"Restarting streams for network reachability change."),await(async function(p){const m=Ne(p);m.Ea.add(4),await cu(m),m.Ra.set("Unknown"),m.Ea.delete(4),await ef(m)})(this))}))})),this.Ra=new iV(s,o)}}async function ef(n){if(co(n))for(const e of n.da)await e(!0)}async function cu(n){for(const e of n.da)await e(!1)}function yA(n,e){const t=Ne(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Bp(t)?qp(t):Na(t).O_()&&Op(t,e))}function Lp(n,e){const t=Ne(n),s=Na(t);t.Ia.delete(e),s.O_()&&_A(t,e),t.Ia.size===0&&(s.O_()?s.L_():co(t)&&t.Ra.set("Unknown"))}function Op(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Na(n).Y_(e)}function _A(n,e){n.Va.Ue(e),Na(n).Z_(e)}function qp(n){n.Va=new W2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Na(n).start(),n.Ra.ua()}function Bp(n){return co(n)&&!Na(n).x_()&&n.Ia.size>0}function co(n){return Ne(n).Ea.size===0}function vA(n){n.Va=void 0}async function rV(n){n.Ra.set("Online")}async function oV(n){n.Ia.forEach(((e,t)=>{Op(n,e)}))}async function aV(n,e){vA(n),Bp(n)?(n.Ra.ha(e),qp(n)):n.Ra.set("Unknown")}async function lV(n,e,t){if(n.Ra.set("Online"),e instanceof iA&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const d of l.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o.Ia.delete(d),o.Va.removeTarget(d))})(n,e)}catch(s){pe(so,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await xd(n,s)}else if(e instanceof od?n.Va.Ze(e):e instanceof nA?n.Va.st(e):n.Va.tt(e),!t.isEqual(we.min()))try{const s=await mA(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach(((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ia.get(m);v&&l.Ia.set(m,v.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,m)=>{const v=l.Ia.get(p);if(!v)return;l.Ia.set(p,v.withResumeToken(jt.EMPTY_BYTE_STRING,v.snapshotVersion)),_A(l,p);const E=new or(v.target,p,m,v.sequenceNumber);Op(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(s){pe(so,"Failed to raise snapshot:",s),await xd(n,s)}}async function xd(n,e,t){if(!Ra(e))throw e;n.Ea.add(1),await cu(n),n.Ra.set("Offline"),t||(t=()=>mA(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{pe(so,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await ef(n)}))}function TA(n,e){return e().catch((t=>xd(n,t,e)))}async function tf(n){const e=Ne(n),t=gr(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Sp;for(;uV(e);)try{const o=await GP(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,cV(e,o)}catch(o){await xd(e,o)}EA(e)&&SA(e)}function uV(n){return co(n)&&n.Ta.length<10}function cV(n,e){n.Ta.push(e);const t=gr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function EA(n){return co(n)&&!gr(n).x_()&&n.Ta.length>0}function SA(n){gr(n).start()}async function dV(n){gr(n).ra()}async function fV(n){const e=gr(n);for(const t of n.Ta)e.ea(t.mutations)}async function hV(n,e,t){const s=n.Ta.shift(),o=Np.from(s,e,t);await TA(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await tf(n)}async function mV(n,e){e&&gr(n).X_&&await(async function(s,o){if((function(c){return $2(c)&&c!==le.ABORTED})(o.code)){const l=s.Ta.shift();gr(s).B_(),await TA(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await tf(s)}})(n,e),EA(n)&&SA(n)}async function $E(n,e){const t=Ne(n);t.asyncQueue.verifyOperationInProgress(),pe(so,"RemoteStore received new credentials");const s=co(t);t.Ea.add(3),await cu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ef(t)}async function pV(n,e){const t=Ne(n);e?(t.Ea.delete(2),await ef(t)):e||(t.Ea.add(2),await cu(t),t.Ra.set("Unknown"))}function Na(n){return n.ma||(n.ma=(function(t,s,o){const l=Ne(t);return l.sa(),new ZP(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:rV.bind(null,n),t_:oV.bind(null,n),r_:aV.bind(null,n),H_:lV.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Bp(n)?qp(n):n.Ra.set("Unknown")):(await n.ma.stop(),vA(n))}))),n.ma}function gr(n){return n.fa||(n.fa=(function(t,s,o){const l=Ne(t);return l.sa(),new eV(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:dV.bind(null,n),r_:mV.bind(null,n),ta:fV.bind(null,n),na:hV.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await tf(n)):(await n.fa.stop(),n.Ta.length>0&&(pe(so,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new ds,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const c=Date.now()+s,d=new Fp(e,t,c,o,l);return d.start(s),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zp(n,e){if(ms("AsyncQueue",`${e}: ${n}`),Ra(n))return new ve(le.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{static emptySet(e){return new ca(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ae.comparator(t.key,s.key):(t,s)=>Ae.comparator(t.key,s.key),this.keyedMap=Fl(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ca)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new ca;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(){this.ga=new gt(Ae.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):be(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Ta{constructor(e,t,s,o,l,c,d,p,m){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,s,o,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Ta(e,t,ca.emptySet(t),c,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class yV{constructor(){this.queries=XE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Ne(t),l=o.queries;o.queries=XE(),l.forEach(((c,d)=>{for(const p of d.Sa)p.onError(s)}))})(this,new ve(le.ABORTED,"Firestore shutting down"))}}function XE(){return new lo((n=>HS(n)),jd)}async function AA(n,e){const t=Ne(n);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new gV,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const d=zp(c,`Initialization of query '${ea(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Hp(t)}async function CA(n,e){const t=Ne(n),s=e.query;let o=3;const l=t.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function _V(n,e){const t=Ne(n);let s=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(o)&&(s=!0);c.wa=o}}s&&Hp(t)}function vV(n,e,t){const s=Ne(n),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function Hp(n){n.Ca.forEach((e=>{e.next()}))}var sp,WE;(WE=sp||(sp={})).Ma="default",WE.Cache="cache";class IA{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Ta(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ta.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==sp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this.key=e}}class xA{constructor(e){this.key=e}}class TV{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=GS(e),this.tu=new ca(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new QE,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const A=o.get(v),x=$d(this.query,E)?E:null,U=!!A&&this.mutatedKeys.has(A.key),B=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let z=!1;A&&x?A.data.isEqual(x.data)?U!==B&&(s.track({type:3,doc:x}),z=!0):this.su(A,x)||(s.track({type:2,doc:x}),z=!0,(p&&this.eu(x,p)>0||m&&this.eu(x,m)<0)&&(d=!0)):!A&&x?(s.track({type:0,doc:x}),z=!0):A&&!x&&(s.track({type:1,doc:A}),z=!0,(p||m)&&(d=!0)),z&&(x?(c=c.add(x),l=B?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{tu:c,iu:s,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,E)=>(function(x,U){const B=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be(20277,{Rt:z})}};return B(x)-B(U)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(s),o=o??!1;const d=t&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,m=p!==this.Za;return this.Za=p,c.length!==0||m?{snapshot:new Ta(this.query,e.tu,l,c,e.mutatedKeys,p===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new QE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new xA(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new bA(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ta.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Gp="SyncEngine";class EV{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class SV{constructor(e){this.key=e,this.hu=!1}}class AV{constructor(e,t,s,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new lo((d=>HS(d)),jd),this.Iu=new Map,this.Eu=new Set,this.du=new gt(Ae.comparator),this.Au=new Map,this.Ru=new Pp,this.Vu={},this.mu=new Map,this.fu=va.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function CV(n,e,t=!0){const s=PA(n);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await wA(s,e,t,!0),o}async function IV(n,e){const t=PA(n);await wA(t,e,!0,!1)}async function wA(n,e,t,s){const o=await YP(n.localStore,Ui(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return s&&(d=await bV(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&yA(n.remoteStore,o),d}async function bV(n,e,t,s,o){n.pu=(E,A,x)=>(async function(B,z,ee,te){let $=z.view.ru(ee);$.Cs&&($=await GE(B.localStore,z.query,!1).then((({documents:R})=>z.view.ru(R,$))));const F=te&&te.targetChanges.get(z.targetId),ne=te&&te.targetMismatches.get(z.targetId)!=null,oe=z.view.applyChanges($,B.isPrimaryClient,F,ne);return e0(B,z.targetId,oe.au),oe.snapshot})(n,E,A,x);const l=await GE(n.localStore,e,!0),c=new TV(e,l.Qs),d=c.ru(l.documents),p=uu.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),m=c.applyChanges(d,n.isPrimaryClient,p);e0(n,t,m.au);const v=new EV(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function xV(n,e,t){const s=Ne(n),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((c=>!jd(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await np(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Lp(s.remoteStore,o.targetId),rp(s,o.targetId)})).catch(wa)):(rp(s,o.targetId),await np(s.localStore,o.targetId,!0))}async function wV(n,e){const t=Ne(n),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Lp(t.remoteStore,s.targetId))}async function RV(n,e,t){const s=UV(n);try{const o=await(function(c,d){const p=Ne(c),m=at.now(),v=d.reduce(((x,U)=>x.add(U.key)),ze());let E,A;return p.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let U=gs(),B=ze();return p.Ns.getEntries(x,v).next((z=>{U=z,U.forEach(((ee,te)=>{te.isValidDocument()||(B=B.add(ee))}))})).next((()=>p.localDocuments.getOverlayedDocuments(x,U))).next((z=>{E=z;const ee=[];for(const te of d){const $=G2(te,E.get(te.key).overlayedDocument);$!=null&&ee.push(new uo(te.key,$,US($.value.mapValue),Li.exists(!0)))}return p.mutationQueue.addMutationBatch(x,m,ee,d)})).next((z=>{A=z;const ee=z.applyToLocalDocumentSet(E,B);return p.documentOverlayCache.saveOverlays(x,z.batchId,ee)}))})).then((()=>({batchId:A.batchId,changes:JS(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(c,d,p){let m=c.Vu[c.currentUser.toKey()];m||(m=new gt(Fe)),m=m.insert(d,p),c.Vu[c.currentUser.toKey()]=m})(s,o.batchId,t),await du(s,o.changes),await tf(s.remoteStore)}catch(o){const l=zp(o,"Failed to persist write");t.reject(l)}}async function RA(n,e){const t=Ne(n);try{const s=await zP(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Au.get(l);c&&(Xe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?Xe(c.hu,14607):o.removedDocuments.size>0&&(Xe(c.hu,42227),c.hu=!1))})),await du(t,s,e)}catch(s){await wa(s)}}function ZE(n,e,t){const s=Ne(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(c,d){const p=Ne(c);p.onlineState=d;let m=!1;p.queries.forEach(((v,E)=>{for(const A of E.Sa)A.va(d)&&(m=!0)})),m&&Hp(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function NV(n,e,t){const s=Ne(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let c=new gt(Ae.comparator);c=c.insert(l,on.newNoDocument(l,we.min()));const d=ze().add(l),p=new Wd(we.min(),new Map,new gt(Fe),c,d);await RA(s,p),s.du=s.du.remove(l),s.Au.delete(e),Yp(s)}else await np(s.localStore,e,!1).then((()=>rp(s,e,t))).catch(wa)}async function MV(n,e){const t=Ne(n),s=e.batch.batchId;try{const o=await FP(t.localStore,e);MA(t,s,null),NA(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await du(t,o)}catch(o){await wa(o)}}async function DV(n,e,t){const s=Ne(n);try{const o=await(function(c,d){const p=Ne(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return p.mutationQueue.lookupMutationBatch(m,d).next((E=>(Xe(E!==null,37113),v=E.keys(),p.mutationQueue.removeMutationBatch(m,E)))).next((()=>p.mutationQueue.performConsistencyCheck(m))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(m,v,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>p.localDocuments.getDocuments(m,v)))}))})(s.localStore,e);MA(s,e,t),NA(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await du(s,o)}catch(o){await wa(o)}}function NA(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function MA(n,e,t){const s=Ne(n);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function rp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||DA(n,s)}))}function DA(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Lp(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Yp(n))}function e0(n,e,t){for(const s of t)s instanceof bA?(n.Ru.addReference(s.key,e),PV(n,s)):s instanceof xA?(pe(Gp,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||DA(n,s.key)):be(19791,{wu:s})}function PV(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(pe(Gp,"New document in limbo: "+t),n.Eu.add(s),Yp(n))}function Yp(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ae(dt.fromString(e)),s=n.fu.next();n.Au.set(s,new SV(t)),n.du=n.du.insert(t,s),yA(n.remoteStore,new or(Ui(xp(t.path)),s,"TargetPurposeLimboResolution",Gd.ce))}}async function du(n,e,t){const s=Ne(n),o=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((d,p)=>{c.push(s.pu(p,e,t).then((m=>{var v;if((m||t)&&s.isPrimaryClient){const E=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:v.current;s.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(m){o.push(m);const E=kp.As(p.targetId,m);l.push(E)}})))})),await Promise.all(c),s.Pu.H_(o),await(async function(p,m){const v=Ne(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>re.forEach(m,(A=>re.forEach(A.Es,(x=>v.persistence.referenceDelegate.addReference(E,A.targetId,x))).next((()=>re.forEach(A.ds,(x=>v.persistence.referenceDelegate.removeReference(E,A.targetId,x)))))))))}catch(E){if(!Ra(E))throw E;pe(Up,"Failed to update sequence numbers: "+E)}for(const E of m){const A=E.targetId;if(!E.fromCache){const x=v.Ms.get(A),U=x.snapshotVersion,B=x.withLastLimboFreeSnapshotVersion(U);v.Ms=v.Ms.insert(A,B)}}})(s.localStore,l))}async function VV(n,e){const t=Ne(n);if(!t.currentUser.isEqual(e)){pe(Gp,"User change. New user:",e.toKey());const s=await hA(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((p=>{p.reject(new ve(le.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await du(t,s.Ls)}}function kV(n,e){const t=Ne(n),s=t.Au.get(e);if(s&&s.hu)return ze().add(s.key);{let o=ze();const l=t.Iu.get(e);if(!l)return o;for(const c of l){const d=t.Tu.get(c);o=o.unionWith(d.view.nu)}return o}}function PA(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=RA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NV.bind(null,e),e.Pu.H_=_V.bind(null,e.eventManager),e.Pu.yu=vV.bind(null,e.eventManager),e}function UV(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=MV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DV.bind(null,e),e}class wd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return BP(this.persistence,new LP,e.initialUser,this.serializer)}Cu(e){return new fA(Vp.mi,this.serializer)}Du(e){return new KP}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wd.provider={build:()=>new wd};class LV extends wd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Xe(this.persistence.referenceDelegate instanceof bd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new SP(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new fA((s=>bd.mi(s,t)),this.serializer)}}class op{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>ZE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=VV.bind(null,this.syncEngine),await pV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new yV})()}createDatastore(e){const t=Zd(e.databaseInfo.databaseId),s=(function(l){return new WP(l)})(e.databaseInfo);return(function(l,c,d,p){return new nV(l,c,d,p)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,c,d){return new sV(s,o,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>ZE(this.syncEngine,t,0)),(function(){return KE.v()?new KE:new jP})())}createSyncEngine(e,t){return(function(o,l,c,d,p,m,v){const E=new AV(o,l,c,d,p,m);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Ne(o);pe(so,"RemoteStore shutting down."),l.Ea.add(5),await cu(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}op.provider={build:()=>new op};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ms("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr="FirestoreClient";class OV{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=rn.UNAUTHENTICATED,this.clientId=Hd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{pe(yr,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(pe(yr,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ds;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=zp(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Am(n,e){n.asyncQueue.verifyOperationInProgress(),pe(yr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await hA(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function t0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await qV(n);pe(yr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>$E(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>$E(e.remoteStore,o))),n._onlineComponents=e}async function qV(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pe(yr,"Using user provided OfflineComponentProvider");try{await Am(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===le.FAILED_PRECONDITION||o.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;io("Error using user provided cache. Falling back to memory cache: "+t),await Am(n,new wd)}}else pe(yr,"Using default OfflineComponentProvider"),await Am(n,new LV(void 0));return n._offlineComponents}async function kA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pe(yr,"Using user provided OnlineComponentProvider"),await t0(n,n._uninitializedComponentsProvider._online)):(pe(yr,"Using default OnlineComponentProvider"),await t0(n,new op))),n._onlineComponents}function BV(n){return kA(n).then((e=>e.syncEngine))}async function UA(n){const e=await kA(n),t=e.eventManager;return t.onListen=CV.bind(null,e.syncEngine),t.onUnlisten=xV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=IV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=wV.bind(null,e.syncEngine),t}function FV(n,e,t={}){const s=new ds;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,m){const v=new VA({next:A=>{v.Nu(),c.enqueueAndForget((()=>CA(l,E)));const x=A.docs.has(d);!x&&A.fromCache?m.reject(new ve(le.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&A.fromCache&&p&&p.source==="server"?m.reject(new ve(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(A)},error:A=>m.reject(A)}),E=new IA(xp(d.path),v,{includeMetadataChanges:!0,qa:!0});return AA(l,E)})(await UA(n),n.asyncQueue,e,t,s))),s.promise}function zV(n,e,t={}){const s=new ds;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,m){const v=new VA({next:A=>{v.Nu(),c.enqueueAndForget((()=>CA(l,E))),A.fromCache&&p.source==="server"?m.reject(new ve(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(A)},error:A=>m.reject(A)}),E=new IA(d,v,{includeMetadataChanges:!0,qa:!0});return AA(l,E)})(await UA(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="firestore.googleapis.com",i0=!0;class s0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ve(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=OA,this.ssl=i0}else this.host=e.host,this.ssl=e.ssl??i0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TP)throw new ve(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LA(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ve(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ve(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ve(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nf{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new s0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new s0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new AS;switch(s.type){case"firstParty":return new WD(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ve(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=n0.get(t);s&&(pe("ComponentProvider","Removing Datastore"),n0.delete(t),s.terminate())})(this),Promise.resolve()}}function qA(n,e,t,s={}){var m;n=ps(n,nf);const o=Ia(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;o&&(aS(`https://${d}`),lS("Firestore",!0)),l.host!==OA&&l.host!==d&&io("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:d,ssl:o,emulatorOptions:s};if(!eo(p,c)&&(n._setSettings(p),s.mockUserToken)){let v,E;if(typeof s.mockUserToken=="string")v=s.mockUserToken,E=rn.MOCK_USER;else{v=TM(s.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new ve(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new rn(A)}n._authCredentials=new $D(new SS(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new fu(this.firestore,e,this._query)}}class Ot{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}toJSON(){return{type:Ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(au(t,Ot._jsonSchema))return new Ot(e,s||null,new Ae(dt.fromString(t.referencePath)))}}Ot._jsonSchemaVersion="firestore/documentReference/1.0",Ot._jsonSchema={type:Lt("string",Ot._jsonSchemaVersion),referencePath:Lt("string")};class fs extends fu{constructor(e,t,s){super(e,t,xp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new Ae(e))}withConverter(e){return new fs(this.firestore,e,this._path)}}function HV(n,e,...t){if(n=ci(n),CS("collection","path",e),n instanceof nf){const s=dt.fromString(e,...t);return _E(s),new fs(n,null,s)}{if(!(n instanceof Ot||n instanceof fs))throw new ve(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(dt.fromString(e,...t));return _E(s),new fs(n.firestore,null,s)}}function GV(n,e,...t){if(n=ci(n),arguments.length===1&&(e=Hd.newId()),CS("doc","path",e),n instanceof nf){const s=dt.fromString(e,...t);return yE(s),new Ot(n,null,new Ae(s))}{if(!(n instanceof Ot||n instanceof fs))throw new ve(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(dt.fromString(e,...t));return yE(s),new Ot(n.firestore,n instanceof fs?n.converter:null,new Ae(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0="AsyncQueue";class o0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new pA(this,"async_queue_retry"),this._c=()=>{const s=Sm();s&&pe(r0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Sm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Sm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ds;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ra(e))throw e;pe(r0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,ms("INTERNAL UNHANDLED ERROR: ",a0(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Fp.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&be(47125,{Pc:a0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function a0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ma extends nf{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new o0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new o0(e),this._firestoreClient=void 0,await e}}}function BA(n,e){const t=typeof n=="object"?n:fS(),s=typeof n=="string"?n:vd,o=vp(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=_M("firestore");l&&qA(o,...l)}return o}function sf(n){if(n._terminated)throw new ve(le.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||YV(n),n._firestoreClient}function YV(n){var s,o,l;const e=n._freezeSettings(),t=(function(d,p,m,v){return new m2(d,p,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,LA(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new OV(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dn(jt.fromBase64String(e))}catch(t){throw new ve(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Dn(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Dn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(au(e,Dn._jsonSchema))return Dn.fromBase64String(e.bytes)}}Dn._jsonSchemaVersion="firestore/bytes/1.0",Dn._jsonSchema={type:Lt("string",Dn._jsonSchemaVersion),bytes:Lt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:li._jsonSchemaVersion}}static fromJSON(e){if(au(e,li._jsonSchema))return new li(e.latitude,e.longitude)}}li._jsonSchemaVersion="firestore/geoPoint/1.0",li._jsonSchema={type:Lt("string",li._jsonSchemaVersion),latitude:Lt("number"),longitude:Lt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ui._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(au(e,ui._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ui(e.vectorValues);throw new ve(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ui._jsonSchemaVersion="firestore/vectorValue/1.0",ui._jsonSchema={type:Lt("string",ui._jsonSchemaVersion),vectorValues:Lt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV=/^__.*__$/;class KV{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new uo(e,this.data,this.fieldMask,t,this.fieldTransforms):new lu(e,this.data,t,this.fieldTransforms)}}function FA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be(40011,{Ac:n})}}class Kp{constructor(e,t,s,o,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Kp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Rd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(FA(this.Ac)&&JV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class jV{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Zd(e)}Cc(e,t,s,o=!1){return new Kp({Ac:e,methodName:t,Dc:s,path:Kt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $V(n){const e=n._freezeSettings(),t=Zd(n._databaseId);return new jV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function QV(n,e,t,s,o,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,o);YA("Data must be an object, but it was:",c,s);const d=HA(s,c);let p,m;if(l.merge)p=new oi(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const A=XV(e,E,t);if(!c.contains(A))throw new ve(le.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);ZV(v,A)||v.push(A)}p=new oi(v),m=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,m=c.fieldTransforms;return new KV(new Jn(d),p,m)}function zA(n,e){if(GA(n=ci(n)))return YA("Unsupported field value:",e,n),HA(n,e);if(n instanceof Jp)return(function(s,o){if(!FA(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let c=0;for(const d of s){let p=zA(d,o.wc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,o){if((s=ci(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return O2(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=at.fromDate(s);return{timestampValue:Id(o.serializer,l)}}if(s instanceof at){const l=new at(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Id(o.serializer,l)}}if(s instanceof li)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Dn)return{bytesValue:sA(o.serializer,s._byteString)};if(s instanceof Ot){const l=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Dp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof ui)return(function(c,d){return{mapValue:{fields:{[VS]:{stringValue:kS},[Td]:{arrayValue:{values:c.toArray().map((m=>{if(typeof m!="number")throw d.Sc("VectorValues must only contain numeric values.");return wp(d.serializer,m)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Ep(s)}`)})(n,e)}function HA(n,e){const t={};return wS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ao(n,((s,o)=>{const l=zA(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function GA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof at||n instanceof li||n instanceof Dn||n instanceof Ot||n instanceof Jp||n instanceof ui)}function YA(n,e,t){if(!GA(t)||!bS(t)){const s=Ep(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function XV(n,e,t){if((e=ci(e))instanceof rf)return e._internalPath;if(typeof e=="string")return JA(n,e);throw Rd("Field path arguments must be of type string or ",n,!1,void 0,t)}const WV=new RegExp("[~\\*/\\[\\]]");function JA(n,e,t){if(e.search(WV)>=0)throw Rd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new rf(...e.split("."))._internalPath}catch{throw Rd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Rd(n,e,t,s,o){const l=s&&!s.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${s}`),c&&(p+=` in document ${o}`),p+=")"),new ve(le.INVALID_ARGUMENT,d+n+p)}function ZV(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ek(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class ek extends KA{data(){return super.data()}}function jA(n,e){return typeof e=="string"?JA(n,e):e instanceof rf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ve(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $A{convertValue(e,t="none"){switch(pr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw be(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ao(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,o,l;const t=(l=(o=(s=e.fields)==null?void 0:s[Td].arrayValue)==null?void 0:o.values)==null?void 0:l.map((c=>bt(c.doubleValue)));return new ui(t)}convertGeoPoint(e){return new li(bt(e.latitude),bt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Jd(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Zl(e));default:return null}}convertTimestamp(e){const t=hr(e);return new at(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=dt.fromString(e);Xe(cA(s),9688,{name:e});const o=new ga(s.get(1),s.get(3)),l=new Ae(s.popFirst(5));return o.isEqual(t)||ms(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class sa{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dr extends KA{constructor(e,t,s,o,l,c){super(e,t,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $l(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(jA("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=dr._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}dr._jsonSchemaVersion="firestore/documentSnapshot/1.0",dr._jsonSchema={type:Lt("string",dr._jsonSchemaVersion),bundleSource:Lt("string","DocumentSnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class $l extends dr{data(e={}){return super.data(e)}}class Xr{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new sa(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new $l(this._firestore,this._userDataWriter,s.key,s,new sa(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((d=>{const p=new $l(o._firestore,o._userDataWriter,d.doc.key,d.doc,new sa(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new $l(o._firestore,o._userDataWriter,d.doc.key,d.doc,new sa(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,v=-1;return d.type!==0&&(m=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:ik(d.type),doc:p,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Xr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Hd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ik(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(n){n=ps(n,Ot);const e=ps(n.firestore,Ma);return FV(sf(e),n._key).then((t=>lk(e,n,t)))}Xr._jsonSchemaVersion="firestore/querySnapshot/1.0",Xr._jsonSchema={type:Lt("string",Xr._jsonSchemaVersion),bundleSource:Lt("string","QuerySnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class QA extends $A{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,t)}}function rk(n){n=ps(n,fu);const e=ps(n.firestore,Ma),t=sf(e),s=new QA(e);return tk(n._query),zV(t,n._query).then((o=>new Xr(e,s,n,o)))}function ok(n,e,t){n=ps(n,Ot);const s=ps(n.firestore,Ma),o=nk(n.converter,e,t);return jp(s,[QV($V(s),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Li.none())])}function ak(n){return jp(ps(n.firestore,Ma),[new Rp(n._key,Li.none())])}function jp(n,e){return(function(s,o){const l=new ds;return s.asyncQueue.enqueueAndForget((async()=>RV(await BV(s),o,l))),l.promise})(sf(n),e)}function lk(n,e,t){const s=t.docs.get(e._key),o=new QA(n);return new dr(n,o,e._key,s,new sa(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){xa=o})(ba),ma(new to("firestore",((s,{instanceIdentifier:o,options:l})=>{const c=s.getProvider("app").getImmediate(),d=new Ma(new QD(s.getProvider("auth-internal")),new ZD(c,s.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ve(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ga(m.options.projectId,v)})(c,o),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),ur(hE,mE,e),ur(hE,mE,"esm2020")})();const Xc=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:$A,Bytes:Dn,CollectionReference:fs,DocumentReference:Ot,DocumentSnapshot:dr,FieldPath:rf,FieldValue:Jp,Firestore:Ma,FirestoreError:ve,GeoPoint:li,Query:fu,QueryDocumentSnapshot:$l,QuerySnapshot:Xr,SnapshotMetadata:sa,Timestamp:at,VectorValue:ui,_AutoId:Hd,_ByteString:jt,_DatabaseId:ga,_DocumentKey:Ae,_EmptyAuthCredentialsProvider:AS,_FieldPath:Kt,_cast:ps,_logWarn:io,_validateIsNotUsedTogether:IS,collection:HV,connectFirestoreEmulator:qA,deleteDoc:ak,doc:GV,ensureFirestoreConfigured:sf,executeWrite:jp,getDoc:sk,getDocs:rk,getFirestore:BA,setDoc:ok},Symbol.toStringTag,{value:"Module"}));function XA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uk=XA,WA=new ru("auth","Firebase",XA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd=new yp("@firebase/auth");function ck(n,...e){Nd.logLevel<=Be.WARN&&Nd.warn(`Auth (${ba}): ${n}`,...e)}function ad(n,...e){Nd.logLevel<=Be.ERROR&&Nd.error(`Auth (${ba}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(n,...e){throw $p(n,...e)}function qi(n,...e){return $p(n,...e)}function ZA(n,e,t){const s={...uk(),[e]:t};return new ru("auth","Firebase",s).create(e,{appName:n.name})}function Wr(n){return ZA(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $p(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return WA.create(n,...e)}function xe(n,e,...t){if(!n)throw $p(e,...t)}function us(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ad(e),new Error(e)}function _s(n,e){n||us(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function dk(){return l0()==="http:"||l0()==="https:"}function l0(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dk()||bM()||"connection"in navigator)?navigator.onLine:!0}function hk(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,t){this.shortDelay=e,this.longDelay=t,_s(t>e,"Short delay should be less than long delay!"),this.isMobile=AM()||xM()}get(){return fk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(n,e){_s(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;us("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;us("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;us("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gk=new hu(3e4,6e4);function Xp(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Da(n,e,t,s,o={}){return tC(n,o,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const d=ou({key:n.config.apiKey,...c}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:p,...l};return IM()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Ia(n.emulatorConfig.host)&&(m.credentials="include"),eC.fetch()(await nC(n,n.config.apiHost,t,d),m)})}async function tC(n,e,t){n._canInitEmulator=!1;const s={...mk,...e};try{const o=new _k(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Wc(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,m]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wc(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Wc(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw Wc(n,"user-disabled",c);const v=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw ZA(n,v,m);ys(n,v)}}catch(o){if(o instanceof Ts)throw o;ys(n,"network-request-failed",{message:String(o)})}}async function yk(n,e,t,s,o={}){const l=await Da(n,e,t,s,o);return"mfaPendingCredential"in l&&ys(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function nC(n,e,t,s){const o=`${e}${t}?${s}`,l=n,c=l.config.emulator?Qp(n.config,o):`${n.config.apiScheme}://${o}`;return pk.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class _k{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(qi(this.auth,"network-request-failed")),gk.get())})}}function Wc(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=qi(n,e,s);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vk(n,e){return Da(n,"POST","/v1/accounts:delete",e)}async function Md(n,e){return Da(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Tk(n,e=!1){const t=ci(n),s=await t.getIdToken(e),o=Wp(s);xe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:Ql(Cm(o.auth_time)),issuedAtTime:Ql(Cm(o.iat)),expirationTime:Ql(Cm(o.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Cm(n){return Number(n)*1e3}function Wp(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return ad("JWT malformed, contained fewer than 3 sections"),null;try{const o=iS(t);return o?JSON.parse(o):(ad("Failed to decode base64 JWT payload"),null)}catch(o){return ad("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function u0(n){const e=Wp(n);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iu(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Ts&&Ek(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function Ek({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ql(this.lastLoginAt),this.creationTime=Ql(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dd(n){var E;const e=n.auth,t=await n.getIdToken(),s=await iu(n,Md(e,{idToken:t}));xe(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=(E=o.providerUserInfo)!=null&&E.length?iC(o.providerUserInfo):[],c=Ck(n.providerData,l),d=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(c!=null&&c.length),m=d?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new lp(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(n,v)}async function Ak(n){const e=ci(n);await Dd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Ck(n,e){return[...n.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function iC(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ik(n,e){const t=await tC(n,{},async()=>{const s=ou({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=await nC(n,o,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:s};return n.emulatorConfig&&Ia(n.emulatorConfig.host)&&(p.credentials="include"),eC.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function bk(n,e){return Da(n,"POST","/v2/accounts:revokeToken",Xp(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):u0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const t=u0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await Ik(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,c=new da;return s&&(xe(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(xe(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(xe(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new da,this.toJSON())}_performRefresh(){return us("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(n,e){xe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ai{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new Sk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new lp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await iu(this,this.stsTokenManager.getToken(this.auth,e));return xe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Tk(this,e)}reload(){return Ak(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ai({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Dd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ki(this.auth.app))return Promise.reject(Wr(this.auth));const e=await this.getIdToken();return await iu(this,vk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,m=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:A,isAnonymous:x,providerData:U,stsTokenManager:B}=t;xe(E&&B,e,"internal-error");const z=da.fromJSON(this.name,B);xe(typeof E=="string",e,"internal-error"),er(s,e.name),er(o,e.name),xe(typeof A=="boolean",e,"internal-error"),xe(typeof x=="boolean",e,"internal-error"),er(l,e.name),er(c,e.name),er(d,e.name),er(p,e.name),er(m,e.name),er(v,e.name);const ee=new ai({uid:E,auth:e,email:o,emailVerified:A,displayName:s,isAnonymous:x,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:z,createdAt:m,lastLoginAt:v});return U&&Array.isArray(U)&&(ee.providerData=U.map(te=>({...te}))),p&&(ee._redirectEventId=p),ee}static async _fromIdTokenResponse(e,t,s=!1){const o=new da;o.updateFromServerResponse(t);const l=new ai({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Dd(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];xe(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?iC(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),d=new da;d.updateFromIdToken(s);const p=new ai({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:c}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new lp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0=new Map;function cs(n){_s(n instanceof Function,"Expected a class definition");let e=c0.get(n);return e?(_s(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,c0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}sC.type="NONE";const d0=sC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(n,e,t){return`firebase:${n}:${e}:${t}`}class fa{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=ld(this.userKey,o.apiKey,l),this.fullPersistenceKey=ld("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Md(this.auth,{idToken:e}).catch(()=>{});return t?ai._fromGetAccountInfoResponse(this.auth,t,e):null}return ai._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new fa(cs(d0),e,s);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=o[0]||cs(d0);const c=ld(s,e.config.apiKey,e.name);let d=null;for(const m of t)try{const v=await m._get(c);if(v){let E;if(typeof v=="string"){const A=await Md(e,{idToken:v}).catch(()=>{});if(!A)break;E=await ai._fromGetAccountInfoResponse(e,A,v)}else E=ai._fromJSON(e,v);m!==l&&(d=E),l=m;break}}catch{}const p=o.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new fa(l,e,s):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==l)try{await m._remove(c)}catch{}})),new fa(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cC(e))return"Blackberry";if(dC(e))return"Webos";if(oC(e))return"Safari";if((e.includes("chrome/")||aC(e))&&!e.includes("edge/"))return"Chrome";if(uC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function rC(n=ln()){return/firefox\//i.test(n)}function oC(n=ln()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aC(n=ln()){return/crios\//i.test(n)}function lC(n=ln()){return/iemobile/i.test(n)}function uC(n=ln()){return/android/i.test(n)}function cC(n=ln()){return/blackberry/i.test(n)}function dC(n=ln()){return/webos/i.test(n)}function Zp(n=ln()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function xk(n=ln()){var e;return Zp(n)&&!!((e=window.navigator)!=null&&e.standalone)}function wk(){return wM()&&document.documentMode===10}function fC(n=ln()){return Zp(n)||uC(n)||dC(n)||cC(n)||/windows phone/i.test(n)||lC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(n,e=[]){let t;switch(n){case"Browser":t=f0(ln());break;case"Worker":t=`${f0(ln())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ba}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nk(n,e={}){return Da(n,"GET","/v2/passwordPolicy",Xp(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=6;class Dk{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Mk,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new h0(this),this.idTokenSubscription=new h0(this),this.beforeStateQueue=new Rk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=cs(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await fa.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Md(this,{idToken:e}),s=await ai._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(ki(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=s==null?void 0:s._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(s=p.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Dd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ki(this.app))return Promise.reject(Wr(this));const t=e?ci(e):null;return t&&xe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ki(this.app)?Promise.reject(Wr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ki(this.app)?Promise.reject(Wr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(cs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Nk(this),t=new Dk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ru("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await bk(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&cs(e)||this._popupRedirectResolver;xe(t,this,"argument-error"),this.redirectPersistenceManager=await fa.create(this,[cs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(ki(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&ck(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function eg(n){return ci(n)}class h0{constructor(e){this.auth=e,this.observer=null,this.addObserver=UM(t=>this.observer=t)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Vk(n){tg=n}function kk(n){return tg.loadJS(n)}function Uk(){return tg.gapiScript}function Lk(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(n,e){const t=vp(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(eo(l,e??{}))return o;ys(o,"already-initialized")}return t.initialize({options:e})}function qk(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(cs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function Bk(n,e,t){const s=eg(n);xe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=mC(e),{host:c,port:d}=Fk(e),p=d===null?"":`:${d}`,m={url:`${l}//${c}${p}/`},v=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){xe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),xe(eo(m,s.config.emulator)&&eo(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,Ia(c)?(aS(`${l}//${c}${p}`),lS("Auth",!0)):zk()}function mC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Fk(n){const e=mC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:m0(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:m0(c)}}}function m0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function zk(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return us("not implemented")}_getIdTokenResponse(e){return us("not implemented")}_linkToIdToken(e,t){return us("not implemented")}_getReauthenticationResolver(e){return us("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ha(n,e){return yk(n,"POST","/v1/accounts:signInWithIdp",Xp(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk="http://localhost";class ro extends pC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ro(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ys("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const c=new ro(s,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ha(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,ha(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ha(e,t)}buildRequest(){const e={requestUri:Hk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ou(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu extends gC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends mu{constructor(){super("facebook.com")}static credential(e){return ro._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tr.credential(e.oauthAccessToken)}catch{return null}}}tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends mu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ro._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return nr.credential(t,s)}catch{return null}}}nr.GOOGLE_SIGN_IN_METHOD="google.com";nr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends mu{constructor(){super("github.com")}static credential(e){return ro._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ir.credential(e.oauthAccessToken)}catch{return null}}}ir.GITHUB_SIGN_IN_METHOD="github.com";ir.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends mu{constructor(){super("twitter.com")}static credential(e,t){return ro._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return sr.credential(t,s)}catch{return null}}}sr.TWITTER_SIGN_IN_METHOD="twitter.com";sr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await ai._fromIdTokenResponse(e,s,o),c=p0(s);return new Ea({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=p0(s);return new Ea({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function p0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd extends Ts{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Pd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Pd(e,t,s,o)}}function yC(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Pd._fromErrorAndOperation(n,l,e,s):l})}async function Gk(n,e,t=!1){const s=await iu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ea._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yk(n,e,t=!1){const{auth:s}=n;if(ki(s.app))return Promise.reject(Wr(s));const o="reauthenticate";try{const l=await iu(n,yC(s,o,e,n),t);xe(l.idToken,s,"internal-error");const c=Wp(l.idToken);xe(c,s,"internal-error");const{sub:d}=c;return xe(n.uid===d,s,"user-mismatch"),Ea._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ys(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jk(n,e,t=!1){if(ki(n.app))return Promise.reject(Wr(n));const s="signIn",o=await yC(n,s,e),l=await Ea._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(l.user),l}function Kk(n,e,t,s){return ci(n).onIdTokenChanged(e,t,s)}function jk(n,e,t){return ci(n).beforeAuthStateChanged(e,t)}const Vd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Vd,"1"),this.storage.removeItem(Vd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=1e3,Qk=10;class vC extends _C{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);wk()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Qk):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},$k)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}vC.type="LOCAL";const Xk=vC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC extends _C{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}TC.type="SESSION";const EC=TC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new of(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const d=Array.from(c).map(async m=>m(t.origin,l)),p=await Wk(d);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}of.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const m=ng("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(E){const A=E;if(A.data.eventId===m)switch(A.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(A.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(){return window}function eU(n){Bi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(){return typeof Bi().WorkerGlobalScope<"u"&&typeof Bi().importScripts=="function"}async function tU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nU(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function iU(){return SC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC="firebaseLocalStorageDb",sU=1,kd="firebaseLocalStorage",CC="fbase_key";class pu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function af(n,e){return n.transaction([kd],e?"readwrite":"readonly").objectStore(kd)}function rU(){const n=indexedDB.deleteDatabase(AC);return new pu(n).toPromise()}function up(){const n=indexedDB.open(AC,sU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(kd,{keyPath:CC})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(kd)?e(s):(s.close(),await rU(),e(await up()))})})}async function g0(n,e,t){const s=af(n,!0).put({[CC]:e,value:t});return new pu(s).toPromise()}async function oU(n,e){const t=af(n,!1).get(e),s=await new pu(t).toPromise();return s===void 0?null:s.value}function y0(n,e){const t=af(n,!0).delete(e);return new pu(t).toPromise()}const aU=800,lU=3;class IC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await up(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>lU)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return SC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=of._getInstance(iU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await tU(),!this.activeServiceWorker)return;this.sender=new Zk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await up();return await g0(e,Vd,"1"),await y0(e,Vd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>g0(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>oU(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>y0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=af(o,!1).getAll();return new pu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IC.type="LOCAL";const uU=IC;new hu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cU(n,e){return e?cs(e):(xe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig extends pC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ha(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ha(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ha(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function dU(n){return Jk(n.auth,new ig(n),n.bypassAuthState)}function fU(n){const{auth:e,user:t}=n;return xe(t,e,"internal-error"),Yk(t,new ig(n),n.bypassAuthState)}async function hU(n){const{auth:e,user:t}=n;return xe(t,e,"internal-error"),Gk(t,new ig(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dU;case"linkViaPopup":case"linkViaRedirect":return hU;case"reauthViaPopup":case"reauthViaRedirect":return fU;default:ys(this.auth,"internal-error")}}resolve(e){_s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mU=new hu(2e3,1e4);class ra extends bC{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,ra.currentPopupAction&&ra.currentPopupAction.cancel(),ra.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){_s(this.filter.length===1,"Popup operations only handle one event");const e=ng();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(qi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(qi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ra.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mU.get())};e()}}ra.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU="pendingRedirect",ud=new Map;class gU extends bC{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=ud.get(this.auth._key());if(!e){try{const s=await yU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}ud.set(this.auth._key(),e)}return this.bypassAuthState||ud.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yU(n,e){const t=TU(e),s=vU(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function _U(n,e){ud.set(n._key(),e)}function vU(n){return cs(n._redirectPersistence)}function TU(n){return ld(pU,n.config.apiKey,n.name)}async function EU(n,e,t=!1){if(ki(n.app))return Promise.reject(Wr(n));const s=eg(n),o=cU(s,e),c=await new gU(s,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU=600*1e3;class AU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!CU(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!xC(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(qi(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=SU&&this.cachedEventUids.clear(),this.cachedEventUids.has(_0(e))}saveEventToCache(e){this.cachedEventUids.add(_0(e)),this.lastProcessedEventTime=Date.now()}}function _0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function xC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function CU(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IU(n,e={}){return Da(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xU=/^https?/;async function wU(n){if(n.config.emulator)return;const{authorizedDomains:e}=await IU(n);for(const t of e)try{if(RU(t))return}catch{}ys(n,"unauthorized-domain")}function RU(n){const e=ap(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!xU.test(t))return!1;if(bU.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU=new hu(3e4,6e4);function v0(){const n=Bi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function MU(n){return new Promise((e,t)=>{var o,l,c;function s(){v0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{v0(),t(qi(n,"network-request-failed"))},timeout:NU.get()})}if((l=(o=Bi().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Bi().gapi)!=null&&c.load)s();else{const d=Lk("iframefcb");return Bi()[d]=()=>{gapi.load?s():t(qi(n,"network-request-failed"))},kk(`${Uk()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw cd=null,e})}let cd=null;function DU(n){return cd=cd||MU(n),cd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PU=new hu(5e3,15e3),VU="__/auth/iframe",kU="emulator/auth/iframe",UU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function OU(n){const e=n.config;xe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Qp(e,kU):`https://${n.config.authDomain}/${VU}`,s={apiKey:e.apiKey,appName:n.name,v:ba},o=LU.get(n.config.apiHost);o&&(s.eid=o);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${ou(s).slice(1)}`}async function qU(n){const e=await DU(n),t=Bi().gapi;return xe(t,n,"internal-error"),e.open({where:document.body,url:OU(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UU,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const c=qi(n,"network-request-failed"),d=Bi().setTimeout(()=>{l(c)},PU.get());function p(){Bi().clearTimeout(d),o(s)}s.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FU=500,zU=600,HU="_blank",GU="http://localhost";class T0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YU(n,e,t,s=FU,o=zU){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const p={...BU,width:s.toString(),height:o.toString(),top:l,left:c},m=ln().toLowerCase();t&&(d=aC(m)?HU:t),rC(m)&&(e=e||GU,p.scrollbars="yes");const v=Object.entries(p).reduce((A,[x,U])=>`${A}${x}=${U},`,"");if(xk(m)&&d!=="_self")return JU(e||"",d),new T0(null);const E=window.open(e||"",d,v);xe(E,n,"popup-blocked");try{E.focus()}catch{}return new T0(E)}function JU(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KU="__/auth/handler",jU="emulator/auth/handler",$U=encodeURIComponent("fac");async function E0(n,e,t,s,o,l){xe(n.config.authDomain,n,"auth-domain-config-required"),xe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:ba,eventId:o};if(e instanceof gC){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",kM(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof mu){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await n._getAppCheckToken(),m=p?`#${$U}=${encodeURIComponent(p)}`:"";return`${QU(n)}?${ou(d).slice(1)}${m}`}function QU({config:n}){return n.emulator?Qp(n,jU):`https://${n.authDomain}/${KU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="webStorageSupport";class XU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=EC,this._completeRedirectFn=EU,this._overrideRedirectResult=_U}async _openPopup(e,t,s,o){var c;_s((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await E0(e,t,s,ap(),o);return YU(e,l,ng())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await E0(e,t,s,ap(),o);return eU(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(_s(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await qU(e),s=new AU(e);return t.register("authEvent",o=>(xe(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Im,{type:Im},o=>{var c;const l=(c=o==null?void 0:o[0])==null?void 0:c[Im];l!==void 0&&t(!!l),ys(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=wU(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return fC()||oC()||Zp()}}const WU=XU;var S0="@firebase/auth",A0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tL(n){ma(new to("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=s.options;xe(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hC(n)},m=new Pk(s,o,l,p);return qk(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),ma(new to("auth-internal",e=>{const t=eg(e.getProvider("auth").getImmediate());return(s=>new ZU(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ur(S0,A0,eL(n)),ur(S0,A0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL=300,iL=oS("authIdTokenMaxAge")||nL;let C0=null;const sL=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>iL)return;const o=t==null?void 0:t.token;C0!==o&&(C0=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function rL(n=fS()){const e=vp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Ok(n,{popupRedirectResolver:WU,persistence:[uU,Xk,EC]}),s=oS("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=sL(l.toString());jk(t,c,()=>c(t.currentUser)),Kk(t,d=>c(d))}}const o=sS("auth");return o&&Bk(t,`http://${o}`),t}function oL(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}Vk({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const l=qi("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",oL().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tL("Browser");let bm=null,ls=null,aL=null;const lL=()=>{try{return ua().hasFirebase?(bm=dS(vt.firebase),ls=BA(bm),aL=rL(bm),console.log("🔥 تم تهيئة Firebase بنجاح"),{success:!0}):(console.warn("⚠️ تحذير: مفاتيح Firebase API غير متوفرة. لن يتم تهيئة Firebase."),{success:!1,error:"مفاتيح Firebase غير متوفرة"})}catch(n){return console.error("❌ خطأ في تهيئة Firebase:",n),{success:!1,error:n instanceof Error?n.message:"خطأ غير معروف"}}};lL();const uL={async saveData(n,e,t){if(!ls)return{success:!1,error:"Firebase غير مهيأ"};try{const{doc:s,setDoc:o}=await Yc(async()=>{const{doc:c,setDoc:d}=await Promise.resolve().then(()=>Xc);return{doc:c,setDoc:d}},void 0),l=s(ls,n,e);return await o(l,{...t,lastUpdated:new Date().toISOString()}),{success:!0,id:e}}catch(s){return console.error("خطأ في حفظ البيانات:",s),{success:!1,error:s instanceof Error?s.message:"خطأ غير معروف"}}},async getData(n,e){if(!ls)return{success:!1,error:"Firebase غير مهيأ"};try{const{doc:t,getDoc:s}=await Yc(async()=>{const{doc:c,getDoc:d}=await Promise.resolve().then(()=>Xc);return{doc:c,getDoc:d}},void 0),o=t(ls,n,e),l=await s(o);return l.exists()?{success:!0,data:l.data()}:{success:!1,error:"المستند غير موجود"}}catch(t){return console.error("خطأ في جلب البيانات:",t),{success:!1,error:t instanceof Error?t.message:"خطأ غير معروف"}}},async getAllDocuments(n){if(!ls)return{success:!1,error:"Firebase غير مهيأ"};try{const{collection:e,getDocs:t}=await Yc(async()=>{const{collection:l,getDocs:c}=await Promise.resolve().then(()=>Xc);return{collection:l,getDocs:c}},void 0),s=await t(e(ls,n)),o=[];return s.forEach(l=>{o.push({id:l.id,...l.data()})}),{success:!0,data:o}}catch(e){return console.error("خطأ في جلب المستندات:",e),{success:!1,error:e instanceof Error?e.message:"خطأ غير معروف"}}},async deleteDocument(n,e){if(!ls)return{success:!1,error:"Firebase غير مهيأ"};try{const{doc:t,deleteDoc:s}=await Yc(async()=>{const{doc:l,deleteDoc:c}=await Promise.resolve().then(()=>Xc);return{doc:l,deleteDoc:c}},void 0),o=t(ls,n,e);return await s(o),{success:!0}}catch(t){return console.error("خطأ في حذف المستند:",t),{success:!1,error:t instanceof Error?t.message:"خطأ غير معروف"}}},async syncLocalDataToFirebase(n,e){try{return await this.saveData("users",n,{financialData:e,syncTimestamp:new Date().toISOString()})}catch(t){return console.error("خطأ في مزامنة البيانات:",t),{success:!1,error:t instanceof Error?t.message:"خطأ غير معروف"}}},async getDataFromFirebase(n){var e;try{const t=await this.getData("users",n);return t.success&&((e=t.data)!=null&&e.financialData)?{success:!0,data:t.data.financialData}:{success:!1,error:"لا توجد بيانات محفوظة"}}catch(t){return console.error("خطأ في جلب البيانات من Firebase:",t),{success:!1,error:t instanceof Error?t.message:"خطأ غير معروف"}}}},wC=()=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),T.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),sg=()=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:[T.jsx("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),T.jsx("path",{fillRule:"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"})]}),cL=({className:n})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-6 w-6 ${n}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),dL=({className:n})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-6 w-6 ${n}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),fL=({className:n})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-6 w-6 ${n}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h7"})}),hL=({className:n})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-6 w-6 ${n}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h.01M12 12h.01M19 12h.01M5 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"})}),mL=({className:n})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-8 w-8 ${n}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),rg=({className:n})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),xm=({className:n})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),wm=({className:n})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),pL=({className:n})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})}),gL=({selectedYear:n,selectedMonth:e,onYearChange:t,onMonthChange:s,onAddTransaction:o})=>{const l=_e.useMemo(()=>{const d=new Date().getFullYear(),p=[];for(let m=d+1;m>=2020;m--)p.push(m);return p},[]),c=_e.useMemo(()=>[{value:"all",label:"كل الشهور"},{value:1,label:"يناير"},{value:2,label:"فبراير"},{value:3,label:"مارس"},{value:4,label:"أبريل"},{value:5,label:"مايو"},{value:6,label:"يونيو"},{value:7,label:"يوليو"},{value:8,label:"أغسطس"},{value:9,label:"سبتمبر"},{value:10,label:"أكتوبر"},{value:11,label:"نوفمبر"},{value:12,label:"ديسمبر"}],[]);return T.jsx("header",{className:"bg-slate-50/80 backdrop-blur-lg sticky top-0 z-50 border-b border-slate-200 py-3",children:T.jsx("div",{className:"container mx-auto px-4",children:T.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center text-center sm:text-right gap-4",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center text-xl",children:"💰"}),T.jsxs("div",{children:[T.jsx("h1",{className:"text-xl font-bold text-slate-900 tracking-wide",children:"لوحة التحكم المالية"}),T.jsx("p",{className:"text-xs text-slate-500",children:"Developed by K.A Team"})]})]}),T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsxs("div",{className:"flex items-center gap-2 bg-slate-200 p-1.5 rounded-lg",children:[T.jsx("select",{value:n,onChange:d=>t(parseInt(d.target.value)),className:"bg-slate-200 text-slate-800 font-semibold border-0 focus:ring-0 appearance-none p-2 rounded-md",children:l.map(d=>T.jsx("option",{value:d,children:d},d))}),T.jsx("select",{value:e,onChange:d=>s(d.target.value==="all"?"all":parseInt(d.target.value)),className:"bg-slate-200 text-slate-800 font-semibold border-0 focus:ring-0 appearance-none p-2 rounded-md",children:c.map(d=>T.jsx("option",{value:d.value,children:d.label},d.value))})]}),T.jsxs("button",{onClick:o,className:"hidden md:flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-2.5 rounded-lg transition-all duration-300",children:[T.jsx(mL,{className:"w-5 h-5"}),T.jsx("span",{children:"إضافة حركة"})]})]})]})})})},Rm=[{id:"summary",label:"📊 الملخص",icon:cL},{id:"analysis",label:"📈 التحليل",icon:dL},{id:"transactions",label:"💳 الحركات",icon:fL},{id:"budget",label:"✨ الميزانية"},{id:"investment",label:"💹 الاستثمار"},{id:"ai-assistant",label:"🤖 المحلل الذكي"},{id:"cards",label:"💳 إدارة البطاقات"},{id:"bank",label:"🏦 البنك"},{id:"installments",label:"📱 الأقساط"},{id:"settings",label:"⚙️ الإعدادات"}],I0=["summary","analysis","transactions"],yL=({activeTab:n,setActiveTab:e})=>{const[t,s]=_e.useState(!1),o=d=>{e(d),s(!1)},l=Rm.filter(d=>I0.includes(d.id)),c=Rm.filter(d=>!I0.includes(d.id));return T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"hidden md:flex flex-wrap justify-center mb-8 tab-bar rounded-xl p-2",children:Rm.map(d=>T.jsx("button",{onClick:()=>o(d.id),className:`tab-btn px-4 py-2 mx-1 mb-1 rounded-lg font-semibold text-sm flex items-center gap-2 ${n===d.id?"active":""}`,children:d.label},d.id))}),T.jsxs("div",{className:"md:hidden fixed bottom-0 left-0 right-0 h-20 bg-white/80 backdrop-blur-lg border-t border-slate-200 z-40 flex justify-around items-center",children:[l.map(d=>{const p=d.icon;return T.jsxs("button",{onClick:()=>o(d.id),className:`flex flex-col items-center justify-center gap-1 transition-colors w-full h-full ${n===d.id?"text-blue-600":"text-slate-500 hover:text-slate-900"}`,children:[p&&T.jsx(p,{}),T.jsx("span",{className:"text-xs",children:d.label.split(" ")[1]})]},d.id)}),T.jsxs("button",{onClick:()=>s(!t),className:`flex flex-col items-center justify-center gap-1 transition-colors w-full h-full ${t?"text-blue-600":"text-slate-500 hover:text-slate-900"}`,children:[T.jsx(hL,{}),T.jsx("span",{className:"text-xs",children:"المزيد"})]})]}),t&&T.jsx("div",{className:"md:hidden fixed inset-0 bg-gray-900/50 backdrop-blur-sm z-50 flex justify-center items-end",onClick:()=>s(!1),children:T.jsxs("div",{className:"bg-white w-full rounded-t-2xl p-4 border-t border-slate-200 animate-fade-in",onClick:d=>d.stopPropagation(),children:[T.jsx("div",{className:"w-16 h-1 bg-slate-300 rounded-full mx-auto mb-4"}),T.jsx("div",{className:"grid grid-cols-3 gap-4 text-center",children:c.map(d=>T.jsxs("button",{onClick:()=>o(d.id),className:`p-3 rounded-lg flex flex-col items-center gap-2 ${n===d.id?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:[T.jsx("span",{className:"text-2xl",children:d.label.split(" ")[0]}),T.jsx("span",{className:"text-xs font-semibold",children:d.label.split(" ")[1]})]},d.id))})]})})]})},_L=({className:n})=>T.jsx("div",{className:`absolute inset-0 -translate-x-full animate-[shimmer_2s_infinite] bg-gradient-to-r from-transparent via-slate-200/80 to-transparent ${n}`}),Nm=()=>T.jsxs("div",{className:"glass-card p-6 h-96 relative overflow-hidden",children:[T.jsx("div",{className:"h-6 w-1/2 bg-slate-200 rounded mb-6"}),T.jsxs("div",{className:"space-y-4",children:[T.jsx("div",{className:"h-4 w-full bg-slate-200 rounded"}),T.jsx("div",{className:"h-4 w-5/6 bg-slate-200 rounded"}),T.jsx("div",{className:"h-4 w-full bg-slate-200 rounded"}),T.jsx("div",{className:"h-4 w-3/4 bg-slate-200 rounded"})]}),T.jsx(_L,{})]}),vL=()=>T.jsxs("div",{className:"container mx-auto px-2 sm:px-4 max-w-7xl mt-8 mb-20",children:[T.jsx("div",{className:"h-16 mb-3"}),T.jsx("div",{className:"flex flex-wrap justify-center mb-8 bg-slate-100 rounded-xl p-2 h-14"}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-fade-in",children:[T.jsx(Nm,{}),T.jsx(Nm,{}),T.jsx(Nm,{})]})]}),fn=n=>(n||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),TL=({title:n,details:e,barColor:t})=>T.jsxs("div",{className:"bg-slate-100 p-4 rounded-lg",children:[T.jsx("h4",{className:"font-bold text-md text-slate-800",children:n}),T.jsxs("div",{className:"flex justify-between text-sm mt-2",children:[T.jsx("span",{className:"text-slate-500",children:"المستحق:"}),T.jsxs("span",{className:"font-bold number-display text-slate-800",children:[fn(e.balance)," ريال"]})]}),T.jsxs("div",{className:"flex justify-between text-sm",children:[T.jsx("span",{className:"text-slate-500",children:"المتبقي:"}),T.jsxs("span",{className:"font-bold number-display text-emerald-500",children:[fn(e.available)," ريال"]})]}),T.jsx("div",{className:"mt-3 bg-slate-200 rounded-full h-2",children:T.jsx("div",{className:`${t} rounded-full h-2`,style:{width:`${Math.min(100,e.usagePercentage)}%`}})})]}),EL=({calculations:n,categories:e})=>{const t=Object.values(n.expensesByCategory).reduce((o,l)=>o+Number(l),0);if(t===0)return T.jsx("p",{className:"text-slate-500 text-center p-4 text-sm",children:"لا توجد مصاريف في هذه الفترة."});const s=Object.entries(n.expensesByCategory).sort(([,o],[,l])=>l-o);return T.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto pr-2",children:s.map(([o,l])=>{const c=e.find(m=>m.id===o),d=c?`${c.icon} ${c.name}`:"غير مصنف",p=Number(l)/t*100;return T.jsxs("div",{className:"flex items-center justify-between text-sm py-1",children:[T.jsx("span",{className:"w-28 truncate text-slate-600",title:c==null?void 0:c.name,children:d}),T.jsx("div",{className:"flex-1 bg-slate-200 rounded-full h-2.5 mx-2",children:T.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${p.toFixed(1)}%`}})}),T.jsxs("span",{className:"font-bold text-slate-800 number-display w-24 text-left",children:[fn(l)," ريال"]})]},o)})})},SL=({calculations:n,categories:e})=>{const{totalIncome:t,totalExpenses:s,cardDetails:o,cardPayments:l,bankAccountDetails:c,totalDebt:d,totalAvailable:p,totalLimits:m,totalBankBalance:v}=n,E=t-s,A=["bg-blue-500","bg-red-500","bg-green-500","bg-purple-500","bg-yellow-500"];return T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 animate-fade-in",children:[T.jsxs("div",{className:"glass-card p-6 xl:col-span-1",children:[T.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"💳 ملخص ديون البطاقات"}),T.jsx("div",{className:"space-y-4",children:Object.values(o).map((x,U)=>T.jsx(TL,{title:x.name,details:x,barColor:A[U%A.length]},x.id))}),T.jsx("div",{className:"mt-4 p-3 bg-slate-100 rounded-lg",children:T.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[T.jsxs("div",{children:[T.jsx("p",{className:"text-slate-500 text-xs",children:"إجمالي الديون"}),T.jsx("p",{className:"text-lg font-bold text-red-500 number-display",children:fn(d)})]}),T.jsxs("div",{children:[T.jsx("p",{className:"text-slate-500 text-xs",children:"إجمالي المتاح"}),T.jsx("p",{className:"text-lg font-bold text-emerald-500 number-display",children:fn(p)})]}),T.jsxs("div",{children:[T.jsx("p",{className:"text-slate-500 text-xs",children:"إجمالي الحدود"}),T.jsx("p",{className:"text-lg font-bold text-sky-500 number-display",children:fn(m)})]})]})})]}),T.jsxs("div",{className:"glass-card p-6 xl:col-span-1",children:[T.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"🏦 ملخص الحسابات البنكية"}),T.jsx("div",{className:"space-y-3",children:Object.values(c).map(x=>T.jsxs("div",{className:"bg-slate-100 p-3 rounded-lg",children:[T.jsx("p",{className:"font-bold text-slate-800",children:x.name}),T.jsx("p",{className:"font-bold text-xl text-blue-600 number-display",children:fn(x.balance)}),T.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[T.jsxs("span",{className:"text-emerald-500",children:["+",fn(x.deposits)]}),T.jsxs("span",{className:"text-red-500",children:["-",fn(x.withdrawals)]})]})]},x.id))}),T.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg text-center",children:[T.jsx("p",{className:"text-slate-500 text-sm",children:"إجمالي الأرصدة البنكية"}),T.jsx("p",{className:"text-2xl font-bold text-blue-800 number-display",children:fn(v)})]})]}),T.jsxs("div",{className:"glass-card p-6 xl:col-span-1",children:[T.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"📈 تقرير مالي شامل"}),T.jsxs("div",{className:"space-y-2 text-sm",children:[T.jsxs("div",{className:"flex justify-between",children:[T.jsx("span",{children:"إجمالي الدخل:"}),T.jsx("span",{className:"font-bold text-emerald-500 number-display",children:fn(t)})]}),T.jsxs("div",{className:"flex justify-between",children:[T.jsx("span",{children:"إجمالي المصاريف:"}),T.jsx("span",{className:"font-bold text-red-500 number-display",children:fn(s)})]}),T.jsx("hr",{className:"my-2 border-slate-200"}),Object.values(o).map((x,U)=>T.jsxs("div",{className:"flex justify-between text-xs",children:[T.jsxs("span",{className:"text-slate-500",children:["مصاريف ",x.name,":"]}),T.jsx("span",{className:`font-semibold ${A[U%A.length].replace("bg-","text-")} number-display`,children:fn(x.balance+(l[x.id]||0))})]},x.id)),T.jsx("hr",{className:"my-2 border-slate-200 border-dashed"}),Object.entries(l).map(([x,U])=>{var B;return T.jsxs("div",{className:"flex justify-between text-xs",children:[T.jsxs("span",{className:"text-slate-500",children:["إجمالي سداد ",(B=o[x])==null?void 0:B.name,":"]}),T.jsx("span",{className:"font-semibold text-emerald-500 number-display",children:fn(U)})]},x)}),T.jsx("hr",{className:"my-2 border-slate-200"}),T.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[T.jsx("span",{children:"الصافي:"}),T.jsx("span",{className:`number-display ${E>=0?"text-emerald-500":"text-red-500"}`,children:fn(E)})]})]})]}),T.jsxs("div",{className:"glass-card p-6 xl:col-span-1",children:[T.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"📊 ملخص الفئات"}),T.jsx(EL,{calculations:n,categories:e})]})]})},Zc=n=>(n||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),AL=({transactions:n,allTransactions:e,categories:t,deleteTransaction:s,editTransaction:o,state:l})=>{const[c,d]=_e.useState(""),[p,m]=_e.useState(""),[v,E]=_e.useState(""),[A,x]=_e.useState(""),[U,B]=_e.useState(""),z=F=>{const ne={cash:"💵 نقدي","tabby-bnpl":"📱 تابي (BNPL)","tamara-bnpl":"📱 تمارا (BNPL)"};return ne[F]?ne[F]:l.cards[F]?`💳 ${l.cards[F].name}`:l.bankAccounts[F]?`🏦 ${l.bankAccounts[F].name}`:F},ee=F=>{const ne={income:"💰 دخل",expense:"💸 مصاريف","bnpl-payment":"📱 سداد قسط","investment-deposit":"💹 إيداع استثماري","investment-withdrawal":"💹 سحب استثماري"};if(ne[F])return ne[F];if(F.endsWith("-payment")){const oe=F.replace("-payment","");if(l.cards[oe])return`💳 سداد ${l.cards[oe].name}`}return F},te=_e.useMemo(()=>{let F=n;if(A&&U){const ne=new Date(A),oe=new Date(U);oe.setHours(23,59,59,999),F=e.filter(R=>{const M=new Date(R.date);return M>=ne&&M<=oe})}return F.filter(ne=>{const oe=c.toLowerCase(),R=t.find(L=>L.id===ne.categoryId),M=ne.description.toLowerCase().includes(oe)||(R==null?void 0:R.name.toLowerCase().includes(oe)),N=!p||ne.paymentMethod===p,k=!v||ne.categoryId===v;return M&&N&&k}).sort((ne,oe)=>new Date(oe.date).getTime()-new Date(ne.date).getTime())},[n,e,c,p,v,A,U,t]),$=_e.useMemo(()=>te.reduce((F,ne)=>(ne.type==="income"||ne.type.toString().includes("payment")||ne.type==="investment-withdrawal"?F.positive+=ne.amount:F.negative+=ne.amount,F),{positive:0,negative:0}),[te]);return T.jsx("div",{className:"space-y-6 animate-fade-in",children:T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-lg sm:text-xl font-bold text-slate-900 mb-4",children:"📋 سجل المعاملات والتقارير"}),T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 items-end p-4 bg-slate-100 rounded-lg mb-6",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"dateFrom",className:"block text-sm font-medium text-slate-600 mb-1",children:"من تاريخ"}),T.jsx("input",{type:"date",id:"dateFrom",value:A,onChange:F=>x(F.target.value),className:"w-full p-2"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"dateTo",className:"block text-sm font-medium text-slate-600 mb-1",children:"إلى تاريخ"}),T.jsx("input",{type:"date",id:"dateTo",value:U,onChange:F=>B(F.target.value),className:"w-full p-2"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"filterMethod",className:"block text-sm font-medium text-slate-600 mb-1",children:"وسيلة الدفع"}),T.jsxs("select",{id:"filterMethod",value:p,onChange:F=>m(F.target.value),className:"p-2 w-full",children:[T.jsx("option",{value:"",children:"كل الوسائل"}),Object.values(l.bankAccounts).map(F=>T.jsxs("option",{value:F.id,children:["🏦 ",F.name]},F.id)),T.jsx("option",{value:"cash",children:"💵 نقدي"}),Object.values(l.cards).map(F=>T.jsxs("option",{value:F.id,children:["💳 ",F.name]},F.id)),T.jsx("option",{value:"tabby-bnpl",children:"📱 تابي"}),T.jsx("option",{value:"tamara-bnpl",children:"📱 تمارا"})]})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"filterCategory",className:"block text-sm font-medium text-slate-600 mb-1",children:"الفئة"}),T.jsxs("select",{id:"filterCategory",value:v,onChange:F=>E(F.target.value),className:"p-2 w-full",children:[T.jsx("option",{value:"",children:"كل الفئات"}),t.map(F=>T.jsx("option",{value:F.id,children:F.name},F.id))]})]}),T.jsxs("div",{className:"sm:col-span-2 lg:col-span-4",children:[T.jsx("label",{htmlFor:"searchTerm",className:"block text-sm font-medium text-slate-600 mb-1",children:"بحث بالوصف"}),T.jsx("input",{type:"text",id:"searchTerm",placeholder:"🔍...",value:c,onChange:F=>d(F.target.value),className:"p-2 w-full"})]})]}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center mb-4",children:[T.jsxs("div",{className:"bg-emerald-50 p-3 rounded-lg",children:[T.jsx("p",{className:"text-sm text-emerald-700",children:"إجمالي الإيجابي"}),T.jsx("p",{className:"font-bold text-xl text-emerald-600 number-display",children:Zc($.positive)})]}),T.jsxs("div",{className:"bg-red-50 p-3 rounded-lg",children:[T.jsx("p",{className:"text-sm text-red-700",children:"إجمالي السلبي"}),T.jsx("p",{className:"font-bold text-xl text-red-600 number-display",children:Zc($.negative)})]}),T.jsxs("div",{className:"bg-sky-50 p-3 rounded-lg",children:[T.jsx("p",{className:"text-sm text-sky-700",children:"الصافي"}),T.jsx("p",{className:"font-bold text-xl text-sky-600 number-display",children:Zc($.positive-$.negative)})]})]}),T.jsxs("div",{className:"overflow-x-auto",children:[T.jsxs("table",{className:"w-full text-sm",children:[T.jsx("thead",{className:"border-b border-gray-200",children:T.jsxs("tr",{children:[T.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:"التاريخ"}),T.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:"الوسيلة"}),T.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:"النوع"}),T.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:"المبلغ"}),T.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:"الفئة"}),T.jsx("th",{className:"text-right py-3 px-4 font-semibold hidden sm:table-cell",children:"الوصف"}),T.jsx("th",{className:"text-center py-3 px-4 font-semibold"})]})}),T.jsx("tbody",{children:te.map(F=>{const ne=t.find(R=>R.id===F.categoryId),oe=F.type==="income"||F.type.toString().includes("payment")||F.type==="investment-withdrawal";return T.jsxs("tr",{className:"border-b border-gray-200/50 hover:bg-gray-50",children:[T.jsx("td",{className:"p-3",children:F.date}),T.jsx("td",{className:"p-3",children:z(F.paymentMethod)}),T.jsx("td",{className:"p-3",children:ee(F.type)}),T.jsxs("td",{className:`p-3 font-semibold number-display ${oe?"text-emerald-500":"text-red-500"}`,children:[oe?"+":"-"," ",Zc(F.amount)]}),T.jsx("td",{className:"p-3",children:ne?`${ne.icon} ${ne.name}`:"غير محدد"}),T.jsx("td",{className:"p-3 text-slate-500 hidden sm:table-cell",children:F.description||"-"}),T.jsx("td",{className:"p-3 text-center",children:T.jsx("button",{onClick:()=>s(F.id),className:"text-slate-400 hover:text-red-500 p-1",children:T.jsx(sg,{})})})]},F.id)})})]}),te.length===0&&T.jsxs("div",{className:"text-center p-8 text-slate-500",children:[T.jsx("p",{children:"لا توجد معاملات تطابق الفلاتر المحددة."}),T.jsx("p",{className:"text-xs mt-1",children:"جرب توسيع النطاق الزمني أو تعديل الفلاتر الأخرى."})]})]})]})})},CL=()=>T.jsxs("div",{className:"ai-bubble chat-bubble typing-indicator flex items-center space-x-1 p-3 self-start",children:[T.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.3s]"}),T.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.15s]"}),T.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse"})]}),IL=({calculations:n,filteredTransactions:e})=>{const[t,s]=_e.useState([{id:"1",text:'أهلاً بك! أنا مساعدك المالي الشامل. يمكنك أن تسألني أسئلة تفصيلية عن وضعك المالي، مثل "ما هو إجمالي ديوني؟" أو "هل إنفاقي هذا الشهر يتوافق مع أهدافي؟"',sender:"ai"}]),[o,l]=_e.useState(""),[c,d]=_e.useState(!1),p=_e.useRef(null);_e.useEffect(()=>{var v;(v=p.current)==null||v.scrollTo(0,p.current.scrollHeight)},[t,c]);const m=async v=>{v.preventDefault();const E=o.trim();if(!E||c)return;const A={id:Date.now().toString(),text:E,sender:"user"};s(x=>[...x,A]),l(""),d(!0);try{const U=await sM(E,{periodSummary:n,transactions:e}),B={id:(Date.now()+1).toString(),text:U,sender:"ai"};s(z=>[...z,B])}catch(x){const U={id:(Date.now()+1).toString(),text:x instanceof Error?x.message:"عذراً، حدث خطأ ما. يرجى المحاولة مرة أخرى.",sender:"ai"};s(B=>[...B,U])}finally{d(!1)}};return T.jsxs("div",{className:"glass-card overflow-hidden flex flex-col",style:{height:"70vh"},children:[T.jsxs("div",{className:"p-4 bg-gray-100 text-center flex-shrink-0",children:[T.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"🤖 المحلل المالي الذكي"}),T.jsx("p",{className:"text-sm text-slate-500",children:"اسأل أي شيء عن بياناتك المالية للشهر المحدد"})]}),T.jsxs("div",{ref:p,className:"p-4 flex-grow overflow-y-auto flex flex-col gap-4",children:[t.map(v=>T.jsx("div",{className:`chat-bubble ${v.sender==="user"?"user-bubble":"ai-bubble"}`,children:T.jsx("p",{dangerouslySetInnerHTML:{__html:v.text.replace(/\n/g,"<br />")}})},v.id)),c&&T.jsx(CL,{})]}),T.jsx("div",{className:"p-4 border-t border-gray-200 flex-shrink-0",children:T.jsxs("form",{onSubmit:m,className:"flex gap-2",children:[T.jsx("input",{type:"text",value:o,onChange:v=>l(v.target.value),className:"w-full p-3",placeholder:"اكتب سؤالك هنا...",required:!0,autoComplete:"off",disabled:c}),T.jsx("button",{type:"submit",disabled:c,className:"p-3 magical-button text-white rounded-lg flex-shrink-0 disabled:opacity-50",children:T.jsx(wC,{})})]})})]})},bL=({calculations:n,categories:e,allTransactions:t})=>{const s=_e.useRef(null),o=_e.useRef(null),l=_e.useRef({}),c=_e.useMemo(()=>Object.entries(n.expensesByCategory).map(([p,m])=>{const v=e.find(E=>E.id===p);return{name:v?`${v.icon} ${v.name}`:"غير محدد",value:m}}).sort((p,m)=>m.value-p.value),[n.expensesByCategory,e]),d=_e.useMemo(()=>{const p={},m=new Date;for(let v=5;v>=0;v--){const A=new Date(m.getFullYear(),m.getMonth()-v,1).toLocaleString("ar-SA",{month:"short",year:"numeric"});p[A]={income:0,expenses:0}}return t.forEach(v=>{const A=new Date(v.date).toLocaleString("ar-SA",{month:"short",year:"numeric"});p[A]&&(v.type==="income"&&(p[A].income+=v.amount),(v.type==="expense"||v.type==="bnpl-payment")&&(p[A].expenses+=v.amount))}),{labels:Object.keys(p),incomeData:Object.values(p).map(v=>v.income),expensesData:Object.values(p).map(v=>v.expenses)}},[t]);return _e.useEffect(()=>{var m,v;const p=window.Chart;if(p){if((m=l.current.pie)==null||m.destroy(),(v=l.current.bar)==null||v.destroy(),s.current&&c.length>0){const E=s.current.getContext("2d");E&&(l.current.pie=new p(E,{type:"doughnut",data:{labels:c.map(A=>A.name),datasets:[{data:c.map(A=>A.value),backgroundColor:["#3b82f6","#60a5fa","#93c5fd","#bfdbfe","#d1d5db","#9ca3af","#6b7280"],borderColor:"#ffffff",borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{color:"#475569",font:{family:"Cairo"}}}}}}))}if(o.current&&d.labels.length>0){const E=o.current.getContext("2d");E&&(l.current.bar=new p(E,{type:"bar",data:{labels:d.labels,datasets:[{label:"الدخل",data:d.incomeData,backgroundColor:"#10b981",borderRadius:4},{label:"المصاريف",data:d.expensesData,backgroundColor:"#ef4444",borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{ticks:{color:"#64748b"},grid:{color:"#e2e8f0"}},x:{ticks:{color:"#64748b"},grid:{display:!1}}},plugins:{legend:{labels:{color:"#475569",font:{family:"Cairo"}}}}}}))}return()=>{var E,A;(E=l.current.pie)==null||E.destroy(),(A=l.current.bar)==null||A.destroy()}}},[c,d]),T.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 animate-fade-in",children:[T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-900",children:"📊 توزيع مصاريف الفترة"}),T.jsx("div",{className:"h-80",children:c.length>0?T.jsx("canvas",{ref:s}):T.jsx("p",{className:"text-center text-slate-500 mt-10",children:"لا توجد مصاريف لعرضها."})})]}),T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-900",children:"📈 الدخل مقابل المصاريف (آخر 6 أشهر)"}),T.jsx("div",{className:"h-80",children:T.jsx("canvas",{ref:o})})]})]})},xL=({state:n,setLoading:e,setModal:t})=>{const[s,o]=_e.useState(""),[l,c]=_e.useState(""),d=async()=>{const p=parseFloat(s);if(isNaN(p)||p<=0){t({title:"خطأ",body:"<p>الرجاء إدخال مبلغ ميزانية صحيح.</p>",confirmText:"موافق",hideCancel:!0});return}e(!0,"جاري إنشاء خطة الميزانية..."),c("");try{const m=new Date;m.setDate(m.getDate()-60);const v=n.transactions.filter(A=>new Date(A.date)>=m&&A.type==="expense");if(v.length<5)throw new Error("لا توجد بيانات كافية عن إنفاقك لإنشاء خطة دقيقة. يرجى إضافة 5 معاملات على الأقل.");const E=await aM(p,n.categories,v);c(E)}catch(m){const v=m instanceof Error?m.message:"حدث خطأ غير متوقع.";t({title:"خطأ في إنشاء الميزانية",body:`<p>${v}</p>`,confirmText:"موافق",hideCancel:!0})}finally{e(!1)}};return T.jsxs("div",{className:"glass-card p-6 animate-fade-in",children:[T.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-900",children:"✨ الميزانية الشهرية الذكية"}),T.jsxs("div",{className:"flex flex-col sm:flex-row items-end gap-4 mb-6 p-4 bg-slate-100 rounded-lg",children:[T.jsxs("div",{className:"flex-grow",children:[T.jsx("label",{htmlFor:"monthly-budget-input",className:"block text-sm font-medium text-slate-600 mb-1",children:"أدخل إجمالي ميزانيتك الشهرية (ريال)"}),T.jsx("input",{type:"number",id:"monthly-budget-input",className:"w-full p-2",placeholder:"5000",value:s,onChange:p=>o(p.target.value)})]}),T.jsx("button",{onClick:d,className:"w-full sm:w-auto px-6 py-2 magical-button text-white rounded-lg font-semibold flex-shrink-0",children:"✨ إنشاء خطة الميزانية"})]}),T.jsx("div",{className:"prose max-w-none",children:l?T.jsx("div",{dangerouslySetInnerHTML:{__html:l.replace(/### (.*)/g,'<h4 class="text-lg font-bold text-slate-900 mt-3 mb-2">$1</h4>').replace(/\n/g,"<br />")}}):T.jsx("p",{className:"text-center text-slate-500",children:"أدخل ميزانيتك أعلاه للحصول على خطة مخصصة بناءً على إنفاقك."})})]})},wL=({state:n,setState:e,calculations:t,setModal:s})=>{const[o,l]=_e.useState([{id:"1",text:'أهلاً بك! أنا مرشدك لفهم عالم الاستثمار. يمكنك سؤالي عن استراتيجيات، أو مفاهيم مثل "ما هو الاستثمار طويل الأجل؟". تذكر، أنا لا أقدم نصائح مباشرة لشراء أسهم معينة.',sender:"ai"}]),[c,d]=_e.useState(""),[p,m]=_e.useState(!1),v=_e.useRef(null);_e.useEffect(()=>{var U;(U=v.current)==null||U.scrollTo(0,v.current.scrollHeight)},[o,p]);const E=U=>{U.preventDefault();const B=U.target,z=parseFloat(B.elements.namedItem("investment-amount").value),ee=B.elements.namedItem("investment-type").value,te=B.elements.namedItem("payment-method").value;if(isNaN(z)||z<=0){s({title:"خطأ",body:"<p>الرجاء إدخال مبلغ صحيح.</p>"});return}const $={amount:z,date:new Date().toISOString().split("T")[0],description:ee==="deposit"?"إيداع في المحفظة الاستثمارية":"سحب من المحفظة الاستثمارية",paymentMethod:te,type:ee==="deposit"?"investment-deposit":"investment-withdrawal",categoryId:null};e(F=>({...F,transactions:[...F.transactions,{...$,id:`trans-${Date.now()}`}]})),B.reset()},A=async U=>{U.preventDefault();const B=c.trim();if(!(!B||p)){l(z=>[...z,{id:Date.now().toString(),text:B,sender:"user"}]),d(""),m(!0);try{const z=await oM(B);l(ee=>[...ee,{id:(Date.now()+1).toString(),text:z,sender:"ai"}])}catch(z){l(ee=>[...ee,{id:(Date.now()+1).toString(),text:z instanceof Error?z.message:"عذراً، حدث خطأ.",sender:"ai"}])}finally{m(!1)}}},x=()=>{const U=`<div><label class="block text-sm font-medium text-slate-600 mb-1">القيمة الحالية للمحفظة (ريال)</label><input type="number" id="edit-investment-value" class="w-full p-2" value="${n.investments.currentValue}"><p class="text-xs text-slate-500 mt-2">أدخل القيمة السوقية الحالية لجميع استثماراتك.</p></div>`;s({show:!0,title:"تحديث قيمة المحفظة",body:U,confirmText:"حفظ",onConfirm:()=>{const B=parseFloat(document.getElementById("edit-investment-value").value);if(isNaN(B)||B<0)return alert("الرجاء إدخال قيمة صحيحة."),!1;e(z=>({...z,investments:{...z.investments,currentValue:B}}))}})};return T.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 animate-fade-in",children:[T.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[T.jsxs("div",{className:"glass-card p-6 text-center",children:[T.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"💰 القيمة الحالية للمحفظة"}),T.jsx("p",{className:"text-4xl font-bold text-emerald-500 number-display",children:b0(n.investments.currentValue)}),T.jsxs("p",{className:"text-sm text-slate-500 mt-2",children:["إجمالي المستثمر: ",T.jsx("span",{className:"font-semibold number-display text-slate-600",children:b0(t.totalInvestmentDeposits)})]}),T.jsx("button",{onClick:x,className:"mt-4 w-full px-4 py-2 bg-slate-200 text-slate-800 rounded-lg hover:bg-slate-300 transition-colors text-sm",children:"✏️ تحديث القيمة الحالية"})]}),T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"💸 إضافة حركة استثمارية"}),T.jsxs("form",{onSubmit:E,className:"space-y-4",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"investment-amount",className:"block text-sm font-medium text-slate-600",children:"المبلغ"}),T.jsx("input",{type:"number",id:"investment-amount",name:"investment-amount",className:"mt-1 w-full p-2",required:!0})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"investment-type",className:"block text-sm font-medium text-slate-600",children:"نوع الحركة"}),T.jsxs("select",{id:"investment-type",name:"investment-type",className:"mt-1 w-full p-2",children:[T.jsx("option",{value:"deposit",children:"إيداع للمحفظة"}),T.jsx("option",{value:"withdrawal",children:"سحب من المحفظة"})]})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"payment-method",className:"block text-sm font-medium text-slate-600",children:"الحساب البنكي"}),T.jsx("select",{id:"payment-method",name:"payment-method",className:"mt-1 w-full p-2",children:Object.values(n.bankAccounts).map(U=>T.jsxs("option",{value:U.id,children:["🏦 ",U.name]},U.id))})]}),T.jsx("button",{type:"submit",className:"w-full magical-button text-white font-semibold py-2 rounded-lg",children:"تنفيذ الحركة"})]})]})]}),T.jsxs("div",{className:"lg:col-span-2 glass-card overflow-hidden flex flex-col",style:{height:"75vh"},children:[T.jsxs("div",{className:"p-4 bg-gray-100 text-center flex-shrink-0",children:[T.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"🤖 مستشارك الاستثماري الذكي"}),T.jsx("p",{className:"text-sm text-slate-500",children:"اسأل عن المفاهيم والاستراتيجيات لاتخاذ قرارات أفضل"})]}),T.jsxs("div",{ref:v,className:"p-4 flex-grow overflow-y-auto flex flex-col gap-4",children:[o.map(U=>T.jsx("div",{className:`chat-bubble ${U.sender==="user"?"user-bubble":"ai-bubble"}`,dangerouslySetInnerHTML:{__html:U.text.replace(/\n/g,"<br/>")}},U.id)),p&&T.jsxs("div",{className:"ai-bubble chat-bubble typing-indicator flex items-center space-x-1 p-3 self-start",children:[T.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.3s]"}),T.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.15s]"}),T.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse"})]})]}),T.jsx("div",{className:"p-4 border-t border-gray-200 flex-shrink-0",children:T.jsxs("form",{onSubmit:A,className:"flex gap-2",children:[T.jsx("input",{type:"text",value:c,onChange:U=>d(U.target.value),className:"w-full p-3",placeholder:"اسأل عن الاستثمار...",required:!0,autoComplete:"off",disabled:p}),T.jsx("button",{type:"submit",className:"p-3 magical-button text-white rounded-lg flex-shrink-0",disabled:p,children:T.jsx(wC,{})})]})})]})]})},b0=n=>(n||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),ed=n=>(n||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),RL=({card:n,statementDetails:e,openCardFormModal:t,deleteCard:s})=>{const o=l=>!l||l.length===0?'<tr><td colspan="3" class="text-center text-slate-500 py-3">لا توجد حركات</td></tr>':l.map(c=>`
            <tr class="hover:bg-slate-50">
                <td class="p-2">${c.postingDate||c.date}</td>
                <td class="p-2 truncate" title="${c.description}">${c.description}</td>
                <td class="p-2 number-display text-red-500">${ed(c.amount)}</td>
            </tr>
        `).join("");return T.jsxs("div",{className:"glass-card p-6 flex flex-col",children:[T.jsxs("div",{className:"flex items-start justify-between mb-4",children:[T.jsxs("h3",{className:"text-xl font-bold text-slate-900",children:["💳 ",n.name]}),T.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[T.jsx("button",{onClick:()=>t(n.id),className:"text-sm bg-slate-100 hover:bg-slate-200 w-8 h-8 rounded-full flex items-center justify-center transition-colors","aria-label":`تعديل بطاقة ${n.name}`,children:"✏️"}),T.jsx("button",{onClick:()=>s(n.id),className:"text-sm bg-red-100 hover:bg-red-200 w-8 h-8 rounded-full flex items-center justify-center transition-colors","aria-label":`حذف بطاقة ${n.name}`,children:T.jsx(sg,{})})]})]}),T.jsxs("div",{className:"space-y-3",children:[T.jsxs("div",{className:"bg-slate-100 p-3 rounded-lg",children:[T.jsxs("div",{className:"flex justify-between items-center",children:[T.jsx("span",{className:"text-slate-500 text-sm",children:"المبلغ المستحق للكشف الحالي"}),T.jsxs("span",{className:"font-bold text-2xl text-amber-500 number-display",children:[ed(e.statementDueAmount)," ريال"]})]}),T.jsxs("div",{className:"flex justify-between items-center text-xs mt-1",children:[T.jsx("span",{className:"text-slate-400",children:"تاريخ الاستحقاق:"}),T.jsx("span",{className:"font-semibold text-slate-600",children:e.dueDate.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})})]})]}),T.jsxs("div",{className:"flex justify-between text-sm",children:[T.jsx("span",{children:"الرصيد الإجمالي المستحق:"}),T.jsxs("span",{className:"font-bold number-display",children:[ed(n.balance)," ريال"]})]}),T.jsxs("div",{className:"flex justify-between text-sm",children:[T.jsx("span",{children:"الحد الائتماني:"}),T.jsxs("span",{className:"font-bold number-display",children:[ed(n.limit)," ريال"]})]})]}),T.jsxs("div",{className:"mt-4 flex-grow flex flex-col",children:[T.jsxs("h4",{className:"font-semibold text-slate-600 mb-2 border-b border-slate-200 pb-1",children:["المعاملات القادمة (",e.upcomingTransactions.length,")"]}),T.jsx("div",{className:"flex-grow max-h-32 overflow-y-auto",children:T.jsx("table",{className:"w-full text-xs",dangerouslySetInnerHTML:{__html:`<tbody>${o(e.upcomingTransactions)}</tbody>`}})})]})]})},NL=({state:n,openCardFormModal:e,deleteCard:t})=>{const s=_e.useMemo(()=>{const l={};return Object.values(n.cards).forEach(c=>{const d=new Date,p=d.getDate(),m=d.getMonth(),v=d.getFullYear();let E,A,x;p>c.statementDay?E=new Date(v,m,c.statementDay):E=new Date(v,m-1,c.statementDay),A=new Date(E.getFullYear(),E.getMonth()-1,c.statementDay+1);let U=E.getMonth()+1,B=E.getFullYear();U>11&&(U=0,B+=1),x=new Date(B,U,c.dueDay);const z=n.transactions.filter($=>{const F=new Date($.postingDate||$.date);return $.paymentMethod===c.id&&($.type==="expense"||$.type==="bnpl-payment")&&F>=A&&F<=E}),ee=n.transactions.filter($=>{const F=new Date($.postingDate||$.date);return $.paymentMethod===c.id&&($.type==="expense"||$.type==="bnpl-payment")&&F>E}),te=z.reduce(($,F)=>$+F.amount,0);l[c.id]={statementDueAmount:te,dueDate:x,totalOutstanding:0,upcomingTransactions:ee}}),l},[n.transactions,n.cards]),o=Object.values(n.cards);return T.jsxs("div",{className:"space-y-6 animate-fade-in",children:[T.jsxs("div",{className:"flex justify-between items-center",children:[T.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"إدارة البطاقات"}),T.jsx("button",{onClick:()=>e(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:"+ إضافة بطاقة"})]}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:o.map(l=>{const c=n.transactions.filter(p=>p.paymentMethod===l.id&&(p.type==="expense"||p.type==="bnpl-payment")).reduce((p,m)=>p+m.amount,0)-n.transactions.filter(p=>p.type===`${l.id}-payment`).reduce((p,m)=>p+m.amount,0),d={...l,balance:c,available:l.limit-c,usagePercentage:l.limit>0?c/l.limit*100:0};return T.jsx(RL,{card:d,statementDetails:s[d.id],openCardFormModal:e,deleteCard:t},d.id)})})]})},dd=n=>(n||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),ML=(n,e)=>{const t={income:"💰 دخل",expense:"💸 مصاريف","bnpl-payment":"📱 سداد قسط","investment-deposit":"💹 إيداع استثماري","investment-withdrawal":"💹 سحب استثماري"};if(t[n])return t[n];if(n.endsWith("-payment")){const s=n.replace("-payment","");if(e.cards[s])return`💳 سداد ${e.cards[s].name}`}return n},DL=({account:n,openBankAccountFormModal:e,deleteBankAccount:t})=>T.jsxs("div",{className:"glass-card p-6",children:[T.jsxs("div",{className:"flex justify-between items-start mb-4",children:[T.jsxs("h4",{className:"text-xl font-bold text-slate-900",children:["🏦 ",n.name]}),T.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[T.jsx("button",{onClick:()=>e(n.id),className:"text-sm bg-slate-100 hover:bg-slate-200 w-8 h-8 rounded-full flex items-center justify-center transition-colors","aria-label":`تعديل حساب ${n.name}`,children:"✏️"}),T.jsx("button",{onClick:()=>t(n.id),className:"text-sm bg-red-100 hover:bg-red-200 w-8 h-8 rounded-full flex items-center justify-center transition-colors","aria-label":`حذف حساب ${n.name}`,children:T.jsx(sg,{})})]})]}),T.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg border border-blue-200",children:[T.jsx("p",{className:"text-blue-600 font-semibold",children:"الرصيد الحالي"}),T.jsx("p",{className:"text-3xl font-bold text-blue-800 number-display",children:dd(n.balance)})]}),T.jsxs("div",{className:"flex justify-between mt-4",children:[T.jsxs("div",{className:"text-center",children:[T.jsx("p",{className:"text-emerald-600 font-semibold",children:"إيداعات الفترة"}),T.jsx("p",{className:"text-lg font-bold text-emerald-800 number-display",children:dd(n.deposits)})]}),T.jsxs("div",{className:"text-center",children:[T.jsx("p",{className:"text-red-600 font-semibold",children:"سحوبات الفترة"}),T.jsx("p",{className:"text-lg font-bold text-red-800 number-display",children:dd(n.withdrawals)})]})]})]}),PL=({state:n,setState:e,calculations:t,filteredTransactions:s,categories:o,setModal:l,openBankAccountFormModal:c,deleteBankAccount:d})=>T.jsxs("div",{className:"space-y-6 animate-fade-in",children:[T.jsxs("div",{className:"flex justify-between items-center",children:[T.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"إدارة الحسابات البنكية"}),T.jsx("button",{onClick:()=>c(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:"+ إضافة حساب"})]}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.values(t.bankAccountDetails).map(p=>T.jsx(DL,{account:p,openBankAccountFormModal:c,deleteBankAccount:d},p.id))}),T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-900",children:"📋 معاملات الحسابات البنكية (الفترة المحددة)"}),T.jsx("div",{className:"overflow-x-auto",children:T.jsxs("table",{className:"w-full text-sm",children:[T.jsx("thead",{className:"border-b border-gray-200",children:T.jsxs("tr",{children:[T.jsx("th",{className:"text-right p-3 font-semibold",children:"التاريخ"}),T.jsx("th",{className:"text-right p-3 font-semibold",children:"الحساب"}),T.jsx("th",{className:"text-right p-3 font-semibold",children:"النوع"}),T.jsx("th",{className:"text-right p-3 font-semibold",children:"المبلغ"}),T.jsx("th",{className:"text-right p-3 font-semibold",children:"الفئة"}),T.jsx("th",{className:"text-right p-3 font-semibold",children:"الوصف"})]})}),T.jsx("tbody",{children:s.filter(p=>n.bankAccounts[p.paymentMethod]).sort((p,m)=>new Date(m.date).getTime()-new Date(p.date).getTime()).map(p=>{var A;const m=["income","investment-withdrawal"].includes(p.type),v=m?"text-emerald-500":"text-red-500",E=o.find(x=>x.id===p.categoryId);return T.jsxs("tr",{className:"border-b border-gray-200/50",children:[T.jsx("td",{className:"p-3",children:p.date}),T.jsx("td",{className:"p-3",children:(A=n.bankAccounts[p.paymentMethod])==null?void 0:A.name}),T.jsx("td",{className:"p-3",children:ML(p.type,n)}),T.jsxs("td",{className:`p-3 font-semibold ${v} number-display`,children:[m?"+":"-",dd(p.amount)]}),T.jsx("td",{className:"p-3",children:E?`${E.icon} ${E.name}`:"-"}),T.jsx("td",{className:"p-3 text-slate-500",children:p.description||"-"})]},p.id)})})]})})]})]}),Mm=n=>(n||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),x0=(n,e)=>{const t={cash:"💵 نقدي","tabby-bnpl":"📱 تابي","tamara-bnpl":"📱 تمارا",reconciliation:"🔄 تسوية"};return t[n]?t[n]:e.cards[n]?`💳 ${e.cards[n].name}`:e.bankAccounts[n]?`🏦 ${e.bankAccounts[n].name}`:n},VL=({state:n,setState:e,filteredTransactions:t,setModal:s})=>{const o=d=>{const p=n.installments.find(E=>E.id===d);if(!p||p.paid>=p.total)return;let m="";Object.values(n.bankAccounts).forEach(E=>{m+=`<option value="${E.id}">🏦 ${E.name}</option>`}),m+='<option value="cash">💵 نقدي</option>',Object.values(n.cards).forEach(E=>{m+=`<option value="${E.id}">💳 ${E.name}</option>`});const v=`<p class="mb-4">اختر مصدر الدفع لسداد قسط "${p.description}" بقيمة ${Mm(p.installmentAmount)} ريال.</p><div><label for="installment-payment-source" class="block text-sm font-medium text-slate-600 mb-2">مصدر الدفع</label><select id="installment-payment-source" class="w-full p-3">${m}</select></div>`;s({show:!0,title:"سداد قسط",body:v,confirmText:"تأكيد الدفع",onConfirm:()=>{var B;const E=document.getElementById("installment-payment-source").value,A=n.categories.find(z=>z.name==="سداد فواتير"||z.name==="💳 سداد فواتير"),x=(A==null?void 0:A.id)||((B=n.categories.find(z=>z.name==="أخرى"))==null?void 0:B.id)||"",U={id:"trans-"+Date.now(),amount:p.installmentAmount,date:new Date().toISOString().split("T")[0],description:`سداد القسط ${p.paid+1} لـ: ${p.description}`,paymentMethod:E,type:"bnpl-payment",categoryId:x,isInstallmentPayment:!0,installmentId:d};e(z=>{const ee=z.installments.map(te=>te.id===d?{...te,paid:te.paid+1}:te);return{...z,transactions:[...z.transactions,U],installments:ee}})}})},l=n.installments.filter(d=>d.paid<d.total),c=n.transactions.filter(d=>d.isInstallmentPayment);return T.jsxs("div",{className:"animate-fade-in",children:[T.jsx("h3",{className:"text-2xl font-bold mb-4 text-slate-900",children:"📱 خطط الأقساط النشطة"}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:l.length>0?l.map(d=>{const p=d.paid/d.total*100;return T.jsxs("div",{className:"glass-card p-4",children:[T.jsxs("div",{className:"flex justify-between items-start mb-2",children:[T.jsxs("div",{children:[T.jsx("h4",{className:"font-bold text-slate-900",children:d.description}),T.jsx("p",{className:"text-sm text-slate-500",children:x0(d.provider,n)})]}),T.jsxs("span",{className:"font-bold text-blue-600 number-display",children:[Mm(d.installmentAmount),"/شهر"]})]}),T.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5 mb-1",children:T.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${p}%`}})}),T.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[T.jsxs("span",{children:[d.paid," / ",d.total," مدفوع"]}),T.jsxs("span",{children:["متبقي: ",d.total-d.paid]})]}),T.jsx("div",{className:"text-center mt-4",children:T.jsx("button",{onClick:()=>o(d.id),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm w-full sm:w-auto",children:"دفع القسط التالي"})})]},d.id)}):T.jsx("div",{className:"md:col-span-2 text-center p-6 glass-card",children:T.jsx("p",{className:"text-slate-500",children:"🎉 لا توجد أقساط نشطة حاليًا!"})})}),T.jsxs("div",{className:"glass-card p-6 mt-8",children:[T.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-900",children:"📋 سجل دفعات الأقساط"}),T.jsx("div",{className:"overflow-x-auto",children:T.jsxs("table",{className:"w-full text-sm",children:[T.jsx("thead",{className:"border-b border-gray-200",children:T.jsxs("tr",{children:[T.jsx("th",{className:"text-right p-3 font-semibold",children:"التاريخ"}),T.jsx("th",{className:"text-right p-3 font-semibold",children:"الوصف"}),T.jsx("th",{className:"text-right p-3 font-semibold",children:"المصدر"}),T.jsx("th",{className:"text-right p-3 font-semibold",children:"المبلغ"})]})}),T.jsx("tbody",{children:c.sort((d,p)=>new Date(p.date).getTime()-new Date(d.date).getTime()).map(d=>T.jsxs("tr",{className:"border-b border-gray-200/50",children:[T.jsx("td",{className:"p-3",children:d.date}),T.jsx("td",{className:"p-3 text-slate-600",children:d.description}),T.jsx("td",{className:"p-3",children:x0(d.paymentMethod,n)}),T.jsx("td",{className:"p-3 text-red-500 font-semibold number-display",children:Mm(d.amount)})]},d.id))})]})})]})]})},kL=({state:n,setState:e,setModal:t,setLoading:s,onRestore:o})=>{const[l,c]=_e.useState(ua()),[d,p]=_e.useState({connected:!1}),[m,v]=_e.useState(!0),[E,A]=_e.useState({firebase:l.hasFirebase,gemini:l.hasGemini});_e.useEffect(()=>{const R=ua();c(R),A({firebase:R.hasFirebase,gemini:R.hasGemini}),R.hasFirebase?(async()=>{try{v(!0);const N=await uL.getData("test","connection");p({connected:!0})}catch(N){p({connected:!1,error:N instanceof Error?N.message:"خطأ في الاتصال"})}finally{v(!1)}})():(p({connected:!1,error:"مفاتيح Firebase غير متوفرة"}),v(!1))},[]);const x=({isValid:R})=>R?T.jsx(xm,{className:"w-6 h-6 text-green-500"}):T.jsx(wm,{className:"w-6 h-6 text-red-500"}),U=()=>T.jsx(pL,{className:"w-6 h-6 text-yellow-500"}),[B,z]=_e.useState({name:"",icon:""}),[ee,te]=_e.useState(null),$=()=>{if(!B.name.trim()||!B.icon.trim()){t({title:"خطأ",body:"<p>يرجى إدخال اسم وأيقونة للفئة.</p>",hideCancel:!0,confirmText:"موافق"});return}const M={id:`cat-${Date.now()}`,name:B.name.trim(),icon:B.icon.trim()};e(N=>({...N,categories:[...N.categories,M]})),z({name:"",icon:""}),t({title:"نجح",body:"<p>تم إضافة الفئة بنجاح.</p>",hideCancel:!0,confirmText:"موافق"})},F=R=>{n.transactions.some(M=>M.categoryId===R)?t({title:"لا يمكن الحذف",body:"<p>لا يمكن حذف هذه الفئة لأنها مستخدمة في بعض الحركات. يرجى تغيير فئة الحركات أولاً.</p>",hideCancel:!0,confirmText:"موافق"}):(e(M=>({...M,categories:M.categories.filter(N=>N.id!==R)})),t({title:"نجح",body:"<p>تم حذف الفئة بنجاح.</p>",hideCancel:!0,confirmText:"موافق"}))},ne=()=>{try{const R=JSON.stringify(n,null,2),M=new Blob([R],{type:"application/json"}),N=URL.createObjectURL(M),k=document.createElement("a");k.href=N,k.download=`masrof_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(N),t({title:"نجح",body:"<p>تم إنشاء النسخة الاحتياطية بنجاح.</p>",hideCancel:!0,confirmText:"موافق"})}catch{t({title:"خطأ",body:"<p>فشل إنشاء النسخة الاحتياطية.</p>",hideCancel:!0,confirmText:"موافق"})}},oe=R=>{var k;const M=(k=R.target.files)==null?void 0:k[0];if(!M)return;const N=new FileReader;N.onload=L=>{var q;try{const D=JSON.parse((q=L.target)==null?void 0:q.result);if(D!=null&&D.transactions&&(D!=null&&D.categories))o?o(D):t({show:!0,title:"استعادة نسخة احتياطية",body:"<p>هل أنت متأكد؟ سيتم الكتابة فوق جميع بياناتك الحالية.</p>",confirmText:"نعم، استعادة",onConfirm:()=>{const je={transactions:D.transactions||[],categories:D.categories||[],installments:D.installments||[],investments:D.investments||{currentValue:0},cards:D.cards||{},bankAccounts:D.bankAccounts||{}};e(je),t({title:"تم الاستعادة بنجاح",body:"<p>تم استعادة بياناتك بنجاح.</p>",confirmText:"موافق",hideCancel:!0})}});else throw new Error("Invalid backup file format.")}catch{t({show:!0,title:"خطأ",body:"<p>فشل في استعادة النسخة الاحتياطية. الملف غير صالح.</p>",confirmText:"موافق",hideCancel:!0})}},N.readAsText(M),R.target.value=""};return T.jsxs("div",{className:"space-y-6 animate-fade-in",children:[T.jsx("div",{className:"flex justify-between items-center",children:T.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"⚙️ إعدادات النظام"})}),T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"🔑 حالة مفاتيح API"}),T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"text-2xl",children:"🔥"}),T.jsxs("div",{children:[T.jsx("h4",{className:"font-semibold text-slate-800",children:"Firebase Configuration"}),T.jsxs("p",{className:"text-sm text-slate-600",children:["Project ID: ",vt.firebase.projectId]})]})]}),T.jsx("div",{className:"flex items-center gap-2",children:E.firebase?d.connected?T.jsxs(T.Fragment,{children:[T.jsx(xm,{className:"w-6 h-6 text-green-500"}),T.jsx("span",{className:"text-sm text-green-600",children:"متصل"})]}):T.jsxs(T.Fragment,{children:[T.jsx(U,{}),T.jsx("span",{className:"text-sm text-yellow-600",children:"مفاتيح موجودة لكن غير متصل"})]}):T.jsxs(T.Fragment,{children:[T.jsx(wm,{className:"w-6 h-6 text-red-500"}),T.jsx("span",{className:"text-sm text-red-600",children:"مفاتيح غير متوفرة"})]})})]}),T.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"text-2xl",children:"🤖"}),T.jsxs("div",{children:[T.jsx("h4",{className:"font-semibold text-slate-800",children:"Gemini AI API"}),T.jsxs("p",{className:"text-sm text-slate-600",children:["Model: ",vt.gemini.model]})]})]}),T.jsx("div",{className:"flex items-center gap-2",children:E.gemini?T.jsxs(T.Fragment,{children:[T.jsx(xm,{className:"w-6 h-6 text-green-500"}),T.jsx("span",{className:"text-sm text-green-600",children:"مُعد"})]}):T.jsxs(T.Fragment,{children:[T.jsx(wm,{className:"w-6 h-6 text-red-500"}),T.jsx("span",{className:"text-sm text-red-600",children:"غير مُعد"})]})})]})]}),!l.isValid&&T.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[T.jsx("h5",{className:"font-semibold text-red-800 mb-2",children:"⚠️ تحذيرات:"}),T.jsx("ul",{className:"space-y-1",children:l.errors.map((R,M)=>T.jsxs("li",{className:"text-sm text-red-600",children:["• ",R]},M))})]})]}),T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"📱 معلومات المشروع"}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[T.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[T.jsx("p",{className:"text-sm text-slate-600",children:"اسم التطبيق"}),T.jsx("p",{className:"font-semibold text-slate-800",children:vt.app.name})]}),T.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[T.jsx("p",{className:"text-sm text-slate-600",children:"الإصدار"}),T.jsx("p",{className:"font-semibold text-slate-800",children:vt.app.version})]}),T.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[T.jsx("p",{className:"text-sm text-slate-600",children:"البيئة"}),T.jsx("p",{className:"font-semibold text-slate-800",children:vt.app.environment})]}),T.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[T.jsx("p",{className:"text-sm text-slate-600",children:"حالة النظام"}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(x,{isValid:l.isValid&&d.connected}),T.jsx("span",{className:`text-sm font-semibold ${l.isValid&&d.connected?"text-green-600":"text-red-600"}`,children:l.isValid&&d.connected?"جاهز":"يحتاج إعداد"})]})]})]})]}),(!l.isValid||!d.connected)&&T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"📝 تعليمات الإعداد"}),T.jsxs("div",{className:"space-y-4",children:[!E.gemini&&T.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[T.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"🤖 إعداد Gemini API:"}),T.jsxs("ol",{className:"text-sm text-yellow-700 space-y-1 list-decimal list-inside",children:[T.jsxs("li",{children:["اذهب إلى ",T.jsx("a",{href:"https://makersuite.google.com/app/apikey",target:"_blank",className:"underline",children:"Google AI Studio"})]}),T.jsx("li",{children:"أنشئ مفتاح API جديد"}),T.jsxs("li",{children:["أضف المفتاح كـ GitHub Secret باسم ",T.jsx("code",{className:"bg-yellow-100 px-1 rounded",children:"VITE_GEMINI_API_KEY"})]}),T.jsxs("li",{children:["أو ضعه في ملف ",T.jsx("code",{className:"bg-yellow-100 px-1 rounded",children:".env.local"})," للتطوير المحلي"]})]})]}),!E.firebase&&T.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[T.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"🔥 إعداد Firebase:"}),T.jsxs("p",{className:"text-sm text-blue-700",children:["تأكد من إضافة جميع مفاتيح Firebase كـ GitHub Secrets:",T.jsx("br",{}),"• VITE_FIREBASE_API_KEY",T.jsx("br",{}),"• VITE_FIREBASE_AUTH_DOMAIN",T.jsx("br",{}),"• VITE_FIREBASE_PROJECT_ID",T.jsx("br",{}),"• VITE_FIREBASE_STORAGE_BUCKET",T.jsx("br",{}),"• VITE_FIREBASE_MESSAGING_SENDER_ID",T.jsx("br",{}),"• VITE_FIREBASE_APP_ID"]})]})]})]}),T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"📂 إدارة الفئات"}),T.jsxs("div",{className:"mb-6 p-4 bg-slate-50 rounded-lg",children:[T.jsx("h4",{className:"font-semibold text-slate-800 mb-3",children:"➕ إضافة فئة جديدة"}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[T.jsx("input",{type:"text",placeholder:"اسم الفئة",value:B.name,onChange:R=>z(M=>({...M,name:R.target.value})),className:"px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),T.jsx("input",{type:"text",placeholder:"الأيقونة (مثل: 🍔)",value:B.icon,onChange:R=>z(M=>({...M,icon:R.target.value})),className:"px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),T.jsx("button",{onClick:$,className:"mt-3 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"➕ إضافة الفئة"})]}),T.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:n.categories.map(R=>T.jsxs("div",{className:"p-3 bg-white border border-slate-200 rounded-lg flex items-center justify-between",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("span",{className:"text-lg",children:R.icon}),T.jsx("span",{className:"text-sm font-medium text-slate-800",children:R.name})]}),T.jsx("button",{onClick:()=>F(R.id),className:"text-red-500 hover:text-red-700 text-sm",title:"حذف الفئة",children:"🗑️"})]},R.id))})]}),T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"💾 النسخ الاحتياطي والاستعادة"}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[T.jsxs("div",{children:[T.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"📤 إنشاء نسخة احتياطية"}),T.jsx("p",{className:"text-slate-600 mb-3 text-sm",children:"احفظ جميع بياناتك في ملف آمن."}),T.jsx("button",{onClick:ne,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"💾 إنشاء نسخة احتياطية"})]}),T.jsxs("div",{children:[T.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"📥 استعادة البيانات"}),T.jsx("p",{className:"text-slate-600 mb-3 text-sm",children:"استعد بياناتك من ملف نسخة احتياطية."}),T.jsx("input",{type:"file",id:"backup-file",accept:".json",className:"hidden",onChange:oe}),T.jsx("button",{onClick:()=>{var R;return(R=document.getElementById("backup-file"))==null?void 0:R.click()},className:"w-full px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg transition-colors",children:"📥 استعادة البيانات"})]})]})]}),T.jsx("div",{className:"text-center",children:T.jsx("button",{onClick:()=>{c(ua()),window.location.reload()},disabled:m,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:m?"جاري التحقق...":"🔄 إعادة التحقق"})})]})},UL=({onClose:n,onSave:e,initialData:t,categories:s,cards:o,bankAccounts:l})=>{var $;const[c,d]=_e.useState({amount:0,date:new Date().toISOString().split("T")[0],description:"",paymentMethod:Object.keys(l)[0]||"cash",type:"expense",categoryId:(($=s.find(F=>F.name==="أخرى"))==null?void 0:$.id)||null}),[p,m]=_e.useState(!1),[v,E]=_e.useState(""),[A,x]=_e.useState({isOpen:!1,text:""});_e.useEffect(()=>{var F;t?d(t):(F=navigator.clipboard)!=null&&F.readText&&(async()=>{try{const ne=await navigator.clipboard.readText();ne&&ne.trim().length>10&&sessionStorage.getItem("ignoredClipboardText")!==ne&&x({isOpen:!0,text:ne})}catch{console.info("Clipboard read access denied or not supported.")}})()},[t]);const U=F=>{const{name:ne,value:oe}=F.target;d(R=>({...R,[ne]:ne==="amount"?parseFloat(oe):oe}))},B=F=>{F.preventDefault(),e(c,t==null?void 0:t.id)},z=async F=>{if(F.trim()){m(!0),E("");try{const ne=await rM(F,s,o,l),oe=JSON.parse(ne);oe.error?E(oe.error):d(R=>({...R,amount:oe.amount||R.amount,date:oe.date||R.date,description:oe.merchant||R.description,paymentMethod:oe.paymentMethod||R.paymentMethod,categoryId:oe.categoryId||R.categoryId}))}catch(ne){E(ne instanceof Error?ne.message:"فشل تحليل النص."),console.error(ne)}finally{m(!1)}}},ee=_e.useMemo(()=>{const F=[{value:"cash",label:"💵 نقدي"}];return Object.values(l).forEach(ne=>F.push({value:ne.id,label:`🏦 ${ne.name}`})),Object.values(o).forEach(ne=>F.push({value:ne.id,label:`💳 ${ne.name}`})),F.push({value:"tabby-bnpl",label:"📱 تابي"}),F.push({value:"tamara-bnpl",label:"📱 تمارا"}),F},[l,o]),te=_e.useMemo(()=>{const F=[{value:"expense",label:"💸 مصاريف"},{value:"income",label:"💰 دخل"},{value:"bnpl-payment",label:"📱 سداد قسط"},{value:"investment-deposit",label:"💹 إيداع استثماري"},{value:"investment-withdrawal",label:"💹 سحب استثماري"}];return Object.values(o).forEach(ne=>F.push({value:`${ne.id}-payment`,label:`💳 سداد ${ne.name}`})),F},[o]);return T.jsxs(T.Fragment,{children:[A.isOpen&&T.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] flex items-center justify-center p-4",onClick:()=>x({isOpen:!1,text:""}),children:T.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md animate-fade-in",onClick:F=>F.stopPropagation(),children:T.jsxs("div",{className:"p-6",children:[T.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"اكتشاف نص في الحافظة"}),T.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"وجدنا نصاً في حافظة النصوص. هل تود لصقه وتحليله لتعبئة الحقول تلقائياً؟"}),T.jsx("pre",{className:"bg-slate-100 p-3 rounded-md text-xs text-slate-500 max-h-24 overflow-y-auto whitespace-pre-wrap font-sans",children:A.text}),T.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[T.jsx("button",{onClick:()=>{sessionStorage.setItem("ignoredClipboardText",A.text),x({isOpen:!1,text:""})},className:"px-4 py-2 bg-slate-200 rounded-lg",children:"تجاهل"}),T.jsx("button",{onClick:()=>{x({isOpen:!1,text:""}),z(A.text)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"لصق وتحليل"})]})]})})}),T.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:n,children:T.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg animate-fade-in max-h-[90vh] overflow-y-auto",onClick:F=>F.stopPropagation(),children:T.jsxs("div",{className:"p-6",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:t?"تعديل الحركة":"إضافة حركة جديدة"}),T.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600",children:T.jsx(rg,{})})]}),p&&T.jsxs("div",{className:"text-center p-4 mb-4 bg-blue-50 rounded-lg",children:[T.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mx-auto"}),T.jsx("p",{className:"text-blue-600 mt-2 text-sm",children:"جاري التحليل..."})]}),v&&T.jsx("p",{className:"text-red-500 text-sm mb-4 bg-red-50 p-3 rounded-lg",children:v}),T.jsxs("form",{onSubmit:B,className:"space-y-4",children:[T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"amount",className:"form-label",children:"المبلغ"}),T.jsx("input",{type:"number",name:"amount",value:c.amount,onChange:U,className:"w-full",required:!0,step:"0.01"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"date",className:"form-label",children:"التاريخ"}),T.jsx("input",{type:"date",name:"date",value:c.date,onChange:U,className:"w-full",required:!0})]})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"description",className:"form-label",children:"الوصف"}),T.jsx("input",{type:"text",name:"description",value:c.description,onChange:U,className:"w-full",required:!0})]}),T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"type",className:"form-label",children:"نوع الحركة"}),T.jsx("select",{name:"type",value:c.type,onChange:U,className:"w-full",children:te.map(F=>T.jsx("option",{value:F.value,children:F.label},F.value))})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"paymentMethod",className:"form-label",children:"وسيلة الدفع"}),T.jsx("select",{name:"paymentMethod",value:c.paymentMethod,onChange:U,className:"w-full",children:ee.map(F=>T.jsx("option",{value:F.value,children:F.label},F.value))})]})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"categoryId",className:"form-label",children:"الفئة"}),T.jsxs("select",{name:"categoryId",value:c.categoryId||"",onChange:U,className:"w-full",children:[T.jsx("option",{value:"",children:"-- اختر فئة --"}),s.map(F=>T.jsxs("option",{value:F.id,children:[F.icon," ",F.name]},F.id))]})]}),T.jsx("button",{type:"submit",className:"w-full py-3 magical-button text-white font-semibold rounded-lg mt-6",children:t?"حفظ التعديلات":"إضافة الحركة"})]})]})})})]})},LL=({onClose:n,onSave:e,initialData:t})=>{var d;const[s,o]=_e.useState({name:"",limit:0,dueDay:15,statementDay:25,smsSamples:[]});_e.useEffect(()=>{t&&o(t)},[t]);const l=p=>{const{name:m,value:v,type:E}=p.target;o(m==="smsSamples"?A=>({...A,smsSamples:v.split(",").map(x=>x.trim()).filter(Boolean)}):A=>({...A,[m]:E==="number"?parseFloat(v)||0:v}))},c=p=>{p.preventDefault(),e(s,t==null?void 0:t.id)};return T.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:n,children:T.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg animate-fade-in",onClick:p=>p.stopPropagation(),children:T.jsxs("div",{className:"p-6",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:t?"تعديل البطاقة":"إضافة بطاقة جديدة"}),T.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600",children:T.jsx(rg,{})})]}),T.jsxs("form",{onSubmit:c,className:"space-y-4",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-600 mb-1",children:"اسم البطاقة"}),T.jsx("input",{type:"text",name:"name",value:s.name,onChange:l,className:"w-full p-2",required:!0})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"limit",className:"block text-sm font-medium text-slate-600 mb-1",children:"الحد الائتماني"}),T.jsx("input",{type:"number",name:"limit",value:s.limit,onChange:l,className:"w-full p-2",required:!0,step:"100"})]}),T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"statementDay",className:"block text-sm font-medium text-slate-600 mb-1",children:"يوم إصدار الكشف (شهرياً)"}),T.jsx("input",{type:"number",name:"statementDay",value:s.statementDay,onChange:l,className:"w-full p-2",required:!0,min:"1",max:"31"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"dueDay",className:"block text-sm font-medium text-slate-600 mb-1",children:"يوم الاستحقاق (شهرياً)"}),T.jsx("input",{type:"number",name:"dueDay",value:s.dueDay,onChange:l,className:"w-full p-2",required:!0,min:"1",max:"31"})]})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"smsSamples",className:"block text-sm font-medium text-slate-600 mb-1",children:"الكلمات المفتاحية للرسائل (افصل بفواصل)"}),T.jsx("input",{type:"text",name:"smsSamples",value:((d=s.smsSamples)==null?void 0:d.join(", "))||"",onChange:l,className:"w-full p-2",placeholder:"مثال: SNB, الأهلي, إئتمانية"}),T.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"كلمات فريدة من رسائل البنك للمساعدة في التعرف التلقائي عند لصق نص رسالة."})]}),T.jsx("button",{type:"submit",className:"w-full py-3 magical-button text-white font-semibold rounded-lg mt-6",children:t?"حفظ التعديلات":"إضافة البطاقة"})]})]})})})},OL=({onClose:n,onSave:e,initialData:t})=>{var d;const[s,o]=_e.useState({name:"",balance:0,smsSamples:[]});_e.useEffect(()=>{t&&o(t)},[t]);const l=p=>{const{name:m,value:v,type:E}=p.target;o(m==="smsSamples"?A=>({...A,smsSamples:v.split(",").map(x=>x.trim()).filter(Boolean)}):A=>({...A,[m]:E==="number"?parseFloat(v)||0:v}))},c=p=>{p.preventDefault(),e(s,t==null?void 0:t.id)};return T.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:n,children:T.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg animate-fade-in",onClick:p=>p.stopPropagation(),children:T.jsxs("div",{className:"p-6",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:t?"تعديل الحساب":"إضافة حساب بنكي"}),T.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600",children:T.jsx(rg,{})})]}),T.jsxs("form",{onSubmit:c,className:"space-y-4",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-600 mb-1",children:"اسم الحساب"}),T.jsx("input",{type:"text",name:"name",value:s.name,onChange:l,className:"w-full p-2",required:!0})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"balance",className:"block text-sm font-medium text-slate-600 mb-1",children:"الرصيد الافتتاحي"}),T.jsx("input",{type:"number",name:"balance",value:s.balance,onChange:l,className:"w-full p-2",required:!0,step:"10"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"smsSamples",className:"block text-sm font-medium text-slate-600 mb-1",children:"الكلمات المفتاحية للرسائل (افصل بفواصل)"}),T.jsx("input",{type:"text",name:"smsSamples",value:((d=s.smsSamples)==null?void 0:d.join(", "))||"",onChange:l,className:"w-full p-2",placeholder:"مثال: Alrajhi, الراجحي, مدى"}),T.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"كلمات فريدة من رسائل البنك للمساعدة في التعرف التلقائي عند لصق نص رسالة."})]}),T.jsx("button",{type:"submit",className:"w-full py-3 magical-button text-white font-semibold rounded-lg mt-6",children:t?"حفظ التعديلات":"إضافة الحساب"})]})]})})})},qL=()=>{const[n,e]=_e.useState(!1),[t,s]=_e.useState(Uv),[o,l]=_e.useState(new Date().getFullYear()),[c,d]=_e.useState(new Date().getMonth()+1),[p,m]=_e.useState("summary"),[v,E]=_e.useState({isLoading:!1,text:""}),[A,x]=_e.useState(null),[U,B]=_e.useState({isOpen:!1}),[z,ee]=_e.useState({isOpen:!1}),[te,$]=_e.useState({isOpen:!1});_e.useEffect(()=>{try{const ae=localStorage.getItem("financial_dashboard_state");if(ae){const fe=JSON.parse(ae),he=Uv(),P={...he,...fe,cards:{...he.cards,...fe.cards||{}},bankAccounts:{...he.bankAccounts,...fe.bankAccounts||{}},investments:{...he.investments,...fe.investments||{}}};s(P)}}catch(ae){console.error("Failed to load state from localStorage",ae)}finally{e(!0)}iM()},[]),_e.useEffect(()=>{n&&localStorage.setItem("financial_dashboard_state",JSON.stringify(t))},[t,n]);const F=(ae,fe="")=>E({isLoading:ae,text:fe}),ne=_e.useCallback(()=>t.transactions?t.transactions.filter(ae=>{const fe=new Date(ae.date),he=fe.getFullYear()===o,P=c==="all"||fe.getMonth()+1===c;return he&&P}):[],[t.transactions,o,c]),oe=_e.useMemo(()=>ne(),[ne]),R=_e.useMemo(()=>{const ae={},fe={},he={},P={};Object.values(t.cards).forEach(Ee=>{he[Ee.id]={...Ee,balance:0,available:Ee.limit,usagePercentage:0}}),Object.values(t.bankAccounts).forEach(Ee=>{P[Ee.id]={...Ee,deposits:0,withdrawals:0}});let W=0,de=0,me=0,Ie=0;oe.forEach(Ee=>{if(Ee.type==="income")W+=Ee.amount;else if(Ee.type==="expense"||Ee.type==="bnpl-payment")de+=Ee.amount,Ee.categoryId&&(ae[Ee.categoryId]=(ae[Ee.categoryId]||0)+Ee.amount);else if(Ee.type==="investment-deposit")me+=Ee.amount,de+=Ee.amount;else if(Ee.type==="investment-withdrawal")Ie+=Ee.amount,W+=Ee.amount;else if(Ee.type.endsWith("-payment")){const Et=Ee.type.replace("-payment","");fe[Et]?fe[Et]+=Ee.amount:fe[Et]=Ee.amount}}),Object.keys(t.cards).forEach(Ee=>{const Et=t.transactions.filter(pt=>pt.paymentMethod===Ee&&(pt.type==="expense"||pt.type==="bnpl-payment")).reduce((pt,hn)=>pt+hn.amount,0),fi=t.transactions.filter(pt=>pt.type===`${Ee}-payment`).reduce((pt,hn)=>pt+hn.amount,0),Sn=Et-fi;he[Ee].balance=Sn,he[Ee].available=he[Ee].limit-Sn,he[Ee].usagePercentage=he[Ee].limit>0?Sn/he[Ee].limit*100:0}),Object.keys(t.bankAccounts).forEach(Ee=>{let fi=t.bankAccounts[Ee].balance,Sn=0,pt=0;oe.forEach(hn=>{hn.paymentMethod===Ee&&(["income","investment-withdrawal"].includes(hn.type)?Sn+=hn.amount:pt+=hn.amount)}),P[Ee].balance=fi,P[Ee].deposits=Sn,P[Ee].withdrawals=pt});const Me=Object.values(he).reduce((Ee,Et)=>Ee+Et.balance,0),Le=Object.values(he).reduce((Ee,Et)=>Ee+Et.available,0),Tt=Object.values(he).reduce((Ee,Et)=>Ee+Et.limit,0),ot=Object.values(P).reduce((Ee,Et)=>Ee+Et.balance,0);return{totalIncome:W,totalExpenses:de,cardDetails:he,cardPayments:fe,bankAccountDetails:P,totalDebt:Me,totalAvailable:Le,totalLimits:Tt,totalBankBalance:ot,totalInvestmentDeposits:me,totalInvestmentWithdrawals:Ie,expensesByCategory:ae}},[oe,t.transactions,t.cards,t.bankAccounts]),M=(ae,fe)=>{s(he=>{const P=fe?he.transactions.map(W=>W.id===fe?{...W,...ae}:W):[...he.transactions,{...ae,id:`trans-${Date.now()}`}];return{...he,transactions:P}}),B({isOpen:!1})},N=ae=>{x({title:"تأكيد الحذف",body:"<p>هل أنت متأكد من رغبتك في حذف هذه الحركة؟ لا يمكن التراجع عن هذا الإجراء.</p>",confirmText:"نعم, حذف",onConfirm:()=>{s(fe=>({...fe,transactions:fe.transactions.filter(he=>he.id!==ae)})),x(null)}})},k=(ae,fe)=>{s(he=>{const P={...he.cards};if(fe)P[fe]={...P[fe],...ae,id:fe};else{const W=`card-${Date.now()}`;P[W]={...ae,id:W}}return{...he,cards:P}}),ee({isOpen:!1})},L=ae=>{var fe;t.transactions.some(he=>he.paymentMethod===ae||he.type===`${ae}-payment`)?x({title:"لا يمكن الحذف",body:"<p>لا يمكن حذف هذه البطاقة لأنها مستخدمة في بعض الحركات. يرجى تعديل الحركات أولاً.</p>",hideCancel:!0,confirmText:"موافق"}):x({title:"تأكيد الحذف",body:`<p>هل أنت متأكد من رغبتك في حذف بطاقة "${(fe=t.cards[ae])==null?void 0:fe.name}"؟</p>`,confirmText:"نعم, حذف",onConfirm:()=>{s(he=>{const P={...he.cards};return delete P[ae],{...he,cards:P}}),x(null)}})},q=(ae,fe)=>{s(he=>{const P={...he.bankAccounts};if(fe)P[fe]={...P[fe],...ae,id:fe};else{const W=`bank-${Date.now()}`;P[W]={...ae,id:W}}return{...he,bankAccounts:P}}),$({isOpen:!1})},D=ae=>{var fe;t.transactions.some(he=>he.paymentMethod===ae)?x({title:"لا يمكن الحذف",body:"<p>لا يمكن حذف هذا الحساب لأنه مستخدم في بعض الحركات. يرجى تعديل الحركات أولاً.</p>",hideCancel:!0,confirmText:"موافق"}):x({title:"تأكيد الحذف",body:`<p>هل أنت متأكد من رغبتك في حذف حساب "${(fe=t.bankAccounts[ae])==null?void 0:fe.name}"؟</p>`,confirmText:"نعم, حذف",onConfirm:()=>{s(he=>{const P={...he.bankAccounts};return delete P[ae],{...he,bankAccounts:P}}),x(null)}})},je=ae=>{x({title:"استعادة نسخة احتياطية",body:"<p>هل أنت متأكد من استعادة هذه البيانات؟ سيتم استبدال جميع البيانات الحالية.</p>",confirmText:"استعادة",cancelText:"إلغاء",onConfirm:()=>{try{let fe=ae.cards||{};ae.creditCards&&!ae.cards&&(fe={},Object.entries(ae.creditCards).forEach(([P,W])=>{fe[P]={id:P,name:P.toUpperCase(),limit:W.creditLimit||0,balance:W.currentBalance||0,dueDay:W.dueDay||1,smsSamples:[],keywords:[]}}));const he={transactions:ae.transactions||[],categories:ae.categories||[],installments:ae.installments||[],investments:ae.investments||{currentValue:0},cards:fe,bankAccounts:ae.bankAccounts||{}};s(he),x({title:"تم الاستعادة بنجاح",body:"<p>تم استعادة بياناتك بنجاح.</p>",confirmText:"موافق",hideCancel:!0})}catch{x({title:"خطأ في الاستعادة",body:"<p>حدث خطأ أثناء استعادة البيانات. يرجى المحاولة مرة أخرى.</p>",confirmText:"موافق",hideCancel:!0})}}})},ft=ae=>ee({isOpen:!0,initialData:ae?t.cards[ae]:null}),X=ae=>$({isOpen:!0,initialData:ae?t.bankAccounts[ae]:null});if(!n)return T.jsx(vL,{});`${o}${c==="all"?"كل الشهور":new Date(o,c-1).toLocaleString("ar-SA",{month:"long"})}`;const ce=()=>{switch(p){case"summary":return T.jsx(SL,{calculations:R,categories:t.categories});case"transactions":return T.jsx(AL,{transactions:oe,allTransactions:t.transactions,categories:t.categories,deleteTransaction:N,editTransaction:()=>{},state:t});case"ai-assistant":return T.jsx(IL,{calculations:R,filteredTransactions:oe});case"analysis":return T.jsx(bL,{calculations:R,categories:t.categories,allTransactions:t.transactions});case"budget":return T.jsx(xL,{state:t,setLoading:F,setModal:x});case"investment":return T.jsx(wL,{state:t,setState:s,calculations:R,setModal:x});case"cards":return T.jsx(NL,{state:t,openCardFormModal:ft,deleteCard:L});case"bank":return T.jsx(PL,{state:t,setState:s,calculations:R,filteredTransactions:oe,categories:t.categories,setModal:x,openBankAccountFormModal:X,deleteBankAccount:D});case"installments":return T.jsx(VL,{state:t,setState:s,filteredTransactions:oe,setModal:x});case"settings":return T.jsx(kL,{state:t,setState:s,setModal:x,setLoading:F,onRestore:je});default:return T.jsx("div",{children:"Tab not found"})}};return T.jsxs("div",{className:"bg-slate-100 min-h-screen font-sans",children:[T.jsx(gL,{selectedYear:o,selectedMonth:c,onYearChange:l,onMonthChange:ae=>d(ae),onAddTransaction:()=>B({isOpen:!0})}),T.jsxs("main",{className:"container mx-auto px-2 sm:px-4 max-w-7xl mt-8 mb-20",children:[T.jsx(yL,{activeTab:p,setActiveTab:m}),ce()]}),T.jsx("button",{onClick:()=>B({isOpen:!0}),className:"md:hidden fixed bottom-24 right-4 bg-blue-600 text-white w-14 h-14 rounded-full shadow-lg flex items-center justify-center z-40 text-2xl",children:"+"}),U.isOpen&&T.jsx(UL,{onClose:()=>B({isOpen:!1}),onSave:M,initialData:U.initialData,categories:t.categories,cards:t.cards,bankAccounts:t.bankAccounts}),z.isOpen&&T.jsx(LL,{onClose:()=>ee({isOpen:!1}),onSave:k,initialData:z.initialData}),te.isOpen&&T.jsx(OL,{onClose:()=>$({isOpen:!1}),onSave:q,initialData:te.initialData}),A&&T.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center",onClick:()=>x(null),children:T.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-4 animate-fade-in",onClick:ae=>ae.stopPropagation(),children:[T.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:A.title}),T.jsx("div",{className:"text-slate-600",dangerouslySetInnerHTML:{__html:A.body}}),T.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[!A.hideCancel&&T.jsx("button",{onClick:()=>x(null),className:"px-4 py-2 bg-slate-200 rounded-lg",children:"إلغاء"}),T.jsx("button",{onClick:()=>{(!A.onConfirm||A.onConfirm()!==!1)&&x(null)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:A.confirmText||"موافق"})]})]})}),v.isLoading&&T.jsxs("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex flex-col items-center justify-center",children:[T.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"}),T.jsx("p",{className:"text-white mt-4",children:v.text||"جاري التحميل..."})]})]})},RC=document.getElementById("root");if(!RC)throw new Error("Could not find root element");const BL=yb.createRoot(RC);BL.render(T.jsx(ub.StrictMode,{children:T.jsx(qL,{})}));
