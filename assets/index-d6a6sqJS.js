(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function H0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var vm={exports:{}},jl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bv;function qb(){if(Bv)return jl;Bv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,l){var c=null;if(l!==void 0&&(c=""+l),o.key!==void 0&&(c=""+o.key),"key"in o){l={};for(var d in o)d!=="key"&&(l[d]=o[d])}else l=o;return o=l.ref,{$$typeof:n,type:s,key:c,ref:o!==void 0?o:null,props:l}}return jl.Fragment=e,jl.jsx=t,jl.jsxs=t,jl}var Fv;function Bb(){return Fv||(Fv=1,vm.exports=qb()),vm.exports}var T=Bb(),Tm={exports:{}},Me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hv;function Fb(){if(Hv)return Me;Hv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),A=Symbol.iterator;function x(q){return q===null||typeof q!="object"?null:(q=A&&q[A]||q["@@iterator"],typeof q=="function"?q:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,H={};function Z(q,ie,de){this.props=q,this.context=ie,this.refs=H,this.updater=de||U}Z.prototype.isReactComponent={},Z.prototype.setState=function(q,ie){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ie,"setState")},Z.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function ee(){}ee.prototype=Z.prototype;function $(q,ie,de){this.props=q,this.context=ie,this.refs=H,this.updater=de||U}var F=$.prototype=new ee;F.constructor=$,B(F,Z.prototype),F.isPureReactComponent=!0;var te=Array.isArray;function ae(){}var N={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function R(q,ie,de){var he=de.ref;return{$$typeof:n,type:q,key:ie,ref:he!==void 0?he:null,props:de}}function P(q,ie){return R(q.type,ie,q.props)}function V(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function L(q){var ie={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(de){return ie[de]})}var D=/\/+/g;function Oe(q,ie){return typeof q=="object"&&q!==null&&q.key!=null?L(""+q.key):ie.toString(36)}function Pe(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(ae,ae):(q.status="pending",q.then(function(ie){q.status==="pending"&&(q.status="fulfilled",q.value=ie)},function(ie){q.status==="pending"&&(q.status="rejected",q.reason=ie)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function X(q,ie,de,he,Re){var Ve=typeof q;(Ve==="undefined"||Ve==="boolean")&&(q=null);var Fe=!1;if(q===null)Fe=!0;else switch(Ve){case"bigint":case"string":case"number":Fe=!0;break;case"object":switch(q.$$typeof){case n:case e:Fe=!0;break;case v:return Fe=q._init,X(Fe(q._payload),ie,de,he,Re)}}if(Fe)return Re=Re(q),Fe=he===""?"."+Oe(q,0):he,te(Re)?(de="",Fe!=null&&(de=Fe.replace(D,"$&/")+"/"),X(Re,ie,de,"",function(le){return le})):Re!=null&&(V(Re)&&(Re=P(Re,de+(Re.key==null||q&&q.key===Re.key?"":(""+Re.key).replace(D,"$&/")+"/")+Fe)),ie.push(Re)),1;Fe=0;var It=he===""?".":he+":";if(te(q))for(var ft=0;ft<q.length;ft++)he=q[ft],Ve=It+Oe(he,ft),Fe+=X(he,ie,de,Ve,Re);else if(ft=x(q),typeof ft=="function")for(q=ft.call(q),ft=0;!(he=q.next()).done;)he=he.value,Ve=It+Oe(he,ft++),Fe+=X(he,ie,de,Ve,Re);else if(Ve==="object"){if(typeof q.then=="function")return X(Pe(q),ie,de,he,Re);throw ie=String(q),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Fe}function ce(q,ie,de){if(q==null)return q;var he=[],Re=0;return X(q,he,"","",function(Ve){return ie.call(de,Ve,Re++)}),he}function Se(q){if(q._status===-1){var ie=q._result;ie=ie(),ie.then(function(de){(q._status===0||q._status===-1)&&(q._status=1,q._result=de)},function(de){(q._status===0||q._status===-1)&&(q._status=2,q._result=de)}),q._status===-1&&(q._status=0,q._result=ie)}if(q._status===1)return q._result.default;throw q._result}var Je=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},et={map:ce,forEach:function(q,ie,de){ce(q,function(){ie.apply(this,arguments)},de)},count:function(q){var ie=0;return ce(q,function(){ie++}),ie},toArray:function(q){return ce(q,function(ie){return ie})||[]},only:function(q){if(!V(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return Me.Activity=E,Me.Children=et,Me.Component=Z,Me.Fragment=t,Me.Profiler=o,Me.PureComponent=$,Me.StrictMode=s,Me.Suspense=p,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Me.__COMPILER_RUNTIME={__proto__:null,c:function(q){return N.H.useMemoCache(q)}},Me.cache=function(q){return function(){return q.apply(null,arguments)}},Me.cacheSignal=function(){return null},Me.cloneElement=function(q,ie,de){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var he=B({},q.props),Re=q.key;if(ie!=null)for(Ve in ie.key!==void 0&&(Re=""+ie.key),ie)!M.call(ie,Ve)||Ve==="key"||Ve==="__self"||Ve==="__source"||Ve==="ref"&&ie.ref===void 0||(he[Ve]=ie[Ve]);var Ve=arguments.length-2;if(Ve===1)he.children=de;else if(1<Ve){for(var Fe=Array(Ve),It=0;It<Ve;It++)Fe[It]=arguments[It+2];he.children=Fe}return R(q.type,Re,he)},Me.createContext=function(q){return q={$$typeof:c,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:l,_context:q},q},Me.createElement=function(q,ie,de){var he,Re={},Ve=null;if(ie!=null)for(he in ie.key!==void 0&&(Ve=""+ie.key),ie)M.call(ie,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Re[he]=ie[he]);var Fe=arguments.length-2;if(Fe===1)Re.children=de;else if(1<Fe){for(var It=Array(Fe),ft=0;ft<Fe;ft++)It[ft]=arguments[ft+2];Re.children=It}if(q&&q.defaultProps)for(he in Fe=q.defaultProps,Fe)Re[he]===void 0&&(Re[he]=Fe[he]);return R(q,Ve,Re)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(q){return{$$typeof:d,render:q}},Me.isValidElement=V,Me.lazy=function(q){return{$$typeof:v,_payload:{_status:-1,_result:q},_init:Se}},Me.memo=function(q,ie){return{$$typeof:m,type:q,compare:ie===void 0?null:ie}},Me.startTransition=function(q){var ie=N.T,de={};N.T=de;try{var he=q(),Re=N.S;Re!==null&&Re(de,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(ae,Je)}catch(Ve){Je(Ve)}finally{ie!==null&&de.types!==null&&(ie.types=de.types),N.T=ie}},Me.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Me.use=function(q){return N.H.use(q)},Me.useActionState=function(q,ie,de){return N.H.useActionState(q,ie,de)},Me.useCallback=function(q,ie){return N.H.useCallback(q,ie)},Me.useContext=function(q){return N.H.useContext(q)},Me.useDebugValue=function(){},Me.useDeferredValue=function(q,ie){return N.H.useDeferredValue(q,ie)},Me.useEffect=function(q,ie){return N.H.useEffect(q,ie)},Me.useEffectEvent=function(q){return N.H.useEffectEvent(q)},Me.useId=function(){return N.H.useId()},Me.useImperativeHandle=function(q,ie,de){return N.H.useImperativeHandle(q,ie,de)},Me.useInsertionEffect=function(q,ie){return N.H.useInsertionEffect(q,ie)},Me.useLayoutEffect=function(q,ie){return N.H.useLayoutEffect(q,ie)},Me.useMemo=function(q,ie){return N.H.useMemo(q,ie)},Me.useOptimistic=function(q,ie){return N.H.useOptimistic(q,ie)},Me.useReducer=function(q,ie,de){return N.H.useReducer(q,ie,de)},Me.useRef=function(q){return N.H.useRef(q)},Me.useState=function(q){return N.H.useState(q)},Me.useSyncExternalStore=function(q,ie,de){return N.H.useSyncExternalStore(q,ie,de)},Me.useTransition=function(){return N.H.useTransition()},Me.version="19.2.0",Me}var zv;function bp(){return zv||(zv=1,Tm.exports=Fb()),Tm.exports}var fe=bp();const Hb=H0(fe);var Em={exports:{}},Jl={},Sm={exports:{}},Am={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gv;function zb(){return Gv||(Gv=1,(function(n){function e(X,ce){var Se=X.length;X.push(ce);e:for(;0<Se;){var Je=Se-1>>>1,et=X[Je];if(0<o(et,ce))X[Je]=ce,X[Se]=et,Se=Je;else break e}}function t(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var ce=X[0],Se=X.pop();if(Se!==ce){X[0]=Se;e:for(var Je=0,et=X.length,q=et>>>1;Je<q;){var ie=2*(Je+1)-1,de=X[ie],he=ie+1,Re=X[he];if(0>o(de,Se))he<et&&0>o(Re,de)?(X[Je]=Re,X[he]=Se,Je=he):(X[Je]=de,X[ie]=Se,Je=ie);else if(he<et&&0>o(Re,Se))X[Je]=Re,X[he]=Se,Je=he;else break e}}return ce}function o(X,ce){var Se=X.sortIndex-ce.sortIndex;return Se!==0?Se:X.id-ce.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],m=[],v=1,E=null,A=3,x=!1,U=!1,B=!1,H=!1,Z=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function F(X){for(var ce=t(m);ce!==null;){if(ce.callback===null)s(m);else if(ce.startTime<=X)s(m),ce.sortIndex=ce.expirationTime,e(p,ce);else break;ce=t(m)}}function te(X){if(B=!1,F(X),!U)if(t(p)!==null)U=!0,ae||(ae=!0,L());else{var ce=t(m);ce!==null&&Pe(te,ce.startTime-X)}}var ae=!1,N=-1,M=5,R=-1;function P(){return H?!0:!(n.unstable_now()-R<M)}function V(){if(H=!1,ae){var X=n.unstable_now();R=X;var ce=!0;try{e:{U=!1,B&&(B=!1,ee(N),N=-1),x=!0;var Se=A;try{t:{for(F(X),E=t(p);E!==null&&!(E.expirationTime>X&&P());){var Je=E.callback;if(typeof Je=="function"){E.callback=null,A=E.priorityLevel;var et=Je(E.expirationTime<=X);if(X=n.unstable_now(),typeof et=="function"){E.callback=et,F(X),ce=!0;break t}E===t(p)&&s(p),F(X)}else s(p);E=t(p)}if(E!==null)ce=!0;else{var q=t(m);q!==null&&Pe(te,q.startTime-X),ce=!1}}break e}finally{E=null,A=Se,x=!1}ce=void 0}}finally{ce?L():ae=!1}}}var L;if(typeof $=="function")L=function(){$(V)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Oe=D.port2;D.port1.onmessage=V,L=function(){Oe.postMessage(null)}}else L=function(){Z(V,0)};function Pe(X,ce){N=Z(function(){X(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return A},n.unstable_next=function(X){switch(A){case 1:case 2:case 3:var ce=3;break;default:ce=A}var Se=A;A=ce;try{return X()}finally{A=Se}},n.unstable_requestPaint=function(){H=!0},n.unstable_runWithPriority=function(X,ce){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var Se=A;A=X;try{return ce()}finally{A=Se}},n.unstable_scheduleCallback=function(X,ce,Se){var Je=n.unstable_now();switch(typeof Se=="object"&&Se!==null?(Se=Se.delay,Se=typeof Se=="number"&&0<Se?Je+Se:Je):Se=Je,X){case 1:var et=-1;break;case 2:et=250;break;case 5:et=1073741823;break;case 4:et=1e4;break;default:et=5e3}return et=Se+et,X={id:v++,callback:ce,priorityLevel:X,startTime:Se,expirationTime:et,sortIndex:-1},Se>Je?(X.sortIndex=Se,e(m,X),t(p)===null&&X===t(m)&&(B?(ee(N),N=-1):B=!0,Pe(te,Se-Je))):(X.sortIndex=et,e(p,X),U||x||(U=!0,ae||(ae=!0,L()))),X},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(X){var ce=A;return function(){var Se=A;A=ce;try{return X.apply(this,arguments)}finally{A=Se}}}})(Am)),Am}var Yv;function Gb(){return Yv||(Yv=1,Sm.exports=zb()),Sm.exports}var Cm={exports:{}},cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jv;function Yb(){if(jv)return cn;jv=1;var n=bp();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(p,m,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:p,containerInfo:m,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,cn.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(p,m,null,v)},cn.flushSync=function(p){var m=c.T,v=s.p;try{if(c.T=null,s.p=2,p)return p()}finally{c.T=m,s.p=v,s.d.f()}},cn.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(p,m))},cn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},cn.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,E=d(v,m.crossOrigin),A=typeof m.integrity=="string"?m.integrity:void 0,x=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:E,integrity:A,fetchPriority:x}):v==="script"&&s.d.X(p,{crossOrigin:E,integrity:A,fetchPriority:x,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},cn.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=d(m.as,m.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(p)},cn.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,E=d(v,m.crossOrigin);s.d.L(p,v,{crossOrigin:E,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},cn.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=d(m.as,m.crossOrigin);s.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(p)},cn.requestFormReset=function(p){s.d.r(p)},cn.unstable_batchedUpdates=function(p,m){return p(m)},cn.useFormState=function(p,m,v){return c.H.useFormState(p,m,v)},cn.useFormStatus=function(){return c.H.useHostTransitionStatus()},cn.version="19.2.0",cn}var Jv;function jb(){if(Jv)return Cm.exports;Jv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Cm.exports=Yb(),Cm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kv;function Jb(){if(Kv)return Jl;Kv=1;var n=Gb(),e=bp(),t=jb();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,a=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(a=r.return),i=r.return;while(i)}return r.tag===3?a:null}function c(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function p(i){if(l(i)!==i)throw Error(s(188))}function m(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var a=i,u=r;;){var y=a.return;if(y===null)break;var _=y.alternate;if(_===null){if(u=y.return,u!==null){a=u;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===a)return p(y),i;if(_===u)return p(y),r;_=_.sibling}throw Error(s(188))}if(a.return!==u.return)a=y,u=_;else{for(var C=!1,b=y.child;b;){if(b===a){C=!0,a=y,u=_;break}if(b===u){C=!0,u=y,a=_;break}b=b.sibling}if(!C){for(b=_.child;b;){if(b===a){C=!0,a=_,u=y;break}if(b===u){C=!0,u=_,a=y;break}b=b.sibling}if(!C)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:r}function v(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=v(i),r!==null)return r;i=i.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),ee=Symbol.for("react.consumer"),$=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function L(i){return i===null||typeof i!="object"?null:(i=V&&i[V]||i["@@iterator"],typeof i=="function"?i:null)}var D=Symbol.for("react.client.reference");function Oe(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===D?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case B:return"Fragment";case Z:return"Profiler";case H:return"StrictMode";case te:return"Suspense";case ae:return"SuspenseList";case R:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case U:return"Portal";case $:return i.displayName||"Context";case ee:return(i._context.displayName||"Context")+".Consumer";case F:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case N:return r=i.displayName||null,r!==null?r:Oe(i.type)||"Memo";case M:r=i._payload,i=i._init;try{return Oe(i(r))}catch{}}return null}var Pe=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se={pending:!1,data:null,method:null,action:null},Je=[],et=-1;function q(i){return{current:i}}function ie(i){0>et||(i.current=Je[et],Je[et]=null,et--)}function de(i,r){et++,Je[et]=i.current,i.current=r}var he=q(null),Re=q(null),Ve=q(null),Fe=q(null);function It(i,r){switch(de(Ve,r),de(Re,i),de(he,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?uv(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=uv(r),i=cv(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ie(he),de(he,i)}function ft(){ie(he),ie(Re),ie(Ve)}function le(i){i.memoizedState!==null&&de(Fe,i);var r=he.current,a=cv(r,i.type);r!==a&&(de(Re,i),de(he,a))}function pe(i){Re.current===i&&(ie(he),ie(Re)),Fe.current===i&&(ie(Fe),Hl._currentValue=Se)}var _e,be;function Qe(i){if(_e===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);_e=r&&r[1]||"",be=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_e+i+be}var Rn=!1;function Ti(i,r){if(!i||Rn)return"";Rn=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(Q){var J=Q}Reflect.construct(i,[],se)}else{try{se.call()}catch(Q){J=Q}i.call(se.prototype)}}else{try{throw Error()}catch(Q){J=Q}(se=i())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(Q){if(Q&&J&&typeof Q.stack=="string")return[Q.stack,J.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=u.DetermineComponentFrameRoot(),C=_[0],b=_[1];if(C&&b){var k=C.split(`
`),j=b.split(`
`);for(y=u=0;u<k.length&&!k[u].includes("DetermineComponentFrameRoot");)u++;for(;y<j.length&&!j[y].includes("DetermineComponentFrameRoot");)y++;if(u===k.length||y===j.length)for(u=k.length-1,y=j.length-1;1<=u&&0<=y&&k[u]!==j[y];)y--;for(;1<=u&&0<=y;u--,y--)if(k[u]!==j[y]){if(u!==1||y!==1)do if(u--,y--,0>y||k[u]!==j[y]){var W=`
`+k[u].replace(" at new "," at ");return i.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",i.displayName)),W}while(1<=u&&0<=y);break}}}finally{Rn=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?Qe(a):""}function ks(i,r){switch(i.tag){case 26:case 27:case 5:return Qe(i.type);case 16:return Qe("Lazy");case 13:return i.child!==r&&r!==null?Qe("Suspense Fallback"):Qe("Suspense");case 19:return Qe("SuspenseList");case 0:case 15:return Ti(i.type,!1);case 11:return Ti(i.type.render,!1);case 1:return Ti(i.type,!0);case 31:return Qe("Activity");default:return""}}function Pr(i){try{var r="",a=null;do r+=ks(i,a),a=i,i=i.return;while(i);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Et=Object.prototype.hasOwnProperty,bt=n.unstable_scheduleCallback,Ei=n.unstable_cancelCallback,Ee=n.unstable_shouldYield,zt=n.unstable_requestPaint,Gt=n.unstable_now,vn=n.unstable_getCurrentPriorityLevel,Yt=n.unstable_ImmediatePriority,tn=n.unstable_UserBlockingPriority,Us=n.unstable_NormalPriority,Sf=n.unstable_LowPriority,Mu=n.unstable_IdlePriority,Du=n.log,Pu=n.unstable_setDisableYieldValue,ni=null,nn=null;function Bn(i){if(typeof Du=="function"&&Pu(i),nn&&typeof nn.setStrictMode=="function")try{nn.setStrictMode(ni,i)}catch{}}var xt=Math.clz32?Math.clz32:ku,Vu=Math.log,bo=Math.LN2;function ku(i){return i>>>=0,i===0?32:31-(Vu(i)/bo|0)|0}var Si=256,Vr=262144,Dt=4194304;function Ai(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Ci(i,r,a){var u=i.pendingLanes;if(u===0)return 0;var y=0,_=i.suspendedLanes,C=i.pingedLanes;i=i.warmLanes;var b=u&134217727;return b!==0?(u=b&~_,u!==0?y=Ai(u):(C&=b,C!==0?y=Ai(C):a||(a=b&~i,a!==0&&(y=Ai(a))))):(b=u&~_,b!==0?y=Ai(b):C!==0?y=Ai(C):a||(a=u&~i,a!==0&&(y=Ai(a)))),y===0?0:r!==0&&r!==y&&(r&_)===0&&(_=y&-y,a=r&-r,_>=a||_===32&&(a&4194048)!==0)?r:y}function ii(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function Af(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Uu(){var i=Dt;return Dt<<=1,(Dt&62914560)===0&&(Dt=4194304),i}function Ii(i){for(var r=[],a=0;31>a;a++)r.push(i);return r}function kr(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Cf(i,r,a,u,y,_){var C=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var b=i.entanglements,k=i.expirationTimes,j=i.hiddenUpdates;for(a=C&~a;0<a;){var W=31-xt(a),se=1<<W;b[W]=0,k[W]=-1;var J=j[W];if(J!==null)for(j[W]=null,W=0;W<J.length;W++){var Q=J[W];Q!==null&&(Q.lane&=-536870913)}a&=~se}u!==0&&Ur(i,u,0),_!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=_&~(C&~r))}function Ur(i,r,a){i.pendingLanes|=r,i.suspendedLanes&=~r;var u=31-xt(r);i.entangledLanes|=r,i.entanglements[u]=i.entanglements[u]|1073741824|a&261930}function Ja(i,r){var a=i.entangledLanes|=r;for(i=i.entanglements;a;){var u=31-xt(a),y=1<<u;y&r|i[u]&r&&(i[u]|=r),a&=~y}}function Ka(i,r){var a=r&-r;return a=(a&42)!==0?1:Lr(a),(a&(i.suspendedLanes|r))!==0?0:a}function Lr(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Xi(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Lu(){var i=ce.p;return i!==0?i:(i=window.event,i===void 0?32:Pv(i.type))}function si(i,r){var a=ce.p;try{return ce.p=i,r()}finally{ce.p=a}}var ri=Math.random().toString(36).slice(2),Pt="__reactFiber$"+ri,$t="__reactProps$"+ri,bi="__reactContainer$"+ri,xo="__reactEvents$"+ri,If="__reactListeners$"+ri,Ou="__reactHandles$"+ri,qu="__reactResources$"+ri,xi="__reactMarker$"+ri;function wo(i){delete i[Pt],delete i[$t],delete i[xo],delete i[If],delete i[Ou]}function wi(i){var r=i[Pt];if(r)return r;for(var a=i.parentNode;a;){if(r=a[bi]||a[Pt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(i=yv(i);i!==null;){if(a=i[Pt])return a;i=yv(i)}return r}i=a,a=i.parentNode}return null}function Fn(i){if(i=i[Pt]||i[bi]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function Nn(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function Ri(i){var r=i[qu];return r||(r=i[qu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Vt(i){i[xi]=!0}var $a=new Set,Qa={};function Ni(i,r){Mi(i,r),Mi(i+"Capture",r)}function Mi(i,r){for(Qa[i]=r,i=0;i<r.length;i++)$a.add(r[i])}var Xa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wa={},Za={};function Bu(i){return Et.call(Za,i)?!0:Et.call(Wa,i)?!1:Xa.test(i)?Za[i]=!0:(Wa[i]=!0,!1)}function Ro(i,r,a){if(Bu(r))if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+a)}}function Mn(i,r,a){if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+a)}}function kt(i,r,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(r,a,""+u)}}function Qt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ls(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function el(i,r,a){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var y=u.get,_=u.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return y.call(this)},set:function(C){a=""+C,_.call(this,C)}}),Object.defineProperty(i,r,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(C){a=""+C},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function st(i){if(!i._valueTracker){var r=Ls(i)?"checked":"value";i._valueTracker=el(i,r,""+i[r])}}function Or(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var a=r.getValue(),u="";return i&&(u=Ls(i)?i.checked?"true":"false":i.value),i=u,i!==a?(r.setValue(i),!0):!1}function Di(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var qr=/[\n"\\]/g;function Tn(i){return i.replace(qr,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function No(i,r,a,u,y,_,C,b){i.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.type=C:i.removeAttribute("type"),r!=null?C==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+Qt(r)):i.value!==""+Qt(r)&&(i.value=""+Qt(r)):C!=="submit"&&C!=="reset"||i.removeAttribute("value"),r!=null?tl(i,C,Qt(r)):a!=null?tl(i,C,Qt(a)):u!=null&&i.removeAttribute("value"),y==null&&_!=null&&(i.defaultChecked=!!_),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.name=""+Qt(b):i.removeAttribute("name")}function Fu(i,r,a,u,y,_,C,b){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),r!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){st(i);return}a=a!=null?""+Qt(a):"",r=r!=null?""+Qt(r):a,b||r===i.value||(i.value=r),i.defaultValue=r}u=u??y,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=b?i.checked:!!u,i.defaultChecked=!!u,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(i.name=C),st(i)}function tl(i,r,a){r==="number"&&Di(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function Os(i,r,a,u){if(i=i.options,r){r={};for(var y=0;y<a.length;y++)r["$"+a[y]]=!0;for(a=0;a<i.length;a++)y=r.hasOwnProperty("$"+i[a].value),i[a].selected!==y&&(i[a].selected=y),y&&u&&(i[a].defaultSelected=!0)}else{for(a=""+Qt(a),r=null,y=0;y<i.length;y++){if(i[y].value===a){i[y].selected=!0,u&&(i[y].defaultSelected=!0);return}r!==null||i[y].disabled||(r=i[y])}r!==null&&(r.selected=!0)}}function Hu(i,r,a){if(r!=null&&(r=""+Qt(r),r!==i.value&&(i.value=r),a==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=a!=null?""+Qt(a):""}function qs(i,r,a,u){if(r==null){if(u!=null){if(a!=null)throw Error(s(92));if(Pe(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),r=a}a=Qt(r),i.defaultValue=a,u=i.textContent,u===a&&u!==""&&u!==null&&(i.value=u),st(i)}function En(i,r){if(r){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=r;return}}i.textContent=r}var zu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nl(i,r,a){var u=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":u?i.setProperty(r,a):typeof a!="number"||a===0||zu.has(r)?r==="float"?i.cssFloat=a:i[r]=(""+a).trim():i[r]=a+"px"}function il(i,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var y in r)u=r[y],r.hasOwnProperty(y)&&a[y]!==u&&nl(i,y,u)}else for(var _ in r)r.hasOwnProperty(_)&&nl(i,_,r[_])}function Mo(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Do(i){return Bs.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function oi(){}var sl=null;function Hn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Fs=null,Pi=null;function Br(i){var r=Fn(i);if(r&&(i=r.stateNode)){var a=i[$t]||null;e:switch(i=r.stateNode,r.type){case"input":if(No(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Tn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var u=a[r];if(u!==i&&u.form===i.form){var y=u[$t]||null;if(!y)throw Error(s(90));No(u,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<a.length;r++)u=a[r],u.form===i.form&&Or(u)}break e;case"textarea":Hu(i,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Os(i,!!a.multiple,r,!1)}}}var Po=!1;function Hs(i,r,a){if(Po)return i(r,a);Po=!0;try{var u=i(r);return u}finally{if(Po=!1,(Fs!==null||Pi!==null)&&(Lc(),Fs&&(r=Fs,i=Pi,Pi=Fs=null,Br(r),i)))for(r=0;r<i.length;r++)Br(i[r])}}function ai(i,r){var a=i.stateNode;if(a===null)return null;var u=a[$t]||null;if(u===null)return null;a=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fr=!1;if(zn)try{var at={};Object.defineProperty(at,"passive",{get:function(){Fr=!0}}),window.addEventListener("test",at,at),window.removeEventListener("test",at,at)}catch{Fr=!1}var Vi=null,rl=null,Hr=null;function ol(){if(Hr)return Hr;var i,r=rl,a=r.length,u,y="value"in Vi?Vi.value:Vi.textContent,_=y.length;for(i=0;i<a&&r[i]===y[i];i++);var C=a-i;for(u=1;u<=C&&r[a-u]===y[_-u];u++);return Hr=y.slice(i,1<u?1-u:void 0)}function zr(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Wi(){return!0}function li(){return!1}function sn(i){function r(a,u,y,_,C){this._reactName=a,this._targetInst=y,this.type=u,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var b in i)i.hasOwnProperty(b)&&(a=i[b],this[b]=a?a(_):_[b]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Wi:li,this.isPropagationStopped=li,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wi)},persist:function(){},isPersistent:Wi}),r}var Zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ki=sn(Zi),zs=E({},Zi,{view:0,detail:0}),al=sn(zs),Gs,Vo,Ui,ko=E({},zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ys,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ui&&(Ui&&i.type==="mousemove"?(Gs=i.screenX-Ui.screenX,Vo=i.screenY-Ui.screenY):Vo=Gs=0,Ui=i),Gs)},movementY:function(i){return"movementY"in i?i.movementY:Vo}}),ll=sn(ko),Gr=E({},ko,{dataTransfer:0}),Yu=sn(Gr),ju=E({},zs,{relatedTarget:0}),Yr=sn(ju),ul=E({},Zi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ju=sn(ul),Uo=E({},Zi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Ku=sn(Uo),$u=E({},Zi,{data:0}),Li=sn($u),Qu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zu(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=Wu[i])?!!r[i]:!1}function Ys(){return Zu}var gn=E({},zs,{key:function(i){if(i.key){var r=Qu[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=zr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Xu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ys,charCode:function(i){return i.type==="keypress"?zr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?zr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ec=sn(gn),tc=E({},ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),es=sn(tc),h=E({},zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ys}),S=sn(h),I=E({},Zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=sn(I),G=E({},ko,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),K=sn(G),ue=E({},Zi,{newState:0,oldState:0}),ke=sn(ue),wt=[9,13,27,32],tt=zn&&"CompositionEvent"in window,_t=null;zn&&"documentMode"in document&&(_t=document.documentMode);var Gn=zn&&"TextEvent"in window&&!_t,Oi=zn&&(!tt||_t&&8<_t&&11>=_t),ui=" ",ci=!1;function jr(i,r){switch(i){case"keyup":return wt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lo(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Oo=!1;function uI(i,r){switch(i){case"compositionend":return Lo(r);case"keypress":return r.which!==32?null:(ci=!0,ui);case"textInput":return i=r.data,i===ui&&ci?null:i;default:return null}}function cI(i,r){if(Oo)return i==="compositionend"||!tt&&jr(i,r)?(i=ol(),Hr=rl=Vi=null,Oo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Oi&&r.locale!=="ko"?null:r.data;default:return null}}var dI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tg(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!dI[i.type]:r==="textarea"}function Eg(i,r,a,u){Fs?Pi?Pi.push(u):Pi=[u]:Fs=u,r=Gc(r,"onChange"),0<r.length&&(a=new ki("onChange","change",null,a,u),i.push({event:a,listeners:r}))}var cl=null,dl=null;function fI(i){iv(i,0)}function nc(i){var r=Nn(i);if(Or(r))return i}function Sg(i,r){if(i==="change")return r}var Ag=!1;if(zn){var bf;if(zn){var xf="oninput"in document;if(!xf){var Cg=document.createElement("div");Cg.setAttribute("oninput","return;"),xf=typeof Cg.oninput=="function"}bf=xf}else bf=!1;Ag=bf&&(!document.documentMode||9<document.documentMode)}function Ig(){cl&&(cl.detachEvent("onpropertychange",bg),dl=cl=null)}function bg(i){if(i.propertyName==="value"&&nc(dl)){var r=[];Eg(r,dl,i,Hn(i)),Hs(fI,r)}}function hI(i,r,a){i==="focusin"?(Ig(),cl=r,dl=a,cl.attachEvent("onpropertychange",bg)):i==="focusout"&&Ig()}function mI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return nc(dl)}function pI(i,r){if(i==="click")return nc(r)}function gI(i,r){if(i==="input"||i==="change")return nc(r)}function yI(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var Dn=typeof Object.is=="function"?Object.is:yI;function fl(i,r){if(Dn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var a=Object.keys(i),u=Object.keys(r);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var y=a[u];if(!Et.call(r,y)||!Dn(i[y],r[y]))return!1}return!0}function xg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function wg(i,r){var a=xg(i);i=0;for(var u;a;){if(a.nodeType===3){if(u=i+a.textContent.length,i<=r&&u>=r)return{node:a,offset:r-i};i=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=xg(a)}}function Rg(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?Rg(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function Ng(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Di(i.document);r instanceof i.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)i=r.contentWindow;else break;r=Di(i.document)}return r}function wf(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var _I=zn&&"documentMode"in document&&11>=document.documentMode,qo=null,Rf=null,hl=null,Nf=!1;function Mg(i,r,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Nf||qo==null||qo!==Di(u)||(u=qo,"selectionStart"in u&&wf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),hl&&fl(hl,u)||(hl=u,u=Gc(Rf,"onSelect"),0<u.length&&(r=new ki("onSelect","select",null,r,a),i.push({event:r,listeners:u}),r.target=qo)))}function Jr(i,r){var a={};return a[i.toLowerCase()]=r.toLowerCase(),a["Webkit"+i]="webkit"+r,a["Moz"+i]="moz"+r,a}var Bo={animationend:Jr("Animation","AnimationEnd"),animationiteration:Jr("Animation","AnimationIteration"),animationstart:Jr("Animation","AnimationStart"),transitionrun:Jr("Transition","TransitionRun"),transitionstart:Jr("Transition","TransitionStart"),transitioncancel:Jr("Transition","TransitionCancel"),transitionend:Jr("Transition","TransitionEnd")},Mf={},Dg={};zn&&(Dg=document.createElement("div").style,"AnimationEvent"in window||(delete Bo.animationend.animation,delete Bo.animationiteration.animation,delete Bo.animationstart.animation),"TransitionEvent"in window||delete Bo.transitionend.transition);function Kr(i){if(Mf[i])return Mf[i];if(!Bo[i])return i;var r=Bo[i],a;for(a in r)if(r.hasOwnProperty(a)&&a in Dg)return Mf[i]=r[a];return i}var Pg=Kr("animationend"),Vg=Kr("animationiteration"),kg=Kr("animationstart"),vI=Kr("transitionrun"),TI=Kr("transitionstart"),EI=Kr("transitioncancel"),Ug=Kr("transitionend"),Lg=new Map,Df="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Df.push("scrollEnd");function di(i,r){Lg.set(i,r),Ni(r,[i])}var ic=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Yn=[],Fo=0,Pf=0;function sc(){for(var i=Fo,r=Pf=Fo=0;r<i;){var a=Yn[r];Yn[r++]=null;var u=Yn[r];Yn[r++]=null;var y=Yn[r];Yn[r++]=null;var _=Yn[r];if(Yn[r++]=null,u!==null&&y!==null){var C=u.pending;C===null?y.next=y:(y.next=C.next,C.next=y),u.pending=y}_!==0&&Og(a,y,_)}}function rc(i,r,a,u){Yn[Fo++]=i,Yn[Fo++]=r,Yn[Fo++]=a,Yn[Fo++]=u,Pf|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Vf(i,r,a,u){return rc(i,r,a,u),oc(i)}function $r(i,r){return rc(i,null,null,r),oc(i)}function Og(i,r,a){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a);for(var y=!1,_=i.return;_!==null;)_.childLanes|=a,u=_.alternate,u!==null&&(u.childLanes|=a),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(y=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,y&&r!==null&&(y=31-xt(a),i=_.hiddenUpdates,u=i[y],u===null?i[y]=[r]:u.push(r),r.lane=a|536870912),_):null}function oc(i){if(50<kl)throw kl=0,zh=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Ho={};function SI(i,r,a,u){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(i,r,a,u){return new SI(i,r,a,u)}function kf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ts(i,r){var a=i.alternate;return a===null?(a=Pn(i.tag,r,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=r,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,r=i.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function qg(i,r){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,r=a.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function ac(i,r,a,u,y,_){var C=0;if(u=i,typeof i=="function")kf(i)&&(C=1);else if(typeof i=="string")C=xb(i,a,he.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case R:return i=Pn(31,a,r,y),i.elementType=R,i.lanes=_,i;case B:return Qr(a.children,y,_,r);case H:C=8,y|=24;break;case Z:return i=Pn(12,a,r,y|2),i.elementType=Z,i.lanes=_,i;case te:return i=Pn(13,a,r,y),i.elementType=te,i.lanes=_,i;case ae:return i=Pn(19,a,r,y),i.elementType=ae,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case $:C=10;break e;case ee:C=9;break e;case F:C=11;break e;case N:C=14;break e;case M:C=16,u=null;break e}C=29,a=Error(s(130,i===null?"null":typeof i,"")),u=null}return r=Pn(C,a,r,y),r.elementType=i,r.type=u,r.lanes=_,r}function Qr(i,r,a,u){return i=Pn(7,i,u,r),i.lanes=a,i}function Uf(i,r,a){return i=Pn(6,i,null,r),i.lanes=a,i}function Bg(i){var r=Pn(18,null,null,0);return r.stateNode=i,r}function Lf(i,r,a){return r=Pn(4,i.children!==null?i.children:[],i.key,r),r.lanes=a,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var Fg=new WeakMap;function jn(i,r){if(typeof i=="object"&&i!==null){var a=Fg.get(i);return a!==void 0?a:(r={value:i,source:r,stack:Pr(r)},Fg.set(i,r),r)}return{value:i,source:r,stack:Pr(r)}}var zo=[],Go=0,lc=null,ml=0,Jn=[],Kn=0,js=null,qi=1,Bi="";function ns(i,r){zo[Go++]=ml,zo[Go++]=lc,lc=i,ml=r}function Hg(i,r,a){Jn[Kn++]=qi,Jn[Kn++]=Bi,Jn[Kn++]=js,js=i;var u=qi;i=Bi;var y=32-xt(u)-1;u&=~(1<<y),a+=1;var _=32-xt(r)+y;if(30<_){var C=y-y%5;_=(u&(1<<C)-1).toString(32),u>>=C,y-=C,qi=1<<32-xt(r)+y|a<<y|u,Bi=_+i}else qi=1<<_|a<<y|u,Bi=i}function Of(i){i.return!==null&&(ns(i,1),Hg(i,1,0))}function qf(i){for(;i===lc;)lc=zo[--Go],zo[Go]=null,ml=zo[--Go],zo[Go]=null;for(;i===js;)js=Jn[--Kn],Jn[Kn]=null,Bi=Jn[--Kn],Jn[Kn]=null,qi=Jn[--Kn],Jn[Kn]=null}function zg(i,r){Jn[Kn++]=qi,Jn[Kn++]=Bi,Jn[Kn++]=js,qi=r.id,Bi=r.overflow,js=i}var rn=null,mt=null,Ke=!1,Js=null,$n=!1,Bf=Error(s(519));function Ks(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw pl(jn(r,i)),Bf}function Gg(i){var r=i.stateNode,a=i.type,u=i.memoizedProps;switch(r[Pt]=i,r[$t]=u,a){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(a=0;a<Ll.length;a++)Be(Ll[a],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":Be("invalid",r),Fu(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Be("invalid",r);break;case"textarea":Be("invalid",r),qs(r,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||u.suppressHydrationWarning===!0||av(r.textContent,a)?(u.popover!=null&&(Be("beforetoggle",r),Be("toggle",r)),u.onScroll!=null&&Be("scroll",r),u.onScrollEnd!=null&&Be("scrollend",r),u.onClick!=null&&(r.onclick=oi),r=!0):r=!1,r||Ks(i,!0)}function Yg(i){for(rn=i.return;rn;)switch(rn.tag){case 5:case 31:case 13:$n=!1;return;case 27:case 3:$n=!0;return;default:rn=rn.return}}function Yo(i){if(i!==rn)return!1;if(!Ke)return Yg(i),Ke=!0,!1;var r=i.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||sm(i.type,i.memoizedProps)),a=!a),a&&mt&&Ks(i),Yg(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));mt=gv(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));mt=gv(i)}else r===27?(r=mt,lr(i.type)?(i=um,um=null,mt=i):mt=r):mt=rn?Xn(i.stateNode.nextSibling):null;return!0}function Xr(){mt=rn=null,Ke=!1}function Ff(){var i=Js;return i!==null&&(In===null?In=i:In.push.apply(In,i),Js=null),i}function pl(i){Js===null?Js=[i]:Js.push(i)}var Hf=q(null),Wr=null,is=null;function $s(i,r,a){de(Hf,r._currentValue),r._currentValue=a}function ss(i){i._currentValue=Hf.current,ie(Hf)}function zf(i,r,a){for(;i!==null;){var u=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),i===a)break;i=i.return}}function Gf(i,r,a,u){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var _=y.dependencies;if(_!==null){var C=y.child;_=_.firstContext;e:for(;_!==null;){var b=_;_=y;for(var k=0;k<r.length;k++)if(b.context===r[k]){_.lanes|=a,b=_.alternate,b!==null&&(b.lanes|=a),zf(_.return,a,i),u||(C=null);break e}_=b.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(s(341));C.lanes|=a,_=C.alternate,_!==null&&(_.lanes|=a),zf(C,a,i),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===i){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function jo(i,r,a,u){i=null;for(var y=r,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(s(387));if(C=C.memoizedProps,C!==null){var b=y.type;Dn(y.pendingProps.value,C.value)||(i!==null?i.push(b):i=[b])}}else if(y===Fe.current){if(C=y.alternate,C===null)throw Error(s(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(Hl):i=[Hl])}y=y.return}i!==null&&Gf(r,i,a,u),r.flags|=262144}function uc(i){for(i=i.firstContext;i!==null;){if(!Dn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Zr(i){Wr=i,is=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function on(i){return jg(Wr,i)}function cc(i,r){return Wr===null&&Zr(i),jg(i,r)}function jg(i,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},is===null){if(i===null)throw Error(s(308));is=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else is=is.next=r;return a}var AI=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(a,u){i.push(u)}};this.abort=function(){r.aborted=!0,i.forEach(function(a){return a()})}},CI=n.unstable_scheduleCallback,II=n.unstable_NormalPriority,Ut={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yf(){return{controller:new AI,data:new Map,refCount:0}}function gl(i){i.refCount--,i.refCount===0&&CI(II,function(){i.controller.abort()})}var yl=null,jf=0,Jo=0,Ko=null;function bI(i,r){if(yl===null){var a=yl=[];jf=0,Jo=$h(),Ko={status:"pending",value:void 0,then:function(u){a.push(u)}}}return jf++,r.then(Jg,Jg),r}function Jg(){if(--jf===0&&yl!==null){Ko!==null&&(Ko.status="fulfilled");var i=yl;yl=null,Jo=0,Ko=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function xI(i,r){var a=[],u={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return i.then(function(){u.status="fulfilled",u.value=r;for(var y=0;y<a.length;y++)(0,a[y])(r)},function(y){for(u.status="rejected",u.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),u}var Kg=X.S;X.S=function(i,r){M_=Gt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&bI(i,r),Kg!==null&&Kg(i,r)};var eo=q(null);function Jf(){var i=eo.current;return i!==null?i:dt.pooledCache}function dc(i,r){r===null?de(eo,eo.current):de(eo,r.pool)}function $g(){var i=Jf();return i===null?null:{parent:Ut._currentValue,pool:i}}var $o=Error(s(460)),Kf=Error(s(474)),fc=Error(s(542)),hc={then:function(){}};function Qg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Xg(i,r,a){switch(a=i[a],a===void 0?i.push(r):a!==r&&(r.then(oi,oi),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Zg(i),i;default:if(typeof r.status=="string")r.then(oi,oi);else{if(i=dt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(u){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=u}},function(u){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Zg(i),i}throw no=r,$o}}function to(i){try{var r=i._init;return r(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(no=a,$o):a}}var no=null;function Wg(){if(no===null)throw Error(s(459));var i=no;return no=null,i}function Zg(i){if(i===$o||i===fc)throw Error(s(483))}var Qo=null,_l=0;function mc(i){var r=_l;return _l+=1,Qo===null&&(Qo=[]),Xg(Qo,i,r)}function vl(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function pc(i,r){throw r.$$typeof===A?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function ey(i){function r(z,O){if(i){var Y=z.deletions;Y===null?(z.deletions=[O],z.flags|=16):Y.push(O)}}function a(z,O){if(!i)return null;for(;O!==null;)r(z,O),O=O.sibling;return null}function u(z){for(var O=new Map;z!==null;)z.key!==null?O.set(z.key,z):O.set(z.index,z),z=z.sibling;return O}function y(z,O){return z=ts(z,O),z.index=0,z.sibling=null,z}function _(z,O,Y){return z.index=Y,i?(Y=z.alternate,Y!==null?(Y=Y.index,Y<O?(z.flags|=67108866,O):Y):(z.flags|=67108866,O)):(z.flags|=1048576,O)}function C(z){return i&&z.alternate===null&&(z.flags|=67108866),z}function b(z,O,Y,ne){return O===null||O.tag!==6?(O=Uf(Y,z.mode,ne),O.return=z,O):(O=y(O,Y),O.return=z,O)}function k(z,O,Y,ne){var Ae=Y.type;return Ae===B?W(z,O,Y.props.children,ne,Y.key):O!==null&&(O.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===M&&to(Ae)===O.type)?(O=y(O,Y.props),vl(O,Y),O.return=z,O):(O=ac(Y.type,Y.key,Y.props,null,z.mode,ne),vl(O,Y),O.return=z,O)}function j(z,O,Y,ne){return O===null||O.tag!==4||O.stateNode.containerInfo!==Y.containerInfo||O.stateNode.implementation!==Y.implementation?(O=Lf(Y,z.mode,ne),O.return=z,O):(O=y(O,Y.children||[]),O.return=z,O)}function W(z,O,Y,ne,Ae){return O===null||O.tag!==7?(O=Qr(Y,z.mode,ne,Ae),O.return=z,O):(O=y(O,Y),O.return=z,O)}function se(z,O,Y){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Uf(""+O,z.mode,Y),O.return=z,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case x:return Y=ac(O.type,O.key,O.props,null,z.mode,Y),vl(Y,O),Y.return=z,Y;case U:return O=Lf(O,z.mode,Y),O.return=z,O;case M:return O=to(O),se(z,O,Y)}if(Pe(O)||L(O))return O=Qr(O,z.mode,Y,null),O.return=z,O;if(typeof O.then=="function")return se(z,mc(O),Y);if(O.$$typeof===$)return se(z,cc(z,O),Y);pc(z,O)}return null}function J(z,O,Y,ne){var Ae=O!==null?O.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Ae!==null?null:b(z,O,""+Y,ne);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case x:return Y.key===Ae?k(z,O,Y,ne):null;case U:return Y.key===Ae?j(z,O,Y,ne):null;case M:return Y=to(Y),J(z,O,Y,ne)}if(Pe(Y)||L(Y))return Ae!==null?null:W(z,O,Y,ne,null);if(typeof Y.then=="function")return J(z,O,mc(Y),ne);if(Y.$$typeof===$)return J(z,O,cc(z,Y),ne);pc(z,Y)}return null}function Q(z,O,Y,ne,Ae){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return z=z.get(Y)||null,b(O,z,""+ne,Ae);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case x:return z=z.get(ne.key===null?Y:ne.key)||null,k(O,z,ne,Ae);case U:return z=z.get(ne.key===null?Y:ne.key)||null,j(O,z,ne,Ae);case M:return ne=to(ne),Q(z,O,Y,ne,Ae)}if(Pe(ne)||L(ne))return z=z.get(Y)||null,W(O,z,ne,Ae,null);if(typeof ne.then=="function")return Q(z,O,Y,mc(ne),Ae);if(ne.$$typeof===$)return Q(z,O,Y,cc(O,ne),Ae);pc(O,ne)}return null}function ge(z,O,Y,ne){for(var Ae=null,Xe=null,Te=O,Le=O=0,ze=null;Te!==null&&Le<Y.length;Le++){Te.index>Le?(ze=Te,Te=null):ze=Te.sibling;var We=J(z,Te,Y[Le],ne);if(We===null){Te===null&&(Te=ze);break}i&&Te&&We.alternate===null&&r(z,Te),O=_(We,O,Le),Xe===null?Ae=We:Xe.sibling=We,Xe=We,Te=ze}if(Le===Y.length)return a(z,Te),Ke&&ns(z,Le),Ae;if(Te===null){for(;Le<Y.length;Le++)Te=se(z,Y[Le],ne),Te!==null&&(O=_(Te,O,Le),Xe===null?Ae=Te:Xe.sibling=Te,Xe=Te);return Ke&&ns(z,Le),Ae}for(Te=u(Te);Le<Y.length;Le++)ze=Q(Te,z,Le,Y[Le],ne),ze!==null&&(i&&ze.alternate!==null&&Te.delete(ze.key===null?Le:ze.key),O=_(ze,O,Le),Xe===null?Ae=ze:Xe.sibling=ze,Xe=ze);return i&&Te.forEach(function(hr){return r(z,hr)}),Ke&&ns(z,Le),Ae}function Ie(z,O,Y,ne){if(Y==null)throw Error(s(151));for(var Ae=null,Xe=null,Te=O,Le=O=0,ze=null,We=Y.next();Te!==null&&!We.done;Le++,We=Y.next()){Te.index>Le?(ze=Te,Te=null):ze=Te.sibling;var hr=J(z,Te,We.value,ne);if(hr===null){Te===null&&(Te=ze);break}i&&Te&&hr.alternate===null&&r(z,Te),O=_(hr,O,Le),Xe===null?Ae=hr:Xe.sibling=hr,Xe=hr,Te=ze}if(We.done)return a(z,Te),Ke&&ns(z,Le),Ae;if(Te===null){for(;!We.done;Le++,We=Y.next())We=se(z,We.value,ne),We!==null&&(O=_(We,O,Le),Xe===null?Ae=We:Xe.sibling=We,Xe=We);return Ke&&ns(z,Le),Ae}for(Te=u(Te);!We.done;Le++,We=Y.next())We=Q(Te,z,Le,We.value,ne),We!==null&&(i&&We.alternate!==null&&Te.delete(We.key===null?Le:We.key),O=_(We,O,Le),Xe===null?Ae=We:Xe.sibling=We,Xe=We);return i&&Te.forEach(function(Ob){return r(z,Ob)}),Ke&&ns(z,Le),Ae}function ct(z,O,Y,ne){if(typeof Y=="object"&&Y!==null&&Y.type===B&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case x:e:{for(var Ae=Y.key;O!==null;){if(O.key===Ae){if(Ae=Y.type,Ae===B){if(O.tag===7){a(z,O.sibling),ne=y(O,Y.props.children),ne.return=z,z=ne;break e}}else if(O.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===M&&to(Ae)===O.type){a(z,O.sibling),ne=y(O,Y.props),vl(ne,Y),ne.return=z,z=ne;break e}a(z,O);break}else r(z,O);O=O.sibling}Y.type===B?(ne=Qr(Y.props.children,z.mode,ne,Y.key),ne.return=z,z=ne):(ne=ac(Y.type,Y.key,Y.props,null,z.mode,ne),vl(ne,Y),ne.return=z,z=ne)}return C(z);case U:e:{for(Ae=Y.key;O!==null;){if(O.key===Ae)if(O.tag===4&&O.stateNode.containerInfo===Y.containerInfo&&O.stateNode.implementation===Y.implementation){a(z,O.sibling),ne=y(O,Y.children||[]),ne.return=z,z=ne;break e}else{a(z,O);break}else r(z,O);O=O.sibling}ne=Lf(Y,z.mode,ne),ne.return=z,z=ne}return C(z);case M:return Y=to(Y),ct(z,O,Y,ne)}if(Pe(Y))return ge(z,O,Y,ne);if(L(Y)){if(Ae=L(Y),typeof Ae!="function")throw Error(s(150));return Y=Ae.call(Y),Ie(z,O,Y,ne)}if(typeof Y.then=="function")return ct(z,O,mc(Y),ne);if(Y.$$typeof===$)return ct(z,O,cc(z,Y),ne);pc(z,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,O!==null&&O.tag===6?(a(z,O.sibling),ne=y(O,Y),ne.return=z,z=ne):(a(z,O),ne=Uf(Y,z.mode,ne),ne.return=z,z=ne),C(z)):a(z,O)}return function(z,O,Y,ne){try{_l=0;var Ae=ct(z,O,Y,ne);return Qo=null,Ae}catch(Te){if(Te===$o||Te===fc)throw Te;var Xe=Pn(29,Te,null,z.mode);return Xe.lanes=ne,Xe.return=z,Xe}finally{}}}var io=ey(!0),ty=ey(!1),Qs=!1;function $f(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qf(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Xs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ws(i,r,a){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(nt&2)!==0){var y=u.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),u.pending=r,r=oc(i),Og(i,null,a),r}return rc(i,u,r,a),oc(i)}function Tl(i,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var u=r.lanes;u&=i.pendingLanes,a|=u,r.lanes=a,Ja(i,a)}}function Xf(i,r){var a=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var y=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var C={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?y=_=C:_=_.next=C,a=a.next}while(a!==null);_===null?y=_=r:_=_.next=r}else y=_=r;a={baseState:u.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:u.shared,callbacks:u.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=r:i.next=r,a.lastBaseUpdate=r}var Wf=!1;function El(){if(Wf){var i=Ko;if(i!==null)throw i}}function Sl(i,r,a,u){Wf=!1;var y=i.updateQueue;Qs=!1;var _=y.firstBaseUpdate,C=y.lastBaseUpdate,b=y.shared.pending;if(b!==null){y.shared.pending=null;var k=b,j=k.next;k.next=null,C===null?_=j:C.next=j,C=k;var W=i.alternate;W!==null&&(W=W.updateQueue,b=W.lastBaseUpdate,b!==C&&(b===null?W.firstBaseUpdate=j:b.next=j,W.lastBaseUpdate=k))}if(_!==null){var se=y.baseState;C=0,W=j=k=null,b=_;do{var J=b.lane&-536870913,Q=J!==b.lane;if(Q?(He&J)===J:(u&J)===J){J!==0&&J===Jo&&(Wf=!0),W!==null&&(W=W.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ge=i,Ie=b;J=r;var ct=a;switch(Ie.tag){case 1:if(ge=Ie.payload,typeof ge=="function"){se=ge.call(ct,se,J);break e}se=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Ie.payload,J=typeof ge=="function"?ge.call(ct,se,J):ge,J==null)break e;se=E({},se,J);break e;case 2:Qs=!0}}J=b.callback,J!==null&&(i.flags|=64,Q&&(i.flags|=8192),Q=y.callbacks,Q===null?y.callbacks=[J]:Q.push(J))}else Q={lane:J,tag:b.tag,payload:b.payload,callback:b.callback,next:null},W===null?(j=W=Q,k=se):W=W.next=Q,C|=J;if(b=b.next,b===null){if(b=y.shared.pending,b===null)break;Q=b,b=Q.next,Q.next=null,y.lastBaseUpdate=Q,y.shared.pending=null}}while(!0);W===null&&(k=se),y.baseState=k,y.firstBaseUpdate=j,y.lastBaseUpdate=W,_===null&&(y.shared.lanes=0),ir|=C,i.lanes=C,i.memoizedState=se}}function ny(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function iy(i,r){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)ny(a[i],r)}var Xo=q(null),gc=q(0);function sy(i,r){i=hs,de(gc,i),de(Xo,r),hs=i|r.baseLanes}function Zf(){de(gc,hs),de(Xo,Xo.current)}function eh(){hs=gc.current,ie(Xo),ie(gc)}var Vn=q(null),Qn=null;function Zs(i){var r=i.alternate;de(Rt,Rt.current&1),de(Vn,i),Qn===null&&(r===null||Xo.current!==null||r.memoizedState!==null)&&(Qn=i)}function th(i){de(Rt,Rt.current),de(Vn,i),Qn===null&&(Qn=i)}function ry(i){i.tag===22?(de(Rt,Rt.current),de(Vn,i),Qn===null&&(Qn=i)):er()}function er(){de(Rt,Rt.current),de(Vn,Vn.current)}function kn(i){ie(Vn),Qn===i&&(Qn=null),ie(Rt)}var Rt=q(0);function yc(i){for(var r=i;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||am(a)||lm(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var rs=0,Ue=null,lt=null,Lt=null,_c=!1,Wo=!1,so=!1,vc=0,Al=0,Zo=null,wI=0;function St(){throw Error(s(321))}function nh(i,r){if(r===null)return!1;for(var a=0;a<r.length&&a<i.length;a++)if(!Dn(i[a],r[a]))return!1;return!0}function ih(i,r,a,u,y,_){return rs=_,Ue=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,X.H=i===null||i.memoizedState===null?Hy:_h,so=!1,_=a(u,y),so=!1,Wo&&(_=ay(r,a,u,y)),oy(i),_}function oy(i){X.H=bl;var r=lt!==null&&lt.next!==null;if(rs=0,Lt=lt=Ue=null,_c=!1,Al=0,Zo=null,r)throw Error(s(300));i===null||Ot||(i=i.dependencies,i!==null&&uc(i)&&(Ot=!0))}function ay(i,r,a,u){Ue=i;var y=0;do{if(Wo&&(Zo=null),Al=0,Wo=!1,25<=y)throw Error(s(301));if(y+=1,Lt=lt=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}X.H=zy,_=r(a,u)}while(Wo);return _}function RI(){var i=X.H,r=i.useState()[0];return r=typeof r.then=="function"?Cl(r):r,i=i.useState()[0],(lt!==null?lt.memoizedState:null)!==i&&(Ue.flags|=1024),r}function sh(){var i=vc!==0;return vc=0,i}function rh(i,r,a){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~a}function oh(i){if(_c){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}_c=!1}rs=0,Lt=lt=Ue=null,Wo=!1,Al=vc=0,Zo=null}function yn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?Ue.memoizedState=Lt=i:Lt=Lt.next=i,Lt}function Nt(){if(lt===null){var i=Ue.alternate;i=i!==null?i.memoizedState:null}else i=lt.next;var r=Lt===null?Ue.memoizedState:Lt.next;if(r!==null)Lt=r,lt=i;else{if(i===null)throw Ue.alternate===null?Error(s(467)):Error(s(310));lt=i,i={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},Lt===null?Ue.memoizedState=Lt=i:Lt=Lt.next=i}return Lt}function Tc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Cl(i){var r=Al;return Al+=1,Zo===null&&(Zo=[]),i=Xg(Zo,i,r),r=Ue,(Lt===null?r.memoizedState:Lt.next)===null&&(r=r.alternate,X.H=r===null||r.memoizedState===null?Hy:_h),i}function Ec(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Cl(i);if(i.$$typeof===$)return on(i)}throw Error(s(438,String(i)))}function ah(i){var r=null,a=Ue.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var u=Ue.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Tc(),Ue.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(i),u=0;u<i;u++)a[u]=P;return r.index++,a}function os(i,r){return typeof r=="function"?r(i):r}function Sc(i){var r=Nt();return lh(r,lt,i)}function lh(i,r,a){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var y=i.baseQueue,_=u.pending;if(_!==null){if(y!==null){var C=y.next;y.next=_.next,_.next=C}r.baseQueue=y=_,u.pending=null}if(_=i.baseState,y===null)i.memoizedState=_;else{r=y.next;var b=C=null,k=null,j=r,W=!1;do{var se=j.lane&-536870913;if(se!==j.lane?(He&se)===se:(rs&se)===se){var J=j.revertLane;if(J===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),se===Jo&&(W=!0);else if((rs&J)===J){j=j.next,J===Jo&&(W=!0);continue}else se={lane:0,revertLane:j.revertLane,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},k===null?(b=k=se,C=_):k=k.next=se,Ue.lanes|=J,ir|=J;se=j.action,so&&a(_,se),_=j.hasEagerState?j.eagerState:a(_,se)}else J={lane:se,revertLane:j.revertLane,gesture:j.gesture,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},k===null?(b=k=J,C=_):k=k.next=J,Ue.lanes|=se,ir|=se;j=j.next}while(j!==null&&j!==r);if(k===null?C=_:k.next=b,!Dn(_,i.memoizedState)&&(Ot=!0,W&&(a=Ko,a!==null)))throw a;i.memoizedState=_,i.baseState=C,i.baseQueue=k,u.lastRenderedState=_}return y===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function uh(i){var r=Nt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var u=a.dispatch,y=a.pending,_=r.memoizedState;if(y!==null){a.pending=null;var C=y=y.next;do _=i(_,C.action),C=C.next;while(C!==y);Dn(_,r.memoizedState)||(Ot=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),a.lastRenderedState=_}return[_,u]}function ly(i,r,a){var u=Ue,y=Nt(),_=Ke;if(_){if(a===void 0)throw Error(s(407));a=a()}else a=r();var C=!Dn((lt||y).memoizedState,a);if(C&&(y.memoizedState=a,Ot=!0),y=y.queue,fh(dy.bind(null,u,y,i),[i]),y.getSnapshot!==r||C||Lt!==null&&Lt.memoizedState.tag&1){if(u.flags|=2048,ea(9,{destroy:void 0},cy.bind(null,u,y,a,r),null),dt===null)throw Error(s(349));_||(rs&127)!==0||uy(u,r,a)}return a}function uy(i,r,a){i.flags|=16384,i={getSnapshot:r,value:a},r=Ue.updateQueue,r===null?(r=Tc(),Ue.updateQueue=r,r.stores=[i]):(a=r.stores,a===null?r.stores=[i]:a.push(i))}function cy(i,r,a,u){r.value=a,r.getSnapshot=u,fy(r)&&hy(i)}function dy(i,r,a){return a(function(){fy(r)&&hy(i)})}function fy(i){var r=i.getSnapshot;i=i.value;try{var a=r();return!Dn(i,a)}catch{return!0}}function hy(i){var r=$r(i,2);r!==null&&bn(r,i,2)}function ch(i){var r=yn();if(typeof i=="function"){var a=i;if(i=a(),so){Bn(!0);try{a()}finally{Bn(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:os,lastRenderedState:i},r}function my(i,r,a,u){return i.baseState=a,lh(i,lt,typeof u=="function"?u:os)}function NI(i,r,a,u,y){if(Ic(i))throw Error(s(485));if(i=r.action,i!==null){var _={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){_.listeners.push(C)}};X.T!==null?a(!0):_.isTransition=!1,u(_),a=r.pending,a===null?(_.next=r.pending=_,py(r,_)):(_.next=a.next,r.pending=a.next=_)}}function py(i,r){var a=r.action,u=r.payload,y=i.state;if(r.isTransition){var _=X.T,C={};X.T=C;try{var b=a(y,u),k=X.S;k!==null&&k(C,b),gy(i,r,b)}catch(j){dh(i,r,j)}finally{_!==null&&C.types!==null&&(_.types=C.types),X.T=_}}else try{_=a(y,u),gy(i,r,_)}catch(j){dh(i,r,j)}}function gy(i,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){yy(i,r,u)},function(u){return dh(i,r,u)}):yy(i,r,a)}function yy(i,r,a){r.status="fulfilled",r.value=a,_y(r),i.state=a,r=i.pending,r!==null&&(a=r.next,a===r?i.pending=null:(a=a.next,r.next=a,py(i,a)))}function dh(i,r,a){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=a,_y(r),r=r.next;while(r!==u)}i.action=null}function _y(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function vy(i,r){return r}function Ty(i,r){if(Ke){var a=dt.formState;if(a!==null){e:{var u=Ue;if(Ke){if(mt){t:{for(var y=mt,_=$n;y.nodeType!==8;){if(!_){y=null;break t}if(y=Xn(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){mt=Xn(y.nextSibling),u=y.data==="F!";break e}}Ks(u)}u=!1}u&&(r=a[0])}}return a=yn(),a.memoizedState=a.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vy,lastRenderedState:r},a.queue=u,a=qy.bind(null,Ue,u),u.dispatch=a,u=ch(!1),_=yh.bind(null,Ue,!1,u.queue),u=yn(),y={state:r,dispatch:null,action:i,pending:null},u.queue=y,a=NI.bind(null,Ue,y,_,a),y.dispatch=a,u.memoizedState=i,[r,a,!1]}function Ey(i){var r=Nt();return Sy(r,lt,i)}function Sy(i,r,a){if(r=lh(i,r,vy)[0],i=Sc(os)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=Cl(r)}catch(C){throw C===$o?fc:C}else u=r;r=Nt();var y=r.queue,_=y.dispatch;return a!==r.memoizedState&&(Ue.flags|=2048,ea(9,{destroy:void 0},MI.bind(null,y,a),null)),[u,_,i]}function MI(i,r){i.action=r}function Ay(i){var r=Nt(),a=lt;if(a!==null)return Sy(r,a,i);Nt(),r=r.memoizedState,a=Nt();var u=a.queue.dispatch;return a.memoizedState=i,[r,u,!1]}function ea(i,r,a,u){return i={tag:i,create:a,deps:u,inst:r,next:null},r=Ue.updateQueue,r===null&&(r=Tc(),Ue.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=i.next=i:(u=a.next,a.next=i,i.next=u,r.lastEffect=i),i}function Cy(){return Nt().memoizedState}function Ac(i,r,a,u){var y=yn();Ue.flags|=i,y.memoizedState=ea(1|r,{destroy:void 0},a,u===void 0?null:u)}function Cc(i,r,a,u){var y=Nt();u=u===void 0?null:u;var _=y.memoizedState.inst;lt!==null&&u!==null&&nh(u,lt.memoizedState.deps)?y.memoizedState=ea(r,_,a,u):(Ue.flags|=i,y.memoizedState=ea(1|r,_,a,u))}function Iy(i,r){Ac(8390656,8,i,r)}function fh(i,r){Cc(2048,8,i,r)}function DI(i){Ue.flags|=4;var r=Ue.updateQueue;if(r===null)r=Tc(),Ue.updateQueue=r,r.events=[i];else{var a=r.events;a===null?r.events=[i]:a.push(i)}}function by(i){var r=Nt().memoizedState;return DI({ref:r,nextImpl:i}),function(){if((nt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function xy(i,r){return Cc(4,2,i,r)}function wy(i,r){return Cc(4,4,i,r)}function Ry(i,r){if(typeof r=="function"){i=i();var a=r(i);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function Ny(i,r,a){a=a!=null?a.concat([i]):null,Cc(4,4,Ry.bind(null,r,i),a)}function hh(){}function My(i,r){var a=Nt();r=r===void 0?null:r;var u=a.memoizedState;return r!==null&&nh(r,u[1])?u[0]:(a.memoizedState=[i,r],i)}function Dy(i,r){var a=Nt();r=r===void 0?null:r;var u=a.memoizedState;if(r!==null&&nh(r,u[1]))return u[0];if(u=i(),so){Bn(!0);try{i()}finally{Bn(!1)}}return a.memoizedState=[u,r],u}function mh(i,r,a){return a===void 0||(rs&1073741824)!==0&&(He&261930)===0?i.memoizedState=r:(i.memoizedState=a,i=P_(),Ue.lanes|=i,ir|=i,a)}function Py(i,r,a,u){return Dn(a,r)?a:Xo.current!==null?(i=mh(i,a,u),Dn(i,r)||(Ot=!0),i):(rs&42)===0||(rs&1073741824)!==0&&(He&261930)===0?(Ot=!0,i.memoizedState=a):(i=P_(),Ue.lanes|=i,ir|=i,r)}function Vy(i,r,a,u,y){var _=ce.p;ce.p=_!==0&&8>_?_:8;var C=X.T,b={};X.T=b,yh(i,!1,r,a);try{var k=y(),j=X.S;if(j!==null&&j(b,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var W=xI(k,u);Il(i,r,W,On(i))}else Il(i,r,u,On(i))}catch(se){Il(i,r,{then:function(){},status:"rejected",reason:se},On())}finally{ce.p=_,C!==null&&b.types!==null&&(C.types=b.types),X.T=C}}function PI(){}function ph(i,r,a,u){if(i.tag!==5)throw Error(s(476));var y=ky(i).queue;Vy(i,y,r,Se,a===null?PI:function(){return Uy(i),a(u)})}function ky(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:Se,baseState:Se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:os,lastRenderedState:Se},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:os,lastRenderedState:a},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function Uy(i){var r=ky(i);r.next===null&&(r=i.alternate.memoizedState),Il(i,r.next.queue,{},On())}function gh(){return on(Hl)}function Ly(){return Nt().memoizedState}function Oy(){return Nt().memoizedState}function VI(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var a=On();i=Xs(a);var u=Ws(r,i,a);u!==null&&(bn(u,r,a),Tl(u,r,a)),r={cache:Yf()},i.payload=r;return}r=r.return}}function kI(i,r,a){var u=On();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ic(i)?By(r,a):(a=Vf(i,r,a,u),a!==null&&(bn(a,i,u),Fy(a,r,u)))}function qy(i,r,a){var u=On();Il(i,r,a,u)}function Il(i,r,a,u){var y={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ic(i))By(r,y);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var C=r.lastRenderedState,b=_(C,a);if(y.hasEagerState=!0,y.eagerState=b,Dn(b,C))return rc(i,r,y,0),dt===null&&sc(),!1}catch{}finally{}if(a=Vf(i,r,y,u),a!==null)return bn(a,i,u),Fy(a,r,u),!0}return!1}function yh(i,r,a,u){if(u={lane:2,revertLane:$h(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ic(i)){if(r)throw Error(s(479))}else r=Vf(i,a,u,2),r!==null&&bn(r,i,2)}function Ic(i){var r=i.alternate;return i===Ue||r!==null&&r===Ue}function By(i,r){Wo=_c=!0;var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}function Fy(i,r,a){if((a&4194048)!==0){var u=r.lanes;u&=i.pendingLanes,a|=u,r.lanes=a,Ja(i,a)}}var bl={readContext:on,use:Ec,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St};bl.useEffectEvent=St;var Hy={readContext:on,use:Ec,useCallback:function(i,r){return yn().memoizedState=[i,r===void 0?null:r],i},useContext:on,useEffect:Iy,useImperativeHandle:function(i,r,a){a=a!=null?a.concat([i]):null,Ac(4194308,4,Ry.bind(null,r,i),a)},useLayoutEffect:function(i,r){return Ac(4194308,4,i,r)},useInsertionEffect:function(i,r){Ac(4,2,i,r)},useMemo:function(i,r){var a=yn();r=r===void 0?null:r;var u=i();if(so){Bn(!0);try{i()}finally{Bn(!1)}}return a.memoizedState=[u,r],u},useReducer:function(i,r,a){var u=yn();if(a!==void 0){var y=a(r);if(so){Bn(!0);try{a(r)}finally{Bn(!1)}}}else y=r;return u.memoizedState=u.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},u.queue=i,i=i.dispatch=kI.bind(null,Ue,i),[u.memoizedState,i]},useRef:function(i){var r=yn();return i={current:i},r.memoizedState=i},useState:function(i){i=ch(i);var r=i.queue,a=qy.bind(null,Ue,r);return r.dispatch=a,[i.memoizedState,a]},useDebugValue:hh,useDeferredValue:function(i,r){var a=yn();return mh(a,i,r)},useTransition:function(){var i=ch(!1);return i=Vy.bind(null,Ue,i.queue,!0,!1),yn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,a){var u=Ue,y=yn();if(Ke){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),dt===null)throw Error(s(349));(He&127)!==0||uy(u,r,a)}y.memoizedState=a;var _={value:a,getSnapshot:r};return y.queue=_,Iy(dy.bind(null,u,_,i),[i]),u.flags|=2048,ea(9,{destroy:void 0},cy.bind(null,u,_,a,r),null),a},useId:function(){var i=yn(),r=dt.identifierPrefix;if(Ke){var a=Bi,u=qi;a=(u&~(1<<32-xt(u)-1)).toString(32)+a,r="_"+r+"R_"+a,a=vc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=wI++,r="_"+r+"r_"+a.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:gh,useFormState:Ty,useActionState:Ty,useOptimistic:function(i){var r=yn();r.memoizedState=r.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=yh.bind(null,Ue,!0,a),a.dispatch=r,[i,r]},useMemoCache:ah,useCacheRefresh:function(){return yn().memoizedState=VI.bind(null,Ue)},useEffectEvent:function(i){var r=yn(),a={impl:i};return r.memoizedState=a,function(){if((nt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},_h={readContext:on,use:Ec,useCallback:My,useContext:on,useEffect:fh,useImperativeHandle:Ny,useInsertionEffect:xy,useLayoutEffect:wy,useMemo:Dy,useReducer:Sc,useRef:Cy,useState:function(){return Sc(os)},useDebugValue:hh,useDeferredValue:function(i,r){var a=Nt();return Py(a,lt.memoizedState,i,r)},useTransition:function(){var i=Sc(os)[0],r=Nt().memoizedState;return[typeof i=="boolean"?i:Cl(i),r]},useSyncExternalStore:ly,useId:Ly,useHostTransitionStatus:gh,useFormState:Ey,useActionState:Ey,useOptimistic:function(i,r){var a=Nt();return my(a,lt,i,r)},useMemoCache:ah,useCacheRefresh:Oy};_h.useEffectEvent=by;var zy={readContext:on,use:Ec,useCallback:My,useContext:on,useEffect:fh,useImperativeHandle:Ny,useInsertionEffect:xy,useLayoutEffect:wy,useMemo:Dy,useReducer:uh,useRef:Cy,useState:function(){return uh(os)},useDebugValue:hh,useDeferredValue:function(i,r){var a=Nt();return lt===null?mh(a,i,r):Py(a,lt.memoizedState,i,r)},useTransition:function(){var i=uh(os)[0],r=Nt().memoizedState;return[typeof i=="boolean"?i:Cl(i),r]},useSyncExternalStore:ly,useId:Ly,useHostTransitionStatus:gh,useFormState:Ay,useActionState:Ay,useOptimistic:function(i,r){var a=Nt();return lt!==null?my(a,lt,i,r):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:ah,useCacheRefresh:Oy};zy.useEffectEvent=by;function vh(i,r,a,u){r=i.memoizedState,a=a(u,r),a=a==null?r:E({},r,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var Th={enqueueSetState:function(i,r,a){i=i._reactInternals;var u=On(),y=Xs(u);y.payload=r,a!=null&&(y.callback=a),r=Ws(i,y,u),r!==null&&(bn(r,i,u),Tl(r,i,u))},enqueueReplaceState:function(i,r,a){i=i._reactInternals;var u=On(),y=Xs(u);y.tag=1,y.payload=r,a!=null&&(y.callback=a),r=Ws(i,y,u),r!==null&&(bn(r,i,u),Tl(r,i,u))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var a=On(),u=Xs(a);u.tag=2,r!=null&&(u.callback=r),r=Ws(i,u,a),r!==null&&(bn(r,i,a),Tl(r,i,a))}};function Gy(i,r,a,u,y,_,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,_,C):r.prototype&&r.prototype.isPureReactComponent?!fl(a,u)||!fl(y,_):!0}function Yy(i,r,a,u){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,u),r.state!==i&&Th.enqueueReplaceState(r,r.state,null)}function ro(i,r){var a=r;if("ref"in r){a={};for(var u in r)u!=="ref"&&(a[u]=r[u])}if(i=i.defaultProps){a===r&&(a=E({},a));for(var y in i)a[y]===void 0&&(a[y]=i[y])}return a}function jy(i){ic(i)}function Jy(i){console.error(i)}function Ky(i){ic(i)}function bc(i,r){try{var a=i.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function $y(i,r,a){try{var u=i.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Eh(i,r,a){return a=Xs(a),a.tag=3,a.payload={element:null},a.callback=function(){bc(i,r)},a}function Qy(i){return i=Xs(i),i.tag=3,i}function Xy(i,r,a,u){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var _=u.value;i.payload=function(){return y(_)},i.callback=function(){$y(r,a,u)}}var C=a.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(i.callback=function(){$y(r,a,u),typeof y!="function"&&(sr===null?sr=new Set([this]):sr.add(this));var b=u.stack;this.componentDidCatch(u.value,{componentStack:b!==null?b:""})})}function UI(i,r,a,u,y){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=a.alternate,r!==null&&jo(r,a,y,!0),a=Vn.current,a!==null){switch(a.tag){case 31:case 13:return Qn===null?Oc():a.alternate===null&&At===0&&(At=3),a.flags&=-257,a.flags|=65536,a.lanes=y,u===hc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([u]):r.add(u),jh(i,u,y)),!1;case 22:return a.flags|=65536,u===hc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([u]):a.add(u)),jh(i,u,y)),!1}throw Error(s(435,a.tag))}return jh(i,u,y),Oc(),!1}if(Ke)return r=Vn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,u!==Bf&&(i=Error(s(422),{cause:u}),pl(jn(i,a)))):(u!==Bf&&(r=Error(s(423),{cause:u}),pl(jn(r,a))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,u=jn(u,a),y=Eh(i.stateNode,u,y),Xf(i,y),At!==4&&(At=2)),!1;var _=Error(s(520),{cause:u});if(_=jn(_,a),Vl===null?Vl=[_]:Vl.push(_),At!==4&&(At=2),r===null)return!0;u=jn(u,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,i=y&-y,a.lanes|=i,i=Eh(a.stateNode,u,i),Xf(a,i),!1;case 1:if(r=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(sr===null||!sr.has(_))))return a.flags|=65536,y&=-y,a.lanes|=y,y=Qy(y),Xy(y,i,a,u),Xf(a,y),!1}a=a.return}while(a!==null);return!1}var Sh=Error(s(461)),Ot=!1;function an(i,r,a,u){r.child=i===null?ty(r,null,a,u):io(r,i.child,a,u)}function Wy(i,r,a,u,y){a=a.render;var _=r.ref;if("ref"in u){var C={};for(var b in u)b!=="ref"&&(C[b]=u[b])}else C=u;return Zr(r),u=ih(i,r,a,C,_,y),b=sh(),i!==null&&!Ot?(rh(i,r,y),as(i,r,y)):(Ke&&b&&Of(r),r.flags|=1,an(i,r,u,y),r.child)}function Zy(i,r,a,u,y){if(i===null){var _=a.type;return typeof _=="function"&&!kf(_)&&_.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=_,e_(i,r,_,u,y)):(i=ac(a.type,null,u,r,r.mode,y),i.ref=r.ref,i.return=r,r.child=i)}if(_=i.child,!Nh(i,y)){var C=_.memoizedProps;if(a=a.compare,a=a!==null?a:fl,a(C,u)&&i.ref===r.ref)return as(i,r,y)}return r.flags|=1,i=ts(_,u),i.ref=r.ref,i.return=r,r.child=i}function e_(i,r,a,u,y){if(i!==null){var _=i.memoizedProps;if(fl(_,u)&&i.ref===r.ref)if(Ot=!1,r.pendingProps=u=_,Nh(i,y))(i.flags&131072)!==0&&(Ot=!0);else return r.lanes=i.lanes,as(i,r,y)}return Ah(i,r,a,u,y)}function t_(i,r,a,u){var y=u.children,_=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|a:a,i!==null){for(u=r.child=i.child,y=0;u!==null;)y=y|u.lanes|u.childLanes,u=u.sibling;u=y&~_}else u=0,r.child=null;return n_(i,r,_,a,u)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&dc(r,_!==null?_.cachePool:null),_!==null?sy(r,_):Zf(),ry(r);else return u=r.lanes=536870912,n_(i,r,_!==null?_.baseLanes|a:a,a,u)}else _!==null?(dc(r,_.cachePool),sy(r,_),er(),r.memoizedState=null):(i!==null&&dc(r,null),Zf(),er());return an(i,r,y,a),r.child}function xl(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function n_(i,r,a,u,y){var _=Jf();return _=_===null?null:{parent:Ut._currentValue,pool:_},r.memoizedState={baseLanes:a,cachePool:_},i!==null&&dc(r,null),Zf(),ry(r),i!==null&&jo(i,r,u,!0),r.childLanes=y,null}function xc(i,r){return r=Rc({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function i_(i,r,a){return io(r,i.child,null,a),i=xc(r,r.pendingProps),i.flags|=2,kn(r),r.memoizedState=null,i}function LI(i,r,a){var u=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(Ke){if(u.mode==="hidden")return i=xc(r,u),r.lanes=536870912,xl(null,i);if(th(r),(i=mt)?(i=pv(i,$n),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:js!==null?{id:qi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},a=Bg(i),a.return=r,r.child=a,rn=r,mt=null)):i=null,i===null)throw Ks(r);return r.lanes=536870912,null}return xc(r,u)}var _=i.memoizedState;if(_!==null){var C=_.dehydrated;if(th(r),y)if(r.flags&256)r.flags&=-257,r=i_(i,r,a);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(Ot||jo(i,r,a,!1),y=(a&i.childLanes)!==0,Ot||y){if(u=dt,u!==null&&(C=Ka(u,a),C!==0&&C!==_.retryLane))throw _.retryLane=C,$r(i,C),bn(u,i,C),Sh;Oc(),r=i_(i,r,a)}else i=_.treeContext,mt=Xn(C.nextSibling),rn=r,Ke=!0,Js=null,$n=!1,i!==null&&zg(r,i),r=xc(r,u),r.flags|=4096;return r}return i=ts(i.child,{mode:u.mode,children:u.children}),i.ref=r.ref,r.child=i,i.return=r,i}function wc(i,r){var a=r.ref;if(a===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(r.flags|=4194816)}}function Ah(i,r,a,u,y){return Zr(r),a=ih(i,r,a,u,void 0,y),u=sh(),i!==null&&!Ot?(rh(i,r,y),as(i,r,y)):(Ke&&u&&Of(r),r.flags|=1,an(i,r,a,y),r.child)}function s_(i,r,a,u,y,_){return Zr(r),r.updateQueue=null,a=ay(r,u,a,y),oy(i),u=sh(),i!==null&&!Ot?(rh(i,r,_),as(i,r,_)):(Ke&&u&&Of(r),r.flags|=1,an(i,r,a,_),r.child)}function r_(i,r,a,u,y){if(Zr(r),r.stateNode===null){var _=Ho,C=a.contextType;typeof C=="object"&&C!==null&&(_=on(C)),_=new a(u,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Th,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=u,_.state=r.memoizedState,_.refs={},$f(r),C=a.contextType,_.context=typeof C=="object"&&C!==null?on(C):Ho,_.state=r.memoizedState,C=a.getDerivedStateFromProps,typeof C=="function"&&(vh(r,a,C,u),_.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(C=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),C!==_.state&&Th.enqueueReplaceState(_,_.state,null),Sl(r,u,_,y),El(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(i===null){_=r.stateNode;var b=r.memoizedProps,k=ro(a,b);_.props=k;var j=_.context,W=a.contextType;C=Ho,typeof W=="object"&&W!==null&&(C=on(W));var se=a.getDerivedStateFromProps;W=typeof se=="function"||typeof _.getSnapshotBeforeUpdate=="function",b=r.pendingProps!==b,W||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(b||j!==C)&&Yy(r,_,u,C),Qs=!1;var J=r.memoizedState;_.state=J,Sl(r,u,_,y),El(),j=r.memoizedState,b||J!==j||Qs?(typeof se=="function"&&(vh(r,a,se,u),j=r.memoizedState),(k=Qs||Gy(r,a,k,u,J,j,C))?(W||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=j),_.props=u,_.state=j,_.context=C,u=k):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{_=r.stateNode,Qf(i,r),C=r.memoizedProps,W=ro(a,C),_.props=W,se=r.pendingProps,J=_.context,j=a.contextType,k=Ho,typeof j=="object"&&j!==null&&(k=on(j)),b=a.getDerivedStateFromProps,(j=typeof b=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C!==se||J!==k)&&Yy(r,_,u,k),Qs=!1,J=r.memoizedState,_.state=J,Sl(r,u,_,y),El();var Q=r.memoizedState;C!==se||J!==Q||Qs||i!==null&&i.dependencies!==null&&uc(i.dependencies)?(typeof b=="function"&&(vh(r,a,b,u),Q=r.memoizedState),(W=Qs||Gy(r,a,W,u,J,Q,k)||i!==null&&i.dependencies!==null&&uc(i.dependencies))?(j||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,Q,k),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,Q,k)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||C===i.memoizedProps&&J===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&J===i.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=Q),_.props=u,_.state=Q,_.context=k,u=W):(typeof _.componentDidUpdate!="function"||C===i.memoizedProps&&J===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&J===i.memoizedState||(r.flags|=1024),u=!1)}return _=u,wc(i,r),u=(r.flags&128)!==0,_||u?(_=r.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,i!==null&&u?(r.child=io(r,i.child,null,y),r.child=io(r,null,a,y)):an(i,r,a,y),r.memoizedState=_.state,i=r.child):i=as(i,r,y),i}function o_(i,r,a,u){return Xr(),r.flags|=256,an(i,r,a,u),r.child}var Ch={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ih(i){return{baseLanes:i,cachePool:$g()}}function bh(i,r,a){return i=i!==null?i.childLanes&~a:0,r&&(i|=Ln),i}function a_(i,r,a){var u=r.pendingProps,y=!1,_=(r.flags&128)!==0,C;if((C=_)||(C=i!==null&&i.memoizedState===null?!1:(Rt.current&2)!==0),C&&(y=!0,r.flags&=-129),C=(r.flags&32)!==0,r.flags&=-33,i===null){if(Ke){if(y?Zs(r):er(),(i=mt)?(i=pv(i,$n),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:js!==null?{id:qi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},a=Bg(i),a.return=r,r.child=a,rn=r,mt=null)):i=null,i===null)throw Ks(r);return lm(i)?r.lanes=32:r.lanes=536870912,null}var b=u.children;return u=u.fallback,y?(er(),y=r.mode,b=Rc({mode:"hidden",children:b},y),u=Qr(u,y,a,null),b.return=r,u.return=r,b.sibling=u,r.child=b,u=r.child,u.memoizedState=Ih(a),u.childLanes=bh(i,C,a),r.memoizedState=Ch,xl(null,u)):(Zs(r),xh(r,b))}var k=i.memoizedState;if(k!==null&&(b=k.dehydrated,b!==null)){if(_)r.flags&256?(Zs(r),r.flags&=-257,r=wh(i,r,a)):r.memoizedState!==null?(er(),r.child=i.child,r.flags|=128,r=null):(er(),b=u.fallback,y=r.mode,u=Rc({mode:"visible",children:u.children},y),b=Qr(b,y,a,null),b.flags|=2,u.return=r,b.return=r,u.sibling=b,r.child=u,io(r,i.child,null,a),u=r.child,u.memoizedState=Ih(a),u.childLanes=bh(i,C,a),r.memoizedState=Ch,r=xl(null,u));else if(Zs(r),lm(b)){if(C=b.nextSibling&&b.nextSibling.dataset,C)var j=C.dgst;C=j,u=Error(s(419)),u.stack="",u.digest=C,pl({value:u,source:null,stack:null}),r=wh(i,r,a)}else if(Ot||jo(i,r,a,!1),C=(a&i.childLanes)!==0,Ot||C){if(C=dt,C!==null&&(u=Ka(C,a),u!==0&&u!==k.retryLane))throw k.retryLane=u,$r(i,u),bn(C,i,u),Sh;am(b)||Oc(),r=wh(i,r,a)}else am(b)?(r.flags|=192,r.child=i.child,r=null):(i=k.treeContext,mt=Xn(b.nextSibling),rn=r,Ke=!0,Js=null,$n=!1,i!==null&&zg(r,i),r=xh(r,u.children),r.flags|=4096);return r}return y?(er(),b=u.fallback,y=r.mode,k=i.child,j=k.sibling,u=ts(k,{mode:"hidden",children:u.children}),u.subtreeFlags=k.subtreeFlags&65011712,j!==null?b=ts(j,b):(b=Qr(b,y,a,null),b.flags|=2),b.return=r,u.return=r,u.sibling=b,r.child=u,xl(null,u),u=r.child,b=i.child.memoizedState,b===null?b=Ih(a):(y=b.cachePool,y!==null?(k=Ut._currentValue,y=y.parent!==k?{parent:k,pool:k}:y):y=$g(),b={baseLanes:b.baseLanes|a,cachePool:y}),u.memoizedState=b,u.childLanes=bh(i,C,a),r.memoizedState=Ch,xl(i.child,u)):(Zs(r),a=i.child,i=a.sibling,a=ts(a,{mode:"visible",children:u.children}),a.return=r,a.sibling=null,i!==null&&(C=r.deletions,C===null?(r.deletions=[i],r.flags|=16):C.push(i)),r.child=a,r.memoizedState=null,a)}function xh(i,r){return r=Rc({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function Rc(i,r){return i=Pn(22,i,null,r),i.lanes=0,i}function wh(i,r,a){return io(r,i.child,null,a),i=xh(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function l_(i,r,a){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r),zf(i.return,r,a)}function Rh(i,r,a,u,y,_){var C=i.memoizedState;C===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:y,treeForkCount:_}:(C.isBackwards=r,C.rendering=null,C.renderingStartTime=0,C.last=u,C.tail=a,C.tailMode=y,C.treeForkCount=_)}function u_(i,r,a){var u=r.pendingProps,y=u.revealOrder,_=u.tail;u=u.children;var C=Rt.current,b=(C&2)!==0;if(b?(C=C&1|2,r.flags|=128):C&=1,de(Rt,C),an(i,r,u,a),u=Ke?ml:0,!b&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&l_(i,a,r);else if(i.tag===19)l_(i,a,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(a=r.child,y=null;a!==null;)i=a.alternate,i!==null&&yc(i)===null&&(y=a),a=a.sibling;a=y,a===null?(y=r.child,r.child=null):(y=a.sibling,a.sibling=null),Rh(r,!1,y,a,_,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=r.child,r.child=null;y!==null;){if(i=y.alternate,i!==null&&yc(i)===null){r.child=y;break}i=y.sibling,y.sibling=a,a=y,y=i}Rh(r,!0,a,null,_,u);break;case"together":Rh(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function as(i,r,a){if(i!==null&&(r.dependencies=i.dependencies),ir|=r.lanes,(a&r.childLanes)===0)if(i!==null){if(jo(i,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,a=ts(i,i.pendingProps),r.child=a,a.return=r;i.sibling!==null;)i=i.sibling,a=a.sibling=ts(i,i.pendingProps),a.return=r;a.sibling=null}return r.child}function Nh(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&uc(i)))}function OI(i,r,a){switch(r.tag){case 3:It(r,r.stateNode.containerInfo),$s(r,Ut,i.memoizedState.cache),Xr();break;case 27:case 5:le(r);break;case 4:It(r,r.stateNode.containerInfo);break;case 10:$s(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,th(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Zs(r),r.flags|=128,null):(a&r.child.childLanes)!==0?a_(i,r,a):(Zs(r),i=as(i,r,a),i!==null?i.sibling:null);Zs(r);break;case 19:var y=(i.flags&128)!==0;if(u=(a&r.childLanes)!==0,u||(jo(i,r,a,!1),u=(a&r.childLanes)!==0),y){if(u)return u_(i,r,a);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),de(Rt,Rt.current),u)break;return null;case 22:return r.lanes=0,t_(i,r,a,r.pendingProps);case 24:$s(r,Ut,i.memoizedState.cache)}return as(i,r,a)}function c_(i,r,a){if(i!==null)if(i.memoizedProps!==r.pendingProps)Ot=!0;else{if(!Nh(i,a)&&(r.flags&128)===0)return Ot=!1,OI(i,r,a);Ot=(i.flags&131072)!==0}else Ot=!1,Ke&&(r.flags&1048576)!==0&&Hg(r,ml,r.index);switch(r.lanes=0,r.tag){case 16:e:{var u=r.pendingProps;if(i=to(r.elementType),r.type=i,typeof i=="function")kf(i)?(u=ro(i,u),r.tag=1,r=r_(null,r,i,u,a)):(r.tag=0,r=Ah(null,r,i,u,a));else{if(i!=null){var y=i.$$typeof;if(y===F){r.tag=11,r=Wy(null,r,i,u,a);break e}else if(y===N){r.tag=14,r=Zy(null,r,i,u,a);break e}}throw r=Oe(i)||i,Error(s(306,r,""))}}return r;case 0:return Ah(i,r,r.type,r.pendingProps,a);case 1:return u=r.type,y=ro(u,r.pendingProps),r_(i,r,u,y,a);case 3:e:{if(It(r,r.stateNode.containerInfo),i===null)throw Error(s(387));u=r.pendingProps;var _=r.memoizedState;y=_.element,Qf(i,r),Sl(r,u,null,a);var C=r.memoizedState;if(u=C.cache,$s(r,Ut,u),u!==_.cache&&Gf(r,[Ut],a,!0),El(),u=C.element,_.isDehydrated)if(_={element:u,isDehydrated:!1,cache:C.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=o_(i,r,u,a);break e}else if(u!==y){y=jn(Error(s(424)),r),pl(y),r=o_(i,r,u,a);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(mt=Xn(i.firstChild),rn=r,Ke=!0,Js=null,$n=!0,a=ty(r,null,u,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Xr(),u===y){r=as(i,r,a);break e}an(i,r,u,a)}r=r.child}return r;case 26:return wc(i,r),i===null?(a=Ev(r.type,null,r.pendingProps,null))?r.memoizedState=a:Ke||(a=r.type,i=r.pendingProps,u=Yc(Ve.current).createElement(a),u[Pt]=r,u[$t]=i,ln(u,a,i),Vt(u),r.stateNode=u):r.memoizedState=Ev(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return le(r),i===null&&Ke&&(u=r.stateNode=_v(r.type,r.pendingProps,Ve.current),rn=r,$n=!0,y=mt,lr(r.type)?(um=y,mt=Xn(u.firstChild)):mt=y),an(i,r,r.pendingProps.children,a),wc(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&Ke&&((y=u=mt)&&(u=mb(u,r.type,r.pendingProps,$n),u!==null?(r.stateNode=u,rn=r,mt=Xn(u.firstChild),$n=!1,y=!0):y=!1),y||Ks(r)),le(r),y=r.type,_=r.pendingProps,C=i!==null?i.memoizedProps:null,u=_.children,sm(y,_)?u=null:C!==null&&sm(y,C)&&(r.flags|=32),r.memoizedState!==null&&(y=ih(i,r,RI,null,null,a),Hl._currentValue=y),wc(i,r),an(i,r,u,a),r.child;case 6:return i===null&&Ke&&((i=a=mt)&&(a=pb(a,r.pendingProps,$n),a!==null?(r.stateNode=a,rn=r,mt=null,i=!0):i=!1),i||Ks(r)),null;case 13:return a_(i,r,a);case 4:return It(r,r.stateNode.containerInfo),u=r.pendingProps,i===null?r.child=io(r,null,u,a):an(i,r,u,a),r.child;case 11:return Wy(i,r,r.type,r.pendingProps,a);case 7:return an(i,r,r.pendingProps,a),r.child;case 8:return an(i,r,r.pendingProps.children,a),r.child;case 12:return an(i,r,r.pendingProps.children,a),r.child;case 10:return u=r.pendingProps,$s(r,r.type,u.value),an(i,r,u.children,a),r.child;case 9:return y=r.type._context,u=r.pendingProps.children,Zr(r),y=on(y),u=u(y),r.flags|=1,an(i,r,u,a),r.child;case 14:return Zy(i,r,r.type,r.pendingProps,a);case 15:return e_(i,r,r.type,r.pendingProps,a);case 19:return u_(i,r,a);case 31:return LI(i,r,a);case 22:return t_(i,r,a,r.pendingProps);case 24:return Zr(r),u=on(Ut),i===null?(y=Jf(),y===null&&(y=dt,_=Yf(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=a),y=_),r.memoizedState={parent:u,cache:y},$f(r),$s(r,Ut,y)):((i.lanes&a)!==0&&(Qf(i,r),Sl(r,null,null,a),El()),y=i.memoizedState,_=r.memoizedState,y.parent!==u?(y={parent:u,cache:u},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),$s(r,Ut,u)):(u=_.cache,$s(r,Ut,u),u!==y.cache&&Gf(r,[Ut],a,!0))),an(i,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function ls(i){i.flags|=4}function Mh(i,r,a,u,y){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(L_())i.flags|=8192;else throw no=hc,Kf}else i.flags&=-16777217}function d_(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!bv(r))if(L_())i.flags|=8192;else throw no=hc,Kf}function Nc(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Uu():536870912,i.lanes|=r,sa|=r)}function wl(i,r){if(!Ke)switch(i.tailMode){case"hidden":r=i.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function pt(i){var r=i.alternate!==null&&i.alternate.child===i.child,a=0,u=0;if(r)for(var y=i.child;y!==null;)a|=y.lanes|y.childLanes,u|=y.subtreeFlags&65011712,u|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)a|=y.lanes|y.childLanes,u|=y.subtreeFlags,u|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=u,i.childLanes=a,r}function qI(i,r,a){var u=r.pendingProps;switch(qf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(r),null;case 1:return pt(r),null;case 3:return a=r.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),ss(Ut),ft(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Yo(r)?ls(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Ff())),pt(r),null;case 26:var y=r.type,_=r.memoizedState;return i===null?(ls(r),_!==null?(pt(r),d_(r,_)):(pt(r),Mh(r,y,null,u,a))):_?_!==i.memoizedState?(ls(r),pt(r),d_(r,_)):(pt(r),r.flags&=-16777217):(i=i.memoizedProps,i!==u&&ls(r),pt(r),Mh(r,y,i,u,a)),null;case 27:if(pe(r),a=Ve.current,y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&ls(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return pt(r),null}i=he.current,Yo(r)?Gg(r):(i=_v(y,u,a),r.stateNode=i,ls(r))}return pt(r),null;case 5:if(pe(r),y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&ls(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return pt(r),null}if(_=he.current,Yo(r))Gg(r);else{var C=Yc(Ve.current);switch(_){case 1:_=C.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=C.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=C.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof u.is=="string"?C.createElement("select",{is:u.is}):C.createElement("select"),u.multiple?_.multiple=!0:u.size&&(_.size=u.size);break;default:_=typeof u.is=="string"?C.createElement(y,{is:u.is}):C.createElement(y)}}_[Pt]=r,_[$t]=u;e:for(C=r.child;C!==null;){if(C.tag===5||C.tag===6)_.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===r)break e;for(;C.sibling===null;){if(C.return===null||C.return===r)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}r.stateNode=_;e:switch(ln(_,y,u),y){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ls(r)}}return pt(r),Mh(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,a),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==u&&ls(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(s(166));if(i=Ve.current,Yo(r)){if(i=r.stateNode,a=r.memoizedProps,u=null,y=rn,y!==null)switch(y.tag){case 27:case 5:u=y.memoizedProps}i[Pt]=r,i=!!(i.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||av(i.nodeValue,a)),i||Ks(r,!0)}else i=Yc(i).createTextNode(u),i[Pt]=r,r.stateNode=i}return pt(r),null;case 31:if(a=r.memoizedState,i===null||i.memoizedState!==null){if(u=Yo(r),a!==null){if(i===null){if(!u)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[Pt]=r}else Xr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;pt(r),i=!1}else a=Ff(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return r.flags&256?(kn(r),r):(kn(r),null);if((r.flags&128)!==0)throw Error(s(558))}return pt(r),null;case 13:if(u=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=Yo(r),u!==null&&u.dehydrated!==null){if(i===null){if(!y)throw Error(s(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[Pt]=r}else Xr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;pt(r),y=!1}else y=Ff(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(kn(r),r):(kn(r),null)}return kn(r),(r.flags&128)!==0?(r.lanes=a,r):(a=u!==null,i=i!==null&&i.memoizedState!==null,a&&(u=r.child,y=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(y=u.alternate.memoizedState.cachePool.pool),_=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==y&&(u.flags|=2048)),a!==i&&a&&(r.child.flags|=8192),Nc(r,r.updateQueue),pt(r),null);case 4:return ft(),i===null&&Zh(r.stateNode.containerInfo),pt(r),null;case 10:return ss(r.type),pt(r),null;case 19:if(ie(Rt),u=r.memoizedState,u===null)return pt(r),null;if(y=(r.flags&128)!==0,_=u.rendering,_===null)if(y)wl(u,!1);else{if(At!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(_=yc(i),_!==null){for(r.flags|=128,wl(u,!1),i=_.updateQueue,r.updateQueue=i,Nc(r,i),r.subtreeFlags=0,i=a,a=r.child;a!==null;)qg(a,i),a=a.sibling;return de(Rt,Rt.current&1|2),Ke&&ns(r,u.treeForkCount),r.child}i=i.sibling}u.tail!==null&&Gt()>kc&&(r.flags|=128,y=!0,wl(u,!1),r.lanes=4194304)}else{if(!y)if(i=yc(_),i!==null){if(r.flags|=128,y=!0,i=i.updateQueue,r.updateQueue=i,Nc(r,i),wl(u,!0),u.tail===null&&u.tailMode==="hidden"&&!_.alternate&&!Ke)return pt(r),null}else 2*Gt()-u.renderingStartTime>kc&&a!==536870912&&(r.flags|=128,y=!0,wl(u,!1),r.lanes=4194304);u.isBackwards?(_.sibling=r.child,r.child=_):(i=u.last,i!==null?i.sibling=_:r.child=_,u.last=_)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=Gt(),i.sibling=null,a=Rt.current,de(Rt,y?a&1|2:a&1),Ke&&ns(r,u.treeForkCount),i):(pt(r),null);case 22:case 23:return kn(r),eh(),u=r.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(a&536870912)!==0&&(r.flags&128)===0&&(pt(r),r.subtreeFlags&6&&(r.flags|=8192)):pt(r),a=r.updateQueue,a!==null&&Nc(r,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==a&&(r.flags|=2048),i!==null&&ie(eo),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),ss(Ut),pt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function BI(i,r){switch(qf(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return ss(Ut),ft(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return pe(r),null;case 31:if(r.memoizedState!==null){if(kn(r),r.alternate===null)throw Error(s(340));Xr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(kn(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Xr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return ie(Rt),null;case 4:return ft(),null;case 10:return ss(r.type),null;case 22:case 23:return kn(r),eh(),i!==null&&ie(eo),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return ss(Ut),null;case 25:return null;default:return null}}function f_(i,r){switch(qf(r),r.tag){case 3:ss(Ut),ft();break;case 26:case 27:case 5:pe(r);break;case 4:ft();break;case 31:r.memoizedState!==null&&kn(r);break;case 13:kn(r);break;case 19:ie(Rt);break;case 10:ss(r.type);break;case 22:case 23:kn(r),eh(),i!==null&&ie(eo);break;case 24:ss(Ut)}}function Rl(i,r){try{var a=r.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var y=u.next;a=y;do{if((a.tag&i)===i){u=void 0;var _=a.create,C=a.inst;u=_(),C.destroy=u}a=a.next}while(a!==y)}}catch(b){ot(r,r.return,b)}}function tr(i,r,a){try{var u=r.updateQueue,y=u!==null?u.lastEffect:null;if(y!==null){var _=y.next;u=_;do{if((u.tag&i)===i){var C=u.inst,b=C.destroy;if(b!==void 0){C.destroy=void 0,y=r;var k=a,j=b;try{j()}catch(W){ot(y,k,W)}}}u=u.next}while(u!==_)}}catch(W){ot(r,r.return,W)}}function h_(i){var r=i.updateQueue;if(r!==null){var a=i.stateNode;try{iy(r,a)}catch(u){ot(i,i.return,u)}}}function m_(i,r,a){a.props=ro(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(u){ot(i,r,u)}}function Nl(i,r){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof a=="function"?i.refCleanup=a(u):a.current=u}}catch(y){ot(i,r,y)}}function Fi(i,r){var a=i.ref,u=i.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(y){ot(i,r,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){ot(i,r,y)}else a.current=null}function p_(i){var r=i.type,a=i.memoizedProps,u=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(y){ot(i,i.return,y)}}function Dh(i,r,a){try{var u=i.stateNode;lb(u,i.type,a,r),u[$t]=r}catch(y){ot(i,i.return,y)}}function g_(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&lr(i.type)||i.tag===4}function Ph(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||g_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&lr(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Vh(i,r,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(i),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=oi));else if(u!==4&&(u===27&&lr(i.type)&&(a=i.stateNode,r=null),i=i.child,i!==null))for(Vh(i,r,a),i=i.sibling;i!==null;)Vh(i,r,a),i=i.sibling}function Mc(i,r,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?a.insertBefore(i,r):a.appendChild(i);else if(u!==4&&(u===27&&lr(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(Mc(i,r,a),i=i.sibling;i!==null;)Mc(i,r,a),i=i.sibling}function y_(i){var r=i.stateNode,a=i.memoizedProps;try{for(var u=i.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);ln(r,u,a),r[Pt]=i,r[$t]=a}catch(_){ot(i,i.return,_)}}var us=!1,qt=!1,kh=!1,__=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function FI(i,r){if(i=i.containerInfo,nm=Wc,i=Ng(i),wf(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var y=u.anchorOffset,_=u.focusNode;u=u.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var C=0,b=-1,k=-1,j=0,W=0,se=i,J=null;t:for(;;){for(var Q;se!==a||y!==0&&se.nodeType!==3||(b=C+y),se!==_||u!==0&&se.nodeType!==3||(k=C+u),se.nodeType===3&&(C+=se.nodeValue.length),(Q=se.firstChild)!==null;)J=se,se=Q;for(;;){if(se===i)break t;if(J===a&&++j===y&&(b=C),J===_&&++W===u&&(k=C),(Q=se.nextSibling)!==null)break;se=J,J=se.parentNode}se=Q}a=b===-1||k===-1?null:{start:b,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(im={focusedElem:i,selectionRange:a},Wc=!1,Xt=r;Xt!==null;)if(r=Xt,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Xt=i;else for(;Xt!==null;){switch(r=Xt,_=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)y=i[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,a=r,y=_.memoizedProps,_=_.memoizedState,u=a.stateNode;try{var ge=ro(a.type,y);i=u.getSnapshotBeforeUpdate(ge,_),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ie){ot(a,a.return,Ie)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,a=i.nodeType,a===9)om(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":om(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Xt=i;break}Xt=r.return}}function v_(i,r,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:ds(i,a),u&4&&Rl(5,a);break;case 1:if(ds(i,a),u&4)if(i=a.stateNode,r===null)try{i.componentDidMount()}catch(C){ot(a,a.return,C)}else{var y=ro(a.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(y,r,i.__reactInternalSnapshotBeforeUpdate)}catch(C){ot(a,a.return,C)}}u&64&&h_(a),u&512&&Nl(a,a.return);break;case 3:if(ds(i,a),u&64&&(i=a.updateQueue,i!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{iy(i,r)}catch(C){ot(a,a.return,C)}}break;case 27:r===null&&u&4&&y_(a);case 26:case 5:ds(i,a),r===null&&u&4&&p_(a),u&512&&Nl(a,a.return);break;case 12:ds(i,a);break;case 31:ds(i,a),u&4&&S_(i,a);break;case 13:ds(i,a),u&4&&A_(i,a),u&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=QI.bind(null,a),gb(i,a))));break;case 22:if(u=a.memoizedState!==null||us,!u){r=r!==null&&r.memoizedState!==null||qt,y=us;var _=qt;us=u,(qt=r)&&!_?fs(i,a,(a.subtreeFlags&8772)!==0):ds(i,a),us=y,qt=_}break;case 30:break;default:ds(i,a)}}function T_(i){var r=i.alternate;r!==null&&(i.alternate=null,T_(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&wo(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var vt=null,Sn=!1;function cs(i,r,a){for(a=a.child;a!==null;)E_(i,r,a),a=a.sibling}function E_(i,r,a){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(ni,a)}catch{}switch(a.tag){case 26:qt||Fi(a,r),cs(i,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:qt||Fi(a,r);var u=vt,y=Sn;lr(a.type)&&(vt=a.stateNode,Sn=!1),cs(i,r,a),ql(a.stateNode),vt=u,Sn=y;break;case 5:qt||Fi(a,r);case 6:if(u=vt,y=Sn,vt=null,cs(i,r,a),vt=u,Sn=y,vt!==null)if(Sn)try{(vt.nodeType===9?vt.body:vt.nodeName==="HTML"?vt.ownerDocument.body:vt).removeChild(a.stateNode)}catch(_){ot(a,r,_)}else try{vt.removeChild(a.stateNode)}catch(_){ot(a,r,_)}break;case 18:vt!==null&&(Sn?(i=vt,hv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),fa(i)):hv(vt,a.stateNode));break;case 4:u=vt,y=Sn,vt=a.stateNode.containerInfo,Sn=!0,cs(i,r,a),vt=u,Sn=y;break;case 0:case 11:case 14:case 15:tr(2,a,r),qt||tr(4,a,r),cs(i,r,a);break;case 1:qt||(Fi(a,r),u=a.stateNode,typeof u.componentWillUnmount=="function"&&m_(a,r,u)),cs(i,r,a);break;case 21:cs(i,r,a);break;case 22:qt=(u=qt)||a.memoizedState!==null,cs(i,r,a),qt=u;break;default:cs(i,r,a)}}function S_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{fa(i)}catch(a){ot(r,r.return,a)}}}function A_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{fa(i)}catch(a){ot(r,r.return,a)}}function HI(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new __),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new __),r;default:throw Error(s(435,i.tag))}}function Dc(i,r){var a=HI(i);r.forEach(function(u){if(!a.has(u)){a.add(u);var y=XI.bind(null,i,u);u.then(y,y)}})}function An(i,r){var a=r.deletions;if(a!==null)for(var u=0;u<a.length;u++){var y=a[u],_=i,C=r,b=C;e:for(;b!==null;){switch(b.tag){case 27:if(lr(b.type)){vt=b.stateNode,Sn=!1;break e}break;case 5:vt=b.stateNode,Sn=!1;break e;case 3:case 4:vt=b.stateNode.containerInfo,Sn=!0;break e}b=b.return}if(vt===null)throw Error(s(160));E_(_,C,y),vt=null,Sn=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)C_(r,i),r=r.sibling}var fi=null;function C_(i,r){var a=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:An(r,i),Cn(i),u&4&&(tr(3,i,i.return),Rl(3,i),tr(5,i,i.return));break;case 1:An(r,i),Cn(i),u&512&&(qt||a===null||Fi(a,a.return)),u&64&&us&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var y=fi;if(An(r,i),Cn(i),u&512&&(qt||a===null||Fi(a,a.return)),u&4){var _=a!==null?a.memoizedState:null;if(u=i.memoizedState,a===null)if(u===null)if(i.stateNode===null){e:{u=i.type,a=i.memoizedProps,y=y.ownerDocument||y;t:switch(u){case"title":_=y.getElementsByTagName("title")[0],(!_||_[xi]||_[Pt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(u),y.head.insertBefore(_,y.querySelector("head > title"))),ln(_,u,a),_[Pt]=i,Vt(_),u=_;break e;case"link":var C=Cv("link","href",y).get(u+(a.href||""));if(C){for(var b=0;b<C.length;b++)if(_=C[b],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){C.splice(b,1);break t}}_=y.createElement(u),ln(_,u,a),y.head.appendChild(_);break;case"meta":if(C=Cv("meta","content",y).get(u+(a.content||""))){for(b=0;b<C.length;b++)if(_=C[b],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){C.splice(b,1);break t}}_=y.createElement(u),ln(_,u,a),y.head.appendChild(_);break;default:throw Error(s(468,u))}_[Pt]=i,Vt(_),u=_}i.stateNode=u}else Iv(y,i.type,i.stateNode);else i.stateNode=Av(y,u,i.memoizedProps);else _!==u?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,u===null?Iv(y,i.type,i.stateNode):Av(y,u,i.memoizedProps)):u===null&&i.stateNode!==null&&Dh(i,i.memoizedProps,a.memoizedProps)}break;case 27:An(r,i),Cn(i),u&512&&(qt||a===null||Fi(a,a.return)),a!==null&&u&4&&Dh(i,i.memoizedProps,a.memoizedProps);break;case 5:if(An(r,i),Cn(i),u&512&&(qt||a===null||Fi(a,a.return)),i.flags&32){y=i.stateNode;try{En(y,"")}catch(ge){ot(i,i.return,ge)}}u&4&&i.stateNode!=null&&(y=i.memoizedProps,Dh(i,y,a!==null?a.memoizedProps:y)),u&1024&&(kh=!0);break;case 6:if(An(r,i),Cn(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,a=i.stateNode;try{a.nodeValue=u}catch(ge){ot(i,i.return,ge)}}break;case 3:if(Kc=null,y=fi,fi=jc(r.containerInfo),An(r,i),fi=y,Cn(i),u&4&&a!==null&&a.memoizedState.isDehydrated)try{fa(r.containerInfo)}catch(ge){ot(i,i.return,ge)}kh&&(kh=!1,I_(i));break;case 4:u=fi,fi=jc(i.stateNode.containerInfo),An(r,i),Cn(i),fi=u;break;case 12:An(r,i),Cn(i);break;case 31:An(r,i),Cn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Dc(i,u)));break;case 13:An(r,i),Cn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Vc=Gt()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Dc(i,u)));break;case 22:y=i.memoizedState!==null;var k=a!==null&&a.memoizedState!==null,j=us,W=qt;if(us=j||y,qt=W||k,An(r,i),qt=W,us=j,Cn(i),u&8192)e:for(r=i.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(a===null||k||us||qt||oo(i)),a=null,r=i;;){if(r.tag===5||r.tag===26){if(a===null){k=a=r;try{if(_=k.stateNode,y)C=_.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{b=k.stateNode;var se=k.memoizedProps.style,J=se!=null&&se.hasOwnProperty("display")?se.display:null;b.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(ge){ot(k,k.return,ge)}}}else if(r.tag===6){if(a===null){k=r;try{k.stateNode.nodeValue=y?"":k.memoizedProps}catch(ge){ot(k,k.return,ge)}}}else if(r.tag===18){if(a===null){k=r;try{var Q=k.stateNode;y?mv(Q,!0):mv(k.stateNode,!1)}catch(ge){ot(k,k.return,ge)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=i.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Dc(i,a))));break;case 19:An(r,i),Cn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Dc(i,u)));break;case 30:break;case 21:break;default:An(r,i),Cn(i)}}function Cn(i){var r=i.flags;if(r&2){try{for(var a,u=i.return;u!==null;){if(g_(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var y=a.stateNode,_=Ph(i);Mc(i,_,y);break;case 5:var C=a.stateNode;a.flags&32&&(En(C,""),a.flags&=-33);var b=Ph(i);Mc(i,b,C);break;case 3:case 4:var k=a.stateNode.containerInfo,j=Ph(i);Vh(i,j,k);break;default:throw Error(s(161))}}catch(W){ot(i,i.return,W)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function I_(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;I_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function ds(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)v_(i,r.alternate,r),r=r.sibling}function oo(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:tr(4,r,r.return),oo(r);break;case 1:Fi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&m_(r,r.return,a),oo(r);break;case 27:ql(r.stateNode);case 26:case 5:Fi(r,r.return),oo(r);break;case 22:r.memoizedState===null&&oo(r);break;case 30:oo(r);break;default:oo(r)}i=i.sibling}}function fs(i,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,y=i,_=r,C=_.flags;switch(_.tag){case 0:case 11:case 15:fs(y,_,a),Rl(4,_);break;case 1:if(fs(y,_,a),u=_,y=u.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(j){ot(u,u.return,j)}if(u=_,y=u.updateQueue,y!==null){var b=u.stateNode;try{var k=y.shared.hiddenCallbacks;if(k!==null)for(y.shared.hiddenCallbacks=null,y=0;y<k.length;y++)ny(k[y],b)}catch(j){ot(u,u.return,j)}}a&&C&64&&h_(_),Nl(_,_.return);break;case 27:y_(_);case 26:case 5:fs(y,_,a),a&&u===null&&C&4&&p_(_),Nl(_,_.return);break;case 12:fs(y,_,a);break;case 31:fs(y,_,a),a&&C&4&&S_(y,_);break;case 13:fs(y,_,a),a&&C&4&&A_(y,_);break;case 22:_.memoizedState===null&&fs(y,_,a),Nl(_,_.return);break;case 30:break;default:fs(y,_,a)}r=r.sibling}}function Uh(i,r){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&gl(a))}function Lh(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&gl(i))}function hi(i,r,a,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)b_(i,r,a,u),r=r.sibling}function b_(i,r,a,u){var y=r.flags;switch(r.tag){case 0:case 11:case 15:hi(i,r,a,u),y&2048&&Rl(9,r);break;case 1:hi(i,r,a,u);break;case 3:hi(i,r,a,u),y&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&gl(i)));break;case 12:if(y&2048){hi(i,r,a,u),i=r.stateNode;try{var _=r.memoizedProps,C=_.id,b=_.onPostCommit;typeof b=="function"&&b(C,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(k){ot(r,r.return,k)}}else hi(i,r,a,u);break;case 31:hi(i,r,a,u);break;case 13:hi(i,r,a,u);break;case 23:break;case 22:_=r.stateNode,C=r.alternate,r.memoizedState!==null?_._visibility&2?hi(i,r,a,u):Ml(i,r):_._visibility&2?hi(i,r,a,u):(_._visibility|=2,ta(i,r,a,u,(r.subtreeFlags&10256)!==0||!1)),y&2048&&Uh(C,r);break;case 24:hi(i,r,a,u),y&2048&&Lh(r.alternate,r);break;default:hi(i,r,a,u)}}function ta(i,r,a,u,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=i,C=r,b=a,k=u,j=C.flags;switch(C.tag){case 0:case 11:case 15:ta(_,C,b,k,y),Rl(8,C);break;case 23:break;case 22:var W=C.stateNode;C.memoizedState!==null?W._visibility&2?ta(_,C,b,k,y):Ml(_,C):(W._visibility|=2,ta(_,C,b,k,y)),y&&j&2048&&Uh(C.alternate,C);break;case 24:ta(_,C,b,k,y),y&&j&2048&&Lh(C.alternate,C);break;default:ta(_,C,b,k,y)}r=r.sibling}}function Ml(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=i,u=r,y=u.flags;switch(u.tag){case 22:Ml(a,u),y&2048&&Uh(u.alternate,u);break;case 24:Ml(a,u),y&2048&&Lh(u.alternate,u);break;default:Ml(a,u)}r=r.sibling}}var Dl=8192;function na(i,r,a){if(i.subtreeFlags&Dl)for(i=i.child;i!==null;)x_(i,r,a),i=i.sibling}function x_(i,r,a){switch(i.tag){case 26:na(i,r,a),i.flags&Dl&&i.memoizedState!==null&&wb(a,fi,i.memoizedState,i.memoizedProps);break;case 5:na(i,r,a);break;case 3:case 4:var u=fi;fi=jc(i.stateNode.containerInfo),na(i,r,a),fi=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=Dl,Dl=16777216,na(i,r,a),Dl=u):na(i,r,a));break;default:na(i,r,a)}}function w_(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Pl(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];Xt=u,N_(u,i)}w_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)R_(i),i=i.sibling}function R_(i){switch(i.tag){case 0:case 11:case 15:Pl(i),i.flags&2048&&tr(9,i,i.return);break;case 3:Pl(i);break;case 12:Pl(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Pc(i)):Pl(i);break;default:Pl(i)}}function Pc(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];Xt=u,N_(u,i)}w_(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:tr(8,r,r.return),Pc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Pc(r));break;default:Pc(r)}i=i.sibling}}function N_(i,r){for(;Xt!==null;){var a=Xt;switch(a.tag){case 0:case 11:case 15:tr(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:gl(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Xt=u;else e:for(a=i;Xt!==null;){u=Xt;var y=u.sibling,_=u.return;if(T_(u),u===a){Xt=null;break e}if(y!==null){y.return=_,Xt=y;break e}Xt=_}}}var zI={getCacheForType:function(i){var r=on(Ut),a=r.data.get(i);return a===void 0&&(a=i(),r.data.set(i,a)),a},cacheSignal:function(){return on(Ut).controller.signal}},GI=typeof WeakMap=="function"?WeakMap:Map,nt=0,dt=null,qe=null,He=0,rt=0,Un=null,nr=!1,ia=!1,Oh=!1,hs=0,At=0,ir=0,ao=0,qh=0,Ln=0,sa=0,Vl=null,In=null,Bh=!1,Vc=0,M_=0,kc=1/0,Uc=null,sr=null,jt=0,rr=null,ra=null,ms=0,Fh=0,Hh=null,D_=null,kl=0,zh=null;function On(){return(nt&2)!==0&&He!==0?He&-He:X.T!==null?$h():Lu()}function P_(){if(Ln===0)if((He&536870912)===0||Ke){var i=Vr;Vr<<=1,(Vr&3932160)===0&&(Vr=262144),Ln=i}else Ln=536870912;return i=Vn.current,i!==null&&(i.flags|=32),Ln}function bn(i,r,a){(i===dt&&(rt===2||rt===9)||i.cancelPendingCommit!==null)&&(oa(i,0),or(i,He,Ln,!1)),kr(i,a),((nt&2)===0||i!==dt)&&(i===dt&&((nt&2)===0&&(ao|=a),At===4&&or(i,He,Ln,!1)),Hi(i))}function V_(i,r,a){if((nt&6)!==0)throw Error(s(327));var u=!a&&(r&127)===0&&(r&i.expiredLanes)===0||ii(i,r),y=u?JI(i,r):Yh(i,r,!0),_=u;do{if(y===0){ia&&!u&&or(i,r,0,!1);break}else{if(a=i.current.alternate,_&&!YI(a)){y=Yh(i,r,!1),_=!1;continue}if(y===2){if(_=r,i.errorRecoveryDisabledLanes&_)var C=0;else C=i.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){r=C;e:{var b=i;y=Vl;var k=b.current.memoizedState.isDehydrated;if(k&&(oa(b,C).flags|=256),C=Yh(b,C,!1),C!==2){if(Oh&&!k){b.errorRecoveryDisabledLanes|=_,ao|=_,y=4;break e}_=In,In=y,_!==null&&(In===null?In=_:In.push.apply(In,_))}y=C}if(_=!1,y!==2)continue}}if(y===1){oa(i,0),or(i,r,0,!0);break}e:{switch(u=i,_=y,_){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:or(u,r,Ln,!nr);break e;case 2:In=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(y=Vc+300-Gt(),10<y)){if(or(u,r,Ln,!nr),Ci(u,0,!0)!==0)break e;ms=r,u.timeoutHandle=dv(k_.bind(null,u,a,In,Uc,Bh,r,Ln,ao,sa,nr,_,"Throttled",-0,0),y);break e}k_(u,a,In,Uc,Bh,r,Ln,ao,sa,nr,_,null,-0,0)}}break}while(!0);Hi(i)}function k_(i,r,a,u,y,_,C,b,k,j,W,se,J,Q){if(i.timeoutHandle=-1,se=r.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:oi},x_(r,_,se);var ge=(_&62914560)===_?Vc-Gt():(_&4194048)===_?M_-Gt():0;if(ge=Rb(se,ge),ge!==null){ms=_,i.cancelPendingCommit=ge(z_.bind(null,i,r,_,a,u,y,C,b,k,W,se,null,J,Q)),or(i,_,C,!j);return}}z_(i,r,_,a,u,y,C,b,k)}function YI(i){for(var r=i;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var y=a[u],_=y.getSnapshot;y=y.value;try{if(!Dn(_(),y))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function or(i,r,a,u){r&=~qh,r&=~ao,i.suspendedLanes|=r,i.pingedLanes&=~r,u&&(i.warmLanes|=r),u=i.expirationTimes;for(var y=r;0<y;){var _=31-xt(y),C=1<<_;u[_]=-1,y&=~C}a!==0&&Ur(i,a,r)}function Lc(){return(nt&6)===0?(Ul(0),!1):!0}function Gh(){if(qe!==null){if(rt===0)var i=qe.return;else i=qe,is=Wr=null,oh(i),Qo=null,_l=0,i=qe;for(;i!==null;)f_(i.alternate,i),i=i.return;qe=null}}function oa(i,r){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,db(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),ms=0,Gh(),dt=i,qe=a=ts(i.current,null),He=r,rt=0,Un=null,nr=!1,ia=ii(i,r),Oh=!1,sa=Ln=qh=ao=ir=At=0,In=Vl=null,Bh=!1,(r&8)!==0&&(r|=r&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=r;0<u;){var y=31-xt(u),_=1<<y;r|=i[y],u&=~_}return hs=r,sc(),a}function U_(i,r){Ue=null,X.H=bl,r===$o||r===fc?(r=Wg(),rt=3):r===Kf?(r=Wg(),rt=4):rt=r===Sh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Un=r,qe===null&&(At=1,bc(i,jn(r,i.current)))}function L_(){var i=Vn.current;return i===null?!0:(He&4194048)===He?Qn===null:(He&62914560)===He||(He&536870912)!==0?i===Qn:!1}function O_(){var i=X.H;return X.H=bl,i===null?bl:i}function q_(){var i=X.A;return X.A=zI,i}function Oc(){At=4,nr||(He&4194048)!==He&&Vn.current!==null||(ia=!0),(ir&134217727)===0&&(ao&134217727)===0||dt===null||or(dt,He,Ln,!1)}function Yh(i,r,a){var u=nt;nt|=2;var y=O_(),_=q_();(dt!==i||He!==r)&&(Uc=null,oa(i,r)),r=!1;var C=At;e:do try{if(rt!==0&&qe!==null){var b=qe,k=Un;switch(rt){case 8:Gh(),C=6;break e;case 3:case 2:case 9:case 6:Vn.current===null&&(r=!0);var j=rt;if(rt=0,Un=null,aa(i,b,k,j),a&&ia){C=0;break e}break;default:j=rt,rt=0,Un=null,aa(i,b,k,j)}}jI(),C=At;break}catch(W){U_(i,W)}while(!0);return r&&i.shellSuspendCounter++,is=Wr=null,nt=u,X.H=y,X.A=_,qe===null&&(dt=null,He=0,sc()),C}function jI(){for(;qe!==null;)B_(qe)}function JI(i,r){var a=nt;nt|=2;var u=O_(),y=q_();dt!==i||He!==r?(Uc=null,kc=Gt()+500,oa(i,r)):ia=ii(i,r);e:do try{if(rt!==0&&qe!==null){r=qe;var _=Un;t:switch(rt){case 1:rt=0,Un=null,aa(i,r,_,1);break;case 2:case 9:if(Qg(_)){rt=0,Un=null,F_(r);break}r=function(){rt!==2&&rt!==9||dt!==i||(rt=7),Hi(i)},_.then(r,r);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:Qg(_)?(rt=0,Un=null,F_(r)):(rt=0,Un=null,aa(i,r,_,7));break;case 5:var C=null;switch(qe.tag){case 26:C=qe.memoizedState;case 5:case 27:var b=qe;if(C?bv(C):b.stateNode.complete){rt=0,Un=null;var k=b.sibling;if(k!==null)qe=k;else{var j=b.return;j!==null?(qe=j,qc(j)):qe=null}break t}}rt=0,Un=null,aa(i,r,_,5);break;case 6:rt=0,Un=null,aa(i,r,_,6);break;case 8:Gh(),At=6;break e;default:throw Error(s(462))}}KI();break}catch(W){U_(i,W)}while(!0);return is=Wr=null,X.H=u,X.A=y,nt=a,qe!==null?0:(dt=null,He=0,sc(),At)}function KI(){for(;qe!==null&&!Ee();)B_(qe)}function B_(i){var r=c_(i.alternate,i,hs);i.memoizedProps=i.pendingProps,r===null?qc(i):qe=r}function F_(i){var r=i,a=r.alternate;switch(r.tag){case 15:case 0:r=s_(a,r,r.pendingProps,r.type,void 0,He);break;case 11:r=s_(a,r,r.pendingProps,r.type.render,r.ref,He);break;case 5:oh(r);default:f_(a,r),r=qe=qg(r,hs),r=c_(a,r,hs)}i.memoizedProps=i.pendingProps,r===null?qc(i):qe=r}function aa(i,r,a,u){is=Wr=null,oh(r),Qo=null,_l=0;var y=r.return;try{if(UI(i,y,r,a,He)){At=1,bc(i,jn(a,i.current)),qe=null;return}}catch(_){if(y!==null)throw qe=y,_;At=1,bc(i,jn(a,i.current)),qe=null;return}r.flags&32768?(Ke||u===1?i=!0:ia||(He&536870912)!==0?i=!1:(nr=i=!0,(u===2||u===9||u===3||u===6)&&(u=Vn.current,u!==null&&u.tag===13&&(u.flags|=16384))),H_(r,i)):qc(r)}function qc(i){var r=i;do{if((r.flags&32768)!==0){H_(r,nr);return}i=r.return;var a=qI(r.alternate,r,hs);if(a!==null){qe=a;return}if(r=r.sibling,r!==null){qe=r;return}qe=r=i}while(r!==null);At===0&&(At=5)}function H_(i,r){do{var a=BI(i.alternate,i);if(a!==null){a.flags&=32767,qe=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(i=i.sibling,i!==null)){qe=i;return}qe=i=a}while(i!==null);At=6,qe=null}function z_(i,r,a,u,y,_,C,b,k){i.cancelPendingCommit=null;do Bc();while(jt!==0);if((nt&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(_=r.lanes|r.childLanes,_|=Pf,Cf(i,a,_,C,b,k),i===dt&&(qe=dt=null,He=0),ra=r,rr=i,ms=a,Fh=_,Hh=y,D_=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,WI(Us,function(){return K_(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=X.T,X.T=null,y=ce.p,ce.p=2,C=nt,nt|=4;try{FI(i,r,a)}finally{nt=C,ce.p=y,X.T=u}}jt=1,G_(),Y_(),j_()}}function G_(){if(jt===1){jt=0;var i=rr,r=ra,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=X.T,X.T=null;var u=ce.p;ce.p=2;var y=nt;nt|=4;try{C_(r,i);var _=im,C=Ng(i.containerInfo),b=_.focusedElem,k=_.selectionRange;if(C!==b&&b&&b.ownerDocument&&Rg(b.ownerDocument.documentElement,b)){if(k!==null&&wf(b)){var j=k.start,W=k.end;if(W===void 0&&(W=j),"selectionStart"in b)b.selectionStart=j,b.selectionEnd=Math.min(W,b.value.length);else{var se=b.ownerDocument||document,J=se&&se.defaultView||window;if(J.getSelection){var Q=J.getSelection(),ge=b.textContent.length,Ie=Math.min(k.start,ge),ct=k.end===void 0?Ie:Math.min(k.end,ge);!Q.extend&&Ie>ct&&(C=ct,ct=Ie,Ie=C);var z=wg(b,Ie),O=wg(b,ct);if(z&&O&&(Q.rangeCount!==1||Q.anchorNode!==z.node||Q.anchorOffset!==z.offset||Q.focusNode!==O.node||Q.focusOffset!==O.offset)){var Y=se.createRange();Y.setStart(z.node,z.offset),Q.removeAllRanges(),Ie>ct?(Q.addRange(Y),Q.extend(O.node,O.offset)):(Y.setEnd(O.node,O.offset),Q.addRange(Y))}}}}for(se=[],Q=b;Q=Q.parentNode;)Q.nodeType===1&&se.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<se.length;b++){var ne=se[b];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Wc=!!nm,im=nm=null}finally{nt=y,ce.p=u,X.T=a}}i.current=r,jt=2}}function Y_(){if(jt===2){jt=0;var i=rr,r=ra,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=X.T,X.T=null;var u=ce.p;ce.p=2;var y=nt;nt|=4;try{v_(i,r.alternate,r)}finally{nt=y,ce.p=u,X.T=a}}jt=3}}function j_(){if(jt===4||jt===3){jt=0,zt();var i=rr,r=ra,a=ms,u=D_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?jt=5:(jt=0,ra=rr=null,J_(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(sr=null),Xi(a),r=r.stateNode,nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(ni,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=X.T,y=ce.p,ce.p=2,X.T=null;try{for(var _=i.onRecoverableError,C=0;C<u.length;C++){var b=u[C];_(b.value,{componentStack:b.stack})}}finally{X.T=r,ce.p=y}}(ms&3)!==0&&Bc(),Hi(i),y=i.pendingLanes,(a&261930)!==0&&(y&42)!==0?i===zh?kl++:(kl=0,zh=i):kl=0,Ul(0)}}function J_(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,gl(r)))}function Bc(){return G_(),Y_(),j_(),K_()}function K_(){if(jt!==5)return!1;var i=rr,r=Fh;Fh=0;var a=Xi(ms),u=X.T,y=ce.p;try{ce.p=32>a?32:a,X.T=null,a=Hh,Hh=null;var _=rr,C=ms;if(jt=0,ra=rr=null,ms=0,(nt&6)!==0)throw Error(s(331));var b=nt;if(nt|=4,R_(_.current),b_(_,_.current,C,a),nt=b,Ul(0,!1),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(ni,_)}catch{}return!0}finally{ce.p=y,X.T=u,J_(i,r)}}function $_(i,r,a){r=jn(a,r),r=Eh(i.stateNode,r,2),i=Ws(i,r,2),i!==null&&(kr(i,2),Hi(i))}function ot(i,r,a){if(i.tag===3)$_(i,i,a);else for(;r!==null;){if(r.tag===3){$_(r,i,a);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(sr===null||!sr.has(u))){i=jn(a,i),a=Qy(2),u=Ws(r,a,2),u!==null&&(Xy(a,u,r,i),kr(u,2),Hi(u));break}}r=r.return}}function jh(i,r,a){var u=i.pingCache;if(u===null){u=i.pingCache=new GI;var y=new Set;u.set(r,y)}else y=u.get(r),y===void 0&&(y=new Set,u.set(r,y));y.has(a)||(Oh=!0,y.add(a),i=$I.bind(null,i,r,a),r.then(i,i))}function $I(i,r,a){var u=i.pingCache;u!==null&&u.delete(r),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,dt===i&&(He&a)===a&&(At===4||At===3&&(He&62914560)===He&&300>Gt()-Vc?(nt&2)===0&&oa(i,0):qh|=a,sa===He&&(sa=0)),Hi(i)}function Q_(i,r){r===0&&(r=Uu()),i=$r(i,r),i!==null&&(kr(i,r),Hi(i))}function QI(i){var r=i.memoizedState,a=0;r!==null&&(a=r.retryLane),Q_(i,a)}function XI(i,r){var a=0;switch(i.tag){case 31:case 13:var u=i.stateNode,y=i.memoizedState;y!==null&&(a=y.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(r),Q_(i,a)}function WI(i,r){return bt(i,r)}var Fc=null,la=null,Jh=!1,Hc=!1,Kh=!1,ar=0;function Hi(i){i!==la&&i.next===null&&(la===null?Fc=la=i:la=la.next=i),Hc=!0,Jh||(Jh=!0,eb())}function Ul(i,r){if(!Kh&&Hc){Kh=!0;do for(var a=!1,u=Fc;u!==null;){if(i!==0){var y=u.pendingLanes;if(y===0)var _=0;else{var C=u.suspendedLanes,b=u.pingedLanes;_=(1<<31-xt(42|i)+1)-1,_&=y&~(C&~b),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,ev(u,_))}else _=He,_=Ci(u,u===dt?_:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(_&3)===0||ii(u,_)||(a=!0,ev(u,_));u=u.next}while(a);Kh=!1}}function ZI(){X_()}function X_(){Hc=Jh=!1;var i=0;ar!==0&&cb()&&(i=ar);for(var r=Gt(),a=null,u=Fc;u!==null;){var y=u.next,_=W_(u,r);_===0?(u.next=null,a===null?Fc=y:a.next=y,y===null&&(la=a)):(a=u,(i!==0||(_&3)!==0)&&(Hc=!0)),u=y}jt!==0&&jt!==5||Ul(i),ar!==0&&(ar=0)}function W_(i,r){for(var a=i.suspendedLanes,u=i.pingedLanes,y=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var C=31-xt(_),b=1<<C,k=y[C];k===-1?((b&a)===0||(b&u)!==0)&&(y[C]=Af(b,r)):k<=r&&(i.expiredLanes|=b),_&=~b}if(r=dt,a=He,a=Ci(i,i===r?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,a===0||i===r&&(rt===2||rt===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&Ei(u),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||ii(i,a)){if(r=a&-a,r===i.callbackPriority)return r;switch(u!==null&&Ei(u),Xi(a)){case 2:case 8:a=tn;break;case 32:a=Us;break;case 268435456:a=Mu;break;default:a=Us}return u=Z_.bind(null,i),a=bt(a,u),i.callbackPriority=r,i.callbackNode=a,r}return u!==null&&u!==null&&Ei(u),i.callbackPriority=2,i.callbackNode=null,2}function Z_(i,r){if(jt!==0&&jt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(Bc()&&i.callbackNode!==a)return null;var u=He;return u=Ci(i,i===dt?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(V_(i,u,r),W_(i,Gt()),i.callbackNode!=null&&i.callbackNode===a?Z_.bind(null,i):null)}function ev(i,r){if(Bc())return null;V_(i,r,!0)}function eb(){fb(function(){(nt&6)!==0?bt(Yt,ZI):X_()})}function $h(){if(ar===0){var i=Jo;i===0&&(i=Si,Si<<=1,(Si&261888)===0&&(Si=256)),ar=i}return ar}function tv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Do(""+i)}function nv(i,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,i.id&&a.setAttribute("form",i.id),r.parentNode.insertBefore(a,r),i=new FormData(i),a.parentNode.removeChild(a),i}function tb(i,r,a,u,y){if(r==="submit"&&a&&a.stateNode===y){var _=tv((y[$t]||null).action),C=u.submitter;C&&(r=(r=C[$t]||null)?tv(r.formAction):C.getAttribute("formAction"),r!==null&&(_=r,C=null));var b=new ki("action","action",null,u,y);i.push({event:b,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ar!==0){var k=C?nv(y,C):new FormData(y);ph(a,{pending:!0,data:k,method:y.method,action:_},null,k)}}else typeof _=="function"&&(b.preventDefault(),k=C?nv(y,C):new FormData(y),ph(a,{pending:!0,data:k,method:y.method,action:_},_,k))},currentTarget:y}]})}}for(var Qh=0;Qh<Df.length;Qh++){var Xh=Df[Qh],nb=Xh.toLowerCase(),ib=Xh[0].toUpperCase()+Xh.slice(1);di(nb,"on"+ib)}di(Pg,"onAnimationEnd"),di(Vg,"onAnimationIteration"),di(kg,"onAnimationStart"),di("dblclick","onDoubleClick"),di("focusin","onFocus"),di("focusout","onBlur"),di(vI,"onTransitionRun"),di(TI,"onTransitionStart"),di(EI,"onTransitionCancel"),di(Ug,"onTransitionEnd"),Mi("onMouseEnter",["mouseout","mouseover"]),Mi("onMouseLeave",["mouseout","mouseover"]),Mi("onPointerEnter",["pointerout","pointerover"]),Mi("onPointerLeave",["pointerout","pointerover"]),Ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ni("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ll));function iv(i,r){r=(r&4)!==0;for(var a=0;a<i.length;a++){var u=i[a],y=u.event;u=u.listeners;e:{var _=void 0;if(r)for(var C=u.length-1;0<=C;C--){var b=u[C],k=b.instance,j=b.currentTarget;if(b=b.listener,k!==_&&y.isPropagationStopped())break e;_=b,y.currentTarget=j;try{_(y)}catch(W){ic(W)}y.currentTarget=null,_=k}else for(C=0;C<u.length;C++){if(b=u[C],k=b.instance,j=b.currentTarget,b=b.listener,k!==_&&y.isPropagationStopped())break e;_=b,y.currentTarget=j;try{_(y)}catch(W){ic(W)}y.currentTarget=null,_=k}}}}function Be(i,r){var a=r[xo];a===void 0&&(a=r[xo]=new Set);var u=i+"__bubble";a.has(u)||(sv(r,i,2,!1),a.add(u))}function Wh(i,r,a){var u=0;r&&(u|=4),sv(a,i,u,r)}var zc="_reactListening"+Math.random().toString(36).slice(2);function Zh(i){if(!i[zc]){i[zc]=!0,$a.forEach(function(a){a!=="selectionchange"&&(sb.has(a)||Wh(a,!1,i),Wh(a,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[zc]||(r[zc]=!0,Wh("selectionchange",!1,r))}}function sv(i,r,a,u){switch(Pv(r)){case 2:var y=Db;break;case 8:y=Pb;break;default:y=mm}a=y.bind(null,r,a,i),y=void 0,!Fr||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),u?y!==void 0?i.addEventListener(r,a,{capture:!0,passive:y}):i.addEventListener(r,a,!0):y!==void 0?i.addEventListener(r,a,{passive:y}):i.addEventListener(r,a,!1)}function em(i,r,a,u,y){var _=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var C=u.tag;if(C===3||C===4){var b=u.stateNode.containerInfo;if(b===y)break;if(C===4)for(C=u.return;C!==null;){var k=C.tag;if((k===3||k===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;b!==null;){if(C=wi(b),C===null)return;if(k=C.tag,k===5||k===6||k===26||k===27){u=_=C;continue e}b=b.parentNode}}u=u.return}Hs(function(){var j=_,W=Hn(a),se=[];e:{var J=Lg.get(i);if(J!==void 0){var Q=ki,ge=i;switch(i){case"keypress":if(zr(a)===0)break e;case"keydown":case"keyup":Q=ec;break;case"focusin":ge="focus",Q=Yr;break;case"focusout":ge="blur",Q=Yr;break;case"beforeblur":case"afterblur":Q=Yr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=ll;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Yu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=S;break;case Pg:case Vg:case kg:Q=Ju;break;case Ug:Q=w;break;case"scroll":case"scrollend":Q=al;break;case"wheel":Q=K;break;case"copy":case"cut":case"paste":Q=Ku;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=es;break;case"toggle":case"beforetoggle":Q=ke}var Ie=(r&4)!==0,ct=!Ie&&(i==="scroll"||i==="scrollend"),z=Ie?J!==null?J+"Capture":null:J;Ie=[];for(var O=j,Y;O!==null;){var ne=O;if(Y=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||Y===null||z===null||(ne=ai(O,z),ne!=null&&Ie.push(Ol(O,ne,Y))),ct)break;O=O.return}0<Ie.length&&(J=new Q(J,ge,null,a,W),se.push({event:J,listeners:Ie}))}}if((r&7)===0){e:{if(J=i==="mouseover"||i==="pointerover",Q=i==="mouseout"||i==="pointerout",J&&a!==sl&&(ge=a.relatedTarget||a.fromElement)&&(wi(ge)||ge[bi]))break e;if((Q||J)&&(J=W.window===W?W:(J=W.ownerDocument)?J.defaultView||J.parentWindow:window,Q?(ge=a.relatedTarget||a.toElement,Q=j,ge=ge?wi(ge):null,ge!==null&&(ct=l(ge),Ie=ge.tag,ge!==ct||Ie!==5&&Ie!==27&&Ie!==6)&&(ge=null)):(Q=null,ge=j),Q!==ge)){if(Ie=ll,ne="onMouseLeave",z="onMouseEnter",O="mouse",(i==="pointerout"||i==="pointerover")&&(Ie=es,ne="onPointerLeave",z="onPointerEnter",O="pointer"),ct=Q==null?J:Nn(Q),Y=ge==null?J:Nn(ge),J=new Ie(ne,O+"leave",Q,a,W),J.target=ct,J.relatedTarget=Y,ne=null,wi(W)===j&&(Ie=new Ie(z,O+"enter",ge,a,W),Ie.target=Y,Ie.relatedTarget=ct,ne=Ie),ct=ne,Q&&ge)t:{for(Ie=rb,z=Q,O=ge,Y=0,ne=z;ne;ne=Ie(ne))Y++;ne=0;for(var Ae=O;Ae;Ae=Ie(Ae))ne++;for(;0<Y-ne;)z=Ie(z),Y--;for(;0<ne-Y;)O=Ie(O),ne--;for(;Y--;){if(z===O||O!==null&&z===O.alternate){Ie=z;break t}z=Ie(z),O=Ie(O)}Ie=null}else Ie=null;Q!==null&&rv(se,J,Q,Ie,!1),ge!==null&&ct!==null&&rv(se,ct,ge,Ie,!0)}}e:{if(J=j?Nn(j):window,Q=J.nodeName&&J.nodeName.toLowerCase(),Q==="select"||Q==="input"&&J.type==="file")var Xe=Sg;else if(Tg(J))if(Ag)Xe=gI;else{Xe=mI;var Te=hI}else Q=J.nodeName,!Q||Q.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?j&&Mo(j.elementType)&&(Xe=Sg):Xe=pI;if(Xe&&(Xe=Xe(i,j))){Eg(se,Xe,a,W);break e}Te&&Te(i,J,j),i==="focusout"&&j&&J.type==="number"&&j.memoizedProps.value!=null&&tl(J,"number",J.value)}switch(Te=j?Nn(j):window,i){case"focusin":(Tg(Te)||Te.contentEditable==="true")&&(qo=Te,Rf=j,hl=null);break;case"focusout":hl=Rf=qo=null;break;case"mousedown":Nf=!0;break;case"contextmenu":case"mouseup":case"dragend":Nf=!1,Mg(se,a,W);break;case"selectionchange":if(_I)break;case"keydown":case"keyup":Mg(se,a,W)}var Le;if(tt)e:{switch(i){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else Oo?jr(i,a)&&(ze="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(ze="onCompositionStart");ze&&(Oi&&a.locale!=="ko"&&(Oo||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&Oo&&(Le=ol()):(Vi=W,rl="value"in Vi?Vi.value:Vi.textContent,Oo=!0)),Te=Gc(j,ze),0<Te.length&&(ze=new Li(ze,i,null,a,W),se.push({event:ze,listeners:Te}),Le?ze.data=Le:(Le=Lo(a),Le!==null&&(ze.data=Le)))),(Le=Gn?uI(i,a):cI(i,a))&&(ze=Gc(j,"onBeforeInput"),0<ze.length&&(Te=new Li("onBeforeInput","beforeinput",null,a,W),se.push({event:Te,listeners:ze}),Te.data=Le)),tb(se,i,j,a,W)}iv(se,r)})}function Ol(i,r,a){return{instance:i,listener:r,currentTarget:a}}function Gc(i,r){for(var a=r+"Capture",u=[];i!==null;){var y=i,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=ai(i,a),y!=null&&u.unshift(Ol(i,y,_)),y=ai(i,r),y!=null&&u.push(Ol(i,y,_))),i.tag===3)return u;i=i.return}return[]}function rb(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function rv(i,r,a,u,y){for(var _=r._reactName,C=[];a!==null&&a!==u;){var b=a,k=b.alternate,j=b.stateNode;if(b=b.tag,k!==null&&k===u)break;b!==5&&b!==26&&b!==27||j===null||(k=j,y?(j=ai(a,_),j!=null&&C.unshift(Ol(a,j,k))):y||(j=ai(a,_),j!=null&&C.push(Ol(a,j,k)))),a=a.return}C.length!==0&&i.push({event:r,listeners:C})}var ob=/\r\n?/g,ab=/\u0000|\uFFFD/g;function ov(i){return(typeof i=="string"?i:""+i).replace(ob,`
`).replace(ab,"")}function av(i,r){return r=ov(r),ov(i)===r}function ut(i,r,a,u,y,_){switch(a){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||En(i,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&En(i,""+u);break;case"className":Mn(i,"class",u);break;case"tabIndex":Mn(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Mn(i,a,u);break;case"style":il(i,u,_);break;case"data":if(r!=="object"){Mn(i,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||a!=="href")){i.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=Do(""+u),i.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(r!=="input"&&ut(i,r,"name",y.name,y,null),ut(i,r,"formEncType",y.formEncType,y,null),ut(i,r,"formMethod",y.formMethod,y,null),ut(i,r,"formTarget",y.formTarget,y,null)):(ut(i,r,"encType",y.encType,y,null),ut(i,r,"method",y.method,y,null),ut(i,r,"target",y.target,y,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=Do(""+u),i.setAttribute(a,u);break;case"onClick":u!=null&&(i.onclick=oi);break;case"onScroll":u!=null&&Be("scroll",i);break;case"onScrollEnd":u!=null&&Be("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}a=Do(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""+u):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":u===!0?i.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,u):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(a,u):i.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(a):i.setAttribute(a,u);break;case"popover":Be("beforetoggle",i),Be("toggle",i),Ro(i,"popover",u);break;case"xlinkActuate":kt(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":kt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":kt(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":kt(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":kt(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":kt(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":kt(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":kt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":kt(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ro(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Gu.get(a)||a,Ro(i,a,u))}}function tm(i,r,a,u,y,_){switch(a){case"style":il(i,u,_);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof u=="string"?En(i,u):(typeof u=="number"||typeof u=="bigint")&&En(i,""+u);break;case"onScroll":u!=null&&Be("scroll",i);break;case"onScrollEnd":u!=null&&Be("scrollend",i);break;case"onClick":u!=null&&(i.onclick=oi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),r=a.slice(2,y?a.length-7:void 0),_=i[$t]||null,_=_!=null?_[a]:null,typeof _=="function"&&i.removeEventListener(r,_,y),typeof u=="function")){typeof _!="function"&&_!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(r,u,y);break e}a in i?i[a]=u:u===!0?i.setAttribute(a,""):Ro(i,a,u)}}}function ln(i,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",i),Be("load",i);var u=!1,y=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var C=a[_];if(C!=null)switch(_){case"src":u=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ut(i,r,_,C,a,null)}}y&&ut(i,r,"srcSet",a.srcSet,a,null),u&&ut(i,r,"src",a.src,a,null);return;case"input":Be("invalid",i);var b=_=C=y=null,k=null,j=null;for(u in a)if(a.hasOwnProperty(u)){var W=a[u];if(W!=null)switch(u){case"name":y=W;break;case"type":C=W;break;case"checked":k=W;break;case"defaultChecked":j=W;break;case"value":_=W;break;case"defaultValue":b=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,r));break;default:ut(i,r,u,W,a,null)}}Fu(i,_,b,k,j,C,y,!1);return;case"select":Be("invalid",i),u=C=_=null;for(y in a)if(a.hasOwnProperty(y)&&(b=a[y],b!=null))switch(y){case"value":_=b;break;case"defaultValue":C=b;break;case"multiple":u=b;default:ut(i,r,y,b,a,null)}r=_,a=C,i.multiple=!!u,r!=null?Os(i,!!u,r,!1):a!=null&&Os(i,!!u,a,!0);return;case"textarea":Be("invalid",i),_=y=u=null;for(C in a)if(a.hasOwnProperty(C)&&(b=a[C],b!=null))switch(C){case"value":u=b;break;case"defaultValue":y=b;break;case"children":_=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:ut(i,r,C,b,a,null)}qs(i,u,y,_);return;case"option":for(k in a)if(a.hasOwnProperty(k)&&(u=a[k],u!=null))switch(k){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ut(i,r,k,u,a,null)}return;case"dialog":Be("beforetoggle",i),Be("toggle",i),Be("cancel",i),Be("close",i);break;case"iframe":case"object":Be("load",i);break;case"video":case"audio":for(u=0;u<Ll.length;u++)Be(Ll[u],i);break;case"image":Be("error",i),Be("load",i);break;case"details":Be("toggle",i);break;case"embed":case"source":case"link":Be("error",i),Be("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(u=a[j],u!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ut(i,r,j,u,a,null)}return;default:if(Mo(r)){for(W in a)a.hasOwnProperty(W)&&(u=a[W],u!==void 0&&tm(i,r,W,u,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(u=a[b],u!=null&&ut(i,r,b,u,a,null))}function lb(i,r,a,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,C=null,b=null,k=null,j=null,W=null;for(Q in a){var se=a[Q];if(a.hasOwnProperty(Q)&&se!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":k=se;default:u.hasOwnProperty(Q)||ut(i,r,Q,null,u,se)}}for(var J in u){var Q=u[J];if(se=a[J],u.hasOwnProperty(J)&&(Q!=null||se!=null))switch(J){case"type":_=Q;break;case"name":y=Q;break;case"checked":j=Q;break;case"defaultChecked":W=Q;break;case"value":C=Q;break;case"defaultValue":b=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,r));break;default:Q!==se&&ut(i,r,J,Q,u,se)}}No(i,C,b,k,j,W,_,y);return;case"select":Q=C=b=J=null;for(_ in a)if(k=a[_],a.hasOwnProperty(_)&&k!=null)switch(_){case"value":break;case"multiple":Q=k;default:u.hasOwnProperty(_)||ut(i,r,_,null,u,k)}for(y in u)if(_=u[y],k=a[y],u.hasOwnProperty(y)&&(_!=null||k!=null))switch(y){case"value":J=_;break;case"defaultValue":b=_;break;case"multiple":C=_;default:_!==k&&ut(i,r,y,_,u,k)}r=b,a=C,u=Q,J!=null?Os(i,!!a,J,!1):!!u!=!!a&&(r!=null?Os(i,!!a,r,!0):Os(i,!!a,a?[]:"",!1));return;case"textarea":Q=J=null;for(b in a)if(y=a[b],a.hasOwnProperty(b)&&y!=null&&!u.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ut(i,r,b,null,u,y)}for(C in u)if(y=u[C],_=a[C],u.hasOwnProperty(C)&&(y!=null||_!=null))switch(C){case"value":J=y;break;case"defaultValue":Q=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:y!==_&&ut(i,r,C,y,u,_)}Hu(i,J,Q);return;case"option":for(var ge in a)if(J=a[ge],a.hasOwnProperty(ge)&&J!=null&&!u.hasOwnProperty(ge))switch(ge){case"selected":i.selected=!1;break;default:ut(i,r,ge,null,u,J)}for(k in u)if(J=u[k],Q=a[k],u.hasOwnProperty(k)&&J!==Q&&(J!=null||Q!=null))switch(k){case"selected":i.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:ut(i,r,k,J,u,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in a)J=a[Ie],a.hasOwnProperty(Ie)&&J!=null&&!u.hasOwnProperty(Ie)&&ut(i,r,Ie,null,u,J);for(j in u)if(J=u[j],Q=a[j],u.hasOwnProperty(j)&&J!==Q&&(J!=null||Q!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,r));break;default:ut(i,r,j,J,u,Q)}return;default:if(Mo(r)){for(var ct in a)J=a[ct],a.hasOwnProperty(ct)&&J!==void 0&&!u.hasOwnProperty(ct)&&tm(i,r,ct,void 0,u,J);for(W in u)J=u[W],Q=a[W],!u.hasOwnProperty(W)||J===Q||J===void 0&&Q===void 0||tm(i,r,W,J,u,Q);return}}for(var z in a)J=a[z],a.hasOwnProperty(z)&&J!=null&&!u.hasOwnProperty(z)&&ut(i,r,z,null,u,J);for(se in u)J=u[se],Q=a[se],!u.hasOwnProperty(se)||J===Q||J==null&&Q==null||ut(i,r,se,J,u,Q)}function lv(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ub(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var y=a[u],_=y.transferSize,C=y.initiatorType,b=y.duration;if(_&&b&&lv(C)){for(C=0,b=y.responseEnd,u+=1;u<a.length;u++){var k=a[u],j=k.startTime;if(j>b)break;var W=k.transferSize,se=k.initiatorType;W&&lv(se)&&(k=k.responseEnd,C+=W*(k<b?1:(b-j)/(k-j)))}if(--u,r+=8*(_+C)/(y.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var nm=null,im=null;function Yc(i){return i.nodeType===9?i:i.ownerDocument}function uv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cv(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function sm(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var rm=null;function cb(){var i=window.event;return i&&i.type==="popstate"?i===rm?!1:(rm=i,!0):(rm=null,!1)}var dv=typeof setTimeout=="function"?setTimeout:void 0,db=typeof clearTimeout=="function"?clearTimeout:void 0,fv=typeof Promise=="function"?Promise:void 0,fb=typeof queueMicrotask=="function"?queueMicrotask:typeof fv<"u"?function(i){return fv.resolve(null).then(i).catch(hb)}:dv;function hb(i){setTimeout(function(){throw i})}function lr(i){return i==="head"}function hv(i,r){var a=r,u=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(u===0){i.removeChild(y),fa(r);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")ql(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,ql(a);for(var _=a.firstChild;_;){var C=_.nextSibling,b=_.nodeName;_[xi]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=C}}else a==="body"&&ql(i.ownerDocument.body);a=y}while(a);fa(r)}function mv(i,r){var a=i;i=0;do{var u=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=u}while(a)}function om(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":om(a),wo(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function mb(i,r,a,u){for(;i.nodeType===1;){var y=a;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[xi])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Xn(i.nextSibling),i===null)break}return null}function pb(i,r,a){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Xn(i.nextSibling),i===null))return null;return i}function pv(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Xn(i.nextSibling),i===null))return null;return i}function am(i){return i.data==="$?"||i.data==="$~"}function lm(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function gb(i,r){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||a.readyState!=="loading")r();else{var u=function(){r(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Xn(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var um=null;function gv(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(r===0)return Xn(i.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}i=i.nextSibling}return null}function yv(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return i;r--}else a!=="/$"&&a!=="/&"||r++}i=i.previousSibling}return null}function _v(i,r,a){switch(r=Yc(a),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function ql(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);wo(i)}var Wn=new Map,vv=new Set;function jc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ps=ce.d;ce.d={f:yb,r:_b,D:vb,C:Tb,L:Eb,m:Sb,X:Cb,S:Ab,M:Ib};function yb(){var i=ps.f(),r=Lc();return i||r}function _b(i){var r=Fn(i);r!==null&&r.tag===5&&r.type==="form"?Uy(r):ps.r(i)}var ua=typeof document>"u"?null:document;function Tv(i,r,a){var u=ua;if(u&&typeof r=="string"&&r){var y=Tn(r);y='link[rel="'+i+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),vv.has(y)||(vv.add(y),i={rel:i,crossOrigin:a,href:r},u.querySelector(y)===null&&(r=u.createElement("link"),ln(r,"link",i),Vt(r),u.head.appendChild(r)))}}function vb(i){ps.D(i),Tv("dns-prefetch",i,null)}function Tb(i,r){ps.C(i,r),Tv("preconnect",i,r)}function Eb(i,r,a){ps.L(i,r,a);var u=ua;if(u&&i&&r){var y='link[rel="preload"][as="'+Tn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+Tn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+Tn(a.imageSizes)+'"]')):y+='[href="'+Tn(i)+'"]';var _=y;switch(r){case"style":_=ca(i);break;case"script":_=da(i)}Wn.has(_)||(i=E({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:i,as:r},a),Wn.set(_,i),u.querySelector(y)!==null||r==="style"&&u.querySelector(Bl(_))||r==="script"&&u.querySelector(Fl(_))||(r=u.createElement("link"),ln(r,"link",i),Vt(r),u.head.appendChild(r)))}}function Sb(i,r){ps.m(i,r);var a=ua;if(a&&i){var u=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+Tn(u)+'"][href="'+Tn(i)+'"]',_=y;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=da(i)}if(!Wn.has(_)&&(i=E({rel:"modulepreload",href:i},r),Wn.set(_,i),a.querySelector(y)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Fl(_)))return}u=a.createElement("link"),ln(u,"link",i),Vt(u),a.head.appendChild(u)}}}function Ab(i,r,a){ps.S(i,r,a);var u=ua;if(u&&i){var y=Ri(u).hoistableStyles,_=ca(i);r=r||"default";var C=y.get(_);if(!C){var b={loading:0,preload:null};if(C=u.querySelector(Bl(_)))b.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":r},a),(a=Wn.get(_))&&cm(i,a);var k=C=u.createElement("link");Vt(k),ln(k,"link",i),k._p=new Promise(function(j,W){k.onload=j,k.onerror=W}),k.addEventListener("load",function(){b.loading|=1}),k.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Jc(C,r,u)}C={type:"stylesheet",instance:C,count:1,state:b},y.set(_,C)}}}function Cb(i,r){ps.X(i,r);var a=ua;if(a&&i){var u=Ri(a).hoistableScripts,y=da(i),_=u.get(y);_||(_=a.querySelector(Fl(y)),_||(i=E({src:i,async:!0},r),(r=Wn.get(y))&&dm(i,r),_=a.createElement("script"),Vt(_),ln(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(y,_))}}function Ib(i,r){ps.M(i,r);var a=ua;if(a&&i){var u=Ri(a).hoistableScripts,y=da(i),_=u.get(y);_||(_=a.querySelector(Fl(y)),_||(i=E({src:i,async:!0,type:"module"},r),(r=Wn.get(y))&&dm(i,r),_=a.createElement("script"),Vt(_),ln(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(y,_))}}function Ev(i,r,a,u){var y=(y=Ve.current)?jc(y):null;if(!y)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=ca(a.href),a=Ri(y).hoistableStyles,u=a.get(r),u||(u={type:"style",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=ca(a.href);var _=Ri(y).hoistableStyles,C=_.get(i);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,C),(_=y.querySelector(Bl(i)))&&!_._p&&(C.instance=_,C.state.loading=5),Wn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Wn.set(i,a),_||bb(y,i,a,C.state))),r&&u===null)throw Error(s(528,""));return C}if(r&&u!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=da(a),a=Ri(y).hoistableScripts,u=a.get(r),u||(u={type:"script",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function ca(i){return'href="'+Tn(i)+'"'}function Bl(i){return'link[rel="stylesheet"]['+i+"]"}function Sv(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function bb(i,r,a,u){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=i.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),ln(r,"link",a),Vt(r),i.head.appendChild(r))}function da(i){return'[src="'+Tn(i)+'"]'}function Fl(i){return"script[async]"+i}function Av(i,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var u=i.querySelector('style[data-href~="'+Tn(a.href)+'"]');if(u)return r.instance=u,Vt(u),u;var y=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Vt(u),ln(u,"style",y),Jc(u,a.precedence,i),r.instance=u;case"stylesheet":y=ca(a.href);var _=i.querySelector(Bl(y));if(_)return r.state.loading|=4,r.instance=_,Vt(_),_;u=Sv(a),(y=Wn.get(y))&&cm(u,y),_=(i.ownerDocument||i).createElement("link"),Vt(_);var C=_;return C._p=new Promise(function(b,k){C.onload=b,C.onerror=k}),ln(_,"link",u),r.state.loading|=4,Jc(_,a.precedence,i),r.instance=_;case"script":return _=da(a.src),(y=i.querySelector(Fl(_)))?(r.instance=y,Vt(y),y):(u=a,(y=Wn.get(_))&&(u=E({},a),dm(u,y)),i=i.ownerDocument||i,y=i.createElement("script"),Vt(y),ln(y,"link",u),i.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,Jc(u,a.precedence,i));return r.instance}function Jc(i,r,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=u.length?u[u.length-1]:null,_=y,C=0;C<u.length;C++){var b=u[C];if(b.dataset.precedence===r)_=b;else if(_!==y)break}_?_.parentNode.insertBefore(i,_.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(i,r.firstChild))}function cm(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function dm(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Kc=null;function Cv(i,r,a){if(Kc===null){var u=new Map,y=Kc=new Map;y.set(a,u)}else y=Kc,u=y.get(a),u||(u=new Map,y.set(a,u));if(u.has(i))return u;for(u.set(i,null),a=a.getElementsByTagName(i),y=0;y<a.length;y++){var _=a[y];if(!(_[xi]||_[Pt]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var C=_.getAttribute(r)||"";C=i+C;var b=u.get(C);b?b.push(_):u.set(C,[_])}}return u}function Iv(i,r,a){i=i.ownerDocument||i,i.head.insertBefore(a,r==="title"?i.querySelector("head > title"):null)}function xb(i,r,a){if(a===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function bv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function wb(i,r,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=ca(u.href),_=r.querySelector(Bl(y));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=$c.bind(i),r.then(i,i)),a.state.loading|=4,a.instance=_,Vt(_);return}_=r.ownerDocument||r,u=Sv(u),(y=Wn.get(y))&&cm(u,y),_=_.createElement("link"),Vt(_);var C=_;C._p=new Promise(function(b,k){C.onload=b,C.onerror=k}),ln(_,"link",u),a.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=$c.bind(i),r.addEventListener("load",a),r.addEventListener("error",a))}}var fm=0;function Rb(i,r){return i.stylesheets&&i.count===0&&Xc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var u=setTimeout(function(){if(i.stylesheets&&Xc(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+r);0<i.imgBytes&&fm===0&&(fm=62500*ub());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Xc(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>fm?50:800)+r);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(y)}}:null}function $c(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Qc=null;function Xc(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Qc=new Map,r.forEach(Nb,i),Qc=null,$c.call(i))}function Nb(i,r){if(!(r.state.loading&4)){var a=Qc.get(i);if(a)var u=a.get(null);else{a=new Map,Qc.set(i,a);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var C=y[_];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(a.set(C.dataset.precedence,C),u=C)}u&&a.set(null,u)}y=r.instance,C=y.getAttribute("data-precedence"),_=a.get(C)||u,_===u&&a.set(null,y),a.set(C,y),this.count++,u=$c.bind(this),y.addEventListener("load",u),y.addEventListener("error",u),_?_.parentNode.insertBefore(y,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),r.state.loading|=4}}var Hl={$$typeof:$,Provider:null,Consumer:null,_currentValue:Se,_currentValue2:Se,_threadCount:0};function Mb(i,r,a,u,y,_,C,b,k){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ii(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ii(0),this.hiddenUpdates=Ii(null),this.identifierPrefix=u,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function xv(i,r,a,u,y,_,C,b,k,j,W,se){return i=new Mb(i,r,a,C,k,j,W,se,b),r=1,_===!0&&(r|=24),_=Pn(3,null,null,r),i.current=_,_.stateNode=i,r=Yf(),r.refCount++,i.pooledCache=r,r.refCount++,_.memoizedState={element:u,isDehydrated:a,cache:r},$f(_),i}function wv(i){return i?(i=Ho,i):Ho}function Rv(i,r,a,u,y,_){y=wv(y),u.context===null?u.context=y:u.pendingContext=y,u=Xs(r),u.payload={element:a},_=_===void 0?null:_,_!==null&&(u.callback=_),a=Ws(i,u,r),a!==null&&(bn(a,i,r),Tl(a,i,r))}function Nv(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<r?a:r}}function hm(i,r){Nv(i,r),(i=i.alternate)&&Nv(i,r)}function Mv(i){if(i.tag===13||i.tag===31){var r=$r(i,67108864);r!==null&&bn(r,i,67108864),hm(i,67108864)}}function Dv(i){if(i.tag===13||i.tag===31){var r=On();r=Lr(r);var a=$r(i,r);a!==null&&bn(a,i,r),hm(i,r)}}var Wc=!0;function Db(i,r,a,u){var y=X.T;X.T=null;var _=ce.p;try{ce.p=2,mm(i,r,a,u)}finally{ce.p=_,X.T=y}}function Pb(i,r,a,u){var y=X.T;X.T=null;var _=ce.p;try{ce.p=8,mm(i,r,a,u)}finally{ce.p=_,X.T=y}}function mm(i,r,a,u){if(Wc){var y=pm(u);if(y===null)em(i,r,u,Zc,a),Vv(i,u);else if(kb(y,i,r,a,u))u.stopPropagation();else if(Vv(i,u),r&4&&-1<Vb.indexOf(i)){for(;y!==null;){var _=Fn(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var C=Ai(_.pendingLanes);if(C!==0){var b=_;for(b.pendingLanes|=2,b.entangledLanes|=2;C;){var k=1<<31-xt(C);b.entanglements[1]|=k,C&=~k}Hi(_),(nt&6)===0&&(kc=Gt()+500,Ul(0))}}break;case 31:case 13:b=$r(_,2),b!==null&&bn(b,_,2),Lc(),hm(_,2)}if(_=pm(u),_===null&&em(i,r,u,Zc,a),_===y)break;y=_}y!==null&&u.stopPropagation()}else em(i,r,u,null,a)}}function pm(i){return i=Hn(i),gm(i)}var Zc=null;function gm(i){if(Zc=null,i=wi(i),i!==null){var r=l(i);if(r===null)i=null;else{var a=r.tag;if(a===13){if(i=c(r),i!==null)return i;i=null}else if(a===31){if(i=d(r),i!==null)return i;i=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Zc=i,null}function Pv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vn()){case Yt:return 2;case tn:return 8;case Us:case Sf:return 32;case Mu:return 268435456;default:return 32}default:return 32}}var ym=!1,ur=null,cr=null,dr=null,zl=new Map,Gl=new Map,fr=[],Vb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Vv(i,r){switch(i){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":dr=null;break;case"pointerover":case"pointerout":zl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gl.delete(r.pointerId)}}function Yl(i,r,a,u,y,_){return i===null||i.nativeEvent!==_?(i={blockedOn:r,domEventName:a,eventSystemFlags:u,nativeEvent:_,targetContainers:[y]},r!==null&&(r=Fn(r),r!==null&&Mv(r)),i):(i.eventSystemFlags|=u,r=i.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),i)}function kb(i,r,a,u,y){switch(r){case"focusin":return ur=Yl(ur,i,r,a,u,y),!0;case"dragenter":return cr=Yl(cr,i,r,a,u,y),!0;case"mouseover":return dr=Yl(dr,i,r,a,u,y),!0;case"pointerover":var _=y.pointerId;return zl.set(_,Yl(zl.get(_)||null,i,r,a,u,y)),!0;case"gotpointercapture":return _=y.pointerId,Gl.set(_,Yl(Gl.get(_)||null,i,r,a,u,y)),!0}return!1}function kv(i){var r=wi(i.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=c(a),r!==null){i.blockedOn=r,si(i.priority,function(){Dv(a)});return}}else if(r===31){if(r=d(a),r!==null){i.blockedOn=r,si(i.priority,function(){Dv(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ed(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var a=pm(i.nativeEvent);if(a===null){a=i.nativeEvent;var u=new a.constructor(a.type,a);sl=u,a.target.dispatchEvent(u),sl=null}else return r=Fn(a),r!==null&&Mv(r),i.blockedOn=a,!1;r.shift()}return!0}function Uv(i,r,a){ed(i)&&a.delete(r)}function Ub(){ym=!1,ur!==null&&ed(ur)&&(ur=null),cr!==null&&ed(cr)&&(cr=null),dr!==null&&ed(dr)&&(dr=null),zl.forEach(Uv),Gl.forEach(Uv)}function td(i,r){i.blockedOn===r&&(i.blockedOn=null,ym||(ym=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Ub)))}var nd=null;function Lv(i){nd!==i&&(nd=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){nd===i&&(nd=null);for(var r=0;r<i.length;r+=3){var a=i[r],u=i[r+1],y=i[r+2];if(typeof u!="function"){if(gm(u||a)===null)continue;break}var _=Fn(a);_!==null&&(i.splice(r,3),r-=3,ph(_,{pending:!0,data:y,method:a.method,action:u},u,y))}}))}function fa(i){function r(k){return td(k,i)}ur!==null&&td(ur,i),cr!==null&&td(cr,i),dr!==null&&td(dr,i),zl.forEach(r),Gl.forEach(r);for(var a=0;a<fr.length;a++){var u=fr[a];u.blockedOn===i&&(u.blockedOn=null)}for(;0<fr.length&&(a=fr[0],a.blockedOn===null);)kv(a),a.blockedOn===null&&fr.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var y=a[u],_=a[u+1],C=y[$t]||null;if(typeof _=="function")C||Lv(a);else if(C){var b=null;if(_&&_.hasAttribute("formAction")){if(y=_,C=_[$t]||null)b=C.formAction;else if(gm(y)!==null)continue}else b=C.action;typeof b=="function"?a[u+1]=b:(a.splice(u,3),u-=3),Lv(a)}}}function Ov(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(C){return y=C})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function _m(i){this._internalRoot=i}id.prototype.render=_m.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,u=On();Rv(a,u,i,r,null,null)},id.prototype.unmount=_m.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;Rv(i.current,2,null,i,null,null),Lc(),r[bi]=null}};function id(i){this._internalRoot=i}id.prototype.unstable_scheduleHydration=function(i){if(i){var r=Lu();i={blockedOn:null,target:i,priority:r};for(var a=0;a<fr.length&&r!==0&&r<fr[a].priority;a++);fr.splice(a,0,i),a===0&&kv(i)}};var qv=e.version;if(qv!=="19.2.0")throw Error(s(527,qv,"19.2.0"));ce.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=m(r),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var Lb={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sd.isDisabled&&sd.supportsFiber)try{ni=sd.inject(Lb),nn=sd}catch{}}return Jl.createRoot=function(i,r){if(!o(i))throw Error(s(299));var a=!1,u="",y=jy,_=Jy,C=Ky;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError)),r=xv(i,1,!1,null,null,a,u,null,y,_,C,Ov),i[bi]=r.current,Zh(i),new _m(r)},Jl.hydrateRoot=function(i,r,a){if(!o(i))throw Error(s(299));var u=!1,y="",_=jy,C=Jy,b=Ky,k=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(C=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(k=a.formState)),r=xv(i,1,!0,r,a??null,u,y,k,_,C,b,Ov),r.context=wv(null),a=r.current,u=On(),u=Lr(u),y=Xs(u),y.callback=null,Ws(a,y,u),a=u,r.current.lanes=a,kr(r,a),Hi(r),i[bi]=r.current,Zh(i),new id(r)},Jl.version="19.2.0",Jl}var $v;function Kb(){if($v)return Em.exports;$v=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Em.exports=Jb(),Em.exports}var $b=Kb();const Qb=H0($b),rd=()=>({transactions:[],categories:[{id:"cat-1",name:"بقالة",icon:"🛒"},{id:"cat-2",name:"مطاعم",icon:"🍔"},{id:"cat-3",name:"وقود",icon:"⛽"},{id:"cat-4",name:"فواتير",icon:"🧾"},{id:"cat-9",name:"سداد فواتير",icon:"💳"},{id:"cat-5",name:"تسوق",icon:"🛍️"},{id:"cat-6",name:"إيجار",icon:"🏠"},{id:"cat-8",name:"صيدلية",icon:"💊"},{id:"cat-7",name:"أخرى",icon:"💸"}],installments:[],investments:{currentValue:0},cards:{"snb-card":{id:"snb-card",name:"SNB الأهلي",limit:26e3,dueDay:15,statementDay:25,smsSamples:["SNB","الأهلي","إئتمانية"]},"enbd-card":{id:"enbd-card",name:"ENBD الإمارات",limit:1e4,dueDay:18,statementDay:28,smsSamples:["ENBD","الإمارات","Visa card"]}},bankAccounts:{"bank-default":{id:"bank-default",name:"حساب البنك",balance:0,smsSamples:["مدى","mada","Alrajhi","الراجحي","Inma","الإنماء","بنك"]}}});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Xb,Wb;function Zb(){return{geminiUrl:Xb,vertexUrl:Wb}}function ex(n,e,t,s){var o,l;if(!(n!=null&&n.baseUrl)){const c=Zb();return e?(o=c.vertexUrl)!==null&&o!==void 0?o:t:(l=c.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vo{}function ye(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function g(n,e,t){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const d=c.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[d])){const p=n[d];if(Array.isArray(t))for(let m=0;m<p.length;m++){const v=p[m];g(v,e.slice(l+1),t[m])}else for(const m of p)g(m,e.slice(l+1),t)}return}else if(c.endsWith("[0]")){const d=c.slice(0,-3);d in n||(n[d]=[{}]);const p=n[d];g(p[0],e.slice(l+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const s=e[e.length-1],o=n[s];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const o=e[s];if(o.endsWith("[]")){const l=o.slice(0,-2);if(l in n){const c=n[l];return Array.isArray(c)?c.map(d=>f(d,e.slice(s+1),t)):t}else return t}else n=n[o]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xp(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tx(n){const e={},t=f(n,["operationName"]);t!=null&&g(e,["operationName"],t);const s=f(n,["resourceName"]);return s!=null&&g(e,["_url","resourceName"],s),e}function nx(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&g(e,["response"],sx(c)),e}function ix(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["response"]);return c!=null&&g(e,["response"],rx(c)),e}function sx(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>ox(c))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function rx(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>ax(c))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function ox(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],cx(t)),e}function ax(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],dx(t)),e}function lx(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function ux(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function cx(n){const e={},t=f(n,["video","uri"]);t!=null&&g(e,["uri"],t);const s=f(n,["video","encodedVideo"]);s!=null&&g(e,["videoBytes"],xp(s));const o=f(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function dx(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],xp(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Qv;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Qv||(Qv={}));var Xv;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Xv||(Xv={}));var gr;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(gr||(gr={}));var Wv;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Wv||(Wv={}));var Zv;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Zv||(Zv={}));var eT;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(eT||(eT={}));var tT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(tT||(tT={}));var nT;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(nT||(nT={}));var iT;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(iT||(iT={}));var sT;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(sT||(sT={}));var rT;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(rT||(rT={}));var oT;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(oT||(oT={}));var aT;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(aT||(aT={}));var lT;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY"})(lT||(lT={}));var uT;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(uT||(uT={}));var Id;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Id||(Id={}));var cT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(cT||(cT={}));var jm;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(jm||(jm={}));var dT;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(dT||(dT={}));var fT;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(fT||(fT={}));var hT;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V"})(hT||(hT={}));var mT;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(mT||(mT={}));var pT;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(pT||(pT={}));var gT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(gT||(gT={}));var yT;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(yT||(yT={}));var _T;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(_T||(_T={}));var vT;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(vT||(vT={}));var TT;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(TT||(TT={}));var ET;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(ET||(ET={}));var ST;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(ST||(ST={}));var AT;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(AT||(AT={}));var CT;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(CT||(CT={}));var IT;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(IT||(IT={}));var bT;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(bT||(bT={}));var xT;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(xT||(xT={}));var wT;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(wT||(wT={}));var RT;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(RT||(RT={}));var NT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(NT||(NT={}));var MT;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(MT||(MT={}));var DT;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(DT||(DT={}));var PT;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(PT||(PT={}));var VT;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(VT||(VT={}));var kT;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(kT||(kT={}));var UT;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(UT||(UT={}));var LT;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(LT||(LT={}));var OT;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(OT||(OT={}));var qT;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(qT||(qT={}));var BT;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(BT||(BT={}));var ya;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(ya||(ya={}));class Jm{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Kl{get text(){var e,t,s,o,l,c,d,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const E=[];for(const A of(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[x,U]of Object.entries(A))x!=="text"&&x!=="thought"&&(U!==null||U!==void 0)&&E.push(x);if(typeof A.text=="string"){if(typeof A.thought=="boolean"&&A.thought)continue;v=!0,m+=A.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,t,s,o,l,c,d,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const E of(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[A,x]of Object.entries(E))A!=="inlineData"&&(x!==null||x!==void 0)&&v.push(A);E.inlineData&&typeof E.inlineData.data=="string"&&(m+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,s,o,l,c,d,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,s,o,l,c,d,p,m;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,s,o,l,c,d,p,m;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class FT{}class HT{}class fx{}class hx{}class mx{}class px{}class zT{}class GT{}class YT{}class gx{}class bd{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const s=new bd;let o;const l=e;return t?o=ix(l):o=nx(l),Object.assign(s,o),s}}class jT{}class JT{}class KT{}class yx{}class _x{}class vx{}class $T{}class Tx{get text(){var e,t,s;let o="",l=!1;const c=[];for(const d of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[p,m]of Object.entries(d))p!=="text"&&p!=="thought"&&m!==null&&c.push(p);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,o+=d.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var e,t,s;let o="";const l=[];for(const c of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[d,p]of Object.entries(c))d!=="inlineData"&&p!==null&&l.push(d);c.inlineData&&typeof c.inlineData.data=="string"&&(o+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class Ex{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ze(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function z0(n,e){const t=Ze(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function G0(n){return Array.isArray(n)?n.map(e=>xd(e)):[xd(n)]}function xd(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function Y0(n){const e=xd(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function j0(n){const e=xd(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function QT(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function J0(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>QT(e)):[QT(n)]}function Km(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function XT(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function WT(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function mn(n){if(n==null)throw new Error("ContentUnion is required");return Km(n)?n:{role:"user",parts:J0(n)}}function wp(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=mn(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=mn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>mn(t)):[mn(e)]}function ti(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(XT(n)||WT(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[mn(n)]}const e=[],t=[],s=Km(n[0]);for(const o of n){const l=Km(o);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(o);else{if(XT(o)||WT(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return s||e.push({role:"user",parts:J0(t)}),e}function Sx(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(gr).includes(t[0].toUpperCase())?t[0].toUpperCase():gr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(gr).includes(s.toUpperCase())?s.toUpperCase():gr.TYPE_UNSPECIFIED})}}function Ta(n){const e={},t=["items"],s=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&Sx(n.type,e);for(const[c,d]of Object.entries(n))if(d!=null)if(c=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(gr).includes(d.toUpperCase())?d.toUpperCase():gr.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=Ta(d);else if(s.includes(c)){const p=[];for(const m of d){if(m.type=="null"){e.nullable=!0;continue}p.push(Ta(m))}e[c]=p}else if(o.includes(c)){const p={};for(const[m,v]of Object.entries(d))p[m]=Ta(v);e[c]=p}else{if(c==="additionalProperties")continue;e[c]=d}return e}function Rp(n){return Ta(n)}function Np(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Mp(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function La(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ta(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ta(e.response));return n}function Oa(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function Ax(n,e,t,s=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function Ds(n,e){if(typeof e!="string")throw new Error("name must be a string");return Ax(n,e,"cachedContents")}function K0(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Mr(n){return xp(n)}function Cx(n){return n!=null&&typeof n=="object"&&"name"in n}function Ix(n){return n!=null&&typeof n=="object"&&"video"in n}function bx(n){return n!=null&&typeof n=="object"&&"uri"in n}function $0(n){var e;let t;if(Cx(n)&&(t=n.name),!(bx(n)&&(t=n.uri,t===void 0))&&!(Ix(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function Q0(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function X0(n){for(const e of["models","tunedModels","publisherModels"])if(xx(n,e))return n[e];return[]}function xx(n,e){return n!==null&&typeof n=="object"&&e in n}function wx(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function Rx(n,e={}){const t=[],s=new Set;for(const o of n){const l=o.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const c=wx(o,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function W0(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function Nx(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Z0(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let l=!1;for(const c of o){if(typeof c!="object"||c===null)continue;const p=c.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function qa(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function eS(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mx(n){const e={},t=f(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const s=f(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>aw(c))),g(e,["inlinedResponses"],l)}const o=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["inlinedEmbedContentResponses"],l)}return e}function Dx(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const s=f(n,["gcsDestination","outputUriPrefix"]);s!=null&&g(e,["gcsUri"],s);const o=f(n,["bigqueryDestination","outputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function Px(n){const e={},t=f(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const s=f(n,["gcsUri"]);s!=null&&g(e,["gcsDestination","outputUriPrefix"],s);const o=f(n,["bigqueryUri"]);if(o!=null&&g(e,["bigqueryDestination","outputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Ql(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata","displayName"]);s!=null&&g(e,["displayName"],s);const o=f(n,["metadata","state"]);o!=null&&g(e,["state"],eS(o));const l=f(n,["metadata","createTime"]);l!=null&&g(e,["createTime"],l);const c=f(n,["metadata","endTime"]);c!=null&&g(e,["endTime"],c);const d=f(n,["metadata","updateTime"]);d!=null&&g(e,["updateTime"],d);const p=f(n,["metadata","model"]);p!=null&&g(e,["model"],p);const m=f(n,["metadata","output"]);return m!=null&&g(e,["dest"],Mx(Z0(m))),e}function $m(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const o=f(n,["state"]);o!=null&&g(e,["state"],eS(o));const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["createTime"]);c!=null&&g(e,["createTime"],c);const d=f(n,["startTime"]);d!=null&&g(e,["startTime"],d);const p=f(n,["endTime"]);p!=null&&g(e,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(e,["updateTime"],m);const v=f(n,["model"]);v!=null&&g(e,["model"],v);const E=f(n,["inputConfig"]);E!=null&&g(e,["src"],Vx(E));const A=f(n,["outputConfig"]);return A!=null&&g(e,["dest"],Dx(Z0(A))),e}function Vx(n){const e={},t=f(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const s=f(n,["gcsSource","uris"]);s!=null&&g(e,["gcsUri"],s);const o=f(n,["bigquerySource","inputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function kx(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&g(t,["fileName"],s);const o=f(e,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>ow(n,c))),g(t,["requests","requests"],l)}return t}function Ux(n){const e={},t=f(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const s=f(n,["gcsUri"]);s!=null&&g(e,["gcsSource","uris"],s);const o=f(n,["bigqueryUri"]);if(o!=null&&g(e,["bigquerySource","inputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Lx(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&g(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Ox(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],qa(n,s)),t}function qx(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],qa(n,s)),t}function Bx(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],Fx(s));const o=f(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const l=f(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const c=f(n,["urlContextMetadata"]);c!=null&&g(e,["urlContextMetadata"],c);const d=f(n,["avgLogprobs"]);d!=null&&g(e,["avgLogprobs"],d);const p=f(n,["groundingMetadata"]);p!=null&&g(e,["groundingMetadata"],p);const m=f(n,["index"]);m!=null&&g(e,["index"],m);const v=f(n,["logprobsResult"]);v!=null&&g(e,["logprobsResult"],v);const E=f(n,["safetyRatings"]);if(E!=null){let A=E;Array.isArray(A)&&(A=A.map(x=>x)),g(e,["safetyRatings"],A)}return e}function Fx(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["citations"],s)}return e}function tS(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>mw(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function Hx(n,e){const t={},s=f(n,["displayName"]);if(e!==void 0&&s!=null&&g(e,["batch","displayName"],s),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function zx(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const o=f(n,["dest"]);return e!==void 0&&o!=null&&g(e,["outputConfig"],Px(Nx(o))),t}function ZT(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ze(n,s));const o=f(e,["src"]);o!=null&&g(t,["batch","inputConfig"],kx(n,W0(n,o)));const l=f(e,["config"]);return l!=null&&Hx(l,t),t}function Gx(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],Ze(n,s));const o=f(e,["src"]);o!=null&&g(t,["inputConfig"],Ux(W0(n,o)));const l=f(e,["config"]);return l!=null&&zx(l,t),t}function Yx(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["batch","displayName"],s),t}function Im(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ze(n,s));const o=f(e,["src"]);o!=null&&g(t,["batch","inputConfig"],Wx(n,o));const l=f(e,["config"]);return l!=null&&Yx(l,t),t}function jx(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],qa(n,s)),t}function Jx(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],qa(n,s)),t}function Kx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);return l!=null&&g(e,["error"],l),e}function $x(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);return l!=null&&g(e,["error"],l),e}function Qx(n,e){const t={},s=f(e,["contents"]);if(s!=null){let l=wp(n,s);Array.isArray(l)&&(l=l.map(c=>c)),g(t,["requests[]","request","content"],l)}const o=f(e,["config"]);return o!=null&&g(t,["_self"],Xx(o,t)),t}function Xx(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Wx(n,e){const t={},s=f(e,["fileName"]);s!=null&&g(t,["file_name"],s);const o=f(e,["inlinedRequests"]);return o!=null&&g(t,["requests"],Qx(n,o)),t}function Zx(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function ew(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],tS(mn(o)));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&g(s,["topP"],c);const d=f(e,["topK"]);d!=null&&g(s,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&g(s,["responseLogprobs"],E);const A=f(e,["logprobs"]);A!=null&&g(s,["logprobs"],A);const x=f(e,["presencePenalty"]);x!=null&&g(s,["presencePenalty"],x);const U=f(e,["frequencyPenalty"]);U!=null&&g(s,["frequencyPenalty"],U);const B=f(e,["seed"]);B!=null&&g(s,["seed"],B);const H=f(e,["responseMimeType"]);H!=null&&g(s,["responseMimeType"],H);const Z=f(e,["responseSchema"]);Z!=null&&g(s,["responseSchema"],Rp(Z));const ee=f(e,["responseJsonSchema"]);if(ee!=null&&g(s,["responseJsonSchema"],ee),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const $=f(e,["safetySettings"]);if(t!==void 0&&$!=null){let L=$;Array.isArray(L)&&(L=L.map(D=>pw(D))),g(t,["safetySettings"],L)}const F=f(e,["tools"]);if(t!==void 0&&F!=null){let L=Oa(F);Array.isArray(L)&&(L=L.map(D=>gw(La(D)))),g(t,["tools"],L)}const te=f(e,["toolConfig"]);if(t!==void 0&&te!=null&&g(t,["toolConfig"],te),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ae=f(e,["cachedContent"]);t!==void 0&&ae!=null&&g(t,["cachedContent"],Ds(n,ae));const N=f(e,["responseModalities"]);N!=null&&g(s,["responseModalities"],N);const M=f(e,["mediaResolution"]);M!=null&&g(s,["mediaResolution"],M);const R=f(e,["speechConfig"]);if(R!=null&&g(s,["speechConfig"],Np(R)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=f(e,["thinkingConfig"]);P!=null&&g(s,["thinkingConfig"],P);const V=f(e,["imageConfig"]);return V!=null&&g(s,["imageConfig"],V),s}function tw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>Bx(m))),g(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const l=f(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&g(e,["responseId"],c);const d=f(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function nw(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],qa(n,s)),t}function iw(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],qa(n,s)),t}function sw(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function rw(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&g(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function ow(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["request","model"],Ze(n,s));const o=f(e,["contents"]);if(o!=null){let d=ti(o);Array.isArray(d)&&(d=d.map(p=>tS(p))),g(t,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&g(t,["metadata"],l);const c=f(e,["config"]);return c!=null&&g(t,["request","generationConfig"],ew(n,c,f(t,["request"],{}))),t}function aw(n){const e={},t=f(n,["response"]);t!=null&&g(e,["response"],tw(t));const s=f(n,["error"]);return s!=null&&g(e,["error"],s),e}function lw(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);if(e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function uw(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const l=f(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),t}function cw(n){const e={},t=f(n,["config"]);return t!=null&&lw(t,e),e}function dw(n){const e={},t=f(n,["config"]);return t!=null&&uw(t,e),e}function fw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Ql(c))),g(e,["batchJobs"],l)}return e}function hw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>$m(c))),g(e,["batchJobs"],l)}return e}function mw(n){const e={},t=f(n,["videoMetadata"]);t!=null&&g(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&g(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&g(e,["inlineData"],Lx(o));const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],Zx(l));const c=f(n,["thoughtSignature"]);c!=null&&g(e,["thoughtSignature"],c);const d=f(n,["functionCall"]);d!=null&&g(e,["functionCall"],d);const p=f(n,["codeExecutionResult"]);p!=null&&g(e,["codeExecutionResult"],p);const m=f(n,["executableCode"]);m!=null&&g(e,["executableCode"],m);const v=f(n,["functionResponse"]);v!=null&&g(e,["functionResponse"],v);const E=f(n,["text"]);return E!=null&&g(e,["text"],E),e}function pw(n){const e={};if(f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=f(n,["category"]);t!=null&&g(e,["category"],t);const s=f(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function gw(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&g(e,["googleSearch"],rw(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&g(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],sw(l));const c=f(n,["urlContext"]);c!=null&&g(e,["urlContext"],c);const d=f(n,["computerUse"]);d!=null&&g(e,["computerUse"],d);const p=f(n,["codeExecution"]);return p!=null&&g(e,["codeExecution"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var fo;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(fo||(fo={}));class gu{constructor(e,t,s,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,o)}init(e,t,s){var o,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(o=c.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yw extends vo{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{var s,o;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(t.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(t);const d=this.createInlinedEmbedContentRequest(t),p=d.path,m=d.body,v=Im(this.apiClient,t)._query||{};return this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(A=>A.json()).then(A=>Ql(A))},this.list=async(t={})=>new gu(fo.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=ZT(this.apiClient,e),s=t._url,o=ye("{model}:batchGenerateContent",s),d=t.batch.inputConfig.requests,p=d.requests,m=[];for(const v of p){const E=Object.assign({},v);if(E.systemInstruction){const A=E.systemInstruction;delete E.systemInstruction;const x=E.request;x.systemInstruction=A,E.request=x}m.push(E)}return d.requests=m,delete t.config,delete t._url,delete t._query,{path:o,body:t}}createInlinedEmbedContentRequest(e){const t=Im(this.apiClient,e),s=t._url,o=ye("{model}:asyncBatchEmbedContent",s),d=t.batch.inputConfig.requests,p=d.requests,m=[];delete d.config;for(const v of p){const E=Object.assign({},v),A=E.request;for(const x in E)x!=="request"&&(A[x]=E[x],delete E[x]);m.push(E)}return d.requests=m,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},o=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${o}`),s.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${o}`;else if(c)s.dest=`${c}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=Gx(this.apiClient,e);return d=ye("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>$m(v))}else{const m=ZT(this.apiClient,e);return d=ye("{model}:batchGenerateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Ql(v))}}async createEmbeddingsInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Im(this.apiClient,e);return l=ye("{model}:asyncBatchEmbedContent",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>Ql(p))}}async get(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=iw(this.apiClient,e);return d=ye("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>$m(v))}else{const m=nw(this.apiClient,e);return d=ye("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Ql(v))}}async cancel(e){var t,s,o,l;let c="",d={};if(this.apiClient.isVertexAI()){const p=qx(this.apiClient,e);c=ye("batchPredictionJobs/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=Ox(this.apiClient,e);c=ye("batches/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=dw(e);return d=ye("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=hw(v),A=new $T;return Object.assign(A,E),A})}else{const m=cw(e);return d=ye("batches",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=fw(v),A=new $T;return Object.assign(A,E),A})}}async delete(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=Jx(this.apiClient,e);return d=ye("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>$x(v))}else{const m=jx(this.apiClient,e);return d=ye("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>Kx(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _w(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&g(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function eE(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>qw(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function vw(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const l=f(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let v=ti(c);Array.isArray(v)&&(v=v.map(E=>eE(E))),g(e,["contents"],v)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],eE(mn(d)));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let v=p;Array.isArray(v)&&(v=v.map(E=>Bw(E))),g(e,["tools"],v)}const m=f(n,["toolConfig"]);if(e!==void 0&&m!=null&&g(e,["toolConfig"],m),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function Tw(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const l=f(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let E=ti(c);Array.isArray(E)&&(E=E.map(A=>A)),g(e,["contents"],E)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],mn(d));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let E=p;Array.isArray(E)&&(E=E.map(A=>Fw(A))),g(e,["tools"],E)}const m=f(n,["toolConfig"]);e!==void 0&&m!=null&&g(e,["toolConfig"],m);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&g(e,["encryption_spec","kmsKeyName"],v),t}function Ew(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],z0(n,s));const o=f(e,["config"]);return o!=null&&vw(o,t),t}function Sw(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],z0(n,s));const o=f(e,["config"]);return o!=null&&Tw(o,t),t}function Aw(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ds(n,s)),t}function Cw(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ds(n,s)),t}function Iw(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function bw(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function xw(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function ww(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&g(e,["response"],c);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function Rw(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ds(n,s)),t}function Nw(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ds(n,s)),t}function Mw(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function Dw(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&g(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Pw(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function Vw(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function kw(n){const e={},t=f(n,["config"]);return t!=null&&Pw(t,e),e}function Uw(n){const e={},t=f(n,["config"]);return t!=null&&Vw(t,e),e}function Lw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["cachedContents"],l)}return e}function Ow(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["cachedContents"],l)}return e}function qw(n){const e={},t=f(n,["videoMetadata"]);t!=null&&g(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&g(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&g(e,["inlineData"],_w(o));const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],xw(l));const c=f(n,["thoughtSignature"]);c!=null&&g(e,["thoughtSignature"],c);const d=f(n,["functionCall"]);d!=null&&g(e,["functionCall"],d);const p=f(n,["codeExecutionResult"]);p!=null&&g(e,["codeExecutionResult"],p);const m=f(n,["executableCode"]);m!=null&&g(e,["executableCode"],m);const v=f(n,["functionResponse"]);v!=null&&g(e,["functionResponse"],v);const E=f(n,["text"]);return E!=null&&g(e,["text"],E),e}function Bw(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&g(e,["googleSearch"],Dw(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&g(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],Mw(l));const c=f(n,["urlContext"]);c!=null&&g(e,["urlContext"],c);const d=f(n,["computerUse"]);d!=null&&g(e,["computerUse"],d);const p=f(n,["codeExecution"]);return p!=null&&g(e,["codeExecution"],p),e}function Fw(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>ww(A))),g(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const o=f(n,["googleSearch"]);o!=null&&g(e,["googleSearch"],o);const l=f(n,["googleSearchRetrieval"]);l!=null&&g(e,["googleSearchRetrieval"],l);const c=f(n,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const p=f(n,["urlContext"]);p!=null&&g(e,["urlContext"],p);const m=f(n,["computerUse"]);m!=null&&g(e,["computerUse"],m);const v=f(n,["codeExecution"]);return v!=null&&g(e,["codeExecution"],v),e}function Hw(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function zw(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function Gw(n,e){const t={},s=f(e,["name"]);s!=null&&g(t,["_url","name"],Ds(n,s));const o=f(e,["config"]);return o!=null&&Hw(o,t),t}function Yw(n,e){const t={},s=f(e,["name"]);s!=null&&g(t,["_url","name"],Ds(n,s));const o=f(e,["config"]);return o!=null&&zw(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jw extends vo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new gu(fo.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=Sw(this.apiClient,e);return d=ye("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=Ew(this.apiClient,e);return d=ye("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=Nw(this.apiClient,e);return d=ye("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=Rw(this.apiClient,e);return d=ye("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=Cw(this.apiClient,e);return d=ye("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=bw(v),A=new JT;return Object.assign(A,E),A})}else{const m=Aw(this.apiClient,e);return d=ye("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=Iw(v),A=new JT;return Object.assign(A,E),A})}}async update(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=Yw(this.apiClient,e);return d=ye("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=Gw(this.apiClient,e);return d=ye("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=Uw(e);return d=ye("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=Ow(v),A=new KT;return Object.assign(A,E),A})}else{const m=kw(e);return d=ye("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=Lw(v),A=new KT;return Object.assign(A,E),A})}}}function tE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function gt(n){return this instanceof gt?(this.v=n,this):new gt(n)}function Ea(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(x){return function(U){return Promise.resolve(U).then(x,E)}}function d(x,U){s[x]&&(o[x]=function(B){return new Promise(function(H,Z){l.push([x,B,H,Z])>1||p(x,B)})},U&&(o[x]=U(o[x])))}function p(x,U){try{m(s[x](U))}catch(B){A(l[0][3],B)}}function m(x){x.value instanceof gt?Promise.resolve(x.value.v).then(v,E):A(l[0][2],x)}function v(x){p("next",x)}function E(x){p("throw",x)}function A(x,U){x(U),l.shift(),l.length&&p(l[0][0],l[0][1])}}function nu(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof tE=="function"?tE(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(c){return new Promise(function(d,p){c=n[l](c),o(d,p,c.done,c.value)})}}function o(l,c,d,p){Promise.resolve(p).then(function(m){l({value:m,done:d})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jw(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:nS(t)}function nS(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Kw(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function nE(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const o=[];let l=!0;for(;s<t&&n[s].role==="model";)o.push(n[s]),l&&!nS(n[s])&&(l=!1),s++;l?e.push(...o):e.pop()}return e}class $w{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Qw(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Qw{constructor(e,t,s,o={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),Kw(l)}async sendMessage(e){var t;await this.sendPromise;const s=mn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,c,d;const p=await o,m=(c=(l=p.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,v=p.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let A=[];v!=null&&(A=(d=v.slice(E))!==null&&d!==void 0?d:[]);const x=m?[m]:[];this.recordHistory(s,x,A)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const s=mn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?nE(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,o;return Ea(this,arguments,function*(){var c,d,p,m;const v=[];try{for(var E=!0,A=nu(e),x;x=yield gt(A.next()),c=x.done,!c;E=!0){m=x.value,E=!1;const U=m;if(Jw(U)){const B=(o=(s=U.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content;B!==void 0&&v.push(B)}yield yield gt(U)}}catch(U){d={error:U}}finally{try{!E&&!c&&(p=A.return)&&(yield gt(p.call(A)))}finally{if(d)throw d.error}}this.recordHistory(t,v)})}recordHistory(e,t,s){let o=[];t.length>0&&t.every(l=>l.role!==void 0)?o=t:o.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...nE(s)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $d extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,$d.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xw(n){const e={},t=f(n,["file"]);return t!=null&&g(e,["file"],t),e}function Ww(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function Zw(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],$0(t)),e}function eR(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function tR(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],$0(t)),e}function nR(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function iR(n){const e={},t=f(n,["config"]);return t!=null&&nR(t,e),e}function sR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rR extends vo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new gu(fo.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=iR(e);return l=ye("files",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=sR(p),v=new yx;return Object.assign(v,m),v})}}async createInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Xw(e);return l=ye("upload/v1beta/files",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const m=Ww(p),v=new _x;return Object.assign(v,m),v})}}async get(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=tR(e);return l=ye("files/{file}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Zw(e);return l=ye("files/{file}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=eR(p),v=new vx;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function md(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&g(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function oR(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>ER(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function aR(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function lR(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&g(e,["response"],c);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function uR(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=f(n,["audioTimestamp"]);s!=null&&g(e,["audioTimestamp"],s);const o=f(n,["candidateCount"]);o!=null&&g(e,["candidateCount"],o);const l=f(n,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const c=f(n,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const d=f(n,["logprobs"]);d!=null&&g(e,["logprobs"],d);const p=f(n,["maxOutputTokens"]);p!=null&&g(e,["maxOutputTokens"],p);const m=f(n,["mediaResolution"]);m!=null&&g(e,["mediaResolution"],m);const v=f(n,["presencePenalty"]);v!=null&&g(e,["presencePenalty"],v);const E=f(n,["responseJsonSchema"]);E!=null&&g(e,["responseJsonSchema"],E);const A=f(n,["responseLogprobs"]);A!=null&&g(e,["responseLogprobs"],A);const x=f(n,["responseMimeType"]);x!=null&&g(e,["responseMimeType"],x);const U=f(n,["responseModalities"]);U!=null&&g(e,["responseModalities"],U);const B=f(n,["responseSchema"]);B!=null&&g(e,["responseSchema"],B);const H=f(n,["routingConfig"]);H!=null&&g(e,["routingConfig"],H);const Z=f(n,["seed"]);Z!=null&&g(e,["seed"],Z);const ee=f(n,["speechConfig"]);ee!=null&&g(e,["speechConfig"],iS(ee));const $=f(n,["stopSequences"]);$!=null&&g(e,["stopSequences"],$);const F=f(n,["temperature"]);F!=null&&g(e,["temperature"],F);const te=f(n,["thinkingConfig"]);te!=null&&g(e,["thinkingConfig"],te);const ae=f(n,["topK"]);ae!=null&&g(e,["topK"],ae);const N=f(n,["topP"]);return N!=null&&g(e,["topP"],N),e}function cR(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function dR(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&g(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function fR(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],Mp(E));const A=f(n,["thinkingConfig"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","thinkingConfig"],A);const x=f(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],x);const U=f(n,["systemInstruction"]);e!==void 0&&U!=null&&g(e,["setup","systemInstruction"],oR(mn(U)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let ae=Oa(B);Array.isArray(ae)&&(ae=ae.map(N=>AR(La(N)))),g(e,["setup","tools"],ae)}const H=f(n,["sessionResumption"]);e!==void 0&&H!=null&&g(e,["setup","sessionResumption"],SR(H));const Z=f(n,["inputAudioTranscription"]);e!==void 0&&Z!=null&&g(e,["setup","inputAudioTranscription"],Z);const ee=f(n,["outputAudioTranscription"]);e!==void 0&&ee!=null&&g(e,["setup","outputAudioTranscription"],ee);const $=f(n,["realtimeInputConfig"]);e!==void 0&&$!=null&&g(e,["setup","realtimeInputConfig"],$);const F=f(n,["contextWindowCompression"]);e!==void 0&&F!=null&&g(e,["setup","contextWindowCompression"],F);const te=f(n,["proactivity"]);return e!==void 0&&te!=null&&g(e,["setup","proactivity"],te),t}function hR(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],uR(s));const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],iS(Mp(E)));const A=f(n,["thinkingConfig"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","thinkingConfig"],A);const x=f(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],x);const U=f(n,["systemInstruction"]);e!==void 0&&U!=null&&g(e,["setup","systemInstruction"],mn(U));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let ae=Oa(B);Array.isArray(ae)&&(ae=ae.map(N=>CR(La(N)))),g(e,["setup","tools"],ae)}const H=f(n,["sessionResumption"]);e!==void 0&&H!=null&&g(e,["setup","sessionResumption"],H);const Z=f(n,["inputAudioTranscription"]);e!==void 0&&Z!=null&&g(e,["setup","inputAudioTranscription"],Z);const ee=f(n,["outputAudioTranscription"]);e!==void 0&&ee!=null&&g(e,["setup","outputAudioTranscription"],ee);const $=f(n,["realtimeInputConfig"]);e!==void 0&&$!=null&&g(e,["setup","realtimeInputConfig"],$);const F=f(n,["contextWindowCompression"]);e!==void 0&&F!=null&&g(e,["setup","contextWindowCompression"],F);const te=f(n,["proactivity"]);return e!==void 0&&te!=null&&g(e,["setup","proactivity"],te),t}function mR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],Ze(n,s));const o=f(e,["config"]);return o!=null&&g(t,["config"],fR(o,t)),t}function pR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],Ze(n,s));const o=f(e,["config"]);return o!=null&&g(t,["config"],hR(o,t)),t}function gR(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function yR(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["weightedPrompts"],s)}return e}function _R(n){const e={},t=f(n,["media"]);if(t!=null){let m=G0(t);Array.isArray(m)&&(m=m.map(v=>md(v))),g(e,["mediaChunks"],m)}const s=f(n,["audio"]);s!=null&&g(e,["audio"],md(j0(s)));const o=f(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const l=f(n,["video"]);l!=null&&g(e,["video"],md(Y0(l)));const c=f(n,["text"]);c!=null&&g(e,["text"],c);const d=f(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function vR(n){const e={},t=f(n,["media"]);if(t!=null){let m=G0(t);Array.isArray(m)&&(m=m.map(v=>v)),g(e,["mediaChunks"],m)}const s=f(n,["audio"]);s!=null&&g(e,["audio"],j0(s));const o=f(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const l=f(n,["video"]);l!=null&&g(e,["video"],Y0(l));const c=f(n,["text"]);c!=null&&g(e,["text"],c);const d=f(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function TR(n){const e={},t=f(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const s=f(n,["serverContent"]);s!=null&&g(e,["serverContent"],s);const o=f(n,["toolCall"]);o!=null&&g(e,["toolCall"],o);const l=f(n,["toolCallCancellation"]);l!=null&&g(e,["toolCallCancellation"],l);const c=f(n,["usageMetadata"]);c!=null&&g(e,["usageMetadata"],IR(c));const d=f(n,["goAway"]);d!=null&&g(e,["goAway"],d);const p=f(n,["sessionResumptionUpdate"]);return p!=null&&g(e,["sessionResumptionUpdate"],p),e}function ER(n){const e={},t=f(n,["videoMetadata"]);t!=null&&g(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&g(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&g(e,["inlineData"],md(o));const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],aR(l));const c=f(n,["thoughtSignature"]);c!=null&&g(e,["thoughtSignature"],c);const d=f(n,["functionCall"]);d!=null&&g(e,["functionCall"],d);const p=f(n,["codeExecutionResult"]);p!=null&&g(e,["codeExecutionResult"],p);const m=f(n,["executableCode"]);m!=null&&g(e,["executableCode"],m);const v=f(n,["functionResponse"]);v!=null&&g(e,["functionResponse"],v);const E=f(n,["text"]);return E!=null&&g(e,["text"],E),e}function SR(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function iS(n){const e={},t=f(n,["voiceConfig"]);if(t!=null&&g(e,["voiceConfig"],t),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=f(n,["languageCode"]);return s!=null&&g(e,["languageCode"],s),e}function AR(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&g(e,["googleSearch"],dR(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&g(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],cR(l));const c=f(n,["urlContext"]);c!=null&&g(e,["urlContext"],c);const d=f(n,["computerUse"]);d!=null&&g(e,["computerUse"],d);const p=f(n,["codeExecution"]);return p!=null&&g(e,["codeExecution"],p),e}function CR(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>lR(A))),g(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const o=f(n,["googleSearch"]);o!=null&&g(e,["googleSearch"],o);const l=f(n,["googleSearchRetrieval"]);l!=null&&g(e,["googleSearchRetrieval"],l);const c=f(n,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const p=f(n,["urlContext"]);p!=null&&g(e,["urlContext"],p);const m=f(n,["computerUse"]);m!=null&&g(e,["computerUse"],m);const v=f(n,["codeExecution"]);return v!=null&&g(e,["codeExecution"],v),e}function IR(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const s=f(n,["cachedContentTokenCount"]);s!=null&&g(e,["cachedContentTokenCount"],s);const o=f(n,["candidatesTokenCount"]);o!=null&&g(e,["responseTokenCount"],o);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&g(e,["toolUsePromptTokenCount"],l);const c=f(n,["thoughtsTokenCount"]);c!=null&&g(e,["thoughtsTokenCount"],c);const d=f(n,["totalTokenCount"]);d!=null&&g(e,["totalTokenCount"],d);const p=f(n,["promptTokensDetails"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(U=>U)),g(e,["promptTokensDetails"],x)}const m=f(n,["cacheTokensDetails"]);if(m!=null){let x=m;Array.isArray(x)&&(x=x.map(U=>U)),g(e,["cacheTokensDetails"],x)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let x=v;Array.isArray(x)&&(x=x.map(U=>U)),g(e,["responseTokensDetails"],x)}const E=f(n,["toolUsePromptTokensDetails"]);if(E!=null){let x=E;Array.isArray(x)&&(x=x.map(U=>U)),g(e,["toolUsePromptTokensDetails"],x)}const A=f(n,["trafficType"]);return A!=null&&g(e,["trafficType"],A),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bR(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&g(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function xR(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],wR(s));const o=f(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const l=f(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const c=f(n,["urlContextMetadata"]);c!=null&&g(e,["urlContextMetadata"],c);const d=f(n,["avgLogprobs"]);d!=null&&g(e,["avgLogprobs"],d);const p=f(n,["groundingMetadata"]);p!=null&&g(e,["groundingMetadata"],p);const m=f(n,["index"]);m!=null&&g(e,["index"],m);const v=f(n,["logprobsResult"]);v!=null&&g(e,["logprobsResult"],v);const E=f(n,["safetyRatings"]);if(E!=null){let A=E;Array.isArray(A)&&(A=A.map(x=>x)),g(e,["safetyRatings"],A)}return e}function wR(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["citations"],s)}return e}function RR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ze(n,s));const o=f(e,["contents"]);if(o!=null){let l=ti(o);Array.isArray(l)&&(l=l.map(c=>c)),g(t,["contents"],l)}return t}function NR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["tokensInfo"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),g(e,["tokensInfo"],o)}return e}function MR(n){const e={},t=f(n,["values"]);t!=null&&g(e,["values"],t);const s=f(n,["statistics"]);return s!=null&&g(e,["statistics"],DR(s)),e}function DR(n){const e={},t=f(n,["truncated"]);t!=null&&g(e,["truncated"],t);const s=f(n,["token_count"]);return s!=null&&g(e,["tokenCount"],s),e}function Qd(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>LN(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function PR(n){const e={},t=f(n,["controlType"]);t!=null&&g(e,["controlType"],t);const s=f(n,["enableControlImageComputation"]);return s!=null&&g(e,["computeControl"],s),e}function VR(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function kR(n,e){const t={},s=f(n,["systemInstruction"]);e!==void 0&&s!=null&&g(e,["systemInstruction"],mn(s));const o=f(n,["tools"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>lS(d))),g(e,["tools"],c)}const l=f(n,["generationConfig"]);return e!==void 0&&l!=null&&g(e,["generationConfig"],CN(l)),t}function UR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ze(n,s));const o=f(e,["contents"]);if(o!=null){let c=ti(o);Array.isArray(c)&&(c=c.map(d=>Qd(d))),g(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&VR(l),t}function LR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ze(n,s));const o=f(e,["contents"]);if(o!=null){let c=ti(o);Array.isArray(c)&&(c=c.map(d=>d)),g(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&kR(l,t),t}function OR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);s!=null&&g(e,["totalTokens"],s);const o=f(n,["cachedContentTokenCount"]);return o!=null&&g(e,["cachedContentTokenCount"],o),e}function qR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);return s!=null&&g(e,["totalTokens"],s),e}function BR(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],Ze(n,s)),t}function FR(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],Ze(n,s)),t}function HR(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function zR(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function GR(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&g(e,["parameters","aspectRatio"],c);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const A=f(n,["includeRaiReason"]);e!==void 0&&A!=null&&g(e,["parameters","includeRaiReason"],A);const x=f(n,["language"]);e!==void 0&&x!=null&&g(e,["parameters","language"],x);const U=f(n,["outputMimeType"]);e!==void 0&&U!=null&&g(e,["parameters","outputOptions","mimeType"],U);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&g(e,["parameters","outputOptions","compressionQuality"],B);const H=f(n,["addWatermark"]);e!==void 0&&H!=null&&g(e,["parameters","addWatermark"],H);const Z=f(n,["labels"]);e!==void 0&&Z!=null&&g(e,["labels"],Z);const ee=f(n,["editMode"]);e!==void 0&&ee!=null&&g(e,["parameters","editMode"],ee);const $=f(n,["baseSteps"]);return e!==void 0&&$!=null&&g(e,["parameters","editConfig","baseSteps"],$),t}function YR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ze(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>zN(p))),g(t,["instances[0]","referenceImages"],d)}const c=f(e,["config"]);return c!=null&&GR(c,t),t}function jR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Xd(l))),g(e,["generatedImages"],o)}return e}function JR(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function KR(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["instances[]","task_type"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["instances[]","title"],o);const l=f(n,["outputDimensionality"]);e!==void 0&&l!=null&&g(e,["parameters","outputDimensionality"],l);const c=f(n,["mimeType"]);e!==void 0&&c!=null&&g(e,["instances[]","mimeType"],c);const d=f(n,["autoTruncate"]);return e!==void 0&&d!=null&&g(e,["parameters","autoTruncate"],d),t}function $R(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ze(n,s));const o=f(e,["contents"]);if(o!=null){let d=wp(n,o);Array.isArray(d)&&(d=d.map(p=>p)),g(t,["requests[]","content"],d)}const l=f(e,["config"]);l!=null&&JR(l,t);const c=f(e,["model"]);return c!==void 0&&g(t,["requests[]","model"],Ze(n,c)),t}function QR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ze(n,s));const o=f(e,["contents"]);if(o!=null){let c=wp(n,o);Array.isArray(c)&&(c=c.map(d=>d)),g(t,["instances[]","content"],c)}const l=f(e,["config"]);return l!=null&&KR(l,t),t}function XR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["embeddings"],l)}const o=f(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function WR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>MR(c))),g(e,["embeddings"],l)}const o=f(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function ZR(n){const e={},t=f(n,["endpoint"]);t!=null&&g(e,["name"],t);const s=f(n,["deployedModelId"]);return s!=null&&g(e,["deployedModelId"],s),e}function eN(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function tN(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&g(e,["response"],c);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function nN(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],Qd(mn(o)));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&g(s,["topP"],c);const d=f(e,["topK"]);d!=null&&g(s,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&g(s,["responseLogprobs"],E);const A=f(e,["logprobs"]);A!=null&&g(s,["logprobs"],A);const x=f(e,["presencePenalty"]);x!=null&&g(s,["presencePenalty"],x);const U=f(e,["frequencyPenalty"]);U!=null&&g(s,["frequencyPenalty"],U);const B=f(e,["seed"]);B!=null&&g(s,["seed"],B);const H=f(e,["responseMimeType"]);H!=null&&g(s,["responseMimeType"],H);const Z=f(e,["responseSchema"]);Z!=null&&g(s,["responseSchema"],Rp(Z));const ee=f(e,["responseJsonSchema"]);if(ee!=null&&g(s,["responseJsonSchema"],ee),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const $=f(e,["safetySettings"]);if(t!==void 0&&$!=null){let L=$;Array.isArray(L)&&(L=L.map(D=>GN(D))),g(t,["safetySettings"],L)}const F=f(e,["tools"]);if(t!==void 0&&F!=null){let L=Oa(F);Array.isArray(L)&&(L=L.map(D=>QN(La(D)))),g(t,["tools"],L)}const te=f(e,["toolConfig"]);if(t!==void 0&&te!=null&&g(t,["toolConfig"],te),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ae=f(e,["cachedContent"]);t!==void 0&&ae!=null&&g(t,["cachedContent"],Ds(n,ae));const N=f(e,["responseModalities"]);N!=null&&g(s,["responseModalities"],N);const M=f(e,["mediaResolution"]);M!=null&&g(s,["mediaResolution"],M);const R=f(e,["speechConfig"]);if(R!=null&&g(s,["speechConfig"],Np(R)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=f(e,["thinkingConfig"]);P!=null&&g(s,["thinkingConfig"],P);const V=f(e,["imageConfig"]);return V!=null&&g(s,["imageConfig"],V),s}function iN(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],mn(o));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&g(s,["topP"],c);const d=f(e,["topK"]);d!=null&&g(s,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&g(s,["responseLogprobs"],E);const A=f(e,["logprobs"]);A!=null&&g(s,["logprobs"],A);const x=f(e,["presencePenalty"]);x!=null&&g(s,["presencePenalty"],x);const U=f(e,["frequencyPenalty"]);U!=null&&g(s,["frequencyPenalty"],U);const B=f(e,["seed"]);B!=null&&g(s,["seed"],B);const H=f(e,["responseMimeType"]);H!=null&&g(s,["responseMimeType"],H);const Z=f(e,["responseSchema"]);Z!=null&&g(s,["responseSchema"],Rp(Z));const ee=f(e,["responseJsonSchema"]);ee!=null&&g(s,["responseJsonSchema"],ee);const $=f(e,["routingConfig"]);$!=null&&g(s,["routingConfig"],$);const F=f(e,["modelSelectionConfig"]);F!=null&&g(s,["modelConfig"],F);const te=f(e,["safetySettings"]);if(t!==void 0&&te!=null){let X=te;Array.isArray(X)&&(X=X.map(ce=>ce)),g(t,["safetySettings"],X)}const ae=f(e,["tools"]);if(t!==void 0&&ae!=null){let X=Oa(ae);Array.isArray(X)&&(X=X.map(ce=>lS(La(ce)))),g(t,["tools"],X)}const N=f(e,["toolConfig"]);t!==void 0&&N!=null&&g(t,["toolConfig"],N);const M=f(e,["labels"]);t!==void 0&&M!=null&&g(t,["labels"],M);const R=f(e,["cachedContent"]);t!==void 0&&R!=null&&g(t,["cachedContent"],Ds(n,R));const P=f(e,["responseModalities"]);P!=null&&g(s,["responseModalities"],P);const V=f(e,["mediaResolution"]);V!=null&&g(s,["mediaResolution"],V);const L=f(e,["speechConfig"]);L!=null&&g(s,["speechConfig"],aS(Np(L)));const D=f(e,["audioTimestamp"]);D!=null&&g(s,["audioTimestamp"],D);const Oe=f(e,["thinkingConfig"]);Oe!=null&&g(s,["thinkingConfig"],Oe);const Pe=f(e,["imageConfig"]);return Pe!=null&&g(s,["imageConfig"],Pe),s}function iE(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ze(n,s));const o=f(e,["contents"]);if(o!=null){let c=ti(o);Array.isArray(c)&&(c=c.map(d=>Qd(d))),g(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&g(t,["generationConfig"],nN(n,l,t)),t}function sE(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ze(n,s));const o=f(e,["contents"]);if(o!=null){let c=ti(o);Array.isArray(c)&&(c=c.map(d=>d)),g(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&g(t,["generationConfig"],iN(n,l,t)),t}function rE(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>xR(m))),g(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const l=f(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&g(e,["responseId"],c);const d=f(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function oE(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["candidates"],m)}const o=f(n,["createTime"]);o!=null&&g(e,["createTime"],o);const l=f(n,["modelVersion"]);l!=null&&g(e,["modelVersion"],l);const c=f(n,["promptFeedback"]);c!=null&&g(e,["promptFeedback"],c);const d=f(n,["responseId"]);d!=null&&g(e,["responseId"],d);const p=f(n,["usageMetadata"]);return p!=null&&g(e,["usageMetadata"],p),e}function sN(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const o=f(n,["aspectRatio"]);e!==void 0&&o!=null&&g(e,["parameters","aspectRatio"],o);const l=f(n,["guidanceScale"]);if(e!==void 0&&l!=null&&g(e,["parameters","guidanceScale"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&g(e,["parameters","safetySetting"],c);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d);const p=f(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&g(e,["parameters","includeSafetyAttributes"],p);const m=f(n,["includeRaiReason"]);e!==void 0&&m!=null&&g(e,["parameters","includeRaiReason"],m);const v=f(n,["language"]);e!==void 0&&v!=null&&g(e,["parameters","language"],v);const E=f(n,["outputMimeType"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","mimeType"],E);const A=f(n,["outputCompressionQuality"]);if(e!==void 0&&A!=null&&g(e,["parameters","outputOptions","compressionQuality"],A),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=f(n,["imageSize"]);if(e!==void 0&&x!=null&&g(e,["parameters","sampleImageSize"],x),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function rN(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&g(e,["parameters","aspectRatio"],c);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const A=f(n,["includeRaiReason"]);e!==void 0&&A!=null&&g(e,["parameters","includeRaiReason"],A);const x=f(n,["language"]);e!==void 0&&x!=null&&g(e,["parameters","language"],x);const U=f(n,["outputMimeType"]);e!==void 0&&U!=null&&g(e,["parameters","outputOptions","mimeType"],U);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&g(e,["parameters","outputOptions","compressionQuality"],B);const H=f(n,["addWatermark"]);e!==void 0&&H!=null&&g(e,["parameters","addWatermark"],H);const Z=f(n,["labels"]);e!==void 0&&Z!=null&&g(e,["labels"],Z);const ee=f(n,["imageSize"]);e!==void 0&&ee!=null&&g(e,["parameters","sampleImageSize"],ee);const $=f(n,["enhancePrompt"]);return e!==void 0&&$!=null&&g(e,["parameters","enhancePrompt"],$),t}function oN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ze(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["config"]);return l!=null&&sN(l,t),t}function aN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ze(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["config"]);return l!=null&&rN(l,t),t}function lN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>TN(c))),g(e,["generatedImages"],l)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],rS(o)),e}function uN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Xd(c))),g(e,["generatedImages"],l)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],oS(o)),e}function cN(n,e){const t={},s=f(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=f(n,["durationSeconds"]);if(e!==void 0&&o!=null&&g(e,["parameters","durationSeconds"],o),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const c=f(n,["resolution"]);e!==void 0&&c!=null&&g(e,["parameters","resolution"],c);const d=f(n,["personGeneration"]);if(e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=f(n,["negativePrompt"]);e!==void 0&&p!=null&&g(e,["parameters","negativePrompt"],p);const m=f(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&g(e,["parameters","enhancePrompt"],m),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(n,["lastFrame"]);e!==void 0&&v!=null&&g(e,["instances[0]","lastFrame"],Wd(v));const E=f(n,["referenceImages"]);if(e!==void 0&&E!=null){let A=E;Array.isArray(A)&&(A=A.map(x=>u1(x))),g(e,["instances[0]","referenceImages"],A)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function dN(n,e){const t={},s=f(n,["numberOfVideos"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&g(e,["parameters","storageUri"],o);const l=f(n,["fps"]);e!==void 0&&l!=null&&g(e,["parameters","fps"],l);const c=f(n,["durationSeconds"]);e!==void 0&&c!=null&&g(e,["parameters","durationSeconds"],c);const d=f(n,["seed"]);e!==void 0&&d!=null&&g(e,["parameters","seed"],d);const p=f(n,["aspectRatio"]);e!==void 0&&p!=null&&g(e,["parameters","aspectRatio"],p);const m=f(n,["resolution"]);e!==void 0&&m!=null&&g(e,["parameters","resolution"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=f(n,["pubsubTopic"]);e!==void 0&&E!=null&&g(e,["parameters","pubsubTopic"],E);const A=f(n,["negativePrompt"]);e!==void 0&&A!=null&&g(e,["parameters","negativePrompt"],A);const x=f(n,["enhancePrompt"]);e!==void 0&&x!=null&&g(e,["parameters","enhancePrompt"],x);const U=f(n,["generateAudio"]);e!==void 0&&U!=null&&g(e,["parameters","generateAudio"],U);const B=f(n,["lastFrame"]);e!==void 0&&B!=null&&g(e,["instances[0]","lastFrame"],vi(B));const H=f(n,["referenceImages"]);if(e!==void 0&&H!=null){let $=H;Array.isArray($)&&($=$.map(F=>c1(F))),g(e,["instances[0]","referenceImages"],$)}const Z=f(n,["mask"]);e!==void 0&&Z!=null&&g(e,["instances[0]","mask"],l1(Z));const ee=f(n,["compressionQuality"]);return e!==void 0&&ee!=null&&g(e,["parameters","compressionQuality"],ee),t}function fN(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&g(e,["response"],gN(c)),e}function hN(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["response"]);return c!=null&&g(e,["response"],yN(c)),e}function mN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ze(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["image"]);l!=null&&g(t,["instances[0]","image"],Wd(l));const c=f(e,["video"]);c!=null&&g(t,["instances[0]","video"],uS(c));const d=f(e,["source"]);d!=null&&_N(d,t);const p=f(e,["config"]);return p!=null&&cN(p,t),t}function pN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ze(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["image"]);l!=null&&g(t,["instances[0]","image"],vi(l));const c=f(e,["video"]);c!=null&&g(t,["instances[0]","video"],cS(c));const d=f(e,["source"]);d!=null&&vN(d,t);const p=f(e,["config"]);return p!=null&&dN(p,t),t}function gN(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>SN(c))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function yN(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>AN(c))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function _N(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],Wd(o));const l=f(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],uS(l)),t}function vN(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],vi(o));const l=f(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],cS(l)),t}function TN(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],RN(t));const s=f(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const o=f(n,["_self"]);return o!=null&&g(e,["safetyAttributes"],rS(o)),e}function Xd(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],sS(t));const s=f(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const o=f(n,["_self"]);o!=null&&g(e,["safetyAttributes"],oS(o));const l=f(n,["prompt"]);return l!=null&&g(e,["enhancedPrompt"],l),e}function EN(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["mask"],sS(t));const s=f(n,["labels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),g(e,["labels"],o)}return e}function SN(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],o1(t)),e}function AN(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],a1(t)),e}function CN(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=f(n,["audioTimestamp"]);s!=null&&g(e,["audioTimestamp"],s);const o=f(n,["candidateCount"]);o!=null&&g(e,["candidateCount"],o);const l=f(n,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const c=f(n,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const d=f(n,["logprobs"]);d!=null&&g(e,["logprobs"],d);const p=f(n,["maxOutputTokens"]);p!=null&&g(e,["maxOutputTokens"],p);const m=f(n,["mediaResolution"]);m!=null&&g(e,["mediaResolution"],m);const v=f(n,["presencePenalty"]);v!=null&&g(e,["presencePenalty"],v);const E=f(n,["responseJsonSchema"]);E!=null&&g(e,["responseJsonSchema"],E);const A=f(n,["responseLogprobs"]);A!=null&&g(e,["responseLogprobs"],A);const x=f(n,["responseMimeType"]);x!=null&&g(e,["responseMimeType"],x);const U=f(n,["responseModalities"]);U!=null&&g(e,["responseModalities"],U);const B=f(n,["responseSchema"]);B!=null&&g(e,["responseSchema"],B);const H=f(n,["routingConfig"]);H!=null&&g(e,["routingConfig"],H);const Z=f(n,["seed"]);Z!=null&&g(e,["seed"],Z);const ee=f(n,["speechConfig"]);ee!=null&&g(e,["speechConfig"],aS(ee));const $=f(n,["stopSequences"]);$!=null&&g(e,["stopSequences"],$);const F=f(n,["temperature"]);F!=null&&g(e,["temperature"],F);const te=f(n,["thinkingConfig"]);te!=null&&g(e,["thinkingConfig"],te);const ae=f(n,["topK"]);ae!=null&&g(e,["topK"],ae);const N=f(n,["topP"]);return N!=null&&g(e,["topP"],N),e}function IN(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],Ze(n,s)),t}function bN(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],Ze(n,s)),t}function xN(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function wN(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&g(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function RN(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],Mr(t));const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function sS(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["imageBytes"],Mr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function Wd(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],Mr(t));const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function vi(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["imageBytes"]);s!=null&&g(e,["bytesBase64Encoded"],Mr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function NN(n,e,t){const s={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&g(t,["_query","filter"],c);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],Q0(n,d)),s}function MN(n,e,t){const s={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&g(t,["_query","filter"],c);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],Q0(n,d)),s}function DN(n,e){const t={},s=f(e,["config"]);return s!=null&&NN(n,s,t),t}function PN(n,e){const t={},s=f(e,["config"]);return s!=null&&MN(n,s,t),t}function VN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["_self"]);if(o!=null){let l=X0(o);Array.isArray(l)&&(l=l.map(c=>Qm(c))),g(e,["models"],l)}return e}function kN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["_self"]);if(o!=null){let l=X0(o);Array.isArray(l)&&(l=l.map(c=>Xm(c))),g(e,["models"],l)}return e}function UN(n){const e={},t=f(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const s=f(n,["segmentationClasses"]);s!=null&&g(e,["maskClasses"],s);const o=f(n,["maskDilation"]);return o!=null&&g(e,["dilation"],o),e}function Qm(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const o=f(n,["description"]);o!=null&&g(e,["description"],o);const l=f(n,["version"]);l!=null&&g(e,["version"],l);const c=f(n,["_self"]);c!=null&&g(e,["tunedModelInfo"],XN(c));const d=f(n,["inputTokenLimit"]);d!=null&&g(e,["inputTokenLimit"],d);const p=f(n,["outputTokenLimit"]);p!=null&&g(e,["outputTokenLimit"],p);const m=f(n,["supportedGenerationMethods"]);return m!=null&&g(e,["supportedActions"],m),e}function Xm(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const o=f(n,["description"]);o!=null&&g(e,["description"],o);const l=f(n,["versionId"]);l!=null&&g(e,["version"],l);const c=f(n,["deployedModels"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(A=>ZR(A))),g(e,["endpoints"],E)}const d=f(n,["labels"]);d!=null&&g(e,["labels"],d);const p=f(n,["_self"]);p!=null&&g(e,["tunedModelInfo"],WN(p));const m=f(n,["defaultCheckpointId"]);m!=null&&g(e,["defaultCheckpointId"],m);const v=f(n,["checkpoints"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(A=>A)),g(e,["checkpoints"],E)}return e}function LN(n){const e={},t=f(n,["videoMetadata"]);t!=null&&g(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&g(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&g(e,["inlineData"],bR(o));const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],eN(l));const c=f(n,["thoughtSignature"]);c!=null&&g(e,["thoughtSignature"],c);const d=f(n,["functionCall"]);d!=null&&g(e,["functionCall"],d);const p=f(n,["codeExecutionResult"]);p!=null&&g(e,["codeExecutionResult"],p);const m=f(n,["executableCode"]);m!=null&&g(e,["executableCode"],m);const v=f(n,["functionResponse"]);v!=null&&g(e,["functionResponse"],v);const E=f(n,["text"]);return E!=null&&g(e,["text"],E),e}function ON(n){const e={},t=f(n,["productImage"]);return t!=null&&g(e,["image"],vi(t)),e}function qN(n,e){const t={},s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const o=f(n,["baseSteps"]);e!==void 0&&o!=null&&g(e,["parameters","editConfig","baseSteps"],o);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&g(e,["parameters","storageUri"],l);const c=f(n,["seed"]);e!==void 0&&c!=null&&g(e,["parameters","seed"],c);const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&g(e,["parameters","safetySetting"],d);const p=f(n,["personGeneration"]);e!==void 0&&p!=null&&g(e,["parameters","personGeneration"],p);const m=f(n,["addWatermark"]);e!==void 0&&m!=null&&g(e,["parameters","addWatermark"],m);const v=f(n,["outputMimeType"]);e!==void 0&&v!=null&&g(e,["parameters","outputOptions","mimeType"],v);const E=f(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","compressionQuality"],E);const A=f(n,["enhancePrompt"]);e!==void 0&&A!=null&&g(e,["parameters","enhancePrompt"],A);const x=f(n,["labels"]);return e!==void 0&&x!=null&&g(e,["labels"],x),t}function BN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ze(n,s));const o=f(e,["source"]);o!=null&&HN(o,t);const l=f(e,["config"]);return l!=null&&qN(l,t),t}function FN(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>Xd(o))),g(e,["generatedImages"],s)}return e}function HN(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=f(n,["personImage"]);e!==void 0&&o!=null&&g(e,["instances[0]","personImage","image"],vi(o));const l=f(n,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>ON(d))),g(e,["instances[0]","productImages"],c)}return t}function zN(n){const e={},t=f(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],vi(t));const s=f(n,["referenceId"]);s!=null&&g(e,["referenceId"],s);const o=f(n,["referenceType"]);o!=null&&g(e,["referenceType"],o);const l=f(n,["maskImageConfig"]);l!=null&&g(e,["maskImageConfig"],UN(l));const c=f(n,["controlImageConfig"]);c!=null&&g(e,["controlImageConfig"],PR(c));const d=f(n,["styleImageConfig"]);d!=null&&g(e,["styleImageConfig"],d);const p=f(n,["subjectImageConfig"]);return p!=null&&g(e,["subjectImageConfig"],p),e}function rS(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const o=f(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function oS(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const o=f(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function GN(n){const e={};if(f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=f(n,["category"]);t!=null&&g(e,["category"],t);const s=f(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function YN(n){const e={},t=f(n,["image"]);return t!=null&&g(e,["image"],vi(t)),e}function jN(n,e){const t={},s=f(n,["mode"]);e!==void 0&&s!=null&&g(e,["parameters","mode"],s);const o=f(n,["maxPredictions"]);e!==void 0&&o!=null&&g(e,["parameters","maxPredictions"],o);const l=f(n,["confidenceThreshold"]);e!==void 0&&l!=null&&g(e,["parameters","confidenceThreshold"],l);const c=f(n,["maskDilation"]);e!==void 0&&c!=null&&g(e,["parameters","maskDilation"],c);const d=f(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&g(e,["parameters","binaryColorThreshold"],d);const p=f(n,["labels"]);return e!==void 0&&p!=null&&g(e,["labels"],p),t}function JN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ze(n,s));const o=f(e,["source"]);o!=null&&$N(o,t);const l=f(e,["config"]);return l!=null&&jN(l,t),t}function KN(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>EN(o))),g(e,["generatedMasks"],s)}return e}function $N(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],vi(o));const l=f(n,["scribbleImage"]);return e!==void 0&&l!=null&&g(e,["instances[0]","scribble"],YN(l)),t}function aS(n){const e={},t=f(n,["voiceConfig"]);if(t!=null&&g(e,["voiceConfig"],t),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=f(n,["languageCode"]);return s!=null&&g(e,["languageCode"],s),e}function QN(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&g(e,["googleSearch"],wN(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&g(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],xN(l));const c=f(n,["urlContext"]);c!=null&&g(e,["urlContext"],c);const d=f(n,["computerUse"]);d!=null&&g(e,["computerUse"],d);const p=f(n,["codeExecution"]);return p!=null&&g(e,["codeExecution"],p),e}function lS(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>tN(A))),g(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const o=f(n,["googleSearch"]);o!=null&&g(e,["googleSearch"],o);const l=f(n,["googleSearchRetrieval"]);l!=null&&g(e,["googleSearchRetrieval"],l);const c=f(n,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const p=f(n,["urlContext"]);p!=null&&g(e,["urlContext"],p);const m=f(n,["computerUse"]);m!=null&&g(e,["computerUse"],m);const v=f(n,["codeExecution"]);return v!=null&&g(e,["codeExecution"],v),e}function XN(n){const e={},t=f(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&g(e,["createTime"],s);const o=f(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function WN(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&g(e,["createTime"],s);const o=f(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function ZN(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const o=f(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function e1(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const o=f(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function t1(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","name"],Ze(n,s));const o=f(e,["config"]);return o!=null&&ZN(o,t),t}function n1(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ze(n,s));const o=f(e,["config"]);return o!=null&&e1(o,t),t}function i1(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const o=f(n,["includeRaiReason"]);e!==void 0&&o!=null&&g(e,["parameters","includeRaiReason"],o);const l=f(n,["outputMimeType"]);e!==void 0&&l!=null&&g(e,["parameters","outputOptions","mimeType"],l);const c=f(n,["outputCompressionQuality"]);e!==void 0&&c!=null&&g(e,["parameters","outputOptions","compressionQuality"],c);const d=f(n,["enhanceInputImage"]);e!==void 0&&d!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],d);const p=f(n,["imagePreservationFactor"]);e!==void 0&&p!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],p);const m=f(n,["labels"]);e!==void 0&&m!=null&&g(e,["labels"],m);const v=f(n,["numberOfImages"]);e!==void 0&&v!=null&&g(e,["parameters","sampleCount"],v);const E=f(n,["mode"]);return e!==void 0&&E!=null&&g(e,["parameters","mode"],E),t}function s1(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ze(n,s));const o=f(e,["image"]);o!=null&&g(t,["instances[0]","image"],vi(o));const l=f(e,["upscaleFactor"]);l!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],l);const c=f(e,["config"]);return c!=null&&i1(c,t),t}function r1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Xd(l))),g(e,["generatedImages"],o)}return e}function o1(n){const e={},t=f(n,["video","uri"]);t!=null&&g(e,["uri"],t);const s=f(n,["video","encodedVideo"]);s!=null&&g(e,["videoBytes"],Mr(s));const o=f(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function a1(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],Mr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function l1(n){const e={},t=f(n,["image"]);t!=null&&g(e,["_self"],vi(t));const s=f(n,["maskMode"]);return s!=null&&g(e,["maskMode"],s),e}function u1(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],Wd(t));const s=f(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function c1(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],vi(t));const s=f(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function uS(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["video","uri"],t);const s=f(n,["videoBytes"]);s!=null&&g(e,["video","encodedVideo"],Mr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["encoding"],o),e}function cS(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["videoBytes"]);s!=null&&g(e,["bytesBase64Encoded"],Mr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const d1="Content-Type",f1="X-Server-Timeout",h1="User-Agent",Wm="x-goog-api-client",m1="1.24.0",p1=`google-genai-sdk/${m1}`,g1="v1beta1",y1="v1beta",aE=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class _1{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:g1,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:y1,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const o=[this.getRequestUrlInternal(t)];return s&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[c,d]of Object.entries(e.queryParams))o.searchParams.append(c,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(t))typeof l=="object"?s[o]=Object.assign(Object.assign({},s[o]),l):l!==void 0&&(s[o]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s){if(t&&t.timeout||s){const o=new AbortController,l=o.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const c=setTimeout(()=>o.abort(),t.timeout);c&&typeof c.unref=="function"&&c.unref()}s&&s.addEventListener("abort",()=>{o.abort()}),e.signal=l}return t&&t.extraBody!==null&&v1(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await lE(o),new Jm(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await lE(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return Ea(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let c="";for(;;){const{done:d,value:p}=yield gt(o.read());if(d){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=l.decode(p,{stream:!0});try{const E=JSON.parse(m);if("error"in E){const A=JSON.parse(JSON.stringify(E.error)),x=A.status,U=A.code,B=`got status: ${x}. ${JSON.stringify(E)}`;if(U>=400&&U<600)throw new $d({message:B,status:U})}}catch(E){if(E.name==="ApiError")throw E}c+=m;let v=c.match(aE);for(;v;){const E=v[1];try{const A=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield gt(new Jm(A)),c=c.slice(v[0].length),v=c.match(aE)}catch(A){throw new Error(`exception parsing stream chunk ${E}. ${A}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=p1+" "+this.clientOptions.userAgentExtra;return e[h1]=t,e[Wm]=t,e[d1]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[s,o]of Object.entries(e.headers))t.append(s,o);e.timeout&&e.timeout>0&&t.append(f1,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var s;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);o.sizeBytes=String(c.size);const d=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:c.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const p=await this.fetchUploadUrl(o,t);return l.upload(e,p,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var s;let o={};t!=null&&t.httpOptions?o=t.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},c=await this.request({path:ye("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:o});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(s=c==null?void 0:c.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function lE(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(s);throw t>=400&&t<600?new $d({message:o,status:t}):new Error(o)}}function v1(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,c){const d=Object.assign({},l);for(const p in c)if(Object.prototype.hasOwnProperty.call(c,p)){const m=c[p],v=d[p];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?d[p]=s(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),d[p]=m)}return d}const o=s(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const T1="mcp_used/unknown";let E1=!1;function dS(n){for(const e of n)if(S1(e)||typeof e=="object"&&"inputSchema"in e)return!0;return E1}function fS(n){var e;const t=(e=n[Wm])!==null&&e!==void 0?e:"";n[Wm]=(t+` ${T1}`).trimStart()}function S1(n){return n!==null&&typeof n=="object"&&n instanceof Dp}function A1(n,e=100){return Ea(this,arguments,function*(){let s,o=0;for(;o<e;){const l=yield gt(n.listTools({cursor:s}));for(const c of l.tools)yield yield gt(c),o++;if(!l.nextCursor)break;s=l.nextCursor}})}class Dp{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Dp(e,t)}async initialize(){var e,t,s,o;if(this.mcpTools.length>0)return;const l={},c=[];for(const v of this.mcpClients)try{for(var d=!0,p=(t=void 0,nu(A1(v))),m;m=await p.next(),e=m.done,!e;d=!0){o=m.value,d=!1;const E=o;c.push(E);const A=E.name;if(l[A])throw new Error(`Duplicate function name ${A} found in MCP tools. Please ensure function names are unique.`);l[A]=v}}catch(E){t={error:E}}finally{try{!d&&!e&&(s=p.return)&&await s.call(p)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),Rx(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await o.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function C1(n,e,t){const s=new Ex;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(s,o),e(s)}class I1{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=w1(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),p=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let m=()=>{};const v=new Promise($=>{m=$}),E=e.callbacks,A=function(){m({})},x=this.apiClient,U={onopen:A,onmessage:$=>{C1(x,E.onmessage,$)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function($){},onclose:(s=E==null?void 0:E.onclose)!==null&&s!==void 0?s:function($){}},B=this.webSocketFactory.create(p,x1(c),U);B.connect(),await v;const ee={setup:{model:Ze(this.apiClient,e.model)}};return B.send(JSON.stringify(ee)),new b1(B,this.apiClient)}}class b1{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=yR(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=gR(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ya.PLAY)}pause(){this.sendPlaybackControl(ya.PAUSE)}stop(){this.sendPlaybackControl(ya.STOP)}resetContext(){this.sendPlaybackControl(ya.RESET_CONTEXT)}close(){this.conn.close()}}function x1(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function w1(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const R1="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function N1(n,e,t){const s=new Tx;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const l=JSON.parse(o);if(n.isVertexAI()){const c=TR(l);Object.assign(s,c)}else Object.assign(s,l);e(s)}class M1{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new I1(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,o,l,c,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&dS(e.config.tools)&&fS(E);const A=k1(E);if(this.apiClient.isVertexAI())v=`${p}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(A);else{const R=this.apiClient.getApiKey();let P="BidiGenerateContent",V="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",V="access_token"),v=`${p}/ws/google.ai.generativelanguage.${m}.GenerativeService.${P}?${V}=${R}`}let x=()=>{};const U=new Promise(R=>{x=R}),B=e.callbacks,H=function(){var R;(R=B==null?void 0:B.onopen)===null||R===void 0||R.call(B),x({})},Z=this.apiClient,ee={onopen:H,onmessage:R=>{N1(Z,B.onmessage,R)},onerror:(t=B==null?void 0:B.onerror)!==null&&t!==void 0?t:function(R){},onclose:(s=B==null?void 0:B.onclose)!==null&&s!==void 0?s:function(R){}},$=this.webSocketFactory.create(v,V1(A),ee);$.connect(),await U;let F=Ze(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&F.startsWith("publishers/")){const R=this.apiClient.getProject(),P=this.apiClient.getLocation();F=`projects/${R}/locations/${P}/`+F}let te={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Id.AUDIO]}:e.config.responseModalities=[Id.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ae=(d=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[],N=[];for(const R of ae)if(this.isCallableTool(R)){const P=R;N.push(await P.tool())}else N.push(R);N.length>0&&(e.config.tools=N);const M={model:F,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?te=pR(this.apiClient,M):te=mR(this.apiClient,M),delete te.config,$.send(JSON.stringify(te)),new P1($,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const D1={turnComplete:!0};class P1{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=ti(t.turns),e.isVertexAI()||(s=s.map(o=>Qd(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(R1)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},D1),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:vR(e)}:t={realtimeInput:_R(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function V1(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function k1(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uE=10;function cE(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const c of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Sa(c)){o=!0;break}if(!o)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Sa(n){return"callTool"in n&&typeof n.callTool=="function"}function U1(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>Sa(o)))!==null&&s!==void 0?s:!1}function L1(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>!Sa(o)))!==null&&s!==void 0?s:!1}function dE(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class O1 extends vo{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,o,l,c,d;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!U1(t)||cE(t.config))return await this.generateContentInternal(p);if(L1(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let m,v;const E=ti(p.contents),A=(l=(o=(s=p.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:uE;let x=0;for(;x<A&&(m=await this.generateContentInternal(p),!(!m.functionCalls||m.functionCalls.length===0));){const U=m.candidates[0].content,B=[];for(const H of(d=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[])if(Sa(H)){const ee=await H.callTool(m.functionCalls);B.push(...ee)}x++,v={role:"user",parts:B},p.contents=ti(p.contents),p.contents.push(U),p.contents.push(v),dE(p.config)&&(E.push(U),E.push(v))}return dE(p.config)&&(m.automaticFunctionCallingHistory=E),m},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),cE(t.config)){const s=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(s)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var o;let l;const c=[];if(s!=null&&s.generatedImages)for(const p of s.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((o=p==null?void 0:p.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=p==null?void 0:p.safetyAttributes:c.push(p);let d;return l?d={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:d={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},d}),this.list=async t=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new gu(fo.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(c),c)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,o;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const c=await Promise.all(l.map(async p=>Sa(p)?await p.tool():p)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(d.config.tools=c,e.config&&e.config.tools&&dS(e.config.tools)){const p=(o=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&o!==void 0?o:{};let m=Object.assign({},p);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),fS(m),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return d}async initAfcToolsMap(e){var t,s,o;const l=new Map;for(const c of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(Sa(c)){const d=c,p=await d.tool();for(const m of(o=p.functionDeclarations)!==null&&o!==void 0?o:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,d)}}return l}async processAfcStream(e){var t,s,o;const l=(o=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:uE;let c=!1,d=0;const p=await this.initAfcToolsMap(e);return(function(m,v,E){var A,x;return Ea(this,arguments,function*(){for(var U,B,H,Z;d<l;){c&&(d++,c=!1);const te=yield gt(m.processParamsMaybeAddMcpUsage(E)),ae=yield gt(m.generateContentStreamInternal(te)),N=[],M=[];try{for(var ee=!0,$=(B=void 0,nu(ae)),F;F=yield gt($.next()),U=F.done,!U;ee=!0){Z=F.value,ee=!1;const R=Z;if(yield yield gt(R),R.candidates&&(!((A=R.candidates[0])===null||A===void 0)&&A.content)){M.push(R.candidates[0].content);for(const P of(x=R.candidates[0].content.parts)!==null&&x!==void 0?x:[])if(d<l&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(P.functionCall.name)){const V=yield gt(v.get(P.functionCall.name).callTool([P.functionCall]));N.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(R){B={error:R}}finally{try{!ee&&!U&&(H=$.return)&&(yield gt(H.call($)))}finally{if(B)throw B.error}}if(N.length>0){c=!0;const R=new Kl;R.candidates=[{content:{role:"user",parts:N}}],yield yield gt(R);const P=[];P.push(...M),P.push({role:"user",parts:N});const V=ti(E.contents).concat(P);E.contents=V}else break}})})(this,p,e)}async generateContentInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=sE(this.apiClient,e);return d=ye("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=oE(v),A=new Kl;return Object.assign(A,E),A})}else{const m=iE(this.apiClient,e);return d=ye("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=rE(v),A=new Kl;return Object.assign(A,E),A})}}async generateContentStreamInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=sE(this.apiClient,e);return d=ye("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(E){return Ea(this,arguments,function*(){var A,x,U,B;try{for(var H=!0,Z=nu(E),ee;ee=yield gt(Z.next()),A=ee.done,!A;H=!0){B=ee.value,H=!1;const $=B,F=oE(yield gt($.json()));F.sdkHttpResponse={headers:$.headers};const te=new Kl;Object.assign(te,F),yield yield gt(te)}}catch($){x={error:$}}finally{try{!H&&!A&&(U=Z.return)&&(yield gt(U.call(Z)))}finally{if(x)throw x.error}}})})}else{const m=iE(this.apiClient,e);return d=ye("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(E){return Ea(this,arguments,function*(){var A,x,U,B;try{for(var H=!0,Z=nu(E),ee;ee=yield gt(Z.next()),A=ee.done,!A;H=!0){B=ee.value,H=!1;const $=B,F=rE(yield gt($.json()));F.sdkHttpResponse={headers:$.headers};const te=new Kl;Object.assign(te,F),yield yield gt(te)}}catch($){x={error:$}}finally{try{!H&&!A&&(U=Z.return)&&(yield gt(U.call(Z)))}finally{if(x)throw x.error}}})})}}async embedContent(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=QR(this.apiClient,e);return d=ye("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=WR(v),A=new FT;return Object.assign(A,E),A})}else{const m=$R(this.apiClient,e);return d=ye("{model}:batchEmbedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=XR(v),A=new FT;return Object.assign(A,E),A})}}async generateImagesInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=aN(this.apiClient,e);return d=ye("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=uN(v),A=new HT;return Object.assign(A,E),A})}else{const m=oN(this.apiClient,e);return d=ye("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=lN(v),A=new HT;return Object.assign(A,E),A})}}async editImageInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=YR(this.apiClient,e);return l=ye("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=jR(p),v=new fx;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=s1(this.apiClient,e);return l=ye("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=r1(p),v=new hx;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=BN(this.apiClient,e);return l=ye("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const m=FN(p),v=new mx;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=JN(this.apiClient,e);return l=ye("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const m=KN(p),v=new px;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=bN(this.apiClient,e);return d=ye("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Xm(v))}else{const m=IN(this.apiClient,e);return d=ye("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Qm(v))}}async listInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=PN(this.apiClient,e);return d=ye("{models_url}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=kN(v),A=new zT;return Object.assign(A,E),A})}else{const m=DN(this.apiClient,e);return d=ye("{models_url}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=VN(v),A=new zT;return Object.assign(A,E),A})}}async update(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=n1(this.apiClient,e);return d=ye("{model}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Xm(v))}else{const m=t1(this.apiClient,e);return d=ye("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Qm(v))}}async delete(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=FR(this.apiClient,e);return d=ye("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=zR(v),A=new GT;return Object.assign(A,E),A})}else{const m=BR(this.apiClient,e);return d=ye("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=HR(v),A=new GT;return Object.assign(A,E),A})}}async countTokens(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=LR(this.apiClient,e);return d=ye("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=qR(v),A=new YT;return Object.assign(A,E),A})}else{const m=UR(this.apiClient,e);return d=ye("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=OR(v),A=new YT;return Object.assign(A,E),A})}}async computeTokens(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=RR(this.apiClient,e);return l=ye("{model}:computeTokens",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=NR(p),v=new gx;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=pN(this.apiClient,e);return d=ye("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>{const E=hN(v),A=new bd;return Object.assign(A,E),A})}else{const m=mN(this.apiClient,e);return d=ye("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const E=fN(v),A=new bd;return Object.assign(A,E),A})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class q1 extends vo{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=ux(e);return d=ye("{operationName}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c}else{const m=lx(e);return d=ye("{operationName}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=tx(e);return l=ye("{resourceName}:fetchPredictOperation",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function B1(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&g(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function F1(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>$1(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function H1(n,e,t){const s={},o=f(e,["expireTime"]);t!==void 0&&o!=null&&g(t,["expireTime"],o);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&g(t,["newSessionExpireTime"],l);const c=f(e,["uses"]);t!==void 0&&c!=null&&g(t,["uses"],c);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&g(t,["bidiGenerateContentSetup"],K1(n,d));const p=f(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&g(t,["fieldMask"],p),s}function z1(n,e){const t={},s=f(e,["config"]);return s!=null&&g(t,["config"],H1(n,s,t)),t}function G1(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Y1(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function j1(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&g(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function J1(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],Mp(E));const A=f(n,["thinkingConfig"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","thinkingConfig"],A);const x=f(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],x);const U=f(n,["systemInstruction"]);e!==void 0&&U!=null&&g(e,["setup","systemInstruction"],F1(mn(U)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let ae=Oa(B);Array.isArray(ae)&&(ae=ae.map(N=>X1(La(N)))),g(e,["setup","tools"],ae)}const H=f(n,["sessionResumption"]);e!==void 0&&H!=null&&g(e,["setup","sessionResumption"],Q1(H));const Z=f(n,["inputAudioTranscription"]);e!==void 0&&Z!=null&&g(e,["setup","inputAudioTranscription"],Z);const ee=f(n,["outputAudioTranscription"]);e!==void 0&&ee!=null&&g(e,["setup","outputAudioTranscription"],ee);const $=f(n,["realtimeInputConfig"]);e!==void 0&&$!=null&&g(e,["setup","realtimeInputConfig"],$);const F=f(n,["contextWindowCompression"]);e!==void 0&&F!=null&&g(e,["setup","contextWindowCompression"],F);const te=f(n,["proactivity"]);return e!==void 0&&te!=null&&g(e,["setup","proactivity"],te),t}function K1(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],Ze(n,s));const o=f(e,["config"]);return o!=null&&g(t,["config"],J1(o,t)),t}function $1(n){const e={},t=f(n,["videoMetadata"]);t!=null&&g(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&g(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&g(e,["inlineData"],B1(o));const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],G1(l));const c=f(n,["thoughtSignature"]);c!=null&&g(e,["thoughtSignature"],c);const d=f(n,["functionCall"]);d!=null&&g(e,["functionCall"],d);const p=f(n,["codeExecutionResult"]);p!=null&&g(e,["codeExecutionResult"],p);const m=f(n,["executableCode"]);m!=null&&g(e,["executableCode"],m);const v=f(n,["functionResponse"]);v!=null&&g(e,["functionResponse"],v);const E=f(n,["text"]);return E!=null&&g(e,["text"],E),e}function Q1(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function X1(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&g(e,["googleSearch"],j1(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&g(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],Y1(l));const c=f(n,["urlContext"]);c!=null&&g(e,["urlContext"],c);const d=f(n,["computerUse"]);d!=null&&g(e,["computerUse"],d);const p=f(n,["codeExecution"]);return p!=null&&g(e,["codeExecution"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W1(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const o=Object.keys(s).map(l=>`${t}.${l}`);e.push(...o)}else e.push(t)}return e.join(",")}function Z1(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const l=W1(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(m=>c.includes(m)?`generationConfig.${m}`:m));const p=[];l&&p.push(l),d.length>0&&p.push(...d),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class eM extends vo{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=z1(this.apiClient,e);l=ye("auth_tokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const p=Z1(d,e.config);return o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tM(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function nM(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function iM(n,e){const t={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=f(n,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&g(e,["displayName"],s),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=f(n,["epochCount"]);e!==void 0&&o!=null&&g(e,["tuningTask","hyperparameters","epochCount"],o);const l=f(n,["learningRateMultiplier"]);if(l!=null&&g(t,["tuningTask","hyperparameters","learningRateMultiplier"],l),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=f(n,["batchSize"]);e!==void 0&&c!=null&&g(e,["tuningTask","hyperparameters","batchSize"],c);const d=f(n,["learningRate"]);if(e!==void 0&&d!=null&&g(e,["tuningTask","hyperparameters","learningRate"],d),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return t}function sM(n,e){const t={},s=f(n,["validationDataset"]);e!==void 0&&s!=null&&g(e,["supervisedTuningSpec"],vM(s,t));const o=f(n,["tunedModelDisplayName"]);e!==void 0&&o!=null&&g(e,["tunedModelDisplayName"],o);const l=f(n,["description"]);e!==void 0&&l!=null&&g(e,["description"],l);const c=f(n,["epochCount"]);e!==void 0&&c!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],c);const d=f(n,["learningRateMultiplier"]);e!==void 0&&d!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],d);const p=f(n,["exportLastCheckpointOnly"]);e!==void 0&&p!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],p);const m=f(n,["adapterSize"]);if(e!==void 0&&m!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],m),f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const v=f(n,["labels"]);return e!==void 0&&v!=null&&g(e,["labels"],v),t}function rM(n){const e={},t=f(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["preTunedModel"]);s!=null&&g(e,["preTunedModel"],s);const o=f(n,["trainingDataset"]);o!=null&&g(e,["tuningTask","trainingData"],gM(o));const l=f(n,["config"]);return l!=null&&iM(l,e),e}function oM(n){const e={},t=f(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["preTunedModel"]);s!=null&&g(e,["preTunedModel"],s);const o=f(n,["trainingDataset"]);o!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],yM(o,e));const l=f(n,["config"]);return l!=null&&sM(l,e),e}function aM(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function lM(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function uM(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const l=f(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),t}function cM(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const l=f(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),t}function dM(n){const e={},t=f(n,["config"]);return t!=null&&uM(t,e),e}function fM(n){const e={},t=f(n,["config"]);return t!=null&&cM(t,e),e}function hM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["tunedModels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>hS(c))),g(e,["tuningJobs"],l)}return e}function mM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["tuningJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Zm(c))),g(e,["tuningJobs"],l)}return e}function pM(n){const e={},t=f(n,["name"]);t!=null&&g(e,["model"],t);const s=f(n,["name"]);return s!=null&&g(e,["endpoint"],s),e}function gM(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const t=f(n,["examples"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["examples","examples"],s)}return e}function yM(n,e){const t={},s=f(n,["gcsUri"]);e!==void 0&&s!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],s);const o=f(n,["vertexDatasetResource"]);if(e!==void 0&&o!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],o),f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function hS(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["state"]);o!=null&&g(e,["state"],K0(o));const l=f(n,["createTime"]);l!=null&&g(e,["createTime"],l);const c=f(n,["tuningTask","startTime"]);c!=null&&g(e,["startTime"],c);const d=f(n,["tuningTask","completeTime"]);d!=null&&g(e,["endTime"],d);const p=f(n,["updateTime"]);p!=null&&g(e,["updateTime"],p);const m=f(n,["description"]);m!=null&&g(e,["description"],m);const v=f(n,["baseModel"]);v!=null&&g(e,["baseModel"],v);const E=f(n,["_self"]);E!=null&&g(e,["tunedModel"],pM(E));const A=f(n,["customBaseModel"]);A!=null&&g(e,["customBaseModel"],A);const x=f(n,["experiment"]);x!=null&&g(e,["experiment"],x);const U=f(n,["labels"]);U!=null&&g(e,["labels"],U);const B=f(n,["outputUri"]);B!=null&&g(e,["outputUri"],B);const H=f(n,["pipelineJob"]);H!=null&&g(e,["pipelineJob"],H);const Z=f(n,["serviceAccount"]);Z!=null&&g(e,["serviceAccount"],Z);const ee=f(n,["tunedModelDisplayName"]);ee!=null&&g(e,["tunedModelDisplayName"],ee);const $=f(n,["veoTuningSpec"]);return $!=null&&g(e,["veoTuningSpec"],$),e}function Zm(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["state"]);o!=null&&g(e,["state"],K0(o));const l=f(n,["createTime"]);l!=null&&g(e,["createTime"],l);const c=f(n,["startTime"]);c!=null&&g(e,["startTime"],c);const d=f(n,["endTime"]);d!=null&&g(e,["endTime"],d);const p=f(n,["updateTime"]);p!=null&&g(e,["updateTime"],p);const m=f(n,["error"]);m!=null&&g(e,["error"],m);const v=f(n,["description"]);v!=null&&g(e,["description"],v);const E=f(n,["baseModel"]);E!=null&&g(e,["baseModel"],E);const A=f(n,["tunedModel"]);A!=null&&g(e,["tunedModel"],A);const x=f(n,["preTunedModel"]);x!=null&&g(e,["preTunedModel"],x);const U=f(n,["supervisedTuningSpec"]);U!=null&&g(e,["supervisedTuningSpec"],U);const B=f(n,["tuningDataStats"]);B!=null&&g(e,["tuningDataStats"],B);const H=f(n,["encryptionSpec"]);H!=null&&g(e,["encryptionSpec"],H);const Z=f(n,["partnerModelTuningSpec"]);Z!=null&&g(e,["partnerModelTuningSpec"],Z);const ee=f(n,["customBaseModel"]);ee!=null&&g(e,["customBaseModel"],ee);const $=f(n,["experiment"]);$!=null&&g(e,["experiment"],$);const F=f(n,["labels"]);F!=null&&g(e,["labels"],F);const te=f(n,["outputUri"]);te!=null&&g(e,["outputUri"],te);const ae=f(n,["pipelineJob"]);ae!=null&&g(e,["pipelineJob"],ae);const N=f(n,["serviceAccount"]);N!=null&&g(e,["serviceAccount"],N);const M=f(n,["tunedModelDisplayName"]);M!=null&&g(e,["tunedModelDisplayName"],M);const R=f(n,["veoTuningSpec"]);return R!=null&&g(e,["veoTuningSpec"],R),e}function _M(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["metadata"]);o!=null&&g(e,["metadata"],o);const l=f(n,["done"]);l!=null&&g(e,["done"],l);const c=f(n,["error"]);return c!=null&&g(e,["error"],c),e}function vM(n,e){const t={},s=f(n,["gcsUri"]);s!=null&&g(t,["validationDatasetUri"],s);const o=f(n,["vertexDatasetResource"]);return e!==void 0&&o!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TM extends vo{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new gu(fo.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:o});return l.baseModel=void 0,await this.tuneInternal(l)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),l=await this.tuneMldevInternal(o);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:jm.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=lM(e);return d=ye("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>Zm(v))}else{const m=aM(e);return d=ye("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>hS(v))}}async listInternal(e){var t,s,o,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=fM(e);return d=ye("tuningJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=mM(v),A=new jT;return Object.assign(A,E),A})}else{const m=dM(e);return d=ye("tunedModels",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=hM(v),A=new jT;return Object.assign(A,E),A})}}async cancel(e){var t,s,o,l;let c="",d={};if(this.apiClient.isVertexAI()){const p=nM(e);c=ye("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=tM(e);c=ye("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=oM(e);return l=ye("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>Zm(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=rM(e);return l=ye("tunedModels",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>_M(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EM{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const SM=1024*1024*8,AM=3,CM=1e3,IM=2,bm="x-goog-upload-status";async function bM(n,e,t){var s,o,l;let c=0,d=0,p=new Jm(new Response),m="upload";for(c=n.size;d<c;){const E=Math.min(SM,c-d),A=n.slice(d,d+E);d+E>=c&&(m+=", finalize");let x=0,U=CM;for(;x<AM&&(p=await t.request({path:"",body:A,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(d),"Content-Length":String(E)}}}),!(!((s=p==null?void 0:p.headers)===null||s===void 0)&&s[bm]));)x++,await wM(U),U=U*IM;if(d+=E,((o=p==null?void 0:p.headers)===null||o===void 0?void 0:o[bm])!=="active")break;if(c<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(p==null?void 0:p.json());if(((l=p==null?void 0:p.headers)===null||l===void 0?void 0:l[bm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function xM(n){return{size:n.size,type:n.type}}function wM(n){return new Promise(e=>setTimeout(e,n))}class RM{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await bM(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await xM(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class NM{create(e,t,s){return new MM(e,t,s)}}class MM{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fE="x-goog-api-key";class DM{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(fE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(fE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PM="gl-node/";class VM{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=ex(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const o=new DM(this.apiKey);this.apiClient=new _1({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:PM+"web",uploader:new RM,downloader:new EM}),this.models=new O1(this.apiClient),this.live=new M1(this.apiClient,o,new NM),this.batches=new yw(this.apiClient),this.chats=new $w(this.models,this.apiClient),this.caches=new jw(this.apiClient),this.files=new rR(this.apiClient),this.operations=new q1(this.apiClient),this.authTokens=new eM(this.apiClient),this.tunings=new TM(this.apiClient)}}const mS={BASE_URL:"/fd/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_ENVIRONMENT:"production",VITE_FIREBASE_API_KEY:"AIzaSyBA1uXbBt5qHfOh9nTFXuI2IVN-uhWYD_g",VITE_FIREBASE_APP_ID:"1:221809737779:web:a0e2f3d1b9b6c1e1f2d3e4",VITE_FIREBASE_AUTH_DOMAIN:"expenses-140c4.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"221809737779",VITE_FIREBASE_PROJECT_ID:"expenses-140c4",VITE_FIREBASE_STORAGE_BUCKET:"expenses-140c4.appspot.com",VITE_GEMINI_API_KEY:"AIzaSyCU4hOMnyFAWpi1zuy1tRuWW9AV358_njE"},Ct={firebase:{apiKey:"AIzaSyBA1uXbBt5qHfOh9nTFXuI2IVN-uhWYD_g",authDomain:"expenses-140c4.firebaseapp.com",projectId:"expenses-140c4",storageBucket:"expenses-140c4.appspot.com",messagingSenderId:"221809737779",appId:"1:221809737779:web:a0e2f3d1b9b6c1e1f2d3e4"},gemini:{apiKey:"AIzaSyCU4hOMnyFAWpi1zuy1tRuWW9AV358_njE",model:"gemini-2.5-flash"},app:{name:"لوحة التحكم المالية",version:"1.0.0",environment:"production"}};console.log("🔍 فحص متغيرات البيئة:",{environment:Ct.app.environment,firebaseApiKey:Ct.firebase.apiKey?"✅ موجود":"❌ مفقود",firebaseAuthDomain:Ct.firebase.authDomain||"❌ مفقود",firebaseProjectId:Ct.firebase.projectId||"❌ مفقود",firebaseStorageBucket:Ct.firebase.storageBucket||"❌ مفقود",firebaseMessagingSenderId:Ct.firebase.messagingSenderId||"❌ مفقود",firebaseAppId:Ct.firebase.appId||"❌ مفقود",geminiApiKey:"✅ موجود",allEnvVars:Object.keys(mS).filter(n=>n.startsWith("VITE_"))});console.log("🔍 جميع متغيرات VITE_ في البيئة:",Object.keys(mS).filter(n=>n.startsWith("VITE_")));const Aa=()=>{const n=[];return Ct.firebase.apiKey||n.push("مفتاح Firebase API مفقود"),Ct.firebase.authDomain||n.push("Firebase Auth Domain مفقود"),Ct.firebase.projectId||n.push("معرف مشروع Firebase مفقود"),Ct.firebase.storageBucket||n.push("Firebase Storage Bucket مفقود"),Ct.firebase.messagingSenderId||n.push("Firebase Messaging Sender ID مفقود"),Ct.firebase.appId||n.push("Firebase App ID مفقود"),{isValid:n.length===0,errors:n,hasFirebase:!!Ct.firebase.apiKey,hasGemini:!0}};if(typeof window<"u"){const n=Aa();n.isValid?console.log("✅ جميع الإعدادات صحيحة ومكتملة"):console.warn("⚠️ تحذير: بعض الإعدادات غير مكتملة:",n.errors)}let wd;const kM=Ct.gemini.model,pS=()=>{if(wd)return;const n=Aa();if(!n.isValid){console.warn("⚠️ تحذير: مفتاح Gemini API غير صحيح:",n.errors);return}try{wd=new VM({apiKey:Ct.gemini.apiKey}),console.log("🤖 تم تهيئة خدمة Gemini بنجاح")}catch(e){console.error("❌ خطأ في تهيئة خدمة Gemini:",e)}},yu={FINANCIAL_ANALYST:`You are an expert financial analyst assistant, "المحلل الذكي". You have full access to the user's financial data for a specific period. Your purpose is to provide detailed, insightful analysis and answer complex questions in Arabic based ONLY on the data provided for that period.
- Today's date is ${new Date().toLocaleDateString("en-CA")}.
- Analyze the user's provided financial state (transactions, card details, bank balance, investments, installments) for the specified period to answer their query.
- Be thorough. Connect different parts of their financial data to give holistic answers.
- DO NOT just state data, INTERPRET it. Provide insights, identify trends, and offer observations.
- Be friendly, professional, and act as a true financial advisor.`,INVESTMENT_COACH:`You are an educational investment coach named "المستشار الذكي". Your primary role is to educate the user about investment concepts and strategies, particularly within the context of the Saudi stock market (Tadawul).
- You MUST NOT give direct financial advice. Do not recommend buying or selling specific stocks (e.g., "Buy Aramco").
- When asked for a recommendation, you MUST politely decline and instead explain HOW the user can research and make their own informed decisions.
- Your tone should be encouraging, educational, and responsible.
- Keep your answers clear, concise, and in Arabic.`,PASTE_ANALYZER:`You are an intelligent data extraction tool for Arabic and English financial transaction SMS messages from Saudi Arabia. Your task is to analyze the provided text and respond ONLY with a valid JSON object containing the keys: "merchant", "amount", "date", "paymentMethod", and "categoryId".
- **CRITICAL RULE**: Extract data ONLY from the user's text. Do not invent or infer information. If a piece of information is not present in the text, its corresponding JSON value should be null.
- **ERROR HANDLING**: If the provided text does not seem to be a financial transaction SMS at all, you MUST respond with a JSON object containing a single key "error" with the value "النص المقدم لا يبدو كرسالة معاملة مالية.".

- **Amount Extraction**:
  - The 'amount' is the primary transaction value.
  - Look for a number after keywords like "بـ" or "Amount:".
  - You MUST ignore any numbers associated with "Remaining limit", "الصرف المتبقي", or card numbers.

- **Date Extraction**:
  - The 'date' MUST be in "YYYY-MM-DD" format.
  - If the text provides a full timestamp like "2025-09-06 15:11:57", extract only the date part "2025-09-06".
  - If the text uses "DD/MM/YY", you must convert it. Example: '01/09/25' becomes '2025-09-01'.

- **Merchant Extraction**:
  - The 'merchant' is the store or service name.
  - Look for text after keywords like "من" or "Merchant:".

{{PAYMENT_METHOD_MAPPING}}

- **Category ID**:
  - Analyze the merchant name and suggest the most relevant ID from the provided list of available categories. If unsure, use the ID for the category named 'أخرى'.

---
**EXAMPLES**

1.  **Input**: "شراء-POS\\nبـ182 SAR\\nمن Adel Inte\\nمدى-ابل*2855\\nفي 01/09/25 22:11"
    **Output**: { "merchant": "Adel Inte", "amount": 182, "date": "2025-09-01", "paymentMethod": "bank-default", "categoryId": "cat-5" }

2.  **Input**: "شراء-POS\\nبـ‬‪95.78 ‬‪SAR\\nمن ‬‪BINDAWOOD\\nإئتمانية **4278 ‬‪(Apple Pay)\\nفي ‬‪03/09/25 ‬‪14:45\\nالصرف المتبقي ‬‪12146.95 ‬‪SAR"
    **Output**: { "merchant": "BINDAWOOD", "amount": 95.78, "date": "2025-09-03", "paymentMethod": "snb-card", "categoryId": "cat-1" }

3.  **Input**: "POS Purchase (Apple Pay)\\nCard: Visa card XX8095\\nAmount: SAR 115.00\\nMerchant: AlHamra Roundabout Statio\\nIn: SAUDI ARABIA\\nRemaining limit SAR 2,502.34\\nOn: 2025-09-06 15:11:57"
    **Output**: { "merchant": "AlHamra Roundabout Statio", "amount": 115.00, "date": "2025-09-06", "paymentMethod": "enbd-card", "categoryId": "cat-3" }

4.  **Input**: "POS Purchase (Apple Pay)\\nCard: Visa card XX8095\\nAmount: SAR 10.00\\nMerchant: MKAN CO\\nIn: SAUDI ARABIA\\nRemaining limit SAR 2,782.27\\nOn: 2025-09-03 23:44:56"
    **Output**: { "merchant": "MKAN CO", "amount": 10.00, "date": "2025-09-03", "paymentMethod": "enbd-card", "categoryId": "cat-7" }
---
`,ICON_SUGGESTER:"You are an emoji expert. Your task is to suggest a single, relevant emoji for a given category name. You must respond with ONLY the emoji character and nothing else.",BUDGET_PLANNER:`You are a helpful and encouraging financial planning assistant in Arabic. Your goal is to help the user create a realistic monthly budget based on their spending history and a total budget amount they provide. Use the 50/30/20 rule (50% for Needs, 30% for Wants, 20% for Savings/Debt) as a general framework, but you MUST adapt it to the user's actual spending patterns revealed in their transaction data. Your response MUST be in Arabic and formatted using Markdown. It should contain: 1. A brief, encouraging introductory sentence. 2. A breakdown of the total budget into Needs, Wants, and Savings, with the suggested amount for each. 3. A detailed table with three columns: "الفئة", "المبلغ المقترح", and "ملاحظات". 4. In the table, allocate the "Needs" and "Wants" amounts across the user's actual spending categories. 5. The "Notes" column should provide a brief justification. 6. Conclude with a short, motivational tip.`},_u=async(n,e,t=!1)=>{if(!wd)throw new Error("لم تتم تهيئة خدمة الذكاء الاصطناعي. يرجى التأكد من صحة إعدادات الاتصال.");try{return(await wd.models.generateContent({model:kM,contents:e,config:{systemInstruction:n,...t&&{responseMimeType:"application/json"}}})).text}catch(s){console.error("Gemini API Error:",s);let o="عفواً، حدث خطأ أثناء الاتصال بالخادم. يرجى المحاولة مرة أخرى.";throw s instanceof Error&&"message"in s&&s.message.includes("403")&&(o="تم رفض الوصول (403). يرجى التحقق من قيود مفتاح API الخاص بك في Google Cloud Console."),new Error(o)}},gS=(n,e)=>_u(yu.FINANCIAL_ANALYST,`User Query: "${n}"

Financial Data: ${JSON.stringify(e)}`),yS=(n,e,t,s)=>{const o=Object.keys(t),l=Object.keys(s);let c=`- **Payment Method Mapping**:
  - The 'paymentMethod' MUST be one of these exact values: [${[...l,...o].map(p=>`'${p}'`).join(", ")}].
`;Object.values(s).forEach(p=>{const m=[p.name.split(" ")[0],...p.smsSamples||[]].filter(Boolean);m.length>0&&(c+=`  - If the text is a bank/mada transaction and contains any of these: '${m.join("', '")}', use '${p.id}'.
`)}),Object.values(t).forEach(p=>{const m=[p.name.split(" ")[0],...p.smsSamples||[]].filter(Boolean);m.length>0&&(c+=`  - If the text is a credit card transaction and contains any of these: '${m.join("', '")}', use '${p.id}'.
`)}),c+="  - If no specific bank account keywords match for a bank/mada transaction, default to the first bank account ID in the list.";const d=yu.PASTE_ANALYZER.replace("{{PAYMENT_METHOD_MAPPING}}",c);return _u(d,`Text to analyze: "${n}"

Available Categories: ${JSON.stringify(e)}

First bank account ID is '${l[0]}'`,!0)},_S=n=>_u(yu.INVESTMENT_COACH,n),UM=n=>_u(yu.ICON_SUGGESTER,`Category: ${n}`),vS=(n,e,t)=>_u(yu.BUDGET_PLANNER,`Total monthly budget is: ${n} SAR. My spending categories are: ${JSON.stringify(e)}. My transactions from the last 60 days are: ${JSON.stringify(t)}`),LM=Object.freeze(Object.defineProperty({__proto__:null,analyzeFinancialData:gS,analyzePastedText:yS,generateBudgetPlan:vS,generateInvestmentAdvice:_S,initializeAi:pS,suggestCategoryIcon:UM},Symbol.toStringTag,{value:"Module"})),OM="modulepreload",qM=function(n){return"/fd/"+n},hE={},pr=function(e,t,s){let o=Promise.resolve();if(t&&t.length>0){let c=function(m){return Promise.all(m.map(v=>Promise.resolve(v).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));o=c(t.map(m=>{if(m=qM(m),m in hE)return;hE[m]=!0;const v=m.endsWith(".css"),E=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${E}`))return;const A=document.createElement("link");if(A.rel=v?"stylesheet":OM,v||(A.as="script"),A.crossOrigin="",A.href=m,p&&A.setAttribute("nonce",p),document.head.appendChild(A),v)return new Promise((x,U)=>{A.addEventListener("load",x),A.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${m}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return o.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})},BM=()=>{};var mE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},FM=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],d=n[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},ES={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,d=c?n[o+1]:0,p=o+2<n.length,m=p?n[o+2]:0,v=l>>2,E=(l&3)<<4|d>>4;let A=(d&15)<<2|m>>6,x=m&63;p||(x=64,c||(A=64)),s.push(t[v],t[E],t[A],t[x])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(TS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):FM(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||d==null||m==null||E==null)throw new HM;const A=l<<2|d>>4;if(s.push(A),m!==64){const x=d<<4&240|m>>2;if(s.push(x),E!==64){const U=m<<6&192|E;s.push(U)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class HM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zM=function(n){const e=TS(n);return ES.encodeByteArray(e,!0)},Rd=function(n){return zM(n).replace(/\./g,"")},SS=function(n){try{return ES.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM=()=>GM().__FIREBASE_DEFAULTS__,jM=()=>{if(typeof process>"u"||typeof mE>"u")return;const n=mE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},JM=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&SS(n[1]);return e&&JSON.parse(e)},Zd=()=>{try{return BM()||YM()||jM()||JM()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},AS=n=>{var e,t;return(t=(e=Zd())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},KM=n=>{const e=AS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},CS=()=>{var n;return(n=Zd())==null?void 0:n.config},IS=n=>{var e;return(e=Zd())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ba(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function bS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QM(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Rd(JSON.stringify(t)),Rd(JSON.stringify(c)),""].join(".")}const iu={};function XM(){const n={prod:[],emulator:[]};for(const e of Object.keys(iu))iu[e]?n.emulator.push(e):n.prod.push(e);return n}function WM(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let pE=!1;function xS(n,e){if(typeof window>"u"||typeof document>"u"||!Ba(window.location.host)||iu[n]===e||iu[n]||pE)return;iu[n]=e;function t(A){return`__firebase__banner__${A}`}const s="__firebase__banner",l=XM().prod.length>0;function c(){const A=document.getElementById(s);A&&A.remove()}function d(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function p(A,x){A.setAttribute("width","24"),A.setAttribute("id",x),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function m(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{pE=!0,c()},A}function v(A,x){A.setAttribute("id",x),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function E(){const A=WM(s),x=t("text"),U=document.getElementById(x)||document.createElement("span"),B=t("learnmore"),H=document.getElementById(B)||document.createElement("a"),Z=t("preprendIcon"),ee=document.getElementById(Z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const $=A.element;d($),v(H,B);const F=m();p(ee,Z),$.append(ee,U,H,F),document.body.appendChild($)}l?(U.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function eD(){var e;const n=(e=Zd())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nD(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function iD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sD(){const n=pn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function rD(){return!eD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oD(){try{return typeof indexedDB=="object"}catch{return!1}}function aD(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD="FirebaseError";class Ps extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=lD,Object.setPrototypeOf(this,Ps.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vu.prototype.create)}}class vu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?uD(l,s):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new Ps(o,d,s)}}function uD(n,e){return n.replace(cD,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const cD=/\{\$([^}]+)}/g;function dD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ho(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=n[o],c=e[o];if(gE(l)&&gE(c)){if(!ho(l,c))return!1}else if(l!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function gE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Xl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Wl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function fD(n,e){const t=new hD(n,e);return t.subscribe.bind(t)}class hD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");mD(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=xm),o.error===void 0&&(o.error=xm),o.complete===void 0&&(o.complete=xm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mD(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function xm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(n){return n&&n._delegate?n._delegate:n}class mo{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new $M;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yD(e))try{this.getOrInitializeService({instanceIdentifier:lo})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=lo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=lo){return this.instances.has(e)}getOptions(e=lo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&c.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:gD(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=lo){return this.component?this.component.multipleInstances?e:lo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gD(n){return n===lo?void 0:n}function yD(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new pD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ge||(Ge={}));const vD={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},TD=Ge.INFO,ED={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},SD=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=ED[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pp{constructor(e){this.name=e,this._logLevel=TD,this._logHandler=SD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const AD=(n,e)=>e.some(t=>n instanceof t);let yE,_E;function CD(){return yE||(yE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ID(){return _E||(_E=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wS=new WeakMap,ep=new WeakMap,RS=new WeakMap,wm=new WeakMap,Vp=new WeakMap;function bD(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(vr(n.result)),o()},c=()=>{s(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&wS.set(t,n)}).catch(()=>{}),Vp.set(e,n),e}function xD(n){if(ep.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});ep.set(n,e)}let tp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ep.get(n);if(e==="objectStoreNames")return n.objectStoreNames||RS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return vr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function wD(n){tp=n(tp)}function RD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Rm(this),e,...t);return RS.set(s,e.sort?e.sort():[e]),vr(s)}:ID().includes(n)?function(...e){return n.apply(Rm(this),e),vr(wS.get(this))}:function(...e){return vr(n.apply(Rm(this),e))}}function ND(n){return typeof n=="function"?RD(n):(n instanceof IDBTransaction&&xD(n),AD(n,CD())?new Proxy(n,tp):n)}function vr(n){if(n instanceof IDBRequest)return bD(n);if(wm.has(n))return wm.get(n);const e=ND(n);return e!==n&&(wm.set(n,e),Vp.set(e,n)),e}const Rm=n=>Vp.get(n);function MD(n,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),d=vr(c);return s&&c.addEventListener("upgradeneeded",p=>{s(vr(c.result),p.oldVersion,p.newVersion,vr(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const DD=["get","getKey","getAll","getAllKeys","count"],PD=["put","add","delete","clear"],Nm=new Map;function vE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Nm.get(e))return Nm.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=PD.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||DD.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,o?"readwrite":"readonly");let m=p.store;return s&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),o&&p.done]))[0]};return Nm.set(e,l),l}wD(n=>({...n,get:(e,t,s)=>vE(e,t)||n.get(e,t,s),has:(e,t)=>!!vE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(kD(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function kD(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const np="@firebase/app",TE="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=new Pp("@firebase/app"),UD="@firebase/app-compat",LD="@firebase/analytics-compat",OD="@firebase/analytics",qD="@firebase/app-check-compat",BD="@firebase/app-check",FD="@firebase/auth",HD="@firebase/auth-compat",zD="@firebase/database",GD="@firebase/data-connect",YD="@firebase/database-compat",jD="@firebase/functions",JD="@firebase/functions-compat",KD="@firebase/installations",$D="@firebase/installations-compat",QD="@firebase/messaging",XD="@firebase/messaging-compat",WD="@firebase/performance",ZD="@firebase/performance-compat",e2="@firebase/remote-config",t2="@firebase/remote-config-compat",n2="@firebase/storage",i2="@firebase/storage-compat",s2="@firebase/firestore",r2="@firebase/ai",o2="@firebase/firestore-compat",a2="firebase",l2="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip="[DEFAULT]",u2={[np]:"fire-core",[UD]:"fire-core-compat",[OD]:"fire-analytics",[LD]:"fire-analytics-compat",[BD]:"fire-app-check",[qD]:"fire-app-check-compat",[FD]:"fire-auth",[HD]:"fire-auth-compat",[zD]:"fire-rtdb",[GD]:"fire-data-connect",[YD]:"fire-rtdb-compat",[jD]:"fire-fn",[JD]:"fire-fn-compat",[KD]:"fire-iid",[$D]:"fire-iid-compat",[QD]:"fire-fcm",[XD]:"fire-fcm-compat",[WD]:"fire-perf",[ZD]:"fire-perf-compat",[e2]:"fire-rc",[t2]:"fire-rc-compat",[n2]:"fire-gcs",[i2]:"fire-gcs-compat",[s2]:"fire-fst",[o2]:"fire-fst-compat",[r2]:"fire-vertex","fire-js":"fire-js",[a2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd=new Map,c2=new Map,sp=new Map;function EE(n,e){try{n.container.addComponent(e)}catch(t){xs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function wa(n){const e=n.name;if(sp.has(e))return xs.debug(`There were multiple attempts to register component ${e}.`),!1;sp.set(e,n);for(const t of Nd.values())EE(t,n);for(const t of c2.values())EE(t,n);return!0}function kp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Zn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Tr=new vu("app","Firebase",d2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new mo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa=l2;function NS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:ip,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Tr.create("bad-app-name",{appName:String(o)});if(t||(t=CS()),!t)throw Tr.create("no-options");const l=Nd.get(o);if(l){if(ho(t,l.options)&&ho(s,l.config))return l;throw Tr.create("duplicate-app",{appName:o})}const c=new _D(o);for(const p of sp.values())c.addComponent(p);const d=new f2(t,s,c);return Nd.set(o,d),d}function MS(n=ip){const e=Nd.get(n);if(!e&&n===ip&&CS())return NS();if(!e)throw Tr.create("no-app",{appName:n});return e}function Er(n,e,t){let s=u2[n]??n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xs.warn(c.join(" "));return}wa(new mo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2="firebase-heartbeat-database",m2=1,cu="firebase-heartbeat-store";let Mm=null;function DS(){return Mm||(Mm=MD(h2,m2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(cu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Tr.create("idb-open",{originalErrorMessage:n.message})})),Mm}async function p2(n){try{const t=(await DS()).transaction(cu),s=await t.objectStore(cu).get(PS(n));return await t.done,s}catch(e){if(e instanceof Ps)xs.warn(e.message);else{const t=Tr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xs.warn(t.message)}}}async function SE(n,e){try{const s=(await DS()).transaction(cu,"readwrite");await s.objectStore(cu).put(e,PS(n)),await s.done}catch(t){if(t instanceof Ps)xs.warn(t.message);else{const s=Tr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});xs.warn(s.message)}}}function PS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2=1024,y2=30;class _2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new T2(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=AE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>y2){const c=E2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){xs.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=AE(),{heartbeatsToSend:s,unsentEntries:o}=v2(this._heartbeatsCache.heartbeats),l=Rd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return xs.warn(t),""}}}function AE(){return new Date().toISOString().substring(0,10)}function v2(n,e=g2){const t=[];let s=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),CE(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),CE(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class T2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oD()?aD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await p2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return SE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return SE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function CE(n){return Rd(JSON.stringify({version:2,heartbeats:n})).length}function E2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(n){wa(new mo("platform-logger",e=>new VD(e),"PRIVATE")),wa(new mo("heartbeat",e=>new _2(e),"PRIVATE")),Er(np,TE,n),Er(np,TE,"esm2020"),Er("fire-js","")}S2("");var A2="firebase",C2="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Er(A2,C2,"app");var IE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sr,VS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,M){function R(){}R.prototype=M.prototype,N.F=M.prototype,N.prototype=new R,N.prototype.constructor=N,N.D=function(P,V,L){for(var D=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)D[Oe-2]=arguments[Oe];return M.prototype[V].apply(P,D)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,M,R){R||(R=0);const P=Array(16);if(typeof M=="string")for(var V=0;V<16;++V)P[V]=M.charCodeAt(R++)|M.charCodeAt(R++)<<8|M.charCodeAt(R++)<<16|M.charCodeAt(R++)<<24;else for(V=0;V<16;++V)P[V]=M[R++]|M[R++]<<8|M[R++]<<16|M[R++]<<24;M=N.g[0],R=N.g[1],V=N.g[2];let L=N.g[3],D;D=M+(L^R&(V^L))+P[0]+3614090360&4294967295,M=R+(D<<7&4294967295|D>>>25),D=L+(V^M&(R^V))+P[1]+3905402710&4294967295,L=M+(D<<12&4294967295|D>>>20),D=V+(R^L&(M^R))+P[2]+606105819&4294967295,V=L+(D<<17&4294967295|D>>>15),D=R+(M^V&(L^M))+P[3]+3250441966&4294967295,R=V+(D<<22&4294967295|D>>>10),D=M+(L^R&(V^L))+P[4]+4118548399&4294967295,M=R+(D<<7&4294967295|D>>>25),D=L+(V^M&(R^V))+P[5]+1200080426&4294967295,L=M+(D<<12&4294967295|D>>>20),D=V+(R^L&(M^R))+P[6]+2821735955&4294967295,V=L+(D<<17&4294967295|D>>>15),D=R+(M^V&(L^M))+P[7]+4249261313&4294967295,R=V+(D<<22&4294967295|D>>>10),D=M+(L^R&(V^L))+P[8]+1770035416&4294967295,M=R+(D<<7&4294967295|D>>>25),D=L+(V^M&(R^V))+P[9]+2336552879&4294967295,L=M+(D<<12&4294967295|D>>>20),D=V+(R^L&(M^R))+P[10]+4294925233&4294967295,V=L+(D<<17&4294967295|D>>>15),D=R+(M^V&(L^M))+P[11]+2304563134&4294967295,R=V+(D<<22&4294967295|D>>>10),D=M+(L^R&(V^L))+P[12]+1804603682&4294967295,M=R+(D<<7&4294967295|D>>>25),D=L+(V^M&(R^V))+P[13]+4254626195&4294967295,L=M+(D<<12&4294967295|D>>>20),D=V+(R^L&(M^R))+P[14]+2792965006&4294967295,V=L+(D<<17&4294967295|D>>>15),D=R+(M^V&(L^M))+P[15]+1236535329&4294967295,R=V+(D<<22&4294967295|D>>>10),D=M+(V^L&(R^V))+P[1]+4129170786&4294967295,M=R+(D<<5&4294967295|D>>>27),D=L+(R^V&(M^R))+P[6]+3225465664&4294967295,L=M+(D<<9&4294967295|D>>>23),D=V+(M^R&(L^M))+P[11]+643717713&4294967295,V=L+(D<<14&4294967295|D>>>18),D=R+(L^M&(V^L))+P[0]+3921069994&4294967295,R=V+(D<<20&4294967295|D>>>12),D=M+(V^L&(R^V))+P[5]+3593408605&4294967295,M=R+(D<<5&4294967295|D>>>27),D=L+(R^V&(M^R))+P[10]+38016083&4294967295,L=M+(D<<9&4294967295|D>>>23),D=V+(M^R&(L^M))+P[15]+3634488961&4294967295,V=L+(D<<14&4294967295|D>>>18),D=R+(L^M&(V^L))+P[4]+3889429448&4294967295,R=V+(D<<20&4294967295|D>>>12),D=M+(V^L&(R^V))+P[9]+568446438&4294967295,M=R+(D<<5&4294967295|D>>>27),D=L+(R^V&(M^R))+P[14]+3275163606&4294967295,L=M+(D<<9&4294967295|D>>>23),D=V+(M^R&(L^M))+P[3]+4107603335&4294967295,V=L+(D<<14&4294967295|D>>>18),D=R+(L^M&(V^L))+P[8]+1163531501&4294967295,R=V+(D<<20&4294967295|D>>>12),D=M+(V^L&(R^V))+P[13]+2850285829&4294967295,M=R+(D<<5&4294967295|D>>>27),D=L+(R^V&(M^R))+P[2]+4243563512&4294967295,L=M+(D<<9&4294967295|D>>>23),D=V+(M^R&(L^M))+P[7]+1735328473&4294967295,V=L+(D<<14&4294967295|D>>>18),D=R+(L^M&(V^L))+P[12]+2368359562&4294967295,R=V+(D<<20&4294967295|D>>>12),D=M+(R^V^L)+P[5]+4294588738&4294967295,M=R+(D<<4&4294967295|D>>>28),D=L+(M^R^V)+P[8]+2272392833&4294967295,L=M+(D<<11&4294967295|D>>>21),D=V+(L^M^R)+P[11]+1839030562&4294967295,V=L+(D<<16&4294967295|D>>>16),D=R+(V^L^M)+P[14]+4259657740&4294967295,R=V+(D<<23&4294967295|D>>>9),D=M+(R^V^L)+P[1]+2763975236&4294967295,M=R+(D<<4&4294967295|D>>>28),D=L+(M^R^V)+P[4]+1272893353&4294967295,L=M+(D<<11&4294967295|D>>>21),D=V+(L^M^R)+P[7]+4139469664&4294967295,V=L+(D<<16&4294967295|D>>>16),D=R+(V^L^M)+P[10]+3200236656&4294967295,R=V+(D<<23&4294967295|D>>>9),D=M+(R^V^L)+P[13]+681279174&4294967295,M=R+(D<<4&4294967295|D>>>28),D=L+(M^R^V)+P[0]+3936430074&4294967295,L=M+(D<<11&4294967295|D>>>21),D=V+(L^M^R)+P[3]+3572445317&4294967295,V=L+(D<<16&4294967295|D>>>16),D=R+(V^L^M)+P[6]+76029189&4294967295,R=V+(D<<23&4294967295|D>>>9),D=M+(R^V^L)+P[9]+3654602809&4294967295,M=R+(D<<4&4294967295|D>>>28),D=L+(M^R^V)+P[12]+3873151461&4294967295,L=M+(D<<11&4294967295|D>>>21),D=V+(L^M^R)+P[15]+530742520&4294967295,V=L+(D<<16&4294967295|D>>>16),D=R+(V^L^M)+P[2]+3299628645&4294967295,R=V+(D<<23&4294967295|D>>>9),D=M+(V^(R|~L))+P[0]+4096336452&4294967295,M=R+(D<<6&4294967295|D>>>26),D=L+(R^(M|~V))+P[7]+1126891415&4294967295,L=M+(D<<10&4294967295|D>>>22),D=V+(M^(L|~R))+P[14]+2878612391&4294967295,V=L+(D<<15&4294967295|D>>>17),D=R+(L^(V|~M))+P[5]+4237533241&4294967295,R=V+(D<<21&4294967295|D>>>11),D=M+(V^(R|~L))+P[12]+1700485571&4294967295,M=R+(D<<6&4294967295|D>>>26),D=L+(R^(M|~V))+P[3]+2399980690&4294967295,L=M+(D<<10&4294967295|D>>>22),D=V+(M^(L|~R))+P[10]+4293915773&4294967295,V=L+(D<<15&4294967295|D>>>17),D=R+(L^(V|~M))+P[1]+2240044497&4294967295,R=V+(D<<21&4294967295|D>>>11),D=M+(V^(R|~L))+P[8]+1873313359&4294967295,M=R+(D<<6&4294967295|D>>>26),D=L+(R^(M|~V))+P[15]+4264355552&4294967295,L=M+(D<<10&4294967295|D>>>22),D=V+(M^(L|~R))+P[6]+2734768916&4294967295,V=L+(D<<15&4294967295|D>>>17),D=R+(L^(V|~M))+P[13]+1309151649&4294967295,R=V+(D<<21&4294967295|D>>>11),D=M+(V^(R|~L))+P[4]+4149444226&4294967295,M=R+(D<<6&4294967295|D>>>26),D=L+(R^(M|~V))+P[11]+3174756917&4294967295,L=M+(D<<10&4294967295|D>>>22),D=V+(M^(L|~R))+P[2]+718787259&4294967295,V=L+(D<<15&4294967295|D>>>17),D=R+(L^(V|~M))+P[9]+3951481745&4294967295,N.g[0]=N.g[0]+M&4294967295,N.g[1]=N.g[1]+(V+(D<<21&4294967295|D>>>11))&4294967295,N.g[2]=N.g[2]+V&4294967295,N.g[3]=N.g[3]+L&4294967295}s.prototype.v=function(N,M){M===void 0&&(M=N.length);const R=M-this.blockSize,P=this.C;let V=this.h,L=0;for(;L<M;){if(V==0)for(;L<=R;)o(this,N,L),L+=this.blockSize;if(typeof N=="string"){for(;L<M;)if(P[V++]=N.charCodeAt(L++),V==this.blockSize){o(this,P),V=0;break}}else for(;L<M;)if(P[V++]=N[L++],V==this.blockSize){o(this,P),V=0;break}}this.h=V,this.o+=M},s.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var M=1;M<N.length-8;++M)N[M]=0;M=this.o*8;for(var R=N.length-8;R<N.length;++R)N[R]=M&255,M/=256;for(this.v(N),N=Array(16),M=0,R=0;R<4;++R)for(let P=0;P<32;P+=8)N[M++]=this.g[R]>>>P&255;return N};function l(N,M){var R=d;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=M(N)}function c(N,M){this.h=M;const R=[];let P=!0;for(let V=N.length-1;V>=0;V--){const L=N[V]|0;P&&L==M||(R[V]=L,P=!1)}this.g=R}var d={};function p(N){return-128<=N&&N<128?l(N,function(M){return new c([M|0],M<0?-1:0)}):new c([N|0],N<0?-1:0)}function m(N){if(isNaN(N)||!isFinite(N))return E;if(N<0)return H(m(-N));const M=[];let R=1;for(let P=0;N>=R;P++)M[P]=N/R|0,R*=4294967296;return new c(M,0)}function v(N,M){if(N.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(N.charAt(0)=="-")return H(v(N.substring(1),M));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=m(Math.pow(M,8));let P=E;for(let L=0;L<N.length;L+=8){var V=Math.min(8,N.length-L);const D=parseInt(N.substring(L,L+V),M);V<8?(V=m(Math.pow(M,V)),P=P.j(V).add(m(D))):(P=P.j(R),P=P.add(m(D)))}return P}var E=p(0),A=p(1),x=p(16777216);n=c.prototype,n.m=function(){if(B(this))return-H(this).m();let N=0,M=1;for(let R=0;R<this.g.length;R++){const P=this.i(R);N+=(P>=0?P:4294967296+P)*M,M*=4294967296}return N},n.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(U(this))return"0";if(B(this))return"-"+H(this).toString(N);const M=m(Math.pow(N,6));var R=this;let P="";for(;;){const V=F(R,M).g;R=Z(R,V.j(M));let L=((R.g.length>0?R.g[0]:R.h)>>>0).toString(N);if(R=V,U(R))return L+P;for(;L.length<6;)L="0"+L;P=L+P}},n.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function U(N){if(N.h!=0)return!1;for(let M=0;M<N.g.length;M++)if(N.g[M]!=0)return!1;return!0}function B(N){return N.h==-1}n.l=function(N){return N=Z(this,N),B(N)?-1:U(N)?0:1};function H(N){const M=N.g.length,R=[];for(let P=0;P<M;P++)R[P]=~N.g[P];return new c(R,~N.h).add(A)}n.abs=function(){return B(this)?H(this):this},n.add=function(N){const M=Math.max(this.g.length,N.g.length),R=[];let P=0;for(let V=0;V<=M;V++){let L=P+(this.i(V)&65535)+(N.i(V)&65535),D=(L>>>16)+(this.i(V)>>>16)+(N.i(V)>>>16);P=D>>>16,L&=65535,D&=65535,R[V]=D<<16|L}return new c(R,R[R.length-1]&-2147483648?-1:0)};function Z(N,M){return N.add(H(M))}n.j=function(N){if(U(this)||U(N))return E;if(B(this))return B(N)?H(this).j(H(N)):H(H(this).j(N));if(B(N))return H(this.j(H(N)));if(this.l(x)<0&&N.l(x)<0)return m(this.m()*N.m());const M=this.g.length+N.g.length,R=[];for(var P=0;P<2*M;P++)R[P]=0;for(P=0;P<this.g.length;P++)for(let V=0;V<N.g.length;V++){const L=this.i(P)>>>16,D=this.i(P)&65535,Oe=N.i(V)>>>16,Pe=N.i(V)&65535;R[2*P+2*V]+=D*Pe,ee(R,2*P+2*V),R[2*P+2*V+1]+=L*Pe,ee(R,2*P+2*V+1),R[2*P+2*V+1]+=D*Oe,ee(R,2*P+2*V+1),R[2*P+2*V+2]+=L*Oe,ee(R,2*P+2*V+2)}for(N=0;N<M;N++)R[N]=R[2*N+1]<<16|R[2*N];for(N=M;N<2*M;N++)R[N]=0;return new c(R,0)};function ee(N,M){for(;(N[M]&65535)!=N[M];)N[M+1]+=N[M]>>>16,N[M]&=65535,M++}function $(N,M){this.g=N,this.h=M}function F(N,M){if(U(M))throw Error("division by zero");if(U(N))return new $(E,E);if(B(N))return M=F(H(N),M),new $(H(M.g),H(M.h));if(B(M))return M=F(N,H(M)),new $(H(M.g),M.h);if(N.g.length>30){if(B(N)||B(M))throw Error("slowDivide_ only works with positive integers.");for(var R=A,P=M;P.l(N)<=0;)R=te(R),P=te(P);var V=ae(R,1),L=ae(P,1);for(P=ae(P,2),R=ae(R,2);!U(P);){var D=L.add(P);D.l(N)<=0&&(V=V.add(R),L=D),P=ae(P,1),R=ae(R,1)}return M=Z(N,V.j(M)),new $(V,M)}for(V=E;N.l(M)>=0;){for(R=Math.max(1,Math.floor(N.m()/M.m())),P=Math.ceil(Math.log(R)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),L=m(R),D=L.j(M);B(D)||D.l(N)>0;)R-=P,L=m(R),D=L.j(M);U(L)&&(L=A),V=V.add(L),N=Z(N,D)}return new $(V,N)}n.B=function(N){return F(this,N).h},n.and=function(N){const M=Math.max(this.g.length,N.g.length),R=[];for(let P=0;P<M;P++)R[P]=this.i(P)&N.i(P);return new c(R,this.h&N.h)},n.or=function(N){const M=Math.max(this.g.length,N.g.length),R=[];for(let P=0;P<M;P++)R[P]=this.i(P)|N.i(P);return new c(R,this.h|N.h)},n.xor=function(N){const M=Math.max(this.g.length,N.g.length),R=[];for(let P=0;P<M;P++)R[P]=this.i(P)^N.i(P);return new c(R,this.h^N.h)};function te(N){const M=N.g.length+1,R=[];for(let P=0;P<M;P++)R[P]=N.i(P)<<1|N.i(P-1)>>>31;return new c(R,N.h)}function ae(N,M){const R=M>>5;M%=32;const P=N.g.length-R,V=[];for(let L=0;L<P;L++)V[L]=M>0?N.i(L+R)>>>M|N.i(L+R+1)<<32-M:N.i(L+R);return new c(V,N.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,VS=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=v,Sr=c}).apply(typeof IE<"u"?IE:typeof self<"u"?self:typeof window<"u"?window:{});var od=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kS,Zl,US,pd,rp,LS,OS,qS;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof od=="object"&&od];for(var S=0;S<h.length;++S){var I=h[S];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var s=t(this);function o(h,S){if(S)e:{var I=s;h=h.split(".");for(var w=0;w<h.length-1;w++){var G=h[w];if(!(G in I))break e;I=I[G]}h=h[h.length-1],w=I[h],S=S(w),S!=w&&S!=null&&e(I,h,{configurable:!0,writable:!0,value:S})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(S){var I=[],w;for(w in S)Object.prototype.hasOwnProperty.call(S,w)&&I.push([w,S[w]]);return I}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(h){var S=typeof h;return S=="object"&&h!=null||S=="function"}function p(h,S,I){return h.call.apply(h.bind,arguments)}function m(h,S,I){return m=p,m.apply(null,arguments)}function v(h,S){var I=Array.prototype.slice.call(arguments,1);return function(){var w=I.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function E(h,S){function I(){}I.prototype=S.prototype,h.Z=S.prototype,h.prototype=new I,h.prototype.constructor=h,h.Ob=function(w,G,K){for(var ue=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)ue[ke-2]=arguments[ke];return S.prototype[G].apply(w,ue)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function x(h){const S=h.length;if(S>0){const I=Array(S);for(let w=0;w<S;w++)I[w]=h[w];return I}return[]}function U(h,S){for(let w=1;w<arguments.length;w++){const G=arguments[w];var I=typeof G;if(I=I!="object"?I:G?Array.isArray(G)?"array":I:"null",I=="array"||I=="object"&&typeof G.length=="number"){I=h.length||0;const K=G.length||0;h.length=I+K;for(let ue=0;ue<K;ue++)h[I+ue]=G[ue]}else h.push(G)}}class B{constructor(S,I){this.i=S,this.j=I,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function H(h){c.setTimeout(()=>{throw h},0)}function Z(){var h=N;let S=null;return h.g&&(S=h.g,h.g=h.g.next,h.g||(h.h=null),S.next=null),S}class ee{constructor(){this.h=this.g=null}add(S,I){const w=$.get();w.set(S,I),this.h?this.h.next=w:this.g=w,this.h=w}}var $=new B(()=>new F,h=>h.reset());class F{constructor(){this.next=this.g=this.h=null}set(S,I){this.h=S,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let te,ae=!1,N=new ee,M=()=>{const h=Promise.resolve(void 0);te=()=>{h.then(R)}};function R(){for(var h;h=Z();){try{h.h.call(h.g)}catch(I){H(I)}var S=$;S.j(h),S.h<100&&(S.h++,h.next=S.g,S.g=h)}ae=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(h,S){this.type=h,this.g=this.target=S,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,S=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const I=()=>{};c.addEventListener("test",I,S),c.removeEventListener("test",I,S)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function Oe(h,S){V.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,S)}E(Oe,V),Oe.prototype.init=function(h,S){const I=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=S,S=h.relatedTarget,S||(I=="mouseover"?S=h.fromElement:I=="mouseout"&&(S=h.toElement)),this.relatedTarget=S,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Oe.Z.h.call(this)},Oe.prototype.h=function(){Oe.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Pe="closure_listenable_"+(Math.random()*1e6|0),X=0;function ce(h,S,I,w,G){this.listener=h,this.proxy=null,this.src=S,this.type=I,this.capture=!!w,this.ha=G,this.key=++X,this.da=this.fa=!1}function Se(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Je(h,S,I){for(const w in h)S.call(I,h[w],w,h)}function et(h,S){for(const I in h)S.call(void 0,h[I],I,h)}function q(h){const S={};for(const I in h)S[I]=h[I];return S}const ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(h,S){let I,w;for(let G=1;G<arguments.length;G++){w=arguments[G];for(I in w)h[I]=w[I];for(let K=0;K<ie.length;K++)I=ie[K],Object.prototype.hasOwnProperty.call(w,I)&&(h[I]=w[I])}}function he(h){this.src=h,this.g={},this.h=0}he.prototype.add=function(h,S,I,w,G){const K=h.toString();h=this.g[K],h||(h=this.g[K]=[],this.h++);const ue=Ve(h,S,w,G);return ue>-1?(S=h[ue],I||(S.fa=!1)):(S=new ce(S,this.src,K,!!w,G),S.fa=I,h.push(S)),S};function Re(h,S){const I=S.type;if(I in h.g){var w=h.g[I],G=Array.prototype.indexOf.call(w,S,void 0),K;(K=G>=0)&&Array.prototype.splice.call(w,G,1),K&&(Se(S),h.g[I].length==0&&(delete h.g[I],h.h--))}}function Ve(h,S,I,w){for(let G=0;G<h.length;++G){const K=h[G];if(!K.da&&K.listener==S&&K.capture==!!I&&K.ha==w)return G}return-1}var Fe="closure_lm_"+(Math.random()*1e6|0),It={};function ft(h,S,I,w,G){if(Array.isArray(S)){for(let K=0;K<S.length;K++)ft(h,S[K],I,w,G);return null}return I=Pr(I),h&&h[Pe]?h.J(S,I,d(w)?!!w.capture:!1,G):le(h,S,I,!1,w,G)}function le(h,S,I,w,G,K){if(!S)throw Error("Invalid event type");const ue=d(G)?!!G.capture:!!G;let ke=Ti(h);if(ke||(h[Fe]=ke=new he(h)),I=ke.add(S,I,w,ue,K),I.proxy)return I;if(w=pe(),I.proxy=w,w.src=h,w.listener=I,h.addEventListener)L||(G=ue),G===void 0&&(G=!1),h.addEventListener(S.toString(),w,G);else if(h.attachEvent)h.attachEvent(Qe(S.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return I}function pe(){function h(I){return S.call(h.src,h.listener,I)}const S=Rn;return h}function _e(h,S,I,w,G){if(Array.isArray(S))for(var K=0;K<S.length;K++)_e(h,S[K],I,w,G);else w=d(w)?!!w.capture:!!w,I=Pr(I),h&&h[Pe]?(h=h.i,K=String(S).toString(),K in h.g&&(S=h.g[K],I=Ve(S,I,w,G),I>-1&&(Se(S[I]),Array.prototype.splice.call(S,I,1),S.length==0&&(delete h.g[K],h.h--)))):h&&(h=Ti(h))&&(S=h.g[S.toString()],h=-1,S&&(h=Ve(S,I,w,G)),(I=h>-1?S[h]:null)&&be(I))}function be(h){if(typeof h!="number"&&h&&!h.da){var S=h.src;if(S&&S[Pe])Re(S.i,h);else{var I=h.type,w=h.proxy;S.removeEventListener?S.removeEventListener(I,w,h.capture):S.detachEvent?S.detachEvent(Qe(I),w):S.addListener&&S.removeListener&&S.removeListener(w),(I=Ti(S))?(Re(I,h),I.h==0&&(I.src=null,S[Fe]=null)):Se(h)}}}function Qe(h){return h in It?It[h]:It[h]="on"+h}function Rn(h,S){if(h.da)h=!0;else{S=new Oe(S,this);const I=h.listener,w=h.ha||h.src;h.fa&&be(h),h=I.call(w,S)}return h}function Ti(h){return h=h[Fe],h instanceof he?h:null}var ks="__closure_events_fn_"+(Math.random()*1e9>>>0);function Pr(h){return typeof h=="function"?h:(h[ks]||(h[ks]=function(S){return h.handleEvent(S)}),h[ks])}function Et(){P.call(this),this.i=new he(this),this.M=this,this.G=null}E(Et,P),Et.prototype[Pe]=!0,Et.prototype.removeEventListener=function(h,S,I,w){_e(this,h,S,I,w)};function bt(h,S){var I,w=h.G;if(w)for(I=[];w;w=w.G)I.push(w);if(h=h.M,w=S.type||S,typeof S=="string")S=new V(S,h);else if(S instanceof V)S.target=S.target||h;else{var G=S;S=new V(w,h),de(S,G)}G=!0;let K,ue;if(I)for(ue=I.length-1;ue>=0;ue--)K=S.g=I[ue],G=Ei(K,w,!0,S)&&G;if(K=S.g=h,G=Ei(K,w,!0,S)&&G,G=Ei(K,w,!1,S)&&G,I)for(ue=0;ue<I.length;ue++)K=S.g=I[ue],G=Ei(K,w,!1,S)&&G}Et.prototype.N=function(){if(Et.Z.N.call(this),this.i){var h=this.i;for(const S in h.g){const I=h.g[S];for(let w=0;w<I.length;w++)Se(I[w]);delete h.g[S],h.h--}}this.G=null},Et.prototype.J=function(h,S,I,w){return this.i.add(String(h),S,!1,I,w)},Et.prototype.K=function(h,S,I,w){return this.i.add(String(h),S,!0,I,w)};function Ei(h,S,I,w){if(S=h.i.g[String(S)],!S)return!0;S=S.concat();let G=!0;for(let K=0;K<S.length;++K){const ue=S[K];if(ue&&!ue.da&&ue.capture==I){const ke=ue.listener,wt=ue.ha||ue.src;ue.fa&&Re(h.i,ue),G=ke.call(wt,w)!==!1&&G}}return G&&!w.defaultPrevented}function Ee(h,S){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=m(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:c.setTimeout(h,S||0)}function zt(h){h.g=Ee(()=>{h.g=null,h.i&&(h.i=!1,zt(h))},h.l);const S=h.h;h.h=null,h.m.apply(null,S)}class Gt extends P{constructor(S,I){super(),this.m=S,this.l=I,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:zt(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vn(h){P.call(this),this.h=h,this.g={}}E(vn,P);var Yt=[];function tn(h){Je(h.g,function(S,I){this.g.hasOwnProperty(I)&&be(S)},h),h.g={}}vn.prototype.N=function(){vn.Z.N.call(this),tn(this)},vn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Us=c.JSON.stringify,Sf=c.JSON.parse,Mu=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Du(){}function Pu(){}var ni={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function nn(){V.call(this,"d")}E(nn,V);function Bn(){V.call(this,"c")}E(Bn,V);var xt={},Vu=null;function bo(){return Vu=Vu||new Et}xt.Ia="serverreachability";function ku(h){V.call(this,xt.Ia,h)}E(ku,V);function Si(h){const S=bo();bt(S,new ku(S))}xt.STAT_EVENT="statevent";function Vr(h,S){V.call(this,xt.STAT_EVENT,h),this.stat=S}E(Vr,V);function Dt(h){const S=bo();bt(S,new Vr(S,h))}xt.Ja="timingevent";function Ai(h,S){V.call(this,xt.Ja,h),this.size=S}E(Ai,V);function Ci(h,S){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},S)}function ii(){this.g=!0}ii.prototype.ua=function(){this.g=!1};function Af(h,S,I,w,G,K){h.info(function(){if(h.g)if(K){var ue="",ke=K.split("&");for(let tt=0;tt<ke.length;tt++){var wt=ke[tt].split("=");if(wt.length>1){const _t=wt[0];wt=wt[1];const Gn=_t.split("_");ue=Gn.length>=2&&Gn[1]=="type"?ue+(_t+"="+wt+"&"):ue+(_t+"=redacted&")}}}else ue=null;else ue=K;return"XMLHTTP REQ ("+w+") [attempt "+G+"]: "+S+`
`+I+`
`+ue})}function Uu(h,S,I,w,G,K,ue){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+G+"]: "+S+`
`+I+`
`+K+" "+ue})}function Ii(h,S,I,w){h.info(function(){return"XMLHTTP TEXT ("+S+"): "+Cf(h,I)+(w?" "+w:"")})}function kr(h,S){h.info(function(){return"TIMEOUT: "+S})}ii.prototype.info=function(){};function Cf(h,S){if(!h.g)return S;if(!S)return null;try{const K=JSON.parse(S);if(K){for(h=0;h<K.length;h++)if(Array.isArray(K[h])){var I=K[h];if(!(I.length<2)){var w=I[1];if(Array.isArray(w)&&!(w.length<1)){var G=w[0];if(G!="noop"&&G!="stop"&&G!="close")for(let ue=1;ue<w.length;ue++)w[ue]=""}}}}return Us(K)}catch{return S}}var Ur={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ja={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ka;function Lr(){}E(Lr,Du),Lr.prototype.g=function(){return new XMLHttpRequest},Ka=new Lr;function Xi(h){return encodeURIComponent(String(h))}function Lu(h){var S=1;h=h.split(":");const I=[];for(;S>0&&h.length;)I.push(h.shift()),S--;return h.length&&I.push(h.join(":")),I}function si(h,S,I,w){this.j=h,this.i=S,this.l=I,this.S=w||1,this.V=new vn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ri}function ri(){this.i=null,this.g="",this.h=!1}var Pt={},$t={};function bi(h,S,I){h.M=1,h.A=Or(kt(S)),h.u=I,h.R=!0,xo(h,null)}function xo(h,S){h.F=Date.now(),xi(h),h.B=kt(h.A);var I=h.B,w=h.S;Array.isArray(w)||(w=[String(w)]),Mo(I.i,"t",w),h.C=0,I=h.j.L,h.h=new ri,h.g=Wu(h.j,I?S:null,!h.u),h.P>0&&(h.O=new Gt(m(h.Y,h,h.g),h.P)),S=h.V,I=h.g,w=h.ba;var G="readystatechange";Array.isArray(G)||(G&&(Yt[0]=G.toString()),G=Yt);for(let K=0;K<G.length;K++){const ue=ft(I,G[K],w||S.handleEvent,!1,S.h||S);if(!ue)break;S.g[ue.key]=ue}S=h.J?q(h.J):{},h.u?(h.v||(h.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,S)):(h.v="GET",h.g.ea(h.B,h.v,null,S)),Si(),Af(h.i,h.v,h.B,h.l,h.S,h.u)}si.prototype.ba=function(h){h=h.target;const S=this.O;S&&li(h)==3?S.j():this.Y(h)},si.prototype.Y=function(h){try{if(h==this.g)e:{const ke=li(this.g),wt=this.g.ya(),tt=this.g.ca();if(!(ke<3)&&(ke!=3||this.g&&(this.h.h||this.g.la()||sn(this.g)))){this.K||ke!=4||wt==7||(wt==8||tt<=0?Si(3):Si(2)),wi(this);var S=this.g.ca();this.X=S;var I=If(this);if(this.o=S==200,Uu(this.i,this.v,this.B,this.l,this.S,ke,S),this.o){if(this.U&&!this.L){t:{if(this.g){var w,G=this.g;if((w=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(w)){var K=w;break t}}K=null}if(h=K)Ii(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ri(this,h);else{this.o=!1,this.m=3,Dt(12),Nn(this),Fn(this);break e}}if(this.R){h=!0;let _t;for(;!this.K&&this.C<I.length;)if(_t=qu(this,I),_t==$t){ke==4&&(this.m=4,Dt(14),h=!1),Ii(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==Pt){this.m=4,Dt(15),Ii(this.i,this.l,I,"[Invalid Chunk]"),h=!1;break}else Ii(this.i,this.l,_t,null),Ri(this,_t);if(Ou(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||I.length!=0||this.h.h||(this.m=1,Dt(16),h=!1),this.o=this.o&&h,!h)Ii(this.i,this.l,I,"[Invalid Chunked Response]"),Nn(this),Fn(this);else if(I.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),ul(ue),ue.P=!0,Dt(11))}}else Ii(this.i,this.l,I,null),Ri(this,I);ke==4&&Nn(this),this.o&&!this.K&&(ke==4?Ku(this.j,this):(this.o=!1,xi(this)))}else Zi(this.g),S==400&&I.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),Nn(this),Fn(this)}}}catch{}finally{}};function If(h){if(!Ou(h))return h.g.la();const S=sn(h.g);if(S==="")return"";let I="";const w=S.length,G=li(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Nn(h),Fn(h),"";h.h.i=new c.TextDecoder}for(let K=0;K<w;K++)h.h.h=!0,I+=h.h.i.decode(S[K],{stream:!(G&&K==w-1)});return S.length=0,h.h.g+=I,h.C=0,h.h.g}function Ou(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function qu(h,S){var I=h.C,w=S.indexOf(`
`,I);return w==-1?$t:(I=Number(S.substring(I,w)),isNaN(I)?Pt:(w+=1,w+I>S.length?$t:(S=S.slice(w,w+I),h.C=w+I,S)))}si.prototype.cancel=function(){this.K=!0,Nn(this)};function xi(h){h.T=Date.now()+h.H,wo(h,h.H)}function wo(h,S){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Ci(m(h.aa,h),S)}function wi(h){h.D&&(c.clearTimeout(h.D),h.D=null)}si.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(kr(this.i,this.B),this.M!=2&&(Si(),Dt(17)),Nn(this),this.m=2,Fn(this)):wo(this,this.T-h)};function Fn(h){h.j.I==0||h.K||Ku(h.j,h)}function Nn(h){wi(h);var S=h.O;S&&typeof S.dispose=="function"&&S.dispose(),h.O=null,tn(h.V),h.g&&(S=h.g,h.g=null,S.abort(),S.dispose())}function Ri(h,S){try{var I=h.j;if(I.I!=0&&(I.g==h||Mi(I.h,h))){if(!h.L&&Mi(I.h,h)&&I.I==3){try{var w=I.Ba.g.parse(S)}catch{w=null}if(Array.isArray(w)&&w.length==3){var G=w;if(G[0]==0){e:if(!I.v){if(I.g)if(I.g.F+3e3<h.F)Uo(I),Gs(I);else break e;Yr(I),Dt(18)}}else I.xa=G[1],0<I.xa-I.K&&G[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=Ci(m(I.Va,I),6e3));Ni(I.h)<=1&&I.ta&&(I.ta=void 0)}else Li(I,11)}else if((h.L||I.g==h)&&Uo(I),!D(S))for(G=I.Ba.g.parse(S),S=0;S<G.length;S++){let tt=G[S];const _t=tt[0];if(!(_t<=I.K))if(I.K=_t,tt=tt[1],I.I==2)if(tt[0]=="c"){I.M=tt[1],I.ba=tt[2];const Gn=tt[3];Gn!=null&&(I.ka=Gn,I.j.info("VER="+I.ka));const Oi=tt[4];Oi!=null&&(I.za=Oi,I.j.info("SVER="+I.za));const ui=tt[5];ui!=null&&typeof ui=="number"&&ui>0&&(w=1.5*ui,I.O=w,I.j.info("backChannelRequestTimeoutMs_="+w)),w=I;const ci=h.g;if(ci){const jr=ci.g?ci.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jr){var K=w.h;K.g||jr.indexOf("spdy")==-1&&jr.indexOf("quic")==-1&&jr.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Xa(K,K.h),K.h=null))}if(w.G){const Lo=ci.g?ci.g.getResponseHeader("X-HTTP-Session-Id"):null;Lo&&(w.wa=Lo,st(w.J,w.G,Lo))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-h.F,I.j.info("Handshake RTT: "+I.T+"ms")),w=I;var ue=h;if(w.na=Xu(w,w.L?w.ba:null,w.W),ue.L){Wa(w.h,ue);var ke=ue,wt=w.O;wt&&(ke.H=wt),ke.D&&(wi(ke),xi(ke)),w.g=ue}else ju(w);I.i.length>0&&Ui(I)}else tt[0]!="stop"&&tt[0]!="close"||Li(I,7);else I.I==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?Li(I,7):al(I):tt[0]!="noop"&&I.l&&I.l.qa(tt),I.A=0)}}Si(4)}catch{}}var Vt=class{constructor(h,S){this.g=h,this.map=S}};function $a(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Qa(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ni(h){return h.h?1:h.g?h.g.size:0}function Mi(h,S){return h.h?h.h==S:h.g?h.g.has(S):!1}function Xa(h,S){h.g?h.g.add(S):h.h=S}function Wa(h,S){h.h&&h.h==S?h.h=null:h.g&&h.g.has(S)&&h.g.delete(S)}$a.prototype.cancel=function(){if(this.i=Za(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Za(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let S=h.i;for(const I of h.g.values())S=S.concat(I.G);return S}return x(h.i)}var Bu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ro(h,S){if(h){h=h.split("&");for(let I=0;I<h.length;I++){const w=h[I].indexOf("=");let G,K=null;w>=0?(G=h[I].substring(0,w),K=h[I].substring(w+1)):G=h[I],S(G,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Mn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;h instanceof Mn?(this.l=h.l,Qt(this,h.j),this.o=h.o,this.g=h.g,Ls(this,h.u),this.h=h.h,el(this,Gu(h.i)),this.m=h.m):h&&(S=String(h).match(Bu))?(this.l=!1,Qt(this,S[1]||"",!0),this.o=Di(S[2]||""),this.g=Di(S[3]||"",!0),Ls(this,S[4]),this.h=Di(S[5]||"",!0),el(this,S[6]||"",!0),this.m=Di(S[7]||"")):(this.l=!1,this.i=new qs(null,this.l))}Mn.prototype.toString=function(){const h=[];var S=this.j;S&&h.push(qr(S,No,!0),":");var I=this.g;return(I||S=="file")&&(h.push("//"),(S=this.o)&&h.push(qr(S,No,!0),"@"),h.push(Xi(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&h.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&h.push("/"),h.push(qr(I,I.charAt(0)=="/"?tl:Fu,!0))),(I=this.i.toString())&&h.push("?",I),(I=this.m)&&h.push("#",qr(I,Hu)),h.join("")},Mn.prototype.resolve=function(h){const S=kt(this);let I=!!h.j;I?Qt(S,h.j):I=!!h.o,I?S.o=h.o:I=!!h.g,I?S.g=h.g:I=h.u!=null;var w=h.h;if(I)Ls(S,h.u);else if(I=!!h.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var G=S.h.lastIndexOf("/");G!=-1&&(w=S.h.slice(0,G+1)+w)}if(G=w,G==".."||G==".")w="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){w=G.lastIndexOf("/",0)==0,G=G.split("/");const K=[];for(let ue=0;ue<G.length;){const ke=G[ue++];ke=="."?w&&ue==G.length&&K.push(""):ke==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),w&&ue==G.length&&K.push("")):(K.push(ke),w=!0)}w=K.join("/")}else w=G}return I?S.h=w:I=h.i.toString()!=="",I?el(S,Gu(h.i)):I=!!h.m,I&&(S.m=h.m),S};function kt(h){return new Mn(h)}function Qt(h,S,I){h.j=I?Di(S,!0):S,h.j&&(h.j=h.j.replace(/:$/,""))}function Ls(h,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);h.u=S}else h.u=null}function el(h,S,I){S instanceof qs?(h.i=S,Do(h.i,h.l)):(I||(S=qr(S,Os)),h.i=new qs(S,h.l))}function st(h,S,I){h.i.set(S,I)}function Or(h){return st(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Di(h,S){return h?S?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function qr(h,S,I){return typeof h=="string"?(h=encodeURI(h).replace(S,Tn),I&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Tn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var No=/[#\/\?@]/g,Fu=/[#\?:]/g,tl=/[#\?]/g,Os=/[#\?@]/g,Hu=/#/g;function qs(h,S){this.h=this.g=null,this.i=h||null,this.j=!!S}function En(h){h.g||(h.g=new Map,h.h=0,h.i&&Ro(h.i,function(S,I){h.add(decodeURIComponent(S.replace(/\+/g," ")),I)}))}n=qs.prototype,n.add=function(h,S){En(this),this.i=null,h=Bs(this,h);let I=this.g.get(h);return I||this.g.set(h,I=[]),I.push(S),this.h+=1,this};function zu(h,S){En(h),S=Bs(h,S),h.g.has(S)&&(h.i=null,h.h-=h.g.get(S).length,h.g.delete(S))}function nl(h,S){return En(h),S=Bs(h,S),h.g.has(S)}n.forEach=function(h,S){En(this),this.g.forEach(function(I,w){I.forEach(function(G){h.call(S,G,w,this)},this)},this)};function il(h,S){En(h);let I=[];if(typeof S=="string")nl(h,S)&&(I=I.concat(h.g.get(Bs(h,S))));else for(h=Array.from(h.g.values()),S=0;S<h.length;S++)I=I.concat(h[S]);return I}n.set=function(h,S){return En(this),this.i=null,h=Bs(this,h),nl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[S]),this.h+=1,this},n.get=function(h,S){return h?(h=il(this,h),h.length>0?String(h[0]):S):S};function Mo(h,S,I){zu(h,S),I.length>0&&(h.i=null,h.g.set(Bs(h,S),x(I)),h.h+=I.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],S=Array.from(this.g.keys());for(let w=0;w<S.length;w++){var I=S[w];const G=Xi(I);I=il(this,I);for(let K=0;K<I.length;K++){let ue=G;I[K]!==""&&(ue+="="+Xi(I[K])),h.push(ue)}}return this.i=h.join("&")};function Gu(h){const S=new qs;return S.i=h.i,h.g&&(S.g=new Map(h.g),S.h=h.h),S}function Bs(h,S){return S=String(S),h.j&&(S=S.toLowerCase()),S}function Do(h,S){S&&!h.j&&(En(h),h.i=null,h.g.forEach(function(I,w){const G=w.toLowerCase();w!=G&&(zu(this,w),Mo(this,G,I))},h)),h.j=S}function oi(h,S){const I=new ii;if(c.Image){const w=new Image;w.onload=v(Hn,I,"TestLoadImage: loaded",!0,S,w),w.onerror=v(Hn,I,"TestLoadImage: error",!1,S,w),w.onabort=v(Hn,I,"TestLoadImage: abort",!1,S,w),w.ontimeout=v(Hn,I,"TestLoadImage: timeout",!1,S,w),c.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else S(!1)}function sl(h,S){const I=new ii,w=new AbortController,G=setTimeout(()=>{w.abort(),Hn(I,"TestPingServer: timeout",!1,S)},1e4);fetch(h,{signal:w.signal}).then(K=>{clearTimeout(G),K.ok?Hn(I,"TestPingServer: ok",!0,S):Hn(I,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(G),Hn(I,"TestPingServer: error",!1,S)})}function Hn(h,S,I,w,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),w(I)}catch{}}function Fs(){this.g=new Mu}function Pi(h){this.i=h.Sb||null,this.h=h.ab||!1}E(Pi,Du),Pi.prototype.g=function(){return new Br(this.i,this.h)};function Br(h,S){Et.call(this),this.H=h,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Br,Et),n=Br.prototype,n.open=function(h,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=S,this.readyState=1,ai(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(S.body=h),(this.H||c).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Hs(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ai(this)),this.g&&(this.readyState=3,ai(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Po(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Po(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var S=h.value?h.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!h.done}))&&(this.response=this.responseText+=S)}h.done?Hs(this):ai(this),this.readyState==3&&Po(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,Hs(this))},n.Na=function(h){this.g&&(this.response=h,Hs(this))},n.ga=function(){this.g&&Hs(this)};function Hs(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ai(h)}n.setRequestHeader=function(h,S){this.A.append(h,S)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],S=this.h.entries();for(var I=S.next();!I.done;)I=I.value,h.push(I[0]+": "+I[1]),I=S.next();return h.join(`\r
`)};function ai(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Br.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function zn(h){let S="";return Je(h,function(I,w){S+=w,S+=":",S+=I,S+=`\r
`}),S}function Fr(h,S,I){e:{for(w in I){var w=!1;break e}w=!0}w||(I=zn(I),typeof h=="string"?I!=null&&Xi(I):st(h,S,I))}function at(h){Et.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(at,Et);var Vi=/^https?$/i,rl=["POST","PUT"];n=at.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,S,I,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);S=S?S.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ka.g(),this.g.onreadystatechange=A(m(this.Ca,this));try{this.B=!0,this.g.open(S,String(h),!0),this.B=!1}catch(K){Hr(this,K);return}if(h=I||"",I=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var G in w)I.set(G,w[G]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const K of w.keys())I.set(K,w.get(K));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(I.keys()).find(K=>K.toLowerCase()=="content-type"),G=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(rl,S,void 0)>=0)||w||G||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ue]of I)this.g.setRequestHeader(K,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(K){Hr(this,K)}};function Hr(h,S){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=S,h.o=5,ol(h),Wi(h)}function ol(h){h.A||(h.A=!0,bt(h,"complete"),bt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,bt(this,"complete"),bt(this,"abort"),Wi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wi(this,!0)),at.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?zr(this):this.Xa())},n.Xa=function(){zr(this)};function zr(h){if(h.h&&typeof l<"u"){if(h.v&&li(h)==4)setTimeout(h.Ca.bind(h),0);else if(bt(h,"readystatechange"),li(h)==4){h.h=!1;try{const K=h.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var I;if(!(I=S)){var w;if(w=K===0){let ue=String(h.D).match(Bu)[1]||null;!ue&&c.self&&c.self.location&&(ue=c.self.location.protocol.slice(0,-1)),w=!Vi.test(ue?ue.toLowerCase():"")}I=w}if(I)bt(h,"complete"),bt(h,"success");else{h.o=6;try{var G=li(h)>2?h.g.statusText:""}catch{G=""}h.l=G+" ["+h.ca()+"]",ol(h)}}finally{Wi(h)}}}}function Wi(h,S){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const I=h.g;h.g=null,S||bt(h,"ready");try{I.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function li(h){return h.g?h.g.readyState:0}n.ca=function(){try{return li(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var S=this.g.responseText;return h&&S.indexOf(h)==0&&(S=S.substring(h.length)),Sf(S)}};function sn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Zi(h){const S={};h=(h.g&&li(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(D(h[w]))continue;var I=Lu(h[w]);const G=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const K=S[G]||[];S[G]=K,K.push(I)}et(S,function(w){return w.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ki(h,S,I){return I&&I.internalChannelParams&&I.internalChannelParams[h]||S}function zs(h){this.za=0,this.i=[],this.j=new ii,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ki("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ki("baseRetryDelayMs",5e3,h),this.Za=ki("retryDelaySeedMs",1e4,h),this.Ta=ki("forwardChannelMaxRetries",2,h),this.va=ki("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new $a(h&&h.concurrentRequestLimit),this.Ba=new Fs,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=zs.prototype,n.ka=8,n.I=1,n.connect=function(h,S,I,w){Dt(0),this.W=h,this.H=S||{},I&&w!==void 0&&(this.H.OSID=I,this.H.OAID=w),this.F=this.X,this.J=Xu(this,null,this.W),Ui(this)};function al(h){if(Vo(h),h.I==3){var S=h.V++,I=kt(h.J);if(st(I,"SID",h.M),st(I,"RID",S),st(I,"TYPE","terminate"),Gr(h,I),S=new si(h,h.j,S),S.M=2,S.A=Or(kt(I)),I=!1,c.navigator&&c.navigator.sendBeacon)try{I=c.navigator.sendBeacon(S.A.toString(),"")}catch{}!I&&c.Image&&(new Image().src=S.A,I=!0),I||(S.g=Wu(S.j,null),S.g.ea(S.A)),S.F=Date.now(),xi(S)}Qu(h)}function Gs(h){h.g&&(ul(h),h.g.cancel(),h.g=null)}function Vo(h){Gs(h),h.v&&(c.clearTimeout(h.v),h.v=null),Uo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Ui(h){if(!Qa(h.h)&&!h.m){h.m=!0;var S=h.Ea;te||M(),ae||(te(),ae=!0),N.add(S,h),h.D=0}}function ko(h,S){return Ni(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=S.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Ci(m(h.Ea,h,S),$u(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const G=new si(this,this.j,h);let K=this.o;if(this.U&&(K?(K=q(K),de(K,this.U)):K=this.U),this.u!==null||this.R||(G.J=K,K=null),this.S)e:{for(var S=0,I=0;I<this.i.length;I++){t:{var w=this.i[I];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(S+=w,S>4096){S=I;break e}if(S===4096||I===this.i.length-1){S=I+1;break e}}S=1e3}else S=1e3;S=Yu(this,G,S),I=kt(this.J),st(I,"RID",h),st(I,"CVER",22),this.G&&st(I,"X-HTTP-Session-Id",this.G),Gr(this,I),K&&(this.R?S="headers="+Xi(zn(K))+"&"+S:this.u&&Fr(I,this.u,K)),Xa(this.h,G),this.Ra&&st(I,"TYPE","init"),this.S?(st(I,"$req",S),st(I,"SID","null"),G.U=!0,bi(G,I,null)):bi(G,I,S),this.I=2}}else this.I==3&&(h?ll(this,h):this.i.length==0||Qa(this.h)||ll(this))};function ll(h,S){var I;S?I=S.l:I=h.V++;const w=kt(h.J);st(w,"SID",h.M),st(w,"RID",I),st(w,"AID",h.K),Gr(h,w),h.u&&h.o&&Fr(w,h.u,h.o),I=new si(h,h.j,I,h.D+1),h.u===null&&(I.J=h.o),S&&(h.i=S.G.concat(h.i)),S=Yu(h,I,1e3),I.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Xa(h.h,I),bi(I,w,S)}function Gr(h,S){h.H&&Je(h.H,function(I,w){st(S,w,I)}),h.l&&Je({},function(I,w){st(S,w,I)})}function Yu(h,S,I){I=Math.min(h.i.length,I);const w=h.l?m(h.l.Ka,h.l,h):null;e:{var G=h.i;let ke=-1;for(;;){const wt=["count="+I];ke==-1?I>0?(ke=G[0].g,wt.push("ofs="+ke)):ke=0:wt.push("ofs="+ke);let tt=!0;for(let _t=0;_t<I;_t++){var K=G[_t].g;const Gn=G[_t].map;if(K-=ke,K<0)ke=Math.max(0,G[_t].g-100),tt=!1;else try{K="req"+K+"_"||"";try{var ue=Gn instanceof Map?Gn:Object.entries(Gn);for(const[Oi,ui]of ue){let ci=ui;d(ui)&&(ci=Us(ui)),wt.push(K+Oi+"="+encodeURIComponent(ci))}}catch(Oi){throw wt.push(K+"type="+encodeURIComponent("_badmap")),Oi}}catch{w&&w(Gn)}}if(tt){ue=wt.join("&");break e}}ue=void 0}return h=h.i.splice(0,I),S.G=h,ue}function ju(h){if(!h.g&&!h.v){h.Y=1;var S=h.Da;te||M(),ae||(te(),ae=!0),N.add(S,h),h.A=0}}function Yr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Ci(m(h.Da,h),$u(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,Ju(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Ci(m(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),Gs(this),Ju(this))};function ul(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Ju(h){h.g=new si(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var S=kt(h.na);st(S,"RID","rpc"),st(S,"SID",h.M),st(S,"AID",h.K),st(S,"CI",h.F?"0":"1"),!h.F&&h.ia&&st(S,"TO",h.ia),st(S,"TYPE","xmlhttp"),Gr(h,S),h.u&&h.o&&Fr(S,h.u,h.o),h.O&&(h.g.H=h.O);var I=h.g;h=h.ba,I.M=1,I.A=Or(kt(S)),I.u=null,I.R=!0,xo(I,h)}n.Va=function(){this.C!=null&&(this.C=null,Gs(this),Yr(this),Dt(19))};function Uo(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Ku(h,S){var I=null;if(h.g==S){Uo(h),ul(h),h.g=null;var w=2}else if(Mi(h.h,S))I=S.G,Wa(h.h,S),w=1;else return;if(h.I!=0){if(S.o)if(w==1){I=S.u?S.u.length:0,S=Date.now()-S.F;var G=h.D;w=bo(),bt(w,new Ai(w,I)),Ui(h)}else ju(h);else if(G=S.m,G==3||G==0&&S.X>0||!(w==1&&ko(h,S)||w==2&&Yr(h)))switch(I&&I.length>0&&(S=h.h,S.i=S.i.concat(I)),G){case 1:Li(h,5);break;case 4:Li(h,10);break;case 3:Li(h,6);break;default:Li(h,2)}}}function $u(h,S){let I=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(I*=2),I*S}function Li(h,S){if(h.j.info("Error code "+S),S==2){var I=m(h.bb,h),w=h.Ua;const G=!w;w=new Mn(w||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Qt(w,"https"),Or(w),G?oi(w.toString(),I):sl(w.toString(),I)}else Dt(2);h.I=0,h.l&&h.l.pa(S),Qu(h),Vo(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function Qu(h){if(h.I=0,h.ja=[],h.l){const S=Za(h.h);(S.length!=0||h.i.length!=0)&&(U(h.ja,S),U(h.ja,h.i),h.h.i.length=0,x(h.i),h.i.length=0),h.l.oa()}}function Xu(h,S,I){var w=I instanceof Mn?kt(I):new Mn(I);if(w.g!="")S&&(w.g=S+"."+w.g),Ls(w,w.u);else{var G=c.location;w=G.protocol,S=S?S+"."+G.hostname:G.hostname,G=+G.port;const K=new Mn(null);w&&Qt(K,w),S&&(K.g=S),G&&Ls(K,G),I&&(K.h=I),w=K}return I=h.G,S=h.wa,I&&S&&st(w,I,S),st(w,"VER",h.ka),Gr(h,w),w}function Wu(h,S,I){if(S&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=h.Aa&&!h.ma?new at(new Pi({ab:I})):new at(h.ma),S.Fa(h.L),S}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zu(){}n=Zu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ys(){}Ys.prototype.g=function(h,S){return new gn(h,S)};function gn(h,S){Et.call(this),this.g=new zs(S),this.l=h,this.h=S&&S.messageUrlParams||null,h=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(h?h["X-WebChannel-Content-Type"]=S.messageContentType:h={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(h?h["X-WebChannel-Client-Profile"]=S.sa:h={"X-WebChannel-Client-Profile":S.sa}),this.g.U=h,(h=S&&S.Qb)&&!D(h)&&(this.g.u=h),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!D(S)&&(this.g.G=S,h=this.h,h!==null&&S in h&&(h=this.h,S in h&&delete h[S])),this.j=new es(this)}E(gn,Et),gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){al(this.g)},gn.prototype.o=function(h){var S=this.g;if(typeof h=="string"){var I={};I.__data__=h,h=I}else this.v&&(I={},I.__data__=Us(h),h=I);S.i.push(new Vt(S.Ya++,h)),S.I==3&&Ui(S)},gn.prototype.N=function(){this.g.l=null,delete this.j,al(this.g),delete this.g,gn.Z.N.call(this)};function ec(h){nn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var S=h.__sm__;if(S){e:{for(const I in S){h=I;break e}h=void 0}(this.i=h)&&(h=this.i,S=S!==null&&h in S?S[h]:void 0),this.data=S}else this.data=h}E(ec,nn);function tc(){Bn.call(this),this.status=1}E(tc,Bn);function es(h){this.g=h}E(es,Zu),es.prototype.ra=function(){bt(this.g,"a")},es.prototype.qa=function(h){bt(this.g,new ec(h))},es.prototype.pa=function(h){bt(this.g,new tc)},es.prototype.oa=function(){bt(this.g,"b")},Ys.prototype.createWebChannel=Ys.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,qS=function(){return new Ys},OS=function(){return bo()},LS=xt,rp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ur.NO_ERROR=0,Ur.TIMEOUT=8,Ur.HTTP_ERROR=6,pd=Ur,Ja.COMPLETE="complete",US=Ja,Pu.EventType=ni,ni.OPEN="a",ni.CLOSE="b",ni.ERROR="c",ni.MESSAGE="d",Et.prototype.listen=Et.prototype.J,Zl=Pu,at.prototype.listenOnce=at.prototype.K,at.prototype.getLastError=at.prototype.Ha,at.prototype.getLastErrorCode=at.prototype.ya,at.prototype.getStatus=at.prototype.ca,at.prototype.getResponseJson=at.prototype.La,at.prototype.getResponseText=at.prototype.la,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Fa,kS=at}).apply(typeof od<"u"?od:typeof self<"u"?self:typeof window<"u"?window:{});const bE="@firebase/firestore",xE="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ha="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=new Pp("@firebase/firestore");function ha(){return po.logLevel}function me(n,...e){if(po.logLevel<=Ge.DEBUG){const t=e.map(Up);po.debug(`Firestore (${Ha}): ${n}`,...t)}}function ws(n,...e){if(po.logLevel<=Ge.ERROR){const t=e.map(Up);po.error(`Firestore (${Ha}): ${n}`,...t)}}function go(n,...e){if(po.logLevel<=Ge.WARN){const t=e.map(Up);po.warn(`Firestore (${Ha}): ${n}`,...t)}}function Up(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,BS(n,s,t)}function BS(n,e,t){let s=`FIRESTORE (${Ha}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw ws(s),new Error(s)}function it(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||BS(e,o,s)}function De(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Ps{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class HS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(fn.UNAUTHENTICATED)))}shutdown(){}}class I2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class b2{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){it(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new Cs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Cs,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Cs)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(it(typeof s.accessToken=="string",31837,{l:s}),new FS(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new fn(e)}}class x2{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class w2{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new x2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class wE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class R2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){it(this.o===void 0,3512);const s=l=>{l.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,me("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new wE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(it(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new wE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=N2(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Ye(n,e){return n<e?-1:n>e?1:0}function op(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const o=n.charAt(s),l=e.charAt(s);if(o!==l)return Dm(o)===Dm(l)?Ye(o,l):Dm(o)?1:-1}return Ye(n.length,e.length)}const M2=55296,D2=57343;function Dm(n){const e=n.charCodeAt(0);return e>=M2&&e<=D2}function Ra(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE="__name__";class zi{constructor(e,t,s){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&we(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return zi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=zi.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ye(e.length,t.length)}static compareSegments(e,t){const s=zi.isNumericId(e),o=zi.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?zi.extractNumericId(e).compare(zi.extractNumericId(t)):op(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Sr.fromString(e.substring(4,e.length-2))}}class yt extends zi{construct(e,t,s){return new yt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ve(oe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new yt(t)}static emptyPath(){return new yt([])}}const P2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends zi{construct(e,t,s){return new Zt(e,t,s)}static isValidIdentifier(e){return P2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===RE}static keyField(){return new Zt([RE])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new ve(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ve(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ve(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(s+=d,o++):(l(),o++)}if(l(),c)throw new ve(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zt(t)}static emptyPath(){return new Zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(yt.fromString(e))}static fromName(e){return new Ce(yt.fromString(e).popFirst(5))}static empty(){return new Ce(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new yt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(n,e,t){if(!t)throw new ve(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function GS(n,e,t,s){if(e===!0&&s===!0)throw new ve(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function NE(n){if(!Ce.isDocumentKey(n))throw new ve(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ME(n){if(Ce.isDocumentKey(n))throw new ve(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function YS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Lp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":we(12329,{type:typeof n})}function Rs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ve(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Lp(n);throw new ve(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(n,e){const t={typeString:n};return e&&(t.value=e),t}function Eu(n,e){if(!YS(n))throw new ve(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(o&&typeof c!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ve(oe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE=-62135596800,PE=1e6;class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*PE);return new ht(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<DE)throw new ve(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/PE}_compareTo(e){return this.seconds===e.seconds?Ye(this.nanoseconds,e.nanoseconds):Ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Eu(e,ht._jsonSchema))return new ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-DE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ht._jsonSchemaVersion="firestore/timestamp/1.0",ht._jsonSchema={type:Ft("string",ht._jsonSchemaVersion),seconds:Ft("number"),nanoseconds:Ft("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new ht(0,0))}static max(){return new Ne(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du=-1;function V2(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=Ne.fromTimestamp(s===1e9?new ht(t+1,0):new ht(t,s));return new Cr(o,Ce.empty(),e)}function k2(n){return new Cr(n.readTime,n.key,du)}class Cr{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Cr(Ne.min(),Ce.empty(),du)}static max(){return new Cr(Ne.max(),Ce.empty(),du)}}function U2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ce.comparator(n.documentKey,e.documentKey),t!==0?t:Ye(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class O2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function za(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==L2)throw n;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):re.reject(t)}static resolve(e){return new re(((t,s)=>{t(e)}))}static reject(e){return new re(((t,s)=>{s(e)}))}static waitFor(e){return new re(((t,s)=>{let o=0,l=0,c=!1;e.forEach((d=>{++o,d.next((()=>{++l,c&&l===o&&t()}),(p=>s(p)))})),c=!0,l===o&&t()}))}static or(e){let t=re.resolve(!1);for(const s of e)t=t.next((o=>o?re.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new re(((s,o)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const m=p;t(e[m]).next((v=>{c[m]=v,++d,d===l&&s(c)}),(v=>o(v)))}}))}static doWhile(e,t){return new re(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function q2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ga(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}tf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op=-1;function nf(n){return n==null}function Md(n){return n===0&&1/n==-1/0}function B2(n){return typeof n=="number"&&Number.isInteger(n)&&!Md(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="";function F2(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=VE(e)),e=H2(n.get(t),e);return VE(e)}function H2(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case jS:t+="";break;default:t+=l}}return t}function VE(n){return n+jS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function To(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function JS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,t){this.comparator=e,this.root=t||un.EMPTY}insert(e,t){return new Tt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,un.BLACK,null,null))}remove(e){return new Tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,un.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ad(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ad(this.root,e,this.comparator,!1)}getReverseIterator(){return new ad(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ad(this.root,e,this.comparator,!0)}}class ad{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class un{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??un.RED,this.left=o??un.EMPTY,this.right=l??un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new un(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return un.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}un.EMPTY=null,un.RED=!0,un.BLACK=!1;un.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new un(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.comparator=e,this.data=new Tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new UE(this.data.getIterator())}getIteratorFrom(e){return new UE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Kt(this.comparator);return t.data=e,t}}class UE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this.fields=e,e.sort(Zt.comparator)}static empty(){return new mi([])}unionWith(e){let t=new Kt(Zt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new mi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ra(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new KS("Invalid base64 string: "+l):l}})(e);return new en(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new en(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const z2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ir(n){if(it(!!n,39018),typeof n=="string"){let e=0;const t=z2.exec(n);if(it(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Mt(n.seconds),nanos:Mt(n.nanos)}}function Mt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function br(n){return typeof n=="string"?en.fromBase64String(n):en.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="server_timestamp",QS="__type__",XS="__previous_value__",WS="__local_write_time__";function qp(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[QS])==null?void 0:s.stringValue)===$S}function sf(n){const e=n.mapValue.fields[XS];return qp(e)?sf(e):e}function fu(n){const e=Ir(n.mapValue.fields[WS].timestampValue);return new ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,t,s,o,l,c,d,p,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=v}}const Dd="(default)";class Na{constructor(e,t){this.projectId=e,this.database=t||Dd}static empty(){return new Na("","")}get isDefaultDatabase(){return this.database===Dd}isEqual(e){return e instanceof Na&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="__type__",Y2="__max__",ld={mapValue:{}},eA="__vector__",Pd="value";function xr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qp(n)?4:J2(n)?9007199254740991:j2(n)?10:11:we(28295,{value:n})}function $i(n,e){if(n===e)return!0;const t=xr(n);if(t!==xr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return fu(n).isEqual(fu(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Ir(o.timestampValue),d=Ir(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return br(o.bytesValue).isEqual(br(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return Mt(o.geoPointValue.latitude)===Mt(l.geoPointValue.latitude)&&Mt(o.geoPointValue.longitude)===Mt(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Mt(o.integerValue)===Mt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=Mt(o.doubleValue),d=Mt(l.doubleValue);return c===d?Md(c)===Md(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return Ra(n.arrayValue.values||[],e.arrayValue.values||[],$i);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},d=l.mapValue.fields||{};if(kE(c)!==kE(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!$i(c[p],d[p])))return!1;return!0})(n,e);default:return we(52216,{left:n})}}function hu(n,e){return(n.values||[]).find((t=>$i(t,e)))!==void 0}function Ma(n,e){if(n===e)return 0;const t=xr(n),s=xr(e);if(t!==s)return Ye(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ye(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=Mt(l.integerValue||l.doubleValue),p=Mt(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return LE(n.timestampValue,e.timestampValue);case 4:return LE(fu(n),fu(e));case 5:return op(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=br(l),p=br(c);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let m=0;m<d.length&&m<p.length;m++){const v=Ye(d[m],p[m]);if(v!==0)return v}return Ye(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Ye(Mt(l.latitude),Mt(c.latitude));return d!==0?d:Ye(Mt(l.longitude),Mt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return OE(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var A,x,U,B;const d=l.fields||{},p=c.fields||{},m=(A=d[Pd])==null?void 0:A.arrayValue,v=(x=p[Pd])==null?void 0:x.arrayValue,E=Ye(((U=m==null?void 0:m.values)==null?void 0:U.length)||0,((B=v==null?void 0:v.values)==null?void 0:B.length)||0);return E!==0?E:OE(m,v)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===ld.mapValue&&c===ld.mapValue)return 0;if(l===ld.mapValue)return 1;if(c===ld.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),m=c.fields||{},v=Object.keys(m);p.sort(),v.sort();for(let E=0;E<p.length&&E<v.length;++E){const A=op(p[E],v[E]);if(A!==0)return A;const x=Ma(d[p[E]],m[v[E]]);if(x!==0)return x}return Ye(p.length,v.length)})(n.mapValue,e.mapValue);default:throw we(23264,{he:t})}}function LE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ye(n,e);const t=Ir(n),s=Ir(e),o=Ye(t.seconds,s.seconds);return o!==0?o:Ye(t.nanos,s.nanos)}function OE(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Ma(t[o],s[o]);if(l)return l}return Ye(t.length,s.length)}function Da(n){return ap(n)}function ap(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Ir(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return br(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ce.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=ap(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of s)l?l=!1:o+=",",o+=`${c}:${ap(t.fields[c])}`;return o+"}"})(n.mapValue):we(61005,{value:n})}function gd(n){switch(xr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=sf(n);return e?16+gd(e):16;case 5:return 2*n.stringValue.length;case 6:return br(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+gd(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let o=0;return To(s.fields,((l,c)=>{o+=l.length+gd(c)})),o})(n.mapValue);default:throw we(13486,{value:n})}}function lp(n){return!!n&&"integerValue"in n}function Bp(n){return!!n&&"arrayValue"in n}function qE(n){return!!n&&"nullValue"in n}function BE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yd(n){return!!n&&"mapValue"in n}function j2(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[ZS])==null?void 0:s.stringValue)===eA}function su(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return To(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=su(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=su(n.arrayValue.values[t]);return e}return{...n}}function J2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Y2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this.value=e}static empty(){return new ei({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!yd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=su(t)}setAll(e){let t=Zt.emptyPath(),s={},o=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,s,o),s={},o=[],t=d.popLast()}c?s[d.lastSegment()]=su(c):o.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());yd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $i(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];yd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){To(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new ei(su(this.value))}}function tA(n){const e=[];return To(n.fields,((t,s)=>{const o=new Zt([t]);if(yd(s)){const l=tA(s.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new mi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,t,s,o,l,c,d){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new hn(e,0,Ne.min(),Ne.min(),Ne.min(),ei.empty(),0)}static newFoundDocument(e,t,s,o){return new hn(e,1,t,Ne.min(),s,o,0)}static newNoDocument(e,t){return new hn(e,2,t,Ne.min(),Ne.min(),ei.empty(),0)}static newUnknownDocument(e,t){return new hn(e,3,t,Ne.min(),Ne.min(),ei.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ei.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ei.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,t){this.position=e,this.inclusive=t}}function FE(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?s=Ce.comparator(Ce.fromName(c.referenceValue),t.key):s=Ma(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function HE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$i(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,t="asc"){this.field=e,this.dir=t}}function K2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{}class Jt extends nA{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new Q2(e,t,s):t==="array-contains"?new Z2(e,s):t==="in"?new eP(e,s):t==="not-in"?new tP(e,s):t==="array-contains-any"?new nP(e,s):new Jt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new X2(e,s):new W2(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ma(t,this.value)):t!==null&&xr(this.value)===xr(t)&&this.matchesComparison(Ma(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qi extends nA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Qi(e,t)}matches(e){return iA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function iA(n){return n.op==="and"}function sA(n){return $2(n)&&iA(n)}function $2(n){for(const e of n.filters)if(e instanceof Qi)return!1;return!0}function up(n){if(n instanceof Jt)return n.field.canonicalString()+n.op.toString()+Da(n.value);if(sA(n))return n.filters.map((e=>up(e))).join(",");{const e=n.filters.map((t=>up(t))).join(",");return`${n.op}(${e})`}}function rA(n,e){return n instanceof Jt?(function(s,o){return o instanceof Jt&&s.op===o.op&&s.field.isEqual(o.field)&&$i(s.value,o.value)})(n,e):n instanceof Qi?(function(s,o){return o instanceof Qi&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,c,d)=>l&&rA(c,o.filters[d])),!0):!1})(n,e):void we(19439)}function oA(n){return n instanceof Jt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Da(t.value)}`})(n):n instanceof Qi?(function(t){return t.op.toString()+" {"+t.getFilters().map(oA).join(" ,")+"}"})(n):"Filter"}class Q2 extends Jt{constructor(e,t,s){super(e,t,s),this.key=Ce.fromName(s.referenceValue)}matches(e){const t=Ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class X2 extends Jt{constructor(e,t){super(e,"in",t),this.keys=aA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class W2 extends Jt{constructor(e,t){super(e,"not-in",t),this.keys=aA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function aA(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Ce.fromName(s.referenceValue)))}class Z2 extends Jt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bp(t)&&hu(t.arrayValue,this.value)}}class eP extends Jt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&hu(this.value.arrayValue,t)}}class tP extends Jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(hu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!hu(this.value.arrayValue,t)}}class nP extends Jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>hu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e,t=null,s=[],o=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function zE(n,e=null,t=[],s=[],o=null,l=null,c=null){return new iP(n,e,t,s,o,l,c)}function Fp(n){const e=De(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>up(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),nf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Da(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Da(s))).join(",")),e.Te=t}return e.Te}function Hp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!K2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!rA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!HE(n.startAt,e.startAt)&&HE(n.endAt,e.endAt)}function cp(n){return Ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,t=null,s=[],o=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function sP(n,e,t,s,o,l,c,d){return new rf(n,e,t,s,o,l,c,d)}function zp(n){return new rf(n)}function GE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function rP(n){return n.collectionGroup!==null}function ru(n){const e=De(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Kt(Zt.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new kd(l,s))})),t.has(Zt.keyField().canonicalString())||e.Ie.push(new kd(Zt.keyField(),s))}return e.Ie}function Gi(n){const e=De(n);return e.Ee||(e.Ee=oP(e,ru(n))),e.Ee}function oP(n,e){if(n.limitType==="F")return zE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new kd(o.field,l)}));const t=n.endAt?new Vd(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Vd(n.startAt.position,n.startAt.inclusive):null;return zE(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function dp(n,e,t){return new rf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function of(n,e){return Hp(Gi(n),Gi(e))&&n.limitType===e.limitType}function lA(n){return`${Fp(Gi(n))}|lt:${n.limitType}`}function ma(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>oA(o))).join(", ")}]`),nf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Da(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Da(o))).join(",")),`Target(${s})`})(Gi(n))}; limitType=${n.limitType})`}function af(n,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ce.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,o){for(const l of ru(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(s,o){return!(s.startAt&&!(function(c,d,p){const m=FE(c,d,p);return c.inclusive?m<=0:m<0})(s.startAt,ru(s),o)||s.endAt&&!(function(c,d,p){const m=FE(c,d,p);return c.inclusive?m>=0:m>0})(s.endAt,ru(s),o))})(n,e)}function aP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function uA(n){return(e,t)=>{let s=!1;for(const o of ru(n)){const l=lP(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function lP(n,e,t){const s=n.field.isKeyField()?Ce.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),m=d.data.field(l);return p!==null&&m!==null?Ma(p,m):we(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return we(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){To(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return JS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP=new Tt(Ce.comparator);function Ns(){return uP}const cA=new Tt(Ce.comparator);function eu(...n){let e=cA;for(const t of n)e=e.insert(t.key,t);return e}function dA(n){let e=cA;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function uo(){return ou()}function fA(){return ou()}function ou(){return new Eo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const cP=new Tt(Ce.comparator),dP=new Kt(Ce.comparator);function je(...n){let e=dP;for(const t of n)e=e.add(t);return e}const fP=new Kt(Ye);function hP(){return fP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Md(e)?"-0":e}}function hA(n){return{integerValue:""+n}}function mP(n,e){return B2(e)?hA(e):Gp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(){this._=void 0}}function pP(n,e,t){return n instanceof Ud?(function(o,l){const c={fields:{[QS]:{stringValue:$S},[WS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&qp(l)&&(l=sf(l)),l&&(c.fields[XS]=l),{mapValue:c}})(t,e):n instanceof mu?pA(n,e):n instanceof pu?gA(n,e):(function(o,l){const c=mA(o,l),d=YE(c)+YE(o.Ae);return lp(c)&&lp(o.Ae)?hA(d):Gp(o.serializer,d)})(n,e)}function gP(n,e,t){return n instanceof mu?pA(n,e):n instanceof pu?gA(n,e):t}function mA(n,e){return n instanceof Ld?(function(s){return lp(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Ud extends lf{}class mu extends lf{constructor(e){super(),this.elements=e}}function pA(n,e){const t=yA(e);for(const s of n.elements)t.some((o=>$i(o,s)))||t.push(s);return{arrayValue:{values:t}}}class pu extends lf{constructor(e){super(),this.elements=e}}function gA(n,e){let t=yA(e);for(const s of n.elements)t=t.filter((o=>!$i(o,s)));return{arrayValue:{values:t}}}class Ld extends lf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function YE(n){return Mt(n.integerValue||n.doubleValue)}function yA(n){return Bp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function yP(n,e){return n.field.isEqual(e.field)&&(function(s,o){return s instanceof mu&&o instanceof mu||s instanceof pu&&o instanceof pu?Ra(s.elements,o.elements,$i):s instanceof Ld&&o instanceof Ld?$i(s.Ae,o.Ae):s instanceof Ud&&o instanceof Ud})(n.transform,e.transform)}class _P{constructor(e,t){this.version=e,this.transformResults=t}}class Yi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Yi}static exists(e){return new Yi(void 0,e)}static updateTime(e){return new Yi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _d(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class uf{}function _A(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Yp(n.key,Yi.none()):new Su(n.key,n.data,Yi.none());{const t=n.data,s=ei.empty();let o=new Kt(Zt.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),o=o.add(l)}return new So(n.key,s,new mi(o.toArray()),Yi.none())}}function vP(n,e,t){n instanceof Su?(function(o,l,c){const d=o.value.clone(),p=JE(o.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof So?(function(o,l,c){if(!_d(o.precondition,l))return void l.convertToUnknownDocument(c.version);const d=JE(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(vA(o)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function au(n,e,t,s){return n instanceof Su?(function(l,c,d,p){if(!_d(l.precondition,c))return d;const m=l.value.clone(),v=KE(l.fieldTransforms,p,c);return m.setAll(v),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,e,t,s):n instanceof So?(function(l,c,d,p){if(!_d(l.precondition,c))return d;const m=KE(l.fieldTransforms,p,c),v=c.data;return v.setAll(vA(l)),v.setAll(m),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,s):(function(l,c,d){return _d(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function TP(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),l=mA(s.transform,o||null);l!=null&&(t===null&&(t=ei.empty()),t.set(s.field,l))}return t||null}function jE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Ra(s,o,((l,c)=>yP(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Su extends uf{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class So extends uf{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function vA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function JE(n,e,t){const s=new Map;it(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,d=e.data.field(l.field);s.set(l.field,gP(c,d,t[o]))}return s}function KE(n,e,t){const s=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);s.set(o.field,pP(l,c,e))}return s}class Yp extends uf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class EP extends uf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&vP(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=au(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=au(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=fA();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(o.key)?null:d;const p=_A(c,d);p!==null&&s.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Ne.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),je())}isEqual(e){return this.batchId===e.batchId&&Ra(this.mutations,e.mutations,((t,s)=>jE(t,s)))&&Ra(this.baseMutations,e.baseMutations,((t,s)=>jE(t,s)))}}class jp{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){it(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return cP})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,s[c].version);return new jp(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,$e;function IP(n){switch(n){case oe.OK:return we(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return we(15467,{code:n})}}function TA(n){if(n===void 0)return ws("GRPC error has no .code"),oe.UNKNOWN;switch(n){case Bt.OK:return oe.OK;case Bt.CANCELLED:return oe.CANCELLED;case Bt.UNKNOWN:return oe.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return oe.INTERNAL;case Bt.UNAVAILABLE:return oe.UNAVAILABLE;case Bt.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Bt.NOT_FOUND:return oe.NOT_FOUND;case Bt.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Bt.ABORTED:return oe.ABORTED;case Bt.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Bt.DATA_LOSS:return oe.DATA_LOSS;default:return we(39323,{code:n})}}($e=Bt||(Bt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP=new Sr([4294967295,4294967295],0);function $E(n){const e=bP().encode(n),t=new VS;return t.update(e),new Uint8Array(t.digest())}function QE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Sr([t,s],0),new Sr([o,l],0)]}class Jp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new tu(`Invalid padding: ${t}`);if(s<0)throw new tu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new tu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new tu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Sr.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(Sr.fromNumber(s)));return o.compare(xP)===1&&(o=new Sr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=$E(e),[s,o]=QE(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Jp(l,o,t);return s.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=$E(e),[s,o]=QE(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Au.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new cf(Ne.min(),o,new Tt(Ye),Ns(),je())}}class Au{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Au(s,t,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class EA{constructor(e,t){this.targetId=e,this.Ce=t}}class SA{constructor(e,t,s=en.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class XE{constructor(){this.ve=0,this.Fe=WE(),this.Me=en.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=je(),t=je(),s=je();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:we(38017,{changeType:l})}})),new Au(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=WE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,it(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class wP{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ns(),this.Je=ud(),this.He=ud(),this.Ye=new Tt(Ye)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(cp(l))if(s===0){const c=new Ce(l.path);this.et(t,c,hn.newNoDocument(c,Ne.min()))}else it(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let c,d;try{c=br(s).toUint8Array()}catch(p){if(p instanceof KS)return go("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Jp(c,o,l)}catch(p){return go(p instanceof tu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&cp(d.target)){const p=new Ce(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,hn.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let s=je();this.He.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const m=this.ot(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const o=new cf(e,t,this.Ye,this.je,s);return this.je=Ns(),this.Je=ud(),this.He=ud(),this.Ye=new Tt(Ye),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new XE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Kt(Ye),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Kt(Ye),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new XE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ud(){return new Tt(Ce.comparator)}function WE(){return new Tt(Ce.comparator)}const RP={asc:"ASCENDING",desc:"DESCENDING"},NP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MP={and:"AND",or:"OR"};class DP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function fp(n,e){return n.useProto3Json||nf(e)?e:{value:e}}function Od(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function PP(n,e){return Od(n,e.toTimestamp())}function ji(n){return it(!!n,49232),Ne.fromTimestamp((function(t){const s=Ir(t);return new ht(s.seconds,s.nanos)})(n))}function Kp(n,e){return hp(n,e).canonicalString()}function hp(n,e){const t=(function(o){return new yt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function CA(n){const e=yt.fromString(n);return it(RA(e),10190,{key:e.toString()}),e}function mp(n,e){return Kp(n.databaseId,e.path)}function Pm(n,e){const t=CA(e);if(t.get(1)!==n.databaseId.projectId)throw new ve(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ve(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ce(bA(t))}function IA(n,e){return Kp(n.databaseId,e)}function VP(n){const e=CA(n);return e.length===4?yt.emptyPath():bA(e)}function pp(n){return new yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function bA(n){return it(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ZE(n,e,t){return{name:mp(n,e),fields:t.value.mapValue.fields}}function kP(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:we(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(m,v){return m.useProto3Json?(it(v===void 0||typeof v=="string",58123),en.fromBase64String(v||"")):(it(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),en.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(m){const v=m.code===void 0?oe.UNKNOWN:TA(m.code);return new ve(v,m.message||"")})(c);t=new SA(s,o,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Pm(n,s.document.name),l=ji(s.document.updateTime),c=s.document.createTime?ji(s.document.createTime):Ne.min(),d=new ei({mapValue:{fields:s.document.fields}}),p=hn.newFoundDocument(o,l,c,d),m=s.targetIds||[],v=s.removedTargetIds||[];t=new vd(m,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Pm(n,s.document),l=s.readTime?ji(s.readTime):Ne.min(),c=hn.newNoDocument(o,l),d=s.removedTargetIds||[];t=new vd([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Pm(n,s.document),l=s.removedTargetIds||[];t=new vd([],l,o,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,c=new CP(o,l),d=s.targetId;t=new EA(d,c)}}return t}function UP(n,e){let t;if(e instanceof Su)t={update:ZE(n,e.key,e.value)};else if(e instanceof Yp)t={delete:mp(n,e.key)};else if(e instanceof So)t={update:ZE(n,e.key,e.data),updateMask:YP(e.fieldMask)};else{if(!(e instanceof EP))return we(16599,{Vt:e.type});t={verify:mp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const d=c.transform;if(d instanceof Ud)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof mu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof pu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Ld)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw we(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:PP(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:we(27497)})(n,e.precondition)),t}function LP(n,e){return n&&n.length>0?(it(e!==void 0,14353),n.map((t=>(function(o,l){let c=o.updateTime?ji(o.updateTime):ji(l);return c.isEqual(Ne.min())&&(c=ji(l)),new _P(c,o.transformResults||[])})(t,e)))):[]}function OP(n,e){return{documents:[IA(n,e.path)]}}function qP(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=IA(n,o);const l=(function(m){if(m.length!==0)return wA(Qi.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(m){if(m.length!==0)return m.map((v=>(function(A){return{field:pa(A.field),direction:HP(A.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=fp(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:o}}function BP(n){let e=VP(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){it(s===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const A=xA(E);return A instanceof Qi&&sA(A)?A.getFilters():[A]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((A=>(function(U){return new kd(ga(U.field),(function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(A)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let A;return A=typeof E=="object"?E.value:E,nf(A)?null:A})(t.limit));let p=null;t.startAt&&(p=(function(E){const A=!!E.before,x=E.values||[];return new Vd(x,A)})(t.startAt));let m=null;return t.endAt&&(m=(function(E){const A=!E.before,x=E.values||[];return new Vd(x,A)})(t.endAt)),sP(e,o,c,l,d,"F",p,m)}function FP(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function xA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=ga(t.unaryFilter.field);return Jt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=ga(t.unaryFilter.field);return Jt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ga(t.unaryFilter.field);return Jt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ga(t.unaryFilter.field);return Jt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Jt.create(ga(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Qi.create(t.compositeFilter.filters.map((s=>xA(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(n):we(30097,{filter:n})}function HP(n){return RP[n]}function zP(n){return NP[n]}function GP(n){return MP[n]}function pa(n){return{fieldPath:n.canonicalString()}}function ga(n){return Zt.fromServerFormat(n.fieldPath)}function wA(n){return n instanceof Jt?(function(t){if(t.op==="=="){if(BE(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NAN"}};if(qE(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(BE(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NOT_NAN"}};if(qE(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pa(t.field),op:zP(t.op),value:t.value}}})(n):n instanceof Qi?(function(t){const s=t.getFilters().map((o=>wA(o)));return s.length===1?s[0]:{compositeFilter:{op:GP(t.op),filters:s}}})(n):we(54877,{filter:n})}function YP(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function RA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,t,s,o,l=Ne.min(),c=Ne.min(),d=en.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new yr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e){this.yt=e}}function JP(n){const e=BP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?dp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(){this.Cn=new $P}addToCollectionParentIndex(e,t){return this.Cn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(Cr.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(Cr.min())}updateCollectionGroup(e,t,s){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class $P{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Kt(yt.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Kt(yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},NA=41943040;class xn{static withCacheSize(e){return new xn(e,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(NA,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Pa(0)}static cr(){return new Pa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0="LruGarbageCollector",QP=1048576;function n0([n,e],[t,s]){const o=Ye(n,t);return o===0?Ye(e,s):o}class XP{constructor(e){this.Ir=e,this.buffer=new Kt(n0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();n0(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class WP{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(t0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ga(t)?me(t0,"Ignoring IndexedDB error during garbage collection: ",t):await za(t)}await this.Vr(3e5)}))}}class ZP{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return re.resolve(tf.ce);const s=new XP(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(e0)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),e0):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,c,d,p,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,d=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(m=Date.now(),ha()<=Ge.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${o} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(m-p)+`ms
Total Duration: ${m-v}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function eV(n,e){return new ZP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(){this.changes=new Eo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?re.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&au(s.mutation,o,mi.empty(),ht.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,je()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=je()){const o=uo();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let c=eu();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=uo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,je())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,s,o){let l=Ns();const c=ou(),d=(function(){return ou()})();return t.forEach(((p,m)=>{const v=s.get(m.key);o.has(m.key)&&(v===void 0||v.mutation instanceof So)?l=l.insert(m.key,m):v!==void 0?(c.set(m.key,v.mutation.getFieldMask()),au(v.mutation,m,v.mutation.getFieldMask(),ht.now())):c.set(m.key,mi.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((m,v)=>c.set(m,v))),t.forEach(((m,v)=>d.set(m,new nV(v,c.get(m)??null)))),d)))}recalculateAndSaveOverlays(e,t){const s=ou();let o=new Tt(((c,d)=>c-d)),l=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const m=t.get(p);if(m===null)return;let v=s.get(p)||mi.empty();v=d.applyToLocalView(m,v),s.set(p,v);const E=(o.get(d.batchId)||je()).add(p);o=o.insert(d.batchId,E)}))})).next((()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),m=p.key,v=p.value,E=fA();v.forEach((A=>{if(!l.has(A)){const x=_A(t.get(A),s.get(A));x!==null&&E.set(A,x),l=l.add(A)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,E))}return re.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(c){return Ce.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):rP(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):re.resolve(uo());let d=du,p=l;return c.next((m=>re.forEach(m,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(v)?re.resolve():this.remoteDocumentCache.getEntry(e,v).next((A=>{p=p.insert(v,A)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,p,m,je()))).next((v=>({batchId:d,changes:dA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ce(t)).next((s=>{let o=eu();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let c=eu();return this.indexManager.getCollectionParents(e,l).next((d=>re.forEach(d,(p=>{const m=(function(E,A){return new rf(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,s,o).next((v=>{v.forEach(((E,A)=>{c=c.insert(E,A)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((c=>{l.forEach(((p,m)=>{const v=m.getKey();c.get(v)===null&&(c=c.insert(v,hn.newInvalidDocument(v)))}));let d=eu();return c.forEach(((p,m)=>{const v=l.get(p);v!==void 0&&au(v.mutation,m,mi.empty(),ht.now()),af(t,m)&&(d=d.insert(p,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return re.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:ji(o.createTime)}})(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:JP(o.bundledQuery),readTime:ji(o.readTime)}})(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(){this.overlays=new Tt(Ce.comparator),this.qr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const s=uo();return re.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),re.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),re.resolve()}getOverlaysForCollection(e,t,s){const o=uo(),l=t.length+1,c=new Ce(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&p.largestBatchId>s&&o.set(p.getKey(),p)}return re.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new Tt(((m,v)=>m-v));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>s){let v=l.get(m.largestBatchId);v===null&&(v=uo(),l=l.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=uo(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((m,v)=>d.set(m,v))),!(d.size()>=o)););return re.resolve(d)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new AP(t,s));let l=this.qr.get(t);l===void 0&&(l=je(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(){this.Qr=new Kt(Wt.$r),this.Ur=new Kt(Wt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Wt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Wt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Ce(new yt([])),s=new Wt(t,e),o=new Wt(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ce(new yt([])),s=new Wt(t,e),o=new Wt(t,e+1);let l=je();return this.Ur.forEachInRange([s,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Wt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Wt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ce.comparator(e.key,t.key)||Ye(e.Yr,t.Yr)}static Kr(e,t){return Ye(e.Yr,t.Yr)||Ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Kt(Wt.$r)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new SP(l,t,s,o);this.mutationQueue.push(c);for(const d of o)this.Zr=this.Zr.add(new Wt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return re.resolve(c)}lookupMutationBatch(e,t){return re.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return re.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?Op:this.tr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Wt(t,0),o=new Wt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(c=>{const d=this.Xr(c.Yr);l.push(d)})),re.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Kt(Ye);return t.forEach((o=>{const l=new Wt(o,0),c=new Wt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(d=>{s=s.add(d.Yr)}))})),re.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;Ce.isDocumentKey(l)||(l=l.child(""));const c=new Wt(new Ce(l),0);let d=new Kt(Ye);return this.Zr.forEachWhile((p=>{const m=p.key.path;return!!s.isPrefixOf(m)&&(m.length===o&&(d=d.add(p.Yr)),!0)}),c),re.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){it(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return re.forEach(t.mutations,(o=>{const l=new Wt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Wt(t,0),o=this.Zr.firstAfterOrEqual(s);return re.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e){this.ri=e,this.docs=(function(){return new Tt(Ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return re.resolve(s?s.document.mutableCopy():hn.newInvalidDocument(t))}getEntries(e,t){let s=Ns();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():hn.newInvalidDocument(o))})),re.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Ns();const c=t.path,d=new Ce(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:m,value:{document:v}}=p.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||U2(k2(v),s)<=0||(o.has(v.key)||af(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return re.resolve(l)}getAllFromCollectionGroup(e,t,s,o){we(9500)}ii(e,t){return re.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new uV(this)}getSize(e){return re.resolve(this.size)}}class uV extends tV{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),re.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e){this.persistence=e,this.si=new Eo((t=>Fp(t)),Hp),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.oi=0,this._i=new $p,this.targetCount=0,this.ai=Pa.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),re.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Pa(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Pr(t),re.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),re.waitFor(l).next((()=>o))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return re.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),re.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),re.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return re.resolve(s)}containsKey(e,t){return re.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,t){this.ui={},this.overlays={},this.ci=new tf(0),this.li=!1,this.li=!0,this.hi=new oV,this.referenceDelegate=e(this),this.Pi=new cV(this),this.indexManager=new KP,this.remoteDocumentCache=(function(o){return new lV(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new jP(t),this.Ii=new sV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new aV(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){me("MemoryPersistence","Starting transaction:",e);const o=new dV(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return re.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class dV extends O2{constructor(e){super(),this.currentSequenceNumber=e}}class Qp{constructor(e){this.persistence=e,this.Ri=new $p,this.Vi=null}static mi(e){return new Qp(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),re.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),re.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.fi,(s=>{const o=Ce.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Ne.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return re.or([()=>re.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class qd{constructor(e,t){this.persistence=e,this.pi=new Eo((s=>F2(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=eV(this,t)}static mi(e,t){return new qd(e,t)}Ei(){}di(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return re.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?re.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((d=>{d||(s++,l.removeEntry(c,Ne.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),re.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=gd(e.data.value)),t}br(e,t,s){return re.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return re.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=je(),o=je();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Xp(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return rD()?8:q2(pn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new fV;return this.Ss(e,t,c).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(ha()<=Ge.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",ma(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),re.resolve()):(ha()<=Ge.DEBUG&&me("QueryEngine","Query:",ma(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(ha()<=Ge.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",ma(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gi(t))):re.resolve())}ys(e,t){if(GE(t))return re.resolve(null);let s=Gi(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=dp(t,null,"F"),s=Gi(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=je(...l);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,s).next((p=>{const m=this.Ds(t,d);return this.Cs(t,m,c,p.readTime)?this.ys(e,dp(t,null,"F")):this.vs(e,m,t,p)}))))})))))}ws(e,t,s,o){return GE(t)||o.isEqual(Ne.min())?re.resolve(null):this.ps.getDocuments(e,s).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,s,o)?re.resolve(null):(ha()<=Ge.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ma(t)),this.vs(e,c,t,V2(o,du)).next((d=>d)))}))}Ds(e,t){let s=new Kt(uA(e));return t.forEach(((o,l)=>{af(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return ha()<=Ge.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",ma(t)),this.ps.getDocumentsMatchingQuery(e,t,Cr.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="LocalStore",mV=3e8;class pV{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Tt(Ye),this.xs=new Eo((l=>Fp(l)),Hp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function gV(n,e,t,s){return new pV(n,e,t,s)}async function DA(n,e){const t=De(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],d=[];let p=je();for(const m of o){c.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}for(const m of l){d.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(s,p).next((m=>({Ls:m,removedBatchIds:c,addedBatchIds:d})))}))}))}function yV(n,e){const t=De(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,p,m,v){const E=m.batch,A=E.keys();let x=re.resolve();return A.forEach((U=>{x=x.next((()=>v.getEntry(p,U))).next((B=>{const H=m.docVersions.get(U);it(H!==null,48541),B.version.compareTo(H)<0&&(E.applyToRemoteDocument(B,m),B.isValidDocument()&&(B.setReadTime(m.commitVersion),v.addEntry(B)))}))})),x.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(d){let p=je();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(p=p.add(d.batch.mutations[m].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function PA(n){const e=De(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function _V(n,e){const t=De(n),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const d=[];e.targetChanges.forEach(((v,E)=>{const A=o.get(E);if(!A)return;d.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,E))));let x=A.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?x=x.withResumeToken(en.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):v.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(v.resumeToken,s)),o=o.insert(E,x),(function(B,H,Z){return B.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=mV?!0:Z.addedDocuments.size+Z.modifiedDocuments.size+Z.removedDocuments.size>0})(A,x,v)&&d.push(t.Pi.updateTargetData(l,x))}));let p=Ns(),m=je();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(vV(l,c,e.documentUpdates).next((v=>{p=v.ks,m=v.qs}))),!s.isEqual(Ne.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));d.push(v)}return re.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,m))).next((()=>p))})).then((l=>(t.Ms=o,l)))}function vV(n,e,t){let s=je(),o=je();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=Ns();return t.forEach(((d,p)=>{const m=l.get(d);p.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(Ne.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):me(Wp,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",p.version)})),{ks:c,qs:o}}))}function TV(n,e){const t=De(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Op),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function EV(n,e){const t=De(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,re.resolve(o)):t.Pi.allocateTargetId(s).next((c=>(o=new yr(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function gp(n,e,t){const s=De(n),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Ga(c))throw c;me(Wp,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function i0(n,e,t){const s=De(n);let o=Ne.min(),l=je();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,m,v){const E=De(p),A=E.xs.get(v);return A!==void 0?re.resolve(E.Ms.get(A)):E.Pi.getTargetData(m,v)})(s,c,Gi(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?o:Ne.min(),t?l:je()))).next((d=>(SV(s,aP(e),d),{documents:d,Qs:l})))))}function SV(n,e,t){let s=n.Os.get(e)||Ne.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class s0{constructor(){this.activeTargetIds=hP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AV{constructor(){this.Mo=new s0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new s0,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0="ConnectivityMonitor";class o0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(r0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(r0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cd=null;function yp(){return cd===null?cd=(function(){return 268435456+Math.round(2147483648*Math.random())})():cd++,"0x"+cd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="RestConnection",IV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bV{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Dd?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const c=yp(),d=this.zo(e,t.toUriEncodedString());me(Vm,`Sending RPC '${e}' ${c}:`,d,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,l);const{host:m}=new URL(d),v=Ba(m);return this.Jo(e,d,p,s,v).then((E=>(me(Vm,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw go(Vm,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",s),E}))}Ho(e,t,s,o,l,c){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ha})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=IV[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn="WebChannelConnection";class wV extends bV{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const c=yp();return new Promise(((d,p)=>{const m=new kS;m.setWithCredentials(!0),m.listenOnce(US.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case pd.NO_ERROR:const E=m.getResponseJson();me(dn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case pd.TIMEOUT:me(dn,`RPC '${e}' ${c} timed out`),p(new ve(oe.DEADLINE_EXCEEDED,"Request time out"));break;case pd.HTTP_ERROR:const A=m.getStatus();if(me(dn,`RPC '${e}' ${c} failed with status:`,A,"response text:",m.getResponseText()),A>0){let x=m.getResponseJson();Array.isArray(x)&&(x=x[0]);const U=x==null?void 0:x.error;if(U&&U.status&&U.message){const B=(function(Z){const ee=Z.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(ee)>=0?ee:oe.UNKNOWN})(U.status);p(new ve(B,U.message))}else p(new ve(oe.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new ve(oe.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{me(dn,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(o);me(dn,`RPC '${e}' ${c} sending request:`,o),m.send(t,"POST",v,s,15)}))}T_(e,t,s){const o=yp(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=qS(),d=OS(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const v=l.join("");me(dn,`Creating RPC '${e}' stream ${o}: ${v}`,p);const E=c.createWebChannel(v,p);this.I_(E);let A=!1,x=!1;const U=new xV({Yo:H=>{x?me(dn,`Not sending because RPC '${e}' stream ${o} is closed:`,H):(A||(me(dn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),A=!0),me(dn,`RPC '${e}' stream ${o} sending:`,H),E.send(H))},Zo:()=>E.close()}),B=(H,Z,ee)=>{H.listen(Z,($=>{try{ee($)}catch(F){setTimeout((()=>{throw F}),0)}}))};return B(E,Zl.EventType.OPEN,(()=>{x||(me(dn,`RPC '${e}' stream ${o} transport opened.`),U.o_())})),B(E,Zl.EventType.CLOSE,(()=>{x||(x=!0,me(dn,`RPC '${e}' stream ${o} transport closed`),U.a_(),this.E_(E))})),B(E,Zl.EventType.ERROR,(H=>{x||(x=!0,go(dn,`RPC '${e}' stream ${o} transport errored. Name:`,H.name,"Message:",H.message),U.a_(new ve(oe.UNAVAILABLE,"The operation could not be completed")))})),B(E,Zl.EventType.MESSAGE,(H=>{var Z;if(!x){const ee=H.data[0];it(!!ee,16349);const $=ee,F=($==null?void 0:$.error)||((Z=$[0])==null?void 0:Z.error);if(F){me(dn,`RPC '${e}' stream ${o} received error:`,F);const te=F.status;let ae=(function(R){const P=Bt[R];if(P!==void 0)return TA(P)})(te),N=F.message;ae===void 0&&(ae=oe.INTERNAL,N="Unknown error status: "+te+" with message "+F.message),x=!0,U.a_(new ve(ae,N)),E.close()}else me(dn,`RPC '${e}' stream ${o} received:`,ee),U.u_(ee)}})),B(d,LS.STAT_EVENT,(H=>{H.stat===rp.PROXY?me(dn,`RPC '${e}' stream ${o} detected buffering proxy`):H.stat===rp.NOPROXY&&me(dn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{U.__()}),0),U}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function km(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(n){return new DP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="PersistentStream";class kA{constructor(e,t,s,o,l,c,d,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new VA(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(ws(t.toString()),ws("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new ve(oe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(a0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(me(a0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class RV extends kA{constructor(e,t,s,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=kP(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Ne.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ne.min():c.readTime?ji(c.readTime):Ne.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=pp(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=cp(p)?{documents:OP(l,p)}:{query:qP(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=AA(l,c.resumeToken);const m=fp(l,c.expectedCount);m!==null&&(d.expectedCount=m)}else if(c.snapshotVersion.compareTo(Ne.min())>0){d.readTime=Od(l,c.snapshotVersion.toTimestamp());const m=fp(l,c.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const s=FP(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=pp(this.serializer),t.removeTarget=e,this.q_(t)}}class NV extends kA{constructor(e,t,s,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=LP(e.writeResults,e.commitTime),s=ji(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=pp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>UP(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{}class DV extends MV{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ve(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,hp(t,s),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ve(oe.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,hp(t,s),o,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ve(oe.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class PV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ws(t),this.aa=!1):me("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo="RemoteStore";class VV{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{Ao(this)&&(me(yo,"Restarting streams for network reachability change."),await(async function(p){const m=De(p);m.Ea.add(4),await Cu(m),m.Ra.set("Unknown"),m.Ea.delete(4),await ff(m)})(this))}))})),this.Ra=new PV(s,o)}}async function ff(n){if(Ao(n))for(const e of n.da)await e(!0)}async function Cu(n){for(const e of n.da)await e(!1)}function UA(n,e){const t=De(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ng(t)?tg(t):Ya(t).O_()&&eg(t,e))}function Zp(n,e){const t=De(n),s=Ya(t);t.Ia.delete(e),s.O_()&&LA(t,e),t.Ia.size===0&&(s.O_()?s.L_():Ao(t)&&t.Ra.set("Unknown"))}function eg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ya(n).Y_(e)}function LA(n,e){n.Va.Ue(e),Ya(n).Z_(e)}function tg(n){n.Va=new wP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ya(n).start(),n.Ra.ua()}function ng(n){return Ao(n)&&!Ya(n).x_()&&n.Ia.size>0}function Ao(n){return De(n).Ea.size===0}function OA(n){n.Va=void 0}async function kV(n){n.Ra.set("Online")}async function UV(n){n.Ia.forEach(((e,t)=>{eg(n,e)}))}async function LV(n,e){OA(n),ng(n)?(n.Ra.ha(e),tg(n)):n.Ra.set("Unknown")}async function OV(n,e,t){if(n.Ra.set("Online"),e instanceof SA&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const d of l.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o.Ia.delete(d),o.Va.removeTarget(d))})(n,e)}catch(s){me(yo,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Bd(n,s)}else if(e instanceof vd?n.Va.Ze(e):e instanceof EA?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ne.min()))try{const s=await PA(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach(((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ia.get(m);v&&l.Ia.set(m,v.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,m)=>{const v=l.Ia.get(p);if(!v)return;l.Ia.set(p,v.withResumeToken(en.EMPTY_BYTE_STRING,v.snapshotVersion)),LA(l,p);const E=new yr(v.target,p,m,v.sequenceNumber);eg(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(s){me(yo,"Failed to raise snapshot:",s),await Bd(n,s)}}async function Bd(n,e,t){if(!Ga(e))throw e;n.Ea.add(1),await Cu(n),n.Ra.set("Offline"),t||(t=()=>PA(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{me(yo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await ff(n)}))}function qA(n,e){return e().catch((t=>Bd(n,t,e)))}async function hf(n){const e=De(n),t=wr(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Op;for(;qV(e);)try{const o=await TV(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,BV(e,o)}catch(o){await Bd(e,o)}BA(e)&&FA(e)}function qV(n){return Ao(n)&&n.Ta.length<10}function BV(n,e){n.Ta.push(e);const t=wr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function BA(n){return Ao(n)&&!wr(n).x_()&&n.Ta.length>0}function FA(n){wr(n).start()}async function FV(n){wr(n).ra()}async function HV(n){const e=wr(n);for(const t of n.Ta)e.ea(t.mutations)}async function zV(n,e,t){const s=n.Ta.shift(),o=jp.from(s,e,t);await qA(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await hf(n)}async function GV(n,e){e&&wr(n).X_&&await(async function(s,o){if((function(c){return IP(c)&&c!==oe.ABORTED})(o.code)){const l=s.Ta.shift();wr(s).B_(),await qA(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await hf(s)}})(n,e),BA(n)&&FA(n)}async function l0(n,e){const t=De(n);t.asyncQueue.verifyOperationInProgress(),me(yo,"RemoteStore received new credentials");const s=Ao(t);t.Ea.add(3),await Cu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ff(t)}async function YV(n,e){const t=De(n);e?(t.Ea.delete(2),await ff(t)):e||(t.Ea.add(2),await Cu(t),t.Ra.set("Unknown"))}function Ya(n){return n.ma||(n.ma=(function(t,s,o){const l=De(t);return l.sa(),new RV(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:kV.bind(null,n),t_:UV.bind(null,n),r_:LV.bind(null,n),H_:OV.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),ng(n)?tg(n):n.Ra.set("Unknown")):(await n.ma.stop(),OA(n))}))),n.ma}function wr(n){return n.fa||(n.fa=(function(t,s,o){const l=De(t);return l.sa(),new NV(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:FV.bind(null,n),r_:GV.bind(null,n),ta:HV.bind(null,n),na:zV.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await hf(n)):(await n.fa.stop(),n.Ta.length>0&&(me(yo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new Cs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const c=Date.now()+s,d=new ig(e,t,c,o,l);return d.start(s),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sg(n,e){if(ws("AsyncQueue",`${e}: ${n}`),Ga(n))return new ve(oe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{static emptySet(e){return new Ca(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ce.comparator(t.key,s.key):(t,s)=>Ce.comparator(t.key,s.key),this.keyedMap=eu(),this.sortedSet=new Tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ca)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Ca;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(){this.ga=new Tt(Ce.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Va{constructor(e,t,s,o,l,c,d,p,m){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,s,o,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Va(e,t,Ca.emptySet(t),c,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&of(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class JV{constructor(){this.queries=c0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=De(t),l=o.queries;o.queries=c0(),l.forEach(((c,d)=>{for(const p of d.Sa)p.onError(s)}))})(this,new ve(oe.ABORTED,"Firestore shutting down"))}}function c0(){return new Eo((n=>lA(n)),of)}async function HA(n,e){const t=De(n);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new jV,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const d=sg(c,`Initialization of query '${ma(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&rg(t)}async function zA(n,e){const t=De(n),s=e.query;let o=3;const l=t.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function KV(n,e){const t=De(n);let s=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(o)&&(s=!0);c.wa=o}}s&&rg(t)}function $V(n,e,t){const s=De(n),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function rg(n){n.Ca.forEach((e=>{e.next()}))}var _p,d0;(d0=_p||(_p={})).Ma="default",d0.Cache="cache";class GA{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Va(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Va.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_p.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.key=e}}class jA{constructor(e){this.key=e}}class QV{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=je(),this.mutatedKeys=je(),this.eu=uA(e),this.tu=new Ca(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new u0,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const A=o.get(v),x=af(this.query,E)?E:null,U=!!A&&this.mutatedKeys.has(A.key),B=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let H=!1;A&&x?A.data.isEqual(x.data)?U!==B&&(s.track({type:3,doc:x}),H=!0):this.su(A,x)||(s.track({type:2,doc:x}),H=!0,(p&&this.eu(x,p)>0||m&&this.eu(x,m)<0)&&(d=!0)):!A&&x?(s.track({type:0,doc:x}),H=!0):A&&!x&&(s.track({type:1,doc:A}),H=!0,(p||m)&&(d=!0)),H&&(x?(c=c.add(x),l=B?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{tu:c,iu:s,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,E)=>(function(x,U){const B=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:H})}};return B(x)-B(U)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(s),o=o??!1;const d=t&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,m=p!==this.Za;return this.Za=p,c.length!==0||m?{snapshot:new Va(this.query,e.tu,l,c,e.mutatedKeys,p===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new u0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=je(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new jA(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new YA(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=je();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Va.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const og="SyncEngine";class XV{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class WV{constructor(e){this.key=e,this.hu=!1}}class ZV{constructor(e,t,s,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Eo((d=>lA(d)),of),this.Iu=new Map,this.Eu=new Set,this.du=new Tt(Ce.comparator),this.Au=new Map,this.Ru=new $p,this.Vu={},this.mu=new Map,this.fu=Pa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ek(n,e,t=!0){const s=WA(n);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await JA(s,e,t,!0),o}async function tk(n,e){const t=WA(n);await JA(t,e,!0,!1)}async function JA(n,e,t,s){const o=await EV(n.localStore,Gi(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return s&&(d=await nk(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&UA(n.remoteStore,o),d}async function nk(n,e,t,s,o){n.pu=(E,A,x)=>(async function(B,H,Z,ee){let $=H.view.ru(Z);$.Cs&&($=await i0(B.localStore,H.query,!1).then((({documents:N})=>H.view.ru(N,$))));const F=ee&&ee.targetChanges.get(H.targetId),te=ee&&ee.targetMismatches.get(H.targetId)!=null,ae=H.view.applyChanges($,B.isPrimaryClient,F,te);return h0(B,H.targetId,ae.au),ae.snapshot})(n,E,A,x);const l=await i0(n.localStore,e,!0),c=new QV(e,l.Qs),d=c.ru(l.documents),p=Au.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),m=c.applyChanges(d,n.isPrimaryClient,p);h0(n,t,m.au);const v=new XV(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function ik(n,e,t){const s=De(n),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((c=>!of(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await gp(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Zp(s.remoteStore,o.targetId),vp(s,o.targetId)})).catch(za)):(vp(s,o.targetId),await gp(s.localStore,o.targetId,!0))}async function sk(n,e){const t=De(n),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Zp(t.remoteStore,s.targetId))}async function rk(n,e,t){const s=fk(n);try{const o=await(function(c,d){const p=De(c),m=ht.now(),v=d.reduce(((x,U)=>x.add(U.key)),je());let E,A;return p.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let U=Ns(),B=je();return p.Ns.getEntries(x,v).next((H=>{U=H,U.forEach(((Z,ee)=>{ee.isValidDocument()||(B=B.add(Z))}))})).next((()=>p.localDocuments.getOverlayedDocuments(x,U))).next((H=>{E=H;const Z=[];for(const ee of d){const $=TP(ee,E.get(ee.key).overlayedDocument);$!=null&&Z.push(new So(ee.key,$,tA($.value.mapValue),Yi.exists(!0)))}return p.mutationQueue.addMutationBatch(x,m,Z,d)})).next((H=>{A=H;const Z=H.applyToLocalDocumentSet(E,B);return p.documentOverlayCache.saveOverlays(x,H.batchId,Z)}))})).then((()=>({batchId:A.batchId,changes:dA(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(c,d,p){let m=c.Vu[c.currentUser.toKey()];m||(m=new Tt(Ye)),m=m.insert(d,p),c.Vu[c.currentUser.toKey()]=m})(s,o.batchId,t),await Iu(s,o.changes),await hf(s.remoteStore)}catch(o){const l=sg(o,"Failed to persist write");t.reject(l)}}async function KA(n,e){const t=De(n);try{const s=await _V(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Au.get(l);c&&(it(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?it(c.hu,14607):o.removedDocuments.size>0&&(it(c.hu,42227),c.hu=!1))})),await Iu(t,s,e)}catch(s){await za(s)}}function f0(n,e,t){const s=De(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(c,d){const p=De(c);p.onlineState=d;let m=!1;p.queries.forEach(((v,E)=>{for(const A of E.Sa)A.va(d)&&(m=!0)})),m&&rg(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function ok(n,e,t){const s=De(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let c=new Tt(Ce.comparator);c=c.insert(l,hn.newNoDocument(l,Ne.min()));const d=je().add(l),p=new cf(Ne.min(),new Map,new Tt(Ye),c,d);await KA(s,p),s.du=s.du.remove(l),s.Au.delete(e),ag(s)}else await gp(s.localStore,e,!1).then((()=>vp(s,e,t))).catch(za)}async function ak(n,e){const t=De(n),s=e.batch.batchId;try{const o=await yV(t.localStore,e);QA(t,s,null),$A(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Iu(t,o)}catch(o){await za(o)}}async function lk(n,e,t){const s=De(n);try{const o=await(function(c,d){const p=De(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return p.mutationQueue.lookupMutationBatch(m,d).next((E=>(it(E!==null,37113),v=E.keys(),p.mutationQueue.removeMutationBatch(m,E)))).next((()=>p.mutationQueue.performConsistencyCheck(m))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(m,v,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>p.localDocuments.getDocuments(m,v)))}))})(s.localStore,e);QA(s,e,t),$A(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Iu(s,o)}catch(o){await za(o)}}function $A(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function QA(n,e,t){const s=De(n);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function vp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||XA(n,s)}))}function XA(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Zp(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),ag(n))}function h0(n,e,t){for(const s of t)s instanceof YA?(n.Ru.addReference(s.key,e),uk(n,s)):s instanceof jA?(me(og,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||XA(n,s.key)):we(19791,{wu:s})}function uk(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(me(og,"New document in limbo: "+t),n.Eu.add(s),ag(n))}function ag(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ce(yt.fromString(e)),s=n.fu.next();n.Au.set(s,new WV(t)),n.du=n.du.insert(t,s),UA(n.remoteStore,new yr(Gi(zp(t.path)),s,"TargetPurposeLimboResolution",tf.ce))}}async function Iu(n,e,t){const s=De(n),o=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((d,p)=>{c.push(s.pu(p,e,t).then((m=>{var v;if((m||t)&&s.isPrimaryClient){const E=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:v.current;s.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(m){o.push(m);const E=Xp.As(p.targetId,m);l.push(E)}})))})),await Promise.all(c),s.Pu.H_(o),await(async function(p,m){const v=De(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>re.forEach(m,(A=>re.forEach(A.Es,(x=>v.persistence.referenceDelegate.addReference(E,A.targetId,x))).next((()=>re.forEach(A.ds,(x=>v.persistence.referenceDelegate.removeReference(E,A.targetId,x)))))))))}catch(E){if(!Ga(E))throw E;me(Wp,"Failed to update sequence numbers: "+E)}for(const E of m){const A=E.targetId;if(!E.fromCache){const x=v.Ms.get(A),U=x.snapshotVersion,B=x.withLastLimboFreeSnapshotVersion(U);v.Ms=v.Ms.insert(A,B)}}})(s.localStore,l))}async function ck(n,e){const t=De(n);if(!t.currentUser.isEqual(e)){me(og,"User change. New user:",e.toKey());const s=await DA(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((p=>{p.reject(new ve(oe.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Iu(t,s.Ls)}}function dk(n,e){const t=De(n),s=t.Au.get(e);if(s&&s.hu)return je().add(s.key);{let o=je();const l=t.Iu.get(e);if(!l)return o;for(const c of l){const d=t.Tu.get(c);o=o.unionWith(d.view.nu)}return o}}function WA(n){const e=De(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=KA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ok.bind(null,e),e.Pu.H_=KV.bind(null,e.eventManager),e.Pu.yu=$V.bind(null,e.eventManager),e}function fk(n){const e=De(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ak.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lk.bind(null,e),e}class Fd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=df(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return gV(this.persistence,new hV,e.initialUser,this.serializer)}Cu(e){return new MA(Qp.mi,this.serializer)}Du(e){return new AV}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fd.provider={build:()=>new Fd};class hk extends Fd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){it(this.persistence.referenceDelegate instanceof qd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new WP(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new MA((s=>qd.mi(s,t)),this.serializer)}}class Tp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>f0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=ck.bind(null,this.syncEngine),await YV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new JV})()}createDatastore(e){const t=df(e.databaseInfo.databaseId),s=(function(l){return new wV(l)})(e.databaseInfo);return(function(l,c,d,p){return new DV(l,c,d,p)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,c,d){return new VV(s,o,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>f0(this.syncEngine,t,0)),(function(){return o0.v()?new o0:new CV})())}createSyncEngine(e,t){return(function(o,l,c,d,p,m,v){const E=new ZV(o,l,c,d,p,m);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=De(o);me(yo,"RemoteStore shutting down."),l.Ea.add(5),await Cu(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Tp.provider={build:()=>new Tp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ws("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr="FirestoreClient";class mk{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=fn.UNAUTHENTICATED,this.clientId=ef.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{me(Rr,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(me(Rr,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=sg(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Um(n,e){n.asyncQueue.verifyOperationInProgress(),me(Rr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await DA(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function m0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await pk(n);me(Rr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>l0(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>l0(e.remoteStore,o))),n._onlineComponents=e}async function pk(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){me(Rr,"Using user provided OfflineComponentProvider");try{await Um(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===oe.FAILED_PRECONDITION||o.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;go("Error using user provided cache. Falling back to memory cache: "+t),await Um(n,new Fd)}}else me(Rr,"Using default OfflineComponentProvider"),await Um(n,new hk(void 0));return n._offlineComponents}async function eC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(me(Rr,"Using user provided OnlineComponentProvider"),await m0(n,n._uninitializedComponentsProvider._online)):(me(Rr,"Using default OnlineComponentProvider"),await m0(n,new Tp))),n._onlineComponents}function gk(n){return eC(n).then((e=>e.syncEngine))}async function tC(n){const e=await eC(n),t=e.eventManager;return t.onListen=ek.bind(null,e.syncEngine),t.onUnlisten=ik.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=tk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=sk.bind(null,e.syncEngine),t}function yk(n,e,t={}){const s=new Cs;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,m){const v=new ZA({next:A=>{v.Nu(),c.enqueueAndForget((()=>zA(l,E)));const x=A.docs.has(d);!x&&A.fromCache?m.reject(new ve(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&A.fromCache&&p&&p.source==="server"?m.reject(new ve(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(A)},error:A=>m.reject(A)}),E=new GA(zp(d.path),v,{includeMetadataChanges:!0,qa:!0});return HA(l,E)})(await tC(n),n.asyncQueue,e,t,s))),s.promise}function _k(n,e,t={}){const s=new Cs;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,m){const v=new ZA({next:A=>{v.Nu(),c.enqueueAndForget((()=>zA(l,E))),A.fromCache&&p.source==="server"?m.reject(new ve(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(A)},error:A=>m.reject(A)}),E=new GA(d,v,{includeMetadataChanges:!0,qa:!0});return HA(l,E)})(await tC(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC="firestore.googleapis.com",g0=!0;class y0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ve(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=iC,this.ssl=g0}else this.host=e.host,this.ssl=e.ssl??g0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=NA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<QP)throw new ve(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nC(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ve(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ve(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ve(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mf{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new y0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new y0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new HS;switch(s.type){case"firstParty":return new w2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ve(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=p0.get(t);s&&(me("ComponentProvider","Removing Datastore"),p0.delete(t),s.terminate())})(this),Promise.resolve()}}function sC(n,e,t,s={}){var m;n=Rs(n,mf);const o=Ba(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;o&&(bS(`https://${d}`),xS("Firestore",!0)),l.host!==iC&&l.host!==d&&go("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:d,ssl:o,emulatorOptions:s};if(!ho(p,c)&&(n._setSettings(p),s.mockUserToken)){let v,E;if(typeof s.mockUserToken=="string")v=s.mockUserToken,E=fn.MOCK_USER;else{v=QM(s.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new ve(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new fn(A)}n._authCredentials=new I2(new FS(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new bu(this.firestore,e,this._query)}}class Ht{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ht(this.firestore,e,this._key)}toJSON(){return{type:Ht._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Eu(t,Ht._jsonSchema))return new Ht(e,s||null,new Ce(yt.fromString(t.referencePath)))}}Ht._jsonSchemaVersion="firestore/documentReference/1.0",Ht._jsonSchema={type:Ft("string",Ht._jsonSchemaVersion),referencePath:Ft("string")};class Is extends bu{constructor(e,t,s){super(e,t,zp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new Ce(e))}withConverter(e){return new Is(this.firestore,e,this._path)}}function vk(n,e,...t){if(n=wn(n),zS("collection","path",e),n instanceof mf){const s=yt.fromString(e,...t);return ME(s),new Is(n,null,s)}{if(!(n instanceof Ht||n instanceof Is))throw new ve(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(yt.fromString(e,...t));return ME(s),new Is(n.firestore,null,s)}}function Tk(n,e,...t){if(n=wn(n),arguments.length===1&&(e=ef.newId()),zS("doc","path",e),n instanceof mf){const s=yt.fromString(e,...t);return NE(s),new Ht(n,null,new Ce(s))}{if(!(n instanceof Ht||n instanceof Is))throw new ve(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(yt.fromString(e,...t));return NE(s),new Ht(n.firestore,n instanceof Is?n.converter:null,new Ce(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="AsyncQueue";class v0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new VA(this,"async_queue_retry"),this._c=()=>{const s=km();s&&me(_0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=km();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=km();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Cs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ga(e))throw e;me(_0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,ws("INTERNAL UNHANDLED ERROR: ",T0(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=ig.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&we(47125,{Pc:T0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function T0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class ja extends mf{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new v0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new v0(e),this._firestoreClient=void 0,await e}}}function rC(n,e){const t=typeof n=="object"?n:MS(),s=typeof n=="string"?n:Dd,o=kp(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=KM("firestore");l&&sC(o,...l)}return o}function pf(n){if(n._terminated)throw new ve(oe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Ek(n),n._firestoreClient}function Ek(n){var s,o,l;const e=n._freezeSettings(),t=(function(d,p,m,v){return new G2(d,p,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,nC(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new mk(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qn(en.fromBase64String(e))}catch(t){throw new ve(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new qn(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Eu(e,qn._jsonSchema))return qn.fromBase64String(e.bytes)}}qn._jsonSchemaVersion="firestore/bytes/1.0",qn._jsonSchema={type:Ft("string",qn._jsonSchemaVersion),bytes:Ft("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ye(this._lat,e._lat)||Ye(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gi._jsonSchemaVersion}}static fromJSON(e){if(Eu(e,gi._jsonSchema))return new gi(e.latitude,e.longitude)}}gi._jsonSchemaVersion="firestore/geoPoint/1.0",gi._jsonSchema={type:Ft("string",gi._jsonSchemaVersion),latitude:Ft("number"),longitude:Ft("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Eu(e,yi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new yi(e.vectorValues);throw new ve(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yi._jsonSchemaVersion="firestore/vectorValue/1.0",yi._jsonSchema={type:Ft("string",yi._jsonSchemaVersion),vectorValues:Ft("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=/^__.*__$/;class Ak{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new So(e,this.data,this.fieldMask,t,this.fieldTransforms):new Su(e,this.data,t,this.fieldTransforms)}}function oC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:n})}}class ug{constructor(e,t,s,o,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ug({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Hd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(oC(this.Ac)&&Sk.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Ck{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||df(e)}Cc(e,t,s,o=!1){return new ug({Ac:e,methodName:t,Dc:s,path:Zt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ik(n){const e=n._freezeSettings(),t=df(n._databaseId);return new Ck(n._databaseId,!!e.ignoreUndefinedProperties,t)}function bk(n,e,t,s,o,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,o);cC("Data must be an object, but it was:",c,s);const d=lC(s,c);let p,m;if(l.merge)p=new mi(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const A=xk(e,E,t);if(!c.contains(A))throw new ve(oe.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);Rk(v,A)||v.push(A)}p=new mi(v),m=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,m=c.fieldTransforms;return new Ak(new ei(d),p,m)}function aC(n,e){if(uC(n=wn(n)))return cC("Unsupported field value:",e,n),lC(n,e);if(n instanceof lg)return(function(s,o){if(!oC(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let c=0;for(const d of s){let p=aC(d,o.wc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,o){if((s=wn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return mP(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=ht.fromDate(s);return{timestampValue:Od(o.serializer,l)}}if(s instanceof ht){const l=new ht(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Od(o.serializer,l)}}if(s instanceof gi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof qn)return{bytesValue:AA(o.serializer,s._byteString)};if(s instanceof Ht){const l=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Kp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof yi)return(function(c,d){return{mapValue:{fields:{[ZS]:{stringValue:eA},[Pd]:{arrayValue:{values:c.toArray().map((m=>{if(typeof m!="number")throw d.Sc("VectorValues must only contain numeric values.");return Gp(d.serializer,m)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Lp(s)}`)})(n,e)}function lC(n,e){const t={};return JS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):To(n,((s,o)=>{const l=aC(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function uC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ht||n instanceof gi||n instanceof qn||n instanceof Ht||n instanceof lg||n instanceof yi)}function cC(n,e,t){if(!uC(t)||!YS(t)){const s=Lp(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function xk(n,e,t){if((e=wn(e))instanceof gf)return e._internalPath;if(typeof e=="string")return dC(n,e);throw Hd("Field path arguments must be of type string or ",n,!1,void 0,t)}const wk=new RegExp("[~\\*/\\[\\]]");function dC(n,e,t){if(e.search(wk)>=0)throw Hd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new gf(...e.split("."))._internalPath}catch{throw Hd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Hd(n,e,t,s,o){const l=s&&!s.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${s}`),c&&(p+=` in document ${o}`),p+=")"),new ve(oe.INVALID_ARGUMENT,d+n+p)}function Rk(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Nk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hC("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Nk extends fC{data(){return super.data()}}function hC(n,e){return typeof e=="string"?dC(n,e):e instanceof gf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ve(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mC{convertValue(e,t="none"){switch(xr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(br(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return To(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,o,l;const t=(l=(o=(s=e.fields)==null?void 0:s[Pd].arrayValue)==null?void 0:o.values)==null?void 0:l.map((c=>Mt(c.doubleValue)));return new yi(t)}convertGeoPoint(e){return new gi(Mt(e.latitude),Mt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=sf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(fu(e));default:return null}}convertTimestamp(e){const t=Ir(e);return new ht(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=yt.fromString(e);it(RA(s),9688,{name:e});const o=new Na(s.get(1),s.get(3)),l=new Ce(s.popFirst(5));return o.isEqual(t)||ws(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class _a{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ar extends fC{constructor(e,t,s,o,l,c){super(e,t,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(hC("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ar._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ar._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ar._jsonSchema={type:Ft("string",Ar._jsonSchemaVersion),bundleSource:Ft("string","DocumentSnapshot"),bundleName:Ft("string"),bundle:Ft("string")};class lu extends Ar{data(e={}){return super.data(e)}}class co{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new _a(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new lu(this._firestore,this._userDataWriter,s.key,s,new _a(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((d=>{const p=new lu(o._firestore,o._userDataWriter,d.doc.key,d.doc,new _a(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new lu(o._firestore,o._userDataWriter,d.doc.key,d.doc,new _a(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,v=-1;return d.type!==0&&(m=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:Pk(d.type),doc:p,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=co._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ef.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Pk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk(n){n=Rs(n,Ht);const e=Rs(n.firestore,ja);return yk(pf(e),n._key).then((t=>Ok(e,n,t)))}co._jsonSchemaVersion="firestore/querySnapshot/1.0",co._jsonSchema={type:Ft("string",co._jsonSchemaVersion),bundleSource:Ft("string","QuerySnapshot"),bundleName:Ft("string"),bundle:Ft("string")};class pC extends mC{constructor(e){super(),this.firestore=e}convertBytes(e){return new qn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,t)}}function kk(n){n=Rs(n,bu);const e=Rs(n.firestore,ja),t=pf(e),s=new pC(e);return Mk(n._query),_k(t,n._query).then((o=>new co(e,s,n,o)))}function Uk(n,e,t){n=Rs(n,Ht);const s=Rs(n.firestore,ja),o=Dk(n.converter,e,t);return cg(s,[bk(Ik(s),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Yi.none())])}function Lk(n){return cg(Rs(n.firestore,ja),[new Yp(n._key,Yi.none())])}function cg(n,e){return(function(s,o){const l=new Cs;return s.asyncQueue.enqueueAndForget((async()=>rk(await gk(s),o,l))),l.promise})(pf(n),e)}function Ok(n,e,t){const s=t.docs.get(e._key),o=new pC(n);return new Ar(n,o,e._key,s,new _a(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Ha=o})(Fa),wa(new mo("firestore",((s,{instanceIdentifier:o,options:l})=>{const c=s.getProvider("app").getImmediate(),d=new ja(new b2(s.getProvider("auth-internal")),new R2(c,s.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ve(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Na(m.options.projectId,v)})(c,o),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Er(bE,xE,e),Er(bE,xE,"esm2020")})();const dd=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:mC,Bytes:qn,CollectionReference:Is,DocumentReference:Ht,DocumentSnapshot:Ar,FieldPath:gf,FieldValue:lg,Firestore:ja,FirestoreError:ve,GeoPoint:gi,Query:bu,QueryDocumentSnapshot:lu,QuerySnapshot:co,SnapshotMetadata:_a,Timestamp:ht,VectorValue:yi,_AutoId:ef,_ByteString:en,_DatabaseId:Na,_DocumentKey:Ce,_EmptyAuthCredentialsProvider:HS,_FieldPath:Zt,_cast:Rs,_logWarn:go,_validateIsNotUsedTogether:GS,collection:vk,connectFirestoreEmulator:sC,deleteDoc:Lk,doc:Tk,ensureFirestoreConfigured:pf,executeWrite:cg,getDoc:Vk,getDocs:kk,getFirestore:rC,setDoc:Uk},Symbol.toStringTag,{value:"Module"}));function gC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yC=gC,_C=new vu("auth","Firebase",gC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd=new Pp("@firebase/auth");function qk(n,...e){zd.logLevel<=Ge.WARN&&zd.warn(`Auth (${Fa}): ${n}`,...e)}function Td(n,...e){zd.logLevel<=Ge.ERROR&&zd.error(`Auth (${Fa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(n,...e){throw dg(n,...e)}function Ji(n,...e){return dg(n,...e)}function vC(n,e,t){const s={...yC(),[e]:t};return new vu("auth","Firebase",s).create(e,{appName:n.name})}function bs(n){return vC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dg(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return _C.create(n,...e)}function xe(n,e,...t){if(!n)throw dg(e,...t)}function Ss(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Td(e),new Error(e)}function Ms(n,e){n||Ss(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function Bk(){return E0()==="http:"||E0()==="https:"}function E0(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Bk()||nD()||"connection"in navigator)?navigator.onLine:!0}function Hk(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ms(t>e,"Short delay should be less than long delay!"),this.isMobile=ZM()||iD()}get(){return Fk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(n,e){Ms(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ss("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ss("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ss("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Yk=new xu(3e4,6e4);function Dr(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Vs(n,e,t,s,o={}){return EC(n,o,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const d=Tu({key:n.config.apiKey,...c}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:p,...l};return tD()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Ba(n.emulatorConfig.host)&&(m.credentials="include"),TC.fetch()(await SC(n,n.config.apiHost,t,d),m)})}async function EC(n,e,t){n._canInitEmulator=!1;const s={...zk,...e};try{const o=new Jk(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw fd(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,m]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw fd(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw fd(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw fd(n,"user-disabled",c);const v=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw vC(n,v,m);_i(n,v)}}catch(o){if(o instanceof Ps)throw o;_i(n,"network-request-failed",{message:String(o)})}}async function wu(n,e,t,s,o={}){const l=await Vs(n,e,t,s,o);return"mfaPendingCredential"in l&&_i(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function SC(n,e,t,s){const o=`${e}${t}?${s}`,l=n,c=l.config.emulator?fg(n.config,o):`${n.config.apiScheme}://${o}`;return Gk.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function jk(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Jk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Ji(this.auth,"network-request-failed")),Yk.get())})}}function fd(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Ji(n,e,s);return o.customData._tokenResponse=t,o}function S0(n){return n!==void 0&&n.enterprise!==void 0}class Kk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return jk(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function $k(n,e){return Vs(n,"GET","/v2/recaptchaConfig",Dr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qk(n,e){return Vs(n,"POST","/v1/accounts:delete",e)}async function Gd(n,e){return Vs(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function AC(n,e=!1){const t=wn(n),s=await t.getIdToken(e),o=hg(s);xe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:uu(Lm(o.auth_time)),issuedAtTime:uu(Lm(o.iat)),expirationTime:uu(Lm(o.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Lm(n){return Number(n)*1e3}function hg(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return Td("JWT malformed, contained fewer than 3 sections"),null;try{const o=SS(t);return o?JSON.parse(o):(Td("Failed to decode base64 JWT payload"),null)}catch(o){return Td("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function A0(n){const e=hg(n);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ka(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Ps&&Xk(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function Xk({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=uu(this.lastLoginAt),this.creationTime=uu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yd(n){var E;const e=n.auth,t=await n.getIdToken(),s=await ka(n,Gd(e,{idToken:t}));xe(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=(E=o.providerUserInfo)!=null&&E.length?IC(o.providerUserInfo):[],c=Zk(n.providerData,l),d=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(c!=null&&c.length),m=d?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Sp(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(n,v)}async function CC(n){const e=wn(n);await Yd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Zk(n,e){return[...n.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function IC(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eU(n,e){const t=await EC(n,{},async()=>{const s=Tu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=await SC(n,o,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:s};return n.emulatorConfig&&Ba(n.emulatorConfig.host)&&(p.credentials="include"),TC.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function tU(n,e){return Vs(n,"POST","/v2/accounts:revokeToken",Dr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):A0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const t=A0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await eU(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,c=new Ia;return s&&(xe(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(xe(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(xe(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ia,this.toJSON())}_performRefresh(){return Ss("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(n,e){xe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class pi{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new Wk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Sp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await ka(this,this.stsTokenManager.getToken(this.auth,e));return xe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return AC(this,e)}reload(){return CC(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new pi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Yd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zn(this.auth.app))return Promise.reject(bs(this.auth));const e=await this.getIdToken();return await ka(this,Qk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,m=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:A,isAnonymous:x,providerData:U,stsTokenManager:B}=t;xe(E&&B,e,"internal-error");const H=Ia.fromJSON(this.name,B);xe(typeof E=="string",e,"internal-error"),mr(s,e.name),mr(o,e.name),xe(typeof A=="boolean",e,"internal-error"),xe(typeof x=="boolean",e,"internal-error"),mr(l,e.name),mr(c,e.name),mr(d,e.name),mr(p,e.name),mr(m,e.name),mr(v,e.name);const Z=new pi({uid:E,auth:e,email:o,emailVerified:A,displayName:s,isAnonymous:x,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:H,createdAt:m,lastLoginAt:v});return U&&Array.isArray(U)&&(Z.providerData=U.map(ee=>({...ee}))),p&&(Z._redirectEventId=p),Z}static async _fromIdTokenResponse(e,t,s=!1){const o=new Ia;o.updateFromServerResponse(t);const l=new pi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Yd(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];xe(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?IC(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),d=new Ia;d.updateFromIdToken(s);const p=new pi({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:c}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Sp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0=new Map;function As(n){Ms(n instanceof Function,"Expected a class definition");let e=C0.get(n);return e?(Ms(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,C0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}bC.type="NONE";const Ap=bC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(n,e,t){return`firebase:${n}:${e}:${t}`}class ba{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=Ed(this.userKey,o.apiKey,l),this.fullPersistenceKey=Ed("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Gd(this.auth,{idToken:e}).catch(()=>{});return t?pi._fromGetAccountInfoResponse(this.auth,t,e):null}return pi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new ba(As(Ap),e,s);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=o[0]||As(Ap);const c=Ed(s,e.config.apiKey,e.name);let d=null;for(const m of t)try{const v=await m._get(c);if(v){let E;if(typeof v=="string"){const A=await Gd(e,{idToken:v}).catch(()=>{});if(!A)break;E=await pi._fromGetAccountInfoResponse(e,A,v)}else E=pi._fromJSON(e,v);m!==l&&(d=E),l=m;break}}catch{}const p=o.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new ba(l,e,s):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==l)try{await m._remove(c)}catch{}})),new ba(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(DC(e))return"Blackberry";if(PC(e))return"Webos";if(wC(e))return"Safari";if((e.includes("chrome/")||RC(e))&&!e.includes("edge/"))return"Chrome";if(MC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function xC(n=pn()){return/firefox\//i.test(n)}function wC(n=pn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function RC(n=pn()){return/crios\//i.test(n)}function NC(n=pn()){return/iemobile/i.test(n)}function MC(n=pn()){return/android/i.test(n)}function DC(n=pn()){return/blackberry/i.test(n)}function PC(n=pn()){return/webos/i.test(n)}function mg(n=pn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function nU(n=pn()){var e;return mg(n)&&!!((e=window.navigator)!=null&&e.standalone)}function iU(){return sD()&&document.documentMode===10}function VC(n=pn()){return mg(n)||MC(n)||PC(n)||DC(n)||/windows phone/i.test(n)||NC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(n,e=[]){let t;switch(n){case"Browser":t=I0(pn());break;case"Worker":t=`${I0(pn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Fa}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rU(n,e={}){return Vs(n,"GET","/v2/passwordPolicy",Dr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oU=6;class aU{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??oU,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new b0(this),this.idTokenSubscription=new b0(this),this.beforeStateQueue=new sU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_C,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=As(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await ba.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Gd(this,{idToken:e}),s=await pi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Zn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=s==null?void 0:s._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(s=p.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Yd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Hk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zn(this.app))return Promise.reject(bs(this));const t=e?wn(e):null;return t&&xe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zn(this.app)?Promise.reject(bs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zn(this.app)?Promise.reject(bs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(As(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rU(this),t=new aU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new vu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await tU(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&As(e)||this._popupRedirectResolver;xe(t,this,"argument-error"),this.redirectPersistenceManager=await ba.create(this,[As(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(Zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&qk(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Co(n){return wn(n)}class b0{constructor(e){this.auth=e,this.observer=null,this.addObserver=fD(t=>this.observer=t)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uU(n){yf=n}function UC(n){return yf.loadJS(n)}function cU(){return yf.recaptchaEnterpriseScript}function dU(){return yf.gapiScript}function fU(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class hU{constructor(){this.enterprise=new mU}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class mU{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const pU="recaptcha-enterprise",LC="NO_RECAPTCHA";class gU{constructor(e){this.type=pU,this.auth=Co(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{$k(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new Kk(p);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,c(m.siteKey)}}).catch(p=>{d(p)})})}function o(l,c,d){const p=window.grecaptcha;S0(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(m=>{c(m)}).catch(()=>{c(LC)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new hU().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{s(this.auth).then(d=>{if(!t&&S0(window.grecaptcha))o(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=cU();p.length!==0&&(p+=d),UC(p).then(()=>{o(d,l,c)}).catch(m=>{c(m)})}}).catch(d=>{c(d)})})}}async function x0(n,e,t,s=!1,o=!1){const l=new gU(n);let c;if(o)c=LC;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return s?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Cp(n,e,t,s,o){var l;if((l=n._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await x0(n,e,t,t==="getOobCode");return s(n,c)}else return s(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await x0(n,e,t,t==="getOobCode");return s(n,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(n,e){const t=kp(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(ho(l,e??{}))return o;_i(o,"already-initialized")}return t.initialize({options:e})}function yU(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(As);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function qC(n,e,t){const s=Co(n);xe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=BC(e),{host:c,port:d}=_U(e),p=d===null?"":`:${d}`,m={url:`${l}//${c}${p}/`},v=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){xe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),xe(ho(m,s.config.emulator)&&ho(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,Ba(c)?(bS(`${l}//${c}${p}`),xS("Auth",!0)):vU()}function BC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function _U(n){const e=BC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:w0(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:w0(c)}}}function w0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function vU(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ss("not implemented")}_getIdTokenResponse(e){return Ss("not implemented")}_linkToIdToken(e,t){return Ss("not implemented")}_getReauthenticationResolver(e){return Ss("not implemented")}}async function TU(n,e){return Vs(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EU(n,e){return wu(n,"POST","/v1/accounts:signInWithPassword",Dr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SU(n,e){return wu(n,"POST","/v1/accounts:signInWithEmailLink",Dr(n,e))}async function AU(n,e){return wu(n,"POST","/v1/accounts:signInWithEmailLink",Dr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua extends _f{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Ua(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Ua(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cp(e,t,"signInWithPassword",EU);case"emailLink":return SU(e,{email:this._email,oobCode:this._password});default:_i(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cp(e,s,"signUpPassword",TU);case"emailLink":return AU(e,{idToken:t,email:this._email,oobCode:this._password});default:_i(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xa(n,e){return wu(n,"POST","/v1/accounts:signInWithIdp",Dr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CU="http://localhost";class Nr extends _f{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Nr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):_i("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const c=new Nr(s,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return xa(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,xa(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xa(e,t)}buildRequest(){const e={requestUri:CU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Tu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IU(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function bU(n){const e=Xl(Wl(n)).link,t=e?Xl(Wl(e)).deep_link_id:null,s=Xl(Wl(n)).deep_link_id;return(s?Xl(Wl(s)).link:null)||s||t||e||n}class vf{constructor(e){const t=Xl(Wl(e)),s=t.apiKey??null,o=t.oobCode??null,l=IU(t.mode??null);xe(s&&o&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=bU(e);try{return new vf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.providerId=Io.PROVIDER_ID}static credential(e,t){return Ua._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=vf.parseLink(t);return xe(s,"argument-error"),Ua._fromEmailAndCode(e,s.code,s.tenantId)}}Io.PROVIDER_ID="password";Io.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Io.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends FC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s extends Ru{constructor(){super("facebook.com")}static credential(e){return Nr._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _s.credential(e.oauthAccessToken)}catch{return null}}}_s.FACEBOOK_SIGN_IN_METHOD="facebook.com";_s.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends Ru{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Nr._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return vs.credential(t,s)}catch{return null}}}vs.GOOGLE_SIGN_IN_METHOD="google.com";vs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts extends Ru{constructor(){super("github.com")}static credential(e){return Nr._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ts.credential(e.oauthAccessToken)}catch{return null}}}Ts.GITHUB_SIGN_IN_METHOD="github.com";Ts.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends Ru{constructor(){super("twitter.com")}static credential(e,t){return Nr._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Es.credential(t,s)}catch{return null}}}Es.TWITTER_SIGN_IN_METHOD="twitter.com";Es.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xU(n,e){return wu(n,"POST","/v1/accounts:signUp",Dr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await pi._fromIdTokenResponse(e,s,o),c=R0(s);return new _o({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=R0(s);return new _o({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function R0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd extends Ps{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,jd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new jd(e,t,s,o)}}function HC(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?jd._fromErrorAndOperation(n,l,e,s):l})}async function wU(n,e,t=!1){const s=await ka(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return _o._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RU(n,e,t=!1){const{auth:s}=n;if(Zn(s.app))return Promise.reject(bs(s));const o="reauthenticate";try{const l=await ka(n,HC(s,o,e,n),t);xe(l.idToken,s,"internal-error");const c=hg(l.idToken);xe(c,s,"internal-error");const{sub:d}=c;return xe(n.uid===d,s,"user-mismatch"),_o._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&_i(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zC(n,e,t=!1){if(Zn(n.app))return Promise.reject(bs(n));const s="signIn",o=await HC(n,s,e),l=await _o._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(l.user),l}async function GC(n,e){return zC(Co(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YC(n){const e=Co(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function NU(n,e,t){if(Zn(n.app))return Promise.reject(bs(n));const s=Co(n),c=await Cp(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xU).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&YC(n),p}),d=await _o._fromIdTokenResponse(s,"signIn",c);return await s._updateCurrentUser(d.user),d}function MU(n,e,t){return Zn(n.app)?Promise.reject(bs(n)):GC(wn(n),Io.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&YC(n),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DU(n,e){return Vs(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PU(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=wn(n),l={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await ka(s,DU(s.auth,l));s.displayName=c.displayName||null,s.photoURL=c.photoUrl||null;const d=s.providerData.find(({providerId:p})=>p==="password");d&&(d.displayName=s.displayName,d.photoURL=s.photoURL),await s._updateTokensIfNecessary(c)}function jC(n,e,t,s){return wn(n).onIdTokenChanged(e,t,s)}function JC(n,e,t){return wn(n).beforeAuthStateChanged(e,t)}function VU(n){return wn(n).signOut()}const Jd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Jd,"1"),this.storage.removeItem(Jd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kU=1e3,UU=10;class $C extends KC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);iU()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,UU):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},kU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}$C.type="LOCAL";const QC=$C;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC extends KC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}XC.type="SESSION";const pg=XC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LU(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Tf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const d=Array.from(c).map(async m=>m(t.origin,l)),p=await LU(d);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Tf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const m=gg("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(E){const A=E;if(A.data.eventId===m)switch(A.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(A.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(){return window}function qU(n){Ki().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(){return typeof Ki().WorkerGlobalScope<"u"&&typeof Ki().importScripts=="function"}async function BU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FU(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function HU(){return WC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="firebaseLocalStorageDb",zU=1,Kd="firebaseLocalStorage",eI="fbase_key";class Nu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ef(n,e){return n.transaction([Kd],e?"readwrite":"readonly").objectStore(Kd)}function GU(){const n=indexedDB.deleteDatabase(ZC);return new Nu(n).toPromise()}function Ip(){const n=indexedDB.open(ZC,zU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Kd,{keyPath:eI})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Kd)?e(s):(s.close(),await GU(),e(await Ip()))})})}async function N0(n,e,t){const s=Ef(n,!0).put({[eI]:e,value:t});return new Nu(s).toPromise()}async function YU(n,e){const t=Ef(n,!1).get(e),s=await new Nu(t).toPromise();return s===void 0?null:s.value}function M0(n,e){const t=Ef(n,!0).delete(e);return new Nu(t).toPromise()}const jU=800,JU=3;class tI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ip(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>JU)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return WC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Tf._getInstance(HU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await BU(),!this.activeServiceWorker)return;this.sender=new OU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||FU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ip();return await N0(e,Jd,"1"),await M0(e,Jd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>N0(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>YU(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>M0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Ef(o,!1).getAll();return new Nu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tI.type="LOCAL";const nI=tI;new xu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KU(n,e){return e?As(e):(xe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg extends _f{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return xa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return xa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $U(n){return zC(n.auth,new yg(n),n.bypassAuthState)}function QU(n){const{auth:e,user:t}=n;return xe(t,e,"internal-error"),RU(t,new yg(n),n.bypassAuthState)}async function XU(n){const{auth:e,user:t}=n;return xe(t,e,"internal-error"),wU(t,new yg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $U;case"linkViaPopup":case"linkViaRedirect":return XU;case"reauthViaPopup":case"reauthViaRedirect":return QU;default:_i(this.auth,"internal-error")}}resolve(e){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU=new xu(2e3,1e4);class va extends iI{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,va.currentPopupAction&&va.currentPopupAction.cancel(),va.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){Ms(this.filter.length===1,"Popup operations only handle one event");const e=gg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ji(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ji(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,va.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ji(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WU.get())};e()}}va.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZU="pendingRedirect",Sd=new Map;class eL extends iI{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Sd.get(this.auth._key());if(!e){try{const s=await tL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Sd.set(this.auth._key(),e)}return this.bypassAuthState||Sd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tL(n,e){const t=sL(e),s=iL(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function nL(n,e){Sd.set(n._key(),e)}function iL(n){return As(n._redirectPersistence)}function sL(n){return Ed(ZU,n.config.apiKey,n.name)}async function rL(n,e,t=!1){if(Zn(n.app))return Promise.reject(bs(n));const s=Co(n),o=KU(s,e),c=await new eL(s,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL=600*1e3;class aL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!sI(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Ji(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=oL&&this.cachedEventUids.clear(),this.cachedEventUids.has(D0(e))}saveEventToCache(e){this.cachedEventUids.add(D0(e)),this.lastProcessedEventTime=Date.now()}}function D0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function sI({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function lL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uL(n,e={}){return Vs(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dL=/^https?/;async function fL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await uL(n);for(const t of e)try{if(hL(t))return}catch{}_i(n,"unauthorized-domain")}function hL(n){const e=Ep(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!dL.test(t))return!1;if(cL.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL=new xu(3e4,6e4);function P0(){const n=Ki().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function pL(n){return new Promise((e,t)=>{var o,l,c;function s(){P0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{P0(),t(Ji(n,"network-request-failed"))},timeout:mL.get()})}if((l=(o=Ki().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Ki().gapi)!=null&&c.load)s();else{const d=fU("iframefcb");return Ki()[d]=()=>{gapi.load?s():t(Ji(n,"network-request-failed"))},UC(`${dU()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Ad=null,e})}let Ad=null;function gL(n){return Ad=Ad||pL(n),Ad}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL=new xu(5e3,15e3),_L="__/auth/iframe",vL="emulator/auth/iframe",TL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SL(n){const e=n.config;xe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?fg(e,vL):`https://${n.config.authDomain}/${_L}`,s={apiKey:e.apiKey,appName:n.name,v:Fa},o=EL.get(n.config.apiHost);o&&(s.eid=o);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Tu(s).slice(1)}`}async function AL(n){const e=await gL(n),t=Ki().gapi;return xe(t,n,"internal-error"),e.open({where:document.body,url:SL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TL,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const c=Ji(n,"network-request-failed"),d=Ki().setTimeout(()=>{l(c)},yL.get());function p(){Ki().clearTimeout(d),o(s)}s.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},IL=500,bL=600,xL="_blank",wL="http://localhost";class V0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function RL(n,e,t,s=IL,o=bL){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const p={...CL,width:s.toString(),height:o.toString(),top:l,left:c},m=pn().toLowerCase();t&&(d=RC(m)?xL:t),xC(m)&&(e=e||wL,p.scrollbars="yes");const v=Object.entries(p).reduce((A,[x,U])=>`${A}${x}=${U},`,"");if(nU(m)&&d!=="_self")return NL(e||"",d),new V0(null);const E=window.open(e||"",d,v);xe(E,n,"popup-blocked");try{E.focus()}catch{}return new V0(E)}function NL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ML="__/auth/handler",DL="emulator/auth/handler",PL=encodeURIComponent("fac");async function k0(n,e,t,s,o,l){xe(n.config.authDomain,n,"auth-domain-config-required"),xe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Fa,eventId:o};if(e instanceof FC){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",dD(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof Ru){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await n._getAppCheckToken(),m=p?`#${PL}=${encodeURIComponent(p)}`:"";return`${VL(n)}?${Tu(d).slice(1)}${m}`}function VL({config:n}){return n.emulator?fg(n,DL):`https://${n.authDomain}/${ML}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="webStorageSupport";class kL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pg,this._completeRedirectFn=rL,this._overrideRedirectResult=nL}async _openPopup(e,t,s,o){var c;Ms((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await k0(e,t,s,Ep(),o);return RL(e,l,gg())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await k0(e,t,s,Ep(),o);return qU(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Ms(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await AL(e),s=new aL(e);return t.register("authEvent",o=>(xe(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Om,{type:Om},o=>{var c;const l=(c=o==null?void 0:o[0])==null?void 0:c[Om];l!==void 0&&t(!!l),_i(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=fL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return VC()||wC()||mg()}}const rI=kL;var U0="@firebase/auth",L0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OL(n){wa(new mo("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=s.options;xe(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kC(n)},m=new lU(s,o,l,p);return yU(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),wa(new mo("auth-internal",e=>{const t=Co(e.getProvider("auth").getImmediate());return(s=>new UL(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Er(U0,L0,LL(n)),Er(U0,L0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL=300,BL=IS("authIdTokenMaxAge")||qL;let O0=null;const FL=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>BL)return;const o=t==null?void 0:t.token;O0!==o&&(O0=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function oI(n=MS()){const e=kp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=OC(n,{popupRedirectResolver:rI,persistence:[nI,QC,pg]}),s=IS("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=FL(l.toString());JC(t,c,()=>c(t.currentUser)),jC(t,d=>c(d))}}const o=AS("auth");return o&&qC(t,`http://${o}`),t}function HL(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}uU({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const l=Ji("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",HL().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OL("Browser");const qm=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeURL:vf,AuthCredential:_f,EmailAuthCredential:Ua,EmailAuthProvider:Io,FacebookAuthProvider:_s,GithubAuthProvider:Ts,GoogleAuthProvider:vs,OAuthCredential:Nr,TwitterAuthProvider:Es,beforeAuthStateChanged:JC,browserLocalPersistence:QC,browserPopupRedirectResolver:rI,browserSessionPersistence:pg,connectAuthEmulator:qC,createUserWithEmailAndPassword:NU,getAuth:oI,getIdTokenResult:AC,inMemoryPersistence:Ap,indexedDBLocalPersistence:nI,initializeAuth:OC,onIdTokenChanged:jC,prodErrorMap:yC,reload:CC,signInWithCredential:GC,signInWithEmailAndPassword:MU,signOut:VU,updateProfile:PU},Symbol.toStringTag,{value:"Module"}));let Bm=null,gs=null,ys=null;const zL=()=>{try{return Aa().hasFirebase?(Bm=NS(Ct.firebase),gs=rC(Bm),ys=oI(Bm),console.log("🔥 تم تهيئة Firebase بنجاح"),{success:!0}):(console.warn("⚠️ تحذير: مفاتيح Firebase API غير متوفرة. لن يتم تهيئة Firebase."),{success:!1,error:"مفاتيح Firebase غير متوفرة"})}catch(n){return console.error("❌ خطأ في تهيئة Firebase:",n),{success:!1,error:n instanceof Error?n.message:"خطأ غير معروف"}}};zL();const _r={async signUp(n,e,t){if(!ys)return{success:!1,error:"Firebase غير مهيأ"};try{const{createUserWithEmailAndPassword:s,updateProfile:o}=await pr(async()=>{const{createUserWithEmailAndPassword:c,updateProfile:d}=await Promise.resolve().then(()=>qm);return{createUserWithEmailAndPassword:c,updateProfile:d}},void 0),l=await s(ys,n,e);return await o(l.user,{displayName:t}),await this.saveData("users",l.user.uid,{email:n,displayName:t,createdAt:new Date().toISOString(),transactions:[],categories:[],cards:{},bankAccounts:{},investments:{currentValue:0},installments:[]}),{success:!0,user:l.user}}catch(s){return console.error("خطأ في التسجيل:",s),{success:!1,error:s instanceof Error?s.message:"خطأ غير معروف"}}},async signIn(n,e){if(!ys)return{success:!1,error:"Firebase غير مهيأ"};try{const{signInWithEmailAndPassword:t}=await pr(async()=>{const{signInWithEmailAndPassword:o}=await Promise.resolve().then(()=>qm);return{signInWithEmailAndPassword:o}},void 0);return{success:!0,user:(await t(ys,n,e)).user}}catch(t){return console.error("خطأ في تسجيل الدخول:",t),{success:!1,error:t instanceof Error?t.message:"خطأ غير معروف"}}},async signOut(){if(!ys)return{success:!1,error:"Firebase غير مهيأ"};try{const{signOut:n}=await pr(async()=>{const{signOut:e}=await Promise.resolve().then(()=>qm);return{signOut:e}},void 0);return await n(ys),{success:!0}}catch(n){return console.error("خطأ في تسجيل الخروج:",n),{success:!1,error:n instanceof Error?n.message:"خطأ غير معروف"}}},async getCurrentUser(){return ys?ys.currentUser:null},async saveData(n,e,t){if(!gs)return{success:!1,error:"Firebase غير مهيأ"};try{const{doc:s,setDoc:o}=await pr(async()=>{const{doc:c,setDoc:d}=await Promise.resolve().then(()=>dd);return{doc:c,setDoc:d}},void 0),l=s(gs,n,e);return await o(l,{...t,lastUpdated:new Date().toISOString()}),{success:!0,id:e}}catch(s){return console.error("خطأ في حفظ البيانات:",s),{success:!1,error:s instanceof Error?s.message:"خطأ غير معروف"}}},async getData(n,e){if(!gs)return{success:!1,error:"Firebase غير مهيأ"};try{const{doc:t,getDoc:s}=await pr(async()=>{const{doc:c,getDoc:d}=await Promise.resolve().then(()=>dd);return{doc:c,getDoc:d}},void 0),o=t(gs,n,e),l=await s(o);return l.exists()?{success:!0,data:l.data()}:{success:!1,error:"المستند غير موجود"}}catch(t){return console.error("خطأ في جلب البيانات:",t),{success:!1,error:t instanceof Error?t.message:"خطأ غير معروف"}}},async getAllDocuments(n){if(!gs)return{success:!1,error:"Firebase غير مهيأ"};try{const{collection:e,getDocs:t}=await pr(async()=>{const{collection:l,getDocs:c}=await Promise.resolve().then(()=>dd);return{collection:l,getDocs:c}},void 0),s=await t(e(gs,n)),o=[];return s.forEach(l=>{o.push({id:l.id,...l.data()})}),{success:!0,data:o}}catch(e){return console.error("خطأ في جلب المستندات:",e),{success:!1,error:e instanceof Error?e.message:"خطأ غير معروف"}}},async deleteDocument(n,e){if(!gs)return{success:!1,error:"Firebase غير مهيأ"};try{const{doc:t,deleteDoc:s}=await pr(async()=>{const{doc:l,deleteDoc:c}=await Promise.resolve().then(()=>dd);return{doc:l,deleteDoc:c}},void 0),o=t(gs,n,e);return await s(o),{success:!0}}catch(t){return console.error("خطأ في حذف المستند:",t),{success:!1,error:t instanceof Error?t.message:"خطأ غير معروف"}}},async syncLocalDataToFirebase(n,e){try{return await this.saveData("users",n,{financialData:e,syncTimestamp:new Date().toISOString()})}catch(t){return console.error("خطأ في مزامنة البيانات:",t),{success:!1,error:t instanceof Error?t.message:"خطأ غير معروف"}}},async getDataFromFirebase(n){var e;try{const t=await this.getData("users",n);return t.success&&((e=t.data)!=null&&e.financialData)?{success:!0,data:t.data.financialData}:{success:!1,error:"لا توجد بيانات محفوظة"}}catch(t){return console.error("خطأ في جلب البيانات من Firebase:",t),{success:!1,error:t instanceof Error?t.message:"خطأ غير معروف"}}}},GL=({onSuccess:n,onClose:e})=>{const[t,s]=fe.useState(!0),[o,l]=fe.useState({email:"",password:"",displayName:""}),[c,d]=fe.useState(!1),[p,m]=fe.useState(""),v=async A=>{A.preventDefault(),d(!0),m("");try{let x;if(t)x=await _r.signIn(o.email,o.password);else{if(!o.displayName.trim()){m("الاسم مطلوب"),d(!1);return}x=await _r.signUp(o.email,o.password,o.displayName)}x.success?n(x.user):m(x.error||"حدث خطأ غير متوقع")}catch{m("حدث خطأ في الاتصال")}finally{d(!1)}},E=A=>{l(x=>({...x,[A.target.name]:A.target.value}))};return T.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[70] flex items-center justify-center p-4",children:T.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md animate-fade-in",children:T.jsxs("div",{className:"p-6",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:t?"🔐 تسجيل الدخول":"📝 إنشاء حساب جديد"}),T.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 transition-colors",children:"✕"})]}),T.jsxs("form",{onSubmit:v,className:"space-y-4",children:[!t&&T.jsxs("div",{children:[T.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-slate-700 mb-1",children:"الاسم الكامل"}),T.jsx("input",{type:"text",id:"displayName",name:"displayName",value:o.displayName,onChange:E,className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل اسمك الكامل",required:!t})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-1",children:"البريد الإلكتروني"}),T.jsx("input",{type:"email",id:"email",name:"email",value:o.email,onChange:E,className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"example@email.com",required:!0})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 mb-1",children:"كلمة المرور"}),T.jsx("input",{type:"password",id:"password",name:"password",value:o.password,onChange:E,className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"كلمة المرور",required:!0,minLength:6})]}),p&&T.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:T.jsx("p",{className:"text-red-600 text-sm",children:p})}),T.jsx("button",{type:"submit",disabled:c,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-semibold rounded-lg transition-colors",children:c?"⏳ جاري المعالجة...":t?"🔐 تسجيل الدخول":"📝 إنشاء حساب"})]}),T.jsx("div",{className:"mt-6 text-center",children:T.jsx("button",{onClick:()=>s(!t),className:"text-blue-600 hover:text-blue-700 font-medium",children:t?"ليس لديك حساب؟ إنشاء حساب جديد":"لديك حساب بالفعل؟ تسجيل الدخول"})})]})})})},aI=()=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),T.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),_g=()=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:[T.jsx("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),T.jsx("path",{fillRule:"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"})]}),YL=({className:n})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-6 w-6 ${n}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),jL=({className:n})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-6 w-6 ${n}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),JL=({className:n})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-6 w-6 ${n}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h7"})}),KL=({className:n})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-6 w-6 ${n}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h.01M12 12h.01M19 12h.01M5 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"})}),$L=({className:n})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-8 w-8 ${n}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),vg=({className:n})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),Fm=({className:n})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Hm=({className:n})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),QL=({className:n})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-6 h-6 ${n}`,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})}),XL=({selectedYear:n,selectedMonth:e,onYearChange:t,onMonthChange:s,onAddTransaction:o,currentUser:l,onSignOut:c,onOpenAuth:d})=>{const p=fe.useMemo(()=>{const v=new Date().getFullYear(),E=[];for(let A=v+1;A>=2020;A--)E.push(A);return E},[]),m=fe.useMemo(()=>[{value:"all",label:"كل الشهور"},{value:1,label:"يناير"},{value:2,label:"فبراير"},{value:3,label:"مارس"},{value:4,label:"أبريل"},{value:5,label:"مايو"},{value:6,label:"يونيو"},{value:7,label:"يوليو"},{value:8,label:"أغسطس"},{value:9,label:"سبتمبر"},{value:10,label:"أكتوبر"},{value:11,label:"نوفمبر"},{value:12,label:"ديسمبر"}],[]);return T.jsx("header",{className:"bg-slate-50/80 backdrop-blur-lg sticky top-0 z-50 border-b border-slate-200 py-3",children:T.jsx("div",{className:"container mx-auto px-4",children:T.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center text-center sm:text-right gap-4",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center text-xl",children:"💰"}),T.jsxs("div",{children:[T.jsx("h1",{className:"text-xl font-bold text-slate-900 tracking-wide",children:"لوحة التحكم المالية"}),T.jsx("p",{className:"text-xs text-slate-500",children:"Developed by K.A Team"})]})]}),T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsxs("div",{className:"flex items-center gap-2 bg-slate-200 p-1.5 rounded-lg",children:[T.jsx("select",{value:n,onChange:v=>t(parseInt(v.target.value)),className:"bg-slate-200 text-slate-800 font-semibold border-0 focus:ring-0 appearance-none p-2 rounded-md",children:p.map(v=>T.jsx("option",{value:v,children:v},v))}),T.jsx("select",{value:e,onChange:v=>s(v.target.value==="all"?"all":parseInt(v.target.value)),className:"bg-slate-200 text-slate-800 font-semibold border-0 focus:ring-0 appearance-none p-2 rounded-md",children:m.map(v=>T.jsx("option",{value:v.value,children:v.label},v.value))})]}),l?T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsxs("div",{className:"text-right",children:[T.jsx("p",{className:"font-semibold text-slate-800 text-sm",children:l.displayName||"المستخدم"}),T.jsx("p",{className:"text-xs text-slate-500",children:l.email})]}),T.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:T.jsx("span",{className:"text-blue-600 font-bold text-sm",children:(l.displayName||l.email||"U").charAt(0).toUpperCase()})}),T.jsx("button",{onClick:c,className:"px-3 py-1 text-xs bg-red-100 hover:bg-red-200 text-red-700 rounded-lg transition-colors",children:"🚪 خروج"})]}):T.jsx("button",{onClick:d,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg transition-colors",children:"🔐 تسجيل الدخول"}),T.jsxs("button",{onClick:o,className:"hidden md:flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-2.5 rounded-lg transition-all duration-300",children:[T.jsx($L,{className:"w-5 h-5"}),T.jsx("span",{children:"إضافة حركة"})]})]})]})})})},zm=[{id:"summary",label:"📊 الملخص",icon:YL},{id:"analysis",label:"📈 التحليل",icon:jL},{id:"transactions",label:"💳 الحركات",icon:JL},{id:"budget",label:"✨ الميزانية"},{id:"investment",label:"💹 الاستثمار"},{id:"ai-assistant",label:"🤖 المحلل الذكي"},{id:"cards",label:"💳 إدارة البطاقات"},{id:"bank",label:"🏦 البنك"},{id:"installments",label:"📱 الأقساط"},{id:"settings",label:"⚙️ الإعدادات"}],q0=["summary","analysis","transactions"],WL=({activeTab:n,setActiveTab:e})=>{const[t,s]=fe.useState(!1),o=d=>{e(d),s(!1)},l=zm.filter(d=>q0.includes(d.id)),c=zm.filter(d=>!q0.includes(d.id));return T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"hidden md:flex flex-wrap justify-center mb-8 tab-bar rounded-xl p-2",children:zm.map(d=>T.jsx("button",{onClick:()=>o(d.id),className:`tab-btn px-4 py-2 mx-1 mb-1 rounded-lg font-semibold text-sm flex items-center gap-2 ${n===d.id?"active":""}`,children:d.label},d.id))}),T.jsxs("div",{className:"md:hidden fixed bottom-0 left-0 right-0 h-20 bg-white/80 backdrop-blur-lg border-t border-slate-200 z-40 flex justify-around items-center",children:[l.map(d=>{const p=d.icon;return T.jsxs("button",{onClick:()=>o(d.id),className:`flex flex-col items-center justify-center gap-1 transition-colors w-full h-full ${n===d.id?"text-blue-600":"text-slate-500 hover:text-slate-900"}`,children:[p&&T.jsx(p,{}),T.jsx("span",{className:"text-xs",children:d.label.split(" ")[1]})]},d.id)}),T.jsxs("button",{onClick:()=>s(!t),className:`flex flex-col items-center justify-center gap-1 transition-colors w-full h-full ${t?"text-blue-600":"text-slate-500 hover:text-slate-900"}`,children:[T.jsx(KL,{}),T.jsx("span",{className:"text-xs",children:"المزيد"})]})]}),t&&T.jsx("div",{className:"md:hidden fixed inset-0 bg-gray-900/50 backdrop-blur-sm z-50 flex justify-center items-end",onClick:()=>s(!1),children:T.jsxs("div",{className:"bg-white w-full rounded-t-2xl p-4 border-t border-slate-200 animate-fade-in",onClick:d=>d.stopPropagation(),children:[T.jsx("div",{className:"w-16 h-1 bg-slate-300 rounded-full mx-auto mb-4"}),T.jsx("div",{className:"grid grid-cols-3 gap-4 text-center",children:c.map(d=>T.jsxs("button",{onClick:()=>o(d.id),className:`p-3 rounded-lg flex flex-col items-center gap-2 ${n===d.id?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:[T.jsx("span",{className:"text-2xl",children:d.label.split(" ")[0]}),T.jsx("span",{className:"text-xs font-semibold",children:d.label.split(" ")[1]})]},d.id))})]})})]})},ZL=({className:n})=>T.jsx("div",{className:`absolute inset-0 -translate-x-full animate-[shimmer_2s_infinite] bg-gradient-to-r from-transparent via-slate-200/80 to-transparent ${n}`}),Gm=()=>T.jsxs("div",{className:"glass-card p-6 h-96 relative overflow-hidden",children:[T.jsx("div",{className:"h-6 w-1/2 bg-slate-200 rounded mb-6"}),T.jsxs("div",{className:"space-y-4",children:[T.jsx("div",{className:"h-4 w-full bg-slate-200 rounded"}),T.jsx("div",{className:"h-4 w-5/6 bg-slate-200 rounded"}),T.jsx("div",{className:"h-4 w-full bg-slate-200 rounded"}),T.jsx("div",{className:"h-4 w-3/4 bg-slate-200 rounded"})]}),T.jsx(ZL,{})]}),e4=()=>T.jsxs("div",{className:"container mx-auto px-2 sm:px-4 max-w-7xl mt-8 mb-20",children:[T.jsx("div",{className:"h-16 mb-3"}),T.jsx("div",{className:"flex flex-wrap justify-center mb-8 bg-slate-100 rounded-xl p-2 h-14"}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-fade-in",children:[T.jsx(Gm,{}),T.jsx(Gm,{}),T.jsx(Gm,{})]})]}),_n=n=>(n||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),t4=({title:n,details:e,barColor:t})=>T.jsxs("div",{className:"bg-slate-100 p-4 rounded-lg",children:[T.jsx("h4",{className:"font-bold text-md text-slate-800",children:n}),T.jsxs("div",{className:"flex justify-between text-sm mt-2",children:[T.jsx("span",{className:"text-slate-500",children:"المستحق:"}),T.jsxs("span",{className:"font-bold number-display text-slate-800",children:[_n(e.balance)," ريال"]})]}),T.jsxs("div",{className:"flex justify-between text-sm",children:[T.jsx("span",{className:"text-slate-500",children:"المتبقي:"}),T.jsxs("span",{className:"font-bold number-display text-emerald-500",children:[_n(e.available)," ريال"]})]}),T.jsx("div",{className:"mt-3 bg-slate-200 rounded-full h-2",children:T.jsx("div",{className:`${t} rounded-full h-2`,style:{width:`${Math.min(100,e.usagePercentage)}%`}})})]}),n4=({calculations:n,categories:e})=>{const t=Object.values(n.expensesByCategory).reduce((o,l)=>o+Number(l),0);if(t===0)return T.jsx("p",{className:"text-slate-500 text-center p-4 text-sm",children:"لا توجد مصاريف في هذه الفترة."});const s=Object.entries(n.expensesByCategory).sort(([,o],[,l])=>l-o);return T.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto pr-2",children:s.map(([o,l])=>{const c=e.find(m=>m.id===o),d=c?`${c.icon} ${c.name}`:"غير مصنف",p=Number(l)/t*100;return T.jsxs("div",{className:"flex items-center justify-between text-sm py-1",children:[T.jsx("span",{className:"w-28 truncate text-slate-600",title:c==null?void 0:c.name,children:d}),T.jsx("div",{className:"flex-1 bg-slate-200 rounded-full h-2.5 mx-2",children:T.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${p.toFixed(1)}%`}})}),T.jsxs("span",{className:"font-bold text-slate-800 number-display w-24 text-left",children:[_n(l)," ريال"]})]},o)})})},i4=({calculations:n,categories:e})=>{const{totalIncome:t,totalExpenses:s,cardDetails:o,cardPayments:l,bankAccountDetails:c,totalDebt:d,totalAvailable:p,totalLimits:m,totalBankBalance:v}=n,E=t-s,A=["bg-blue-500","bg-red-500","bg-green-500","bg-purple-500","bg-yellow-500"];return T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 animate-fade-in",children:[T.jsxs("div",{className:"glass-card p-6 xl:col-span-1",children:[T.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"💳 ملخص ديون البطاقات"}),T.jsx("div",{className:"space-y-4",children:Object.values(o).map((x,U)=>T.jsx(t4,{title:x.name,details:x,barColor:A[U%A.length]},x.id))}),T.jsx("div",{className:"mt-4 p-3 bg-slate-100 rounded-lg",children:T.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[T.jsxs("div",{children:[T.jsx("p",{className:"text-slate-500 text-xs",children:"إجمالي الديون"}),T.jsx("p",{className:"text-lg font-bold text-red-500 number-display",children:_n(d)})]}),T.jsxs("div",{children:[T.jsx("p",{className:"text-slate-500 text-xs",children:"إجمالي المتاح"}),T.jsx("p",{className:"text-lg font-bold text-emerald-500 number-display",children:_n(p)})]}),T.jsxs("div",{children:[T.jsx("p",{className:"text-slate-500 text-xs",children:"إجمالي الحدود"}),T.jsx("p",{className:"text-lg font-bold text-sky-500 number-display",children:_n(m)})]})]})})]}),T.jsxs("div",{className:"glass-card p-6 xl:col-span-1",children:[T.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"🏦 ملخص الحسابات البنكية"}),T.jsx("div",{className:"space-y-3",children:Object.values(c).map(x=>T.jsxs("div",{className:"bg-slate-100 p-3 rounded-lg",children:[T.jsx("p",{className:"font-bold text-slate-800",children:x.name}),T.jsx("p",{className:"font-bold text-xl text-blue-600 number-display",children:_n(x.balance)}),T.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[T.jsxs("span",{className:"text-emerald-500",children:["+",_n(x.deposits)]}),T.jsxs("span",{className:"text-red-500",children:["-",_n(x.withdrawals)]})]})]},x.id))}),T.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg text-center",children:[T.jsx("p",{className:"text-slate-500 text-sm",children:"إجمالي الأرصدة البنكية"}),T.jsx("p",{className:"text-2xl font-bold text-blue-800 number-display",children:_n(v)})]})]}),T.jsxs("div",{className:"glass-card p-6 xl:col-span-1",children:[T.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"📈 تقرير مالي شامل"}),T.jsxs("div",{className:"space-y-2 text-sm",children:[T.jsxs("div",{className:"flex justify-between",children:[T.jsx("span",{children:"إجمالي الدخل:"}),T.jsx("span",{className:"font-bold text-emerald-500 number-display",children:_n(t)})]}),T.jsxs("div",{className:"flex justify-between",children:[T.jsx("span",{children:"إجمالي المصاريف:"}),T.jsx("span",{className:"font-bold text-red-500 number-display",children:_n(s)})]}),T.jsx("hr",{className:"my-2 border-slate-200"}),Object.values(o).map((x,U)=>T.jsxs("div",{className:"flex justify-between text-xs",children:[T.jsxs("span",{className:"text-slate-500",children:["مصاريف ",x.name,":"]}),T.jsx("span",{className:`font-semibold ${A[U%A.length].replace("bg-","text-")} number-display`,children:_n(x.balance+(l[x.id]||0))})]},x.id)),T.jsx("hr",{className:"my-2 border-slate-200 border-dashed"}),Object.entries(l).map(([x,U])=>{var B;return T.jsxs("div",{className:"flex justify-between text-xs",children:[T.jsxs("span",{className:"text-slate-500",children:["إجمالي سداد ",(B=o[x])==null?void 0:B.name,":"]}),T.jsx("span",{className:"font-semibold text-emerald-500 number-display",children:_n(U)})]},x)}),T.jsx("hr",{className:"my-2 border-slate-200"}),T.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[T.jsx("span",{children:"الصافي:"}),T.jsx("span",{className:`number-display ${E>=0?"text-emerald-500":"text-red-500"}`,children:_n(E)})]})]})]}),T.jsxs("div",{className:"glass-card p-6 xl:col-span-1",children:[T.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"📊 ملخص الفئات"}),T.jsx(n4,{calculations:n,categories:e})]})]})},hd=n=>(n||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),s4=({transactions:n,allTransactions:e,categories:t,deleteTransaction:s,editTransaction:o,state:l})=>{const[c,d]=fe.useState(""),[p,m]=fe.useState(""),[v,E]=fe.useState(""),[A,x]=fe.useState(""),[U,B]=fe.useState(""),H=F=>{const te={cash:"💵 نقدي","tabby-bnpl":"📱 تابي (BNPL)","tamara-bnpl":"📱 تمارا (BNPL)"};return te[F]?te[F]:l.cards[F]?`💳 ${l.cards[F].name}`:l.bankAccounts[F]?`🏦 ${l.bankAccounts[F].name}`:F},Z=F=>{const te={income:"💰 دخل",expense:"💸 مصاريف","bnpl-payment":"📱 سداد قسط","investment-deposit":"💹 إيداع استثماري","investment-withdrawal":"💹 سحب استثماري"};if(te[F])return te[F];if(F.endsWith("-payment")){const ae=F.replace("-payment","");if(l.cards[ae])return`💳 سداد ${l.cards[ae].name}`}return F},ee=fe.useMemo(()=>{let F=n;if(A&&U){const te=new Date(A),ae=new Date(U);ae.setHours(23,59,59,999),F=e.filter(N=>{const M=new Date(N.date);return M>=te&&M<=ae})}return F.filter(te=>{const ae=c.toLowerCase(),N=t.find(V=>V.id===te.categoryId),M=te.description.toLowerCase().includes(ae)||(N==null?void 0:N.name.toLowerCase().includes(ae)),R=!p||te.paymentMethod===p,P=!v||te.categoryId===v;return M&&R&&P}).sort((te,ae)=>new Date(ae.date).getTime()-new Date(te.date).getTime())},[n,e,c,p,v,A,U,t]),$=fe.useMemo(()=>ee.reduce((F,te)=>(te.type==="income"||te.type.toString().includes("payment")||te.type==="investment-withdrawal"?F.positive+=te.amount:F.negative+=te.amount,F),{positive:0,negative:0}),[ee]);return T.jsx("div",{className:"space-y-6 animate-fade-in",children:T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-lg sm:text-xl font-bold text-slate-900 mb-4",children:"📋 سجل المعاملات والتقارير"}),T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 items-end p-4 bg-slate-100 rounded-lg mb-6",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"dateFrom",className:"block text-sm font-medium text-slate-600 mb-1",children:"من تاريخ"}),T.jsx("input",{type:"date",id:"dateFrom",value:A,onChange:F=>x(F.target.value),className:"w-full p-2"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"dateTo",className:"block text-sm font-medium text-slate-600 mb-1",children:"إلى تاريخ"}),T.jsx("input",{type:"date",id:"dateTo",value:U,onChange:F=>B(F.target.value),className:"w-full p-2"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"filterMethod",className:"block text-sm font-medium text-slate-600 mb-1",children:"وسيلة الدفع"}),T.jsxs("select",{id:"filterMethod",value:p,onChange:F=>m(F.target.value),className:"p-2 w-full",children:[T.jsx("option",{value:"",children:"كل الوسائل"}),Object.values(l.bankAccounts).map(F=>T.jsxs("option",{value:F.id,children:["🏦 ",F.name]},F.id)),T.jsx("option",{value:"cash",children:"💵 نقدي"}),Object.values(l.cards).map(F=>T.jsxs("option",{value:F.id,children:["💳 ",F.name]},F.id)),T.jsx("option",{value:"tabby-bnpl",children:"📱 تابي"}),T.jsx("option",{value:"tamara-bnpl",children:"📱 تمارا"})]})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"filterCategory",className:"block text-sm font-medium text-slate-600 mb-1",children:"الفئة"}),T.jsxs("select",{id:"filterCategory",value:v,onChange:F=>E(F.target.value),className:"p-2 w-full",children:[T.jsx("option",{value:"",children:"كل الفئات"}),t.map(F=>T.jsx("option",{value:F.id,children:F.name},F.id))]})]}),T.jsxs("div",{className:"sm:col-span-2 lg:col-span-4",children:[T.jsx("label",{htmlFor:"searchTerm",className:"block text-sm font-medium text-slate-600 mb-1",children:"بحث بالوصف"}),T.jsx("input",{type:"text",id:"searchTerm",placeholder:"🔍...",value:c,onChange:F=>d(F.target.value),className:"p-2 w-full"})]})]}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center mb-4",children:[T.jsxs("div",{className:"bg-emerald-50 p-3 rounded-lg",children:[T.jsx("p",{className:"text-sm text-emerald-700",children:"إجمالي الإيجابي"}),T.jsx("p",{className:"font-bold text-xl text-emerald-600 number-display",children:hd($.positive)})]}),T.jsxs("div",{className:"bg-red-50 p-3 rounded-lg",children:[T.jsx("p",{className:"text-sm text-red-700",children:"إجمالي السلبي"}),T.jsx("p",{className:"font-bold text-xl text-red-600 number-display",children:hd($.negative)})]}),T.jsxs("div",{className:"bg-sky-50 p-3 rounded-lg",children:[T.jsx("p",{className:"text-sm text-sky-700",children:"الصافي"}),T.jsx("p",{className:"font-bold text-xl text-sky-600 number-display",children:hd($.positive-$.negative)})]})]}),T.jsxs("div",{className:"overflow-x-auto",children:[T.jsxs("table",{className:"w-full text-sm",children:[T.jsx("thead",{className:"border-b border-gray-200",children:T.jsxs("tr",{children:[T.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:"التاريخ"}),T.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:"الوسيلة"}),T.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:"النوع"}),T.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:"المبلغ"}),T.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:"الفئة"}),T.jsx("th",{className:"text-right py-3 px-4 font-semibold hidden sm:table-cell",children:"الوصف"}),T.jsx("th",{className:"text-center py-3 px-4 font-semibold"})]})}),T.jsx("tbody",{children:ee.map(F=>{const te=t.find(N=>N.id===F.categoryId),ae=F.type==="income"||F.type.toString().includes("payment")||F.type==="investment-withdrawal";return T.jsxs("tr",{className:"border-b border-gray-200/50 hover:bg-gray-50",children:[T.jsx("td",{className:"p-3",children:F.date}),T.jsx("td",{className:"p-3",children:H(F.paymentMethod)}),T.jsx("td",{className:"p-3",children:Z(F.type)}),T.jsxs("td",{className:`p-3 font-semibold number-display ${ae?"text-emerald-500":"text-red-500"}`,children:[ae?"+":"-"," ",hd(F.amount)]}),T.jsx("td",{className:"p-3",children:te?`${te.icon} ${te.name}`:"غير محدد"}),T.jsx("td",{className:"p-3 text-slate-500 hidden sm:table-cell",children:F.description||"-"}),T.jsx("td",{className:"p-3 text-center",children:T.jsxs("div",{className:"flex gap-2 justify-center",children:[T.jsx("button",{onClick:()=>o(F.id),className:"text-slate-400 hover:text-blue-500 p-1 transition-colors",title:"تعديل الحركة",children:"✏️"}),T.jsx("button",{onClick:()=>s(F.id),className:"text-slate-400 hover:text-red-500 p-1 transition-colors",title:"حذف الحركة",children:T.jsx(_g,{})})]})})]},F.id)})})]}),ee.length===0&&T.jsxs("div",{className:"text-center p-8 text-slate-500",children:[T.jsx("p",{children:"لا توجد معاملات تطابق الفلاتر المحددة."}),T.jsx("p",{className:"text-xs mt-1",children:"جرب توسيع النطاق الزمني أو تعديل الفلاتر الأخرى."})]})]})]})})},r4=()=>T.jsxs("div",{className:"ai-bubble chat-bubble typing-indicator flex items-center space-x-1 p-3 self-start",children:[T.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.3s]"}),T.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.15s]"}),T.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse"})]}),o4=({calculations:n,filteredTransactions:e})=>{const[t,s]=fe.useState([{id:"1",text:'أهلاً بك! أنا مساعدك المالي الشامل. يمكنك أن تسألني أسئلة تفصيلية عن وضعك المالي، مثل "ما هو إجمالي ديوني؟" أو "هل إنفاقي هذا الشهر يتوافق مع أهدافي؟"',sender:"ai"}]),[o,l]=fe.useState(""),[c,d]=fe.useState(!1),p=fe.useRef(null);fe.useEffect(()=>{var v;(v=p.current)==null||v.scrollTo(0,p.current.scrollHeight)},[t,c]);const m=async v=>{v.preventDefault();const E=o.trim();if(!E||c)return;const A={id:Date.now().toString(),text:E,sender:"user"};s(x=>[...x,A]),l(""),d(!0);try{const U=await gS(E,{periodSummary:n,transactions:e}),B={id:(Date.now()+1).toString(),text:U,sender:"ai"};s(H=>[...H,B])}catch(x){const U={id:(Date.now()+1).toString(),text:x instanceof Error?x.message:"عذراً، حدث خطأ ما. يرجى المحاولة مرة أخرى.",sender:"ai"};s(B=>[...B,U])}finally{d(!1)}};return T.jsxs("div",{className:"glass-card overflow-hidden flex flex-col",style:{height:"70vh"},children:[T.jsxs("div",{className:"p-4 bg-gray-100 text-center flex-shrink-0",children:[T.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"🤖 المحلل المالي الذكي"}),T.jsx("p",{className:"text-sm text-slate-500",children:"اسأل أي شيء عن بياناتك المالية للشهر المحدد"})]}),T.jsxs("div",{ref:p,className:"p-4 flex-grow overflow-y-auto flex flex-col gap-4",children:[t.map(v=>T.jsx("div",{className:`chat-bubble ${v.sender==="user"?"user-bubble":"ai-bubble"}`,children:T.jsx("p",{dangerouslySetInnerHTML:{__html:v.text.replace(/\n/g,"<br />")}})},v.id)),c&&T.jsx(r4,{})]}),T.jsx("div",{className:"p-4 border-t border-gray-200 flex-shrink-0",children:T.jsxs("form",{onSubmit:m,className:"flex gap-2",children:[T.jsx("input",{type:"text",value:o,onChange:v=>l(v.target.value),className:"w-full p-3",placeholder:"اكتب سؤالك هنا...",required:!0,autoComplete:"off",disabled:c}),T.jsx("button",{type:"submit",disabled:c,className:"p-3 magical-button text-white rounded-lg flex-shrink-0 disabled:opacity-50",children:T.jsx(aI,{})})]})})]})},a4=({calculations:n,categories:e,allTransactions:t})=>{const s=fe.useRef(null),o=fe.useRef(null),l=fe.useRef({}),c=fe.useMemo(()=>Object.entries(n.expensesByCategory).map(([p,m])=>{const v=e.find(E=>E.id===p);return{name:v?`${v.icon} ${v.name}`:"غير محدد",value:m}}).sort((p,m)=>m.value-p.value),[n.expensesByCategory,e]),d=fe.useMemo(()=>{const p={},m=new Date;for(let v=5;v>=0;v--){const A=new Date(m.getFullYear(),m.getMonth()-v,1).toLocaleString("ar-SA",{month:"short",year:"numeric"});p[A]={income:0,expenses:0}}return t.forEach(v=>{const A=new Date(v.date).toLocaleString("ar-SA",{month:"short",year:"numeric"});p[A]&&(v.type==="income"&&(p[A].income+=v.amount),(v.type==="expense"||v.type==="bnpl-payment")&&(p[A].expenses+=v.amount))}),{labels:Object.keys(p),incomeData:Object.values(p).map(v=>v.income),expensesData:Object.values(p).map(v=>v.expenses)}},[t]);return fe.useEffect(()=>{var m,v;const p=window.Chart;if(p){if((m=l.current.pie)==null||m.destroy(),(v=l.current.bar)==null||v.destroy(),s.current&&c.length>0){const E=s.current.getContext("2d");E&&(l.current.pie=new p(E,{type:"doughnut",data:{labels:c.map(A=>A.name),datasets:[{data:c.map(A=>A.value),backgroundColor:["#3b82f6","#60a5fa","#93c5fd","#bfdbfe","#d1d5db","#9ca3af","#6b7280"],borderColor:"#ffffff",borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{color:"#475569",font:{family:"Cairo"}}}}}}))}if(o.current&&d.labels.length>0){const E=o.current.getContext("2d");E&&(l.current.bar=new p(E,{type:"bar",data:{labels:d.labels,datasets:[{label:"الدخل",data:d.incomeData,backgroundColor:"#10b981",borderRadius:4},{label:"المصاريف",data:d.expensesData,backgroundColor:"#ef4444",borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{ticks:{color:"#64748b"},grid:{color:"#e2e8f0"}},x:{ticks:{color:"#64748b"},grid:{display:!1}}},plugins:{legend:{labels:{color:"#475569",font:{family:"Cairo"}}}}}}))}return()=>{var E,A;(E=l.current.pie)==null||E.destroy(),(A=l.current.bar)==null||A.destroy()}}},[c,d]),T.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 animate-fade-in",children:[T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-900",children:"📊 توزيع مصاريف الفترة"}),T.jsx("div",{className:"h-80",children:c.length>0?T.jsx("canvas",{ref:s}):T.jsx("p",{className:"text-center text-slate-500 mt-10",children:"لا توجد مصاريف لعرضها."})})]}),T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-900",children:"📈 الدخل مقابل المصاريف (آخر 6 أشهر)"}),T.jsx("div",{className:"h-80",children:T.jsx("canvas",{ref:o})})]})]})},l4=({state:n,setLoading:e,setModal:t})=>{const[s,o]=fe.useState(""),[l,c]=fe.useState(""),d=async()=>{const p=parseFloat(s);if(isNaN(p)||p<=0){t({title:"خطأ",body:"<p>الرجاء إدخال مبلغ ميزانية صحيح.</p>",confirmText:"موافق",hideCancel:!0});return}e(!0,"جاري إنشاء خطة الميزانية..."),c("");try{const m=new Date;m.setDate(m.getDate()-60);const v=n.transactions.filter(A=>new Date(A.date)>=m&&A.type==="expense");if(v.length<5)throw new Error("لا توجد بيانات كافية عن إنفاقك لإنشاء خطة دقيقة. يرجى إضافة 5 معاملات على الأقل.");const E=await vS(p,n.categories,v);c(E)}catch(m){const v=m instanceof Error?m.message:"حدث خطأ غير متوقع.";t({title:"خطأ في إنشاء الميزانية",body:`<p>${v}</p>`,confirmText:"موافق",hideCancel:!0})}finally{e(!1)}};return T.jsxs("div",{className:"glass-card p-6 animate-fade-in",children:[T.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-900",children:"✨ الميزانية الشهرية الذكية"}),T.jsxs("div",{className:"flex flex-col sm:flex-row items-end gap-4 mb-6 p-4 bg-slate-100 rounded-lg",children:[T.jsxs("div",{className:"flex-grow",children:[T.jsx("label",{htmlFor:"monthly-budget-input",className:"block text-sm font-medium text-slate-600 mb-1",children:"أدخل إجمالي ميزانيتك الشهرية (ريال)"}),T.jsx("input",{type:"number",id:"monthly-budget-input",className:"w-full p-2",placeholder:"5000",value:s,onChange:p=>o(p.target.value)})]}),T.jsx("button",{onClick:d,className:"w-full sm:w-auto px-6 py-2 magical-button text-white rounded-lg font-semibold flex-shrink-0",children:"✨ إنشاء خطة الميزانية"})]}),T.jsx("div",{className:"prose max-w-none",children:l?T.jsx("div",{dangerouslySetInnerHTML:{__html:l.replace(/### (.*)/g,'<h4 class="text-lg font-bold text-slate-900 mt-3 mb-2">$1</h4>').replace(/\n/g,"<br />")}}):T.jsx("p",{className:"text-center text-slate-500",children:"أدخل ميزانيتك أعلاه للحصول على خطة مخصصة بناءً على إنفاقك."})})]})},u4=({state:n,setState:e,calculations:t,setModal:s})=>{const[o,l]=fe.useState([{id:"1",text:'أهلاً بك! أنا مرشدك لفهم عالم الاستثمار. يمكنك سؤالي عن استراتيجيات، أو مفاهيم مثل "ما هو الاستثمار طويل الأجل؟". تذكر، أنا لا أقدم نصائح مباشرة لشراء أسهم معينة.',sender:"ai"}]),[c,d]=fe.useState(""),[p,m]=fe.useState(!1),v=fe.useRef(null);fe.useEffect(()=>{var U;(U=v.current)==null||U.scrollTo(0,v.current.scrollHeight)},[o,p]);const E=U=>{U.preventDefault();const B=U.target,H=parseFloat(B.elements.namedItem("investment-amount").value),Z=B.elements.namedItem("investment-type").value,ee=B.elements.namedItem("payment-method").value;if(isNaN(H)||H<=0){s({title:"خطأ",body:"<p>الرجاء إدخال مبلغ صحيح.</p>"});return}const $={amount:H,date:new Date().toISOString().split("T")[0],description:Z==="deposit"?"إيداع في المحفظة الاستثمارية":"سحب من المحفظة الاستثمارية",paymentMethod:ee,type:Z==="deposit"?"investment-deposit":"investment-withdrawal",categoryId:null};e(F=>({...F,transactions:[...F.transactions,{...$,id:`trans-${Date.now()}`}]})),B.reset()},A=async U=>{U.preventDefault();const B=c.trim();if(!(!B||p)){l(H=>[...H,{id:Date.now().toString(),text:B,sender:"user"}]),d(""),m(!0);try{const H=await _S(B);l(Z=>[...Z,{id:(Date.now()+1).toString(),text:H,sender:"ai"}])}catch(H){l(Z=>[...Z,{id:(Date.now()+1).toString(),text:H instanceof Error?H.message:"عذراً، حدث خطأ.",sender:"ai"}])}finally{m(!1)}}},x=()=>{const U=`<div><label class="block text-sm font-medium text-slate-600 mb-1">القيمة الحالية للمحفظة (ريال)</label><input type="number" id="edit-investment-value" class="w-full p-2" value="${n.investments.currentValue}"><p class="text-xs text-slate-500 mt-2">أدخل القيمة السوقية الحالية لجميع استثماراتك.</p></div>`;s({show:!0,title:"تحديث قيمة المحفظة",body:U,confirmText:"حفظ",onConfirm:()=>{const B=parseFloat(document.getElementById("edit-investment-value").value);if(isNaN(B)||B<0)return alert("الرجاء إدخال قيمة صحيحة."),!1;e(H=>({...H,investments:{...H.investments,currentValue:B}}))}})};return T.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 animate-fade-in",children:[T.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[T.jsxs("div",{className:"glass-card p-6 text-center",children:[T.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"💰 القيمة الحالية للمحفظة"}),T.jsx("p",{className:"text-4xl font-bold text-emerald-500 number-display",children:B0(n.investments.currentValue)}),T.jsxs("p",{className:"text-sm text-slate-500 mt-2",children:["إجمالي المستثمر: ",T.jsx("span",{className:"font-semibold number-display text-slate-600",children:B0(t.totalInvestmentDeposits)})]}),T.jsx("button",{onClick:x,className:"mt-4 w-full px-4 py-2 bg-slate-200 text-slate-800 rounded-lg hover:bg-slate-300 transition-colors text-sm",children:"✏️ تحديث القيمة الحالية"})]}),T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"💸 إضافة حركة استثمارية"}),T.jsxs("form",{onSubmit:E,className:"space-y-4",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"investment-amount",className:"block text-sm font-medium text-slate-600",children:"المبلغ"}),T.jsx("input",{type:"number",id:"investment-amount",name:"investment-amount",className:"mt-1 w-full p-2",required:!0})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"investment-type",className:"block text-sm font-medium text-slate-600",children:"نوع الحركة"}),T.jsxs("select",{id:"investment-type",name:"investment-type",className:"mt-1 w-full p-2",children:[T.jsx("option",{value:"deposit",children:"إيداع للمحفظة"}),T.jsx("option",{value:"withdrawal",children:"سحب من المحفظة"})]})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"payment-method",className:"block text-sm font-medium text-slate-600",children:"الحساب البنكي"}),T.jsx("select",{id:"payment-method",name:"payment-method",className:"mt-1 w-full p-2",children:Object.values(n.bankAccounts).map(U=>T.jsxs("option",{value:U.id,children:["🏦 ",U.name]},U.id))})]}),T.jsx("button",{type:"submit",className:"w-full magical-button text-white font-semibold py-2 rounded-lg",children:"تنفيذ الحركة"})]})]})]}),T.jsxs("div",{className:"lg:col-span-2 glass-card overflow-hidden flex flex-col",style:{height:"75vh"},children:[T.jsxs("div",{className:"p-4 bg-gray-100 text-center flex-shrink-0",children:[T.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"🤖 مستشارك الاستثماري الذكي"}),T.jsx("p",{className:"text-sm text-slate-500",children:"اسأل عن المفاهيم والاستراتيجيات لاتخاذ قرارات أفضل"})]}),T.jsxs("div",{ref:v,className:"p-4 flex-grow overflow-y-auto flex flex-col gap-4",children:[o.map(U=>T.jsx("div",{className:`chat-bubble ${U.sender==="user"?"user-bubble":"ai-bubble"}`,dangerouslySetInnerHTML:{__html:U.text.replace(/\n/g,"<br/>")}},U.id)),p&&T.jsxs("div",{className:"ai-bubble chat-bubble typing-indicator flex items-center space-x-1 p-3 self-start",children:[T.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.3s]"}),T.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.15s]"}),T.jsx("span",{className:"block w-2 h-2 bg-gray-400 rounded-full animate-pulse"})]})]}),T.jsx("div",{className:"p-4 border-t border-gray-200 flex-shrink-0",children:T.jsxs("form",{onSubmit:A,className:"flex gap-2",children:[T.jsx("input",{type:"text",value:c,onChange:U=>d(U.target.value),className:"w-full p-3",placeholder:"اسأل عن الاستثمار...",required:!0,autoComplete:"off",disabled:p}),T.jsx("button",{type:"submit",className:"p-3 magical-button text-white rounded-lg flex-shrink-0",disabled:p,children:T.jsx(aI,{})})]})})]})]})},B0=n=>(n||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),$l=n=>(n||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),c4=({card:n,statementDetails:e,openCardFormModal:t,deleteCard:s})=>{const o=l=>!l||l.length===0?'<tr><td colspan="3" class="text-center text-slate-500 py-3">لا توجد حركات</td></tr>':l.map(c=>`
            <tr class="hover:bg-slate-50">
                <td class="p-2">${c.postingDate||c.date}</td>
                <td class="p-2 truncate" title="${c.description}">${c.description}</td>
                <td class="p-2 number-display text-red-500">${$l(c.amount)}</td>
            </tr>
        `).join("");return T.jsxs("div",{className:"glass-card p-6 flex flex-col",children:[T.jsxs("div",{className:"flex items-start justify-between mb-4",children:[T.jsxs("h3",{className:"text-xl font-bold text-slate-900",children:["💳 ",n.name]}),T.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[T.jsx("button",{onClick:()=>t(n.id),className:"text-sm bg-slate-100 hover:bg-slate-200 w-8 h-8 rounded-full flex items-center justify-center transition-colors","aria-label":`تعديل بطاقة ${n.name}`,children:"✏️"}),T.jsx("button",{onClick:()=>s(n.id),className:"text-sm bg-red-100 hover:bg-red-200 w-8 h-8 rounded-full flex items-center justify-center transition-colors","aria-label":`حذف بطاقة ${n.name}`,children:T.jsx(_g,{})})]})]}),T.jsxs("div",{className:"space-y-3",children:[T.jsxs("div",{className:"bg-slate-100 p-3 rounded-lg",children:[T.jsxs("div",{className:"flex justify-between items-center",children:[T.jsx("span",{className:"text-slate-500 text-sm",children:"المبلغ المستحق للكشف الحالي"}),T.jsxs("span",{className:"font-bold text-2xl text-amber-500 number-display",children:[$l(e.statementDueAmount)," ريال"]})]}),T.jsxs("div",{className:"flex justify-between items-center text-xs mt-1",children:[T.jsx("span",{className:"text-slate-400",children:"تاريخ الاستحقاق:"}),T.jsx("span",{className:"font-semibold text-slate-600",children:e.dueDate.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})})]})]}),T.jsxs("div",{className:"flex justify-between text-sm",children:[T.jsx("span",{children:"الرصيد الإجمالي المستحق:"}),T.jsxs("span",{className:"font-bold text-red-600 number-display",children:[$l(n.balance)," ريال"]})]}),T.jsxs("div",{className:"flex justify-between text-sm",children:[T.jsx("span",{children:"الحد الائتماني:"}),T.jsxs("span",{className:"font-bold number-display",children:[$l(n.limit)," ريال"]})]}),T.jsxs("div",{className:"flex justify-between text-sm",children:[T.jsx("span",{children:"الرصيد المتاح:"}),T.jsxs("span",{className:"font-bold text-green-600 number-display",children:[$l(n.available)," ريال"]})]}),T.jsxs("div",{className:"flex justify-between text-sm",children:[T.jsx("span",{children:"نسبة الاستخدام:"}),T.jsxs("span",{className:`font-bold ${n.usagePercentage>80?"text-red-600":n.usagePercentage>60?"text-yellow-600":"text-green-600"}`,children:[n.usagePercentage.toFixed(1),"%"]})]})]}),T.jsxs("div",{className:"mt-4 flex-grow flex flex-col",children:[T.jsxs("h4",{className:"font-semibold text-slate-600 mb-2 border-b border-slate-200 pb-1",children:["المعاملات القادمة (",e.upcomingTransactions.length,")"]}),T.jsx("div",{className:"flex-grow max-h-32 overflow-y-auto",children:T.jsx("table",{className:"w-full text-xs",dangerouslySetInnerHTML:{__html:`<tbody>${o(e.upcomingTransactions)}</tbody>`}})})]})]})},d4=({state:n,openCardFormModal:e,deleteCard:t})=>{const s=fe.useMemo(()=>{const l={};return Object.values(n.cards).forEach(c=>{const d=new Date,p=d.getDate(),m=d.getMonth(),v=d.getFullYear();let E,A,x;p>c.statementDay?E=new Date(v,m,c.statementDay):E=new Date(v,m-1,c.statementDay),A=new Date(E.getFullYear(),E.getMonth()-1,c.statementDay+1);let U=E.getMonth()+1,B=E.getFullYear();U>11&&(U=0,B+=1),x=new Date(B,U,c.dueDay);const H=n.transactions.filter($=>{const F=new Date($.postingDate||$.date);return $.paymentMethod===c.id&&($.type==="expense"||$.type==="bnpl-payment")&&F>=A&&F<=E}),Z=n.transactions.filter($=>{const F=new Date($.postingDate||$.date);return $.paymentMethod===c.id&&($.type==="expense"||$.type==="bnpl-payment")&&F>E}),ee=H.reduce(($,F)=>$+F.amount,0);l[c.id]={statementDueAmount:ee,dueDate:x,totalOutstanding:0,upcomingTransactions:Z}}),l},[n.transactions,n.cards]),o=Object.values(n.cards);return T.jsxs("div",{className:"space-y-6 animate-fade-in",children:[T.jsxs("div",{className:"flex justify-between items-center",children:[T.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"إدارة البطاقات"}),T.jsx("button",{onClick:()=>e(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:"+ إضافة بطاقة"})]}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:o.map(l=>{const c=n.transactions.filter(p=>p.paymentMethod===l.id&&(p.type==="expense"||p.type==="bnpl-payment")).reduce((p,m)=>p+m.amount,0)-n.transactions.filter(p=>p.type===`${l.id}-payment`).reduce((p,m)=>p+m.amount,0),d={...l,balance:c,available:l.limit-c,usagePercentage:l.limit>0?c/l.limit*100:0};return T.jsx(c4,{card:d,statementDetails:s[d.id],openCardFormModal:e,deleteCard:t},d.id)})})]})},Cd=n=>(n||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),f4=(n,e)=>{const t={income:"💰 دخل",expense:"💸 مصاريف","bnpl-payment":"📱 سداد قسط","investment-deposit":"💹 إيداع استثماري","investment-withdrawal":"💹 سحب استثماري"};if(t[n])return t[n];if(n.endsWith("-payment")){const s=n.replace("-payment","");if(e.cards[s])return`💳 سداد ${e.cards[s].name}`}return n},h4=({account:n,openBankAccountFormModal:e,deleteBankAccount:t})=>T.jsxs("div",{className:"glass-card p-6",children:[T.jsxs("div",{className:"flex justify-between items-start mb-4",children:[T.jsxs("h4",{className:"text-xl font-bold text-slate-900",children:["🏦 ",n.name]}),T.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[T.jsx("button",{onClick:()=>e(n.id),className:"text-sm bg-slate-100 hover:bg-slate-200 w-8 h-8 rounded-full flex items-center justify-center transition-colors","aria-label":`تعديل حساب ${n.name}`,children:"✏️"}),T.jsx("button",{onClick:()=>t(n.id),className:"text-sm bg-red-100 hover:bg-red-200 w-8 h-8 rounded-full flex items-center justify-center transition-colors","aria-label":`حذف حساب ${n.name}`,children:T.jsx(_g,{})})]})]}),T.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg border border-blue-200",children:[T.jsx("p",{className:"text-blue-600 font-semibold",children:"الرصيد الحالي"}),T.jsx("p",{className:"text-3xl font-bold text-blue-800 number-display",children:Cd(n.balance)})]}),T.jsxs("div",{className:"flex justify-between mt-4",children:[T.jsxs("div",{className:"text-center",children:[T.jsx("p",{className:"text-emerald-600 font-semibold",children:"إيداعات الفترة"}),T.jsx("p",{className:"text-lg font-bold text-emerald-800 number-display",children:Cd(n.deposits)})]}),T.jsxs("div",{className:"text-center",children:[T.jsx("p",{className:"text-red-600 font-semibold",children:"سحوبات الفترة"}),T.jsx("p",{className:"text-lg font-bold text-red-800 number-display",children:Cd(n.withdrawals)})]})]})]}),m4=({state:n,setState:e,calculations:t,filteredTransactions:s,categories:o,setModal:l,openBankAccountFormModal:c,deleteBankAccount:d})=>T.jsxs("div",{className:"space-y-6 animate-fade-in",children:[T.jsxs("div",{className:"flex justify-between items-center",children:[T.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"إدارة الحسابات البنكية"}),T.jsx("button",{onClick:()=>c(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:"+ إضافة حساب"})]}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.values(t.bankAccountDetails).map(p=>T.jsx(h4,{account:p,openBankAccountFormModal:c,deleteBankAccount:d},p.id))}),T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-900",children:"📋 معاملات الحسابات البنكية (الفترة المحددة)"}),T.jsx("div",{className:"overflow-x-auto",children:T.jsxs("table",{className:"w-full text-sm",children:[T.jsx("thead",{className:"border-b border-gray-200",children:T.jsxs("tr",{children:[T.jsx("th",{className:"text-right p-3 font-semibold",children:"التاريخ"}),T.jsx("th",{className:"text-right p-3 font-semibold",children:"الحساب"}),T.jsx("th",{className:"text-right p-3 font-semibold",children:"النوع"}),T.jsx("th",{className:"text-right p-3 font-semibold",children:"المبلغ"}),T.jsx("th",{className:"text-right p-3 font-semibold",children:"الفئة"}),T.jsx("th",{className:"text-right p-3 font-semibold",children:"الوصف"})]})}),T.jsx("tbody",{children:s.filter(p=>n.bankAccounts[p.paymentMethod]).sort((p,m)=>new Date(m.date).getTime()-new Date(p.date).getTime()).map(p=>{var A;const m=["income","investment-withdrawal"].includes(p.type),v=m?"text-emerald-500":"text-red-500",E=o.find(x=>x.id===p.categoryId);return T.jsxs("tr",{className:"border-b border-gray-200/50",children:[T.jsx("td",{className:"p-3",children:p.date}),T.jsx("td",{className:"p-3",children:(A=n.bankAccounts[p.paymentMethod])==null?void 0:A.name}),T.jsx("td",{className:"p-3",children:f4(p.type,n)}),T.jsxs("td",{className:`p-3 font-semibold ${v} number-display`,children:[m?"+":"-",Cd(p.amount)]}),T.jsx("td",{className:"p-3",children:E?`${E.icon} ${E.name}`:"-"}),T.jsx("td",{className:"p-3 text-slate-500",children:p.description||"-"})]},p.id)})})]})})]})]}),Ym=n=>(n||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),F0=(n,e)=>{const t={cash:"💵 نقدي","tabby-bnpl":"📱 تابي","tamara-bnpl":"📱 تمارا",reconciliation:"🔄 تسوية"};return t[n]?t[n]:e.cards[n]?`💳 ${e.cards[n].name}`:e.bankAccounts[n]?`🏦 ${e.bankAccounts[n].name}`:n},p4=({state:n,setState:e,filteredTransactions:t,setModal:s})=>{const o=d=>{const p=n.installments.find(E=>E.id===d);if(!p||p.paid>=p.total)return;let m="";Object.values(n.bankAccounts).forEach(E=>{m+=`<option value="${E.id}">🏦 ${E.name}</option>`}),m+='<option value="cash">💵 نقدي</option>',Object.values(n.cards).forEach(E=>{m+=`<option value="${E.id}">💳 ${E.name}</option>`});const v=`<p class="mb-4">اختر مصدر الدفع لسداد قسط "${p.description}" بقيمة ${Ym(p.installmentAmount)} ريال.</p><div><label for="installment-payment-source" class="block text-sm font-medium text-slate-600 mb-2">مصدر الدفع</label><select id="installment-payment-source" class="w-full p-3">${m}</select></div>`;s({show:!0,title:"سداد قسط",body:v,confirmText:"تأكيد الدفع",onConfirm:()=>{var B;const E=document.getElementById("installment-payment-source").value,A=n.categories.find(H=>H.name==="سداد فواتير"||H.name==="💳 سداد فواتير"),x=(A==null?void 0:A.id)||((B=n.categories.find(H=>H.name==="أخرى"))==null?void 0:B.id)||"",U={id:"trans-"+Date.now(),amount:p.installmentAmount,date:new Date().toISOString().split("T")[0],description:`سداد القسط ${p.paid+1} لـ: ${p.description}`,paymentMethod:E,type:"bnpl-payment",categoryId:x,isInstallmentPayment:!0,installmentId:d};e(H=>{const Z=H.installments.map(ee=>ee.id===d?{...ee,paid:ee.paid+1}:ee);return{...H,transactions:[...H.transactions,U],installments:Z}})}})},l=n.installments.filter(d=>d.paid<d.total),c=n.transactions.filter(d=>d.isInstallmentPayment);return T.jsxs("div",{className:"animate-fade-in",children:[T.jsx("h3",{className:"text-2xl font-bold mb-4 text-slate-900",children:"📱 خطط الأقساط النشطة"}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:l.length>0?l.map(d=>{const p=d.paid/d.total*100;return T.jsxs("div",{className:"glass-card p-4",children:[T.jsxs("div",{className:"flex justify-between items-start mb-2",children:[T.jsxs("div",{children:[T.jsx("h4",{className:"font-bold text-slate-900",children:d.description}),T.jsx("p",{className:"text-sm text-slate-500",children:F0(d.provider,n)})]}),T.jsxs("span",{className:"font-bold text-blue-600 number-display",children:[Ym(d.installmentAmount),"/شهر"]})]}),T.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5 mb-1",children:T.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${p}%`}})}),T.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[T.jsxs("span",{children:[d.paid," / ",d.total," مدفوع"]}),T.jsxs("span",{children:["متبقي: ",d.total-d.paid]})]}),T.jsx("div",{className:"text-center mt-4",children:T.jsx("button",{onClick:()=>o(d.id),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm w-full sm:w-auto",children:"دفع القسط التالي"})})]},d.id)}):T.jsx("div",{className:"md:col-span-2 text-center p-6 glass-card",children:T.jsx("p",{className:"text-slate-500",children:"🎉 لا توجد أقساط نشطة حاليًا!"})})}),T.jsxs("div",{className:"glass-card p-6 mt-8",children:[T.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-900",children:"📋 سجل دفعات الأقساط"}),T.jsx("div",{className:"overflow-x-auto",children:T.jsxs("table",{className:"w-full text-sm",children:[T.jsx("thead",{className:"border-b border-gray-200",children:T.jsxs("tr",{children:[T.jsx("th",{className:"text-right p-3 font-semibold",children:"التاريخ"}),T.jsx("th",{className:"text-right p-3 font-semibold",children:"الوصف"}),T.jsx("th",{className:"text-right p-3 font-semibold",children:"المصدر"}),T.jsx("th",{className:"text-right p-3 font-semibold",children:"المبلغ"})]})}),T.jsx("tbody",{children:c.sort((d,p)=>new Date(p.date).getTime()-new Date(d.date).getTime()).map(d=>T.jsxs("tr",{className:"border-b border-gray-200/50",children:[T.jsx("td",{className:"p-3",children:d.date}),T.jsx("td",{className:"p-3 text-slate-600",children:d.description}),T.jsx("td",{className:"p-3",children:F0(d.paymentMethod,n)}),T.jsx("td",{className:"p-3 text-red-500 font-semibold number-display",children:Ym(d.amount)})]},d.id))})]})})]})]})},g4=({state:n,setState:e,setModal:t,setLoading:s,onRestore:o})=>{const[l,c]=fe.useState(Aa()),[d,p]=fe.useState({connected:!1}),[m,v]=fe.useState(!0),[E,A]=fe.useState({firebase:l.hasFirebase,gemini:l.hasGemini});fe.useEffect(()=>{const R=Aa();c(R),A({firebase:R.hasFirebase,gemini:R.hasGemini}),R.hasFirebase?(async()=>{try{v(!0);const V=await _r.getData("test","connection");p({connected:!0})}catch(V){p({connected:!1,error:V instanceof Error?V.message:"خطأ في الاتصال"})}finally{v(!1)}})():(p({connected:!1,error:"مفاتيح Firebase غير متوفرة"}),v(!1))},[]);const x=({isValid:R})=>R?T.jsx(Fm,{className:"w-6 h-6 text-green-500"}):T.jsx(Hm,{className:"w-6 h-6 text-red-500"}),U=()=>T.jsx(QL,{className:"w-6 h-6 text-yellow-500"}),[B,H]=fe.useState({name:"",icon:""}),[Z,ee]=fe.useState(null),$=()=>{if(!B.name.trim()||!B.icon.trim()){t({title:"خطأ",body:"<p>يرجى إدخال اسم وأيقونة للفئة.</p>",hideCancel:!0,confirmText:"موافق"});return}const P={id:`cat-${Date.now()}`,name:B.name.trim(),icon:B.icon.trim()};e(V=>({...V,categories:[...V.categories,P]})),H({name:"",icon:""}),t({title:"نجح",body:"<p>تم إضافة الفئة بنجاح.</p>",hideCancel:!0,confirmText:"موافق"})},F=async()=>{const R=B.name.trim();if(!R){t({title:"خطأ",body:"<p>الرجاء إدخال اسم الفئة أولاً.</p>",hideCancel:!0,confirmText:"موافق"});return}s(!0,"جاري البحث عن أيقونة...");try{const{suggestCategoryIcon:P,initializeAi:V}=await pr(async()=>{const{suggestCategoryIcon:D,initializeAi:Oe}=await Promise.resolve().then(()=>LM);return{suggestCategoryIcon:D,initializeAi:Oe}},void 0);V();const L=await P(R);L&&L.trim()?(H(D=>({...D,icon:L.trim()})),t({title:"تم اقتراح أيقونة",body:`<p>تم اقتراح الأيقونة "${L.trim()}" للفئة "${R}".</p>`,hideCancel:!0,confirmText:"موافق"})):t({title:"خطأ",body:"<p>لم أتمكن من العثور على أيقونة مناسبة.</p>",hideCancel:!0,confirmText:"موافق"})}catch(P){console.error("Icon suggestion error:",P),t({title:"خطأ",body:`<p>حدث خطأ أثناء اقتراح الأيقونة. تأكد من إعداد مفتاح Gemini API بشكل صحيح.</p><p>تفاصيل الخطأ: ${P.message}</p>`,hideCancel:!0,confirmText:"موافق"})}finally{s(!1)}},te=R=>{n.transactions.some(P=>P.categoryId===R)?t({title:"لا يمكن الحذف",body:"<p>لا يمكن حذف هذه الفئة لأنها مستخدمة في بعض الحركات. يرجى تغيير فئة الحركات أولاً.</p>",hideCancel:!0,confirmText:"موافق"}):(e(P=>({...P,categories:P.categories.filter(V=>V.id!==R)})),t({title:"نجح",body:"<p>تم حذف الفئة بنجاح.</p>",hideCancel:!0,confirmText:"موافق"}))},ae=()=>{try{const R=JSON.stringify(n,null,2),P=new Blob([R],{type:"application/json"}),V=URL.createObjectURL(P),L=document.createElement("a");L.href=V,L.download=`masrof_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(V),t({title:"نجح",body:"<p>تم إنشاء النسخة الاحتياطية المحلية بنجاح.</p>",hideCancel:!0,confirmText:"موافق"})}catch{t({title:"خطأ",body:"<p>فشل إنشاء النسخة الاحتياطية.</p>",hideCancel:!0,confirmText:"موافق"})}},N=async()=>{s(!0,"جاري حفظ النسخة الاحتياطية في السحابة...");try{const R=await _r.saveData("backups",`backup_${new Date().toISOString().split("T")[0]}`,{...n,backupDate:new Date().toISOString(),version:"1.0.0"});if(R.success)t({title:"نجح",body:"<p>تم حفظ النسخة الاحتياطية في السحابة بنجاح.</p>",hideCancel:!0,confirmText:"موافق"});else throw new Error(R.error)}catch{t({title:"خطأ",body:"<p>فشل في حفظ النسخة الاحتياطية في السحابة.</p>",hideCancel:!0,confirmText:"موافق"})}finally{s(!1)}},M=R=>{var L;const P=(L=R.target.files)==null?void 0:L[0];if(!P)return;const V=new FileReader;V.onload=D=>{var Oe;try{const Pe=JSON.parse((Oe=D.target)==null?void 0:Oe.result);if(Pe!=null&&Pe.transactions&&(Pe!=null&&Pe.categories))o?o(Pe):t({show:!0,title:"استعادة نسخة احتياطية",body:"<p>هل أنت متأكد؟ سيتم الكتابة فوق جميع بياناتك الحالية.</p>",confirmText:"نعم، استعادة",onConfirm:()=>{const X={transactions:Pe.transactions||[],categories:Pe.categories||[],installments:Pe.installments||[],investments:Pe.investments||{currentValue:0},cards:Pe.cards||{},bankAccounts:Pe.bankAccounts||{}};e(X),t({title:"تم الاستعادة بنجاح",body:"<p>تم استعادة بياناتك بنجاح.</p>",confirmText:"موافق",hideCancel:!0})}});else throw new Error("Invalid backup file format.")}catch{t({show:!0,title:"خطأ",body:"<p>فشل في استعادة النسخة الاحتياطية. الملف غير صالح.</p>",confirmText:"موافق",hideCancel:!0})}},V.readAsText(P),R.target.value=""};return T.jsxs("div",{className:"space-y-6 animate-fade-in",children:[T.jsx("div",{className:"flex justify-between items-center",children:T.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"⚙️ إعدادات النظام"})}),T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"🔑 حالة مفاتيح API"}),T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"text-2xl",children:"🔥"}),T.jsxs("div",{children:[T.jsx("h4",{className:"font-semibold text-slate-800",children:"Firebase Configuration"}),T.jsxs("p",{className:"text-sm text-slate-600",children:["Project ID: ",Ct.firebase.projectId]})]})]}),T.jsx("div",{className:"flex items-center gap-2",children:E.firebase?d.connected?T.jsxs(T.Fragment,{children:[T.jsx(Fm,{className:"w-6 h-6 text-green-500"}),T.jsx("span",{className:"text-sm text-green-600",children:"متصل"})]}):T.jsxs(T.Fragment,{children:[T.jsx(U,{}),T.jsx("span",{className:"text-sm text-yellow-600",children:"مفاتيح موجودة لكن غير متصل"})]}):T.jsxs(T.Fragment,{children:[T.jsx(Hm,{className:"w-6 h-6 text-red-500"}),T.jsx("span",{className:"text-sm text-red-600",children:"مفاتيح غير متوفرة"})]})})]}),T.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"text-2xl",children:"🤖"}),T.jsxs("div",{children:[T.jsx("h4",{className:"font-semibold text-slate-800",children:"Gemini AI API"}),T.jsxs("p",{className:"text-sm text-slate-600",children:["Model: ",Ct.gemini.model]})]})]}),T.jsx("div",{className:"flex items-center gap-2",children:E.gemini?T.jsxs(T.Fragment,{children:[T.jsx(Fm,{className:"w-6 h-6 text-green-500"}),T.jsx("span",{className:"text-sm text-green-600",children:"مُعد"})]}):T.jsxs(T.Fragment,{children:[T.jsx(Hm,{className:"w-6 h-6 text-red-500"}),T.jsx("span",{className:"text-sm text-red-600",children:"غير مُعد"})]})})]})]}),!l.isValid&&T.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[T.jsx("h5",{className:"font-semibold text-red-800 mb-2",children:"⚠️ تحذيرات:"}),T.jsx("ul",{className:"space-y-1",children:l.errors.map((R,P)=>T.jsxs("li",{className:"text-sm text-red-600",children:["• ",R]},P))})]})]}),T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"📱 معلومات المشروع"}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[T.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[T.jsx("p",{className:"text-sm text-slate-600",children:"اسم التطبيق"}),T.jsx("p",{className:"font-semibold text-slate-800",children:Ct.app.name})]}),T.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[T.jsx("p",{className:"text-sm text-slate-600",children:"الإصدار"}),T.jsx("p",{className:"font-semibold text-slate-800",children:Ct.app.version})]}),T.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[T.jsx("p",{className:"text-sm text-slate-600",children:"البيئة"}),T.jsx("p",{className:"font-semibold text-slate-800",children:Ct.app.environment})]}),T.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[T.jsx("p",{className:"text-sm text-slate-600",children:"حالة النظام"}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(x,{isValid:l.isValid&&d.connected}),T.jsx("span",{className:`text-sm font-semibold ${l.isValid&&d.connected?"text-green-600":"text-red-600"}`,children:l.isValid&&d.connected?"جاهز":"يحتاج إعداد"})]})]}),T.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[T.jsx("p",{className:"text-sm text-slate-600",children:"تطوير"}),T.jsx("p",{className:"font-semibold text-slate-800",children:"Khaleel Alsani"})]})]})]}),(!l.isValid||!d.connected)&&T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"📝 تعليمات الإعداد"}),T.jsxs("div",{className:"space-y-4",children:[!E.gemini&&T.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[T.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"🤖 إعداد Gemini API:"}),T.jsxs("ol",{className:"text-sm text-yellow-700 space-y-1 list-decimal list-inside",children:[T.jsxs("li",{children:["اذهب إلى ",T.jsx("a",{href:"https://makersuite.google.com/app/apikey",target:"_blank",className:"underline",children:"Google AI Studio"})]}),T.jsx("li",{children:"أنشئ مفتاح API جديد"}),T.jsxs("li",{children:["أضف المفتاح كـ GitHub Secret باسم ",T.jsx("code",{className:"bg-yellow-100 px-1 rounded",children:"VITE_GEMINI_API_KEY"})]}),T.jsxs("li",{children:["أو ضعه في ملف ",T.jsx("code",{className:"bg-yellow-100 px-1 rounded",children:".env.local"})," للتطوير المحلي"]})]})]}),!E.firebase&&T.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[T.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"🔥 إعداد Firebase:"}),T.jsxs("p",{className:"text-sm text-blue-700",children:["تأكد من إضافة جميع مفاتيح Firebase كـ GitHub Secrets:",T.jsx("br",{}),"• VITE_FIREBASE_API_KEY",T.jsx("br",{}),"• VITE_FIREBASE_AUTH_DOMAIN",T.jsx("br",{}),"• VITE_FIREBASE_PROJECT_ID",T.jsx("br",{}),"• VITE_FIREBASE_STORAGE_BUCKET",T.jsx("br",{}),"• VITE_FIREBASE_MESSAGING_SENDER_ID",T.jsx("br",{}),"• VITE_FIREBASE_APP_ID"]})]})]})]}),T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"📂 إدارة الفئات"}),T.jsxs("div",{className:"mb-6 p-4 bg-slate-50 rounded-lg",children:[T.jsx("h4",{className:"font-semibold text-slate-800 mb-3",children:"➕ إضافة فئة جديدة"}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[T.jsx("input",{type:"text",placeholder:"اسم الفئة",value:B.name,onChange:R=>H(P=>({...P,name:R.target.value})),className:"px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("input",{type:"text",placeholder:"الأيقونة (مثل: 🍔)",value:B.icon,onChange:R=>H(P=>({...P,icon:R.target.value})),className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),T.jsx("button",{type:"button",onClick:F,disabled:!B.name.trim(),className:"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"اقتراح أيقونة بالذكاء الاصطناعي",children:"🤖"})]})]}),T.jsx("button",{onClick:$,className:"mt-3 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"➕ إضافة الفئة"})]}),T.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:n.categories.map(R=>T.jsxs("div",{className:"p-3 bg-white border border-slate-200 rounded-lg flex items-center justify-between",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("span",{className:"text-lg",children:R.icon}),T.jsx("span",{className:"text-sm font-medium text-slate-800",children:R.name})]}),T.jsx("button",{onClick:()=>te(R.id),className:"text-red-500 hover:text-red-700 text-sm",title:"حذف الفئة",children:"🗑️"})]},R.id))})]}),T.jsxs("div",{className:"glass-card p-6",children:[T.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900",children:"💾 النسخ الاحتياطي والاستعادة"}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[T.jsxs("div",{children:[T.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"📤 نسخة احتياطية محلية"}),T.jsx("p",{className:"text-slate-600 mb-3 text-sm",children:"احفظ جميع بياناتك في ملف آمن."}),T.jsx("button",{onClick:ae,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"💾 تحميل ملف"})]}),T.jsxs("div",{children:[T.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"☁️ نسخة احتياطية سحابية"}),T.jsx("p",{className:"text-slate-600 mb-3 text-sm",children:"احفظ بياناتك في السحابة للوصول من أي مكان."}),T.jsx("button",{onClick:N,className:"w-full px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",children:"☁️ حفظ في السحابة"})]}),T.jsxs("div",{children:[T.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"📥 استعادة البيانات"}),T.jsx("p",{className:"text-slate-600 mb-3 text-sm",children:"استعد بياناتك من ملف نسخة احتياطية."}),T.jsx("input",{type:"file",id:"backup-file",accept:".json",className:"hidden",onChange:M}),T.jsx("button",{onClick:()=>{var R;return(R=document.getElementById("backup-file"))==null?void 0:R.click()},className:"w-full px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg transition-colors",children:"📥 استعادة البيانات"})]})]})]}),T.jsx("div",{className:"text-center",children:T.jsx("button",{onClick:()=>{c(Aa()),window.location.reload()},disabled:m,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:m?"جاري التحقق...":"🔄 إعادة التحقق"})})]})},y4=({onClose:n,onSave:e,initialData:t,categories:s,cards:o,bankAccounts:l})=>{var $;const[c,d]=fe.useState({amount:0,date:new Date().toISOString().split("T")[0],description:"",paymentMethod:Object.keys(l)[0]||"cash",type:"expense",categoryId:(($=s.find(F=>F.name==="أخرى"))==null?void 0:$.id)||null}),[p,m]=fe.useState(!1),[v,E]=fe.useState(""),[A,x]=fe.useState({isOpen:!1,text:""});fe.useEffect(()=>{var F;t?d(t):(F=navigator.clipboard)!=null&&F.readText&&(async()=>{try{const te=await navigator.clipboard.readText();te&&te.trim().length>10&&sessionStorage.getItem("ignoredClipboardText")!==te&&x({isOpen:!0,text:te})}catch{console.info("Clipboard read access denied or not supported.")}})()},[t]);const U=F=>{const{name:te,value:ae}=F.target;d(N=>({...N,[te]:te==="amount"?parseFloat(ae):ae}))},B=F=>{F.preventDefault(),e(c,t==null?void 0:t.id)},H=async F=>{if(F.trim()){m(!0),E("");try{const te=await yS(F,s,o,l),ae=JSON.parse(te);ae.error?E(ae.error):d(N=>({...N,amount:ae.amount||N.amount,date:ae.date||N.date,description:ae.merchant||N.description,paymentMethod:ae.paymentMethod||N.paymentMethod,categoryId:ae.categoryId||N.categoryId}))}catch(te){E(te instanceof Error?te.message:"فشل تحليل النص."),console.error(te)}finally{m(!1)}}},Z=fe.useMemo(()=>{const F=[{value:"cash",label:"💵 نقدي"}];return Object.values(l).forEach(te=>F.push({value:te.id,label:`🏦 ${te.name}`})),Object.values(o).forEach(te=>F.push({value:te.id,label:`💳 ${te.name}`})),F.push({value:"tabby-bnpl",label:"📱 تابي"}),F.push({value:"tamara-bnpl",label:"📱 تمارا"}),F},[l,o]),ee=fe.useMemo(()=>{const F=[{value:"expense",label:"💸 مصاريف"},{value:"income",label:"💰 دخل"},{value:"bnpl-payment",label:"📱 سداد قسط"},{value:"investment-deposit",label:"💹 إيداع استثماري"},{value:"investment-withdrawal",label:"💹 سحب استثماري"}];return Object.values(o).forEach(te=>F.push({value:`${te.id}-payment`,label:`💳 سداد ${te.name}`})),F},[o]);return T.jsxs(T.Fragment,{children:[A.isOpen&&T.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] flex items-center justify-center p-4",onClick:()=>x({isOpen:!1,text:""}),children:T.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md animate-fade-in",onClick:F=>F.stopPropagation(),children:T.jsxs("div",{className:"p-6",children:[T.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"اكتشاف نص في الحافظة"}),T.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"وجدنا نصاً في حافظة النصوص. هل تود لصقه وتحليله لتعبئة الحقول تلقائياً؟"}),T.jsx("pre",{className:"bg-slate-100 p-3 rounded-md text-xs text-slate-500 max-h-24 overflow-y-auto whitespace-pre-wrap font-sans",children:A.text}),T.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[T.jsx("button",{onClick:()=>{sessionStorage.setItem("ignoredClipboardText",A.text),x({isOpen:!1,text:""})},className:"px-4 py-2 bg-slate-200 rounded-lg",children:"تجاهل"}),T.jsx("button",{onClick:()=>{x({isOpen:!1,text:""}),H(A.text)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"لصق وتحليل"})]})]})})}),T.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:n,children:T.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg animate-fade-in max-h-[90vh] overflow-y-auto",onClick:F=>F.stopPropagation(),children:T.jsxs("div",{className:"p-6",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:t?"تعديل الحركة":"إضافة حركة جديدة"}),T.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600",children:T.jsx(vg,{})})]}),p&&T.jsxs("div",{className:"text-center p-4 mb-4 bg-blue-50 rounded-lg",children:[T.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mx-auto"}),T.jsx("p",{className:"text-blue-600 mt-2 text-sm",children:"جاري التحليل..."})]}),v&&T.jsx("p",{className:"text-red-500 text-sm mb-4 bg-red-50 p-3 rounded-lg",children:v}),T.jsxs("form",{onSubmit:B,className:"space-y-4",children:[T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"amount",className:"form-label",children:"المبلغ"}),T.jsx("input",{type:"number",name:"amount",value:c.amount,onChange:U,className:"w-full",required:!0,step:"0.01"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"date",className:"form-label",children:"التاريخ"}),T.jsx("input",{type:"date",name:"date",value:c.date,onChange:U,className:"w-full",required:!0})]})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"description",className:"form-label",children:"الوصف"}),T.jsx("input",{type:"text",name:"description",value:c.description,onChange:U,className:"w-full",required:!0})]}),T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"type",className:"form-label",children:"نوع الحركة"}),T.jsx("select",{name:"type",value:c.type,onChange:U,className:"w-full",children:ee.map(F=>T.jsx("option",{value:F.value,children:F.label},F.value))})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"paymentMethod",className:"form-label",children:"وسيلة الدفع"}),T.jsx("select",{name:"paymentMethod",value:c.paymentMethod,onChange:U,className:"w-full",children:Z.map(F=>T.jsx("option",{value:F.value,children:F.label},F.value))})]})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"categoryId",className:"form-label",children:"الفئة"}),T.jsxs("select",{name:"categoryId",value:c.categoryId||"",onChange:U,className:"w-full",children:[T.jsx("option",{value:"",children:"-- اختر فئة --"}),s.map(F=>T.jsxs("option",{value:F.id,children:[F.icon," ",F.name]},F.id))]})]}),T.jsx("button",{type:"submit",className:"w-full py-3 magical-button text-white font-semibold rounded-lg mt-6",children:t?"حفظ التعديلات":"إضافة الحركة"})]})]})})})]})},_4=({onClose:n,onSave:e,initialData:t})=>{var d;const[s,o]=fe.useState({name:"",limit:0,dueDay:15,statementDay:25,smsSamples:[]});fe.useEffect(()=>{t&&o(t)},[t]);const l=p=>{const{name:m,value:v,type:E}=p.target;o(m==="smsSamples"?A=>({...A,smsSamples:v.split(",").map(x=>x.trim()).filter(Boolean)}):A=>({...A,[m]:E==="number"?parseFloat(v)||0:v}))},c=p=>{p.preventDefault(),e(s,t==null?void 0:t.id)};return T.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:n,children:T.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg animate-fade-in",onClick:p=>p.stopPropagation(),children:T.jsxs("div",{className:"p-6",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:t?"تعديل البطاقة":"إضافة بطاقة جديدة"}),T.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600",children:T.jsx(vg,{})})]}),T.jsxs("form",{onSubmit:c,className:"space-y-4",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-600 mb-1",children:"اسم البطاقة"}),T.jsx("input",{type:"text",name:"name",value:s.name,onChange:l,className:"w-full p-2",required:!0})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"limit",className:"block text-sm font-medium text-slate-600 mb-1",children:"الحد الائتماني"}),T.jsx("input",{type:"number",name:"limit",value:s.limit,onChange:l,className:"w-full p-2",required:!0,step:"100"})]}),T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"statementDay",className:"block text-sm font-medium text-slate-600 mb-1",children:"يوم إصدار الكشف (شهرياً)"}),T.jsx("input",{type:"number",name:"statementDay",value:s.statementDay,onChange:l,className:"w-full p-2",required:!0,min:"1",max:"31"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"dueDay",className:"block text-sm font-medium text-slate-600 mb-1",children:"يوم الاستحقاق (شهرياً)"}),T.jsx("input",{type:"number",name:"dueDay",value:s.dueDay,onChange:l,className:"w-full p-2",required:!0,min:"1",max:"31"})]})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"smsSamples",className:"block text-sm font-medium text-slate-600 mb-1",children:"الكلمات المفتاحية للرسائل (افصل بفواصل)"}),T.jsx("input",{type:"text",name:"smsSamples",value:((d=s.smsSamples)==null?void 0:d.join(", "))||"",onChange:l,className:"w-full p-2",placeholder:"مثال: SNB, الأهلي, إئتمانية"}),T.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"كلمات فريدة من رسائل البنك للمساعدة في التعرف التلقائي عند لصق نص رسالة."})]}),T.jsx("button",{type:"submit",className:"w-full py-3 magical-button text-white font-semibold rounded-lg mt-6",children:t?"حفظ التعديلات":"إضافة البطاقة"})]})]})})})},v4=({onClose:n,onSave:e,initialData:t})=>{var d;const[s,o]=fe.useState({name:"",balance:0,smsSamples:[]});fe.useEffect(()=>{t&&o(t)},[t]);const l=p=>{const{name:m,value:v,type:E}=p.target;o(m==="smsSamples"?A=>({...A,smsSamples:v.split(",").map(x=>x.trim()).filter(Boolean)}):A=>({...A,[m]:E==="number"?parseFloat(v)||0:v}))},c=p=>{p.preventDefault(),e(s,t==null?void 0:t.id)};return T.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:n,children:T.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg animate-fade-in",onClick:p=>p.stopPropagation(),children:T.jsxs("div",{className:"p-6",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:t?"تعديل الحساب":"إضافة حساب بنكي"}),T.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600",children:T.jsx(vg,{})})]}),T.jsxs("form",{onSubmit:c,className:"space-y-4",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-600 mb-1",children:"اسم الحساب"}),T.jsx("input",{type:"text",name:"name",value:s.name,onChange:l,className:"w-full p-2",required:!0})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"balance",className:"block text-sm font-medium text-slate-600 mb-1",children:"الرصيد الافتتاحي"}),T.jsx("input",{type:"number",name:"balance",value:s.balance,onChange:l,className:"w-full p-2",required:!0,step:"10"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"smsSamples",className:"block text-sm font-medium text-slate-600 mb-1",children:"الكلمات المفتاحية للرسائل (افصل بفواصل)"}),T.jsx("input",{type:"text",name:"smsSamples",value:((d=s.smsSamples)==null?void 0:d.join(", "))||"",onChange:l,className:"w-full p-2",placeholder:"مثال: Alrajhi, الراجحي, مدى"}),T.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"كلمات فريدة من رسائل البنك للمساعدة في التعرف التلقائي عند لصق نص رسالة."})]}),T.jsx("button",{type:"submit",className:"w-full py-3 magical-button text-white font-semibold rounded-lg mt-6",children:t?"حفظ التعديلات":"إضافة الحساب"})]})]})})})},T4=()=>{const[n,e]=fe.useState(!1),[t,s]=fe.useState(rd),[o,l]=fe.useState(new Date().getFullYear()),[c,d]=fe.useState(new Date().getMonth()+1),[p,m]=fe.useState("summary"),[v,E]=fe.useState({isLoading:!1,text:""}),[A,x]=fe.useState(null),[U,B]=fe.useState({isOpen:!1}),[H,Z]=fe.useState({isOpen:!1}),[ee,$]=fe.useState({isOpen:!1}),[F,te]=fe.useState(null),[ae,N]=fe.useState(!1),[M,R]=fe.useState(!0);fe.useEffect(()=>{(async()=>{pS();try{const pe=await _r.getCurrentUser();pe?(te(pe),await P(pe.uid)):await V()}catch(pe){console.error("خطأ في التحقق من المصادقة:",pe),await V()}finally{R(!1),e(!0)}})()},[]);const P=async le=>{try{const pe=await _r.getData("users",le);if(pe.success&&pe.data){const _e=rd(),be={..._e,...pe.data,cards:{..._e.cards,...pe.data.cards||{}},bankAccounts:{..._e.bankAccounts,...pe.data.bankAccounts||{}},investments:{..._e.investments,...pe.data.investments||{}}};s(be),console.log("✅ تم تحميل بيانات المستخدم من Firebase")}}catch(pe){console.error("خطأ في تحميل بيانات المستخدم:",pe)}},V=async()=>{try{const le=localStorage.getItem("financial_dashboard_state");if(le){const pe=JSON.parse(le),_e=rd(),be={..._e,...pe,cards:{..._e.cards,...pe.cards||{}},bankAccounts:{..._e.bankAccounts,...pe.bankAccounts||{}},investments:{..._e.investments,...pe.investments||{}}};s(be),console.log("✅ تم تحميل البيانات من localStorage")}}catch(le){console.error("خطأ في تحميل البيانات المحلية:",le)}};fe.useEffect(()=>{if(n&&!M&&(localStorage.setItem("financial_dashboard_state",JSON.stringify(t)),F)){const pe=setTimeout(async()=>{try{const _e=await _r.saveData("users",F.uid,t);_e.success?console.log("✅ تم حفظ البيانات في Firebase"):console.warn("⚠️ فشل في حفظ البيانات في Firebase:",_e.error)}catch(_e){console.error("❌ خطأ في حفظ البيانات في Firebase:",_e)}},2e3);return()=>clearTimeout(pe)}},[t,n,F,M]);const L=(le,pe="")=>E({isLoading:le,text:pe}),D=fe.useCallback(()=>t.transactions?t.transactions.filter(le=>{const pe=new Date(le.date),_e=pe.getFullYear()===o,be=c==="all"||pe.getMonth()+1===c;return _e&&be}):[],[t.transactions,o,c]),Oe=fe.useMemo(()=>D(),[D]),Pe=fe.useMemo(()=>{const le={},pe={},_e={},be={};t.cards&&typeof t.cards=="object"&&Object.values(t.cards).forEach(Ee=>{Ee&&Ee.id&&(_e[Ee.id]={...Ee,balance:0,available:Ee.limit,usagePercentage:0})}),t.bankAccounts&&typeof t.bankAccounts=="object"&&Object.values(t.bankAccounts).forEach(Ee=>{Ee&&Ee.id&&(be[Ee.id]={...Ee,deposits:0,withdrawals:0})});let Qe=0,Rn=0,Ti=0,ks=0;Oe.forEach(Ee=>{if(Ee.type==="income")Qe+=Ee.amount;else if(Ee.type==="expense"||Ee.type==="bnpl-payment")Rn+=Ee.amount,Ee.categoryId&&(le[Ee.categoryId]=(le[Ee.categoryId]||0)+Ee.amount);else if(Ee.type==="investment-deposit")Ti+=Ee.amount,Rn+=Ee.amount;else if(Ee.type==="investment-withdrawal")ks+=Ee.amount,Qe+=Ee.amount;else if(Ee.type.endsWith("-payment")){const zt=Ee.type.replace("-payment","");pe[zt]?pe[zt]+=Ee.amount:pe[zt]=Ee.amount}}),Object.keys(t.cards).forEach(Ee=>{const zt=t.transactions.filter(Yt=>Yt.paymentMethod===Ee&&(Yt.type==="expense"||Yt.type==="bnpl-payment")).reduce((Yt,tn)=>Yt+tn.amount,0),Gt=t.transactions.filter(Yt=>Yt.type===`${Ee}-payment`).reduce((Yt,tn)=>Yt+tn.amount,0),vn=zt-Gt;_e[Ee].balance=vn,_e[Ee].available=_e[Ee].limit-vn,_e[Ee].usagePercentage=_e[Ee].limit>0?vn/_e[Ee].limit*100:0}),Object.keys(t.bankAccounts).forEach(Ee=>{let Gt=t.bankAccounts[Ee].balance,vn=0,Yt=0;Oe.forEach(tn=>{tn.paymentMethod===Ee&&(["income","investment-withdrawal"].includes(tn.type)?vn+=tn.amount:Yt+=tn.amount),tn.type.endsWith("-payment")&&tn.paymentMethod===Ee&&(Yt+=tn.amount)}),be[Ee].balance=Gt,be[Ee].deposits=vn,be[Ee].withdrawals=Yt});const Pr=Object.values(_e).reduce((Ee,zt)=>Ee+zt.balance,0),Et=Object.values(_e).reduce((Ee,zt)=>Ee+zt.available,0),bt=Object.values(_e).reduce((Ee,zt)=>Ee+zt.limit,0),Ei=Object.values(be).reduce((Ee,zt)=>Ee+zt.balance,0);return{totalIncome:Qe,totalExpenses:Rn,cardDetails:_e,cardPayments:pe,bankAccountDetails:be,totalDebt:Pr,totalAvailable:Et,totalLimits:bt,totalBankBalance:Ei,totalInvestmentDeposits:Ti,totalInvestmentWithdrawals:ks,expensesByCategory:le}},[Oe,t.transactions,t.cards,t.bankAccounts]),X=(le,pe)=>{s(_e=>{const be=pe?_e.transactions.map(Qe=>Qe.id===pe?{...Qe,...le}:Qe):[..._e.transactions,{...le,id:`trans-${Date.now()}`}];return{..._e,transactions:be}}),B({isOpen:!1})},ce=le=>{x({title:"تأكيد الحذف",body:"<p>هل أنت متأكد من رغبتك في حذف هذه الحركة؟ لا يمكن التراجع عن هذا الإجراء.</p>",confirmText:"نعم, حذف",onConfirm:()=>{s(pe=>({...pe,transactions:pe.transactions.filter(_e=>_e.id!==le)})),x(null)}})},Se=le=>{const pe=t.transactions.find(_e=>_e.id===le);pe&&B({isOpen:!0,initialData:pe})},Je=async le=>{te(le),N(!1),await P(le.uid)},et=()=>{te(null),V()},q=()=>{N(!0)},ie=(le,pe)=>{s(_e=>{const be={..._e.cards};if(pe)be[pe]={...be[pe],...le,id:pe};else{const Qe=`card-${Date.now()}`;be[Qe]={...le,id:Qe}}return{..._e,cards:be}}),Z({isOpen:!1})},de=le=>{var pe;t.transactions.some(_e=>_e.paymentMethod===le||_e.type===`${le}-payment`)?x({title:"لا يمكن الحذف",body:"<p>لا يمكن حذف هذه البطاقة لأنها مستخدمة في بعض الحركات. يرجى تعديل الحركات أولاً.</p>",hideCancel:!0,confirmText:"موافق"}):x({title:"تأكيد الحذف",body:`<p>هل أنت متأكد من رغبتك في حذف بطاقة "${(pe=t.cards[le])==null?void 0:pe.name}"؟</p>`,confirmText:"نعم, حذف",onConfirm:()=>{s(_e=>{const be={..._e.cards};return delete be[le],{..._e,cards:be}}),x(null)}})},he=(le,pe)=>{s(_e=>{const be={..._e.bankAccounts};if(pe)be[pe]={...be[pe],...le,id:pe};else{const Qe=`bank-${Date.now()}`;be[Qe]={...le,id:Qe}}return{..._e,bankAccounts:be}}),$({isOpen:!1})},Re=le=>{var pe;t.transactions.some(_e=>_e.paymentMethod===le)?x({title:"لا يمكن الحذف",body:"<p>لا يمكن حذف هذا الحساب لأنه مستخدم في بعض الحركات. يرجى تعديل الحركات أولاً.</p>",hideCancel:!0,confirmText:"موافق"}):x({title:"تأكيد الحذف",body:`<p>هل أنت متأكد من رغبتك في حذف حساب "${(pe=t.bankAccounts[le])==null?void 0:pe.name}"؟</p>`,confirmText:"نعم, حذف",onConfirm:()=>{s(_e=>{const be={..._e.bankAccounts};return delete be[le],{..._e,bankAccounts:be}}),x(null)}})},Ve=le=>{x({title:"استعادة نسخة احتياطية",body:"<p>هل أنت متأكد من استعادة هذه البيانات؟ سيتم استبدال جميع البيانات الحالية.</p>",confirmText:"استعادة",cancelText:"إلغاء",onConfirm:()=>{try{const pe=rd();if(le.creditCards&&!le.cards){const be={};Object.entries(le.creditCards).forEach(([Qe,Rn])=>{be[Qe]={id:Qe,name:Qe.toUpperCase(),limit:Rn.creditLimit||0,balance:Rn.currentBalance||0,dueDay:Rn.dueDay||1,smsSamples:[],keywords:[]}}),le.cards=be}if(le.cards&&typeof le.cards=="object"&&(le.cards.snb||le.cards.enbd)){const be={};le.cards.snb&&(be["snb-card"]={id:"snb-card",name:"SNB الأهلي",limit:le.cards.snb.limit||0,dueDay:le.cards.snb.dueDay||1,statementDay:25,smsSamples:["SNB","الأهلي","إئتمانية"]}),le.cards.enbd&&(be["enbd-card"]={id:"enbd-card",name:"ENBD الإمارات",limit:le.cards.enbd.limit||0,dueDay:le.cards.enbd.dueDay||1,statementDay:28,smsSamples:["ENBD","الإمارات","Visa card"]}),le.cards=be}le.bank&&!le.bankAccounts&&(le.bankAccounts={"bank-default":{id:"bank-default",name:"حساب البنك",balance:le.bank.balance||0,smsSamples:["مدى","mada","Alrajhi","الراجحي","Inma","الإنماء","بنك"]}}),le.transactions&&Array.isArray(le.transactions)&&(le.transactions=le.transactions.map(be=>be.paymentMethod==="mada-bank"?{...be,paymentMethod:"bank-default"}:be));const _e={...pe,...le};s(_e),F&&(async()=>{try{const Qe=await _r.saveData("users",F.uid,_e);Qe.success?console.log("✅ تم حفظ البيانات المستعادة في Firebase"):console.warn("⚠️ فشل في حفظ البيانات في Firebase:",Qe.error)}catch(Qe){console.error("❌ خطأ في حفظ البيانات في Firebase:",Qe)}})(),x({title:"تم الاستعادة بنجاح",body:"<p>تم استعادة بياناتك بنجاح وحفظها في السحابة.</p>",confirmText:"موافق",hideCancel:!0})}catch{x({title:"خطأ في الاستعادة",body:"<p>حدث خطأ أثناء استعادة البيانات. يرجى المحاولة مرة أخرى.</p>",confirmText:"موافق",hideCancel:!0})}}})},Fe=le=>Z({isOpen:!0,initialData:le?t.cards[le]:null}),It=le=>$({isOpen:!0,initialData:le?t.bankAccounts[le]:null});if(!n||M)return T.jsx(e4,{});`${o}${c==="all"?"كل الشهور":new Date(o,c-1).toLocaleString("ar-SA",{month:"long"})}`;const ft=()=>{switch(p){case"summary":return T.jsx(i4,{calculations:Pe,categories:t.categories});case"transactions":return T.jsx(s4,{transactions:Oe,allTransactions:t.transactions,categories:t.categories,deleteTransaction:ce,editTransaction:Se,state:t});case"ai-assistant":return T.jsx(o4,{calculations:Pe,filteredTransactions:Oe});case"analysis":return T.jsx(a4,{calculations:Pe,categories:t.categories,allTransactions:t.transactions});case"budget":return T.jsx(l4,{state:t,setLoading:L,setModal:x});case"investment":return T.jsx(u4,{state:t,setState:s,calculations:Pe,setModal:x});case"cards":return T.jsx(d4,{state:t,openCardFormModal:Fe,deleteCard:de});case"bank":return T.jsx(m4,{state:t,setState:s,calculations:Pe,filteredTransactions:Oe,categories:t.categories,setModal:x,openBankAccountFormModal:It,deleteBankAccount:Re});case"installments":return T.jsx(p4,{state:t,setState:s,filteredTransactions:Oe,setModal:x});case"settings":return T.jsx(g4,{state:t,setState:s,setModal:x,setLoading:L,onRestore:Ve});default:return T.jsx("div",{children:"Tab not found"})}};return T.jsxs("div",{className:"bg-slate-100 min-h-screen font-sans",children:[T.jsx(XL,{selectedYear:o,selectedMonth:c,onYearChange:l,onMonthChange:le=>d(le),onAddTransaction:()=>B({isOpen:!0}),currentUser:F,onSignOut:et,onOpenAuth:q}),T.jsxs("main",{className:"container mx-auto px-2 sm:px-4 max-w-7xl mt-8 mb-20",children:[T.jsx(WL,{activeTab:p,setActiveTab:m}),ft()]}),T.jsx("button",{onClick:()=>B({isOpen:!0}),className:"md:hidden fixed bottom-24 right-4 bg-blue-600 text-white w-14 h-14 rounded-full shadow-lg flex items-center justify-center z-40 text-2xl",children:"+"}),U.isOpen&&T.jsx(y4,{onClose:()=>B({isOpen:!1}),onSave:X,initialData:U.initialData,categories:t.categories,cards:t.cards,bankAccounts:t.bankAccounts}),H.isOpen&&T.jsx(_4,{onClose:()=>Z({isOpen:!1}),onSave:ie,initialData:H.initialData}),ee.isOpen&&T.jsx(v4,{onClose:()=>$({isOpen:!1}),onSave:he,initialData:ee.initialData}),A&&T.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center",onClick:()=>x(null),children:T.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-4 animate-fade-in",onClick:le=>le.stopPropagation(),children:[T.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:A.title}),T.jsx("div",{className:"text-slate-600",dangerouslySetInnerHTML:{__html:A.body}}),T.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[!A.hideCancel&&T.jsx("button",{onClick:()=>x(null),className:"px-4 py-2 bg-slate-200 rounded-lg",children:"إلغاء"}),T.jsx("button",{onClick:()=>{(!A.onConfirm||A.onConfirm()!==!1)&&x(null)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:A.confirmText||"موافق"})]})]})}),v.isLoading&&T.jsxs("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex flex-col items-center justify-center",children:[T.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"}),T.jsx("p",{className:"text-white mt-4",children:v.text||"جاري التحميل..."})]}),ae&&T.jsx(GL,{onSuccess:Je,onClose:()=>N(!1)})]})},lI=document.getElementById("root");if(!lI)throw new Error("Could not find root element");const E4=Qb.createRoot(lI);E4.render(T.jsx(Hb.StrictMode,{children:T.jsx(T4,{})}));
